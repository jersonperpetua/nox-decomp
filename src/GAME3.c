#ifdef __EMSCRIPTEN__
#include <emscripten/emscripten.h>
#endif

#include "proto.h"

extern int g_fullscreen;
extern float draw_gamma;
extern float input_sensitivity;

//----- (004A19D0) --------------------------------------------------------
int sub_4A19D0()
{
  int result; // eax

  result = sub_43DDD0(0);
  *(_DWORD *)&byte_5D4594[815132] = 0;
  return result;
}

//----- (004A19F0) --------------------------------------------------------
int __cdecl sub_4A19F0(char *a1)
{
  _DWORD *v1; // esi
  wchar_t *v2; // eax

  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307292], 152);
  v2 = sub_40F1D0(a1, 0, (const char *)&byte_587000[168636], 171);
  return sub_46B490((int)v1, 16385, (int)v2, -1);
}

//----- (004A1A40) --------------------------------------------------------
int __cdecl sub_4A1A40(int a1)
{
  _DWORD *v1; // eax

  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307292], 151);
  return sub_46ABB0((int)v1, a1);
}

//----- (004A1A60) --------------------------------------------------------
int sub_4A1A60()
{
  _DWORD *v0; // eax

  v0 = sub_4A0AD0((const char *)&byte_587000[168676], sub_4A1AA0);
  *(_DWORD *)&byte_5D4594[1307292] = v0;
  if ( !v0 )
    return 0;
  sub_46B300((int)v0, sub_4A18E0);
  return 1;
}
// 4A18E0: using guessed type int __cdecl sub_4A18E0(int, int, int, int);

//----- (004A1AA0) --------------------------------------------------------
int __cdecl sub_4A1AA0(int a1, int a2, int *a3, int a4)
{
  int v3; // eax
  wchar_t *v4; // eax
  wchar_t *v6; // [esp-10h] [ebp-10h]

  if ( a2 == 16389 )
  {
    sub_452D80(920, 100);
  }
  else
  {
    if ( a2 != 16391 )
      return 0;
    if ( sub_43BE30() != 2 && sub_43BE30() != 3 || sub_4D6F30() )
    {
      v3 = sub_46B0A0(a3) - 151;
      if ( v3 )
      {
        if ( v3 == 1 )
        {
          if ( sub_43BE10() == 100 )
          {
            v6 = sub_40F1D0((char *)&byte_587000[168732], 0, (const char *)&byte_587000[168692], 142);
            v4 = sub_40F1D0((char *)&byte_587000[168800], 0, (const char *)&byte_587000[168760], 141);
            sub_449A10(*(int *)&byte_5D4594[1307292], (int)v4, (int)v6, 56, sub_4A19D0, 0);
          }
          else
          {
            if ( sub_4D6F30() )
              sub_4D6F90(2);
            if ( sub_43BE10() == 700 )
              sub_4A7A60(1);
            sub_43C1E0();
          }
        }
      }
      else
      {
        if ( sub_43BE10() == 700 )
          sub_4A7A60(0);
        sub_43C220();
      }
      sub_452D80(921, 100);
      return 0;
    }
  }
  return 1;
}

//----- (004A1BD0) --------------------------------------------------------
int sub_4A1BD0()
{
  return sub_46C4E0(*(_DWORD **)&byte_5D4594[1307292]);
}

//----- (004A1BE0) --------------------------------------------------------
int __cdecl sub_4A1BE0(int a1)
{
  return sub_46ABB0(*(int *)&byte_5D4594[1307292], a1);
}

//----- (004A1C00) --------------------------------------------------------
int sub_4A1C00()
{
  int result; // eax
  _DWORD *v1; // esi
  _DWORD *v2; // esi
  _DWORD *v3; // eax

  sub_4D6F40(0);
  sub_4D6F90(0);
  sub_43BDD0(100);
  result = sub_4A0AD0((const char *)&byte_587000[169180], sub_4A1DC0);
  *(_DWORD *)&byte_5D4594[1307296] = result;
  if ( result )
  {
    sub_46B300(result, sub_4A18E0);
    v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307296], 110);
    sub_46B2C0((int)v1, sub_4A1DC0);
    result = sub_43C5B0(v1, 0, 0, 0, -270, 0, 20, 0, -40);
    *(_DWORD *)&byte_5D4594[1307308] = result;
    if ( result )
    {
      *(_DWORD *)result = 100;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307308] + 48) = sub_4A1D40;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307308] + 56) = sub_4A1D80;
      v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307296], 120);
      sub_46B2C0((int)v2, sub_4A1DC0);
      result = sub_43C5B0(v2, 0, 270, 0, 510, 0, -20, 0, 40);
      *(_DWORD *)&byte_5D4594[1307304] = result;
      if ( result )
      {
        sub_4A19F0((char *)&byte_587000[169196]);
        sub_4D1650();
        sub_578CD0();
        sub_43D9B0(25, 100);
        if ( sub_40A5C0(0x2000000) )
        {
          v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307296], 112);
          sub_46B490(*(int *)&byte_5D4594[1307296], 16391, (int)v3, 0);
        }
        result = 1;
      }
    }
  }
  return result;
}
// 4A18E0: using guessed type int __cdecl sub_4A18E0(int, int, int, int);

//----- (004A1D40) --------------------------------------------------------
int sub_4A1D40()
{
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307308] + 64) = 2;
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307304] + 64) = 2;
  sub_43BE40(2);
  sub_452D80(923, 100);
  return 1;
}

//----- (004A1D80) --------------------------------------------------------
int sub_4A1D80()
{
  int (*v0)(void); // esi

  v0 = *(int (**)(void))(*(_DWORD *)&byte_5D4594[1307308] + 52);
  sub_43C570(*(LPVOID *)&byte_5D4594[1307308]);
  sub_43C570(*(LPVOID *)&byte_5D4594[1307304]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1307296]);
  v0();
  return 1;
}

//----- (004A1DC0) --------------------------------------------------------
int __cdecl sub_4A1DC0(int a1, int a2, int *a3, int a4)
{
  int v4; // eax
  wchar_t *v5; // eax
  int v6; // eax
  wchar_t *v7; // eax
  int v8; // eax
  wchar_t *v9; // [esp-10h] [ebp-94h]
  char v10[128]; // [esp+4h] [ebp-80h]

  if ( a2 == 16389 )
  {
    sub_452D80(920, 100);
  }
  else
  {
    if ( a2 != 16391 )
      return 0;
    if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307308] + 64) && !sub_40A5C0(0x2000000) )
    {
LABEL_32:
      sub_452D80(921, 100);
    }
    else
    {
      switch ( sub_46B0A0(a3) )
      {
        case 111:
          if ( sub_40ABD0() && sub_413840() )
          {
            sub_40A4D0(2048);
            sub_40A540(0x2000);
            sub_40A540(0x10000);
            sub_501AC0(0);
            v4 = *(_DWORD *)&byte_5D4594[2650636];
            LOBYTE(v4) = byte_5D4594[2650636] & 0xCF;
            *(_DWORD *)&byte_5D4594[2650636] = v4;
            sub_4D6F40(0);
            sub_4D6F90(0);
            sub_4D6F60(0);
            sub_4D6F80(0);
            sub_470AA0(0);
            sub_461440(0);
            sub_4A1D40();
            sub_472520(1110);
            if ( !sub_4D1630() )
            {
              sub_43DDD0(0);
              *(_DWORD *)&byte_5D4594[815132] = 0;
              return 0;
            }
            if ( sub_4DC550() )
            {
              sub_4A7A70(1);
              *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307308] + 52) = sub_4A4DB0;
            }
            else
            {
              sub_4A7A70(0);
              *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307308] + 52) = sub_4A4840;
            }
            sub_452D80(921, 100);
          }
          else
          {
            v9 = sub_40F1D0((char *)&byte_587000[169256], 0, (const char *)&byte_587000[169216], 341);
            v5 = sub_40F1D0((char *)&byte_587000[169304], 0, (const char *)&byte_587000[169264], 341);
            sub_449A10(*(int *)&byte_5D4594[1307296], (int)v5, (int)v9, 33, 0, 0);
            sub_44A360(1);
            sub_44A4B0();
            sub_452D80(921, 100);
          }
          return 1;
        case 112:
          sub_4A1D40();
          *(_DWORD *)&byte_5D4594[2650636] = *(_DWORD *)&byte_5D4594[2650636] & 0xFFFFFFDF | 0x10;
          sub_40A4D0(0x2000);
          sub_40A4D0(0x10000);
          sub_40A540(2048);
          sub_461440(0);
          sub_4D6F40(0);
          sub_4D6F90(0);
          sub_4D6F60(0);
          sub_4D6F80(0);
          if ( !sub_473670() )
            sub_473610();
          sub_470AA0(0);
          sub_472520(2300);
          if ( sub_4D1630() )
            goto LABEL_26;
          sub_43DDD0(0);
          *(_DWORD *)&byte_5D4594[815132] = 0;
          return 0;
        case 121:
          if ( !sub_4CB230((const char *)&byte_587000[169384], v10) )
            goto LABEL_32;
          sub_4A1D40();
          sub_4B0300(v10);
          sub_4B0640(sub_43C0A0);
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307308] + 52) = sub_4A2200;
          sub_452D80(921, 100);
          return 1;
        case 122:
          if ( sub_44E560() )
          {
            sub_450160(255, 1, 0);
            sub_4A2530();
          }
          v8 = a3[9];
          LOBYTE(v8) = v8 & 0xFD;
          a3[9] = v8;
          goto LABEL_32;
        case 131:
          LOBYTE(v6) = sub_4D7700();
          if ( !v6 )
          {
            v7 = sub_40F1D0((char *)&byte_587000[169352], 0, (const char *)&byte_587000[169312], 416);
            sub_449A10(*(int *)&byte_5D4594[1307296], 0, (int)v7, 33, 0, 0);
            sub_44A360(0);
            sub_44A4B0();
            sub_452D80(921, 100);
            return 1;
          }
          sub_4A1D40();
          *(_DWORD *)&byte_5D4594[2650636] = *(_DWORD *)&byte_5D4594[2650636] & 0xFFFFFFDF | 0x10;
          sub_40A4D0(0x2000);
          sub_40A4D0(0x10000);
          sub_40A540(2048);
          sub_4D6F40(1);
          sub_4D6F90(1);
          sub_4E3CD0(0);
          sub_4D7440(0);
          sub_472520(2300);
          if ( !sub_473670() )
            sub_473610();
          sub_461440(0);
          if ( !sub_4D1630() )
          {
            sub_43DDD0(0);
            *(_DWORD *)&byte_5D4594[815132] = 0;
            return 0;
          }
LABEL_26:
#ifdef __EMSCRIPTEN__
          sub_4AA450();
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307308] + 52) = sub_4379F0;
          sub_43AF50(0);
#else
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307308] + 52) = sub_4AA270;
#endif
          sub_452D80(921, 100);
          break;
        default:
          goto LABEL_32;
      }
    }
  }
  return 1;
}
// 4A203B: variable 'v6' is possibly undefined

//----- (004A2200) --------------------------------------------------------
int sub_4A2200()
{
  return sub_4B0340(0);
}

//----- (004A2210) --------------------------------------------------------
int sub_4A2210()
{
  int result; // eax
  _DWORD *v1; // esi
  const char *v2; // eax
  unsigned __int8 *v3; // esi

  *(_DWORD *)&byte_5D4594[815132] = 1;
  *(_DWORD *)&byte_5D4594[1307300] = sub_4A0AD0((const char *)&byte_587000[169396], sub_4A2490);
  result = sub_4A1A60();
  if ( result )
  {
    v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307300], 98);
    sub_46B300((int)v1, sub_4A18E0);
    sub_46B340((int)v1, sub_4A22A0);
    v2 = *(const char **)&byte_587000[168832];
    if ( *(_DWORD *)&byte_587000[168832] )
    {
      v3 = &byte_587000[168832];
      do
      {
        *((_DWORD *)v3 + 1) = sub_42F970(v2);
        v2 = (const char *)*((_DWORD *)v3 + 12);
        v3 += 48;
      }
      while ( v2 );
    }
    sub_46B500(*(int *)&byte_5D4594[1307300]);
    result = 1;
  }
  return result;
}
// 4A18E0: using guessed type int __cdecl sub_4A18E0(int, int, int, int);

//----- (004A22A0) --------------------------------------------------------
int __cdecl sub_4A22A0(int a1, int *a2)
{
  int v2; // edx
  int v3; // ecx
  unsigned __int8 *v4; // esi
  int v5; // eax
  int v6; // eax
  bool v7; // zf
  int v8; // eax
  int v9; // eax
  unsigned __int8 *v10; // esi
  int v11; // eax
  int xLeft; // [esp+4h] [ebp-8h]
  int yTop; // [esp+8h] [ebp-4h]

  sub_430B40();
  sub_46AA60((_DWORD *)a1, &xLeft, &yTop);
  if ( (signed char)*(_BYTE *)(a1 + 4) >= 0 )
  {
    if ( a2[5] != 0x80000000 )
    {
      sub_434460(a2[5]);
      sub_49CE30(xLeft, yTop, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12));
    }
  }
  else
  {
    v2 = *(_DWORD *)(a1 + 100);
    xLeft += *(_DWORD *)(a1 + 96);
    v3 = v2 + yTop;
    LOBYTE(v2) = *(_BYTE *)(a1 + 36);
    yTop = v3;
    if ( v2 & 2 )
      sub_47D2C0(a2[10], xLeft, v3);
    else
      sub_47D2C0(a2[6], xLeft, v3);
  }
  if ( *(_DWORD *)&byte_587000[168836] )
  {
    v4 = &byte_587000[168868];
    do
    {
      v5 = *((_DWORD *)v4 + 2);
      if ( v5 )
        *((_DWORD *)v4 + 2) = v5 - 1;
      v6 = *((_DWORD *)v4 + 1);
      if ( v6 )
      {
        *((_DWORD *)v4 + 1) = v6 - 1;
        *((_DWORD *)v4 + 2) = sub_415FF0(60, 120, (const char *)&byte_587000[169408], 180);
      }
      v7 = (*(_DWORD *)v4)-- == 1;
      v8 = *((_DWORD *)v4 - 5);
      if ( v7 )
      {
        if ( v8 )
        {
          *((_DWORD *)v4 - 5) = 0;
          *(_DWORD *)v4 = sub_415FF0(*((_DWORD *)v4 - 4), *((_DWORD *)v4 - 3), (const char *)&byte_587000[169488], 211);
          *((_DWORD *)v4 + 2) = sub_415FF0(60, 90, (const char *)&byte_587000[169528], 214);
        }
        else
        {
          *((_DWORD *)v4 - 5) = 1;
          *(_DWORD *)v4 = sub_415FF0(*((_DWORD *)v4 - 2), *((_DWORD *)v4 - 1), (const char *)&byte_587000[169448], 199);
        }
      }
      else if ( !v8
             && !*((_DWORD *)v4 + 2)
             && !*((_DWORD *)v4 + 1)
             && sub_415FF0(0, 100, (const char *)&byte_587000[169568], 228) > 75 )
      {
        *((_DWORD *)v4 + 1) = sub_415FF0(4, 8, (const char *)&byte_587000[169608], 229);
      }
      v9 = *((_DWORD *)v4 + 4);
      v4 += 48;
    }
    while ( v9 );
  }
  if ( *(_DWORD *)&byte_587000[168832] )
  {
    v10 = &byte_587000[168872];
    do
    {
      if ( !*((_DWORD *)v10 - 6) && !*(_DWORD *)v10 )
        sub_47D2C0(*((_DWORD *)v10 - 9), *((_DWORD *)v10 - 8), *((_DWORD *)v10 - 7));
      v11 = *((_DWORD *)v10 + 2);
      v10 += 48;
    }
    while ( v11 );
  }
  return 1;
}

//----- (004A2490) --------------------------------------------------------
BOOL __cdecl sub_4A2490(int a1, int a2, int a3, int a4)
{
  return a2 == 23;
}

//----- (004A24A0) --------------------------------------------------------
int sub_4A24A0()
{
  sub_4A1BD0();
  sub_46C5D0();
  *(_DWORD *)&byte_5D4594[815132] = 0;
  return 1;
}

//----- (004A24C0) --------------------------------------------------------
int __cdecl sub_4A24C0(int a1)
{
  _DWORD *v1; // eax
  int result; // eax

  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307300], 99);
  result = sub_46AC00((int)v1, a1);
  if ( !a1 )
    result = sub_43E8C0(1);
  return result;
}

//----- (004A24F0) --------------------------------------------------------
int sub_4A24F0()
{
  return sub_46B500(*(int *)&byte_5D4594[1307300]);
}

//----- (004A2500) --------------------------------------------------------
int sub_4A2500()
{
  sub_43DDE0(1);
  sub_46AC00(*(int *)&byte_5D4594[1307300], 0);
  sub_46AC00(*(int *)&byte_5D4594[1307296], 0);
  return sub_4A24F0();
}

//----- (004A2530) --------------------------------------------------------
int sub_4A2530()
{
  sub_43DDE0(0);
  sub_46AC00(*(int *)&byte_5D4594[1307300], 1);
  return sub_46AC00(*(int *)&byte_5D4594[1307296], 1);
}

//----- (004A2560) --------------------------------------------------------
BOOL __cdecl sub_4A2560(_DWORD *a1, int a2)
{
  double v2; // st7
  double v3; // st6

  v2 = (double)(*(__int16 *)(a2 + 44) - *a1);
  v3 = (double)(*(__int16 *)(a2 + 46) - a1[1]);
  return sqrt(v3 * v3 + v2 * v2) <= *(double *)&byte_581450[9720];
}

//----- (004A25C0) --------------------------------------------------------
int __cdecl sub_4A25C0(_DWORD *a1, int *a2)
{
  int v2; // edi
  int *v3; // esi

  v2 = 0;
  v3 = sub_425890(a2);
  if ( !v3 )
    return 0;
  do
  {
    if ( sub_4A2560(a1, (int)v3) )
      ++v2;
    v3 = sub_4258A0(v3);
  }
  while ( v3 );
  return v2;
}

//----- (004A2610) --------------------------------------------------------
int __cdecl sub_4A2610(int a1, _DWORD *a2, int *a3)
{
  int *i; // esi
  int v4; // eax
  _DWORD *v5; // esi
  _DWORD *v6; // ebx
  _DWORD *v7; // edi
  _DWORD *v8; // ebp
  char *v9; // eax
  int v10; // ebx
  unsigned __int8 *v11; // esi
  _DWORD *v13; // [esp+Ch] [ebp-150h]
  char *v14; // [esp+10h] [ebp-14Ch]
  int v15[2]; // [esp+14h] [ebp-148h]
  char v16[64]; // [esp+1Ch] [ebp-140h]
  wchar_t v17[128]; // [esp+5Ch] [ebp-100h]

  *(_DWORD *)&byte_5D4594[1307720] = 0;
  for ( i = sub_425890(a3); i; i = sub_4258A0(i) )
  {
    if ( sub_4A2560(a2, (int)i) )
    {
      v4 = *(_DWORD *)&byte_5D4594[1307720];
      *(_DWORD *)&byte_5D4594[4 * *(_DWORD *)&byte_5D4594[1307720] + 1307316] = i;
      *(_DWORD *)&byte_5D4594[1307720] = v4 + 1;
    }
  }
  if ( *(_DWORD *)&byte_5D4594[1307720] > 0 )
  {
    *(_DWORD *)&byte_5D4594[1307716] = sub_4A0AD0((const char *)&byte_587000[169648], *(_DWORD *)(a1 + 376));
    sub_4A2830(*a2 + 216, a2[1] + 27, v15);
    sub_46A9B0(*(_DWORD **)&byte_5D4594[1307716], v15[0], v15[1]);
    sub_46B280(*(int *)&byte_5D4594[1307716], a1);
    v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307716], 10064);
    v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307716], 10062);
    v13 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307716], 10063);
    v7 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307716], 10061);
    v8 = (_DWORD *)v7[8];
    v14 = sub_42F970((const char *)&byte_587000[169664]);
    v9 = sub_42F970((const char *)&byte_587000[169676]);
    sub_4B5700((int)v5, 0, 0, (int)v14, (int)v9, (int)v9);
    sub_46B280((int)v5, (int)v7);
    sub_46B280((int)v6, (int)v7);
    sub_46B280((int)v13, (int)v7);
    v8[9] = v5;
    v8[7] = v6;
    v8[8] = v13;
    *(_DWORD *)(v5[100] + 8) = 16;
    *(_DWORD *)(v5[100] + 12) = 10;
    v10 = 0;
    if ( *(_DWORD *)&byte_5D4594[1307720] > 0 )
    {
      v11 = &byte_5D4594[1307316];
      do
      {
        if ( *(_BYTE *)(*(_DWORD *)v11 + 120) )
        {
          strncpy(v16, (const char *)(*(_DWORD *)v11 + 120), 0xFu);
          v16[15] = 0;
        }
        else
        {
          sub_43BC80(*(_DWORD *)v11 + 12, *(_WORD *)(*(_DWORD *)v11 + 109), v16);
        }
        nox_swprintf(v17, (const wchar_t *)&byte_587000[169688], v16, *(_DWORD *)(*(_DWORD *)v11 + 96));
        sub_46B490((int)v7, 16397, (int)v17, -1);
        ++v10;
        v11 += 4;
      }
      while ( v10 < *(int *)&byte_5D4594[1307720] );
    }
  }
  return *(_DWORD *)&byte_5D4594[1307716];
}

//----- (004A2830) --------------------------------------------------------
_DWORD *__cdecl sub_4A2830(int a1, int a2, _DWORD *a3)
{
  _DWORD *result; // eax

  result = a3;
  *a3 = a1 - 100;
  a3[1] = a2 - 20;
  if ( a1 - 100 + 200 > 600 )
    *a3 = 400;
  if ( a2 - 20 + 200 > 451 )
    a3[1] = 251;
  if ( a3[1] < 27 )
    a3[1] = 27;
  if ( (int)*a3 < 216 )
    *a3 = 216;
  return result;
}

//----- (004A2890) --------------------------------------------------------
int sub_4A2890()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1307716];
  if ( *(_DWORD *)&byte_5D4594[1307716] )
  {
    result = sub_46C4E0(*(_DWORD **)&byte_5D4594[1307716]);
    *(_DWORD *)&byte_5D4594[1307716] = 0;
  }
  return result;
}

//----- (004A28B0) --------------------------------------------------------
BOOL sub_4A28B0()
{
  return *(_DWORD *)&byte_5D4594[1307716] != 0;
}

//----- (004A28C0) --------------------------------------------------------
int __cdecl sub_4A28C0(int a1)
{
  int result; // eax

  if ( a1 < *(int *)&byte_5D4594[1307720] )
    result = *(_DWORD *)&byte_5D4594[4 * a1 + 1307316];
  else
    result = 0;
  return result;
}

//----- (004A28E0) --------------------------------------------------------
int __cdecl sub_4A28E0(_DWORD *a1, int a2, unsigned int a3, int a4)
{
  _DWORD *v4; // edi
  int v5; // esi
  int result; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // edx
  int v11; // eax
  unsigned int v12; // ebx
  unsigned int v13; // ebx
  int v14; // eax
  int v15; // ecx
  int v16; // eax
  unsigned int v17; // eax
  unsigned int v18; // ebx
  int v19; // eax
  int v20; // ecx
  int v21; // eax
  int v22; // eax

  v4 = a1;
  v5 = a1[8];
  switch ( a2 )
  {
    case 5:
    case 17:
    case 18:
      return 1;
    case 6:
    case 7:
      v12 = a3;
      a3 = *(_DWORD *)(v5 + 48);
      v13 = v12 >> 16;
      sub_46AA60(a1, &a1, &a4);
      if ( *((_WORD *)v4 + 54) )
      {
        v14 = sub_43F320(v4[59]);
        a4 += v14 + 1;
      }
      v15 = 0;
      *(_DWORD *)(v5 + 48) = -2;
      v16 = 0;
      while ( 2 )
      {
        if ( v16 > 0 && *(int *)(v16 + *(_DWORD *)(v5 + 24) - 524) > *(__int16 *)(v5 + 52) + *(__int16 *)(v5 + 54)
          || v15 == *(__int16 *)(v5 + 44) )
        {
          *(_DWORD *)(v5 + 48) = -1;
        }
        else if ( *(int *)(v16 + *(_DWORD *)(v5 + 24)) <= (int)(v13 + *(__int16 *)(v5 + 54) - a4) )
        {
          ++v15;
          v16 += 524;
          continue;
        }
        break;
      }
      v17 = a3;
      if ( v15 == a3 && !*(_DWORD *)(v5 + 20) )
        *(_DWORD *)(v5 + 48) = -1;
      if ( *(int *)(v5 + 48) == -2 && v15 < *(__int16 *)(v5 + 44) )
        *(_DWORD *)(v5 + 48) = v15;
      if ( *(int *)(v5 + 48) < 0 )
      {
        if ( *(_DWORD *)(v5 + 20) )
          *(_DWORD *)(v5 + 48) = v17;
      }
      sub_46B490(v4[13], 16400, (int)v4, *(_DWORD *)(v5 + 48));
      return 1;
    case 8:
      v22 = a1[11];
      if ( v22 & 0x100 )
        sub_46B490(a1[13], 0x4000, (int)a1, 0);
      return 1;
    case 10:
    case 11:
      v18 = a3 >> 16;
      sub_46AA60(a1, &a3, &a4);
      if ( *((_WORD *)v4 + 54) )
      {
        v19 = sub_43F320(v4[59]);
        a4 += v19 + 1;
      }
      v20 = 0;
      v21 = 0;
      break;
    case 19:
LABEL_9:
      v8 = *(_DWORD *)(v5 + 48);
      if ( v8 == -1 )
      {
        *(_DWORD *)(v5 + 48) = 0;
        sub_4A2D10((int)v4, 0, 1);
      }
      else if ( v8 > 0 )
      {
        v11 = v8 - 1;
        *(_DWORD *)(v5 + 48) = v11;
        if ( *(_DWORD *)(*(_DWORD *)(v5 + 24) + 524 * v11) < *(__int16 *)(v5 + 54) )
          sub_4A2D10((int)v4, -1, 1);
      }
      goto LABEL_21;
    case 20:
LABEL_6:
      v7 = *(_DWORD *)(v5 + 48);
      if ( v7 == -1 )
      {
        *(_DWORD *)(v5 + 48) = 0;
        sub_4A2D10((int)v4, 0, 1);
      }
      else if ( v7 < *(__int16 *)(v5 + 44) - 1 )
      {
        v9 = v7 + 1;
        v10 = *(__int16 *)(v5 + 52) + *(__int16 *)(v5 + 54);
        *(_DWORD *)(v5 + 48) = v9;
        if ( *(_DWORD *)(*(_DWORD *)(v5 + 24) + 524 * v9) > v10 )
          sub_4A2D10((int)v4, 1, 1);
      }
LABEL_21:
      sub_46B490(v4[13], 16400, (int)v4, *(_DWORD *)(v5 + 48));
      return 1;
    case 21:
      switch ( a3 )
      {
        case 0xFu:
        case 0xCDu:
          if ( a4 != 2 )
            return 1;
          sub_46A8A0();
          result = 1;
          break;
        case 0x1Cu:
        case 0x39u:
          if ( a4 != 1 )
            return 1;
          sub_46B490(a1[13], 16400, (int)a1, *(_DWORD *)(v5 + 48));
          result = 1;
          break;
        case 0xC8u:
          if ( a4 == 2 )
            goto LABEL_9;
          return 1;
        case 0xCBu:
          if ( a4 != 2 )
            return 1;
          sub_46A8B0();
          result = 1;
          break;
        case 0xD0u:
          if ( a4 == 2 )
            goto LABEL_6;
          return 1;
        default:
          return 0;
      }
      return result;
    default:
      return 0;
  }
  while ( (v21 <= 0 || *(_DWORD *)(v21 + *(_DWORD *)(v5 + 24) - 524) <= *(__int16 *)(v5 + 52) + *(__int16 *)(v5 + 54))
       && v20 != *(__int16 *)(v5 + 44) )
  {
    if ( *(_DWORD *)(v21 + *(_DWORD *)(v5 + 24)) > (int)(v18 + *(__int16 *)(v5 + 54) - a4) )
      goto LABEL_50;
    ++v20;
    v21 += 524;
  }
  v20 = -1;
LABEL_50:
  sub_46B490(v4[13], 16401, (int)v4, v20);
  return 1;
}

//----- (004A2D10) --------------------------------------------------------
int __cdecl sub_4A2D10(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // eax
  int v5; // ecx
  int result; // eax
  int v7; // ecx

  v3 = *(_DWORD *)(a1 + 32);
  v4 = a2 + sub_4A4800(*(_DWORD *)(a1 + 32));
  if ( v4 >= 0 )
  {
    v5 = *(__int16 *)(v3 + 44);
    if ( v4 >= v5 )
      v4 = v5 - 1;
  }
  else
  {
    v4 = 0;
  }
  if ( a3 )
  {
    if ( v4 <= 0 )
      *(_WORD *)(v3 + 54) = 0;
    else
      *(_WORD *)(v3 + 54) = *(_WORD *)(*(_DWORD *)(v3 + 24) + 524 * v4 - 524) + 1;
  }
  result = *(_DWORD *)(v3 + 36);
  if ( result )
  {
    result = *(_DWORD *)(result + 32);
    v7 = *(_DWORD *)(v3 + 40) - *(__int16 *)(v3 + 52) + 3;
    *(_DWORD *)(result + 4) = v7;
    if ( v7 < 0 )
      *(_DWORD *)(result + 4) = 0;
    *(float *)(result + 8) = (double)(int)(*(_DWORD *)(*(_DWORD *)(v3 + 36) + 12)
                                    - *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v3 + 36) + 400) + 12))
                           / (double)*(int *)(result + 4);
    if ( a3 )
      result = sub_46B490(*(_DWORD *)(v3 + 36), 16394, *(_DWORD *)(result + 4) - *(__int16 *)(v3 + 54), 0);
  }
  return result;
}

//----- (004A2DE0) --------------------------------------------------------
int __cdecl sub_4A2DE0(int a1, int a2, unsigned int a3, int a4)
{
  int v4; // ebp
  int v5; // esi
  int result; // eax
  unsigned int v7; // edi
  int v8; // eax
  unsigned int v9; // ecx
  int v10; // ebx
  int v11; // eax
  int *v12; // edi
  int v13; // ecx
  int v14; // eax
  int v15; // edx
  unsigned int v16; // edi
  int v17; // eax
  unsigned int v18; // edx
  int v19; // ecx
  int v20; // eax
  int v21; // eax

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 32);
  switch ( a2 )
  {
    case 5:
    case 17:
    case 18:
      return 1;
    case 6:
    case 7:
      v7 = a3 >> 16;
      sub_46AA60((_DWORD *)a1, &a2, &a3);
      if ( *(_WORD *)(a1 + 108) )
      {
        v8 = sub_43F320(*(_DWORD *)(a1 + 236));
        v9 = a3 + v8 + 1;
        a3 += v8 + 1;
      }
      else
      {
        v9 = a3;
      }
      v10 = 0;
      v11 = 0;
      while ( 2 )
      {
        if ( v11 <= 0 )
          goto LABEL_12;
        if ( *(_DWORD *)(v11 + *(_DWORD *)(v5 + 24) - 524) > *(__int16 *)(v5 + 52) + *(__int16 *)(v5 + 54) )
        {
          v10 = -1;
LABEL_16:
          v4 = a1;
          goto LABEL_17;
        }
        v4 = a1;
LABEL_12:
        if ( v10 != *(__int16 *)(v5 + 44) )
        {
          if ( *(_DWORD *)(v11 + *(_DWORD *)(v5 + 24)) <= (int)(v7 + *(__int16 *)(v5 + 54) - v9) )
          {
            v4 = a1;
            ++v10;
            v11 += 524;
            continue;
          }
          goto LABEL_16;
        }
        break;
      }
      v10 = -1;
LABEL_17:
      v12 = *(int **)(v5 + 48);
      v13 = 0;
      v14 = *v12;
      if ( (int)*v12 < 0 )
      {
LABEL_24:
        v12[v13] = v10;
        *(_DWORD *)(*(_DWORD *)(v5 + 48) + 4 * v13 + 4) = -1;
        sub_46B490(*(_DWORD *)(v4 + 52), 16400, v4, v10);
        result = 1;
      }
      else
      {
        v15 = *(_DWORD *)(v5 + 48);
        while ( v14 != v10 )
        {
          v14 = *(_DWORD *)(v15 + 4);
          v15 += 4;
          ++v13;
          if ( v14 < 0 )
            goto LABEL_24;
        }
        sub_4A3090((__int16 *)v5, v13);
        sub_46B490(*(_DWORD *)(v4 + 52), 16400, v4, v10);
        result = 1;
      }
      return result;
    case 8:
      v21 = *(_DWORD *)(a1 + 44);
      if ( v21 & 0x100 )
        sub_46B490(*(_DWORD *)(a1 + 52), 0x4000, a1, 0);
      return 1;
    case 10:
    case 11:
      v16 = a3 >> 16;
      sub_46AA60((_DWORD *)a1, &a2, &a3);
      if ( *(_WORD *)(a1 + 108) )
      {
        v17 = sub_43F320(*(_DWORD *)(a1 + 236));
        v18 = a3 + v17 + 1;
        a3 += v17 + 1;
      }
      else
      {
        v18 = a3;
      }
      v19 = 0;
      v20 = 0;
      while ( 2 )
      {
        if ( v20 <= 0 )
          goto LABEL_32;
        if ( *(_DWORD *)(v20 + *(_DWORD *)(v5 + 24) - 524) > *(__int16 *)(v5 + 52) + *(__int16 *)(v5 + 54) )
        {
          v19 = -1;
LABEL_36:
          sub_46B490(*(_DWORD *)(a1 + 52), 16401, a1, v19);
          return 1;
        }
        v4 = a1;
LABEL_32:
        if ( v19 != *(__int16 *)(v5 + 44) )
        {
          if ( *(_DWORD *)(v20 + *(_DWORD *)(v5 + 24)) <= (int)(v16 + *(__int16 *)(v5 + 54) - v18) )
          {
            v4 = a1;
            ++v19;
            v20 += 524;
            continue;
          }
          goto LABEL_36;
        }
        break;
      }
      sub_46B490(*(_DWORD *)(v4 + 52), 16401, v4, -1);
      return 1;
    case 19:
      if ( !*(_DWORD *)(v5 + 28) || *(short *)(v5 + 54) <= 0 )
        return 1;
      sub_4A2D10(a1, -1, 1);
      return 1;
    case 20:
      if ( !*(_DWORD *)(v5 + 32) || *(__int16 *)(v5 + 52) + *(__int16 *)(v5 + 54) > *(int *)(v5 + 40) )
        return 1;
      sub_4A2D10(a1, 1, 1);
      return 1;
    case 21:
      if ( a3 != 15 )
        return 0;
      if ( a4 != 2 )
        return 1;
      sub_46A8A0();
      return 1;
    default:
      return 0;
  }
}

//----- (004A3090) --------------------------------------------------------
__int16 *__cdecl sub_4A3090(__int16 *a1, int a2)
{
  __int16 *result; // eax

  result = a1;
  qmemcpy((void *)(*((_DWORD *)a1 + 12) + 4 * a2), (const void *)(*((_DWORD *)a1 + 12) + 4 * a2 + 4), 4 * (*a1 - a2));
  *(_DWORD *)(*((_DWORD *)a1 + 12) + 4 * *a1 - 4) = -1;
  return result;
}

//----- (004A30D0) --------------------------------------------------------
int __cdecl sub_4A30D0(int a1, unsigned int a2, wchar_t *a3, int a4)
{
  _DWORD *v4; // ebp
  __int16 *v5; // ebx
  int v6; // eax
  int v7; // eax
  int result; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  int v12; // eax
  __int16 v13; // ax
  _DWORD *v14; // eax
  int v15; // esi
  wchar_t *v16; // ecx
  wchar_t *v17; // eax
  __int16 v18; // cx
  __int16 v19; // ax
  int v20; // eax
  int v21; // edx
  int v22; // esi
  int v23; // eax
  int v24; // edx
  int v25; // esi
  _DWORD *v26; // eax
  int v27; // ecx
  int v28; // edx
  __int16 v29; // cx
  __int16 v30; // ax
  int v31; // esi
  __int16 v32; // ax
  wchar_t **v33; // esi
  int v34; // edx
  wchar_t *v35; // eax
  int v36; // ecx
  int v37; // esi
  int v38; // ecx
  __int16 v39; // di
  int v40; // eax
  _DWORD *v41; // eax
  int v42; // esi
  int v43; // ecx
  int v44; // eax
  __int16 v45; // ax
  int v46; // edx

  v4 = (_DWORD *)a1;
  v5 = *(__int16 **)(a1 + 32);
  if ( a2 > 0x4012 )
  {
    switch ( a2 )
    {
      case 0x4013u:
        if ( (int)a3 < 0 )
        {
          if ( *((_DWORD *)v5 + 4) )
            goto LABEL_117;
          *((_DWORD *)v5 + 12) = -1;
          return 0;
        }
        v37 = *((_DWORD *)v5 + 6) + 524 * (_DWORD)a3;
        if ( !*(_WORD *)(v37 + 4) )
          return 0;
        if ( *((_DWORD *)v5 + 4) )
        {
          **((_DWORD **)v5 + 12) = a3;
          *(_DWORD *)(*((_DWORD *)v5 + 12) + 4) = -1;
          return 0;
        }
        v38 = v5[27];
        *((_DWORD *)v5 + 12) = a3;
        if ( *(_DWORD *)v37 < v38 )
        {
          sub_46B490(a1, 16412, (int)a3, 0);
          return 0;
        }
        v39 = v5[26];
        if ( *(_DWORD *)v37 > v38 + v39 )
        {
          if ( (int)a3 <= 0 )
            v5[27] = 0;
          else
            v5[27] = *(_WORD *)v37 - v39;
          sub_4A2D10(a1, 0, 1);
          return 0;
        }
        return 0;
      case 0x4014u:
        return *((_DWORD *)v5 + 12);
      case 0x4015u:
        if ( (int)a3 >= 0 )
        {
          if ( !*(_WORD *)(*((_DWORD *)v5 + 6) + 524 * (_DWORD)a3 + 4) || !*((_DWORD *)v5 + 4) )
            return 0;
          v33 = (wchar_t **)*((_DWORD *)v5 + 12);
          v34 = 0;
          v35 = *v33;
          if ( (int)*v33 < 0 )
          {
LABEL_113:
            v33[v34] = a3;
            *(_DWORD *)(*((_DWORD *)v5 + 12) + 4 * v34 + 4) = -1;
            return 0;
          }
          v36 = *((_DWORD *)v5 + 12);
          while ( v35 != a3 )
          {
            v35 = *(wchar_t **)(v36 + 4);
            v36 += 4;
            ++v34;
            if ( (int)v35 < 0 )
              goto LABEL_113;
          }
          sub_4A3090(v5, v34);
          result = 0;
        }
        else
        {
          if ( !*((_DWORD *)v5 + 4) )
            return 0;
LABEL_117:
          memset(*((void **)v5 + 12), 0xFFu, 4 * *v5);
          result = 0;
        }
        break;
      case 0x4016u:
        return *((_DWORD *)v5 + 6) + 524 * (_DWORD)a3 + 4;
      case 0x4017u:
        nox_wcsncpy((wchar_t *)(*((_DWORD *)v5 + 6) + 524 * a4 + 4), a3, 0xFFu);
        *(_WORD *)(*((_DWORD *)v5 + 6) + 2 * (nox_wcslen(a3) + 262 * a4) + 4) = 0;
        return 0;
      case 0x4018u:
        *((_DWORD *)v5 + 7) = a3;
        return 0;
      case 0x4019u:
        *((_DWORD *)v5 + 8) = a3;
        return 0;
      case 0x401Au:
        *((_DWORD *)v5 + 9) = a3;
        return 0;
      case 0x401Bu:
        v40 = v5[22];
        if ( v40 < (int)a3 )
          return 0;
        memmove(
          *((void **)v5 + 6),
          (const void *)(*((_DWORD *)v5 + 6) + 524 * (_DWORD)a3),
          4 * ((unsigned int)(524 * (v40 - (_DWORD)a3)) >> 2));
        v5[22] -= (__int16)a3;
        v5[23] = v5[22];
        if ( *((_DWORD *)v5 + 4) )
        {
          v41 = (_DWORD *)*((_DWORD *)v5 + 12);
          v42 = 0;
          if ( (int)*v41 >= 0 )
          {
            do
            {
              v43 = v41[v42];
              if ( (int)a3 < v43 )
                sub_4A3090(v5, v42--);
              else
                v41[v42] = v43 - (_DWORD)a3;
              v41 = (_DWORD *)*((_DWORD *)v5 + 12);
              ++v42;
            }
            while ( (int)v41[v42] >= 0 );
          }
        }
        else
        {
          v44 = *((_DWORD *)v5 + 12);
          if ( v44 > 0 )
            *((_DWORD *)v5 + 12) = v44 - (_DWORD)a3;
        }
        if ( v5[27] > 0 )
          sub_4A2D10(a1, -(int)a3, 1);
        sub_4A3A70(a1);
        return 1;
      case 0x401Cu:
        if ( a3 )
          v5[27] = *(_WORD *)(*((_DWORD *)v5 + 6) + 524 * (_DWORD)a3 - 524) + 1;
        else
          v5[27] = 0;
        v45 = v5[26];
        v46 = *((_DWORD *)v5 + 10);
        if ( v5[27] + v45 >= v46 )
          v5[27] = v46 - v45;
        sub_4A2D10(a1, 0, 1);
        return 0;
      default:
        return 0;
    }
    return result;
  }
  if ( a2 == 16402 )
  {
    if ( (int)a3 >= 0 )
    {
      v32 = v5[22];
      if ( (int)a3 <= v32 )
        v5[23] = (__int16)a3;
      else
        v5[23] = v32;
      result = 0;
    }
    else
    {
      v5[23] = 0;
      result = 0;
    }
    return result;
  }
  if ( a2 > 0x4007 )
  {
    switch ( a2 )
    {
      case 0x4009u:
        v29 = v5[26];
        v30 = *(_WORD *)(*(_DWORD *)(*((_DWORD *)v5 + 9) + 32) + 4) - a4;
        v31 = *((_DWORD *)v5 + 10) - v29 + 1;
        v5[27] = v30;
        if ( v30 > v31 )
          v5[27] = v5[20] - v29 + 1;
        if ( (int)v5[27] < 0 )
          v5[27] = 0;
        sub_4A2D10(a1, 0, 0);
        return 0;
      case 0x400Du:
        v18 = v5[23];
        v19 = v5[22];
        if ( v18 != v19 )
        {
          if ( v19 < *v5 )
          {
            v20 = v19 - 1;
            if ( v20 < v18 )
            {
LABEL_66:
              sub_4A3AC0(a3, a4, v4);
              goto LABEL_67;
            }
            v21 = 524 * v20;
            do
            {
              --v20;
              v22 = *((_DWORD *)v5 + 6) + v21;
              v21 -= 524;
              qmemcpy((void *)(v22 + 524), (const void *)v22, 0x20Cu);
            }
            while ( v20 >= v5[23] );
LABEL_65:
            v4 = (_DWORD *)a1;
            goto LABEL_66;
          }
          if ( *((_DWORD *)v5 + 2) )
          {
            sub_46B490(a1, 16411, 1, 0);
            v23 = v5[22] - 1;
            if ( v23 < v5[23] )
              goto LABEL_66;
            v24 = 524 * v23;
            do
            {
              --v23;
              v25 = *((_DWORD *)v5 + 6) + v24;
              v24 -= 524;
              qmemcpy((void *)(v25 + 524), (const void *)v25, 0x20Cu);
            }
            while ( v23 >= v5[23] );
            goto LABEL_65;
          }
          return 0;
        }
        if ( v18 >= *v5 )
        {
          if ( !*((_DWORD *)v5 + 2) )
            return 0;
          sub_46B490(a1, 16411, 1, 0);
          sub_4A3AC0(a3, a4, (_DWORD *)a1);
        }
        else
        {
          sub_4A3AC0(a3, a4, (_DWORD *)a1);
        }
LABEL_67:
        if ( *((_DWORD *)v5 + 1) )
        {
          while ( *(_DWORD *)(*((_DWORD *)v5 + 6) + 524 * v5[23] - 524) >= v5[27] + v5[26] )
            sub_4A2D10((int)v4, 1, 1);
        }
        v26 = (_DWORD *)*((_DWORD *)v5 + 12);
        if ( *((_DWORD *)v5 + 4) )
        {
          if ( (int)*v26 >= 0 )
          {
            v27 = 0;
            do
            {
              v28 = v26[v27];
              if ( v5[23] < v28 )
                v26[v27] = v28 + 1;
              v26 = (_DWORD *)*((_DWORD *)v5 + 12);
              ++v27;
            }
            while ( (int)v26[v27] >= 0 );
            return 1;
          }
        }
        else if ( v5[23] < (int)v26 )
        {
          *((_DWORD *)v5 + 12) = (char *)v26 + 1;
        }
        return 1;
      case 0x400Eu:
        v12 = v5[22];
        if ( v12 <= (int)a3 )
          return 0;
        qmemcpy(
          (void *)(*((_DWORD *)v5 + 6) + 524 * (_DWORD)a3),
          (const void *)(*((_DWORD *)v5 + 6) + 524 * ((_DWORD)a3 + 1)),
          4 * ((unsigned int)(524 * (v12 - (_DWORD)a3 - 1)) >> 2));
        v13 = --v5[22];
        v5[23] = v13;
        *(_WORD *)(*((_DWORD *)v5 + 6) + 524 * v13 + 4) = 0;
        if ( *((_DWORD *)v5 + 4) )
        {
          v14 = (_DWORD *)*((_DWORD *)v5 + 12);
          v15 = 0;
          if ( (int)*v14 >= 0 )
          {
            do
            {
              v16 = (wchar_t *)v14[v15];
              if ( (int)a3 >= (int)v16 )
              {
                if ( a3 == v16 )
                  sub_4A3090(v5, v15--);
              }
              else
              {
                v14[v15] = (char *)v16 - 1;
              }
              v14 = (_DWORD *)*((_DWORD *)v5 + 12);
              ++v15;
            }
            while ( (int)v14[v15] >= 0 );
            sub_4A3A70(a1);
            return 0;
          }
        }
        else
        {
          v17 = (wchar_t *)*((_DWORD *)v5 + 12);
          if ( (int)a3 < (int)v17 )
          {
            *((_DWORD *)v5 + 12) = (char *)v17 - 1;
            sub_4A3A70(a1);
            return 0;
          }
          if ( a3 == v17 )
            *((_DWORD *)v5 + 12) = -1;
        }
        sub_4A3A70(a1);
        return 0;
      case 0x400Fu:
        memset(*((void **)v5 + 6), 0, 524 * *v5);
        if ( a3 != (wchar_t *)1 )
          v5[27] = 0;
        if ( *((_DWORD *)v5 + 4) )
          memset(*((void **)v5 + 12), 0xFFu, 4 * *v5);
        else
          *((_DWORD *)v5 + 12) = -1;
        v5[23] = 0;
        v5[22] = 0;
        *((_DWORD *)v5 + 10) = 0;
        sub_4A2D10(a1, 0, 1);
        return 0;
      default:
        return 0;
    }
  }
  if ( a2 == 16391 )
  {
    if ( a3 == *((wchar_t **)v5 + 7) )
    {
      if ( v5[27] > 0 )
      {
        sub_4A2D10(a1, -1, 1);
        return 0;
      }
    }
    else if ( a3 == *((wchar_t **)v5 + 8) && v5[26] + v5[27] <= *((_DWORD *)v5 + 10) )
    {
      sub_4A2D10(a1, 1, 1);
      return 0;
    }
    return 0;
  }
  if ( a2 > 0x4000 )
  {
    if ( a2 == 16385 )
    {
      nox_wcsncpy((wchar_t *)(a1 + 108), a3, 0x3Fu);
      *(_WORD *)(a1 + 2 * nox_wcslen(a3) + 108) = 0;
      return 0;
    }
    if ( a2 == 16388 )
    {
      v9 = (_DWORD *)*((_DWORD *)v5 + 7);
      if ( v9 )
        sub_46A9B0(v9, (int)a3 - v9[2], 0);
      v10 = (_DWORD *)*((_DWORD *)v5 + 8);
      if ( v10 )
        sub_46A9B0(v10, (int)a3 - v10[2], a4 - v10[3]);
      v11 = (_DWORD *)*((_DWORD *)v5 + 9);
      if ( v11 )
      {
        sub_46A9B0(v11, (int)a3 - v11[2], *(_DWORD *)(*((_DWORD *)v5 + 7) + 12));
        sub_46AB20(
          *((_DWORD **)v5 + 9),
          *(_DWORD *)(*((_DWORD *)v5 + 9) + 8),
          a4 - 2 * *(_DWORD *)(*(_DWORD *)(*((_DWORD *)v5 + 9) + 400) + 12));
      }
      v5[26] = a4;
      if ( *(_WORD *)(a1 + 108) )
      {
        v5[26] -= sub_43F320(*(_DWORD *)(a1 + 236));
        return 0;
      }
    }
    return 0;
  }
  if ( a2 == 0x4000 )
  {
    if ( a3 == *((wchar_t **)v5 + 7) )
    {
      if ( v5[27] > 0 )
      {
        sub_4A2D10(a1, -1, 1);
        return 0;
      }
    }
    else if ( a3 == *((wchar_t **)v5 + 8) && v5[26] + v5[27] <= *((_DWORD *)v5 + 10) )
    {
      sub_4A2D10(a1, 1, 1);
      return 0;
    }
    return 0;
  }
  if ( a2 != 2 )
  {
    if ( a2 == 23 )
    {
      v6 = *(_DWORD *)(a1 + 36);
      if ( a3 )
        LOBYTE(v6) = v6 | 2;
      else
        LOBYTE(v6) = v6 & 0xFD;
      *(_DWORD *)(a1 + 36) = v6;
      v7 = sub_46B0A0((int *)a1);
      sub_46B490(*(_DWORD *)(a1 + 52), 16387, (int)a3, v7);
      return 1;
    }
    return 0;
  }
  free(*((LPVOID *)v5 + 6));
  if ( *((_DWORD *)v5 + 4) )
    free(*((LPVOID *)v5 + 12));
  free(v5);
  return 0;
}

//----- (004A3A70) --------------------------------------------------------
int __cdecl sub_4A3A70(int a1)
{
  int v1; // edi
  int v2; // eax
  int v3; // ecx
  int v4; // ebp
  int v5; // esi

  v1 = 0;
  v2 = 0;
  v3 = *(_DWORD *)(a1 + 32);
  if ( *(_WORD *)(v3 + 44) > 0 )
  {
    v4 = 0;
    do
    {
      v5 = v4 + *(_DWORD *)(v3 + 24);
      ++v1;
      v4 += 524;
      v2 += *(unsigned __int8 *)(v5 + 520) + 1;
      *(_DWORD *)v5 = v2;
    }
    while ( v1 < *(__int16 *)(v3 + 44) );
  }
  *(_DWORD *)(v3 + 40) = v2;
  return sub_4A2D10(a1, 0, 1);
}

//----- (004A3AC0) --------------------------------------------------------
int __cdecl sub_4A3AC0(wchar_t *a1, int a2, _DWORD *a3)
{
  _DWORD *v3; // ebx
  int v4; // esi
  int v5; // ebp
  wchar_t *v6; // edi
  wchar_t *v7; // eax

  v3 = a3;
  v4 = a3[8];
  v5 = a3[2] - 7;
  if ( *(_DWORD *)(v4 + 12) )
    v5 = a3[2] - 17;
  if ( a2 >= 17 || a2 < 0 )
    *(_DWORD *)(*(_DWORD *)(v4 + 24) + 524 * *(__int16 *)(v4 + 46) + 516) = a3[26];
  else
    *(_DWORD *)(*(_DWORD *)(v4 + 24) + 524 * *(__int16 *)(v4 + 46) + 516) = **(_DWORD **)&byte_5D4594[4 * a2 + 2649836];
  v6 = (wchar_t *)(*(_DWORD *)(v4 + 24) + 524 * *(__int16 *)(v4 + 46) + 4);
  if ( a1 )
  {
    nox_wcsncpy(v6, a1, 0xFFu);
    v6[255] = 0;
    v7 = &v6[nox_wcslen(v6) - 1];
    if ( *v7 == 10 )
      *v7 = 0;
  }
  else
  {
    *v6 = 32;
    v6[1] = 0;
  }
  if ( (v3[1] & 0x4000) == 0x4000 )
  {
    *(_BYTE *)(*(_DWORD *)(v4 + 24) + 524 * *(__int16 *)(v4 + 46) + 520) = sub_43F320(v3[59]);
  }
  else
  {
    sub_43F840(v3[59], v6, 0, &a3, v5);
    *(_BYTE *)(*(_DWORD *)(v4 + 24) + 524 * *(__int16 *)(v4 + 46) + 520) = (_BYTE)a3;
  }
  ++*(_WORD *)(v4 + 46);
  ++*(_WORD *)(v4 + 44);
  return sub_4A3A70((int)v3);
}

//----- (004A3C00) --------------------------------------------------------
void __cdecl sub_4A3C00(int a1, int a2)
{
  if ( a1 )
  {
    if ( (signed char)*(_BYTE *)(a1 + 4) >= 0 )
      sub_46B340(a1, sub_4A3C50);
    else
      sub_46B340(a1, sub_4A3FC0);
    if ( *(_DWORD *)(a2 + 16) )
      sub_46B300(a1, sub_4A2DE0);
    else
      sub_46B300(a1, sub_4A28E0);
  }
}

//----- (004A3C50) --------------------------------------------------------
int __cdecl sub_4A3C50(_DWORD *a1, int a2)
{
  int v2; // ebp
  int v3; // edi
  int v4; // ebx
  int v5; // eax
  int v6; // edi
  int v7; // edx
  int v8; // edi
  int v9; // ebx
  int v10; // eax
  int v11; // ecx
  int v12; // edi
  int *v13; // ecx
  int v14; // eax
  __int16 *v15; // edi
  int v16; // ebx
  int v17; // ecx
  int v19; // [esp-4h] [ebp-234h]
  int v20; // [esp+10h] [ebp-220h]
  int v21; // [esp+10h] [ebp-220h]
  int v22; // [esp+14h] [ebp-21Ch]
  int v23; // [esp+18h] [ebp-218h]
  int v24; // [esp+18h] [ebp-218h]
  int yTop; // [esp+1Ch] [ebp-214h]
  int xLeft; // [esp+20h] [ebp-210h]
  int v27; // [esp+24h] [ebp-20Ch]
  int i; // [esp+28h] [ebp-208h]
  int v29; // [esp+2Ch] [ebp-204h]
  __int16 v30[256]; // [esp+30h] [ebp-200h]

  v2 = a1[8];
  v20 = *(_DWORD *)(a2 + 28);
  v23 = *(_DWORD *)(a2 + 20);
  sub_46AA60(a1, &xLeft, &yTop);
  v3 = sub_43F320(*(_DWORD *)(a2 + 200));
  v4 = a1[3];
  v22 = a1[2];
  if ( (a1[1] & 0x2000) == 0x2000 )
    sub_43F670(1);
  sub_49F7F0();
  if ( *(_DWORD *)(v2 + 12) )
    v22 -= 10;
  if ( *(_WORD *)(a2 + 72) )
  {
    sub_434390(*(_DWORD *)(a2 + 68));
    sub_43FAF0(*(_DWORD *)(a2 + 200), (_WORD *)(a2 + 72), xLeft + 1, yTop, v22, v3);
    v4 += -1 - v3;
    yTop += v3 + 1;
  }
  if ( a1[1] & 8 )
  {
    if ( *(_BYTE *)a2 & 2 )
    {
      v6 = *(_DWORD *)(a2 + 36);
      v5 = v23;
      goto LABEL_13;
    }
    v5 = v23;
  }
  else
  {
    v5 = *(_DWORD *)(a2 + 44);
  }
  v6 = v20;
LABEL_13:
  if ( v5 != 0x80000000 )
  {
    sub_434460(v5);
    sub_49CE30(xLeft, yTop, v22, v4);
  }
  if ( v6 != 0x80000000 )
  {
    sub_434460(v6);
    sub_49CC70(xLeft, yTop, v22, v4);
  }
  sub_49F6F0(xLeft, yTop, v22, v4);
  v7 = *(__int16 *)(v2 + 54);
  v8 = yTop - v7;
  v21 = yTop - v7;
  if ( *(_DWORD *)(a2 + 68) != 0x80000000 )
  {
    v9 = 0;
    v24 = 0;
    for ( i = 0; ; i = v9 )
    {
      if ( v9 > 0 && *(_DWORD *)(*(_DWORD *)(v2 + 24) + v9 - 524) > *(__int16 *)(v2 + 54) + *(__int16 *)(v2 + 52)
        || v24 == *(__int16 *)(v2 + 44) )
      {
        break;
      }
      v10 = *(_DWORD *)(v2 + 24) + v9;
      if ( *(_DWORD *)v10 < *(__int16 *)(v2 + 54) )
      {
        v21 = v8 + *(unsigned __int8 *)(v10 + 520) + 1;
        goto LABEL_38;
      }
      v11 = *(unsigned __int8 *)(v10 + 520);
      v19 = *(_DWORD *)(v10 + 516);
      v12 = v11 + 1;
      v27 = v11 + 1;
      sub_434390(v19);
      if ( *(_DWORD *)(v2 + 16) )
      {
        v13 = *(int **)(v2 + 48);
        v14 = *v13;
        if ( (int)*v13 >= 0 )
        {
          while ( v24 != v14 )
          {
            v14 = v13[1];
            ++v13;
            if ( v14 < 0 )
              goto LABEL_32;
          }
LABEL_30:
          if ( *(_DWORD *)(a2 + 52) != 0x80000000 )
          {
            sub_434460(*(_DWORD *)(a2 + 52));
            sub_49CE30(xLeft, v21, v22, v12);
          }
          goto LABEL_32;
        }
      }
      else if ( v24 == *(_DWORD *)(v2 + 48) )
      {
        goto LABEL_30;
      }
LABEL_32:
      sub_434390(*(_DWORD *)(*(_DWORD *)(v2 + 24) + v9 + 516));
      if ( (a1[1] & 0x4000) == 0x4000 )
      {
        nox_wcscpy((wchar_t *)v30, (const wchar_t *)(*(_DWORD *)(v2 + 24) + v9 + 4));
        v15 = &v30[nox_wcslen((const wchar_t *)v30)];
        v16 = v22 - 7;
        do
        {
          v17 = *(_DWORD *)(a2 + 200);
          *v15 = 0;
          --v15;
          sub_43F840(v17, (unsigned __int16 *)v30, &v29, 0, 0);
        }
        while ( v29 > v16 );
        sub_43FAF0(*(_DWORD *)(a2 + 200), v30, xLeft + 5, v21 + 2, v16, v27);
        v9 = i;
        v12 = v27;
      }
      else
      {
        sub_43FAF0(*(_DWORD *)(a2 + 200), (_WORD *)(*(_DWORD *)(v2 + 24) + v9 + 4), xLeft + 5, v21 + 2, v22 - 7, v12);
      }
      v21 += v12;
LABEL_38:
      v8 = v21;
      v9 += 524;
      ++v24;
    }
  }
  sub_49F860();
  sub_43F670(0);
  return 1;
}
// 4A3C50: using guessed type wchar_t var_200[256];

//----- (004A3FC0) --------------------------------------------------------
int __cdecl sub_4A3FC0(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // ebp
  int v4; // esi
  int v5; // eax
  int v6; // eax
  int v7; // edx
  int v8; // eax
  int v9; // esi
  int v10; // ebx
  int v11; // eax
  int v12; // ecx
  int v13; // esi
  int *v14; // ecx
  int v15; // eax
  __int16 *v16; // esi
  int v17; // ebx
  int v18; // ecx
  int v20; // [esp-24h] [ebp-254h]
  int v21; // [esp-4h] [ebp-234h]
  int v22; // [esp+10h] [ebp-220h]
  int yTop; // [esp+14h] [ebp-21Ch]
  int xLeft; // [esp+18h] [ebp-218h]
  int v25; // [esp+1Ch] [ebp-214h]
  int v26; // [esp+20h] [ebp-210h]
  int i; // [esp+24h] [ebp-20Ch]
  int v28; // [esp+28h] [ebp-208h]
  int v29; // [esp+2Ch] [ebp-204h]
  __int16 v30[256]; // [esp+30h] [ebp-200h]

  v2 = *(_DWORD *)(a2 + 24);
  v3 = a1[8];
  v28 = *(_DWORD *)(a2 + 28);
  i = v2;
  sub_46AA60(a1, &xLeft, &yTop);
  v4 = a1[3];
  v22 = a1[2];
  if ( (a1[1] & 0x2000) == 0x2000 )
    sub_43F670(1);
  sub_49F7F0();
  if ( *(_DWORD *)(v3 + 12) )
    v22 -= 10;
  if ( a1[1] & 8 )
    v5 = i;
  else
    v5 = *(_DWORD *)(a2 + 48);
  if ( v5 )
    sub_47D2C0(v5, xLeft, yTop);
  if ( *(_WORD *)(a2 + 72) )
  {
    sub_434390(*(_DWORD *)(a2 + 68));
    sub_43FAF0(*(_DWORD *)(a2 + 200), (_WORD *)(a2 + 72), xLeft + 1, yTop, v22, 0);
    v6 = sub_43F320(*(_DWORD *)(a2 + 200));
    v20 = *(_DWORD *)(a2 + 200);
    yTop += v6 + 1;
    v4 += -1 - sub_43F320(v20);
  }
  if ( v28 != 0x80000000 )
  {
    sub_434460(v28);
    sub_49CC70(xLeft, yTop, v22, v4);
  }
  sub_49F6F0(xLeft, yTop, v22, v4);
  v7 = *(__int16 *)(v3 + 54);
  v8 = *(_DWORD *)(a2 + 68);
  v9 = yTop - v7;
  v25 = yTop - v7;
  if ( v8 != 0x80000000 )
  {
    v10 = 0;
    v26 = 0;
    for ( i = 0; ; i = v10 )
    {
      if ( v10 > 0 && *(_DWORD *)(*(_DWORD *)(v3 + 24) + v10 - 524) > *(__int16 *)(v3 + 54) + *(__int16 *)(v3 + 52)
        || v26 == *(__int16 *)(v3 + 44) )
      {
        break;
      }
      v11 = v10 + *(_DWORD *)(v3 + 24);
      if ( *(_DWORD *)v11 < *(__int16 *)(v3 + 54) )
      {
        v25 = v9 + *(unsigned __int8 *)(v11 + 520) + 1;
        goto LABEL_35;
      }
      v12 = *(unsigned __int8 *)(v11 + 520);
      v21 = *(_DWORD *)(v11 + 516);
      v13 = v12 + 1;
      v28 = v12 + 1;
      sub_434390(v21);
      if ( *(_DWORD *)(v3 + 16) )
      {
        v14 = *(int **)(v3 + 48);
        v15 = *v14;
        if ( (int)*v14 >= 0 )
        {
          while ( v26 != v15 )
          {
            v15 = v14[1];
            ++v14;
            if ( v15 < 0 )
              goto LABEL_29;
          }
LABEL_27:
          if ( *(_DWORD *)(a2 + 52) != 0x80000000 )
          {
            sub_434460(*(_DWORD *)(a2 + 52));
            sub_49CE30(xLeft, v25, v22, v13);
          }
          goto LABEL_29;
        }
      }
      else if ( v26 == *(_DWORD *)(v3 + 48) )
      {
        goto LABEL_27;
      }
LABEL_29:
      sub_434390(*(_DWORD *)(v10 + *(_DWORD *)(v3 + 24) + 516));
      if ( (a1[1] & 0x4000) == 0x4000 )
      {
        nox_wcscpy((wchar_t *)v30, (const wchar_t *)(v10 + *(_DWORD *)(v3 + 24) + 4));
        v16 = &v30[nox_wcslen((const wchar_t *)v30)];
        v17 = v22 - 7;
        do
        {
          v18 = *(_DWORD *)(a2 + 200);
          *v16 = 0;
          --v16;
          sub_43F840(v18, (unsigned __int16 *)v30, &v29, 0, 0);
        }
        while ( v29 > v17 );
        sub_43FAF0(*(_DWORD *)(a2 + 200), v30, xLeft + 5, v25 + 2, v17, v28);
        v10 = i;
        v13 = v28;
      }
      else
      {
        sub_43FAF0(*(_DWORD *)(a2 + 200), (_WORD *)(v10 + *(_DWORD *)(v3 + 24) + 4), xLeft + 5, v25 + 2, v22 - 7, v13);
      }
      v25 += v13;
LABEL_35:
      v9 = v25;
      v10 += 524;
      ++v26;
    }
  }
  sub_49F860();
  sub_43F670(0);
  return 1;
}
// 4A3FC0: using guessed type wchar_t var_200[256];

//----- (004A4310) --------------------------------------------------------
_DWORD *__cdecl sub_4A4310(int a1, int a2, int a3, int a4, int a5, int a6, int a7, __int16 *a8)
{
  _DWORD *v8; // ebp
  void *v9; // edi
  int v10; // edi
  int v11; // ecx
  void *v12; // eax
  int v14; // ecx
  int v15; // eax
  wchar_t *v16; // eax
  int v17; // ebx
  wchar_t *v18; // eax
  int v19; // eax
  __int16 *v20; // eax
  int v21; // [esp+10h] [ebp-168h]
  int v22; // [esp+10h] [ebp-168h]
  int v23; // [esp+14h] [ebp-164h]
  int v24[4]; // [esp+1Ch] [ebp-15Ch]
  char v25[332]; // [esp+2Ch] [ebp-14Ch]
  unsigned int v26; // [esp+180h] [ebp+8h]

  v21 = 0;
  if ( a8[1] < sub_43F320(*(_DWORD *)(a7 + 200)) )
    a8[1] = sub_43F320(*(_DWORD *)(a7 + 200));
  if ( *(_WORD *)(a7 + 72) )
    v21 = 1;
  if ( !(*(_BYTE *)(a7 + 8) & 0x20) )
    return 0;
  v8 = sub_46C3E0(a1, a2, a3, a4, a5, a6, sub_4A30D0);
  sub_4A3C00((int)v8, (int)a8);
  if ( v8 )
  {
    if ( !*(_DWORD *)(a7 + 16) )
      *(_DWORD *)(a7 + 16) = v8;
    sub_46AF80((int)v8, (const void *)a7);
    v9 = malloc(524 * *a8);
    *((_DWORD *)a8 + 6) = v9;
    if ( !v9 )
      return 0;
    memset(v9, 0, 524 * *a8);
    v10 = a6;
    a8[26] = a6;
    if ( v21 )
      a8[26] -= sub_43F320(*(_DWORD *)(a7 + 200));
    v11 = *((_DWORD *)a8 + 4);
    a8[27] = 0;
    *((_DWORD *)a8 + 12) = -1;
    a8[23] = 0;
    a8[22] = 0;
    *((_DWORD *)a8 + 10) = 0;
    if ( v11 )
    {
      v12 = malloc(4 * *a8);
      *((_DWORD *)a8 + 12) = v12;
      if ( !v12 )
      {
        free(*((LPVOID *)a8 + 6));
        return 0;
      }
      memset(v12, 0xFFu, 4 * *a8);
      v10 = a6;
    }
    if ( *((_DWORD *)a8 + 3) )
    {
      v24[0] = 0;
      v14 = *(_DWORD *)(a7 + 200);
      v24[1] = 0;
      v24[2] = 0;
      v24[3] = 0;
      v26 = a2 & 0xFFFFEFEF;
      v15 = sub_43F320(v14);
      if ( v21 )
      {
        v22 = v15 + 1;
        v10 = v10 - v15 - 1;
      }
      else
      {
        v22 = 0;
      }
      memset(v25, 0, sizeof(v25));
      if ( (signed char)*((_BYTE *)v8 + 4) >= 0 )
      {
        *(_DWORD *)&v25[20] = *(_DWORD *)&byte_5D4594[2650656];
        *(_DWORD *)&v25[44] = *(_DWORD *)&byte_5D4594[2650656];
        *(_DWORD *)&v25[28] = *(_DWORD *)&byte_5D4594[2614256];
        *(_DWORD *)&v25[36] = *(_DWORD *)&byte_5D4594[2523948];
        *(_DWORD *)&v25[52] = *(_DWORD *)&byte_5D4594[2589772];
        *(_DWORD *)&v25[68] = *(_DWORD *)&byte_5D4594[2614256];
        v16 = sub_40F1D0((char *)&byte_587000[169844], 0, (const char *)&byte_587000[169800], 1483);
        nox_wcscpy((wchar_t *)&v25[72], v16);
        v23 = 10;
      }
      else
      {
        *(_DWORD *)&v25[24] = sub_42F970((const char *)&byte_587000[169708]);
        *(_DWORD *)&v25[40] = sub_42F970((const char *)&byte_587000[169728]);
        *(_DWORD *)&v25[48] = sub_42F970((const char *)&byte_587000[169752]);
        *(_DWORD *)&v25[56] = sub_42F970((const char *)&byte_587000[169776]);
        *(_DWORD *)&v25[32] = 0;
        v23 = 13;
      }
      v17 = v26 | 9;
      *(_DWORD *)&v25[16] = v8;
      *(_DWORD *)&v25[8] = 1;
      *((_DWORD *)a8 + 7) = sub_4A91A0((int)v8, v26 | 9, a5 - 10, v22, 10, v23, v25);
      memset(v25, 0, sizeof(v25));
      if ( (signed char)*((_BYTE *)v8 + 4) >= 0 )
      {
        *(_DWORD *)&v25[20] = *(_DWORD *)&byte_5D4594[2650656];
        *(_DWORD *)&v25[44] = *(_DWORD *)&byte_5D4594[2650656];
        *(_DWORD *)&v25[28] = *(_DWORD *)&byte_5D4594[2614256];
        *(_DWORD *)&v25[36] = *(_DWORD *)&byte_5D4594[2523948];
        *(_DWORD *)&v25[52] = *(_DWORD *)&byte_5D4594[2589772];
        *(_DWORD *)&v25[68] = *(_DWORD *)&byte_5D4594[2614256];
        v18 = sub_40F1D0((char *)&byte_587000[169996], 0, (const char *)&byte_587000[169952], 1519);
        nox_wcscpy((wchar_t *)&v25[72], v18);
      }
      else
      {
        *(_DWORD *)&v25[24] = sub_42F970((const char *)&byte_587000[169860]);
        *(_DWORD *)&v25[40] = sub_42F970((const char *)&byte_587000[169880]);
        *(_DWORD *)&v25[48] = sub_42F970((const char *)&byte_587000[169904]);
        *(_DWORD *)&v25[56] = sub_42F970((const char *)&byte_587000[169928]);
        *(_DWORD *)&v25[32] = 0;
      }
      *(_DWORD *)&v25[8] = 1;
      *(_DWORD *)&v25[16] = v8;
      *((_DWORD *)a8 + 8) = sub_4A91A0((int)v8, v17, a5 - 10, v22 + v10 - v23, 10, v23, v25);
      memset(v25, 0, sizeof(v25));
      if ( (signed char)*((_BYTE *)v8 + 4) >= 0 )
      {
        *(_DWORD *)&v25[20] = *(_DWORD *)&byte_5D4594[2650656];
        *(_DWORD *)&v25[44] = *(_DWORD *)&byte_5D4594[2650656];
        *(_DWORD *)&v25[36] = *(_DWORD *)&byte_5D4594[2650656];
        *(_DWORD *)&v25[28] = *(_DWORD *)&byte_5D4594[2614256];
        *(_DWORD *)&v25[52] = *(_DWORD *)&byte_5D4594[2614256];
        v19 = 10;
      }
      else
      {
        *(_DWORD *)&v25[24] = sub_42F970((const char *)&byte_587000[170012]);
        *(_DWORD *)&v25[40] = sub_42F970((const char *)&byte_587000[170032]);
        *(_DWORD *)&v25[48] = sub_42F970((const char *)&byte_587000[170056]);
        *(_DWORD *)&v25[56] = sub_42F970((const char *)&byte_587000[170080]);
        *(_DWORD *)&v25[32] = 0;
        v19 = 9;
      }
      v24[0] = 0;
      v24[1] = 0;
      v24[2] = 0;
      *(_DWORD *)&v25[8] = 8;
      v24[3] = 0;
      *(_DWORD *)&v25[16] = v8;
      *((_DWORD *)a8 + 9) = sub_4B4EE0((int)v8, v17, a5 - v19, v22 + v23, v19, v10 - 2 * v23, v25, (float *)v24);
    }
    v20 = (__int16 *)malloc(0x38u);
    qmemcpy(v20, a8, 0x38u);
    v8[8] = v20;
  }
  return v8;
}

//----- (004A4800) --------------------------------------------------------
int __cdecl sub_4A4800(int a1)
{
  int result; // eax
  _DWORD *v2; // ecx
  int v3; // esi
  int v4; // edi

  result = 0;
  v2 = *(_DWORD **)(a1 + 24);
  v3 = *(__int16 *)(a1 + 54);
  if ( *v2 <= v3 )
  {
    while ( result < *(__int16 *)(a1 + 44) )
    {
      v4 = v2[131];
      v2 += 131;
      ++result;
      if ( v4 > v3 )
        return result;
    }
    result = 0;
  }
  return result;
}

//----- (004A4840) --------------------------------------------------------
int sub_4A4840()
{
  int result; // eax
  _DWORD *v1; // eax
  _DWORD *v2; // eax
  _DWORD *v3; // eax

  sub_5007E0((char *)&byte_587000[170168]);
  sub_4A1BE0(1);
  *(_DWORD *)&byte_5D4594[1307724] = sub_431770();
  sub_43BDD0(600);
  result = sub_4A0AD0((const char *)&byte_587000[170172], sub_4A4A20);
  *(_DWORD *)&byte_5D4594[1307736] = result;
  if ( result )
  {
    sub_46B300(result, sub_4A18E0);
    result = sub_43C5B0(*(_DWORD **)&byte_5D4594[1307736], 0, 0, 0, -460, 0, 20, 0, -40);
    *(_DWORD *)&byte_5D4594[1307732] = result;
    if ( result )
    {
      *(_DWORD *)result = 600;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307732] + 48) = sub_4A4970;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307732] + 56) = sub_4A49A0;
      v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307736], 601);
      sub_46B340((int)v1, sub_4A49D0);
      v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307736], 603);
      sub_46B340((int)v2, sub_4A49D0);
      v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307736], 602);
      sub_46B340((int)v3, sub_4A49D0);
      *(_DWORD *)&byte_5D4594[1307728] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307736], 610);
      sub_46A8A0();
      *(_DWORD *)&byte_5D4594[1307740] = 0;
      sub_4A19F0((char *)&byte_587000[170188]);
      sub_4602F0();
      result = 1;
    }
  }
  return result;
}
// 4A18E0: using guessed type int __cdecl sub_4A18E0(int, int, int, int);

//----- (004A4970) --------------------------------------------------------
int sub_4A4970()
{
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307732] + 64) = 2;
  sub_43BE40(2);
  sub_452D80(923, 100);
  return 1;
}

//----- (004A49A0) --------------------------------------------------------
int sub_4A49A0()
{
  int (*v0)(void); // esi

  v0 = *(int (**)(void))(*(_DWORD *)&byte_5D4594[1307732] + 52);
  sub_43C570(*(LPVOID *)&byte_5D4594[1307732]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1307736]);
  v0();
  return 1;
}

//----- (004A49D0) --------------------------------------------------------
int __cdecl sub_4A49D0(int yTop, int a2)
{
  _DWORD *v1; // esi
  int xLeft; // [esp+4h] [ebp-4h]

  v1 = (_DWORD *)yTop;
  if ( *(_DWORD *)&byte_5D4594[1307740] != *(_DWORD *)yTop )
  {
    sub_46AA60((_DWORD *)yTop, &xLeft, &yTop);
    sub_49CF10(xLeft, yTop, v1[6] - v1[4], v1[7] - v1[5]);
  }
  return 1;
}

//----- (004A4A20) --------------------------------------------------------
int __cdecl sub_4A4A20(int a1, int a2, int *a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // ebx
  _DWORD *v8; // esi
  wchar_t *v9; // eax

  if ( a2 != 16389 )
  {
    if ( a2 != 16391 )
      return 0;
    v4 = sub_46B0A0(a3);
    if ( v4 >= 601 )
    {
      if ( v4 <= 603 )
        return 1;
      if ( v4 == 610 )
      {
        if ( sub_40A5C0(0x2000) && !sub_40A5C0(4096) )
        {
          if ( sub_4D6F50() || (v5 = sub_4D6F70()) != 0 )
            v5 = 1;
          sub_4A4B70(v5);
        }
        sub_4A4970();
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307732] + 52) = sub_4A5D00;
      }
    }
    sub_452D80(921, 100);
    return 1;
  }
  v6 = sub_46B0A0(a3);
  v7 = v6;
  if ( v6 >= 601 && v6 <= 603 )
  {
    sub_46ABB0(*(int *)&byte_5D4594[1307728], 1);
    v8 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307736], 605);
    *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307724] + 66) = v7 - 89;
    v9 = sub_40F1D0(
           *(char **)&byte_587000[4 * (unsigned __int8)(v7 - 89) + 170208],
           0,
           (const char *)&byte_587000[170248],
           279);
    sub_46B490((int)v8, 16385, (int)v9, 0);
    *(_DWORD *)&byte_5D4594[1307740] = v7;
  }
  sub_452D80(920, 100);
  return 1;
}

//----- (004A4B70) --------------------------------------------------------
void *__cdecl sub_4A4B70(int a1)
{
  unsigned __int8 v1; // dl
  void *result; // eax
  _BYTE *v3; // edi
  int v4; // esi
  int v5; // ebp
  int v6; // esi
  int v7; // ebp
  bool v8; // zf
  unsigned __int8 v9; // [esp+10h] [ebp-Ch]
  int v10; // [esp+14h] [ebp-8h]
  int v11; // [esp+18h] [ebp-4h]

  v1 = 0;
  result = (void *)*(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[1307724] + 66);
  v3 = *(_BYTE **)&byte_587000[4 * (_DWORD)result + 170156];
  if ( *v3 )
  {
    do
      result = (void *)++v1;
    while ( v3[4 * v1 + v1] );
    if ( v1 )
    {
      v4 = 0;
      v9 = sub_415FF0(0, v1 - 1, (const char *)&byte_587000[170288], 195);
      if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307724] + 66) )
      {
        v10 = 0;
        v11 = 5;
        do
        {
          sub_45E110(v10);
          v6 = 0;
          v7 = 5;
          do
          {
            if ( a1 == 1 )
              sub_45DBE0((void *)2, 0, v6);
            else
              sub_45DBE0((void *)2, (unsigned __int8)v3[4 * v9 + v6 + v9], v6);
            ++v6;
            --v7;
          }
          while ( v7 );
          v8 = v11 == 1;
          ++v10;
          --v11;
        }
        while ( !v8 );
        result = (void *)sub_45E110(0);
      }
      else
      {
        sub_45E110(0);
        v5 = 5;
        do
        {
          if ( a1 == 1 )
            result = sub_45DBE0((void *)3, 0, v4);
          else
            result = sub_45DBE0((void *)3, (unsigned __int8)v3[4 * v9 + v4 + v9], v4);
          ++v4;
          --v5;
        }
        while ( v5 );
      }
    }
  }
  return result;
}

//----- (004A4CB0) --------------------------------------------------------
int __cdecl sub_4A4CB0(const void *a1, const void *a2)
{
  if ( *((_WORD *)a1 + 594) != *((_WORD *)a2 + 594) )
    return *((unsigned __int16 *)a2 + 594) - *((unsigned __int16 *)a1 + 594);
  if ( *((_WORD *)a1 + 595) != *((_WORD *)a2 + 595) )
    return *((unsigned __int16 *)a2 + 595) - *((unsigned __int16 *)a1 + 595);
  if ( *((_WORD *)a1 + 597) != *((_WORD *)a2 + 597) )
    return *((unsigned __int16 *)a2 + 597) - *((unsigned __int16 *)a1 + 597);
  if ( *((_WORD *)a1 + 598) != *((_WORD *)a2 + 598) )
    return *((unsigned __int16 *)a2 + 598) - *((unsigned __int16 *)a1 + 598);
  if ( *((_WORD *)a1 + 599) != *((_WORD *)a2 + 599) )
    return *((unsigned __int16 *)a2 + 599) - *((unsigned __int16 *)a1 + 599);
  if ( *((_WORD *)a1 + 600) != *((_WORD *)a2 + 600) )
    return *((unsigned __int16 *)a2 + 600) - *((unsigned __int16 *)a1 + 600);
  if ( *((_WORD *)a1 + 601) == *((_WORD *)a2 + 601) )
    return 0;
  return *((unsigned __int16 *)a2 + 601) - *((unsigned __int16 *)a1 + 601);
}

//----- (004A4DB0) --------------------------------------------------------
int sub_4A4DB0()
{
  int result; // eax
  _DWORD *v1; // esi
  _DWORD *v2; // esi
  _DWORD *v3; // esi
  wchar_t *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // esi
  wchar_t *v8; // eax
  _DWORD *v9; // eax

  sub_477610(0);
  if ( sub_4D6F30() )
    sub_4D6F90(1);
  sub_43BDD0(500);
  sub_4A1BE0(1);
  result = sub_4A0AD0("SelChar.wnd", sub_4A5710);
  *(_DWORD *)&byte_5D4594[1307764] = result;
  if ( result )
  {
    sub_46B300(result, sub_4A18E0);
    result = sub_43C5B0(*(_DWORD **)&byte_5D4594[1307764], 0, 0, 0, -440, 0, 20, 0, -40);
    *(_DWORD *)&byte_5D4594[1307748] = result;
    if ( result )
    {
      *(_DWORD *)result = 500;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307748] + 48) = sub_4A50A0;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307748] + 56) = sub_4A50D0;
      *(_DWORD *)&byte_5D4594[1307744] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 510);
      *(_DWORD *)&byte_5D4594[1307776] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 511);
      *(_DWORD *)&byte_5D4594[1307768] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 512);
      sub_46B2C0(*(int *)&byte_5D4594[1307744], sub_4A5710);
      sub_46B120(*(_DWORD **)&byte_5D4594[1307776], *(int *)&byte_5D4594[1307744]);
      sub_46B120(*(_DWORD **)&byte_5D4594[1307768], *(int *)&byte_5D4594[1307744]);
      if ( sub_40A5C0(2048) )
      {
        v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 504);
        sub_46AC00((int)v5, 1);
        v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 505);
        sub_46AC00((int)v6, 1);
        v7 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 509);
        v8 = sub_40F1D0((char *)&byte_587000[170436], 0, (const char *)&byte_587000[170396], 746);
        sub_46AEE0((int)v7, (int)v8);
      }
      else
      {
        v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 504);
        sub_46B490(*(int *)&byte_5D4594[1307744], 16408, (int)v1, 0);
        sub_46B490(*(int *)&byte_5D4594[1307776], 16408, (int)v1, 0);
        sub_46B490(*(int *)&byte_5D4594[1307768], 16408, (int)v1, 0);
        v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 505);
        sub_46B490(*(int *)&byte_5D4594[1307744], 16409, (int)v2, 0);
        sub_46B490(*(int *)&byte_5D4594[1307776], 16409, (int)v2, 0);
        sub_46B490(*(int *)&byte_5D4594[1307768], 16409, (int)v2, 0);
        v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 509);
        v4 = sub_40F1D0((char *)&byte_587000[170380], 0, (const char *)&byte_587000[170340], 735);
        sub_46AEE0((int)v3, (int)v4);
      }
      sub_4A5150();
      sub_4A19F0((char *)&byte_587000[170448]);
      sub_46A8A0();
      if ( sub_40A5C0(0x2000) )
        sub_4A5700();
      else
        sub_4A56E0();
      if ( sub_40A5C0(0x2000000) )
      {
        v9 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 502);
        sub_46B490(*(int *)&byte_5D4594[1307764], 16391, (int)v9, 0);
      }
      result = 1;
    }
  }
  return result;
}
// 4A18E0: using guessed type int __cdecl sub_4A18E0(int, int, int, int);

//----- (004A50A0) --------------------------------------------------------
int sub_4A50A0()
{
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307748] + 64) = 2;
  sub_43BE40(2);
  sub_452D80(923, 100);
  return 1;
}

//----- (004A50D0) --------------------------------------------------------
int sub_4A50D0()
{
  void (*v0)(void); // esi

  v0 = *(void (**)(void))(*(_DWORD *)&byte_5D4594[1307748] + 52);
  sub_43C570(*(LPVOID *)&byte_5D4594[1307748]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1307764]);
  if ( v0 )
  {
    v0();
    return 1;
  }
  sub_431510();
  sub_46C2E0();
  if ( sub_40A5C0(0x2000) )
  {
    if ( !sub_43AF70() )
    {
      sub_43B4D0();
      return 1;
    }
    if ( sub_43AF70() == 1 )
    {
      sub_43B670();
      return 1;
    }
  }
  else
  {
    sub_4A24A0();
  }
  return 1;
}

//----- (004A5150) --------------------------------------------------------
int sub_4A5150()
{
  size_t v0; // ebp
  _DWORD *v1; // eax
  char *v2; // edi
  int result; // eax
  HANDLE v7; // eax
  void *v8; // esi
  size_t v9; // ebp
  HANDLE v10; // edi
  int v11; // esi
  int v12; // esi
  size_t v13; // ebx
  wchar_t *v14; // eax
  unsigned int v15; // edi
  wchar_t *v16; // eax
  char *v17; // eax
  _DWORD *v18; // eax
  _DWORD *v19; // eax
  _DWORD *v20; // esi
  _DWORD *v21; // eax
  _DWORD *v22; // eax
  _DWORD *v23; // eax
  int v24; // [esp-Ch] [ebp-C18h]
  wchar_t *v25; // [esp-Ch] [ebp-C18h]
  wchar_t *v26; // [esp-8h] [ebp-C14h]
  struct _WIN32_FIND_DATAA FindFileData; // [esp+Ch] [ebp-C00h]
  char v28[64]; // [esp+14Ch] [ebp-AC0h]
  wchar_t v29[64]; // [esp+18Ch] [ebp-A80h]
  wchar_t v30[256]; // [esp+20Ch] [ebp-A00h]
  char PathName[1024]; // [esp+40Ch] [ebp-800h]
  char v32[1024]; // [esp+80Ch] [ebp-400h]

  v0 = 0;
  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 501);
  sub_46ABB0((int)v1, 1);
  v2 = sub_409E10();
  strcpy(PathName, v2);
  strcat(PathName, "\\Save\\");
  CreateDirectoryA(PathName, 0);
  if ( sub_40A5C0(2048) )
  {
    *(_DWORD *)&byte_5D4594[1307780] = calloc(0xEu, 0x4FEu);
    result = sub_46CE40(
               *(int *)&byte_5D4594[1307744],
               *(int *)&byte_5D4594[1307776],
               *(int *)&byte_5D4594[1307768],
               *(_BYTE **)&byte_5D4594[1307780]);
  }
  else
  {
    SetCurrentDirectoryA(PathName);
    strcpy(v32, PathName);
    v7 = FindFirstFileA("*.plr", &FindFileData);
    v8 = v7;
    if ( v7 != (HANDLE)-1 )
    {
      if ( !(FindFileData.dwFileAttributes & 0x10) )
        v0 = 1;
      if ( FindNextFileA(v7, &FindFileData) )
      {
        do
        {
          if ( !(FindFileData.dwFileAttributes & 0x10) )
            ++v0;
        }
        while ( FindNextFileA(v8, &FindFileData) );
      }
      FindClose(v8);
    }
    *(_DWORD *)&byte_5D4594[1307780] = calloc(v0, 0x4FEu);
    v9 = 0;
    v10 = FindFirstFileA("*.plr", &FindFileData);
    if ( v10 != (HANDLE)-1 )
    {
      if ( !(FindFileData.dwFileAttributes & 0x10) )
      {
        nox_sprintf(PathName, "%s%s", v32, FindFileData.cFileName);
        sub_41A000(PathName, *(_BYTE **)&byte_5D4594[1307780]);
        if ( sub_4A5690(*(_BYTE **)&byte_5D4594[1307780]) == 1 )
          v9 = 1;
      }
      if ( FindNextFileA(v10, &FindFileData) )
      {
        v11 = 1278 * v9;
        do
        {
          if ( !(FindFileData.dwFileAttributes & 0x10) )
          {
            nox_sprintf(PathName, "%s%s", v32, FindFileData.cFileName);
            sub_41A000(PathName, (_BYTE *)(v11 + *(_DWORD *)&byte_5D4594[1307780]));
            if ( sub_4A5690((_BYTE *)(v11 + *(_DWORD *)&byte_5D4594[1307780])) == 1 )
            {
              ++v9;
              v11 += 1278;
            }
          }
        }
        while ( FindNextFileA(v10, &FindFileData) );
      }
      FindClose(v10);
    }
    qsort(*(void **)&byte_5D4594[1307780], v9, 0x4FEu, sub_4A4CB0);
    if ( v9 )
    {
      v12 = 0;
      v13 = v9;
      do
      {
        nox_sprintf(
          v28,
          (const char *)&byte_587000[170508],
          *(_DWORD *)&byte_587000[4 * *(unsigned __int8 *)(v12 + *(_DWORD *)&byte_5D4594[1307780] + 1274) + 29456]);
        v26 = sub_40F1D0(v28, 0, (const char *)&byte_587000[170520], 285);
        v24 = v12 + *(_DWORD *)&byte_5D4594[1307780] + 1224;
        v14 = sub_40F1D0((char *)&byte_587000[170600], 0, (const char *)&byte_587000[170560], 283);
        nox_swprintf(v30, v14, v24, v26);
        if ( *(_BYTE *)(v12 + *(_DWORD *)&byte_5D4594[1307780]) & 4 )
        {
          v15 = *(unsigned __int8 *)(v12 + *(_DWORD *)&byte_5D4594[1307780] + 1277);
          if ( v15 < 1 )
            v15 = 1;
          nox_wcscat(v30, (const wchar_t *)&byte_587000[170632]);
          v16 = sub_40F1D0((char *)&byte_587000[170680], 0, (const char *)&byte_587000[170640], 298);
          nox_wcscat(v30, v16);
          nox_swprintf(v29, (const wchar_t *)&byte_587000[170700], v15);
          nox_wcscat(v30, v29);
        }
        sub_46B490(*(int *)&byte_5D4594[1307744], 16397, (int)&byte_587000[170708], 14);
        sub_46B490(*(int *)&byte_5D4594[1307768], 16397, (int)v30, 14);
        if ( *(_BYTE *)(v12 + *(_DWORD *)&byte_5D4594[1307780]) & 4 )
          v25 = sub_40F1D0((char *)&byte_587000[170752], 0, (const char *)&byte_587000[170712], 316);
        else
          v25 = sub_40F1D0((char *)&byte_587000[170812], 0, (const char *)&byte_587000[170772], 325);
        sub_46B490(*(int *)&byte_5D4594[1307776], 16397, (int)v25, 14);
        v12 += 1278;
        --v13;
      }
      while ( v13 );
    }
    v17 = sub_409E10();
    SetCurrentDirectoryA(v17);
    if ( v9 )
    {
      v18 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 503);
      sub_46ABB0((int)v18, 1);
      v19 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 502);
      sub_46ABB0((int)v19, 1);
      v20 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 501);
      if ( (sub_4D6F50() || sub_4D6F70()) && sub_4DC7D0() >= 14 )
        sub_46ABB0((int)v20, 0);
      else
        sub_46ABB0((int)v20, 1);
    }
    else
    {
      v21 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 503);
      sub_46ABB0((int)v21, 0);
      v22 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 502);
      sub_46ABB0((int)v22, 0);
      v23 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1307764], 501);
      sub_46ABB0((int)v23, 1);
    }
    result = *(_DWORD *)&byte_5D4594[1307776];
    if ( *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1307776] + 32) + 46) )
    {
      sub_46B490(*(int *)&byte_5D4594[1307776], 16403, 0, 0);
      result = sub_46B490(*(int *)&byte_5D4594[1307768], 16403, 0, 0);
    }
  }
  return result;
}
// 4A5150: using guessed type CHAR PathName[1024];

//----- (004A5690) --------------------------------------------------------
int __cdecl sub_4A5690(_BYTE *a1)
{
  int result; // eax

  if ( !(*a1 & 4) )
  {
    if ( !sub_4D6F50() && !sub_4D6F70() )
      return 1;
    if ( !(*a1 & 4) )
      goto LABEL_12;
  }
  if ( sub_4D6F50() || sub_4D6F70() )
    result = 1;
  else
LABEL_12:
    result = 0;
  return result;
}

//----- (004A56E0) --------------------------------------------------------
void *sub_4A56E0()
{
  int v0; // eax

  v0 = *(_DWORD *)&byte_5D4594[2650636];
  LOBYTE(v0) = byte_5D4594[2650636] & 0xEF;
  *(_DWORD *)&byte_5D4594[2650636] = v0;
  return sub_4602F0();
}

//----- (004A5700) --------------------------------------------------------
int sub_4A5700()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[2650636];
  LOBYTE(result) = byte_5D4594[2650636] | 0x10;
  *(_DWORD *)&byte_5D4594[2650636] = result;
  return result;
}

//----- (004A5710) --------------------------------------------------------
int __cdecl sub_4A5710(int a1, unsigned int a2, int *a3, int a4)
{
  int v5; // eax
  wchar_t *v6; // eax
  int v7; // ebx
  int v8; // eax
  bool v9; // zf
  int v10; // eax
  char *v11; // eax
  char *v12; // eax
  int v13; // eax
  int v14; // eax
  wchar_t *v15; // [esp-18h] [ebp-938h]
  int v16; // [esp-14h] [ebp-934h]
  int (*v17)(); // [esp-10h] [ebp-930h]
  int v18; // [esp-10h] [ebp-930h]
  int v19; // [esp-Ch] [ebp-92Ch]
  char v20[12]; // [esp+4h] [ebp-91Ch]
  char v21[16]; // [esp+10h] [ebp-910h]
  char v22[1024]; // [esp+20h] [ebp-900h]
  char v23[1278]; // [esp+420h] [ebp-500h]

  if ( a2 <= 0x4007 )
  {
    if ( a2 != 16391 )
    {
      if ( a2 == 2 )
      {
        if ( sub_46B0A0(a3) == 500 )
        {
          free(*(LPVOID *)&byte_5D4594[1307780]);
          return 0;
        }
      }
      else if ( a2 == 16389 )
      {
        sub_452D80(920, 100);
        return 1;
      }
      return 0;
    }
    switch ( sub_46B0A0(a3) )
    {
      case 501:
        sub_4E3C60(1000000000);
        sub_4A50A0();
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307748] + 52) = sub_4A4840;
        goto LABEL_40;
      case 502:
        v7 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307776] + 32);
        v8 = *(_DWORD *)(v7 + 48);
        if ( v8 != -1 )
        {
          if ( !strlen((const char *)(*(_DWORD *)&byte_5D4594[1307780] + 1278 * v8 + 4)) )
            goto LABEL_38;
          sub_4DC970((char *)(*(_DWORD *)&byte_5D4594[1307780] + 1278 * v8 + 4), v20);
          if ( (!sub_40A5C0(2048) || sub_4DC100((int)v20, (int)&byte_587000[171268]))
            && sub_41A000((char *)(*(_DWORD *)&byte_5D4594[1307780] + 1278 * *(_DWORD *)(v7 + 48) + 4), v23) )
          {
            qmemcpy(&byte_5D4594[2660684], v23, 0x4FCu);
            *(_WORD *)&byte_5D4594[2661960] = *(_WORD *)&v23[1276];
            sub_43BDC0();
            if ( byte_5D4594[2661958] )
            {
              if ( byte_5D4594[2661958] == 1 )
              {
                sub_409D70((char *)&byte_587000[171288]);
              }
              else if ( byte_5D4594[2661958] == 2 )
              {
                sub_409D70((char *)&byte_587000[171300]);
              }
            }
            else
            {
              sub_409D70((char *)&byte_587000[171276]);
            }
            if ( sub_40A5C0(2048) )
            {
              sub_4DB220(1);
              sub_4DB230(1);
              nox_sprintf(
                v21,
                (const char *)&byte_587000[171312],
                *(_DWORD *)&byte_5D4594[1307780] + 1278 * *(_DWORD *)(v7 + 48) + 1156);
              v9 = sub_4DB2A0(v21) == 0;
              v10 = *(_DWORD *)(v7 + 48);
              v19 = *(_DWORD *)&byte_5D4594[1307780] + 1278 * v10 + 1156;
              v18 = *(_DWORD *)&byte_5D4594[1307780] + 1278 * v10 + 1156;
              if ( v9 )
              {
                v12 = sub_409E10();
                nox_sprintf(v22, (const char *)&byte_587000[171352], v12, v18, v19);
              }
              else
              {
                v11 = sub_409E10();
                nox_sprintf(v22, (const char *)&byte_587000[171328], v11, &byte_587000[171320], v18, v19);
              }
              sub_4DB270(v22);
              sub_409D70(v21);
              sub_4DCC70(1);
              v13 = sub_41D090((char *)(*(_DWORD *)&byte_5D4594[1307780] + 1278 * *(_DWORD *)(v7 + 48) + 4));
              sub_4E3C60(v13);
            }
            else if ( sub_4D6F30() )
            {
              sub_4DCE60(*(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[1307780] + 1278 * *(_DWORD *)(v7 + 48) + 1277));
              sub_4DCE80((const char *)(*(_DWORD *)&byte_5D4594[1307780] + 1278 * *(_DWORD *)(v7 + 48) + 1156));
              v14 = sub_41D090((char *)(*(_DWORD *)&byte_5D4594[1307780] + 1278 * *(_DWORD *)(v7 + 48) + 4));
              sub_4E3C60(v14);
            }
            sub_4A24C0(0);
            sub_4A50A0();
            *(_DWORD *)(*(_DWORD *)&byte_5D4594[1307748] + 52) = 0;
          }
        }
        goto LABEL_40;
      case 503:
        v5 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1307776] + 32) + 48);
        if ( v5 == -1 )
          goto LABEL_40;
        *(_DWORD *)&byte_5D4594[1307772] = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1307776] + 32) + 48);
        sub_4DC970((char *)(*(_DWORD *)&byte_5D4594[1307780] + 1278 * v5 + 4), (char *)&byte_5D4594[1307752]);
        if ( sub_40A5C0(2048) && !strcmp((const char *)&byte_5D4594[1307752], (const char *)&byte_587000[170824]) )
        {
          sub_452D80(925, 100);
          v17 = 0;
          v16 = 33;
          v15 = sub_40F1D0((char *)&byte_587000[170876], 0, (const char *)&byte_587000[170836], 466);
          v6 = sub_40F1D0((char *)&byte_587000[170952], 0, (const char *)&byte_587000[170912], 465);
        }
        else
        {
          if ( !strlen((const char *)(*(_DWORD *)&byte_5D4594[1307780] + 1278 * *(_DWORD *)&byte_5D4594[1307772] + 4)) )
          {
LABEL_38:
            sub_452D80(925, 100);
            goto LABEL_40;
          }
          v17 = sub_4A5C70;
          v16 = 56;
          if ( sub_40A5C0(2048) )
          {
            v15 = sub_40F1D0((char *)&byte_587000[171024], 0, (const char *)&byte_587000[170984], 480);
            v6 = sub_40F1D0((char *)&byte_587000[171092], 0, (const char *)&byte_587000[171052], 479);
          }
          else
          {
            v15 = sub_40F1D0((char *)&byte_587000[171160], 0, (const char *)&byte_587000[171120], 488);
            v6 = sub_40F1D0((char *)&byte_587000[171236], 0, (const char *)&byte_587000[171196], 487);
          }
        }
        sub_449A10(0, (int)v6, (int)v15, v16, v17, 0);
LABEL_40:
        sub_452D80(921, 100);
        return 1;
      case 504:
      case 505:
        sub_46B490(*(int *)&byte_5D4594[1307744], 0x4000, (int)a3, 0);
        sub_46B490(*(int *)&byte_5D4594[1307776], 0x4000, (int)a3, 0);
        sub_46B490(*(int *)&byte_5D4594[1307768], 0x4000, (int)a3, 0);
        goto LABEL_40;
      default:
        goto LABEL_40;
    }
  }
  if ( a2 == 16400 )
  {
    sub_46B490(*(int *)&byte_5D4594[1307744], 16403, a4, 0);
    sub_46B490(*(int *)&byte_5D4594[1307776], 16403, a4, 0);
    sub_46B490(*(int *)&byte_5D4594[1307768], 16403, a4, 0);
  }
  return 0;
}

//----- (004A5C70) --------------------------------------------------------
int sub_4A5C70()
{
  if ( sub_40A5C0(2048) )
    sub_4DBE10((int)&byte_5D4594[1307752], 1);
  else
    DeleteFileA((LPCSTR)(*(_DWORD *)&byte_5D4594[1307780] + 1278 * *(_DWORD *)&byte_5D4594[1307772] + 4));
  sub_46B490(*(int *)&byte_5D4594[1307744], 16399, 0, 0);
  sub_46B490(*(int *)&byte_5D4594[1307776], 16399, 0, 0);
  sub_46B490(*(int *)&byte_5D4594[1307768], 16399, 0, 0);
  return sub_4A5150();
}

//----- (004A5D00) --------------------------------------------------------
int sub_4A5D00()
{
  char *v0; // eax
  int result; // eax
  int i; // esi
  _DWORD *v3; // eax
  int j; // esi
  _DWORD *v5; // edi
  wchar_t *v6; // eax
  _DWORD *v7; // eax

  sub_43BDD0(700);
  v0 = sub_431770();
  *(_DWORD *)&byte_5D4594[1307784] = v0;
  v0[67] = 0;
  result = sub_4A0AD0((const char *)&byte_587000[171392], sub_4A7330);
  *(_DWORD *)&byte_5D4594[1308084] = result;
  if ( result )
  {
    sub_46B300(result, sub_4A18E0);
    result = sub_43C5B0(*(_DWORD **)&byte_5D4594[1308084], 0, 0, 0, -440, 0, 20, 0, -40);
    *(_DWORD *)&byte_5D4594[1308092] = result;
    if ( result )
    {
      *(_DWORD *)result = 700;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308092] + 48) = sub_4A6890;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308092] + 56) = sub_4A6C90;
      sub_4A5E90();
      for ( i = 720; i <= 729; ++i )
      {
        v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], i);
        sub_46B340((int)v3, sub_4A6D20);
      }
      for ( j = 761; j <= 792; ++j )
      {
        v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], j);
        sub_46B340((int)v5, sub_4A6D20);
      }
      if ( *(_DWORD *)&byte_587000[171388] )
      {
        v6 = sub_40F1D0((char *)&byte_587000[171448], 0, (const char *)&byte_587000[171408], 1138);
        sub_46B490(*(int *)&byte_5D4594[1308152], 16414, (int)v6, 0);
      }
      sub_46A8A0();
      *(_DWORD *)&byte_5D4594[1308088] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 760);
      sub_46B2C0(*(int *)&byte_5D4594[1308088], sub_4A7330);
      sub_46B300(*(int *)&byte_5D4594[1308088], sub_4A7270);
      sub_46B120(*(_DWORD **)&byte_5D4594[1308088], 0);
      sub_4BFAD0();
      v7 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 740);
      sub_46B340((int)v7, sub_4A6DC0);
      result = 1;
    }
  }
  return result;
}
// 4A18E0: using guessed type int __cdecl sub_4A18E0(int, int, int, int);

//----- (004A5E90) --------------------------------------------------------
int sub_4A5E90()
{
  const char **i; // eax
  _DWORD *v1; // eax
  _DWORD *v2; // eax
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  int result; // eax

  if ( *(_DWORD *)&byte_587000[171384] )
    sub_4A62B0();
  for ( i = (const char **)sub_413390(); i; i = (const char **)sub_4133A0((int)i) )
  {
    if ( !strcmp(*i, (const char *)&byte_587000[171460]) )
    {
      *(_DWORD *)&byte_5D4594[1308156] = i;
    }
    else if ( !strcmp(*i, (const char *)&byte_587000[171472]) )
    {
      *(_DWORD *)&byte_5D4594[1308160] = i;
    }
    else if ( !strcmp(*i, (const char *)&byte_587000[171484]) )
    {
      *(_DWORD *)&byte_5D4594[1308164] = i;
    }
  }
  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 720);
  *(_DWORD *)&byte_5D4594[1308096] = v1;
  v1[8] = 131074;
  v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 721);
  *(_DWORD *)&byte_5D4594[1308100] = v2;
  v2[8] = 589825;
  v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 722);
  *(_DWORD *)&byte_5D4594[1308104] = v3;
  v3[8] = 589825;
  v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 723);
  *(_DWORD *)&byte_5D4594[1308108] = v4;
  v4[8] = 589825;
  v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 724);
  *(_DWORD *)&byte_5D4594[1308112] = v5;
  v5[8] = 589825;
  v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 725);
  *(_DWORD *)&byte_5D4594[1308116] = v6;
  v6[8] = *(unsigned __int16 *)&byte_587000[171372] << 16;
  v7 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 726);
  *(_DWORD *)&byte_5D4594[1308120] = v7;
  v7[8] = *(unsigned __int16 *)&byte_587000[171374] << 16;
  v8 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 727);
  *(_DWORD *)&byte_5D4594[1308124] = v8;
  v8[8] = *(unsigned __int16 *)&byte_587000[171376] << 16;
  v9 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 728);
  *(_DWORD *)&byte_5D4594[1308128] = v9;
  v9[8] = *(unsigned __int16 *)&byte_587000[171378] << 16;
  v10 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 729);
  *(_DWORD *)&byte_5D4594[1308132] = v10;
  v10[8] = *(unsigned __int16 *)&byte_587000[171380] << 16;
  *(_DWORD *)&byte_5D4594[1308136] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 711);
  *(_DWORD *)&byte_5D4594[1308140] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 712);
  *(_DWORD *)&byte_5D4594[1308144] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 713);
  *(_DWORD *)&byte_5D4594[1308148] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 714);
  *(_DWORD *)&byte_5D4594[1308152] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], 751);
  result = *(_DWORD *)&byte_587000[171388];
  if ( !*(_DWORD *)&byte_587000[171388] )
  {
    sub_46B490(*(int *)&byte_5D4594[1308152], 16414, *(int *)&byte_5D4594[1307784], 0);
    sub_4A61E0(*(_DWORD **)&byte_5D4594[1308096], 2, (_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 71));
    sub_4A61E0(*(_DWORD **)&byte_5D4594[1308100], 1, (_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 68));
    sub_4A61E0(*(_DWORD **)&byte_5D4594[1308104], 1, (_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 74));
    sub_4A61E0(*(_DWORD **)&byte_5D4594[1308108], 1, (_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 77));
    sub_4A61E0(*(_DWORD **)&byte_5D4594[1308112], 1, (_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 80));
    *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308116] + 32) = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[1307784] + 83) << 16;
    *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308120] + 32) = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[1307784] + 84) << 16;
    *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308124] + 32) = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[1307784] + 85) << 16;
    *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308128] + 32) = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[1307784] + 86) << 16;
    result = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[1307784] + 87) << 16;
    *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308132] + 32) = result;
  }
  return result;
}

//----- (004A61E0) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4A61E0(_DWORD *a1, int a2, unsigned __int8 *a3)
{
  unsigned int v3; // esi
  unsigned __int8 *result; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // eax

  v3 = 0;
  result = &byte_5D4594[96 * a2 + 1307797];
  while ( *(result - 1) != *a3 || *result != a3[1] || result[1] != a3[2] )
  {
    ++v3;
    result += 3;
    if ( v3 >= 0x20 )
      goto LABEL_9;
  }
  if ( a2 == 1 )
  {
    v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], *a1 - 10);
    sub_46ABB0((int)v5, 1);
    result = (unsigned __int8 *)sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], *a1 + 10);
    *((_DWORD *)result + 9) |= 6u;
  }
LABEL_9:
  if ( v3 == 32 && a2 == 1 )
  {
    v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], *a1 - 10);
    result = (unsigned __int8 *)sub_46ABB0((int)v6, 0);
    LOWORD(v3) = 9;
  }
  a1[8] = (unsigned __int16)a2 | ((unsigned __int16)v3 << 16);
  return result;
}

//----- (004A62B0) --------------------------------------------------------
char sub_4A62B0()
{
  unsigned __int8 *v0; // esi
  int v1; // eax
  const char **v2; // ebp
  int v3; // ebp
  char result; // al
  unsigned __int8 *v5; // [esp+10h] [ebp-18h]
  int v6; // [esp+14h] [ebp-14h]
  char v7[16]; // [esp+18h] [ebp-10h]

  v0 = &byte_5D4594[1307796];
  v1 = 0;
  v5 = &byte_5D4594[1307796];
  do
  {
    *v0 = 0;
    v6 = v1 + 1;
    v0[1] = 0;
    v0[2] = 0;
    nox_sprintf(v7, (const char *)&byte_587000[171500], v1 + 1);
    v2 = (const char **)sub_4133B0(2);
    if ( v2 )
    {
      while ( strcmp(v7, *v2) )
      {
        v2 = (const char **)sub_4133C0((int)v2);
        if ( !v2 )
          goto LABEL_7;
      }
      v3 = (int)(v2 + 6);
      *(_WORD *)v5 = *(_WORD *)v3;
      v5[2] = *(_BYTE *)(v3 + 2);
LABEL_7:
      v0 = v5;
    }
    v1 = v6;
    v0 += 3;
    v5 = v0;
  }
  while ( (int)v0 < (int)&byte_5D4594[1307892] );
  byte_5D4594[1307989] = -34;
  byte_5D4594[1307991] = -34;
  byte_5D4594[1307995] = -102;
  byte_5D4594[1308000] = -102;
  byte_5D4594[1308038] = -102;
  byte_5D4594[1307988] = -23;
  byte_5D4594[1307990] = -51;
  byte_5D4594[1307992] = -74;
  byte_5D4594[1307993] = -88;
  byte_5D4594[1307994] = -38;
  byte_5D4594[1307996] = 110;
  byte_5D4594[1307997] = -20;
  byte_5D4594[1307998] = -54;
  byte_5D4594[1307999] = -78;
  byte_5D4594[1308001] = -125;
  byte_5D4594[1308002] = 105;
  byte_5D4594[1308003] = 117;
  byte_5D4594[1308004] = 95;
  byte_5D4594[1308005] = 74;
  byte_5D4594[1308006] = -17;
  byte_5D4594[1308007] = -23;
  byte_5D4594[1308008] = -63;
  byte_5D4594[1308009] = -28;
  byte_5D4594[1308010] = -28;
  byte_5D4594[1308011] = -63;
  byte_5D4594[1308012] = -53;
  byte_5D4594[1308013] = -71;
  byte_5D4594[1308014] = -100;
  byte_5D4594[1308015] = -56;
  byte_5D4594[1308016] = -92;
  byte_5D4594[1308017] = 110;
  byte_5D4594[1308018] = -87;
  byte_5D4594[1308019] = -125;
  byte_5D4594[1308020] = 79;
  byte_5D4594[1308021] = -13;
  byte_5D4594[1308022] = -98;
  byte_5D4594[1308023] = 119;
  byte_5D4594[1308024] = 115;
  byte_5D4594[1308025] = 77;
  byte_5D4594[1308026] = 34;
  byte_5D4594[1308027] = 91;
  byte_5D4594[1308028] = 55;
  byte_5D4594[1308029] = 20;
  byte_5D4594[1308030] = -7;
  byte_5D4594[1308031] = -51;
  byte_5D4594[1308032] = -118;
  byte_5D4594[1308033] = -16;
  byte_5D4594[1308034] = -21;
  byte_5D4594[1308035] = -85;
  byte_5D4594[1308036] = -122;
  byte_5D4594[1308037] = -113;
  byte_5D4594[1308039] = -121;
  byte_5D4594[1308040] = 102;
  byte_5D4594[1308041] = 67;
  byte_5D4594[1308042] = 115;
  byte_5D4594[1308043] = 80;
  byte_5D4594[1308044] = 46;
  byte_5D4594[1308045] = -91;
  byte_5D4594[1308046] = 93;
  byte_5D4594[1308047] = 70;
  byte_5D4594[1308048] = 99;
  byte_5D4594[1308049] = 65;
  byte_5D4594[1308050] = 37;
  byte_5D4594[1308051] = 83;
  byte_5D4594[1308052] = 52;
  byte_5D4594[1308053] = 29;
  byte_5D4594[1308054] = -88;
  byte_5D4594[1308055] = 127;
  byte_5D4594[1308056] = 84;
  byte_5D4594[1308057] = -85;
  byte_5D4594[1308058] = -96;
  byte_5D4594[1308059] = 96;
  byte_5D4594[1308060] = -115;
  byte_5D4594[1308061] = -120;
  byte_5D4594[1308062] = 118;
  byte_5D4594[1308063] = 127;
  byte_5D4594[1308065] = 82;
  byte_5D4594[1308064] = 116;
  byte_5D4594[1308080] = 116;
  byte_5D4594[1308082] = 116;
  byte_5D4594[1307898] = -1;
  byte_5D4594[1307904] = -1;
  byte_5D4594[1308066] = 96;
  byte_5D4594[1307908] = 68;
  byte_5D4594[1307909] = 68;
  byte_5D4594[1307926] = 68;
  byte_5D4594[1307936] = 68;
  byte_5D4594[1308067] = 84;
  byte_5D4594[1307937] = -42;
  byte_5D4594[1307938] = -42;
  byte_5D4594[1307939] = -42;
  byte_5D4594[1308068] = 51;
  byte_5D4594[1308069] = -94;
  byte_5D4594[1308070] = -127;
  byte_5D4594[1308071] = 100;
  byte_5D4594[1308072] = 78;
  byte_5D4594[1308073] = 64;
  byte_5D4594[1308074] = 46;
  byte_5D4594[1308075] = 65;
  byte_5D4594[1308076] = 50;
  byte_5D4594[1308077] = 45;
  byte_5D4594[1308078] = -85;
  byte_5D4594[1308079] = -98;
  byte_5D4594[1308081] = -81;
  byte_5D4594[1308083] = -125;
  byte_5D4594[1307892] = -13;
  byte_5D4594[1307893] = -73;
  byte_5D4594[1307894] = -97;
  byte_5D4594[1307895] = -57;
  byte_5D4594[1307896] = -124;
  byte_5D4594[1307897] = 58;
  byte_5D4594[1307899] = -86;
  byte_5D4594[1307900] = 86;
  byte_5D4594[1307901] = -110;
  byte_5D4594[1307902] = 121;
  byte_5D4594[1307903] = 106;
  byte_5D4594[1307905] = -5;
  byte_5D4594[1307906] = -70;
  byte_5D4594[1307907] = -9;
  byte_5D4594[1307910] = 63;
  byte_5D4594[1307911] = -69;
  byte_5D4594[1307912] = -17;
  byte_5D4594[1307913] = -60;
  byte_5D4594[1307914] = -62;
  byte_5D4594[1307915] = -79;
  byte_5D4594[1307916] = -3;
  byte_5D4594[1307917] = -10;
  byte_5D4594[1307918] = 102;
  byte_5D4594[1307919] = 115;
  byte_5D4594[1307920] = 77;
  byte_5D4594[1307921] = 34;
  byte_5D4594[1307922] = -27;
  byte_5D4594[1307923] = 121;
  byte_5D4594[1307924] = 25;
  byte_5D4594[1307925] = 82;
  byte_5D4594[1307927] = 60;
  byte_5D4594[1307928] = -21;
  byte_5D4594[1307929] = -27;
  byte_5D4594[1307930] = -119;
  byte_5D4594[1307931] = -109;
  byte_5D4594[1307932] = 0;
  byte_5D4594[1307933] = 0;
  byte_5D4594[1307934] = 0;
  byte_5D4594[1307935] = 37;
  byte_5D4594[1307940] = -107;
  byte_5D4594[1307941] = 108;
  byte_5D4594[1307942] = 43;
  byte_5D4594[1307943] = 52;
  byte_5D4594[1307944] = 25;
  byte_5D4594[1307945] = 0;
  byte_5D4594[1307946] = -106;
  byte_5D4594[1307947] = 55;
  byte_5D4594[1307952] = -106;
  byte_5D4594[1307955] = -125;
  byte_5D4594[1307956] = 104;
  byte_5D4594[1307961] = 117;
  byte_5D4594[1307962] = 117;
  byte_5D4594[1307963] = 117;
  byte_5D4594[1307981] = 104;
  result = 53;
  byte_5D4594[1307948] = 0;
  byte_5D4594[1307950] = 0;
  byte_5D4594[1307984] = 0;
  *(_DWORD *)&byte_587000[171384] = 0;
  byte_5D4594[1307949] = 9;
  byte_5D4594[1307951] = 12;
  byte_5D4594[1307953] = -110;
  byte_5D4594[1307954] = 81;
  byte_5D4594[1307957] = -77;
  byte_5D4594[1307958] = 121;
  byte_5D4594[1307959] = -91;
  byte_5D4594[1307960] = 66;
  byte_5D4594[1307964] = 100;
  byte_5D4594[1307965] = -126;
  byte_5D4594[1307966] = 125;
  byte_5D4594[1307967] = 56;
  byte_5D4594[1307968] = 48;
  byte_5D4594[1307969] = 40;
  byte_5D4594[1307970] = 108;
  byte_5D4594[1307971] = 81;
  byte_5D4594[1307972] = 58;
  byte_5D4594[1307973] = 52;
  byte_5D4594[1307974] = 40;
  byte_5D4594[1307975] = 39;
  byte_5D4594[1307976] = -113;
  byte_5D4594[1307977] = -114;
  byte_5D4594[1307978] = 124;
  byte_5D4594[1307979] = 56;
  byte_5D4594[1307980] = 29;
  byte_5D4594[1307982] = 15;
  byte_5D4594[1307983] = 88;
  byte_5D4594[1307985] = 87;
  byte_5D4594[1307986] = 53;
  byte_5D4594[1307987] = 53;
  return result;
}

//----- (004A6890) --------------------------------------------------------
int sub_4A6890()
{
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308092] + 64) = 2;
  sub_43BE40(2);
  sub_452D80(923, 100);
  sub_4A68C0();
  return 1;
}

//----- (004A68C0) --------------------------------------------------------
wchar_t *sub_4A68C0()
{
  wchar_t *v0; // esi
  wchar_t *v1; // eax
  wchar_t *v2; // eax
  unsigned __int8 *v3; // edx
  int v4; // eax
  int v5; // ecx
  int v6; // eax
  unsigned __int8 *v7; // eax
  int v8; // ecx
  int v9; // ecx
  int v10; // eax
  int v11; // ecx
  unsigned __int8 *v12; // eax
  int v13; // ecx
  int v14; // eax
  int v15; // ecx
  unsigned __int8 *v16; // eax
  int v17; // edx
  int v18; // eax
  int v19; // ecx
  unsigned __int8 *v20; // eax
  wchar_t *result; // eax

  v0 = (wchar_t *)sub_46B490(*(int *)&byte_5D4594[1308152], 16413, 0, 0);
  if ( !*v0 )
  {
    v1 = sub_40F1D0((char *)&byte_587000[171552], 0, (const char *)&byte_587000[171512], 225);
    nox_wcscpy(v0, v1);
  }
  nox_wcscpy(*(wchar_t **)&byte_5D4594[1307784], v0);
  if ( !sub_4A6B50(*(wchar_t **)&byte_5D4594[1307784]) )
  {
    v2 = sub_40F1D0((char *)&byte_587000[171604], 0, (const char *)&byte_587000[171564], 232);
    nox_wcscpy(*(wchar_t **)&byte_5D4594[1307784], v2);
  }
  v3 = &byte_5D4594[3
                  * ((*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308096] + 32) >> 16)
                   + 32 * (unsigned __int16)*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308096] + 32))
                  + 1307796];
  v4 = *(_DWORD *)&byte_5D4594[1307784] + 71;
  *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 71) = *(_WORD *)v3;
  *(_BYTE *)(v4 + 2) = v3[2];
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308136] + 4) & 8 )
  {
    v7 = &byte_5D4594[3
                    * ((*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308100] + 32) >> 16)
                     + 32 * (unsigned __int16)*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308100] + 32))
                    + 1307796];
    v8 = *(_DWORD *)&byte_5D4594[1307784] + 68;
    *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 68) = *(_WORD *)v7;
    *(_BYTE *)(v8 + 2) = v7[2];
  }
  else
  {
    v5 = *(_DWORD *)&byte_5D4594[1307784] + 71;
    v6 = *(_DWORD *)&byte_5D4594[1307784] + 68;
    *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 68) = *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 71);
    *(_BYTE *)(v6 + 2) = *(_BYTE *)(v5 + 2);
  }
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308140] + 4) & 8 )
  {
    v11 = *(_DWORD *)&byte_5D4594[1307784] + 74;
    v12 = &byte_5D4594[3
                     * ((*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308104] + 32) >> 16)
                      + 32 * (unsigned __int16)*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308104] + 32))
                     + 1307796];
    *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 74) = *(_WORD *)v12;
    *(_BYTE *)(v11 + 2) = v12[2];
  }
  else
  {
    v9 = *(_DWORD *)&byte_5D4594[1307784] + 71;
    v10 = *(_DWORD *)&byte_5D4594[1307784] + 74;
    *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 74) = *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 71);
    *(_BYTE *)(v10 + 2) = *(_BYTE *)(v9 + 2);
  }
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308144] + 4) & 8 )
  {
    v15 = *(_DWORD *)&byte_5D4594[1307784] + 77;
    v16 = &byte_5D4594[3
                     * ((*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308108] + 32) >> 16)
                      + 32 * (unsigned __int16)*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308108] + 32))
                     + 1307796];
    *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 77) = *(_WORD *)v16;
    *(_BYTE *)(v15 + 2) = v16[2];
  }
  else
  {
    v13 = *(_DWORD *)&byte_5D4594[1307784] + 71;
    v14 = *(_DWORD *)&byte_5D4594[1307784] + 77;
    *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 77) = *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 71);
    *(_BYTE *)(v14 + 2) = *(_BYTE *)(v13 + 2);
  }
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308148] + 4) & 8 )
  {
    v19 = *(_DWORD *)&byte_5D4594[1307784] + 80;
    v20 = &byte_5D4594[3
                     * ((*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308112] + 32) >> 16)
                      + 32 * (unsigned __int16)*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308112] + 32))
                     + 1307796];
    *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 80) = *(_WORD *)v20;
    *(_BYTE *)(v19 + 2) = v20[2];
  }
  else
  {
    v17 = *(_DWORD *)&byte_5D4594[1307784] + 71;
    v18 = *(_DWORD *)&byte_5D4594[1307784] + 80;
    *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 80) = *(_WORD *)(*(_DWORD *)&byte_5D4594[1307784] + 71);
    *(_BYTE *)(v18 + 2) = *(_BYTE *)(v17 + 2);
  }
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 83) = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308116] + 32) >> 16;
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 84) = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308120] + 32) >> 16;
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 85) = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308124] + 32) >> 16;
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 86) = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308128] + 32) >> 16;
  result = *(wchar_t **)&byte_5D4594[1307784];
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 87) = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308132] + 32) >> 16;
  return result;
}

//----- (004A6B50) --------------------------------------------------------
int __cdecl sub_4A6B50(wchar_t *a1)
{
  wchar_t *v1; // esi
  int v2; // ebp
  int v3; // ebx
  signed int v4; // eax
  __int16 *v5; // edi
  wchar_t v6; // ax
  signed int v7; // esi
  WCHAR *i; // edi
  int v10; // [esp+10h] [ebp-3Ch]
  signed int v11; // [esp+14h] [ebp-38h]
  __int16 v12[26]; // [esp+18h] [ebp-34h]

  v1 = a1;
  v2 = 0;
  v3 = 1;
  v10 = 0;
  v4 = nox_wcslen(a1);
  if ( v4 >= 1 )
  {
    v5 = v12;
    v11 = v4;
    do
    {
      if ( iswspace(*v1) )
      {
        if ( !v3 )
        {
          *v5 = *v1;
          ++v5;
          ++v10;
        }
      }
      else
      {
        if ( v3 == 1 )
        {
          v6 = *v1;
          if ( *v1 == 42
            || v6 == 63
            || v6 == 60
            || v6 == 62
            || v6 == 92
            || v6 == 47
            || v6 == 58
            || v6 == 34
            || v6 == 124 )
          {
            *v1 = 45;
          }
        }
        *v5 = *v1;
        ++v5;
        ++v10;
        v3 = 0;
        v2 = 1;
      }
      ++v1;
      --v11;
    }
    while ( v11 );
    v12[v10] = 0;
    if ( v2 )
    {
      nox_wcscpy(a1, (const wchar_t *)v12);
      v7 = nox_wcslen((const wchar_t *)v12) - 1;
      if ( (int)v7 >= 0 )
      {
        for ( i = &a1[v7]; iswspace(*i); --i )
        {
          if ( --v7 < 0 )
            return v2;
        }
        a1[v7 + 1] = 0;
      }
    }
  }
  return v2;
}
// 4A6B50: using guessed type wchar_t var_34[26];

//----- (004A6C90) --------------------------------------------------------
int sub_4A6C90()
{
  void (*v0)(void); // esi

  v0 = *(void (**)(void))(*(_DWORD *)&byte_5D4594[1308092] + 52);
  sub_43C570(*(LPVOID *)&byte_5D4594[1308092]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1308084]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1308088]);
  if ( v0 )
  {
    v0();
  }
  else
  {
    sub_431510();
    sub_46C2E0();
    if ( !sub_40A5C0(0x2000) )
    {
      sub_4A24A0();
      return 1;
    }
    if ( !sub_43AF70() )
    {
      sub_43B4D0();
      return 1;
    }
    if ( sub_43AF70() == 1 )
    {
      sub_43B670();
      return 1;
    }
  }
  return 1;
}

//----- (004A6D20) --------------------------------------------------------
int __cdecl sub_4A6D20(int a1, int a2)
{
  int v1; // esi
  unsigned __int16 v2; // di
  int v3; // ebx
  int v4; // ecx
  int v5; // edx
  int v6; // edi
  int v7; // ebp
  int v8; // eax
  int v10; // [esp-10h] [ebp-28h]
  int yTop; // [esp+10h] [ebp-8h]
  int xLeft; // [esp+14h] [ebp-4h]
  int v13; // [esp+1Ch] [ebp+4h]

  v1 = a1;
  v2 = *(_WORD *)(a1 + 32);
  v3 = *(_DWORD *)(a1 + 32) >> 16;
  sub_46AA60((_DWORD *)a1, &xLeft, &yTop);
  v4 = *(_DWORD *)(a1 + 20);
  v5 = *(_DWORD *)(a1 + 16);
  v6 = (unsigned __int16)v3 + 32 * v2;
  v13 = *(_DWORD *)(a1 + 28) - v4;
  v7 = *(_DWORD *)(v1 + 24) - v5;
  LOBYTE(v5) = byte_5D4594[3 * v6 + 1307798];
  LOBYTE(v4) = byte_5D4594[3 * v6 + 1307797];
  v10 = v5;
  LOBYTE(v5) = byte_5D4594[3 * v6 + 1307796];
  v8 = sub_4344A0(v5, v4, v10);
  sub_434460(v8);
  sub_49CE30(xLeft, yTop, v7, v13);
  return 1;
}

//----- (004A6DC0) --------------------------------------------------------
int __cdecl sub_4A6DC0(_DWORD *a1, int a2)
{
  int v1; // eax
  int v2; // ecx
  int v3; // edx
  int v4; // esi
  int v5; // eax
  int v6; // ecx
  int v7; // edx
  int v8; // eax
  int v9; // edx
  int v10; // eax
  int v11; // ecx
  int v12; // eax
  int v13; // edx
  int v14; // ecx
  int v15; // eax
  int v16; // eax
  int v17; // edx
  int v18; // ecx
  int v19; // eax
  int v20; // eax
  int v21; // ebx
  int v22; // eax
  int v23; // edx
  int *v24; // ebp
  int v25; // ecx
  int v26; // eax
  int v27; // edi
  int i; // esi
  int v29; // eax
  int v30; // eax
  int v31; // ecx
  int v32; // eax
  int v33; // edi
  int j; // esi
  int v35; // eax
  int v36; // eax
  int v37; // ecx
  int v38; // eax
  int v39; // eax
  int v40; // ecx
  int v41; // edx
  int v42; // edi
  int k; // esi
  int v44; // eax
  int v45; // eax
  int v46; // ecx
  int v47; // eax
  int v48; // eax
  int v49; // ecx
  int v50; // edx
  int v52; // [esp-24h] [ebp-3Ch]
  int v53; // [esp-24h] [ebp-3Ch]
  int v54; // [esp+10h] [ebp-8h]
  int v55; // [esp+14h] [ebp-4h]

  sub_46AA60(a1, &v54, &v55);
  v1 = ((unsigned __int16)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308096] + 32) >> 16))
     + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308096] + 32);
  v2 = byte_5D4594[3 * v1 + 1307798];
  LOBYTE(v3) = byte_5D4594[3 * v1 + 1307797];
  LOBYTE(v1) = byte_5D4594[3 * v1 + 1307796];
  v4 = sub_4344A0(v1, v3, v2);
  sub_4341D0(6, v4);
  v5 = ((unsigned __int16)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308100] + 32) >> 16))
     + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308100] + 32);
  v6 = byte_5D4594[3 * v5 + 1307798];
  LOBYTE(v7) = byte_5D4594[3 * v5 + 1307797];
  LOBYTE(v5) = byte_5D4594[3 * v5 + 1307796];
  v8 = sub_4344A0(v5, v7, v6);
  sub_4341D0(1, v8);
  v9 = *(_DWORD *)&byte_5D4594[1308144];
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308144] + 4) & 8 )
  {
    v10 = (unsigned __int16)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308108] + 32) >> 16);
    v11 = v10 + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308108] + 32);
    LOBYTE(v9) = byte_5D4594[3 * v11 + 1307797];
    v12 = sub_4344A0(
            byte_5D4594[3 * v11 + 1307796],
            v9,
            byte_5D4594[3 * (v10 + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308108] + 32)) + 1307798]);
    sub_4341D0(2, v12);
  }
  else
  {
    sub_4341D0(2, v4);
  }
  sub_4341D0(3, v4);
  v13 = *(_DWORD *)&byte_5D4594[1308148];
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308148] + 4) & 8 )
  {
    v14 = (unsigned __int16)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308112] + 32) >> 16);
    v15 = v14 + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308112] + 32);
    LOBYTE(v13) = byte_5D4594[3 * v15 + 1307797];
    LOBYTE(v15) = byte_5D4594[3 * v15 + 1307796];
    v16 = sub_4344A0(
            v15,
            v13,
            byte_5D4594[3 * (v14 + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308112] + 32)) + 1307798]);
    sub_4341D0(4, v16);
  }
  else
  {
    sub_4341D0(4, v4);
  }
  v17 = *(_DWORD *)&byte_5D4594[1308140];
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308140] + 4) & 8 )
  {
    v18 = (unsigned __int16)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308104] + 32) >> 16);
    v19 = v18 + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308104] + 32);
    LOBYTE(v17) = byte_5D4594[3 * v19 + 1307797];
    LOBYTE(v19) = byte_5D4594[3 * v19 + 1307796];
    v20 = sub_4344A0(
            v19,
            v17,
            byte_5D4594[3 * (v18 + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308104] + 32)) + 1307798]);
    sub_4341D0(5, v20);
  }
  else
  {
    sub_4341D0(5, v4);
  }
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308136] + 4) & 8 )
    sub_47D2C0(
      *(_DWORD *)&byte_5D4594[4 * *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[1307784] + 67) + 3798172],
      v54,
      v55);
  else
    sub_47D2C0(
      *(_DWORD *)&byte_5D4594[4 * *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[1307784] + 67) + 3798180],
      v54,
      v55);
  v21 = 0;
  v22 = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[1307784] + 67);
  v23 = 3 * v22;
  v24 = (int *)&byte_5D4594[104 * v22 + 3798188];
  do
  {
    v25 = v21;
    v26 = 1 << v21;
    if ( 1 << v21 == 4 )
    {
      v27 = 1;
      for ( i = 3; i < 21; i += 3 )
      {
        v29 = *(_DWORD *)&byte_5D4594[1308156];
        LOBYTE(v25) = *(_BYTE *)(i + *(_DWORD *)&byte_5D4594[1308156] + 14);
        LOBYTE(v23) = *(_BYTE *)(i + *(_DWORD *)&byte_5D4594[1308156] + 13);
        LOBYTE(v29) = *(_BYTE *)(i + *(_DWORD *)&byte_5D4594[1308156] + 12);
        sub_4340A0(v27++, v29, v23, v25);
      }
      v30 = ((unsigned __int16)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308116] + 32) >> 16))
          + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308116] + 32);
      v31 = byte_5D4594[3 * v30 + 1307798];
      LOBYTE(v23) = byte_5D4594[3 * v30 + 1307797];
      LOBYTE(v30) = byte_5D4594[3 * v30 + 1307796];
      v32 = sub_4344A0(v30, v23, v31);
      sub_4341D0(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308156] + 40), v32);
    }
    else if ( v26 == 1024 )
    {
      v33 = 1;
      for ( j = 3; j < 21; j += 3 )
      {
        v35 = *(_DWORD *)&byte_5D4594[1308160];
        LOBYTE(v25) = *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308160] + j + 14);
        LOBYTE(v23) = *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308160] + j + 13);
        LOBYTE(v35) = *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308160] + j + 12);
        sub_4340A0(v33++, v35, v23, v25);
      }
      v36 = ((unsigned __int16)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308120] + 32) >> 16))
          + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308120] + 32);
      v37 = byte_5D4594[3 * v36 + 1307798];
      LOBYTE(v23) = byte_5D4594[3 * v36 + 1307797];
      LOBYTE(v36) = byte_5D4594[3 * v36 + 1307796];
      v38 = sub_4344A0(v36, v23, v37);
      sub_4341D0(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308160] + 40), v38);
      v39 = ((unsigned __int16)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308124] + 32) >> 16))
          + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308124] + 32);
      v40 = byte_5D4594[3 * v39 + 1307798];
      LOBYTE(v41) = byte_5D4594[3 * v39 + 1307797];
      LOBYTE(v39) = byte_5D4594[3 * v39 + 1307796];
      v52 = sub_4344A0(v39, v41, v40);
      sub_4341D0(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308160] + 44), v52);
    }
    else
    {
      if ( v26 != 1 )
        goto LABEL_27;
      v42 = 1;
      for ( k = 3; k < 21; k += 3 )
      {
        v44 = *(_DWORD *)&byte_5D4594[1308164];
        LOBYTE(v25) = *(_BYTE *)(k + *(_DWORD *)&byte_5D4594[1308164] + 14);
        LOBYTE(v23) = *(_BYTE *)(k + *(_DWORD *)&byte_5D4594[1308164] + 13);
        LOBYTE(v44) = *(_BYTE *)(k + *(_DWORD *)&byte_5D4594[1308164] + 12);
        sub_4340A0(v42++, v44, v23, v25);
      }
      v45 = ((unsigned __int16)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308128] + 32) >> 16))
          + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308128] + 32);
      v46 = byte_5D4594[3 * v45 + 1307798];
      LOBYTE(v23) = byte_5D4594[3 * v45 + 1307797];
      LOBYTE(v45) = byte_5D4594[3 * v45 + 1307796];
      v47 = sub_4344A0(v45, v23, v46);
      sub_4341D0(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308164] + 40), v47);
      v48 = ((unsigned __int16)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308132] + 32) >> 16))
          + 32 * *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[1308132] + 32);
      v49 = byte_5D4594[3 * v48 + 1307798];
      LOBYTE(v50) = byte_5D4594[3 * v48 + 1307797];
      LOBYTE(v48) = byte_5D4594[3 * v48 + 1307796];
      v53 = sub_4344A0(v48, v50, v49);
      sub_4341D0(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308164] + 36), v53);
    }
    sub_47D2C0(*v24, v54, v55);
LABEL_27:
    ++v21;
    ++v24;
  }
  while ( v21 < 26 );
  return 1;
}
// 4A6E13: variable 'v3' is possibly undefined
// 4A6E5A: variable 'v7' is possibly undefined
// 4A7032: variable 'v23' is possibly undefined
// 4A7032: variable 'v25' is possibly undefined
// 4A7158: variable 'v41' is possibly undefined
// 4A7227: variable 'v50' is possibly undefined

//----- (004A7270) --------------------------------------------------------
int __cdecl sub_4A7270(int a1, int a2, unsigned int a3, int a4)
{
  int v3; // eax
  int2 v5; // [esp+0h] [ebp-8h]

  if ( a2 != 5 )
    return 0;
  v5.field_4 = a3 >> 16;
  v5.field_0 = (unsigned __int16)a3;
  v3 = sub_4281F0(&v5, (int4 *)(a1 + 16));
  if ( v3 )
    return 0;
  sub_4A72D0(0xDEADu);
  return 1;
}
// 4A72AA: variable 'v3' is possibly undefined

//----- (004A72D0) --------------------------------------------------------
_DWORD *__cdecl sub_4A72D0(unsigned __int16 a1)
{
  _DWORD *result; // eax

  sub_46C6E0(*(int *)&byte_5D4594[1308088]);
  result = (_DWORD *)sub_46AC00(*(int *)&byte_5D4594[1308088], 1);
  if ( a1 < 0x20u )
  {
    result = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308088], *(int *)&byte_5D4594[1307792]);
    if ( result )
      result[8] = *(unsigned __int16 *)&byte_5D4594[1307788] | (a1 << 16);
  }
  return result;
}

//----- (004A7330) --------------------------------------------------------
int __cdecl sub_4A7330(int a1, int a2, int *a3, unsigned int a4)
{
  int result; // eax
  int v5; // edi
  int v6; // eax
  _DWORD *v7; // eax

  if ( a2 == 16389 )
  {
    sub_452D80(920, 100);
    result = 1;
  }
  else if ( a2 == 16391 )
  {
    v5 = a4 >> 16;
    v6 = sub_46B0A0(a3);
    switch ( v6 )
    {
      case 720:
        *(_DWORD *)&byte_5D4594[1307792] = v6;
        sub_4A7530(2u);
        sub_4A7580((unsigned __int16)a4, v5);
        break;
      case 721:
      case 722:
      case 723:
      case 724:
        *(_DWORD *)&byte_5D4594[1307792] = v6;
        sub_4A7530(1u);
        sub_4A7580((unsigned __int16)a4, v5);
        break;
      case 725:
      case 726:
      case 727:
      case 728:
      case 729:
        *(_DWORD *)&byte_5D4594[1307792] = v6;
        sub_4A7530(0);
        sub_4A7580((unsigned __int16)a4, v5);
        break;
      case 731:
      case 732:
      case 733:
      case 734:
        v7 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308084], v6 - 20);
        if ( v7 )
          sub_46ABB0((int)v7, ((unsigned int)~v7[1] >> 3) & 1);
        break;
      case 761:
      case 762:
      case 763:
      case 764:
      case 765:
      case 766:
      case 767:
      case 768:
      case 769:
      case 770:
      case 771:
      case 772:
      case 773:
      case 774:
      case 775:
      case 776:
      case 777:
      case 778:
      case 779:
      case 780:
      case 781:
      case 782:
      case 783:
      case 784:
      case 785:
      case 786:
      case 787:
      case 788:
      case 789:
      case 790:
      case 791:
      case 792:
        sub_4A72D0(v6 - 761);
        break;
      case 799:
        if ( *(_DWORD *)&byte_5D4594[1308168] == 1 )
          sub_43BDC0();
        sub_43BDC0();
        sub_43BDC0();
        *(_DWORD *)&byte_587000[171388] = 1;
        if ( sub_4A75C0() )
        {
          if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 66) )
          {
            if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 66) == 1 )
            {
              sub_409D70((char *)&byte_587000[171628]);
            }
            else if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 66) == 2 )
            {
              sub_409D70((char *)&byte_587000[171640]);
            }
          }
          else
          {
            sub_409D70((char *)&byte_587000[171616]);
          }
          sub_4A24C0(0);
          sub_4A6890();
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308092] + 52) = 0;
        }
        break;
      default:
        break;
    }
    sub_452D80(921, 100);
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004A7530) --------------------------------------------------------
_DWORD *__cdecl sub_4A7530(unsigned __int16 a1)
{
  int v1; // esi
  _DWORD *result; // eax

  v1 = 761;
  *(_DWORD *)&byte_5D4594[1307788] = a1;
  do
  {
    result = sub_46B0C0(*(_DWORD **)&byte_5D4594[1308088], v1);
    if ( result )
      result[8] = a1 | ((unsigned __int16)(v1 - 761) << 16);
    ++v1;
  }
  while ( v1 <= 792 );
  return result;
}

//----- (004A7580) --------------------------------------------------------
int __cdecl sub_4A7580(int a1, int a2)
{
  sub_46A8C0(*(int *)&byte_5D4594[1308088]);
  sub_46C690(*(int *)&byte_5D4594[1308088]);
  return sub_46A9B0(
           *(_DWORD **)&byte_5D4594[1308088],
           a1 - *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308088] + 8),
           a2 - *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308088] + 12) / 2);
}

//----- (004A75C0) --------------------------------------------------------
int sub_4A75C0()
{
  wchar_t *v0; // esi
  wchar_t *v1; // eax
  wchar_t *v2; // eax
  char v3; // dl
  unsigned __int8 *v4; // edx
  __int16 v5; // si
  __int16 v6; // cx
  unsigned __int8 v7; // dl
  int v8; // ecx
  char v9; // dl
  unsigned __int8 *v10; // eax
  int v11; // eax
  unsigned __int8 *v12; // ecx
  char *v13; // edi
  __int16 v14; // dx
  unsigned __int8 v15; // al
  char *v16; // edi
  int v17; // edx
  char *v18; // edi
  int i; // esi
  FILE *v20; // eax
  char *v21; // eax
  char v23; // [esp+2h] [ebp-512h]
  char v24[16]; // [esp+4h] [ebp-510h]
  char v25[1278]; // [esp+14h] [ebp-500h]

  if ( sub_40A5C0(2048) )
    sub_4DBE10((int)&byte_587000[171652], 0);
  memset(v25, 0, 0x4FCu);
  *(_WORD *)&v25[1276] = 0;
  v0 = (wchar_t *)sub_46B490(*(int *)&byte_5D4594[1308152], 16413, 0, 0);
  if ( !*v0 )
  {
    v1 = sub_40F1D0((char *)&byte_587000[171700], 0, (const char *)&byte_587000[171660], 605);
    nox_wcscpy(v0, v1);
  }
  nox_wcscpy((wchar_t *)&v25[1224], v0);
  if ( !sub_4A6B50((wchar_t *)&v25[1224]) )
  {
    v2 = sub_40F1D0((char *)&byte_587000[171752], 0, (const char *)&byte_587000[171712], 612);
    nox_wcscpy((wchar_t *)&v25[1224], v2);
  }
  v3 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[1307784] + 66);
  v25[1276] = 1;
  v25[1274] = v3;
  v4 = &byte_5D4594[3
                  * ((*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308096] + 32) >> 16)
                   + 32 * (unsigned __int16)*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308096] + 32))
                  + 1307796];
  *(_WORD *)&v25[1204] = *(_WORD *)v4;
  v5 = *(_WORD *)v4;
  v25[1206] = v4[2];
  v23 = v4[2];
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308136] + 4) & 8 )
  {
    v8 = (*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308100] + 32) >> 16)
       + 32 * (unsigned __int16)*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308100] + 32);
    *(_WORD *)&v25[1207] = *(_WORD *)&byte_5D4594[3 * v8 + 1307796];
    v7 = byte_5D4594[3 * v8 + 1307798];
  }
  else
  {
    v6 = *(_WORD *)v4;
    v7 = v4[2];
    *(_WORD *)&v25[1207] = v6;
  }
  v25[1209] = v7;
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308140] + 4) & 8 )
  {
    v10 = &byte_5D4594[3
                     * ((*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308104] + 32) >> 16)
                      + 32 * (unsigned __int16)*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308104] + 32))
                     + 1307796];
    *(_WORD *)&v25[1210] = *(_WORD *)v10;
    v25[1212] = v10[2];
    v9 = v23;
  }
  else
  {
    v9 = v23;
    *(_WORD *)&v25[1210] = v5;
    v25[1212] = v23;
  }
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308144] + 4) & 8 )
  {
    v11 = (*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308108] + 32) >> 16)
        + 32 * (unsigned __int16)*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308108] + 32);
    *(_WORD *)&v25[1213] = *(_WORD *)&byte_5D4594[3 * v11 + 1307796];
    v25[1215] = byte_5D4594[3 * v11 + 1307798];
  }
  else
  {
    *(_WORD *)&v25[1213] = v5;
    v25[1215] = v9;
  }
  if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1308148] + 4) & 8 )
  {
    v12 = &byte_5D4594[3
                     * ((*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308112] + 32) >> 16)
                      + 32 * (unsigned __int16)*(_DWORD *)(*(_DWORD *)&byte_5D4594[1308112] + 32))
                     + 1307796];
    *(_WORD *)&v25[1216] = *(_WORD *)v12;
    v25[1218] = v12[2];
  }
  else
  {
    *(_WORD *)&v25[1216] = v5;
    v25[1218] = v9;
  }
  v25[1219] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308116] + 32) >> 16;
  v25[1220] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308120] + 32) >> 16;
  v25[1221] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308124] + 32) >> 16;
  v25[1222] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308128] + 32) >> 16;
  v25[1223] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1308132] + 32) >> 16;
  v13 = sub_409E10();
  v14 = *(_WORD *)&byte_587000[171768];
  strcpy(&v25[4], v13);
  v15 = byte_587000[171770];
  v16 = &v25[strlen(&v25[4]) + 4];
  *(_DWORD *)v16 = *(_DWORD *)&byte_587000[171764];
  *((_WORD *)v16 + 2) = v14;
  v16[6] = v15;
  if ( sub_40A5C0(2048) )
  {
    v17 = *(_DWORD *)&byte_587000[171776];
    v18 = &v25[strlen(&v25[4]) + 4];
    *(_DWORD *)v18 = *(_DWORD *)&byte_587000[171772];
    *((_DWORD *)v18 + 1) = v17;
    *(_WORD *)&v25[strlen(&v25[4]) + 4] = *(_WORD *)&byte_587000[171780];
  }
  CreateDirectoryA(&v25[4], 0);
  SetCurrentDirectoryA(&v25[4]);
  i = 0;
  if ( sub_40A5C0(2048) )
  {
    strcpy(v24, "Player.plr");
  }
  else
  {
    for ( i = 0; i < 100; ++i )
    {
      nox_sprintf(v24, "%.6s%2.2d.plr", &v25[1224], i);
      v20 = fopen(v24, "rb");
      if ( !v20 )
        break;
      fclose(v20);
    }
  }
  v21 = sub_409E10();
  SetCurrentDirectoryA(v21);
  if ( i > 99 )
    return 0;
  strcat(&v25[4], v24);
  if ( sub_40A5C0(2048) )
  {
    if ( v25[1274] )
    {
      if ( v25[1274] == 1 )
      {
        sub_409D70((char *)&byte_587000[171828]);
      }
      else if ( v25[1274] == 2 )
      {
        sub_409D70((char *)&byte_587000[171840]);
      }
    }
    else
    {
      sub_409D70((char *)&byte_587000[171816]);
    }
  }
  return sub_41CEE0((int)v25, 1);
}

//----- (004A7A60) --------------------------------------------------------
int __cdecl sub_4A7A60(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_587000[171388] = a1;
  return result;
}

//----- (004A7A70) --------------------------------------------------------
int __cdecl sub_4A7A70(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1308168] = a1;
  return result;
}

//----- (004A7A80) --------------------------------------------------------
int __cdecl sub_4A7A80(const char *a1)
{
  int result; // eax
  unsigned int v2; // ecx
  char v3; // al
  unsigned __int8 *v4; // edi
  const char *v5; // esi

  if ( !a1 )
    return 0;
  v2 = strlen(a1) + 1;
  v3 = v2;
  v2 >>= 2;
  qmemcpy(&byte_5D4594[1308644], a1, 4 * v2);
  v5 = &a1[4 * v2];
  v4 = &byte_5D4594[4 * v2 + 1308644];
  LOBYTE(v2) = v3;
  result = 1;
  qmemcpy(v4, v5, v2 & 3);
  return result;
}

//----- (004A7AC0) --------------------------------------------------------
int __cdecl sub_4A7AC0(const char *a1)
{
  int result; // eax
  unsigned int v2; // ecx
  char v3; // al
  unsigned __int8 *v4; // edi
  const char *v5; // esi

  if ( !a1 )
    return 0;
  v2 = strlen(a1) + 1;
  v3 = v2;
  v2 >>= 2;
  qmemcpy(&byte_5D4594[1308172], a1, 4 * v2);
  v5 = &a1[4 * v2];
  v4 = &byte_5D4594[4 * v2 + 1308172];
  LOBYTE(v2) = v3;
  result = 1;
  qmemcpy(v4, v5, v2 & 3);
  return result;
}

//----- (004A7B00) --------------------------------------------------------
int __cdecl sub_4A7B00(const char *a1)
{
  int result; // eax
  unsigned int v2; // ecx
  char v3; // al
  unsigned __int8 *v4; // edi
  const char *v5; // esi

  if ( !a1 )
    return 0;
  v2 = strlen(a1) + 1;
  v3 = v2;
  v2 >>= 2;
  qmemcpy(&byte_5D4594[1308352], a1, 4 * v2);
  v5 = &a1[4 * v2];
  v4 = &byte_5D4594[4 * v2 + 1308352];
  LOBYTE(v2) = v3;
  result = 1;
  qmemcpy(v4, v5, v2 & 3);
  return result;
}

//----- (004A7B40) --------------------------------------------------------
int __cdecl sub_4A7B40(char *a1)
{
  const char *v2; // eax
  int v3; // edi
  unsigned __int8 *v4; // esi

  if ( !a1 )
    return 0;
  v2 = *(const char **)&byte_587000[171856];
  v3 = 0;
  if ( *(_DWORD *)&byte_587000[171856] )
  {
    v4 = &byte_587000[171856];
    while ( _strcmpi(v2, a1) )
    {
      v2 = (const char *)*((_DWORD *)v4 + 2);
      v4 += 8;
      ++v3;
      if ( !v2 )
        return 1;
    }
    *(_DWORD *)&byte_5D4594[1308184] = *(_DWORD *)&byte_587000[8 * v3 + 171860];
  }
  return 1;
}

//----- (004A7BA0) --------------------------------------------------------
int __cdecl sub_4A7BA0(char *a1)
{
  int result; // eax

  result = (int)a1;
  if ( a1 )
  {
    *(_DWORD *)&byte_5D4594[1308740] = atoi(a1);
    result = 1;
  }
  return result;
}

//----- (004A7BC0) --------------------------------------------------------
int __cdecl sub_4A7BC0(const char *a1)
{
  int result; // eax
  unsigned int v2; // ecx
  char v3; // al
  unsigned __int8 *v4; // edi
  const char *v5; // esi

  if ( !a1 )
    return 0;
  v2 = strlen(a1) + 1;
  v3 = v2;
  v2 >>= 2;
  qmemcpy(&byte_5D4594[1308324], a1, 4 * v2);
  v5 = &a1[4 * v2];
  v4 = &byte_5D4594[4 * v2 + 1308324];
  LOBYTE(v2) = v3;
  result = 1;
  qmemcpy(v4, v5, v2 & 3);
  return result;
}

//----- (004A7C00) --------------------------------------------------------
int __cdecl sub_4A7C00(const char *a1)
{
  int result; // eax
  unsigned int v2; // ecx
  char v3; // al
  unsigned __int8 *v4; // edi
  const char *v5; // esi

  if ( !a1 )
    return 0;
  v2 = strlen(a1) + 1;
  v3 = v2;
  v2 >>= 2;
  qmemcpy(&byte_5D4594[1308364], a1, 4 * v2);
  v5 = &a1[4 * v2];
  v4 = &byte_5D4594[4 * v2 + 1308364];
  LOBYTE(v2) = v3;
  result = 1;
  qmemcpy(v4, v5, v2 & 3);
  return result;
}

//----- (004A7C40) --------------------------------------------------------
int __cdecl sub_4A7C40(char *a1)
{
  int result; // eax

  result = (int)a1;
  if ( a1 )
  {
    *(_DWORD *)&byte_5D4594[1308188] = atoi(a1);
    result = 1;
  }
  return result;
}

//----- (004A7C60) --------------------------------------------------------
int __cdecl sub_4A7C60(char *a1)
{
  char *v1; // eax
  char *v2; // eax
  int result; // eax

  if ( !a1 )
    goto LABEL_12;
  *(_DWORD *)&byte_5D4594[1308736] = 0;
  *(_DWORD *)&byte_5D4594[1308732] = 0;
  v1 = strtok(a1, (const char *)&byte_587000[172224]);
  if ( v1 )
    *(_DWORD *)&byte_5D4594[1308732] = atoi(v1);
  v2 = strtok(0, (const char *)&byte_587000[172232]);
  if ( v2 )
    *(_DWORD *)&byte_5D4594[1308736] = atoi(v2);
  if ( *(_DWORD *)&byte_5D4594[1308732] && *(_DWORD *)&byte_5D4594[1308736] )
    result = 1;
  else
LABEL_12:
    result = 0;
  return result;
}

//----- (004A7CE0) --------------------------------------------------------
int __cdecl sub_4A7CE0(char *a1)
{
  int result; // eax

  result = (int)a1;
  if ( a1 )
  {
    *(_DWORD *)&byte_5D4594[1308728] = atoi(a1);
    result = 1;
  }
  return result;
}

//----- (004A7D00) --------------------------------------------------------
int __cdecl sub_4A7D00(const char *a1)
{
  int result; // eax
  unsigned int v2; // ecx
  char v3; // al
  unsigned __int8 *v4; // edi
  const char *v5; // esi

  if ( !a1 )
    return 0;
  result = 0;
  if ( strlen(a1) <= 0x80 )
  {
    v2 = strlen(a1) + 1;
    v3 = v2;
    v2 >>= 2;
    qmemcpy(&byte_5D4594[1308192], a1, 4 * v2);
    v5 = &a1[4 * v2];
    v4 = &byte_5D4594[4 * v2 + 1308192];
    LOBYTE(v2) = v3;
    result = 1;
    qmemcpy(v4, v5, v2 & 3);
  }
  return result;
}

//----- (004A7D50) --------------------------------------------------------
int __cdecl sub_4A7D50(char *a1)
{
  int result; // eax

  result = (int)a1;
  if ( a1 )
  {
    *(_DWORD *)&byte_5D4594[1308348] = atoi(a1);
    result = 1;
  }
  return result;
}

//----- (004A7D70) --------------------------------------------------------
int __cdecl sub_4A7D70(char *a1)
{
  int result; // eax
  FILE *v2; // eax
  FILE *v3; // esi

  result = (int)a1;
  if ( a1 )
  {
    v2 = fopen(a1, "r");
    v3 = v2;
    if ( !v2 )
      return 0;
    fgets((char *)&byte_5D4594[1308388], 256, v2);
    if ( !feof(v3) )
    {
      while ( sub_4A7DF0((char *)&byte_5D4594[1308388]) )
      {
        fgets((char *)&byte_5D4594[1308388], 256, v3);
        if ( feof(v3) )
          break;
      }
      return 0;
    }
    fclose(v3);
    result = 1;
  }
  return result;
}

//----- (004A7DF0) --------------------------------------------------------
int __cdecl sub_4A7DF0(char *a1)
{
  char *v1; // ebx
  int v2; // edi
  const char *v3; // esi
  char *v5; // eax

  v1 = strtok(a1, (const char *)&byte_587000[172244]);
  if ( !v1 )
    return 0;
  v2 = 0;
  v3 = (const char *)&byte_587000[171912];
  while ( _strcmpi(v1, v3) || !strtok(0, (const char *)&byte_587000[172252]) )
  {
    v3 += 20;
    ++v2;
    if ( (int)v3 >= (int)&byte_587000[172172] )
      return 0;
  }
  v5 = strtok(0, (const char *)&byte_587000[172260]);
  (*(void (__cdecl **)(const char *))&byte_587000[20 * v2 + 171928])(v5);
  return 1;
}

//----- (004A7E70) --------------------------------------------------------
char *sub_4A7E70()
{
  return (char *)&byte_5D4594[1308644];
}

//----- (004A7E80) --------------------------------------------------------
char *sub_4A7E80()
{
  return (char *)&byte_5D4594[1308172];
}

//----- (004A7E90) --------------------------------------------------------
char *sub_4A7E90()
{
  return (char *)&byte_5D4594[1308352];
}

//----- (004A7EA0) --------------------------------------------------------
int sub_4A7EA0()
{
  return *(_DWORD *)&byte_5D4594[1308184];
}

//----- (004A7EB0) --------------------------------------------------------
int sub_4A7EB0()
{
  return *(_DWORD *)&byte_5D4594[1308740];
}

//----- (004A7EC0) --------------------------------------------------------
char *sub_4A7EC0()
{
  return (char *)&byte_5D4594[1308324];
}

//----- (004A7ED0) --------------------------------------------------------
char *sub_4A7ED0()
{
  return (char *)&byte_5D4594[1308364];
}

//----- (004A7EE0) --------------------------------------------------------
int sub_4A7EE0()
{
  return *(_DWORD *)&byte_5D4594[1308188];
}

//----- (004A7EF0) --------------------------------------------------------
char *sub_4A7EF0()
{
  return (char *)&byte_5D4594[1308732];
}

//----- (004A7F00) --------------------------------------------------------
int sub_4A7F00()
{
  return *(_DWORD *)&byte_5D4594[1308728];
}

//----- (004A7F10) --------------------------------------------------------
char *sub_4A7F10()
{
  return (char *)&byte_5D4594[1308192];
}

//----- (004A7F20) --------------------------------------------------------
int sub_4A7F20()
{
  return *(_DWORD *)&byte_5D4594[1308348];
}

//----- (004A7F30) --------------------------------------------------------
int sub_4A7F30()
{
  return *(_DWORD *)&byte_5D4594[1308744];
}

//----- (004A7F40) --------------------------------------------------------
int __cdecl sub_4A7F40(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1308744] = a1;
  return result;
}

//----- (004A7F50) --------------------------------------------------------
int __cdecl sub_4A7F50(_DWORD *a1, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int result; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  _DWORD *v10; // esi
  int v11; // eax
  int v12; // [esp-10h] [ebp-14h]

  switch ( a2 )
  {
    case 5:
LABEL_9:
      a1[9] |= 4u;
      return 1;
    case 6:
    case 7:
      v10 = a1;
      if ( !(a1[9] & 4) )
        goto LABEL_22;
      sub_46B490(a1[13], 16391, (int)a1, a3);
      goto LABEL_16;
    case 8:
      sub_46B490(a1[13], 0x4000, (int)a1, a3);
      return 1;
    case 17:
      v4 = a1[11];
      if ( !(v4 & 0x100) )
        goto LABEL_21;
      v5 = a1[13];
      a1[9] |= 2u;
      sub_46B490(v5, 16389, (int)a1, a3);
      sub_46B500((int)a1);
      result = 1;
      break;
    case 18:
      v7 = a1[11];
      if ( v7 & 0x100 )
      {
        v8 = a1[9];
        LOBYTE(v8) = v8 & 0xFD;
        v12 = a1[13];
        a1[9] = v8;
        sub_46B490(v12, 16390, (int)a1, a3);
      }
      v9 = a1[9];
      if ( v9 & 4 )
      {
        LOBYTE(v9) = v9 & 0xFB;
        a1[9] = v9;
        result = 1;
      }
      else
      {
LABEL_21:
        result = 1;
      }
      break;
    case 21:
      switch ( a3 )
      {
        case 15:
        case 205:
        case 208:
          if ( a4 != 2 )
            goto LABEL_21;
          sub_46A8A0();
          return 1;
        case 28:
        case 57:
          if ( a4 != 1 )
            goto LABEL_9;
          v10 = a1;
          if ( !(a1[9] & 4) )
            goto LABEL_21;
          sub_46B490(a1[13], 16391, (int)a1, 0);
          break;
        case 200:
        case 203:
          if ( a4 == 2 )
            sub_46A8B0();
          goto LABEL_21;
        default:
          goto LABEL_22;
      }
LABEL_16:
      v11 = v10[9];
      LOBYTE(v11) = v11 & 0xFB;
      v10[9] = v11;
      result = 1;
      break;
    default:
LABEL_22:
      result = 0;
      break;
  }
  return result;
}

//----- (004A81D0) --------------------------------------------------------
int __cdecl sub_4A81D0(int a1, int a2)
{
  int v2; // esi
  int v3; // ebx
  int v4; // edi
  int v5; // edi
  int v6; // ebx
  int v7; // eax
  int v9; // [esp-8h] [ebp-20h]
  int xLeft; // [esp+10h] [ebp-8h]
  int yTop; // [esp+14h] [ebp-4h]

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 28);
  v4 = *(_DWORD *)(a2 + 20);
  sub_46AA60((_DWORD *)a1, &xLeft, &yTop);
  if ( *(_BYTE *)(a1 + 4) & 8 )
  {
    if ( *(_DWORD *)v2 & 4 )
    {
      v4 = *(_DWORD *)(v2 + 52);
    }
    else if ( *(_DWORD *)v2 & 2 )
    {
      v3 = *(_DWORD *)(v2 + 36);
    }
  }
  else
  {
    v4 = *(_DWORD *)(v2 + 44);
  }
  if ( v3 != 0x80000000 )
  {
    sub_434460(v3);
    sub_49CC70(xLeft, yTop, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12));
  }
  if ( v4 != 0x80000000 )
  {
    sub_434460(v4);
    sub_49CE30(xLeft + 1, yTop + 1, *(_DWORD *)(a1 + 8) - 2, *(_DWORD *)(a1 + 12) - 2);
  }
  if ( *(_WORD *)(v2 + 72) )
  {
    v5 = xLeft + *(_DWORD *)(a1 + 8) / 2;
    v6 = yTop + *(_DWORD *)(a1 + 12) / 2;
    if ( (*(_DWORD *)(a1 + 4) & 0x2000) == 0x2000 )
      sub_43F670(1);
    sub_43F840(*(_DWORD *)(v2 + 200), (unsigned __int16 *)(v2 + 72), &a2, 0, 0);
    if ( *(_DWORD *)(v2 + 68) != 0x80000000 )
    {
      sub_434390(*(_DWORD *)(v2 + 68));
      v9 = *(_DWORD *)(a1 + 8);
      v7 = sub_43F320(*(_DWORD *)(v2 + 200));
      sub_43FAF0(*(_DWORD *)(v2 + 200), (_WORD *)(v2 + 72), v5 - a2 / 2, v6 - v7 / 2, v9, 0);
    }
    sub_43F670(0);
  }
  return 1;
}

//----- (004A8340) --------------------------------------------------------
int __cdecl sub_4A8340(int a1)
{
  int result; // eax

  if ( (signed char)*(_BYTE *)(a1 + 4) >= 0 )
    result = sub_46B430((_DWORD *)a1, sub_4A7F50, sub_4A81D0, 0);
  else
    result = sub_46B430((_DWORD *)a1, sub_4A7F50, sub_4A8380, 0);
  return result;
}

//----- (004A8380) --------------------------------------------------------
int __cdecl sub_4A8380(_DWORD *a1, int a2)
{
  int v2; // esi
  _DWORD *v3; // edi
  int v4; // ebx
  int v5; // ebp
  int v6; // kr04_4
  int v7; // eax
  int v8; // eax
  int v10; // [esp-8h] [ebp-1Ch]
  int v11; // [esp+10h] [ebp-4h]

  v2 = a2;
  v3 = a1;
  v4 = *(_DWORD *)(a2 + 32);
  v5 = *(_DWORD *)(a2 + 24);
  sub_46AA60(a1, &a1, &a2);
  if ( v3[1] & 8 )
  {
    if ( *(_DWORD *)v2 & 4 )
    {
      v4 = *(_DWORD *)(v2 + 56);
    }
    else if ( *(_DWORD *)v2 & 2 )
    {
      v4 = *(_DWORD *)(v2 + 40);
    }
  }
  else
  {
    v5 = *(_DWORD *)(v2 + 48);
  }
  if ( v5 )
    sub_47D2C0(v5, (int)a1 + v3[24], a2 + v3[25]);
  if ( v4 )
    sub_47D2C0(v4, (int)a1 + v3[24], a2 + v3[25]);
  if ( *(_WORD *)(v2 + 72) )
  {
    v6 = v3[3];
    a1 = (_DWORD *)((char *)a1 + v3[2] / 2);
    v7 = v3[1] & 0x2000;
    a2 += v6 / 2;
    if ( v7 == 0x2000 )
      sub_43F670(1);
    sub_43F840(*(_DWORD *)(v2 + 200), (unsigned __int16 *)(v2 + 72), &v11, 0, 0);
    if ( *(_DWORD *)(v2 + 68) != 0x80000000 )
    {
      sub_434390(*(_DWORD *)(v2 + 68));
      v10 = v3[2];
      v8 = sub_43F320(*(_DWORD *)(v2 + 200));
      sub_43FAF0(*(_DWORD *)(v2 + 200), (_WORD *)(v2 + 72), (int)a1 - v11 / 2, a2 - v8 / 2, v10, 0);
    }
    sub_43F670(0);
  }
  return 1;
}

//----- (004A84E0) --------------------------------------------------------
int __cdecl sub_4A84E0(_DWORD *a1, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int result; // eax
  int v7; // ecx
  int v8; // edx
  int v9; // eax
  int v10; // edi
  _DWORD *i; // eax
  int v12; // eax
  int v13; // edi
  _DWORD *j; // eax

  switch ( a2 )
  {
    case 5:
      goto LABEL_31;
    case 6:
    case 7:
      v9 = a1[9];
      v10 = a1[99];
      if ( v9 & 4 )
      {
        if ( v9 & 2 )
LABEL_31:
          result = 1;
        else
LABEL_16:
          result = 0;
      }
      else
      {
        sub_46B490(a1[13], 16391, (int)a1, a3);
        if ( v10 )
        {
          for ( i = *(_DWORD **)(v10 + 400); i; i = (_DWORD *)i[97] )
          {
            if ( i != a1 && i[10] == a1[10] )
              i[9] &= 0xFFFFFFFB;
          }
        }
        v12 = a1[9];
        LOBYTE(v12) = v12 | 4;
        a1[9] = v12;
        result = 1;
      }
      break;
    case 8:
      sub_46B490(a1[13], 0x4000, (int)a1, a3);
      return 1;
    case 17:
      v4 = a1[11];
      if ( !(v4 & 0x100) )
        goto LABEL_31;
      v5 = a1[9];
      LOBYTE(v5) = v5 | 2;
      a1[9] = v5;
      sub_46B490(a1[13], 16389, (int)a1, a3);
      sub_46B500((int)a1);
      result = 1;
      break;
    case 18:
      v7 = a1[11];
      if ( !(v7 & 0x100) )
        goto LABEL_31;
      v8 = a1[13];
      a1[9] &= 0xFFFFFFFD;
      sub_46B490(v8, 16390, (int)a1, a3);
      result = 1;
      break;
    case 21:
      switch ( a3 )
      {
        case 15:
        case 205:
        case 208:
          if ( a4 != 2 )
            goto LABEL_31;
          sub_46A8A0();
          result = 1;
          break;
        case 28:
        case 57:
          if ( a4 != 2 )
            goto LABEL_31;
          v13 = a1[99];
          if ( a1[9] & 4 )
            goto LABEL_31;
          sub_46B490(a1[13], 16391, (int)a1, 0);
          if ( v13 )
          {
            for ( j = *(_DWORD **)(v13 + 400); j; j = (_DWORD *)j[97] )
            {
              if ( j != a1 && j[10] == a1[10] )
                j[9] &= 0xFFFFFFFB;
            }
          }
          a1[9] ^= 4u;
          result = 1;
          break;
        case 200:
        case 203:
          if ( a4 == 2 )
            sub_46A8B0();
          goto LABEL_31;
        default:
          goto LABEL_16;
      }
      return result;
    default:
      goto LABEL_16;
  }
  return result;
}

//----- (004A87E0) --------------------------------------------------------
int __cdecl sub_4A87E0(int a1)
{
  int result; // eax

  if ( (signed char)*(_BYTE *)(a1 + 4) >= 0 )
    result = sub_46B430((_DWORD *)a1, sub_4A84E0, sub_4A8820, 0);
  else
    result = sub_46B430((_DWORD *)a1, sub_4A84E0, sub_4A8A20, 0);
  return result;
}

//----- (004A8820) --------------------------------------------------------
int __cdecl sub_4A8820(int a1, int a2)
{
  int v2; // esi
  int v3; // ebx
  int v4; // ebp
  int v5; // edi
  int v6; // eax
  int v7; // edi
  int v8; // eax
  int v9; // eax
  int v11; // [esp-8h] [ebp-28h]
  int v12; // [esp+10h] [ebp-10h]
  int v13; // [esp+14h] [ebp-Ch]
  int v14; // [esp+18h] [ebp-8h]
  int v15; // [esp+1Ch] [ebp-4h]

  v2 = a2;
  v3 = a1;
  v12 = *(_DWORD *)(a2 + 28);
  a2 = *(_DWORD *)(a2 + 20);
  sub_46AA60((_DWORD *)a1, &v14, &v15);
  if ( *(_BYTE *)(v3 + 4) & 8 )
  {
    if ( *(_BYTE *)v2 & 2 )
      v12 = *(_DWORD *)(v2 + 36);
  }
  else
  {
    a2 = *(_DWORD *)(v2 + 44);
  }
  v4 = v14 + 4;
  v5 = *(_DWORD *)(v3 + 12) / 2 + v15 - 5;
  v13 = sub_43F320(*(_DWORD *)(v2 + 200));
  if ( a2 != 0x80000000 )
  {
    sub_434460(a2);
    sub_49CE30(v4, v5, 10, 10);
  }
  if ( v12 != 0x80000000 )
  {
    sub_434460(v12);
    sub_49CC70(v4, v5, 10, 10);
  }
  if ( *(_BYTE *)v2 & 4 && *(_DWORD *)(v2 + 52) != 0x80000000 )
  {
    sub_434460(*(_DWORD *)(v2 + 52));
    sub_49CE30(v4 + 1, v5 + 1, 8, 8);
  }
  if ( (*(_DWORD *)(v3 + 4) & 0x2000) == 0x2000 )
    sub_43F670(1);
  if ( **(_DWORD **)(v3 + 32) )
  {
    v6 = *(_DWORD *)(v3 + 12);
    v14 += *(_DWORD *)(v3 + 8) / 2;
    v7 = v6 / 2 + v15;
    v8 = *(_DWORD *)(v2 + 200);
    v15 = v7;
    sub_43F840(v8, (unsigned __int16 *)(v2 + 72), &a1, 0, 0);
    if ( *(_DWORD *)(v2 + 68) != 0x80000000 )
    {
      sub_434390(*(_DWORD *)(v2 + 68));
      v11 = *(_DWORD *)(v3 + 8);
      v9 = sub_43F320(*(_DWORD *)(v2 + 200));
      sub_43FAF0(*(_DWORD *)(v2 + 200), (_WORD *)(v2 + 72), v14 - a1 / 2, v15 - v9 / 2, v11, 0);
    }
  }
  else if ( *(_DWORD *)(v2 + 68) != 0x80000000 )
  {
    sub_434390(*(_DWORD *)(v2 + 68));
    sub_43FAF0(*(_DWORD *)(v2 + 200), (_WORD *)(v2 + 72), v4 + 14, v5 - v13 / 2 + 5, *(_DWORD *)(v3 + 8), 0);
  }
  sub_43F670(0);
  return 1;
}

//----- (004A8A20) --------------------------------------------------------
int __cdecl sub_4A8A20(int a1, int a2)
{
  int v2; // esi
  int v3; // ebp
  int v4; // ebx
  int v5; // eax
  int v6; // kr00_4
  int v7; // edx
  int v8; // eax
  int v9; // kr10_4
  int v10; // eax
  int v12; // [esp-8h] [ebp-20h]
  int v13; // [esp+10h] [ebp-8h]
  int v14; // [esp+14h] [ebp-4h]

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 32);
  v4 = *(_DWORD *)(a2 + 24);
  sub_46AA60((_DWORD *)a1, &v13, &v14);
  if ( *(_BYTE *)(a1 + 4) & 8 )
  {
    if ( *(_BYTE *)v2 & 2 )
      v3 = *(_DWORD *)(v2 + 40);
  }
  else
  {
    v4 = *(_DWORD *)(v2 + 48);
  }
  if ( v4 )
    sub_47D2C0(v4, v13 + *(_DWORD *)(v2 + 60), v14 + *(_DWORD *)(v2 + 64));
  if ( *(_BYTE *)v2 & 4 )
  {
    v5 = *(_DWORD *)(v2 + 56);
    if ( v5 )
      sub_47D2C0(v5, v13 + *(_DWORD *)(v2 + 60), v14 + *(_DWORD *)(v2 + 64));
  }
  else if ( v3 )
  {
    sub_47D2C0(v3, v13 + *(_DWORD *)(v2 + 60), v14 + *(_DWORD *)(v2 + 64));
  }
  if ( (*(_DWORD *)(a1 + 4) & 0x2000) == 0x2000 )
    sub_43F670(1);
  if ( **(_DWORD **)(a1 + 32) )
  {
    v6 = *(_DWORD *)(a1 + 8);
    v7 = *(_DWORD *)(v2 + 200);
    v14 += *(_DWORD *)(a1 + 12) / 2;
    v13 += v6 / 2;
    sub_43F840(v7, (unsigned __int16 *)(v2 + 72), &a2, 0, 0);
    if ( *(_DWORD *)(v2 + 68) != 0x80000000 )
    {
      sub_434390(*(_DWORD *)(v2 + 68));
      v12 = *(_DWORD *)(a1 + 8);
      v8 = sub_43F320(*(_DWORD *)(v2 + 200));
      sub_43FAF0(*(_DWORD *)(v2 + 200), (_WORD *)(v2 + 72), v13 - a2 / 2, v14 - v8 / 2, v12, 0);
    }
  }
  else
  {
    v9 = *(_DWORD *)(a1 + 12) - sub_43F320(*(_DWORD *)(v2 + 200));
    v10 = *(_DWORD *)(v2 + 68);
    v14 += v9 / 2;
    v13 += 28;
    if ( v10 != 0x80000000 )
    {
      sub_434390(v10);
      sub_43FAF0(*(_DWORD *)(v2 + 200), (_WORD *)(v2 + 72), v13, v14, *(_DWORD *)(a1 + 8), 0);
    }
  }
  sub_43F670(0);
  return 1;
}

//----- (004A8C00) --------------------------------------------------------
int __cdecl sub_4A8C00(int a1, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int result; // eax
  int v7; // ecx
  int v8; // esi
  int v9; // [esp-10h] [ebp-14h]

  switch ( a2 )
  {
    case 5:
      goto LABEL_17;
    case 6:
    case 7:
      v8 = a1;
      if ( !(*(_BYTE *)(a1 + 36) & 2) )
        goto LABEL_18;
      sub_46B490(*(_DWORD *)(a1 + 52), 16391, a1, a3);
LABEL_9:
      *(_DWORD *)(v8 + 36) ^= 4u;
      result = 1;
      break;
    case 8:
      sub_46B490(*(_DWORD *)(a1 + 52), 0x4000, a1, a3);
      return 1;
    case 17:
      v4 = *(_DWORD *)(a1 + 44);
      if ( !(v4 & 0x100) )
        goto LABEL_17;
      v5 = *(_DWORD *)(a1 + 52);
      *(_DWORD *)(a1 + 36) |= 2u;
      sub_46B490(v5, 16389, a1, a3);
      sub_46B500(a1);
      result = 1;
      break;
    case 18:
      v7 = *(_DWORD *)(a1 + 44);
      if ( v7 & 0x100 )
      {
        v9 = *(_DWORD *)(a1 + 52);
        *(_DWORD *)(a1 + 36) &= 0xFFFFFFFD;
        sub_46B490(v9, 16390, a1, a3);
        result = 1;
      }
      else
      {
LABEL_17:
        result = 1;
      }
      break;
    case 21:
      switch ( a3 )
      {
        case 15:
        case 205:
        case 208:
          if ( a4 != 2 )
            goto LABEL_17;
          sub_46A8A0();
          return 1;
        case 28:
        case 57:
          if ( a4 != 2 )
            goto LABEL_17;
          v8 = a1;
          sub_46B490(*(_DWORD *)(v8 + 52), 16391, v8, 0);
          goto LABEL_9;
        case 200:
        case 203:
          if ( a4 == 2 )
            sub_46A8B0();
          goto LABEL_17;
        default:
          goto LABEL_18;
      }
    default:
LABEL_18:
      result = 0;
      break;
  }
  return result;
}

//----- (004A8E60) --------------------------------------------------------
int __cdecl sub_4A8E60(int a1)
{
  int result; // eax

  if ( (signed char)*(_BYTE *)(a1 + 4) >= 0 )
    result = sub_46B430((_DWORD *)a1, sub_4A8C00, sub_4A8EA0, 0);
  else
    result = sub_46B430((_DWORD *)a1, sub_4A8C00, sub_4A9050, 0);
  return result;
}

//----- (004A8EA0) --------------------------------------------------------
int __cdecl sub_4A8EA0(int a1, int a2)
{
  int v2; // esi
  int v3; // ebp
  int v4; // edi
  int v5; // ebx
  int v6; // edi
  int v7; // ebx
  int v9; // [esp+10h] [ebp-Ch]
  int xLeft; // [esp+14h] [ebp-8h]
  int yTop; // [esp+18h] [ebp-4h]
  int v12; // [esp+24h] [ebp+8h]

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 28);
  v12 = *(_DWORD *)(a2 + 20);
  sub_46AA60((_DWORD *)a1, &xLeft, &yTop);
  if ( *(_BYTE *)(a1 + 4) & 8 )
  {
    if ( *(_BYTE *)v2 & 2 )
      v3 = *(_DWORD *)(v2 + 36);
  }
  else
  {
    v12 = *(_DWORD *)(v2 + 44);
  }
  v4 = yTop + *(_DWORD *)(a1 + 12) / 2 - 5;
  v5 = xLeft + 4;
  if ( v12 != 0x80000000 )
  {
    sub_434460(v12);
    sub_49CE30(xLeft, yTop, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12));
  }
  if ( v3 != 0x80000000 )
  {
    sub_434460(v3);
    sub_49CC70(v5, v4, 10, 10);
  }
  if ( *(_BYTE *)v2 & 4 )
  {
    if ( *(_DWORD *)(v2 + 52) != 0x80000000 )
    {
      sub_434460(*(_DWORD *)(v2 + 52));
      sub_49CE30(v5 + 1, v4 + 1, 8, 8);
      if ( v3 != 0x80000000 )
      {
        sub_434460(v3);
        sub_49F500(v5, v4);
        sub_49F570(9, 9);
        sub_49E4B0();
        sub_49F500(v5, v4 + 9);
        sub_49F570(9, -9);
        sub_49E4B0();
      }
    }
  }
  v6 = 5 - sub_43F320(*(_DWORD *)(v2 + 200)) / 2 + v4;
  v7 = v5 + 14;
  sub_43F840(*(_DWORD *)(v2 + 200), (unsigned __int16 *)(v2 + 72), &v9, 0, 0);
  if ( *(_DWORD *)(v2 + 68) != 0x80000000 )
  {
    if ( (*(_DWORD *)(a1 + 4) & 0x2000) == 0x2000 )
      sub_43F670(1);
    sub_434390(*(_DWORD *)(v2 + 68));
    sub_43FAF0(*(_DWORD *)(v2 + 200), (_WORD *)(v2 + 72), v7, v6, *(_DWORD *)(a1 + 8), 0);
    sub_43F670(0);
  }
  return 1;
}

//----- (004A9050) --------------------------------------------------------
int __cdecl sub_4A9050(_DWORD *a1, int a2)
{
  int v2; // esi
  _DWORD *v3; // ebx
  int v4; // edi
  int v5; // edi
  int v6; // ebp
  int v7; // eax
  int v8; // edi
  int v9; // ebp
  int v11; // [esp+10h] [ebp-Ch]
  int v12; // [esp+14h] [ebp-8h]
  int v13; // [esp+18h] [ebp-4h]

  v2 = a2;
  v3 = a1;
  v11 = *(_DWORD *)(a2 + 32);
  a2 = *(_DWORD *)(a2 + 24);
  sub_46AA60(a1, &v12, &v13);
  v4 = v13 + v3[3] / 2;
  if ( v3[1] & 8 )
  {
    if ( *(_BYTE *)v2 & 2 )
      v11 = *(_DWORD *)(v2 + 40);
  }
  else
  {
    a2 = *(_DWORD *)(v2 + 48);
  }
  v5 = v4 - 5;
  v6 = v12 + 4;
  if ( a2 )
    sub_47D2C0(a2, v6 + v3[24], v5 + v3[25]);
  if ( *(_BYTE *)v2 & 4 )
  {
    v7 = *(_DWORD *)(v2 + 56);
    if ( !v7 )
      goto LABEL_12;
  }
  else
  {
    v7 = v11;
    if ( !v11 )
      goto LABEL_12;
  }
  sub_47D2C0(v7, v6 + v3[24], v5 + v3[25]);
LABEL_12:
  v8 = 5 - sub_43F320(*(_DWORD *)(v2 + 200)) / 2 + v5;
  v9 = v6 + 16;
  sub_43F840(*(_DWORD *)(v2 + 200), (unsigned __int16 *)(v2 + 72), (int *)&a1, 0, 0);
  if ( *(_DWORD *)(v2 + 68) != 0x80000000 )
  {
    if ( (v3[1] & 0x2000) == 0x2000 )
      sub_43F670(1);
    sub_434390(*(_DWORD *)(v2 + 68));
    sub_43FAF0(*(_DWORD *)(v2 + 200), (_WORD *)(v2 + 72), v9, v8, v3[2], 0);
    sub_43F670(0);
  }
  return 1;
}

//----- (004A91A0) --------------------------------------------------------
int __cdecl sub_4A91A0(int a1, int a2, int a3, int a4, int a5, int a6, _DWORD *a7)
{
  int v7; // eax
  _DWORD *v8; // eax
  int v9; // esi
  _DWORD *v10; // eax

  v7 = a7[2];
  if ( v7 & 1 )
  {
    v8 = sub_46C3E0(a1, a2, a3, a4, a5, a6, sub_4A9250);
    v9 = (int)v8;
    if ( v8 )
    {
      sub_4A8340((int)v8);
LABEL_7:
      if ( !a7[4] )
        a7[4] = v9;
      sub_46AF80(v9, a7);
      return v9;
    }
    return v9;
  }
  if ( v7 & 4 )
  {
    v10 = sub_46C3E0(a1, a2, a3, a4, a5, a6, sub_4A92C0);
    v9 = (int)v10;
    if ( v10 )
    {
      sub_4A8E60((int)v10);
      goto LABEL_7;
    }
    return v9;
  }
  return 0;
}

//----- (004A9250) --------------------------------------------------------
int __cdecl sub_4A9250(int a1, int a2, wchar_t *a3, int a4)
{
  int result; // eax
  int v4; // eax
  int v5; // eax

  if ( a2 == 23 )
  {
    if ( !a3 )
    {
      v4 = *(_DWORD *)(a1 + 36);
      LOBYTE(v4) = v4 & 0xFD;
      *(_DWORD *)(a1 + 36) = v4;
    }
    v5 = sub_46B0A0((int *)a1);
    sub_46B490(*(_DWORD *)(a1 + 52), 16387, (int)a3, v5);
    result = 1;
  }
  else
  {
    if ( a2 == 16385 )
    {
      nox_wcsncpy((wchar_t *)(a1 + 108), a3, 0x3Fu);
      *(_WORD *)(a1 + 234) = 0;
    }
    result = 0;
  }
  return result;
}

//----- (004A92C0) --------------------------------------------------------
int __cdecl sub_4A92C0(int a1, int a2, wchar_t *a3, int a4)
{
  int result; // eax
  int v4; // eax
  int v5; // eax

  if ( a2 == 23 )
  {
    if ( !a3 )
    {
      v4 = *(_DWORD *)(a1 + 36);
      LOBYTE(v4) = v4 & 0xFD;
      *(_DWORD *)(a1 + 36) = v4;
    }
    v5 = sub_46B0A0((int *)a1);
    sub_46B490(*(_DWORD *)(a1 + 52), 16387, (int)a3, v5);
    result = 1;
  }
  else
  {
    if ( a2 == 16385 )
    {
      nox_wcsncpy((wchar_t *)(a1 + 108), a3, 0x3Fu);
      *(_WORD *)(a1 + 234) = 0;
    }
    result = 0;
  }
  return result;
}

//----- (004A9330) --------------------------------------------------------
int __cdecl sub_4A9330(int a1, int a2, int a3, int a4, int a5, int a6, int a7, _DWORD *a8)
{
  _DWORD *v8; // eax
  int v9; // esi
  _DWORD *v10; // eax

  if ( !(*(_BYTE *)(a7 + 8) & 2) )
    return 0;
  v8 = sub_46C3E0(a1, a2, a3, a4, a5, a6, sub_4A93C0);
  v9 = (int)v8;
  if ( v8 )
  {
    sub_4A87E0((int)v8);
    if ( !*(_DWORD *)(a7 + 16) )
      *(_DWORD *)(a7 + 16) = v9;
    v10 = malloc(4u);
    *v10 = 0;
    if ( a8 )
      *v10 = *a8;
    *(_DWORD *)(v9 + 32) = v10;
    sub_46AF80(v9, (const void *)a7);
  }
  return v9;
}

//----- (004A93C0) --------------------------------------------------------
int __cdecl sub_4A93C0(int a1, int a2, wchar_t *a3, int a4)
{
  int v3; // edi
  _DWORD *i; // eax
  int v5; // eax
  int v7; // eax
  int v8; // eax

  if ( a2 != 23 )
  {
    if ( a2 == 16385 )
    {
      nox_wcsncpy((wchar_t *)(a1 + 108), a3, 0x3Fu);
      *(_WORD *)(a1 + 234) = 0;
    }
    else if ( a2 == 16392 )
    {
      v3 = *(_DWORD *)(a1 + 396);
      if ( !(*(_BYTE *)(a1 + 36) & 4) )
      {
        if ( a3 == (wchar_t *)1 )
          sub_46B490(*(_DWORD *)(a1 + 52), 16391, a1, 0);
        if ( v3 )
        {
          for ( i = *(_DWORD **)(v3 + 400); i; i = (_DWORD *)i[97] )
          {
            if ( i != (_DWORD *)a1 && i[10] == *(_DWORD *)(a1 + 40) )
              i[9] &= 0xFFFFFFFB;
          }
        }
        v5 = *(_DWORD *)(a1 + 36);
        LOBYTE(v5) = v5 | 4;
        *(_DWORD *)(a1 + 36) = v5;
        return 0;
      }
    }
    return 0;
  }
  if ( !a3 )
  {
    v7 = *(_DWORD *)(a1 + 36);
    LOBYTE(v7) = v7 & 0xFD;
    *(_DWORD *)(a1 + 36) = v7;
  }
  v8 = sub_46B0A0((int *)a1);
  sub_46B490(*(_DWORD *)(a1 + 52), 16387, (int)a3, v8);
  return 1;
}

//----- (004A94A0) --------------------------------------------------------
int sub_4A94A0()
{
  *(_DWORD *)&byte_5D4594[2650656] = sub_4344A0(0, 0, 0);
  *(_DWORD *)&byte_5D4594[2614248] = sub_4344A0(8, 8, 8);
  *(_DWORD *)&byte_5D4594[2650660] = sub_4344A0(115, 115, 115);
  *(_DWORD *)&byte_5D4594[2597996] = sub_4344A0(212, 212, 212);
  *(_DWORD *)&byte_5D4594[2523948] = sub_4344A0(255, 255, 255);
  *(_DWORD *)&byte_5D4594[2598268] = sub_4344A0(100, 0, 0);
  *(_DWORD *)&byte_5D4594[2650644] = sub_4344A0(255, 0, 0);
  *(_DWORD *)&byte_5D4594[2589776] = sub_4344A0(255, 128, 128);
  *(_DWORD *)&byte_5D4594[2650688] = sub_4344A0(0, 100, 0);
  *(_DWORD *)&byte_5D4594[2618904] = sub_4344A0(0, 255, 0);
  *(_DWORD *)&byte_5D4594[2614268] = sub_4344A0(128, 255, 128);
  *(_DWORD *)&byte_5D4594[2650648] = sub_4344A0(0, 0, 140);
  *(_DWORD *)&byte_5D4594[2649820] = sub_4344A0(0, 0, 255);
  *(_DWORD *)&byte_5D4594[2650684] = sub_4344A0(0, 160, 255);
  *(_DWORD *)&byte_5D4594[2614256] = sub_4344A0(240, 180, 42);
  *(_DWORD *)&byte_5D4594[2589772] = sub_4344A0(255, 255, 0);
  *(_DWORD *)&byte_5D4594[2614244] = sub_4344A0(255, 255, 128);
  *(_DWORD *)&byte_5D4594[2649836] = &byte_5D4594[2650656];
  *(_DWORD *)&byte_5D4594[2649840] = &byte_5D4594[2614248];
  *(_DWORD *)&byte_5D4594[2649844] = &byte_5D4594[2650660];
  *(_DWORD *)&byte_5D4594[2649848] = &byte_5D4594[2597996];
  *(_DWORD *)&byte_5D4594[2649852] = &byte_5D4594[2523948];
  *(_DWORD *)&byte_5D4594[2649856] = &byte_5D4594[2598268];
  *(_DWORD *)&byte_5D4594[2649860] = &byte_5D4594[2650644];
  *(_DWORD *)&byte_5D4594[2649864] = &byte_5D4594[2589776];
  *(_DWORD *)&byte_5D4594[2649868] = &byte_5D4594[2650688];
  *(_DWORD *)&byte_5D4594[2649872] = &byte_5D4594[2618904];
  *(_DWORD *)&byte_5D4594[2649876] = &byte_5D4594[2614268];
  *(_DWORD *)&byte_5D4594[2649880] = &byte_5D4594[2650648];
  *(_DWORD *)&byte_5D4594[2649884] = &byte_5D4594[2649820];
  *(_DWORD *)&byte_5D4594[2649888] = &byte_5D4594[2650684];
  *(_DWORD *)&byte_5D4594[2649892] = &byte_5D4594[2614256];
  *(_DWORD *)&byte_5D4594[2649896] = &byte_5D4594[2589772];
  *(_DWORD *)&byte_5D4594[2649900] = &byte_5D4594[2614244];
  return 1;
}

//----- (004A96C0) --------------------------------------------------------
FILE *__cdecl sub_4A96C0(char *a1)
{
  FILE *result; // eax
  FILE *v2; // ebp
  char v3[8]; // [esp+Ch] [ebp-40h]
  char v4[12]; // [esp+14h] [ebp-38h]
  char v5[12]; // [esp+20h] [ebp-2Ch]
  char v6[32]; // [esp+2Ch] [ebp-20h]

  strcpy(v4, "SHADEMAP");
  strcpy(v5, "TRANSMAP");
  strcpy(v3, "PALETTE");
  if ( *(_DWORD *)&byte_5D4594[3801780] != 1 )
  {
    result = fopen(a1, "rb");
    v2 = result;
    if ( !result )
      return result;
    if ( sub_40ADD0(v6, 1u, strlen(v3), result) != strlen(v3) )
    {
      fclose(v2);
      return 0;
    }
    v6[strlen(v3)] = 0;
    if ( strcmp(v6, v3) )
    {
      fclose(v2);
      return 0;
    }
    if ( sub_40ADD0((char *)&byte_5D4594[1308748], 1u, 0x300u, v2) != 768 )
    {
      fclose(v2);
      return 0;
    }
    sub_4347F0((char *)&byte_5D4594[1308748], 256);
    sub_4348C0();
    if ( !sub_42FFF0(v2) )
    {
      fclose(v2);
      return 0;
    }
    if ( sub_40ADD0(v6, 1u, strlen(v4), v2) != strlen(v4) )
    {
      fclose(v2);
      return 0;
    }
    v6[strlen(v4)] = 0;
    if ( strcmp(v6, v4) )
    {
      fclose(v2);
      return 0;
    }
    if ( sub_40ADD0((char *)&byte_5D4594[2589804], 1u, 0x2000u, v2) != 0x2000 )
    {
      fclose(v2);
      return 0;
    }
    sub_434610((int)&byte_5D4594[2589804]);
    if ( sub_40ADD0(v6, 1u, strlen(v5), v2) != strlen(v5) )
    {
      fclose(v2);
      return 0;
    }
    v6[strlen(v5)] = 0;
    if ( strcmp(v6, v5) )
    {
      fclose(v2);
      return 0;
    }
    if ( sub_40ADD0((char *)&byte_5D4594[2524236], 1u, 0x10000u, v2) != 0x10000 )
    {
      fclose(v2);
      return 0;
    }
    sub_434620((int)&byte_5D4594[2524236]);
    fclose(v2);
  }
  sub_4A94A0();
  sub_4A9A10();
  return (FILE *)1;
}
// 4A96C0: using guessed type char var_20[32];

//----- (004A9A10) --------------------------------------------------------
int sub_4A9A10()
{
  int i; // esi

  for ( i = 0; i < 6; ++i )
    sub_4341D0(i, *(int *)&byte_5D4594[2523948]);
  return 1;
}

//----- (004A9A30) --------------------------------------------------------
int __cdecl sub_4A9A30(unsigned __int8 a1, unsigned __int8 a2, unsigned __int8 a3)
{
  int result; // eax
  int v4; // ebp
  unsigned __int8 *v5; // edi
  int v6; // edx
  int v7; // ebx
  unsigned __int8 v8; // [esp+10h] [ebp-10h]
  unsigned __int8 v9; // [esp+14h] [ebp-Ch]
  unsigned __int8 v10; // [esp+18h] [ebp-8h]
  int v11; // [esp+1Ch] [ebp-4h]

  result = 0;
  v4 = 0x1000000;
  v11 = 0;
  v5 = &byte_5D4594[1308749];
  while ( *(v5 - 1) != a1 || *v5 != a2 || v5[1] != a3 )
  {
    v6 = *(v5 - 1);
    if ( (int)v6 - (int)a1 >= 0 )
      v10 = v6 - a1;
    else
      v10 = a1 - v6;
    if ( (int)*v5 - (int)a2 >= 0 )
      v9 = *v5 - a2;
    else
      v9 = a2 - *v5;
    if ( (int)v5[1] - (int)a3 >= 0 )
      v8 = v5[1] - a3;
    else
      v8 = a3 - v5[1];
    v7 = v9 * v9;
    if ( v8 * v8 + v7 + v10 * v10 < v4 )
    {
      v4 = v8 * v8 + v7 + v10 * v10;
      v11 = result;
    }
    v5 += 3;
    ++result;
    if ( (int)v5 >= (int)&byte_5D4594[1309517] )
      return v11;
  }
  return result;
}

//----- (004A9B20) --------------------------------------------------------
__int16 __cdecl sub_4A9B20(int a1)
{
  int v1; // eax

  if ( *(_DWORD *)&byte_5D4594[3801780] == 1 )
    LOWORD(v1) = 0;
  else
    v1 = (byte_5D4594[3 * a1 + 1308750] >> 3) | (4
                                               * (byte_5D4594[3 * a1 + 1308749] & 0xF8 | (32
                                                                                        * (byte_5D4594[3 * a1 + 1308748] & 0xF8))));
  return v1;
}

//----- (004A9B70) --------------------------------------------------------
__int16 __cdecl sub_4A9B70(__int16 *a1)
{
  int v1; // eax

  if ( *(_DWORD *)&byte_5D4594[3801780] )
  {
    if ( *(_DWORD *)&byte_5D4594[3799624] == 2 )
      v1 = *a1 & 0x1F | (*a1 >> 1) & 0x7FE0;
    else
      LOWORD(v1) = *a1;
  }
  else
  {
    LOWORD(v1) = sub_4A9B20(*(unsigned __int8 *)a1);
  }
  return v1;
}

//----- (004A9BC0) --------------------------------------------------------
int __cdecl sub_4A9BC0(unsigned __int8 a1, unsigned __int8 a2, unsigned __int8 a3)
{
  if ( *(_DWORD *)&byte_5D4594[3801780] != 1 )
    return sub_4A9A30(a1, a2, a3);
  if ( *(_DWORD *)&byte_5D4594[3799624] == 1 )
    return (a3 >> 3) | (4 * (a2 & 0xF8 | (32 * (a1 & 0xF8))));
  return (a3 >> 3) | (8 * (a2 & 0xFC | (32 * (a1 & 0xF8))));
}

//----- (004A9C50) --------------------------------------------------------
int __cdecl sub_4A9C50(int a1)
{
  unsigned __int16 v1; // cx

  HIBYTE(v1) = byte_5D4594[3 * a1 + 1308750];
  LOBYTE(v1) = byte_5D4594[3 * a1 + 1308749];
  return byte_5D4594[3 * a1 + 1308748] | (v1 << 8);
}

//----- (004A9C80) --------------------------------------------------------
int sub_4A9C80()
{
  int v0; // edi
  unsigned __int8 *v1; // esi
  int v2; // edi
  unsigned __int8 *v3; // esi
  char v5[64]; // [esp+8h] [ebp-40h]

  *(_DWORD *)&byte_5D4594[1309664] = 0;
  v0 = 0;
  v1 = &byte_5D4594[1309644];
  do
  {
    nox_sprintf(v5, (const char *)&byte_587000[172300], ++v0);
    *(_DWORD *)v1 = sub_42F970(v5);
    v1 += 4;
  }
  while ( (int)v1 < (int)&byte_5D4594[1309660] );
  v2 = 0;
  v3 = &byte_5D4594[1309516];
  do
  {
    nox_sprintf(v5, (const char *)&byte_587000[172312], ++v2);
    *(_DWORD *)v3 = sub_42F970(v5);
    v3 += 4;
  }
  while ( (int)v3 < (int)&byte_5D4594[1309644] );
  return 1;
}

//----- (004A9D00) --------------------------------------------------------
__int16 __cdecl sub_4A9D00(unsigned __int8 *a1)
{
  unsigned __int8 *v1; // ebx
  int v2; // eax
  int v3; // edi
  int v4; // esi
  wchar_t *v5; // eax
  int v6; // kr00_4
  int v7; // esi

  v1 = a1;
  v2 = *(unsigned __int16 *)(a1 + 1);
  if ( (unsigned __int16)v2 == *(_DWORD *)&byte_5D4594[1309668] )
    return v2;
  *(_DWORD *)&byte_5D4594[1309668] = *(unsigned __int16 *)(a1 + 1);
  sub_452D80(897, 50);
  sub_430B50(0, 0, *(_DWORD *)&byte_5D4594[3805496] - 1, *(_DWORD *)&byte_5D4594[3807120] - 1);
  sub_440900();
  v3 = *(_DWORD *)&byte_5D4594[3807120] / 2 - 120;
  v4 = *(_DWORD *)&byte_5D4594[3805496] / 2 - 160;
  sub_47D2C0(*(_DWORD *)&byte_5D4594[4 * (*(_DWORD *)&byte_5D4594[1309672] % 4) + 1309644], v4, v3);
  sub_47D2C0(*(_DWORD *)&byte_5D4594[4 * *(_DWORD *)&byte_5D4594[1309672] + 1309516], v4, v3);
  switch ( *v1 )
  {
    case 0x9Bu:
      v5 = sub_40F1D0((char *)&byte_587000[172368], 0, (const char *)&byte_587000[172332], 89);
      goto LABEL_8;
    case 0x9Cu:
      v5 = sub_40F1D0((char *)&byte_587000[172416], 0, (const char *)&byte_587000[172380], 92);
      goto LABEL_8;
    case 0x9Du:
      v5 = sub_40F1D0((char *)&byte_587000[172464], 0, (const char *)&byte_587000[172428], 95);
LABEL_8:
      *(_DWORD *)&byte_5D4594[1309660] = v5;
      break;
  }
  sub_43F840(0, *(unsigned __int16 **)&byte_5D4594[1309660], (int *)&a1, 0, 0);
  v6 = *(_DWORD *)&byte_5D4594[3805496] - (_DWORD)a1;
  v7 = *(_DWORD *)&byte_5D4594[3807120] / 2 - (2 * sub_43F320(0) + 70);
  sub_434390(*(int *)&byte_5D4594[2523948]);
  sub_4343E0(*(int *)&byte_5D4594[2614248]);
  sub_43F730(0, *(__int16 **)&byte_5D4594[1309660], v6 / 2, v7);
  if ( ++*(_DWORD *)&byte_5D4594[1309672] >= 32 )
    *(_DWORD *)&byte_5D4594[1309672] = 0;
  sub_48A220();
  sub_4AD170();
  sub_48A290();
  return v2;
}
// 4AD170: using guessed type int sub_4AD170(void);

//----- (004A9E90) --------------------------------------------------------
__int16 __cdecl sub_4A9E90(int a1, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // esi
  int v6; // ebp
  int v7; // edi
  int v8; // ebx
  int v9; // edi
  int v10; // esi
  int v11; // eax
  int v12; // esi
  //bool v13; // zf
  //bool v14; // of
  int v15; // ebp
  int v16; // esi
  int v18; // [esp+10h] [ebp-4h]
  int v19; // [esp+18h] [ebp+4h]
  int v20; // [esp+1Ch] [ebp+8h]
  int v21; // [esp+20h] [ebp+Ch]

  v4 = a1 + a3;
  v18 = a1;
  v5 = a1 + 10;
  v6 = a2 - 10;
  v7 = a1 + a3 - 30;
  v19 = a1 + a3;
  v21 = a2 - 10;
  v8 = a2 + a4 - 10;
  if ( v5 <= v7 )
  {
    do
    {
      sub_47D2C0(*(int *)&byte_5D4594[1309692], v5, v6);
      sub_47D2C0(*(int *)&byte_5D4594[1309692], v5, v8);
      v5 += 20;
    }
    while ( v5 <= v7 );
    v4 = v19;
  }
  v9 = v4 - 10;
  if ( v4 - 10 - v5 >= 10 )
  {
    sub_47D2C0(*(int *)&byte_5D4594[1309696], v5, v6);
    sub_47D2C0(*(int *)&byte_5D4594[1309696], v5, v8);
    v5 += 10;
  }
  if ( v5 < v9 )
  {
    v10 = v5 + ((v9 - v5 + 1) & 0xFFFFFFFE) - 10;
    sub_47D2C0(*(int *)&byte_5D4594[1309696], v10, v6);
    sub_47D2C0(*(int *)&byte_5D4594[1309696], v10, v8);
  }
  v11 = a2 + a4 - 30;
  v12 = a2 + 10;
  //v14 = __OFSUB__(a2 + 10, v11);
  //v13 = a2 + 10 == v11;
  v15 = v18 - 10;
  v20 = a2 + a4 - 30;
  //if ( (10 - (a4 - 30) < 0) ^ v14 | v13 )
  while ( v12 <= v20 )
  {
    sub_47D2C0(*(int *)&byte_5D4594[1309700], v15, v12);
    sub_47D2C0(*(int *)&byte_5D4594[1309700], v9, v12);
    v12 += 20;
  }
  if ( v8 - v12 >= 10 )
  {
    sub_47D2C0(*(int *)&byte_5D4594[1309704], v15, v12);
    sub_47D2C0(*(int *)&byte_5D4594[1309704], v9, v12);
    v12 += 10;
  }
  if ( v12 < v8 )
  {
    v16 = v12 + ((v8 - v12 + 1) & 0xFFFFFFFE) - 10;
    sub_47D2C0(*(int *)&byte_5D4594[1309704], v15, v16);
    sub_47D2C0(*(int *)&byte_5D4594[1309704], v9, v16);
  }
  sub_47D2C0(*(int *)&byte_5D4594[1309676], v15, v21);
  sub_47D2C0(*(int *)&byte_5D4594[1309680], v9, v21);
  sub_47D2C0(*(int *)&byte_5D4594[1309684], v15, v8);
  return sub_47D2C0(*(int *)&byte_5D4594[1309688], v9, v8);
}

//----- (004AA030) --------------------------------------------------------
__int16 __cdecl sub_4AA030(_DWORD *a1, int a2)
{
  _DWORD *v2; // esi
  int v3; // edi
  int v4; // eax
  unsigned int v5; // ebx
  int v6; // edx
  int v7; // ecx
  int v8; // eax
  _DWORD *v9; // eax
  int v10; // ebp
  bool v11; // zf
  int v12; // ebx
  _DWORD *v13; // edi
  __int16 v14; // cx
  int v16; // [esp+10h] [ebp-10h]
  unsigned int v17; // [esp+14h] [ebp-Ch]
  int v18; // [esp+18h] [ebp-8h]
  int v19; // [esp+1Ch] [ebp-4h]

  v2 = a1;
  v3 = 0;
  LOWORD(v4) = sub_46AA60(a1, &a1, &v16);
  v5 = 0;
  v17 = 0;
  while ( !v3 )
  {
    v4 = (1 << v5) & v2[11];
    if ( v4 )
    {
      if ( v4 <= 32 )
      {
        if ( v4 != 32 )
        {
          switch ( --v4 )
          {
            case 0:
            case 1:
              goto LABEL_24;
            case 3:
            case 7:
            case 15:
              goto LABEL_25;
            default:
              goto LABEL_26;
          }
          goto LABEL_26;
        }
        v6 = v2[8];
        v7 = 0;
        v8 = 0;
        if ( *(_DWORD *)(v6 + 12) )
          v7 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v6 + 36) + 400) + 12);
        if ( *((_WORD *)v2 + 54) )
          v8 = 4;
        LOWORD(v4) = sub_4A9E90((int)a1 - 3, v16 - v8 - 3, v2[2] - v7 + 3, v2[3] + 6);
        goto LABEL_25;
      }
      if ( v4 > 4096 )
      {
        if ( v4 == 0x2000 )
          goto LABEL_24;
      }
      else
      {
        switch ( v4 )
        {
          case 4096:
            goto LABEL_24;
          case 128:
            v9 = a1;
            v10 = v2[8];
            v11 = *(_WORD *)(a2 + 72) == 0;
            v12 = v2[2];
            v19 = v16;
            v13 = a1;
            if ( !v11 )
            {
              sub_43F840(*(_DWORD *)(a2 + 200), (unsigned __int16 *)(a2 + 72), &v18, 0, 0);
              v13 = (_DWORD *)((char *)v13 + v18 + 6);
              v9 = a1;
              v12 += -6 - v18;
            }
            v14 = *(_WORD *)(v10 + 1042);
            if ( v14 > 0 && v12 > v14 )
            {
              v12 = v14;
              v13 = (_DWORD *)((char *)v9 + v2[2] - v14);
            }
            LOWORD(v4) = sub_4A9E90((int)v13, v19, v12, v2[3]);
            v5 = v17;
            v3 = 1;
            break;
          case 2048:
LABEL_24:
            LOWORD(v4) = sub_4A9E90((int)a1, v16, v2[2], v2[3]);
LABEL_25:
            v3 = 1;
            break;
        }
      }
    }
LABEL_26:
    v17 = ++v5;
    if ( v5 >= 0x20 )
      return v4;
  }
  return v4;
}

//----- (004AA1F0) --------------------------------------------------------
char *sub_4AA1F0()
{
  char *result; // eax

  *(_DWORD *)&byte_5D4594[1309676] = sub_42F970((const char *)&byte_587000[172476]);
  *(_DWORD *)&byte_5D4594[1309680] = sub_42F970((const char *)&byte_587000[172492]);
  *(_DWORD *)&byte_5D4594[1309684] = sub_42F970((const char *)&byte_587000[172508]);
  *(_DWORD *)&byte_5D4594[1309688] = sub_42F970((const char *)&byte_587000[172524]);
  *(_DWORD *)&byte_5D4594[1309692] = sub_42F970((const char *)&byte_587000[172540]);
  *(_DWORD *)&byte_5D4594[1309696] = sub_42F970((const char *)&byte_587000[172560]);
  *(_DWORD *)&byte_5D4594[1309700] = sub_42F970((const char *)&byte_587000[172584]);
  result = sub_42F970((const char *)&byte_587000[172600]);
  *(_DWORD *)&byte_5D4594[1309704] = result;
  return result;
}

//----- (004AA270) --------------------------------------------------------
int sub_4AA270()
{
  int result; // eax
  _DWORD *v1; // esi
  _DWORD *v2; // esi
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  int v6; // esi
  _DWORD *v7; // eax

  sub_44A400();
  sub_43BDD0(400);
  sub_4A1A40(1);
  if ( sub_40E0C0() && sub_43AF70() == 1 )
    sub_41D4C0();
  sub_43AF50(2);
  result = sub_4A0AD0((const char *)&byte_587000[172620], sub_4AA4D0);
  *(_DWORD *)&byte_5D4594[1309716] = result;
  if ( result )
  {
    sub_46B300(result, sub_4A18E0);
    v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309716], 410);
    sub_46B2C0((int)v1, sub_4AA4D0);
    result = sub_43C5B0(v1, 0, 0, 0, -240, 0, 20, 0, -40);
    *(_DWORD *)&byte_5D4594[1309708] = result;
    if ( result )
    {
      *(_DWORD *)result = 400;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309708] + 48) = sub_4AA450;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309708] + 56) = sub_4AA490;
      v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309716], 420);
      sub_46B2C0((int)v2, sub_4AA4D0);
      result = sub_43C5B0(v2, 0, 240, 0, 480, 0, -20, 0, 40);
      *(_DWORD *)&byte_5D4594[1309712] = result;
      if ( result )
      {
        sub_4A19F0((char *)&byte_587000[172636]);
        sub_46A8A0();
        if ( sub_40A5C0(0x2000000) )
        {
          v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309716], 411);
          sub_46B490(*(int *)&byte_5D4594[1309716], 16391, (int)v3, 0);
          result = 1;
        }
        else if ( sub_4D6FA0() == 1 )
        {
          v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309716], 421);
          sub_46B490(*(int *)&byte_5D4594[1309716], 16391, (int)v4, 0);
          result = 1;
        }
        else
        {
          if ( sub_4D6FA0() == 2 )
          {
            v5 = sub_46B0C0(0, 150);
            v6 = (int)v5;
            v7 = sub_46B0C0(v5, 152);
            sub_46B490(v6, 16391, (int)v7, 0);
          }
          result = 1;
        }
      }
    }
  }
  return result;
}
// 4A18E0: using guessed type int __cdecl sub_4A18E0(int, int, int, int);

//----- (004AA450) --------------------------------------------------------
int sub_4AA450()
{
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1309708] + 64) = 2;
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1309712] + 64) = 2;
  sub_43BE40(2);
  sub_452D80(923, 100);
  return 1;
}

//----- (004AA490) --------------------------------------------------------
int sub_4AA490()
{
  int (*v0)(void); // esi

  v0 = *(int (**)(void))(*(_DWORD *)&byte_5D4594[1309708] + 52);
  sub_43C570(*(LPVOID *)&byte_5D4594[1309708]);
  sub_43C570(*(LPVOID *)&byte_5D4594[1309712]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1309716]);
  v0();
  return 1;
}

//----- (004AA4D0) --------------------------------------------------------
int __cdecl sub_4AA4D0(int a1, unsigned int a2, int *a3, int a4)
{
  int v4; // eax
  wchar_t *v5; // eax
  wchar_t *v6; // eax
  wchar_t *v7; // [esp-10h] [ebp-10h]
  wchar_t *v8; // [esp-10h] [ebp-10h]

  if ( a2 != 16389 )
  {
    if ( a2 != 16391 )
      return 0;
    if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1309708] + 64) && !sub_40A5C0(0x2000000) && !sub_4D6F30() )
      goto LABEL_17;
    v4 = sub_46B0A0(a3) - 411;
    if ( v4 )
    {
      if ( v4 != 10 )
      {
LABEL_17:
        sub_452D80(921, 100);
        return 1;
      }
      sub_4AA450();
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309708] + 52) = sub_4379F0;
      sub_43AF50(0);
    }
    else
    {
      if ( !sub_41D440() )
      {
        v7 = sub_40F1D0((char *)&byte_587000[172696], 0, (const char *)&byte_587000[172656], 100);
        v5 = sub_40F1D0((char *)&byte_587000[172756], 0, (const char *)&byte_587000[172716], 100);
        sub_449A10(*(int *)&byte_5D4594[1309716], (int)v5, (int)v7, 33, 0, 0);
        return 0;
      }
      if ( sub_40D5B0((int)&a2) && a2 < 0x10009 )
      {
        sub_41D4C0();
        v8 = sub_40F1D0((char *)&byte_587000[172804], 0, (const char *)&byte_587000[172764], 111);
        v6 = sub_40F1D0((char *)&byte_587000[172864], 0, (const char *)&byte_587000[172824], 111);
        sub_449A10(*(int *)&byte_5D4594[1309716], (int)v6, (int)v8, 33, 0, 0);
        return 0;
      }
      sub_4A1A40(0);
      sub_4AA450();
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309708] + 52) = sub_44A560;
    }
    sub_40A540(0x1000000);
    goto LABEL_17;
  }
  sub_452D80(920, 100);
  return 1;
}

//----- (004AA650) --------------------------------------------------------
void sub_4AA650()
{
  void *result; // eax
  char *v2; // ecx
  void *v3; // [esp+0h] [ebp-4h]

  if ( !sub_44D930() )
  {
    v2 = *(char **)&byte_587000[4 * (*(_DWORD *)&byte_5D4594[1309744])++ + 172892];
    sub_40F1D0(v2, &v3, (const char *)&byte_587000[172980], 131);
    *(_DWORD *)&byte_5D4594[1309744] %= 3;
    if ( v3 )
      (void *)sub_44D900((int)v3, 100);
  }
}

//----- (004AA6B0) --------------------------------------------------------
int sub_4AA6B0()
{
  int result; // eax
  _DWORD *v1; // esi
  char *v2; // eax
  int v3; // eax
  int v4; // ecx
  unsigned int v5; // ecx
  _DWORD *v6; // esi
  char *v7; // eax
  int v8; // eax
  int v9; // ecx
  unsigned int v10; // ecx
  _DWORD *v11; // esi
  char *v12; // eax
  int v13; // eax
  int v14; // ecx
  unsigned int v15; // ecx
  char *v16; // [esp-Ch] [ebp-Ch]
  char *v17; // [esp-Ch] [ebp-Ch]
  char *v18; // [esp-Ch] [ebp-Ch]
  char *v19; // [esp-8h] [ebp-8h]
  char *v20; // [esp-8h] [ebp-8h]
  char *v21; // [esp-8h] [ebp-8h]

  sub_43BDD0(300);
  result = sub_4A0AD0((const char *)&byte_587000[173020], sub_4AABE0);
  *(_DWORD *)&byte_5D4594[1309720] = result;
  if ( result )
  {
    result = sub_4CB590(result);
    if ( result )
    {
      sub_46B300(*(int *)&byte_5D4594[1309720], sub_4A18E0);
      sub_43FE20(15);
      result = sub_43C5B0(*(_DWORD **)&byte_5D4594[1309720], 0, 0, 0, -480, 0, 20, 0, -40);
      *(_DWORD *)&byte_5D4594[1309740] = result;
      if ( result )
      {
        *(_DWORD *)result = 300;
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309740] + 48) = sub_4AA9C0;
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309740] + 56) = sub_4AAA10;
        v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 351);
        *(_DWORD *)(v1[100] + 8) = 24;
        *(_DWORD *)(v1[100] + 12) = 20;
        v19 = sub_42F970((const char *)&byte_587000[173032]);
        v16 = sub_42F970((const char *)&byte_587000[173056]);
        v2 = sub_42F970((const char *)&byte_587000[173080]);
        sub_4B5700((int)v1, 0, 0, (int)v2, (int)v16, (int)v19);
        sub_46B490((int)v1, 16395, 0, 0x4000);
        sub_46B490((int)v1, 16394, *(_DWORD *)(*(_DWORD *)&byte_587000[127004] + 4) >> 16, 0);
        *(_DWORD *)&byte_5D4594[1309728] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 361);
        v3 = sub_453070();
        v4 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309728] + 36);
        if ( v3 == 1 )
          v5 = v4 | 4;
        else
          v5 = v4 & 0xFFFFFFFB;
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309728] + 36) = v5;
        v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 352);
        *(_DWORD *)(v6[100] + 8) = 24;
        *(_DWORD *)(v6[100] + 12) = 20;
        v20 = sub_42F970((const char *)&byte_587000[173100]);
        v17 = sub_42F970((const char *)&byte_587000[173124]);
        v7 = sub_42F970((const char *)&byte_587000[173148]);
        sub_4B5700((int)v6, 0, 0, (int)v7, (int)v17, (int)v20);
        sub_46B490((int)v6, 16395, 0, 0x4000);
        sub_46B490((int)v6, 16394, *(_DWORD *)(*(_DWORD *)&byte_587000[122852] + 4) >> 16, 0);
        *(_DWORD *)&byte_5D4594[1309732] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 362);
        v8 = sub_44D990();
        v9 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309732] + 36);
        if ( v8 == 1 )
          v10 = v9 | 4;
        else
          v10 = v9 & 0xFFFFFFFB;
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309732] + 36) = v10;
        v11 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 353);
        *(_DWORD *)(v11[100] + 8) = 24;
        *(_DWORD *)(v11[100] + 12) = 20;
        v21 = sub_42F970((const char *)&byte_587000[173168]);
        v18 = sub_42F970((const char *)&byte_587000[173192]);
        v12 = sub_42F970((const char *)&byte_587000[173216]);
        sub_4B5700((int)v11, 0, 0, (int)v12, (int)v18, (int)v21);
        sub_46B490((int)v11, 16395, 0, 0x4000);
        sub_46B490((int)v11, 16394, *(_DWORD *)(*(_DWORD *)&byte_587000[93164] + 4) >> 16, 0);
        *(_DWORD *)&byte_5D4594[1309736] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 363);
        v13 = sub_43DC30();
        v14 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309736] + 36);
        if ( v13 == 1 )
          v15 = v14 | 4;
        else
          v15 = v14 & 0xFFFFFFFB;
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309736] + 36) = v15;
        sub_46A8A0();
        sub_4A19F0((char *)&byte_587000[173236]);
        sub_4A1A40(0);
        sub_4AAA70();
        result = 1;
      }
    }
  }
  return result;
}
// 4A18E0: using guessed type int __cdecl sub_4A18E0(int, int, int, int);

//----- (004AA9C0) --------------------------------------------------------
int sub_4AA9C0()
{
  sub_44D8F0();
  sub_43BEF0(*(int *)&byte_587000[172876], *(int *)&byte_587000[172872], *(int *)&byte_587000[172880]);
  sub_433290((char *)&byte_587000[173256]);
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1309740] + 64) = 2;
  sub_43BE40(2);
  sub_452D80(923, 100);
  return 1;
}

//----- (004AAA10) --------------------------------------------------------
int sub_4AAA10()
{
  void (*v0)(void); // esi

  v0 = *(void (**)(void))(*(_DWORD *)&byte_5D4594[1309740] + 52);
  sub_43C570(*(LPVOID *)&byte_5D4594[1309740]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1309720]);
  sub_4A1A40(1);
  if ( *(_DWORD *)&byte_587000[91788] == *(_DWORD *)&byte_587000[91800] )
  {
    v0();
  }
  else
  {
    *(_DWORD *)&byte_587000[91800] = *(_DWORD *)&byte_587000[91788];
    *(_DWORD *)&byte_5D4594[805872] = 1;
  }
  return 1;
}

//----- (004AAA70) --------------------------------------------------------
_DWORD *sub_4AAA70()
{
  _DWORD *v0; // eax
  _DWORD *v1; // eax
  _DWORD *v2; // eax
  _DWORD *v3; // eax
  int v4; // eax
  _DWORD *result; // eax
  int v6; // [esp-4h] [ebp-10h]
  int v7; // [esp-4h] [ebp-10h]
  int v8; // [esp+0h] [ebp-Ch]
  int v9; // [esp+4h] [ebp-8h]
  int v10; // [esp+8h] [ebp-4h]

  sub_43BEB0(&v8, &v10, &v9);
  if ( v10 == 480 )
    v6 = 321;
  else if ( v10 == 576 )
    v6 = 322;
  else
    v6 = 323;
  v0 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], v6);
  sub_46B490((int)v0, 16392, 1, 0);
  if ( g_fullscreen )
    v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 333);
  else
    v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 334);
  sub_46B490((int)v1, 16392, 1, 0);
  sub_46B490(sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 316), 16394, (draw_gamma - 0.5f) * 50, 0);
  sub_46B490(sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 318), 16394, (log10f(input_sensitivity) + 1.0f) * 50, 0);
#if 0
  if ( !sub_4300D0(0) )
  {
    v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 331);
    sub_46AD80((int)v2, 8);
  }
  if ( !sub_4300D0(1) )
  {
    v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 332);
    sub_46AD80((int)v3, 8);
  }
#endif
  v4 = sub_4766D0();
  *(_DWORD *)&byte_587000[172884] = v4;
  if ( v4 > 69 )
  {
    if ( v4 <= 79 )
    {
      result = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 312);
      goto LABEL_22;
    }
    if ( v4 <= 89 )
    {
      result = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], 313);
      goto LABEL_22;
    }
    v7 = 314;
  }
  else
  {
    v7 = 311;
  }
  result = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309720], v7);
LABEL_22:
  if ( result )
    result = (_DWORD *)sub_46B490((int)result, 16392, 1, 0);
  return result;
}

//----- (004AABE0) --------------------------------------------------------
int __cdecl sub_4AABE0(int a1, int a2, int *a3, int a4)
{
  int v4; // eax
  int v5; // eax
  int result; // eax
  int v7; // edi
  int v8; // esi
  void (__cdecl *v9)(_DWORD, int, int, int); // eax
  void (__cdecl *v10)(_DWORD, int, int, int); // eax
  void (__cdecl *v11)(_DWORD, int, int, int); // eax
  void *v12; // ecx
  void (__cdecl *v13)(void *, int, int, int); // eax
  void (__cdecl *v14)(_DWORD, int, int, int); // eax
  int v15; // ecx
  void (__cdecl *v16)(int, int, int, int); // eax
  int v17; // eax
  void (__cdecl *v18)(_DWORD, int, int, int); // eax
  void (__cdecl *v19)(_DWORD, int, int, int); // eax

  switch ( a2 )
  {
    case 16389:
      sub_452D80(920, 100);
      result = 1;
      break;
    case 16391:
      v4 = sub_46B0A0(a3);
      if ( v4 > 341 )
      {
        if ( v4 > 363 )
        {
          if ( v4 == 2099 )
            sub_4AAA70();
        }
        else if ( v4 == 363 )
        {
          if ( sub_43DC30() == 1 )
          {
            sub_43DC00();
          }
          else
          {
            sub_43DC10();
            sub_486320(*(_DWORD **)&byte_587000[93164], *(_DWORD *)(*(_DWORD *)&byte_587000[93164] + 4) >> 16);
          }
        }
        else
        {
          v5 = v4 - 361;
          if ( v5 )
          {
            if ( v5 == 1 )
            {
              if ( sub_44D990() == 1 )
                sub_44D960();
              else
                sub_44D970();
            }
          }
          else if ( sub_453070() == 1 )
          {
            sub_453050();
          }
          else
          {
            sub_453060();
          }
        }
      }
      else if ( v4 == 341 )
      {
        sub_4AA9C0();
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309740] + 56) = sub_4AB0C0;
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309740] + 52) = sub_4CB880;
      }
      else
      {
        switch ( v4 )
        {
          case 311:
            sub_4766A0(65);
            break;
          case 312:
            sub_4766A0(75);
            break;
          case 313:
            sub_4766A0(85);
            break;
          case 314:
            sub_4766A0(100);
            break;
          case 321:
            *(_DWORD *)&byte_587000[172876] = 848;
            *(_DWORD *)&byte_587000[172872] = 480;
            break;
          case 322:
            *(_DWORD *)&byte_587000[172876] = 1024;
            *(_DWORD *)&byte_587000[172872] = 576;
            break;
          case 323:
            *(_DWORD *)&byte_587000[172876] = 1024;
            *(_DWORD *)&byte_587000[172872] = 768;
            break;
          case 331:
            *(_DWORD *)&byte_587000[172880] = 8;
            break;
          case 332:
            *(_DWORD *)&byte_587000[172880] = 16;
            break;
          case 333:
            g_fullscreen = 1;
            break;
          case 334:
            g_fullscreen = 0;
            break;
          default:
            break;
        }
      }
      sub_452D80(921, 100);
      result = 1;
      break;
    case 16393:
      v7 = sub_46B0A0(a3);
      v8 = sub_46C720();
      switch ( v7 )
      {
        case 351:
          sub_486320(*(_DWORD **)&byte_587000[127004], a4);
          if ( v8 && *(int **)(v8 + 396) == a3 )
            goto LABEL_76;
          if ( a4 )
          {
            if ( sub_453070() )
              goto LABEL_75;
            v15 = *(_DWORD *)&byte_5D4594[1309728];
            v16 = *(void (__cdecl **)(int, int, int, int))(*(_DWORD *)&byte_5D4594[1309728] + 372);
            if ( !v16 )
              goto LABEL_75;
            goto LABEL_74;
          }
          if ( sub_453070() != 1 )
            goto LABEL_76;
          v14 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309728] + 372);
          if ( !v14 )
            goto LABEL_76;
          v14(*(_DWORD *)&byte_5D4594[1309728], 21, 28, 2);
          result = 0;
          break;
        case 352:
          sub_486320(*(_DWORD **)&byte_587000[122852], a4);
          if ( a4 )
          {
            if ( sub_44D990() )
              goto LABEL_49;
            v12 = *(void **)&byte_5D4594[1309732];
            v13 = *(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)&byte_5D4594[1309732] + 372);
            if ( !v13 )
              goto LABEL_49;
            goto LABEL_48;
          }
          if ( sub_44D990() != 1 )
            goto LABEL_76;
          v11 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309732] + 372);
          if ( !v11 )
            goto LABEL_76;
          v11(*(_DWORD *)&byte_5D4594[1309732], 21, 28, 2);
          result = 0;
          break;
        case 353:
          sub_486320(*(_DWORD **)&byte_587000[93164], a4);
          if ( a4 )
          {
            if ( sub_43DC30() )
              goto LABEL_76;
            v10 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309736] + 372);
            if ( !v10 )
              goto LABEL_76;
            v10(*(_DWORD *)&byte_5D4594[1309736], 21, 28, 2);
            result = 0;
          }
          else
          {
            if ( sub_43DC30() != 1 )
              goto LABEL_76;
            v9 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309736] + 372);
            if ( !v9 )
              goto LABEL_76;
            v9(*(_DWORD *)&byte_5D4594[1309736], 21, 28, 2);
            result = 0;
          }
          break;
        case 316: // gamma slider
          draw_gamma = 0.5 + a4 / 50.0f;
          break; 
        case 318: // input sensitivity slider
          input_sensitivity = powf(10.0, a4 / 50.0f - 1.0);
          break;
        default:
          goto LABEL_76;
      }
      break;
    case 16396:
      v17 = sub_46B0A0(a3) - 351;
      if ( v17 )
      {
        if ( v17 != 1 )
          goto LABEL_76;
        sub_486320(*(_DWORD **)&byte_587000[122852], a4);
        if ( a4 )
        {
          if ( !sub_44D990() )
          {
            v12 = *(void **)&byte_5D4594[1309732];
            v13 = *(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)&byte_5D4594[1309732] + 372);
            if ( v13 )
LABEL_48:
              v13(v12, 21, 28, 2);
          }
LABEL_49:
          sub_4AA650();
          result = 0;
        }
        else
        {
          if ( sub_44D990() != 1 )
            goto LABEL_76;
          v18 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309732] + 372);
          if ( !v18 )
            goto LABEL_76;
          v18(*(_DWORD *)&byte_5D4594[1309732], 21, 28, 2);
          result = 0;
        }
      }
      else
      {
        sub_486320(*(_DWORD **)&byte_587000[127004], a4);
        if ( a4 )
        {
          if ( !sub_453070() )
          {
            v15 = *(_DWORD *)&byte_5D4594[1309728];
            v16 = *(void (__cdecl **)(int, int, int, int))(*(_DWORD *)&byte_5D4594[1309728] + 372);
            if ( v16 )
LABEL_74:
              v16(v15, 21, 28, 2);
          }
LABEL_75:
          sub_452D80(768, 100);
          goto LABEL_76;
        }
        if ( sub_453070() != 1 )
          goto LABEL_76;
        v19 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309728] + 372);
        if ( !v19 )
          goto LABEL_76;
        v19(*(_DWORD *)&byte_5D4594[1309728], 21, 28, 2);
        result = 0;
      }
      break;
    default:
LABEL_76:
      result = 0;
      break;
  }
  return result;
}
// 4AAEC8: variable 'v12' is possibly undefined

//----- (004AB0C0) --------------------------------------------------------
int sub_4AB0C0()
{
  void (*v0)(void); // esi

  v0 = *(void (**)(void))(*(_DWORD *)&byte_5D4594[1309740] + 52);
  sub_43C570(*(LPVOID *)&byte_5D4594[1309740]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1309720]);
  v0();
  return 1;
}

//----- (004AB0F0) --------------------------------------------------------
int sub_4AB0F0()
{
  int result; // eax
  char v1[128]; // [esp+0h] [ebp-80h]

  if ( sub_40A5C0(0x2000000) || !sub_4CB230((const char *)&byte_587000[173264], v1) )
  {
    if ( !sub_4CC4E0() )
    {
      sub_43DDD0(0);
      *(_DWORD *)&byte_5D4594[815132] = 0;
    }
    result = 1;
  }
  else
  {
    sub_4B0300(v1);
    sub_4B0640(sub_4CC4E0);
    sub_4B0340(0);
    result = 1;
  }
  return result;
}

//----- (004AB170) --------------------------------------------------------
int sub_4AB170()
{
  unsigned __int8 v0; // al
  int result; // eax
  char v2[128]; // [esp+0h] [ebp-80h]

  if ( (sub_578DF0() & 0x80u) != 0 || sub_40A5C0(0x2000000) || !sub_4CB230((const char *)&byte_587000[173276], v2) )
  {
    sub_4AB0F0();
    result = 1;
  }
  else
  {
    sub_4B0300(v2);
    sub_4B0640(sub_4AB0F0);
    sub_4B0340(1);
    v0 = sub_578DF0();
    sub_578DE0(v0 | 0x80);
    result = 1;
  }
  return result;
}

//----- (004AB1F0) --------------------------------------------------------
int sub_4AB1F0()
{
  int result; // eax
  char v1[128]; // [esp+0h] [ebp-80h]

  sub_43BDC0();
  if ( sub_40A5C0(0x2000000) || !sub_4CB230((const char *)&byte_587000[173288], v1) )
  {
    sub_4AB170();
    result = 1;
  }
  else
  {
    sub_4B0300(v1);
    sub_4B0640(sub_4AB170);
    sub_4B0340(0);
    result = 1;
  }
  return result;
}

//----- (004AB260) --------------------------------------------------------
int sub_4AB260()
{
  *(_DWORD *)&byte_5D4594[1309752] = sub_42F970((const char *)&byte_587000[173300]);
  *(_DWORD *)&byte_5D4594[1309756] = sub_46C3E0(
                                       0,
                                       136,
                                       *(_DWORD *)&byte_5D4594[3805496] - 50,
                                       *(_DWORD *)&byte_5D4594[3807120] / 2 + 3,
                                       50,
                                       50,
                                       0);
  sub_46AE60(*(int *)&byte_5D4594[1309756], *(int *)&byte_5D4594[1309752]);
  sub_46B430(*(_DWORD **)&byte_5D4594[1309756], 0, sub_4AB420, 0);
  *(_DWORD *)&byte_5D4594[1309748] = sub_4A0AD0((const char *)&byte_587000[173316], sub_4AB390);
  sub_46B300(*(int *)&byte_5D4594[1309748], sub_4AB340);
  sub_46B120(*(_DWORD **)&byte_5D4594[1309748], 0);
  sub_46A9B0(
    *(_DWORD **)&byte_5D4594[1309748],
    *(_DWORD *)&byte_5D4594[3805496] / 2 - *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309748] + 24) / 2,
    *(_DWORD *)&byte_5D4594[3807120] / 2 - *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309748] + 28) / 2);
  return 1;
}

//----- (004AB340) --------------------------------------------------------
int __cdecl sub_4AB340(int a1, int a2, int a3, int a4)
{
  int2 *v4; // eax

  if ( a2 != 21 )
    return 0;
  if ( a3 == 1 )
    return 1;
  if ( a3 == 57 )
  {
    v4 = sub_4309F0();
    sub_46B4C0(a1, 5, v4->field_0 | (v4->field_4 << 16), 0);
  }
  return 0;
}

//----- (004AB390) --------------------------------------------------------
int __cdecl sub_4AB390(int a1, int a2, int *a3, int a4)
{
  int v3; // eax
  int result; // eax

  if ( a2 == 23 )
    return 1;
  if ( a2 != 16391 )
    return 0;
  v3 = sub_46B0A0(a3) - 576;
  if ( !v3 )
  {
    sub_43CF40();
    return 0;
  }
  if ( v3 != 1 )
    return 0;
  sub_446380();
  if ( *(_DWORD *)&byte_5D4594[2650652] && sub_41E2F0() == 9 )
  {
    sub_41F4B0();
    sub_41EC30();
    sub_446490(0);
    sub_44B000();
    sub_4AB4D0(0);
    result = 0;
  }
  else
  {
    sub_43B750();
    sub_4AB4D0(0);
    result = 0;
  }
  return result;
}

//----- (004AB420) --------------------------------------------------------
int __cdecl sub_4AB420(int *a1)
{
  int *v1; // esi
  int v2; // edx
  int v4; // [esp+4h] [ebp-4h]

  v1 = a1;
  sub_46AA60(a1, &a1, &v4);
  v2 = v1[25];
  a1 = (int *)((char *)a1 + v1[24]);
  sub_47D2C0(v1[15], (int)a1, v2 + v4);
  return 1;
}

//----- (004AB470) --------------------------------------------------------
int sub_4AB470()
{
  int result; // eax

  sub_46C4E0(*(_DWORD **)&byte_5D4594[1309748]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1309756]);
  result = 0;
  *(_DWORD *)&byte_5D4594[1309756] = 0;
  *(_DWORD *)&byte_5D4594[1309748] = 0;
  return result;
}

//----- (004AB4A0) --------------------------------------------------------
int __cdecl sub_4AB4A0(int a1)
{
  int result; // eax

  if ( a1 )
    result = sub_46AC00(*(int *)&byte_5D4594[1309756], 0);
  else
    result = sub_46AC00(*(int *)&byte_5D4594[1309756], 1);
  return result;
}

//----- (004AB4D0) --------------------------------------------------------
int __cdecl sub_4AB4D0(int a1)
{
  int result; // eax

  if ( a1 )
  {
    sub_44E040();
    sub_46AC00(*(int *)&byte_5D4594[1309748], 0);
    sub_46A8C0(*(int *)&byte_5D4594[1309748]);
    sub_46C690(*(int *)&byte_5D4594[1309748]);
    sub_46B500(*(int *)&byte_5D4594[1309748]);
    result = sub_46ABB0(*(int *)&byte_5D4594[1309748], 1);
  }
  else
  {
    sub_46AC00(*(int *)&byte_5D4594[1309748], 1);
    sub_46C6E0(*(int *)&byte_5D4594[1309748]);
    sub_46B500(0);
    result = sub_46ABB0(*(int *)&byte_5D4594[1309748], 0);
  }
  return result;
}

//----- (004AB560) --------------------------------------------------------
int __cdecl sub_4AB560(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_587000[173328] = a1;
  return result;
}

//----- (004AB570) --------------------------------------------------------
int __cdecl sub_4AB570(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_587000[173332] = a1;
  return result;
}

//----- (004AB580) --------------------------------------------------------
LPCSTR sub_4AB580()
{
  LPCSTR result; // eax

  if ( *(_DWORD *)&byte_5D4594[1309760] )
    fclose(*(FILE **)&byte_5D4594[1309760]);
  result = *(LPCSTR *)&byte_5D4594[1309776];
  *(_DWORD *)&byte_5D4594[1309760] = 0;
  *(_DWORD *)&byte_5D4594[1309764] = 0;
  *(_DWORD *)&byte_5D4594[1309784] = 0;
  *(_DWORD *)&byte_5D4594[1309780] = 0;
  *(_DWORD *)&byte_5D4594[1309772] = 0;
  *(_DWORD *)&byte_5D4594[1309768] = 0;
  *(_DWORD *)&byte_587000[173336] = 1;
  if ( *(_DWORD *)&byte_5D4594[1309776] )
    free(*(LPVOID *)&byte_5D4594[1309776]);
  return result;
}

//----- (004AB5E0) --------------------------------------------------------
int sub_4AB5E0()
{
  int v0; // esi
  unsigned __int8 *v1; // eax
  int result; // eax
  int v3; // [esp+4h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-8h]
  int v5; // [esp+Ch] [ebp-4h]

  v0 = 0;
  sub_467DF0(1);
  sub_4CC770();
  *(_DWORD *)&byte_587000[173328] = 1;
  *(_DWORD *)&byte_587000[173332] = 1;
  do
  {
    sub_416C70(30);
    sub_4453A0();
    sub_4308A0(1);
    sub_46B740();
    if ( sub_43AF70() == 1 )
    {
      sub_40D250();
      sub_40DF90();
    }
    v1 = (unsigned __int8 *)sub_430940();
    for ( *(_DWORD *)&byte_5D4594[2618912] = v1; *v1; *(_DWORD *)&byte_5D4594[2618912] = v1 )
    {
      sub_46B6B0(v1);
      v1 = (unsigned __int8 *)(*(_DWORD *)&byte_5D4594[2618912] + 8);
    }
    sub_43CCA0();
    if ( !v0 )
    {
      sub_43CA50();
      v0 = 1;
    }
    if ( *(_DWORD *)&byte_5D4594[2598000] % 0x1Eu )
      sub_43CA20();
    sub_46C2E0();
    sub_477830();
    sub_48A220();
    sub_4AD170();
    sub_48A290();
    while ( !sub_416CD0() )
      ;
  }
  while ( *(_DWORD *)&byte_587000[173328] );
  sub_4CC930();
  result = *(_DWORD *)&byte_587000[173332];
  if ( *(_DWORD *)&byte_587000[173332] )
  {
    sub_43BEB0(&v3, &v5, &v4);
    if ( !v3 )
      sub_43BEF0(640, 480, v4);
    result = *(_DWORD *)&byte_587000[173332];
  }
  return result;
}
// 4AD170: using guessed type int sub_4AD170(void);

//----- (004AB720) --------------------------------------------------------
int sub_4AB720()
{
  int v0; // esi
  int v1; // edi

  fclose(*(FILE **)&byte_5D4594[1309760]);
  _unlink(*(LPCSTR *)&byte_5D4594[1309776]);
  v0 = *(_DWORD *)&byte_5D4594[1309780];
  *(_DWORD *)&byte_5D4594[1309760] = 0;
  *(_DWORD *)&byte_5D4594[1309764] = 0;
  *(_DWORD *)&byte_587000[173336] = 1;
  *(_DWORD *)&byte_5D4594[1309772] = 0;
  *(_DWORD *)&byte_5D4594[1309768] = 0;
  if ( *(_DWORD *)&byte_5D4594[1309780] )
  {
    do
    {
      v1 = *(_DWORD *)(v0 + 12);
      free(*(LPVOID *)(v0 + 4));
      free((LPVOID)v0);
      v0 = v1;
    }
    while ( v1 );
  }
  if ( *(_DWORD *)&byte_5D4594[1309776] )
    free(*(LPVOID *)&byte_5D4594[1309776]);
  *(_DWORD *)&byte_5D4594[1309784] = 0;
  *(_DWORD *)&byte_5D4594[1309780] = 0;
  sub_4AB560(0);
  return sub_4AB570(1);
}

//----- (004AB7C0) --------------------------------------------------------
void __cdecl sub_4AB7C0(unsigned __int16 a1, void *a2, size_t a3)
{
  _DWORD *v3; // ebx
  void *v4; // eax
  unsigned __int16 *v5; // esi
  int v6; // eax
  int v7; // eax

  if ( a2 && a3 )
  {
    if ( a1 == *(_DWORD *)&byte_587000[173336] )
    {
      fwrite(a2, a3, 1u, *(FILE **)&byte_5D4594[1309760]);
      *(_DWORD *)&byte_5D4594[1309768] += a3;
      ++*(_DWORD *)&byte_587000[173336];
    }
    else
    {
      v3 = malloc(0x14u);
      if ( v3 )
      {
        v4 = malloc(a3);
        v3[1] = v4;
        if ( v4 )
        {
          qmemcpy(v4, a2, a3);
          *(_WORD *)v3 = a1;
          v3[2] = a3;
          v3[3] = 0;
          v3[4] = *(_DWORD *)&byte_5D4594[1309784];
          if ( *(_DWORD *)&byte_5D4594[1309784] )
            *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309784] + 12) = v3;
          *(_DWORD *)&byte_5D4594[1309784] = v3;
          if ( !*(_DWORD *)&byte_5D4594[1309780] )
            *(_DWORD *)&byte_5D4594[1309780] = v3;
        }
      }
    }
    v5 = *(unsigned __int16 **)&byte_5D4594[1309780];
    if ( *(_DWORD *)&byte_5D4594[1309780] )
    {
      do
      {
        if ( *(_DWORD *)&byte_587000[173336] == *v5 )
        {
          fwrite(*((void **)v5 + 1), *((_DWORD *)v5 + 2), 1u, *(FILE **)&byte_5D4594[1309760]);
          *(_DWORD *)&byte_5D4594[1309768] += *((_DWORD *)v5 + 2);
          ++*(_DWORD *)&byte_587000[173336];
          v6 = *((_DWORD *)v5 + 4);
          if ( v6 )
            *(_DWORD *)(v6 + 12) = *((_DWORD *)v5 + 3);
          else
            *(_DWORD *)&byte_5D4594[1309780] = *((_DWORD *)v5 + 3);
          v7 = *((_DWORD *)v5 + 3);
          if ( v7 )
            *(_DWORD *)(v7 + 16) = *((_DWORD *)v5 + 4);
          else
            *(_DWORD *)&byte_5D4594[1309784] = *((_DWORD *)v5 + 4);
          free(*((LPVOID *)v5 + 1));
          free(v5);
        }
        v5 = (unsigned __int16 *)*((_DWORD *)v5 + 3);
      }
      while ( v5 );
    }
    if ( *(_DWORD *)&byte_5D4594[1309764] && *(_DWORD *)&byte_5D4594[1309768] >= *(int *)&byte_5D4594[1309772] )
    {
      sub_4AB580();
      sub_4AB560(0);
      sub_4AB570(1);
      sub_4CC900(0x64u);
      sub_43CA80();
    }
    else
    {
      sub_4CC900((__int64)((double)*(unsigned int *)&byte_5D4594[1309768] / (double)*(int *)&byte_5D4594[1309772] * 100.0));
    }
  }
}

//----- (004AB9B0) --------------------------------------------------------
int __cdecl sub_4AB9B0(char *a1)
{
  int result; // eax
  CHAR FileName[256]; // [esp+8h] [ebp-100h]

  if ( strchr(a1, 92) )
  {
    strcpy(FileName, a1);
  }
  else
  {
    strcpy(FileName, "maps\\");
    strncat(FileName, a1, strlen(a1) - 4);
    *(_WORD *)&FileName[strlen(FileName)] = *(_WORD *)&byte_587000[173348];
    strcat(FileName, a1);
  }
  result = _access(FileName, 0);
  if ( result != -1 )
    result = DeleteFileA(FileName);
  return result;
}

//----- (004ABA90) --------------------------------------------------------
LPCSTR sub_4ABA90()
{
  LPCSTR result; // eax

  result = *(LPCSTR *)&byte_5D4594[1309764];
  if ( *(_DWORD *)&byte_5D4594[1309764] )
  {
    sub_43CAB0();
    if ( *(_DWORD *)&byte_5D4594[1309760] )
      fclose(*(FILE **)&byte_5D4594[1309760]);
    sub_4AB9B0(*(char **)&byte_5D4594[1309776]);
    result = sub_4AB580();
  }
  return result;
}

//----- (004ABAD0) --------------------------------------------------------
int __cdecl sub_4ABAD0(char *a1, unsigned int a2)
{
  CHAR *v2; // edi
  unsigned __int8 v3; // cl
  char *v4; // ebx
  char *v5; // eax
  CHAR *v6; // edi
  unsigned __int8 v7; // cl
  char *v8; // edx
  int result; // eax
  int v10; // [esp+10h] [ebp-204h]
  CHAR v11[256]; // [esp+14h] [ebp-200h]
  CHAR PathName[256]; // [esp+114h] [ebp-100h]

  if ( !a1 || a2 <= 0 )
    return 0;
  *(_DWORD *)&byte_5D4594[1309764] = 1;
  *(_DWORD *)&byte_587000[173336] = 1;
  *(_DWORD *)&byte_5D4594[1309772] = a2;
  *(_DWORD *)&byte_5D4594[1309768] = 0;
  *(_DWORD *)&byte_5D4594[1309780] = 0;
  *(_DWORD *)&byte_5D4594[1309784] = 0;
  if ( strchr(a1, 92) )
  {
    strcpy(v11, "maps\\");
    v4 = strrchr(a1, 92) + 1;
    v5 = strrchr(a1, 46);
    if ( !v4 || !v5 )
      return 0;
    v10 = v5 - v4;
    strncat(v11, v4, v5 - v4);
    *(_WORD *)&v11[strlen(v11)] = *(_WORD *)&byte_587000[173380];
    strcpy(PathName, v11);
    strncat(v11, v4, v10);
    v6 = &v11[strlen(v11) + 1];
    v7 = byte_587000[173388];
    *(_DWORD *)--v6 = *(_DWORD *)&byte_587000[173384];
    v6[4] = v7;
    sub_409D70(v4);
  }
  else
  {
    sub_409D70(a1);
    strcpy(v11, "maps\\");
    strcat(v11, sub_409B40());
    *(_WORD *)&v11[strlen(v11)] = *(_WORD *)&byte_587000[173360];
    strcpy(PathName, v11);
    strcat(v11, sub_409B40());
    v2 = &v11[strlen(v11) + 1];
    v3 = byte_587000[173368];
    *(_DWORD *)--v2 = *(_DWORD *)&byte_587000[173364];
    v2[4] = v3;
  }
  sub_4AB9B0(a1);
  if ( _access((LPCSTR)&byte_587000[173392], 0) == -1 )
    CreateDirectoryA((LPCSTR)&byte_587000[173400], 0);
  if ( _access(PathName, 0) == -1 )
    CreateDirectoryA(PathName, 0);
  v8 = (char *)malloc(strlen(v11) + 1);
  *(_DWORD *)&byte_5D4594[1309776] = v8;
  if ( v8 )
  {
    strcpy(v8, v11);
    *(_DWORD *)&byte_5D4594[1309760] = fopen(*(const char **)&byte_5D4594[1309776], "wb");
    if ( *(_DWORD *)&byte_5D4594[1309760] )
    {
      result = 1;
      *(_DWORD *)&byte_587000[173336] = 1;
      return result;
    }
  }
  return 0;
}

//----- (004ABDA0) --------------------------------------------------------
int __cdecl sub_4ABDA0(int a1, __int16 a2, __int16 a3, _DWORD *a4)
{
  int v4; // edi
  int result; // eax
  int v6; // esi
  unsigned int v7; // edx
  int v8; // eax
  float v9; // [esp-14h] [ebp-148h]
  char v10; // [esp+Fh] [ebp-125h]
  float v11; // [esp+10h] [ebp-124h]
  int v12; // [esp+14h] [ebp-120h]
  int v13[2]; // [esp+18h] [ebp-11Ch]
  float v14; // [esp+20h] [ebp-114h]
  int v15; // [esp+24h] [ebp-110h]
  int v16; // [esp+28h] [ebp-10Ch]
  float v17; // [esp+2Ch] [ebp-108h]
  int v18; // [esp+30h] [ebp-104h]
  char v19[256]; // [esp+34h] [ebp-100h]

  sub_426AC0(&v15, 4u);
  *a4 += 4;
  sub_426AC0(&v16, 4u);
  *a4 += 4;
  if ( a3 < 40 || a2 < 4 )
  {
    sub_426AC0(v13, 8u);
    *a4 += 8;
  }
  else
  {
    sub_426AC0(&v11, 4u);
    *a4 += 4;
    sub_426AC0(&v17, 4u);
    v9 = v11;
    *a4 += 4;
    v13[0] = sub_419A70(v9);
    v13[1] = sub_419A70(v17);
  }
  if ( a3 >= 10 )
  {
    sub_426AC0(&v12, 1u);
    ++*a4;
    sub_426AC0(v19, (unsigned __int8)v12);
    *a4 += (unsigned __int8)v12;
  }
  if ( a3 >= 20 )
  {
    sub_426AC0(&v10, 1u);
    ++*a4;
  }
  if ( a3 >= 30 )
  {
    sub_426AC0(&v12, 1u);
    ++*a4;
  }
  if ( a3 >= 40 )
  {
    sub_426AA0(4);
    *a4 += 4;
    if ( a2 >= 2 )
    {
      if ( a2 < 5 )
      {
        sub_426AC0(&v14, 4u);
        *a4 += 4;
        v11 = v14;
      }
      else
      {
        sub_426AC0(&v11, 2u);
        *a4 += 2;
      }
      v4 = (unsigned __int16)(4 * LOWORD(v11));
      sub_426AA0(v4);
      *a4 += v4;
    }
    if ( a2 >= 3 )
    {
      sub_426AC0(&v18, 4u);
      *a4 += 4;
    }
  }
  result = sub_45A360(a1, v13[0], v13[1]);
  v6 = result;
  if ( result )
  {
    v7 = *(_DWORD *)(result + 120) & 0xEEBF7E9D;
    *(_DWORD *)(result + 120) = v7;
    *(_DWORD *)(result + 120) = v16 | v7;
    v8 = *(_DWORD *)(result + 280);
    LOBYTE(v8) = v8 & 0xA1;
    *(_DWORD *)(v6 + 280) = v8;
    *(_DWORD *)(v6 + 280) = v18 | v8;
    *(_DWORD *)(v6 + 128) = v15;
    *(_BYTE *)(v6 + 28) = v10;
    if ( !sub_40A5C0(1) && *(_BYTE *)(v6 + 28) && (!(*(_DWORD *)(v6 + 112) & 0x10000000) || !sub_40A5C0(128)) )
      sub_4191D0(*(_BYTE *)(v6 + 28), v6 + 24, 0, *(_DWORD *)(v6 + 128), 0);
    result = v6;
  }
  return result;
}

//----- (004AC020) --------------------------------------------------------
int __cdecl sub_4AC020(int a1, __int16 a2, _DWORD *a3)
{
  _DWORD *v3; // esi
  __int16 v4; // di
  __int16 v5; // ax
  bool v6; // cc
  int v7; // eax
  int result; // eax
  int v9; // edi
  bool v10; // zf
  int v11; // ecx
  int v12; // ebx
  char v13; // dl
  int v14; // ebx
  int v15; // ecx
  int v16; // eax
  int v17; // eax
  unsigned __int8 v18; // cl
  int v19; // [esp-30h] [ebp-60h]
  float v20; // [esp-24h] [ebp-54h]
  int v21; // [esp-14h] [ebp-44h]
  int v22; // [esp-4h] [ebp-34h]
  int v23; // [esp+Ch] [ebp-24h]
  int v24; // [esp+10h] [ebp-20h]
  int v25; // [esp+14h] [ebp-1Ch]
  int v26; // [esp+18h] [ebp-18h]
  int v27; // [esp+1Ch] [ebp-14h]
  int v28; // [esp+20h] [ebp-10h]
  int v29; // [esp+24h] [ebp-Ch]
  float v30; // [esp+28h] [ebp-8h]
  float v31; // [esp+2Ch] [ebp-4h]

  v3 = a3;
  v4 = a2;
  v5 = 1;
  v23 = 1;
  if ( a2 < 40 )
    return sub_4ABDA0(a1, v5, v4, v3);
  sub_426AC0(&v23, 2u);
  v5 = v23;
  v6 = (__int16)v23 < 61;
  *v3 += 2;
  if ( v6 )
    return sub_4ABDA0(a1, v5, v4, v3);
  sub_426AC0(&v25, 4u);
  *v3 += 4;
  sub_426AC0(&v29, 4u);
  *v3 += 4;
  sub_426AC0(&v30, 4u);
  *v3 += 4;
  sub_426AC0(&v31, 4u);
  v20 = v31;
  *v3 += 4;
  v22 = sub_419A70(v20);
  v7 = sub_419A70(v30);
  result = sub_45A360(a1, v7, v22);
  v9 = result;
  if ( result )
  {
    *(_DWORD *)(result + 128) = v25;
    sub_426AC0(&a2, 1u);
    v10 = (_BYTE)a2 == 0;
    ++*v3;
    if ( !v10 )
    {
      sub_426AC0(&v26, 4u);
      v11 = v26;
      *v3 += 4;
      *(_DWORD *)(v9 + 120) = v11 | *(_DWORD *)(v9 + 120) & 0xEEBF7E9D;
      sub_426AC0(&a3, 1u);
      v12 = (unsigned __int8)a3;
      v21 = (unsigned __int8)a3;
      ++*v3;
      sub_426AA0(v21);
      *v3 += v12;
      sub_426AC0(&a1, 1u);
      v13 = a1;
      ++*v3;
      *(_BYTE *)(v9 + 28) = v13;
      sub_426AC0(&a3, 1u);
      ++*v3;
      sub_426AC0(&v27, 2u);
      v14 = 4 * (unsigned __int16)v27;
      v19 = 4 * (unsigned __int16)v27;
      *v3 += 2;
      sub_426AA0(v19);
      *v3 += v14;
      sub_426AC0(&v28, 4u);
      v15 = v28;
      *v3 += 4;
      v16 = *(_DWORD *)(v9 + 280);
      LOBYTE(v16) = v16 & 0xA1;
      *(_DWORD *)(v9 + 280) = v15 | v16;
      if ( (__int16)v23 >= 63 )
      {
        sub_426AA0(2);
        *v3 += 2;
        sub_426AC0(&v24, 4u);
        *v3 += 4;
        sub_426AA0(v24);
        *v3 += v24;
        sub_426AA0(4);
        *v3 += 4;
      }
      if ( (__int16)v23 >= 64 )
      {
        sub_426AA0(4);
        *v3 += 4;
      }
    }
    if ( !sub_40A5C0(1) )
    {
      v17 = *(_DWORD *)&byte_5D4594[1309788];
      if ( !*(_DWORD *)&byte_5D4594[1309788] )
      {
        v17 = sub_44CFC0((CHAR *)&byte_587000[173444]);
        *(_DWORD *)&byte_5D4594[1309788] = v17;
      }
      v18 = *(_BYTE *)(v9 + 28);
      if ( v18 )
      {
        if ( *(_DWORD *)(v9 + 108) != v17 )
          sub_4191D0(v18, v9 + 24, 0, *(_DWORD *)(v9 + 128), 0);
      }
    }
    result = v9;
  }
  return result;
}

//----- (004AC2B0) --------------------------------------------------------
char *__cdecl sub_4AC2B0(char *a1)
{
  char *result; // eax
  char *v2; // eax
  int v3; // [esp+Ch] [ebp-628h]
  int v4; // [esp+10h] [ebp-624h]
  int v5; // [esp+14h] [ebp-620h]
  int v6; // [esp+18h] [ebp-61Ch]
  int v7; // [esp+1Ch] [ebp-618h]
  int v8; // [esp+20h] [ebp-614h]
  int v9[2]; // [esp+24h] [ebp-610h]
  char v11[256]; // [esp+2Ch] [ebp-608h]
  char v12[256]; // [esp+12Ch] [ebp-508h]
  char v13[256]; // [esp+22Ch] [ebp-408h]
  char FileName[260]; // [esp+32Ch] [ebp-308h]
  char v15[260]; // [esp+430h] [ebp-204h]
  char v16[256]; // [esp+534h] [ebp-100h]

  result = a1;
  v7 = 0;
  if ( a1 )
  {
    _splitpath(a1, &v3, v11, v13, v16);
    if ( !strlen(v11) )
    {
      strcpy(v11, *(const char **)&byte_587000[173412]);
      strcat(v11, *(const char **)&byte_587000[173420]);
      strcat(v11, v13);
    }
    _makepath(FileName, &v3, v11, v13, v16);
    if ( _access(FileName, 0) == -1 )
    {
      _makepath(v15, &v3, v11, v13, (const char *)&byte_587000[173456]);
      if ( _access(v15, 0) == -1 )
        return 0;
      result = (char *)sub_57BC50(v15, FileName);
      if ( !result )
        return result;
    }
    result = (char *)sub_426910(FileName, 1, 19);
    if ( !result )
      return result;
    sub_426AC0(&v5, 4u);
    if ( v5 != -86065425 )
    {
      if ( v5 != -86050098 )
      {
        sub_4269F0();
        return 0;
      }
      sub_426C20(&v7, 4u);
    }
    sub_426AC0(&v9[0], 4u);
    sub_426AC0(&v9[1], 4u);
    sub_426A80(v9);
    while ( 1 )
    {
      sub_426AC0(&v6, 1u);
      if ( !(_BYTE)v6 )
        break;
      sub_426AC0(v12, (unsigned __int8)v6);
      sub_426C20(&v8, 4u);
      v4 = 0;
      if ( !strcmp(v12, (const char *)&byte_587000[173464]) )
      {
        sub_426F40(0, v12, &v4, (int (__cdecl *)(int))sub_4AC610);
      }
      else if ( sub_40A5C0(1) )
      {
        sub_426AA0(v8);
      }
      else
      {
        sub_426EA0(0, v12, &v4);
      }
      if ( v4 == 1 )
        return 0;
    }
    sub_4269F0();
    sub_4BAB30();
    nullsub_20();
    sub_4B64C0();
    sub_45AC40();
    sub_4C4FD0();
    sub_451100();
    sub_445FF0();
    sub_470680();
    sub_461520();
    sub_486060();
    v2 = sub_417040(*(int *)&byte_5D4594[2616328]);
    sub_422140((int)v2);
    sub_4DB230(0);
    if ( *(int *)&byte_5D4594[3803228] < 0 )
    {
      if ( sub_461450() == 1 )
      {
        sub_461400();
        sub_461440(0);
      }
      sub_470AA0(0);
    }
    result = (char *)1;
  }
  return result;
}
// 4BB9C0: using guessed type void nullsub_20(void);

//----- (004AC610) --------------------------------------------------------
int sub_4AC610()
{
  unsigned __int16 v1; // ax
  unsigned __int16 v2; // si
  int v3; // eax
  int v4; // [esp+4h] [ebp-Ch]
  int v5; // [esp+8h] [ebp-8h]
  int v6; // [esp+Ch] [ebp-4h]

  v6 = 1;
  sub_426AC0(&v6, 2u);
  if ( (__int16)v6 > 1 )
    return 0;
  if ( !*(_DWORD *)&byte_5D4594[3803300] )
    return 0;
  sub_426AC0(&v4, 2u);
  if ( (_WORD)v4 )
  {
    while ( 1 )
    {
      sub_426C20(&v5, 4u);
      v1 = sub_42C2B0(v4);
      v2 = v1;
      if ( !v1 )
        break;
      if ( sub_44D090(v1) )
      {
        v3 = sub_4AC6E0(v2);
        v5 -= v3;
      }
      if ( v5 > 0 )
        sub_426AA0(v5);
      sub_426AC0(&v4, 2u);
      if ( !(_WORD)v4 )
        return 1;
    }
    return 0;
  }
  return 1;
}

//----- (004AC6E0) --------------------------------------------------------
int __cdecl sub_4AC6E0(unsigned __int16 a1)
{
  if ( !*(_DWORD *)&byte_5D4594[1309792] )
  {
    *(_DWORD *)&byte_5D4594[1309792] = sub_44CFC0((CHAR *)&byte_587000[173476]);
    *(_DWORD *)&byte_5D4594[1309796] = sub_44CFC0((CHAR *)&byte_587000[173488]);
    *(_DWORD *)&byte_5D4594[1309800] = sub_44CFC0((CHAR *)&byte_587000[173508]);
    *(_DWORD *)&byte_5D4594[1309804] = sub_44CFC0((CHAR *)&byte_587000[173520]);
  }
  if ( a1 == *(_DWORD *)&byte_5D4594[1309792] || a1 == *(_DWORD *)&byte_5D4594[1309796] )
    return sub_4AC980(a1);
  if ( a1 == *(_DWORD *)&byte_5D4594[1309800] )
    return sub_4ACE00(a1);
  if ( a1 == *(_DWORD *)&byte_5D4594[1309804] )
    return sub_4ACEF0(a1);
  if ( sub_44D060(a1) )
    return sub_4AD040(a1);
  if ( sub_44D040(a1) )
    return sub_4AC7B0(a1);
  return 0;
}

//----- (004AC7B0) --------------------------------------------------------
int __cdecl sub_4AC7B0(int a1)
{
  int v1; // eax
  int v2; // esi
  int result; // eax
  int v4; // eax
  char v5; // al
  float v6; // edi
  int v7; // ecx
  double v9; // st7
  double v10; // st7
  int v11; // [esp+4h] [ebp-10h]
  int v12; // [esp+8h] [ebp-Ch]
  float v13; // [esp+Ch] [ebp-8h]
  int v14; // [esp+10h] [ebp-4h]

  sub_426AC0(&v12, 2u);
  v11 = 2;
  v1 = sub_4AC020(a1, v12, &v11);
  v2 = v1;
  if ( v1 )
  {
    v4 = *(_DWORD *)(v1 + 112);
    if ( (v4 & 0x80u) == 0 )
    {
      if ( v4 & 0x200 )
      {
        sub_426AC0(&a1, 4u);
        sub_426AC0(&v14, 4u);
        v9 = (double)a1;
        v11 += 8;
        v13 = v9;
        *(float *)(v2 + 56) = v9;
        v10 = (double)v14;
        *(float *)(v2 + 60) = v10;
        if ( v13 > 60.0 )
          *(_DWORD *)(v2 + 56) = 1114636288;
        if ( v10 > 60.0 )
          *(_DWORD *)(v2 + 60) = 1114636288;
        sub_428270((shape *)(v2 + 44));
      }
    }
    else
    {
      sub_426AC0(&v13, 4u);
      v11 += 4;
      sub_426AC0(&v14, 4u);
      v5 = v14;
      v11 += 4;
      *(_BYTE *)(v2 + 433) = v14;
      *(_BYTE *)(v2 + 432) = 0;
      if ( v5 )
        *(_BYTE *)(v2 + 432) = 1;
      v6 = v13;
      a1 = LODWORD(v13);
      if ( (__int16)v12 >= 41 )
      {
        sub_426AC0(&a1, 4u);
        v6 = *(float *)&a1;
        v11 += 4;
      }
      *(_BYTE *)(v2 + 299) = LOBYTE(v13);
      v7 = *(_DWORD *)(v2 + 12) + *(_DWORD *)&byte_587000[8 * LODWORD(v6) + 196184] / 2;
      sub_410390(
        v2,
        v7 / 23,
        (*(_DWORD *)(v2 + 16) + *(_DWORD *)&byte_587000[8 * LODWORD(v6) + 196188] / 2) / 23);
    }
    *(_DWORD *)(v2 + 288) = 0;
    sub_45A990(v2);
    result = v11;
  }
  else
  {
    sub_4356E0();
    result = 0;
  }
  return result;
}

//----- (004AC980) --------------------------------------------------------
int __cdecl sub_4AC980(int a1)
{
  int v1; // eax
  int v2; // esi
  unsigned __int16 *v4; // edi
  _BYTE *v5; // eax
  _BYTE *v6; // ecx
  int v7; // [esp+Ch] [ebp-8h]
  int v8; // [esp+10h] [ebp-4h]

  sub_426AC0(&v8, 2u);
  v7 = 2;
  v1 = sub_4AC020(a1, v8, &v7);
  v2 = v1;
  if ( !v1 )
  {
    sub_4356E0();
    return 0;
  }
  if ( (__int16)v8 >= 2 )
  {
    sub_426AC0((_BYTE *)(v1 + 136), 4u);
    v7 += 4;
    sub_426AC0((_BYTE *)(v2 + 140), 4u);
    v7 += 4;
    sub_426AC0((_BYTE *)(v2 + 144), 4u);
    v7 += 4;
    sub_426AC0((_BYTE *)(v2 + 148), 4u);
    v7 += 4;
    sub_426AC0((_BYTE *)(v2 + 152), 0xCu);
    v4 = (unsigned __int16 *)(v2 + 164);
    v7 += 12;
    sub_426AC0((_BYTE *)(v2 + 164), 2u);
    v7 += 2;
    sub_426AC0((_BYTE *)(v2 + 166), 2u);
    v7 += 2;
    sub_426AC0((_BYTE *)(v2 + 168), 4u);
    v7 += 4;
    sub_426AC0((_BYTE *)(v2 + 176), 2u);
    v7 += 2;
    sub_426AC0((_BYTE *)(v2 + 178), 0x30u);
    v7 += 48;
    sub_426AC0((_BYTE *)(v2 + 226), 0x10u);
    v7 += 16;
    sub_426AC0((_BYTE *)(v2 + 242), 0x10u);
    v7 += 16;
    sub_426AC0((_BYTE *)(v2 + 258), 2u);
    v7 += 2;
    sub_426AC0((_BYTE *)(v2 + 260), 2u);
    v7 += 2;
    sub_426AC0((_BYTE *)(v2 + 262), 2u);
    v7 += 2;
    sub_426AC0((_BYTE *)(v2 + 264), 4u);
    v7 += 4;
    sub_426AC0((_BYTE *)(v2 + 270), 2u);
    v7 += 2;
    sub_426AC0((_BYTE *)(v2 + 272), 2u);
    v7 += 2;
    sub_426AC0((_BYTE *)(v2 + 274), 1u);
    ++v7;
    if ( (__int16)v8 > 40 )
    {
      if ( (__int16)v8 >= 42 )
      {
        sub_426AC0((_BYTE *)(v2 + 172), 4u);
        v7 += 4;
      }
      else
      {
        sub_426AC0(&a1, 1u);
        ++v7;
        *(_DWORD *)(v2 + 172) = (unsigned __int8)a1;
      }
    }
  }
  else
  {
    sub_426AC0((_BYTE *)(v1 + 136), 4u);
    v7 += 4;
    sub_426AC0((_BYTE *)(v2 + 140), 4u);
    v7 += 4;
    sub_426AC0((_BYTE *)(v2 + 144), 4u);
    v7 += 4;
    sub_426AC0((_BYTE *)(v2 + 148), 4u);
    v7 += 4;
    sub_426AC0((_BYTE *)(v2 + 152), 0xCu);
    v4 = (unsigned __int16 *)(v2 + 164);
    v7 += 12;
    sub_426AC0((_BYTE *)(v2 + 164), 2u);
    v7 += 2;
    sub_426AC0((_BYTE *)(v2 + 166), 2u);
    v7 += 2;
    sub_426AC0((_BYTE *)(v2 + 168), 4u);
    v7 += 4;
    *(_WORD *)(v2 + 176) = 0;
    *(_WORD *)(v2 + 258) = 0;
    *(_WORD *)(v2 + 260) = 0;
    *(_WORD *)(v2 + 262) = 0;
    *(_DWORD *)(v2 + 264) = 0;
    *(_WORD *)(v2 + 270) = 0;
    *(_BYTE *)(v2 + 274) = -128;
    if ( *(_DWORD *)&byte_5D4594[3803300] != 1 )
      goto LABEL_24;
    if ( *(float *)(v2 + 140) <= 63.0
      && (double)*(int *)(v2 + 148) * *(double *)&byte_581450[9752] <= *(double *)&byte_581450[9744] )
    {
LABEL_13:
      *(_BYTE *)(v2 + 432) = 0;
      *(_BYTE *)(v2 + 433) = 0;
      *(_BYTE *)(v2 + 434) = 0;
      v5 = (_BYTE *)(v2 + 242);
      v6 = (_BYTE *)(v2 + 179);
      do
      {
        if ( *(v6 - 1) || *v6 || v6[1] )
          ++*(_BYTE *)(v2 + 432);
        if ( *(v5 - 16) )
          ++*(_BYTE *)(v2 + 433);
        if ( *v5 )
          ++*(_BYTE *)(v2 + 434);
        v6 += 3;
        ++v5;
      }
      while ( (int)&v5[-242 - v2] < 16 );
      a1 = *v4;
      *(_WORD *)(v2 + 268) = (__int64)((double)a1 * *(double *)&byte_581450[9752] * *(double *)&byte_581450[9736]);
      goto LABEL_24;
    }
    sub_484CE0(v2 + 136, 63.0);
  }
  if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
    goto LABEL_13;
LABEL_24:
  *(_DWORD *)(v2 + 288) = 0;
  sub_45A990(v2);
  return v7;
}

//----- (004ACE00) --------------------------------------------------------
int __cdecl sub_4ACE00(int a1)
{
  int v1; // eax
  int v2; // esi
  int result; // eax
  int i; // edi
  int v5; // eax
  int v6; // [esp+Ch] [ebp-10Ch]
  int v7; // [esp+10h] [ebp-108h]
  int v8; // [esp+14h] [ebp-104h]
  char v9[256]; // [esp+18h] [ebp-100h]

  sub_426AC0(&v8, 2u);
  v6 = 2;
  v1 = sub_4AC020(a1, v8, &v6);
  v2 = v1;
  if ( v1 )
  {
    *(_DWORD *)(v1 + 288) = 0;
    sub_45A990(v1);
    for ( i = 0; i < 16; i += 4 )
    {
      sub_426AC0(&v7, 1u);
      ++v6;
      sub_426AC0(v9, (unsigned __int8)v7);
      v6 += (unsigned __int8)v7;
      v9[(unsigned __int8)v7] = 0;
      v5 = sub_413290(v9);
      *(_DWORD *)(i + v2 + 432) = sub_413330(v5);
      *(_WORD *)(v2 + 448) = -1;
      *(_WORD *)(v2 + 450) = -1;
    }
    result = v6;
  }
  else
  {
    sub_4356E0();
    result = 0;
  }
  return result;
}
// 4ACE00: using guessed type char var_100[256];

//----- (004ACEF0) --------------------------------------------------------
int __cdecl sub_4ACEF0(int a1)
{
  int v1; // eax
  int v2; // edi
  int result; // eax
  _BYTE *v4; // esi
  int v5; // [esp+Ch] [ebp-10h]
  int v6; // [esp+10h] [ebp-Ch]
  int v7; // [esp+14h] [ebp-8h]
  _BYTE *v8; // [esp+18h] [ebp-4h]

  sub_426AC0(&v7, 2u);
  v5 = 2;
  v1 = sub_4AC020(a1, v7, &v5);
  v2 = v1;
  if ( v1 )
  {
    v4 = (_BYTE *)(v1 + 432);
    *(_DWORD *)(v1 + 288) = 0;
    sub_45A990(v1);
    sub_426AC0(&v6, 4u);
    *(float *)(v2 + 56) = (double)v6;
    v5 += 4;
    sub_426AC0(&v6, 4u);
    *(float *)(v2 + 60) = (double)v6;
    v5 += 4;
    sub_428270((shape *)(v2 + 44));
    v4[4] = 10;
    *v4 = 90;
    v4[1] = 90;
    v4[2] = 90;
    v4[3] = 10;
    v4[5] = 10;
    v8 = v4 + 5;
    if ( (__int16)v7 >= 41 )
    {
      sub_426AC0(v4, 1u);
      ++v5;
      sub_426AC0(v4 + 1, 1u);
      ++v5;
      sub_426AC0(v4 + 2, 1u);
      ++v5;
      sub_426AC0(v4 + 3, 1u);
      ++v5;
      sub_426AC0(v4 + 4, 1u);
      ++v5;
      sub_426AC0(v8, 1u);
      ++v5;
    }
    result = v5;
  }
  else
  {
    sub_4356E0();
    result = 0;
  }
  return result;
}

//----- (004AD040) --------------------------------------------------------
int __cdecl sub_4AD040(int a1)
{
  int v1; // esi
  int result; // eax
  int v3; // [esp+4h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-8h]
  int v5; // [esp+Ch] [ebp-4h]

  sub_426AC0(&v4, 2u);
  v3 = 2;
  v1 = sub_4AC020(a1, v4, &v3);
  if ( v1 )
  {
    if ( (__int16)v4 >= 61 )
    {
      LOBYTE(a1) = 0;
      sub_426AC0(&v5, 4u);
      v3 += 4;
      sub_426AC0(&a1, 1u);
      ++v3;
      if ( (_BYTE)a1 == 1 )
        sub_459DD0(v1, 1);
    }
    *(_DWORD *)(v1 + 288) = 0;
    sub_45A990(v1);
    result = v3;
  }
  else
  {
    sub_4356E0();
    result = 0;
  }
  return result;
}

//----- (004AD320) --------------------------------------------------------
int __cdecl sub_4AD320(int a1)
{
  int v1; // esi
  _DWORD *v3; // eax
  _DWORD *v4; // esi
  _DWORD *v5; // esi
  _DWORD *v6; // edi
  char **v7; // esi
  wchar_t *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax

  v1 = *(_DWORD *)&byte_587000[26048];
  if ( sub_43F320(0) > 10 )
    v1 = 2;
  if ( *(_DWORD *)&byte_5D4594[1309812] )
    return 0;
  if ( sub_43AF70() == 1 )
    v3 = sub_4A0AD0(*(const char **)&byte_587000[4 * v1 + 173596], sub_4AD5D0);
  else
    v3 = sub_4A0AD0(*(const char **)&byte_587000[4 * v1 + 173556], sub_4AD5D0);
  *(_DWORD *)&byte_5D4594[1309812] = v3;
  sub_46B120(v3, a1);
  sub_46B340(*(int *)&byte_5D4594[1309812], sub_4AD570);
  v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10306);
  if ( sub_40A5C0(1056) )
    sub_46ABB0((int)v4, 0);
  sub_46A8A0();
  sub_4AD840();
  if ( sub_43AF70() == 1 )
  {
    sub_4AD4B0();
    v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10310);
    sub_46B280((int)v5, *(int *)&byte_5D4594[1309812]);
    sub_46B2C0((int)v5, sub_4AD5D0);
    v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10317);
    v7 = (char **)&byte_587000[173540];
    do
    {
      v8 = sub_40F1D0(*v7, 0, (const char *)&byte_587000[173928], 308);
      sub_46B490((int)v6, 16397, (int)v8, -1);
      ++v7;
    }
    while ( (int)v7 < (int)&byte_587000[173556] );
  }
  else
  {
    v9 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10319);
    sub_46AC00((int)v9, 1);
  }
  if ( *(_DWORD *)&byte_5D4594[2650636] & 0x40000 )
  {
    v10 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10304);
    sub_46ABB0((int)v10, 0);
  }
  return *(_DWORD *)&byte_5D4594[1309812];
}

//----- (004AD4B0) --------------------------------------------------------
int sub_4AD4B0()
{
  _DWORD *v0; // eax
  _DWORD *v1; // esi
  int v2; // eax
  int v3; // edi
  char **v4; // ebx
  unsigned __int16 *v5; // eax
  int result; // eax
  int v7; // edi
  int v8; // ecx
  int v9; // [esp+Ch] [ebp-4h]

  v0 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10317);
  v1 = v0;
  v2 = sub_43F320(v0[59]) + 1;
  v3 = 0;
  v4 = (char **)&byte_587000[173540];
  v1[7] = v1[5] + 4 * v2 + 2;
  v1[3] = 4 * v2 + 2;
  do
  {
    v5 = sub_40F1D0(*v4, 0, (const char *)&byte_587000[173976], 92);
    sub_43F840(v1[59], v5, &v9, 0, 0);
    if ( v9 > v3 )
      v3 = v9;
    ++v4;
  }
  while ( (int)v4 < (int)&byte_587000[173556] );
  result = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10316)[2];
  v7 = v3 + 7;
  if ( v7 <= result )
    v7 = result;
  v8 = v1[6];
  v1[2] = v7;
  v1[4] = v8 - v7;
  return result;
}

//----- (004AD570) --------------------------------------------------------
int sub_4AD570()
{
  int2 *v0; // edi
  _DWORD *v1; // esi

  v0 = sub_4309F0();
  if ( sub_43AF70() == 1 )
  {
    v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10317);
    if ( !sub_46ACC0((int)v1) && !sub_46AAB0(v1, v0->field_0, v0->field_4) )
    {
      sub_46ADE0((int)v1);
      sub_46AC00((int)v1, 1);
    }
  }
  return 1;
}

//----- (004AD5D0) --------------------------------------------------------
int __cdecl sub_4AD5D0(int a1, int a2, int *a3, int a4)
{
  _DWORD *v4; // ebx
  int v5; // eax
  int v6; // esi
  int v7; // eax
  int v8; // eax
  int v9; // esi
  _DWORD *v10; // eax
  int result; // eax
  int v12; // esi
  _DWORD *v13; // esi

  if ( a2 == 16391 )
  {
    v12 = sub_46B0A0(a3);
    sub_452D80(766, 100);
    switch ( v12 )
    {
      case 10301:
        if ( sub_40A5F0() )
          sub_40A5E0(0);
        else
          sub_40A5E0(1);
        result = 0;
        break;
      case 10302:
        *(_DWORD *)&byte_587000[108752] ^= 1u;
        result = 0;
        break;
      case 10304:
        if ( sub_4D0D70() )
          sub_4D0D90(0);
        else
          sub_4D0D90(1);
        result = 0;
        break;
      case 10305:
        sub_409EF0(2);
        result = 0;
        break;
      case 10306:
        sub_409EF0(0x2000);
        if ( sub_409F40(0x2000) )
          goto LABEL_24;
        sub_4D7EA0();
        result = 0;
        break;
      case 10316:
        v13 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10317);
        sub_46AC00((int)v13, 0);
        sub_46A8C0((int)v13);
        sub_46ADC0((int)v13);
        result = 0;
        break;
      case 10319:
        sub_4BDFD0();
        goto LABEL_24;
      default:
        goto LABEL_24;
    }
  }
  else if ( a2 == 16393 )
  {
    sub_40A6D0(4 - a4);
    result = 0;
  }
  else if ( a2 != 16400
         || sub_46B0A0(a3) != 10317
         || (v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10316),
             v5 = sub_46B490((int)a3, 16404, 0, 0),
             v6 = v5,
             v5 < 0)
         || v5 >= *(__int16 *)(a3[8] + 44) )
  {
LABEL_24:
    result = 0;
  }
  else
  {
    v7 = sub_46B490((int)a3, 16406, a4, 0);
    sub_46B490((int)v4, 16385, v7, -1);
    *(_DWORD *)&byte_5D4594[3596] = v6 + 1;
    v8 = sub_40A710(v6 + 1);
    sub_40A6D0(v8);
    v9 = 4 - sub_40A6C0();
    v10 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10312);
    sub_46B490((int)v10, 16394, v9, 0);
    sub_46AC00((int)a3, 1);
    sub_46ADE0((int)a3);
    result = 0;
  }
  return result;
}

//----- (004AD820) --------------------------------------------------------
int sub_4AD820()
{
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1309812]);
  *(_DWORD *)&byte_5D4594[1309812] = 0;
  return sub_4BE610();
}

//----- (004AD840) --------------------------------------------------------
int sub_4AD840()
{
  int result; // eax
  _DWORD *v1; // esi
  _DWORD *v2; // eax
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  _DWORD *v6; // esi
  wchar_t *v7; // eax
  _DWORD *v8; // esi
  int v9; // eax

  result = *(_DWORD *)&byte_5D4594[1309812];
  if ( *(_DWORD *)&byte_5D4594[1309812] )
  {
    if ( sub_40A5F0() )
    {
      v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10301);
      v1[9] |= 4u;
      if ( sub_40A5C0(1024) )
        sub_46ABB0((int)v1, 0);
    }
    if ( *(_DWORD *)&byte_587000[108752] )
    {
      v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10302);
      v2[9] |= 4u;
    }
    if ( sub_4D0D70() )
    {
      v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10304);
      v3[9] |= 4u;
    }
    if ( sub_409F40(2) )
    {
      v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10305);
      v4[9] |= 4u;
    }
    if ( sub_409F40(0x2000) )
    {
      v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10306);
      v5[9] |= 4u;
    }
    result = sub_43AF70();
    if ( result == 1 )
    {
      v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10316);
      v7 = sub_40F1D0(
             *(char **)&byte_587000[4 * *(_DWORD *)&byte_5D4594[3596] + 173536],
             0,
             (const char *)&byte_587000[174024],
             391);
      sub_46B490((int)v6, 16385, (int)v7, -1);
      v8 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309812], 10312);
      v9 = sub_40A6C0();
      result = sub_46B490((int)v8, 16394, 4 - v9, 0);
    }
  }
  return result;
}

//----- (004AD9B0) --------------------------------------------------------
int __cdecl sub_4AD9B0(int a1)
{
  if ( sub_46ACC0(*(int *)&byte_5D4594[1309820]) )
    return 0;
  sub_413A00(0);
  sub_44D8F0();
  if ( a1 )
  {
    sub_46AC00(*(int *)&byte_5D4594[1309820], 1);
    sub_46AC00(*(int *)&byte_5D4594[1309824], 1);
  }
  else
  {
    sub_433290((char *)&byte_587000[174124]);
    sub_46AC00(*(int *)&byte_5D4594[1309820], 1);
    sub_46AC00(*(int *)&byte_5D4594[1309824], 1);
    sub_445C40();
  }
  return 1;
}

//----- (004ADA40) --------------------------------------------------------
int sub_4ADA40()
{
  int v0; // eax
  _DWORD *v1; // eax
  int v3; // [esp-4h] [ebp-4h]

  sub_413A00(1);
  sub_46A8C0(*(int *)&byte_5D4594[1309820]);
  sub_46A8C0(*(int *)&byte_5D4594[1309824]);
  sub_4CB330();
  v0 = sub_4766D0();
  if ( v0 > 69 )
  {
    if ( v0 <= 79 )
    {
      v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 312);
      goto LABEL_9;
    }
    if ( v0 <= 89 )
    {
      v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 313);
      goto LABEL_9;
    }
    v3 = 314;
  }
  else
  {
    v3 = 311;
  }
  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], v3);
LABEL_9:
  if ( v1 )
    sub_46B490((int)v1, 16392, 0, 0);
  return sub_43FE20(15);
}

//----- (004ADAD0) --------------------------------------------------------
int sub_4ADAD0()
{
  int result; // eax
  _DWORD *v1; // esi
  char *v2; // eax
  int v3; // eax
  int v4; // ecx
  unsigned int v5; // ecx
  _DWORD *v6; // esi
  char *v7; // eax
  int v8; // eax
  int v9; // ecx
  unsigned int v10; // ecx
  _DWORD *v11; // esi
  char *v12; // eax
  int v13; // eax
  int v14; // ecx
  unsigned int v15; // ecx
  _DWORD *v16; // eax
  _DWORD *v17; // eax
  int i; // esi
  _DWORD *v19; // eax
  int v20; // eax
  int *v21; // esi
  _DWORD *v22; // eax
  int v23; // kr00_4
  _DWORD *v24; // eax
  char *v25; // [esp-Ch] [ebp-18h]
  char *v26; // [esp-Ch] [ebp-18h]
  char *v27; // [esp-Ch] [ebp-18h]
  char *v28; // [esp-8h] [ebp-14h]
  char *v29; // [esp-8h] [ebp-14h]
  char *v30; // [esp-8h] [ebp-14h]
  int v31; // [esp-8h] [ebp-14h]
  int v32; // [esp+0h] [ebp-Ch]
  int v33; // [esp+4h] [ebp-8h]
  int v34; // [esp+8h] [ebp-4h]

  result = sub_4A0AD0((const char *)&byte_587000[174132], sub_4ADF30);
  *(_DWORD *)&byte_5D4594[1309820] = result;
  if ( result )
  {
    result = sub_4CB590(result);
    if ( result )
    {
      v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 351);
      *(_DWORD *)(v1[100] + 8) = 24;
      *(_DWORD *)(v1[100] + 12) = 20;
      v28 = sub_42F970((const char *)&byte_587000[174144]);
      v25 = sub_42F970((const char *)&byte_587000[174168]);
      v2 = sub_42F970((const char *)&byte_587000[174192]);
      sub_4B5700((int)v1, 0, 0, (int)v2, (int)v25, (int)v28);
      sub_46B490((int)v1, 16395, 0, 0x4000);
      sub_46B490((int)v1, 16394, *(_DWORD *)(*(_DWORD *)&byte_587000[127004] + 4) >> 16, 0);
      *(_DWORD *)&byte_5D4594[1309828] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 361);
      v3 = sub_453070();
      v4 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309828] + 36);
      if ( v3 == 1 )
        v5 = v4 | 4;
      else
        v5 = v4 & 0xFFFFFFFB;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309828] + 36) = v5;
      v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 352);
      *(_DWORD *)(v6[100] + 8) = 24;
      *(_DWORD *)(v6[100] + 12) = 20;
      v29 = sub_42F970((const char *)&byte_587000[174212]);
      v26 = sub_42F970((const char *)&byte_587000[174236]);
      v7 = sub_42F970((const char *)&byte_587000[174260]);
      sub_4B5700((int)v6, 0, 0, (int)v7, (int)v26, (int)v29);
      sub_46B490((int)v6, 16395, 0, 0x4000);
      sub_46B490((int)v6, 16394, *(_DWORD *)(*(_DWORD *)&byte_587000[122852] + 4) >> 16, 0);
      *(_DWORD *)&byte_5D4594[1309836] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 362);
      v8 = sub_44D990();
      v9 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309836] + 36);
      if ( v8 == 1 )
        v10 = v9 | 4;
      else
        v10 = v9 & 0xFFFFFFFB;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309836] + 36) = v10;
      v11 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 353);
      *(_DWORD *)(v11[100] + 8) = 24;
      *(_DWORD *)(v11[100] + 12) = 20;
      v30 = sub_42F970((const char *)&byte_587000[174280]);
      v27 = sub_42F970((const char *)&byte_587000[174304]);
      v12 = sub_42F970((const char *)&byte_587000[174328]);
      sub_4B5700((int)v11, 0, 0, (int)v12, (int)v27, (int)v30);
      sub_46B490((int)v11, 16395, 0, 0x4000);
      sub_46B490((int)v11, 16394, *(_DWORD *)(*(_DWORD *)&byte_587000[93164] + 4) >> 16, 0);
      *(_DWORD *)&byte_5D4594[1309832] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 363);
      v13 = sub_43DC30();
      v14 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309832] + 36);
      if ( v13 == 1 )
        v15 = v14 | 4;
      else
        v15 = v14 & 0xFFFFFFFB;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309832] + 36) = v15;
      sub_43BEB0(&v32, &v34, &v33);
      if ( v34 == 480 )
        v31 = 321;
      else if ( v34 == 576 )
        v31 = 322;
      else
        v31 = 323;
      v16 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], v31);
      sub_46B490((int)v16, 16392, 1, 0);
      if ( g_fullscreen )
        v17 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 333);
      else
        v17 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 334);
      sub_46B490((int)v17, 16392, 1, 0);
      sub_46B490(sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 316), 16394, (draw_gamma - 0.5f) * 50, 0);
      sub_46B490(sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 318), 16394, (log10f(input_sensitivity) + 1.0f) * 50, 0);
      for ( i = 320; i <= 332; ++i )
      {
        v19 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], i);
        if ( v19 && !(v19[9] & 4) )
          sub_46AD80((int)v19, 8);
      }
      *(_DWORD *)&byte_5D4594[1309824] = sub_46C3E0(0, 32, 0, 0, 1, 1, 0);
      v20 = *(_DWORD *)&byte_587000[174072];
      if ( *(int *)&byte_587000[174072] != -1 )
      {
        v21 = (int *)&byte_587000[174080];
        do
        {
          v22 = sub_46C3E0(*(int *)&byte_5D4594[1309824], 0, v20, *(v21 - 1), *v21, v21[1], 0);
          sub_46B340((int)v22, sub_4ADEF0);
          v20 = v21[2];
          v21 += 4;
        }
        while ( v20 != -1 );
      }
      v23 = *(_DWORD *)&byte_5D4594[3805496] - *(_DWORD *)(*(_DWORD *)&byte_5D4594[1309820] + 8);
      sub_46A9B0(*(_DWORD **)&byte_5D4594[1309820], v23 / 2, 0);
      sub_46A9B0(*(_DWORD **)&byte_5D4594[1309824], v23 / 2, 0);
      v24 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1309820], 371);
      sub_46AC00((int)v24, 0);
      sub_46AC00(*(int *)&byte_5D4594[1309820], 1);
      sub_46AC00(*(int *)&byte_5D4594[1309824], 1);
      result = 1;
    }
  }
  return result;
}

//----- (004ADEF0) --------------------------------------------------------
int __cdecl sub_4ADEF0(_DWORD *a1, int a2)
{
  int xLeft; // [esp+4h] [ebp-8h]
  int yTop; // [esp+8h] [ebp-4h]

  sub_46AA60(a1, &xLeft, &yTop);
  sub_49CF10(xLeft, yTop, a1[2], a1[3]);
  return 1;
}

//----- (004ADF30) --------------------------------------------------------
int __cdecl sub_4ADF30(int a1, int a2, int *a3, int a4)
{
  int result; // eax
  int v5; // edi
  int v6; // esi
  void (__cdecl *v7)(_DWORD, int, int, int); // eax
  void (__cdecl *v8)(_DWORD, int, int, int); // eax
  void (__cdecl *v9)(_DWORD, int, int, int); // eax
  void *v10; // ecx
  void (__cdecl *v11)(void *, int, int, int); // eax
  void (__cdecl *v12)(_DWORD, int, int, int); // eax
  int v13; // ecx
  void (__cdecl *v14)(int, int, int, int); // eax
  int v15; // eax
  void (__cdecl *v16)(_DWORD, int, int, int); // eax
  void (__cdecl *v17)(_DWORD, int, int, int); // eax

  switch ( a2 )
  {
    case 16389:
      sub_452D80(920, 100);
      result = 1;
      break;
    case 16391:
      switch ( sub_46B0A0(a3) )
      {
        case 311:
          sub_476700(65, 0);
          break;
        case 312:
          sub_476700(75, 0);
          break;
        case 313:
          sub_476700(85, 0);
          break;
        case 314:
          sub_476700(100, 0);
          break;
        case 341:
          sub_4AD9B0(0);
          sub_445C40();
          sub_4C4260();
          break;
        case 361:
          if ( sub_453070() == 1 )
            sub_453050();
          else
            sub_453060();
          break;
        case 362:
          if ( sub_44D990() == 1 )
            sub_44D960();
          else
            sub_44D970();
          break;
        case 363:
          if ( sub_43DC30() == 1 )
          {
            sub_43DC00();
          }
          else
          {
            sub_43DC10();
            sub_486320(*(_DWORD **)&byte_587000[93164], *(_DWORD *)(*(_DWORD *)&byte_587000[93164] + 4) >> 16);
          }
          break;
        case 371:
          sub_4AD9B0(0);
          break;
        default:
          break;
      }
      sub_452D80(921, 100);
      result = 1;
      break;
    case 16393:
      v5 = sub_46B0A0(a3);
      v6 = sub_46C720();
      switch ( v5 )
      {
        case 351:
          sub_486320(*(_DWORD **)&byte_587000[127004], a4);
          if ( v6 && *(int **)(v6 + 396) == a3 )
            goto LABEL_64;
          if ( a4 )
          {
            if ( sub_453070() )
              goto LABEL_63;
            v13 = *(_DWORD *)&byte_5D4594[1309828];
            v14 = *(void (__cdecl **)(int, int, int, int))(*(_DWORD *)&byte_5D4594[1309828] + 372);
            if ( !v14 )
              goto LABEL_63;
            goto LABEL_62;
          }
          if ( sub_453070() != 1 )
            goto LABEL_64;
          v12 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309828] + 372);
          if ( !v12 )
            goto LABEL_64;
          v12(*(_DWORD *)&byte_5D4594[1309828], 21, 28, 2);
          result = 0;
          break;
        case 352:
          sub_486320(*(_DWORD **)&byte_587000[122852], a4);
          if ( a4 )
          {
            if ( sub_44D990() )
              goto LABEL_37;
            v10 = *(void **)&byte_5D4594[1309836];
            v11 = *(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)&byte_5D4594[1309836] + 372);
            if ( !v11 )
              goto LABEL_37;
            goto LABEL_36;
          }
          if ( sub_44D990() != 1 )
            goto LABEL_64;
          v9 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309836] + 372);
          if ( !v9 )
            goto LABEL_64;
          v9(*(_DWORD *)&byte_5D4594[1309836], 21, 28, 2);
          result = 0;
          break;
        case 353:
          sub_486320(*(_DWORD **)&byte_587000[93164], a4);
          if ( a4 )
          {
            if ( sub_43DC30() )
              goto LABEL_64;
            v8 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309832] + 372);
            if ( !v8 )
              goto LABEL_64;
            v8(*(_DWORD *)&byte_5D4594[1309832], 21, 28, 2);
            result = 0;
          }
          else
          {
            if ( sub_43DC30() != 1 )
              goto LABEL_64;
            v7 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309832] + 372);
            if ( !v7 )
              goto LABEL_64;
            v7(*(_DWORD *)&byte_5D4594[1309832], 21, 28, 2);
            result = 0;
          }
          break;
        case 316: // gamma slider
          draw_gamma = 0.5 + a4 / 50.0f;
          break; 
        case 318: // input sensitivity slider
          input_sensitivity = powf(10.0, a4 / 50.0f - 1.0);
          break;
        default:
          goto LABEL_64;
      }
      break;
    case 16396:
      v15 = sub_46B0A0(a3) - 351;
      if ( v15 )
      {
        if ( v15 != 1 )
          goto LABEL_64;
        sub_486320(*(_DWORD **)&byte_587000[122852], a4);
        if ( a4 )
        {
          if ( !sub_44D990() )
          {
            v10 = *(void **)&byte_5D4594[1309836];
            v11 = *(void (__cdecl **)(void *, int, int, int))(*(_DWORD *)&byte_5D4594[1309836] + 372);
            if ( v11 )
LABEL_36:
              v11(v10, 21, 28, 2);
          }
LABEL_37:
          sub_4AA650();
          result = 0;
        }
        else
        {
          if ( sub_44D990() != 1 )
            goto LABEL_64;
          v16 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309836] + 372);
          if ( !v16 )
            goto LABEL_64;
          v16(*(_DWORD *)&byte_5D4594[1309836], 21, 28, 2);
          result = 0;
        }
      }
      else
      {
        sub_486320(*(_DWORD **)&byte_587000[127004], a4);
        if ( a4 )
        {
          if ( !sub_453070() )
          {
            v13 = *(_DWORD *)&byte_5D4594[1309828];
            v14 = *(void (__cdecl **)(int, int, int, int))(*(_DWORD *)&byte_5D4594[1309828] + 372);
            if ( v14 )
LABEL_62:
              v14(v13, 21, 28, 2);
          }
LABEL_63:
          sub_452D80(768, 100);
          goto LABEL_64;
        }
        if ( sub_453070() != 1 )
          goto LABEL_64;
        v17 = *(void (__cdecl **)(_DWORD, int, int, int))(*(_DWORD *)&byte_5D4594[1309828] + 372);
        if ( !v17 )
          goto LABEL_64;
        v17(*(_DWORD *)&byte_5D4594[1309828], 21, 28, 2);
        result = 0;
      }
      break;
    default:
LABEL_64:
      result = 0;
      break;
  }
  return result;
}
// 4AE184: variable 'v10' is possibly undefined

//----- (004AE3B0) --------------------------------------------------------
int sub_4AE3B0()
{
  int result; // eax

  result = sub_46C4E0(*(_DWORD **)&byte_5D4594[1309820]);
  *(_DWORD *)&byte_5D4594[1309820] = 0;
  return result;
}

//----- (004AE3D0) --------------------------------------------------------
BOOL sub_4AE3D0()
{
  BOOL result; // eax

  if ( sub_46ACC0(*(int *)&byte_5D4594[1309820]) )
    result = sub_4C4280();
  else
    result = 1;
  return result;
}

//----- (004AE400) --------------------------------------------------------
int sub_4AE400()
{
  return 1;
}

//----- (004AE420) --------------------------------------------------------
int sub_4AE420()
{
  int result; // eax

  if ( *(_DWORD *)&byte_5D4594[3798692] >= 3 )
    sub_49F500(
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798696] + 8 * *(_DWORD *)&byte_5D4594[3798692] - 24),
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798696] + 8 * *(_DWORD *)&byte_5D4594[3798692] - 20));
  result = (*(int (__cdecl **)(_DWORD))&byte_5D4594[3798716])(1);
  if ( result )
  {
    result = (*(int (__cdecl **)(_DWORD))&byte_5D4594[3798716])(1);
    if ( result )
      result = (*(int (__cdecl **)(_DWORD))&byte_5D4594[3798716])(0);
  }
  return result;
}

//----- (004AE470) --------------------------------------------------------
int sub_4AE470()
{
  int result; // eax
  int v1; // edx
  unsigned __int16 *v2; // eax
  unsigned __int16 *v3; // ecx

  sub_4AEBD0();
  if ( *(_DWORD *)&byte_5D4594[3798692] >= 3 )
    sub_49F500(
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798696] + 8 * *(_DWORD *)&byte_5D4594[3798692] - 24),
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798696] + 8 * *(_DWORD *)&byte_5D4594[3798692] - 20));
  result = sub_4AEC20(1, 0);
  if ( result )
  {
    result = sub_4AEC20(1, 0);
    if ( result )
    {
      result = sub_4AEC20(0, 1);
      if ( result )
      {
        v1 = *(_DWORD *)&byte_5D4594[3798636];
        for ( result = *(_DWORD *)&byte_5D4594[3798640];
              v1 <= *(int *)&byte_5D4594[3798640];
              *(_DWORD *)&byte_5D4594[3798636] = v1 )
        {
          v2 = *(unsigned __int16 **)(*(_DWORD *)&byte_5D4594[3798632] + 4 * v1);
          v3 = (unsigned __int16 *)*((_DWORD *)v2 + 1);
          if ( *((_DWORD *)v3 + 1) )
          {
            (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD))&byte_5D4594[3798720])(*v2, v1, *v3);
            v1 = *(_DWORD *)&byte_5D4594[3798636];
          }
          result = *(_DWORD *)&byte_5D4594[3798640];
          ++v1;
        }
      }
    }
  }
  return result;
}

//----- (004AE520) --------------------------------------------------------
int sub_4AE520()
{
  int result; // eax

  result = sub_4AEDF0();
  if ( result )
  {
    sub_4AEE30();
    result = 1;
  }
  return result;
}

//----- (004AE540) --------------------------------------------------------
LPVOID sub_4AE540()
{
  LPVOID result; // eax

  if ( *(_DWORD *)&byte_5D4594[3798632] )
  {
    free(*(LPVOID *)&byte_5D4594[3798632]);
    *(_DWORD *)&byte_5D4594[3798632] = 0;
  }
  result = *(LPVOID *)&byte_5D4594[3798644];
  if ( *(_DWORD *)&byte_5D4594[3798644] )
  {
    free(*(LPVOID *)&byte_5D4594[3798644]);
    *(_DWORD *)&byte_5D4594[3798644] = 0;
  }
  return result;
}

//----- (004AE580) --------------------------------------------------------
int __cdecl sub_4AE580(int a1)
{
  if ( *(_DWORD *)&byte_5D4594[3798692] >= a1 )
    sub_49F500(
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798696] + 8 * (*(_DWORD *)&byte_5D4594[3798692] - a1)),
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798696] + 8 * (*(_DWORD *)&byte_5D4594[3798692] - a1) + 4));
  return sub_49E510(a1);
}

//----- (004AE5C0) --------------------------------------------------------
int __cdecl sub_4AE5C0(int a1)
{
  int v1; // edx
  int result; // eax
  int v3; // edi
  int v4; // eax
  char *v5; // ecx
  char *v6; // esi
  unsigned int v7; // edi
  unsigned __int16 v8; // ax
  unsigned __int16 v9; // cx
  char v10[16]; // [esp+0h] [ebp-10h]

  sub_4AE5E0(a1, 1);
  v1 = *(_DWORD *)&byte_5D4594[3798636];
  for ( result = *(_DWORD *)&byte_5D4594[3798640];
        v1 <= *(int *)&byte_5D4594[3798640];
        *(_DWORD *)&byte_5D4594[3798636] = v1 )
  {
    v3 = 0;
    v4 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798632] + 4 * v1);
    if ( v4 )
    {
      v5 = v10;
      do
      {
        ++v3;
        *(_WORD *)v5 = *(_WORD *)v4;
        v4 = *(_DWORD *)(v4 + 4);
        v5 += 2;
      }
      while ( v4 );
      if ( v3 >= 2 )
      {
        sub_48C5B0((__int16 *)v10, v3);
        v6 = v10;
        v7 = (unsigned int)v3 >> 1;
        do
        {
          v8 = *(_WORD *)v6;
          v9 = *((_WORD *)v6 + 1);
          v6 += 4;
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD))&byte_5D4594[3798720])(v8, *(_DWORD *)&byte_5D4594[3798636], v9);
          --v7;
        }
        while ( v7 );
        v1 = *(_DWORD *)&byte_5D4594[3798636];
      }
    }
    result = *(_DWORD *)&byte_5D4594[3798640];
    ++v1;
  }
  return result;
}

//----- (004AE5E0) --------------------------------------------------------
BOOL __cdecl sub_4AE5E0(int a1, int a2)
{
  int v2; // esi

  v2 = a1;
  if ( *(_DWORD *)&byte_5D4594[3798692] >= a1 )
    sub_49F500(
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798696] + 8 * (*(_DWORD *)&byte_5D4594[3798692] - a1)),
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798696] + 8 * (*(_DWORD *)&byte_5D4594[3798692] - a1) + 4));
  if ( a2 )
    sub_4AEBD0();
  if ( a1 <= 1 )
    return sub_4AEC20(0, 1) != 0;
  while ( sub_4AEC20(1, 0) )
  {
    if ( --v2 <= 1 )
      return sub_4AEC20(0, 1) != 0;
  }
  return 0;
}

//----- (004AE6F0) --------------------------------------------------------
int __cdecl sub_4AE6F0(int a1, int a2, int a3, int a4, int a5)
{
  int result; // eax
  int v6; // ecx
  int v7; // ebp
  int v8; // edi
  int v9; // ebx
  void (__cdecl *v10)(int, int, int); // edi
  int v11; // ebp
  int v12; // edx
  int v13; // esi
  unsigned __int16 *v14; // ebx
  unsigned __int16 *v15; // ecx
  unsigned __int16 v16; // ax
  unsigned __int16 *v17; // ebx
  unsigned __int16 *v18; // ecx
  unsigned __int16 v19; // ax
  unsigned __int16 *v20; // ebx
  unsigned __int16 *v21; // ecx
  unsigned __int16 v22; // ax
  int v23; // eax
  unsigned __int16 *v24; // ebx
  unsigned __int16 *v25; // ecx
  unsigned __int16 v26; // ax
  bool v27; // cc
  int v28; // [esp-14h] [ebp-38h]
  int v29; // [esp-10h] [ebp-34h]
  int v30; // [esp+4h] [ebp-20h]
  int v31; // [esp+8h] [ebp-1Ch]
  int v32; // [esp+Ch] [ebp-18h]
  int v33; // [esp+10h] [ebp-14h]
  int v34; // [esp+14h] [ebp-10h]
  int v35; // [esp+18h] [ebp-Ch]
  int v36; // [esp+1Ch] [ebp-8h]
  int v37; // [esp+20h] [ebp-4h]
  int v38; // [esp+2Ch] [ebp+8h]
  int v39; // [esp+30h] [ebp+Ch]
  int v40; // [esp+34h] [ebp+10h]
  int v41; // [esp+38h] [ebp+14h]

  v31 = 1 - a3;
  v35 = 0;
  v37 = a3;
  v34 = 3;
  v32 = 5 - 2 * a3;
  result = sub_434460(a5);
  v6 = a4;
  if ( a4 < 0 )
  {
    v6 = 0;
LABEL_4:
    v7 = (a3 * *(int *)&byte_5D4594[4 * (256 - v6) + 1310096]) >> 16;
    v30 = (a3 * *(int *)&byte_5D4594[4 * (256 - v6) + 1310096]) >> 16;
    v8 = (a3 * *(int *)&byte_5D4594[4 * (256 - v6) + 1309840]) >> 16;
    sub_4AEBD0();
    v9 = a2;
    v41 = a2 - a3;
    sub_49F500(a1, a2 - a3);
    sub_49F500(a1, a2);
    sub_4AEC20(0, 0);
    sub_49F500(a1, a2);
    sub_49F500(a1 + v7, a2 + v8);
    sub_4AEC20(0, 1);
    v10 = *(void (__cdecl **)(int, int, int))&byte_5D4594[3798708];
    if ( !*(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 52) )
      v10 = *(void (__cdecl **)(int, int, int))&byte_5D4594[3798720];
    v11 = a2 + a3;
    v12 = a2 - a3;
    v38 = 0;
    v39 = v9;
    v40 = v9;
    v36 = 4 * v9;
    v33 = 4 * v41;
    v13 = a1 - v9;
    while ( 1 )
    {
      if ( v38 )
      {
        if ( v12 < *(int *)&byte_5D4594[3798636] || v12 > *(int *)&byte_5D4594[3798640] )
        {
          if ( v30 <= 0 )
            v10(v13 + v40, v12, v13 + v39);
        }
        else
        {
          v14 = *(unsigned __int16 **)(v33 + *(_DWORD *)&byte_5D4594[3798632]);
          v15 = (unsigned __int16 *)*((_DWORD *)v14 + 1);
          if ( v15 )
          {
            if ( *v14 > *v15 )
            {
              v16 = *v14;
              *v14 = *v15;
              *v15 = v16;
            }
            if ( v30 > 0 )
            {
              v10(*v14, v41, **((unsigned __int16 **)v14 + 1));
            }
            else
            {
              v10(v13 + v40, v41, *v14);
              v10(**((unsigned __int16 **)v14 + 1), v41, v13 + v39);
            }
          }
          else
          {
            v10(*v14, v12, v13 + v39);
          }
        }
      }
      if ( v35 )
      {
        if ( v40 < *(int *)&byte_5D4594[3798636] || v40 >= *(int *)&byte_5D4594[3798640] )
        {
          if ( v30 <= 0 )
            v10(v13 + v41, v40, v13 + v11);
        }
        else
        {
          v17 = *(unsigned __int16 **)(v36 + *(_DWORD *)&byte_5D4594[3798632]);
          v18 = (unsigned __int16 *)*((_DWORD *)v17 + 1);
          if ( v18 )
          {
            if ( *v17 > *v18 )
            {
              v19 = *v17;
              *v17 = *v18;
              *v18 = v19;
            }
            if ( v30 > 0 )
            {
              v10(*v17, v40, **((unsigned __int16 **)v17 + 1));
            }
            else
            {
              v10(v13 + v41, v40, *v17);
              v10(**((unsigned __int16 **)v17 + 1), v40, v13 + v11);
            }
          }
          else
          {
            v10(*v17, v40, v13 + v11);
          }
        }
      }
      if ( v39 >= *(int *)&byte_5D4594[3798636] && v39 < *(int *)&byte_5D4594[3798640] )
        break;
      if ( v30 <= 0 )
      {
        v29 = v13 + v11;
        v28 = v39;
        v23 = v13 + v41;
LABEL_42:
        v10(v23, v28, v29);
      }
LABEL_43:
      if ( v38 )
      {
        if ( v11 < *(int *)&byte_5D4594[3798636] || v11 > *(int *)&byte_5D4594[3798640] )
        {
          if ( v30 <= 0 )
            v10(v13 + v40, v11, v13 + v39);
        }
        else
        {
          v24 = *(unsigned __int16 **)(*(_DWORD *)&byte_5D4594[3798632] + 4 * v11);
          v25 = (unsigned __int16 *)*((_DWORD *)v24 + 1);
          if ( v25 )
          {
            if ( *v24 > *v25 )
            {
              v26 = *v24;
              *v24 = *v25;
              *v25 = v26;
            }
            if ( v30 > 0 )
            {
              v10(*v24, v11, **((unsigned __int16 **)v24 + 1));
            }
            else
            {
              v10(v13 + v40, v11, *v24);
              v10(**((unsigned __int16 **)v24 + 1), v11, v13 + v39);
            }
          }
          else
          {
            v10(*v24, v11, v13 + v39);
          }
        }
      }
      if ( (int)v31 >= 0 )
      {
        v31 += v32;
        v33 += 4;
        v12 = v41 + 1;
        v32 += 4;
        v38 = 1;
        --v37;
        ++v41;
        --v11;
      }
      else
      {
        v31 += v34;
        v12 = v41;
        v32 += 2;
        v38 = 0;
      }
      v34 += 2;
      result = v35 + 1;
      ++v39;
      v36 -= 4;
      v27 = v37 < ++v35;
      --v40;
      if ( v27 )
        return result;
    }
    v20 = *(unsigned __int16 **)(*(_DWORD *)&byte_5D4594[3798632] + 4 * v39);
    v21 = (unsigned __int16 *)*((_DWORD *)v20 + 1);
    if ( v21 )
    {
      if ( *v20 > *v21 )
      {
        v22 = *v20;
        *v20 = *v21;
        *v21 = v22;
      }
      if ( v30 > 0 )
      {
        v10(*v20, v39, **((unsigned __int16 **)v20 + 1));
      }
      else
      {
        v10(v13 + v41, v39, *v20);
        v10(**((unsigned __int16 **)v20 + 1), v39, v13 + v11);
      }
      goto LABEL_43;
    }
    v29 = v13 + v11;
    v28 = v39;
    v23 = *v20;
    goto LABEL_42;
  }
  if ( a4 < 256 )
    goto LABEL_4;
  return result;
}

//----- (004AEBD0) --------------------------------------------------------
int sub_4AEBD0()
{
  int v0; // eax
  int result; // eax

  *(_DWORD *)&byte_5D4594[3798648] = *(_DWORD *)&byte_5D4594[3798644];
  v0 = 0;
  *(_DWORD *)&byte_5D4594[3798640] = 0;
  for ( *(_DWORD *)&byte_5D4594[3798636] = 0;
        *(_DWORD *)&byte_5D4594[3798636] < *(int *)&byte_5D4594[3801788];
        ++*(_DWORD *)&byte_5D4594[3798636] )
  {
    *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798632] + 4 * v0) = 0;
    v0 = *(_DWORD *)&byte_5D4594[3798636] + 1;
  }
  result = v0 - 1;
  *(_DWORD *)&byte_5D4594[3798636] = result;
  return result;
}

//----- (004AEC20) --------------------------------------------------------
int __cdecl sub_4AEC20(int a1, int a2)
{
  int result; // eax
  int v3; // eax
  int v4; // ecx
  int v5; // eax
  int v6; // ebx
  int v7; // esi
  int v8; // edi
  int v9; // edx
  int v10; // [esp+0h] [ebp-10h]
  int v11; // [esp+4h] [ebp-Ch]
  int v12; // [esp+8h] [ebp-8h]
  int v13; // [esp+Ch] [ebp-4h]

  result = sub_49F5B0(&v12, &v13, 0);
  if ( result )
  {
    result = sub_49F5B0(&v10, &v11, a1);
    if ( result )
    {
      if ( sub_49FC20(&v10, &v11, &v12, &v13) )
      {
        v3 = v12 - v10;
        v10 <<= 16;
        v4 = v11;
        v5 = v3 << 16;
        if ( v11 > v13 )
        {
          v6 = -1;
          v7 = v11 - v13;
          v5 /= v11 - v13;
          if ( v13 < *(int *)&byte_5D4594[3798636] )
            *(_DWORD *)&byte_5D4594[3798636] = v13;
          if ( v11 > *(int *)&byte_5D4594[3798640] )
            *(_DWORD *)&byte_5D4594[3798640] = v11;
        }
        else
        {
          v6 = 1;
          v7 = v13 - v11;
          if ( v13 != v11 )
            v5 /= v7;
          if ( v11 < *(int *)&byte_5D4594[3798636] )
            *(_DWORD *)&byte_5D4594[3798636] = v11;
          if ( v13 > *(int *)&byte_5D4594[3798640] )
            *(_DWORD *)&byte_5D4594[3798640] = v13;
        }
        if ( v7 > 0 )
        {
          do
          {
            v8 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798632] + 4 * v4);
            *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798632] + 4 * v4) = *(_DWORD *)&byte_5D4594[3798648];
            **(_WORD **)&byte_5D4594[3798648] = HIWORD(v10);
            *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798648] + 4) = v8;
            *(_DWORD *)&byte_5D4594[3798648] += 8;
            v4 = v6 + v11;
            --v7;
            v10 += v5;
            v11 += v6;
          }
          while ( v7 );
        }
        if ( a2 )
        {
          v9 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798632] + 4 * v4);
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798632] + 4 * v4) = *(_DWORD *)&byte_5D4594[3798648];
          **(_WORD **)&byte_5D4594[3798648] = v12;
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798648] + 4) = v9;
          *(_DWORD *)&byte_5D4594[3798648] += 8;
        }
        result = 1;
      }
      else
      {
        result = 1;
      }
    }
  }
  return result;
}

//----- (004AEDA0) --------------------------------------------------------
int __cdecl sub_4AEDA0(int *a1, int *a2, int a3, int a4)
{
  int result; // eax

  result = a3;
  if ( a3 >= 0 )
  {
    if ( a3 > 256 )
      result = 256;
  }
  else
  {
    result = 0;
  }
  if ( a1 )
    *a1 = (a4 * *(int *)&byte_5D4594[4 * result + 1310096]) >> 16;
  if ( a2 )
  {
    result = (a4 * *(int *)&byte_5D4594[4 * result + 1309840]) >> 16;
    *a2 = result;
  }
  return result;
}

//----- (004AEDF0) --------------------------------------------------------
void *sub_4AEDF0()
{
  void *result; // eax

  result = malloc(4 * *(_DWORD *)&byte_5D4594[3801788]);
  *(_DWORD *)&byte_5D4594[3798632] = result;
  if ( result )
  {
    *(_DWORD *)&byte_5D4594[3798644] = malloc(*(_DWORD *)&byte_5D4594[3801788] << 6);
    result = (void *)(*(_DWORD *)&byte_5D4594[3798644] != 0);
  }
  return result;
}

//----- (004AEE30) --------------------------------------------------------
__int64 sub_4AEE30()
{
  int v0; // edi
  unsigned __int8 *v1; // esi
  __int64 result; // rax

  v0 = 0;
  v1 = &byte_5D4594[1309840];
  do
  {
    result = (__int64)(sin((double)(v0 + 192) * *(double *)&byte_581450[9768] * *(double *)&byte_581450[9760])
                     * *(double *)&byte_581450[9552]);
    *(_DWORD *)v1 = result;
    v1 += 4;
    ++v0;
  }
  while ( (int)v1 < (int)&byte_5D4594[1311120] );
  return result;
}

//----- (004AEE80) --------------------------------------------------------
int sub_4AEE80()
{
  return 1;
}

//----- (004AEEA0) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4AEEA0(unsigned __int8 **a1)
{
  unsigned __int8 *result; // eax

  sub_4AF8C0(a1);
  result = a1[1];
  if ( result )
  {
    sub_4AF890(a1);
    result = (unsigned __int8 *)sub_4AF690(a1, (void (__cdecl *)(_DWORD *, _DWORD *, int))sub_4AEED0);
  }
  return result;
}

//----- (004AEED0) --------------------------------------------------------
char *__cdecl sub_4AEED0(int *a1, int a2, int a3)
{
  int v3; // eax
  int *v4; // edi
  int v5; // esi
  int v6; // eax
  char *result; // eax
  char *v8; // esi
  int v9; // eax

  sub_433F10(0xFFu, 0x80u, 0x20u);
  v3 = sub_48C5E0(2, 3);
  sub_434080(v3);
  v4 = sub_4B0680(0, 0xFFu);
  v5 = sub_48C5E0(0, 40);
  v6 = sub_48C5E0(0, a1[7]);
  result = sub_4AF990(a2, a3 + v5, v5, v6);
  v8 = result;
  if ( result )
  {
    sub_4AFB00((int)result, (int)v4);
    sub_4AFB10((int)v8, *a1);
    sub_4AFB90((int)v8, 50);
    LOWORD(v9) = sub_48C610();
    sub_4AFBD0((int)v8, v9);
    sub_4AFC50((int)v8, -32768);
    result = (char *)sub_4AFC60((int)v8, 45875, 1);
  }
  return result;
}
// 4AEF5A: variable 'v9' is possibly undefined

//----- (004AEF80) --------------------------------------------------------
int __cdecl sub_4AEF80(int *a1)
{
  int *v1; // edi
  int v2; // ebp
  int v3; // ecx
  int result; // eax
  char *v5; // esi
  int v6; // eax
  int v7; // eax
  int v8; // [esp+8h] [ebp-4h]
  int v9; // [esp+10h] [ebp+4h]

  v1 = a1;
  v2 = *(_DWORD *)(*a1 + 12);
  v8 = *(_DWORD *)(*a1 + 16);
  sub_434430(255, 255, 255);
  v3 = a1[5];
  result = v3 - 1;
  if ( v3 )
  {
    v9 = a1[5];
    do
    {
      v5 = sub_4AF990(v2, v8, 0, 128);
      if ( v5 )
      {
        *((_DWORD *)v5 + 17) = sub_48C5E0(-256, 256);
        *((_DWORD *)v5 + 18) = 0;
        *((_DWORD *)v5 + 19) = 0;
        sub_4AFB10((int)v5, *v1);
        v6 = sub_48C5E0(0, 128);
        sub_4AFB90((int)v5, v6);
        sub_4AFB50((int)v5, 2);
        LOWORD(v7) = sub_48C610();
        sub_4AFBE0((int)v5, -16384 - (v7 >> 2));
        sub_4AFB60((int)v5, sub_4AF060);
      }
      result = --v9;
    }
    while ( v9 );
  }
  return result;
}
// 4AF01E: variable 'v7' is possibly undefined

//----- (004AF060) --------------------------------------------------------
int __cdecl sub_4AF060(int a1)
{
  int result; // eax
  int v2; // edi
  int v3; // ecx
  int v4; // ebx
  int v5; // ebp
  int v6; // ecx
  int v7; // ecx
  int v8; // edx
  int v9; // edx
  int v10; // ecx
  int v11; // esi
  int v12; // ecx

  result = a1;
  v2 = *(_DWORD *)(a1 + 48);
  if ( v2 >= 0 )
  {
    v3 = *(_DWORD *)(a1 + 44);
    ++*(_DWORD *)(a1 + 40);
    if ( v3 )
    {
      *(_DWORD *)(a1 + 44) = v3 - 1;
    }
    else
    {
      v4 = *(_DWORD *)(a1 + 84);
      v5 = *(_DWORD *)(a1 + 96);
      v6 = *(_DWORD *)(a1 + 72);
      if ( (int)*(_DWORD *)(a1 + 68) >= 0 )
        v7 = v6 - 4;
      else
        v7 = v6 + 4;
      v8 = *(_DWORD *)(a1 + 68);
      *(_DWORD *)(a1 + 72) = v7;
      v9 = v7 + v8;
      *(_DWORD *)(a1 + 68) = v9;
      v10 = v9 * *(_DWORD *)(a1 + 76);
      v11 = *(_DWORD *)(a1 + 28);
      *(_DWORD *)(a1 + 76) += 256;
      v12 = (v11 << 16) + (v10 >> 2);
      *(_DWORD *)(a1 + 48) = v2 - 1;
      if ( v2 - 1 >= 0 )
      {
        *(_DWORD *)(a1 + 84) = v4 + v5;
        *(_DWORD *)(a1 + 80) = v12;
      }
      else
      {
        result = (*(int (__cdecl **)(int))(a1 + 132))(a1);
      }
    }
  }
  return result;
}

//----- (004AF0F0) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4AF0F0(unsigned __int8 **a1)
{
  unsigned __int8 **v1; // ebp
  unsigned __int8 *result; // eax
  unsigned __int8 **v3; // ecx
  __int64 v4; // rax
  int v5; // kr00_4
  unsigned __int8 *v6; // ecx
  int v7; // ebx
  int v8; // eax
  int v9; // eax
  char *v10; // eax
  int v11; // esi
  char *v12; // [esp-10h] [ebp-28h]
  int v13; // [esp-8h] [ebp-20h]
  unsigned __int8 *v14; // [esp+Ch] [ebp-Ch]
  int v15; // [esp+10h] [ebp-8h]
  int v16; // [esp+14h] [ebp-4h]

  v1 = a1;
  sub_4AF8C0(a1);
  result = v1[1];
  if ( result )
  {
    sub_4AF890(v1);
    v3 = (unsigned __int8 **)v1[4];
    v14 = v1[3];
    a1 = v3;
    sub_47D5C0((int)v1[1], &v14, &a1, &v15, &v16);
    v4 = v15;
    v5 = v4;
    result = (unsigned __int8 *)(v4 - HIDWORD(v4));
    v6 = v1[5];
    v7 = (int)(v6 - 1);
    if ( v6 )
    {
      do
      {
        if ( v7 & 1 )
          sub_434460(*(int *)&byte_5D4594[2523948]);
        else
          sub_434460(*(int *)&byte_5D4594[2589772]);
        v13 = (int)v1[7];
        v8 = sub_48C5E0(-8, -2);
        v12 = (char *)a1 + v8;
        v9 = sub_48C5E0((int)&v14[v5 / 2], (int)&v14[v15]);
        v10 = sub_4AF990(v9, (int)v12, 0, v13);
        v11 = (int)v10;
        if ( v10 )
        {
          sub_4AFB50((int)v10, 2);
          sub_4AFB10(v11, (int)*v1);
          *(_DWORD *)(v11 + 68) = sub_48C5E0(v5 / -2, v5 / 2);
          *(_DWORD *)(v11 + 72) = 0;
          sub_4AFB60(v11, sub_4AF200);
        }
        result = (unsigned __int8 *)v7--;
      }
      while ( result );
    }
  }
  return result;
}

//----- (004AF200) --------------------------------------------------------
int __cdecl sub_4AF200(int a1)
{
  int result; // eax
  int v2; // esi
  int v3; // ecx
  _DWORD *v4; // ecx
  int v5; // edx
  int v6; // ecx
  int v7; // ecx
  int v8; // edi
  int v9; // edi
  int v10; // edx

  result = a1;
  v2 = *(_DWORD *)(a1 + 48);
  if ( v2 >= 0 )
  {
    v3 = *(_DWORD *)(a1 + 44);
    ++*(_DWORD *)(a1 + 40);
    if ( v3 )
    {
      *(_DWORD *)(a1 + 44) = v3 - 1;
    }
    else
    {
      if ( *(_BYTE *)(a1 + 56) & 4 )
      {
        v4 = *(_DWORD **)(a1 + 8);
        if ( v4 )
        {
          v5 = v4[4] - v4[9];
          *(_DWORD *)(a1 + 28) += v4[3] - v4[8];
          *(_DWORD *)(a1 + 32) += v5;
        }
      }
      v6 = *(_DWORD *)(a1 + 72);
      if ( (int)*(_DWORD *)(a1 + 68) >= 0 )
        v7 = v6 - 1;
      else
        v7 = v6 + 1;
      v8 = *(_DWORD *)(a1 + 68);
      *(_DWORD *)(a1 + 72) = v7;
      v9 = v7 + v8;
      *(_DWORD *)(a1 + 68) = v9;
      *(_DWORD *)(a1 + 48) = v2 - 1;
      if ( v2 - 1 >= 0 )
      {
        v10 = *(_DWORD *)(a1 + 32) << 16;
        *(_DWORD *)(a1 + 80) = (v9 + *(_DWORD *)(a1 + 28)) << 16;
        *(_DWORD *)(a1 + 84) = v10;
      }
      else
      {
        result = (*(int (__cdecl **)(int))(a1 + 132))(a1);
      }
    }
  }
  return result;
}

//----- (004AF2A0) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4AF2A0(unsigned __int8 **a1)
{
  unsigned __int8 *result; // eax

  sub_4AF8C0(a1);
  result = a1[1];
  if ( result )
  {
    sub_4AF890(a1);
    result = (unsigned __int8 *)sub_4AF690(a1, (void (__cdecl *)(_DWORD *, _DWORD *, int))sub_4AF2D0);
  }
  return result;
}

//----- (004AF2D0) --------------------------------------------------------
void __cdecl sub_4AF2D0(int *a1, int a2, int a3)
{
  int v3; // eax
  int *v4; // ebx
  int v5; // eax
  char *v7; // esi
  int v8; // [esp+0h] [ebp-8h]
  int v9; // [esp+4h] [ebp-4h]

  if ( !*(_DWORD *)&byte_5D4594[1311132] )
  {
    *(_DWORD *)&byte_5D4594[1311124] = sub_4344A0(64, 200, 64);
    *(_DWORD *)&byte_5D4594[1311128] = sub_4344A0(64, 64, 255);
    *(_DWORD *)&byte_5D4594[1311132] = 1;
  }
  sub_434040(*(_DWORD *)&byte_5D4594[4 * a1[6] + 1311124]);
  v3 = sub_48C5E0(2, 5);
  sub_434080(v3);
  v4 = sub_4B0680(0, 0xFFu);
  v9 = a2;
  v8 = a3;
  sub_48C650(0, 256, 120, &v9, &v8);
  v5 = sub_48C5E0(1, a1[7]);
  v7 = sub_4AF990(v9, v8, 0, v5);
  if ( v7 )
  {
    sub_4AFE20(v7, *(CHAR **)&byte_5D4594[3798628]);
    sub_4AFB10((int)v7, *a1);
    sub_4AFB00((int)v7, (int)v4);
    sub_4AFC90(v7, a2, a3, 0);
  }
}

//----- (004AF3D0) --------------------------------------------------------
_DWORD *__cdecl sub_4AF3D0(_DWORD *a1)
{
  sub_434430(255, 255, 255);
  return sub_4AF690(a1, (void (__cdecl *)(_DWORD *, _DWORD *, int))sub_4AF400);
}

//----- (004AF400) --------------------------------------------------------
int __cdecl sub_4AF400(int a1, int a2, int a3)
{
  int v3; // eax
  char *v4; // esi
  int v5; // eax
  int v6; // eax

  v3 = sub_48C5E0(0, 100);
  v4 = sub_4AF990(a2, a3, 0, v3);
  sub_4AFB50((int)v4, 1);
  v5 = sub_48C5E0(0, 64);
  sub_4AFB90((int)v4, v5);
  LOWORD(v6) = sub_48C610();
  return sub_4AFBE0((int)v4, v6 - 6553);
}
// 4AF444: variable 'v6' is possibly undefined

//----- (004AF450) --------------------------------------------------------
char *__cdecl sub_4AF450(int *a1)
{
  int *v1; // edi
  char *result; // eax
  char *v3; // esi

  sub_433F10(0x32u, 0x32u, 0x32u);
  sub_434080(10);
  v1 = sub_4B0680(0, 0xFFu);
  result = sub_4AF990(0, 0, 0, 0x7FFFFFFF);
  v3 = result;
  if ( result )
  {
    sub_4AFB10((int)result, *a1);
    sub_4AFB00((int)v3, (int)v1);
    result = (char *)sub_4AFCF0(sub_4AF4C0, (int)v3, 1, a1[7]);
  }
  return result;
}

//----- (004AF4C0) --------------------------------------------------------
int __cdecl sub_4AF4C0(int a1)
{
  int v1; // eax
  int v2; // esi
  int v3; // edi
  int v4; // eax
  char *v5; // eax
  int v6; // esi
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v11; // [esp-Ch] [ebp-18h]

  v1 = *(_DWORD *)(*(_DWORD *)(a1 + 20) + 8);
  v2 = *(_DWORD *)(v1 + 12);
  v3 = *(_DWORD *)(v1 + 16);
  sub_434460(*(int *)&byte_5D4594[2589772]);
  v11 = sub_48C5E0(v3 - 2, v3 + 2);
  v4 = sub_48C5E0(v2 - 2, v2 + 2);
  v5 = sub_4AF990(v4, v11, 2, 10);
  v6 = (int)v5;
  if ( !v5 )
    return 0;
  sub_4AFE20(v5, *(CHAR **)&byte_5D4594[3798628]);
  sub_4AFB00(v6, *(_DWORD *)(*(_DWORD *)(a1 + 20) + 4));
  sub_4AFB50(v6, 1);
  sub_4AFC50(v6, -32768);
  sub_4AFC60(v6, 45875, 1);
  LOWORD(v7) = sub_48C610();
  sub_4AFBD0(v6, v7);
  LOWORD(v8) = sub_48C610();
  sub_4AFBE0(v6, v8);
  LOWORD(v9) = sub_48C610();
  sub_4AFBF0(v6, v9);
  return 1;
}
// 4AF55B: variable 'v7' is possibly undefined
// 4AF56E: variable 'v8' is possibly undefined
// 4AF57E: variable 'v9' is possibly undefined

//----- (004AF5A0) --------------------------------------------------------
char *__cdecl sub_4AF5A0(int *a1)
{
  char *result; // eax
  char *v2; // esi

  result = sub_4AF990(0, 0, 0, 0x7FFFFFFF);
  v2 = result;
  if ( result )
  {
    sub_4AFB40((int)result, a1[2]);
    sub_4AFB10((int)v2, *a1);
    sub_4AFB60((int)v2, 0);
    sub_4AFB70((int)v2, 0);
    result = (char *)sub_4AFCF0(sub_4AF600, (int)v2, 1, 500);
  }
  return result;
}

int __cdecl sub_4AF650(int *a1)
{
  sub_434560(1);
  sub_434580(255 * a1[12] / a1[13]);
  sub_4AFEB0(a1);
  return sub_434560(0);
}

//----- (004AF600) --------------------------------------------------------
int __cdecl sub_4AF600(int a1)
{
  char *v1; // esi

  v1 = sub_4AF990(0, 0, 0, 5);
  if ( !v1 )
    return 0;
  sub_4AFB40((int)v1, *(_DWORD *)(*(_DWORD *)(a1 + 20) + 16));
  sub_4AFB10((int)v1, *(_DWORD *)(*(_DWORD *)(a1 + 20) + 12));
  sub_4AFB70((int)v1, sub_4AF650);
  return 1;
}

//----- (004AF690) --------------------------------------------------------
_DWORD *__cdecl sub_4AF690(_DWORD *a1, void (__cdecl *a2)(_DWORD *, _DWORD *, int))
{
  _DWORD *result; // eax
  int v3; // edx
  int v4; // ebx
  int *v5; // edi
  int v6; // ebp
  int v7; // edi
  int v8; // esi
  int v9; // ebp
  _BYTE *v10; // ecx
  int v11; // ebx
  int v12; // eax
  int v13; // edx
  int v14; // esi
  _BYTE *v15; // ecx
  void (__cdecl *v16)(_DWORD *, _DWORD *, int); // ebx
  _DWORD *v17; // edi
  int v18; // edx
  int v19; // eax
  _DWORD *v20; // [esp+10h] [ebp-20h]
  int v21; // [esp+10h] [ebp-20h]
  int v22; // [esp+14h] [ebp-1Ch]
  int v23; // [esp+18h] [ebp-18h]
  int v24; // [esp+18h] [ebp-18h]
  int v25; // [esp+18h] [ebp-18h]
  int v26; // [esp+1Ch] [ebp-14h]
  int v27; // [esp+20h] [ebp-10h]
  int v28; // [esp+20h] [ebp-10h]
  _DWORD *v29; // [esp+24h] [ebp-Ch]
  int v30; // [esp+28h] [ebp-8h]
  int v31; // [esp+2Ch] [ebp-4h]
  _BYTE *v32; // [esp+38h] [ebp+8h]

  result = (_DWORD *)(*(int (__cdecl **)(_DWORD))&byte_5D4594[3799492])(a1[1]);
  if ( result )
  {
    v3 = *result;
    v4 = result[1];
    v5 = result + 3;
    result = (_DWORD *)(result[2] + a1[3]);
    v22 = a1[5];
    v30 = v3;
    v6 = *v5;
    v7 = (int)v5 + 5;
    v8 = v6 + a1[4];
    v9 = 0;
    v27 = v4;
    v29 = result;
    v10 = (_BYTE *)v7;
    if ( v4 )
    {
      v23 = v4;
      do
      {
        v20 = result;
        v11 = v3;
        if ( v3 > 0 )
        {
          do
          {
            v12 = (unsigned __int8)v10[1];
            v13 = *v10 & 0xF;
            v10 += 2;
            switch ( v13 )
            {
              case 1:
                v20 = (_DWORD *)((char *)v20 + v12);
                break;
              case 2:
              case 5:
              case 6:
                v9 += v12;
                v10 += 2 * v12;
                break;
              case 4:
                v9 += v12;
                v10 += v12;
                break;
              default:
                break;
            }
            v11 -= v12;
          }
          while ( v11 > 0 );
          result = v29;
          v3 = v30;
        }
        --v23;
      }
      while ( v23 );
      v4 = v27;
    }
    v21 = v8;
    v14 = a1[5];
    v15 = (_BYTE *)v7;
    if ( v4 )
    {
      v31 = v4;
      v16 = a2;
      do
      {
        v17 = result;
        v28 = v3;
        if ( v3 > 0 )
        {
          do
          {
            v18 = (unsigned __int8)v15[1];
            v19 = *v15 & 0xF;
            v15 += 2;
            v26 = v18;
            v32 = v15;
            switch ( v19 )
            {
              case 1:
                v17 = (_DWORD *)((char *)v17 + v18);
                break;
              case 2:
              case 5:
              case 6:
                if ( v18 > 0 )
                {
                  v25 = v18;
                  do
                  {
                    v14 += v22;
                    if ( v14 >= v9 )
                    {
                      v14 -= v9;
                      if ( v16 )
                      {
                        v16(a1, v17, v21);
                        v15 = v32;
                        v18 = v26;
                      }
                    }
                    v17 = (_DWORD *)((char *)v17 + 1);
                    --v25;
                  }
                  while ( v25 );
                }
                v15 += 2 * v18;
                break;
              case 4:
                if ( v18 > 0 )
                {
                  v24 = v18;
                  do
                  {
                    v14 += v22;
                    if ( v14 >= v9 )
                    {
                      v14 -= v9;
                      if ( v16 )
                      {
                        v16(a1, v17, v21);
                        v15 = v32;
                        v18 = v26;
                      }
                    }
                    v17 = (_DWORD *)((char *)v17 + 1);
                    --v24;
                  }
                  while ( v24 );
                }
                v15 += v18;
                break;
              default:
                break;
            }
            v28 -= v18;
          }
          while ( v28 > 0 );
          result = v29;
          v3 = v30;
        }
        ++v21;
        --v31;
      }
      while ( v31 );
    }
  }
  return result;
}

//----- (004AF890) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4AF890(unsigned __int8 **a1)
{
  unsigned __int8 *result; // eax

  result = *a1;
  a1[3] = (unsigned __int8 *)(*((_DWORD *)*a1 + 3) - **a1);
  a1[4] = (unsigned __int8 *)(*((_DWORD *)result + 4) - *((__int16 *)result + 53) - *((__int16 *)result + 52) - result[1]);
  return result;
}

//----- (004AF8C0) --------------------------------------------------------
int __cdecl sub_4AF8C0(_DWORD *a1)
{
  int result; // eax

  result = *(_DWORD *)(*a1 + 8);
  a1[1] = result;
  return result;
}

//----- (004AF8D0) --------------------------------------------------------
int sub_4AF8D0()
{
  unsigned __int8 *v1; // eax

  *(_DWORD *)&byte_5D4594[3798628] = &byte_587000[174348];
  *(_DWORD *)&byte_5D4594[1311148] = 512;
  *(_DWORD *)&byte_5D4594[1311140] = calloc(0x200u, 0x88u);
  if ( !*(_DWORD *)&byte_5D4594[1311140] )
    return 0;
  *(_DWORD *)&byte_5D4594[1311144] = calloc(0x200u, 1u);
  if ( !*(_DWORD *)&byte_5D4594[1311144] )
    return 0;
  v1 = &byte_5D4594[1311160];
  do
  {
    *((_DWORD *)v1 - 1) = 0;
    *(_DWORD *)v1 = 0;
    *((_DWORD *)v1 + 1) = 0;
    *((_DWORD *)v1 + 2) = 0;
    v1 += 24;
  }
  while ( (int)v1 < (int)&byte_5D4594[1311928] );
  return 1;
}

//----- (004AF950) --------------------------------------------------------
LPVOID sub_4AF950()
{
  LPVOID result; // eax

  if ( *(_DWORD *)&byte_5D4594[1311140] )
  {
    free(*(LPVOID *)&byte_5D4594[1311140]);
    *(_DWORD *)&byte_5D4594[1311140] = 0;
  }
  result = *(LPVOID *)&byte_5D4594[1311144];
  if ( *(_DWORD *)&byte_5D4594[1311144] )
  {
    free(*(LPVOID *)&byte_5D4594[1311144]);
    *(_DWORD *)&byte_5D4594[1311144] = 0;
  }
  *(_DWORD *)&byte_5D4594[1311148] = 0;
  return result;
}

//----- (004AF990) --------------------------------------------------------
char *__cdecl sub_4AF990(int a1, int a2, int a3, int a4)
{
  char *result; // eax

  result = sub_4B01B0();
  if ( result )
  {
    *(_DWORD *)result = 0;
    *((_DWORD *)result + 1) = 0;
    *((_DWORD *)result + 4) = 0;
    *((_DWORD *)result + 3) = 0;
    *((_DWORD *)result + 5) = 0;
    *((_DWORD *)result + 6) = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
    *((_DWORD *)result + 7) = a1;
    *((_DWORD *)result + 8) = a2;
    *((_DWORD *)result + 9) = a3;
    *((_DWORD *)result + 22) = a3 << 16;
    *((_DWORD *)result + 21) = a2 << 16;
    *((_DWORD *)result + 12) = a4;
    *((_DWORD *)result + 13) = a4;
    *((_DWORD *)result + 10) = 0;
    *((_DWORD *)result + 11) = 0;
    *((_DWORD *)result + 14) = 0;
    *((_DWORD *)result + 20) = a1 << 16;
    *((_DWORD *)result + 23) = 0;
    *((_DWORD *)result + 24) = 0;
    *((_DWORD *)result + 25) = 0;
    *((_DWORD *)result + 26) = 0;
    *((_DWORD *)result + 27) = 0;
    *((_DWORD *)result + 28) = 0;
    *((_DWORD *)result + 29) = 0;
    *((_DWORD *)result + 30) = 0;
    *((_DWORD *)result + 16) = 0;
    *((_DWORD *)result + 32) = sub_4B0020;
    *((_DWORD *)result + 31) = sub_4AFEB0;
    *((_DWORD *)result + 33) = sub_4B01A0;
  }
  return result;
}

//----- (004AFA40) --------------------------------------------------------
void __cdecl sub_4AFA40(int a1)
{
  int v1; // eax
  _DWORD *v2; // eax

  if ( a1 )
  {
    v1 = *(_DWORD *)(a1 + 60);
    if ( v1 >= 0 && v1 < *(int *)&byte_5D4594[1311148] )
    {
      *(_BYTE *)(*(_DWORD *)&byte_5D4594[1311144] + v1) = 0;
      v2 = *(_DWORD **)(a1 + 20);
      if ( v2 )
        *v2 = 0;
    }
  }
}

//----- (004AFA70) --------------------------------------------------------
char *__cdecl sub_4AFA70(int a1)
{
  char *result; // eax
  char *i; // edi
  int v3; // esi

  result = (char *)memchr(*(const void **)&byte_5D4594[1311144], 255, *(size_t *)&byte_5D4594[1311148]);
  for ( i = result; result; i = result )
  {
    v3 = (int)&i[-*(_DWORD *)&byte_5D4594[1311144]];
    if ( *(_DWORD *)(*(_DWORD *)&byte_5D4594[1311140] + 136 * (_DWORD)&i[-*(_DWORD *)&byte_5D4594[1311144]] + 8) == a1 )
      sub_4AFA40(*(_DWORD *)&byte_5D4594[1311140] + 136 * (_DWORD)&i[-*(_DWORD *)&byte_5D4594[1311144]]);
    result = (char *)(*(_DWORD *)&byte_5D4594[1311148] - v3 - 1);
    if ( *(_DWORD *)&byte_5D4594[1311148] - v3 == 1 )
      break;
    result = (char *)memchr(i + 1, 255, *(_DWORD *)&byte_5D4594[1311148] - v3 - 1);
  }
  return result;
}

//----- (004AFAF0) --------------------------------------------------------
int __cdecl sub_4AFAF0(_DWORD *a1, int a2)
{
  int result; // eax

  result = a2;
  *a1 = a2;
  return result;
}

//----- (004AFB00) --------------------------------------------------------
int __cdecl sub_4AFB00(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 4) = a2;
  return result;
}

//----- (004AFB10) --------------------------------------------------------
int __cdecl sub_4AFB10(int a1, int a2)
{
  int result; // eax
  int v3; // edx
  unsigned int v4; // edx

  result = a1;
  v3 = *(_DWORD *)(a1 + 56);
  if ( a2 )
  {
    v4 = v3 | 4;
    *(_DWORD *)(a1 + 8) = a2;
  }
  else
  {
    v4 = v3 & 0xFFFFFFFB;
    *(_DWORD *)(a1 + 8) = 0;
  }
  *(_DWORD *)(a1 + 56) = v4;
  return result;
}

//----- (004AFB40) --------------------------------------------------------
int __cdecl sub_4AFB40(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 16) = a2;
  return result;
}

//----- (004AFB50) --------------------------------------------------------
int __cdecl sub_4AFB50(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 64) = a2;
  return result;
}

//----- (004AFB60) --------------------------------------------------------
int __cdecl sub_4AFB60(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 128) = a2;
  return result;
}

//----- (004AFB70) --------------------------------------------------------
int __cdecl sub_4AFB70(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 124) = a2;
  return result;
}

//----- (004AFB80) --------------------------------------------------------
int __cdecl sub_4AFB80(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 132) = a2;
  return result;
}

//----- (004AFB90) --------------------------------------------------------
int __cdecl sub_4AFB90(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 44) = a2;
  return result;
}

//----- (004AFBA0) --------------------------------------------------------
int __cdecl sub_4AFBA0(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 48) = a2;
  *(_DWORD *)(a1 + 52) = a2;
  return result;
}

//----- (004AFBB0) --------------------------------------------------------
_DWORD *__cdecl sub_4AFBB0(_DWORD *a1, int a2, int a3, int a4)
{
  _DWORD *result; // eax

  result = a1;
  a1[23] = a2;
  a1[24] = a3;
  a1[25] = a4;
  return result;
}

//----- (004AFBD0) --------------------------------------------------------
int __cdecl sub_4AFBD0(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 92) = a2;
  return result;
}

//----- (004AFBE0) --------------------------------------------------------
int __cdecl sub_4AFBE0(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 96) = a2;
  return result;
}

//----- (004AFBF0) --------------------------------------------------------
int __cdecl sub_4AFBF0(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 100) = a2;
  return result;
}

//----- (004AFC00) --------------------------------------------------------
_DWORD *__cdecl sub_4AFC00(_DWORD *a1, int a2, int a3, int a4)
{
  _DWORD *result; // eax

  result = a1;
  a1[26] = a2;
  a1[27] = a3;
  a1[28] = a4;
  return result;
}

//----- (004AFC20) --------------------------------------------------------
int __cdecl sub_4AFC20(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 104) = a2;
  return result;
}

//----- (004AFC30) --------------------------------------------------------
int __cdecl sub_4AFC30(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 108) = a2;
  return result;
}

//----- (004AFC40) --------------------------------------------------------
int __cdecl sub_4AFC40(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 112) = a2;
  return result;
}

//----- (004AFC50) --------------------------------------------------------
int __cdecl sub_4AFC50(int a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a1 + 116) = a2;
  return result;
}

//----- (004AFC60) --------------------------------------------------------
int __cdecl sub_4AFC60(int a1, int a2, int a3)
{
  int result; // eax
  int v4; // ecx

  result = a1;
  v4 = *(_DWORD *)(a1 + 56);
  if ( a3 )
    *(_DWORD *)(a1 + 56) = v4 | 2;
  else
    *(_DWORD *)(a1 + 56) = v4 & 0xFFFFFFFD;
  *(_DWORD *)(a1 + 120) = a2;
  return result;
}

//----- (004AFC90) --------------------------------------------------------
void __cdecl sub_4AFC90(_DWORD *a1, int a2, int a3, int a4)
{
  int v4; // ecx
  int v5; // edx

  v4 = a4;
  if ( !a4 )
    v4 = a1[13];
  if ( v4 )
  {
    v5 = a1[8];
    a1[23] = ((a2 - a1[7]) << 16) / v4;
    a1[24] = ((a3 - v5) << 16) / v4;
  }
}

//----- (004AFCD0) --------------------------------------------------------
_DWORD *__cdecl sub_4AFCD0(_DWORD *a1)
{
  _DWORD *result; // eax
  int v2; // edx
  int v3; // ecx

  result = a1;
  v2 = a1[21];
  a1[7] = a1[20] >> 16;
  v3 = a1[22] >> 16;
  a1[8] = v2 >> 16;
  a1[9] = v3;
  return result;
}

//----- (004AFCF0) --------------------------------------------------------
int __cdecl sub_4AFCF0(int a1, int a2, int a3, int a4)
{
  unsigned __int8 *v4; // eax
  int v5; // ecx

  v4 = &byte_5D4594[1311156];
  v5 = 0;
  while ( *(_DWORD *)v4 )
  {
    v4 += 24;
    if ( ++v5 >= 32 )
      return 0;
  }
  *(_DWORD *)v4 = a1;
  *((_DWORD *)v4 + 5) = a2;
  *(_DWORD *)(a2 + 20) = v4;
  *((_DWORD *)v4 + 2) = a3;
  *((_DWORD *)v4 + 1) = a3;
  *((_DWORD *)v4 + 3) = 0;
  *((_DWORD *)v4 + 4) = a4;
  return 1;
}

//----- (004AFD40) --------------------------------------------------------
void sub_4AFD40()
{
  char *i; // ebp
  int v1; // esi
  int v2; // edi
  void (__cdecl *v3)(int); // eax
  void (__cdecl *v4)(int); // eax
  unsigned __int8 *v5; // esi
  int v6; // ebx
  int (__cdecl **v7)(int); // edi
  int v8; // eax
  int v9; // ecx
  int v10; // eax
  int v11; // edx

  for ( i = (char *)memchr(*(const void **)&byte_5D4594[1311144], 255, *(size_t *)&byte_5D4594[1311148]);
        i;
        i = (char *)memchr(i + 1, 255, *(_DWORD *)&byte_5D4594[1311148] - v1 - 1) )
  {
    v1 = (int)&i[-*(_DWORD *)&byte_5D4594[1311144]];
    v2 = *(_DWORD *)&byte_5D4594[1311140] + 136 * (_DWORD)&i[-*(_DWORD *)&byte_5D4594[1311144]];
    if ( !(*(_BYTE *)(v2 + 56) & 8) )
    {
      v3 = *(void (__cdecl **)(int))(v2 + 124);
      if ( v3 )
        v3(*(_DWORD *)&byte_5D4594[1311140] + 136 * (_DWORD)&i[-*(_DWORD *)&byte_5D4594[1311144]]);
    }
    v4 = *(void (__cdecl **)(int))(v2 + 128);
    if ( v4 )
      v4(v2);
    if ( *(_DWORD *)&byte_5D4594[1311148] - v1 == 1 )
      break;
  }
  v5 = &byte_5D4594[1311168];
  v6 = 32;
  do
  {
    v7 = (int (__cdecl **)(int))(v5 - 12);
    if ( *((_DWORD *)v5 - 3) )
    {
      v8 = *((_DWORD *)v5 - 2);
      if ( v8 )
      {
        if ( v8 == 1 )
        {
          v9 = *((_DWORD *)v5 + 1);
          v10 = *(_DWORD *)v5 + 1;
          *(_DWORD *)v5 = v10;
          if ( v10 <= v9 && (*v7)((int)(v5 - 12)) )
          {
            *((_DWORD *)v5 - 2) = *((_DWORD *)v5 - 1);
          }
          else
          {
            v11 = *((_DWORD *)v5 + 2);
            *v7 = 0;
            sub_4AFA40(v11);
          }
        }
      }
    }
    v5 += 24;
    --v6;
  }
  while ( v6 );
}

//----- (004AFE20) --------------------------------------------------------
int __cdecl sub_4AFE20(_DWORD *a1, CHAR *a2)
{
  int v2; // eax
  _DWORD *v3; // eax
  _DWORD *v4; // edi
  int result; // eax

  v2 = sub_44CFC0(a2);
  v3 = (_DWORD *)sub_45A360(v2, a1[20] >> 16, a1[21] >> 16);
  v4 = v3;
  if ( v3 )
  {
    a1[3] = v3;
    v3[108] = a1;
    sub_49B950(v3, a1[13]);
    sub_45A110(v4);
  }
  result = a1[14];
  LOBYTE(result) = result | 8;
  a1[14] = result;
  return result;
}

//----- (004AFE80) --------------------------------------------------------
int __cdecl sub_4AFE80(int a1, _DWORD *a2)
{
  _DWORD *v2; // eax
  void (__cdecl *v3)(_DWORD *); // ecx

  v2 = (_DWORD *)a2[108];
  a2[3] = v2[20] >> 16;
  a2[4] = v2[21] >> 16;
  v3 = (void (__cdecl *)(_DWORD *))v2[31];
  if ( v3 )
    v3(v2);
  return 1;
}

//----- (004AFEB0) --------------------------------------------------------
int __cdecl sub_4AFEB0(int *a1)
{
  int *v1; // esi
  int v2; // ecx
  int v3; // edx
  int v4; // edi
  int v5; // ebx
  int v6; // eax
  int v7; // eax
  int v8; // ebp
  int result; // eax
  int v10; // ebx
  int2 a1a; // [esp+10h] [ebp-10h]
  int2 a2; // [esp+18h] [ebp-8h]
  int v13; // [esp+24h] [ebp+4h]

  v1 = a1;
  v2 = a1[22] >> 16;
  v3 = a1[21] >> 16;
  a1a.field_0 = a1[20] >> 16;
  a1a.field_4 = v3 - v2;
  sub_4739A0(&a1a, &a2);
  v4 = a2.field_0;
  v5 = a2.field_4;
  if ( *a1 )
    sub_47D2C0(*a1, a2.field_0, a2.field_4);
  v6 = a1[1];
  if ( v6 )
    sub_4B0820(v6, v4, v5);
  v7 = a1[3];
  if ( v7 && a1[4] )
  {
    v8 = *(_DWORD *)(v7 + 12);
    v13 = *(_DWORD *)(v7 + 16);
    *(_DWORD *)(v7 + 12) = a1a.field_0;
    *(_DWORD *)(v1[3] + 16) = a1a.field_4;
    (*(void (__cdecl **)(int, int))(v1[3] + 300))(v1[4], v1[3]);
    *(_DWORD *)(v1[3] + 12) = v8;
    *(_DWORD *)(v1[3] + 16) = v13;
  }
  result = v1[16];
  if ( result )
  {
    sub_434460(v1[6]);
    switch ( v1[16] )
    {
      case 1:
        result = sub_49EFA0(v4, v5);
        break;
      case 2:
        sub_49EFA0(v4, v5);
        sub_49EFA0(v4 + 1, v5);
        v10 = v5 + 1;
        sub_49EFA0(v4, v10);
        result = sub_49EFA0(v4 + 1, v10);
        break;
      case 3:
        sub_49EFA0(v4 + 1, v5);
        sub_49EFA0(v4, v5 + 1);
        sub_49EFA0(v4 + 1, v5 + 1);
        sub_49EFA0(v4 + 2, v5 + 1);
        result = sub_49EFA0(v4 + 1, v5 + 2);
        break;
      default:
        result = sub_4B0BC0(v4, v5, v1[16] / 2);
        break;
    }
  }
  return result;
}

//----- (004B0020) --------------------------------------------------------
int __cdecl sub_4B0020(_DWORD *a1)
{
  _DWORD *v1; // esi
  int result; // eax
  int v3; // eax
  int v4; // edx
  int v5; // ecx
  _DWORD *v6; // eax
  int v7; // eax
  int v8; // ebp
  int v9; // ebx
  int v10; // edi
  bool v11; // sf
  int v12; // edx
  int v13; // eax
  int v14; // edx
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // edi
  int v19; // eax
  int v20; // [esp+10h] [ebp-Ch]
  int v21; // [esp+10h] [ebp-Ch]
  int v22; // [esp+14h] [ebp-8h]
  int nNumerator; // [esp+18h] [ebp-4h]
  int v24; // [esp+20h] [ebp+4h]
  int v25; // [esp+20h] [ebp+4h]

  v1 = a1;
  result = a1[12];
  if ( result >= 0 )
  {
    v3 = a1[20];
    v4 = a1[22];
    ++a1[10];
    v20 = a1[21];
    v5 = a1[14];
    v24 = v3;
    if ( v5 & 4 )
    {
      v6 = (_DWORD *)v1[2];
      if ( v6 )
      {
        v24 += (v6[3] - v6[8]) << 16;
        v20 += (v6[4] - v6[9]) << 16;
      }
    }
    v7 = v1[11];
    if ( v7 )
    {
      result = v7 - 1;
      v1[11] = result;
    }
    else
    {
      v8 = v1[23];
      v9 = v1[24];
      v10 = v1[25];
      v25 = v8 + v24;
      v11 = v10 + v4 < 0;
      v12 = v10 + v4;
      v21 = v9 + v20;
      v22 = v12;
      if ( v11 )
      {
        if ( v5 & 2 )
        {
          v13 = v1[30];
          v14 = v12 - v10;
          v10 = -v10;
          v22 = v14;
          nNumerator = v13;
          if ( v13 )
          {
            v8 = MulDiv(v8, v13, 0x10000);
            v9 = MulDiv(v9, nNumerator, 0x10000);
            v10 = MulDiv(v10, nNumerator, 0x10000);
          }
        }
        else
        {
          v10 = 0;
          v22 = 0;
        }
      }
      v15 = v1[26];
      if ( v15 )
        v8 = MulDiv(v8, v15, 0x10000);
      v16 = v1[27];
      if ( v16 )
        v9 = MulDiv(v9, v16, 0x10000);
      v17 = v1[28];
      if ( v17 )
        v10 = MulDiv(v10, v17, 0x10000);
      v18 = v1[29] + v10;
      v19 = v1[12] - 1;
      v1[12] = v19;
      if ( v19 >= 0 )
      {
        result = v22;
        v1[25] = v18;
        v1[20] = v25;
        v1[21] = v21;
        v1[22] = v22;
        v1[23] = v8;
        v1[24] = v9;
      }
      else
      {
        result = ((int (__cdecl *)(_DWORD *))v1[33])(v1);
      }
    }
  }
  return result;
}

//----- (004B01A0) --------------------------------------------------------
void __cdecl sub_4B01A0(int a1)
{
  sub_4AFA40(a1);
}

//----- (004B01B0) --------------------------------------------------------
char *sub_4B01B0()
{
  char *v0; // eax
  char *result; // eax
  int v2; // ecx

  v0 = (char *)memchr(*(const void **)&byte_5D4594[1311144], 0, *(size_t *)&byte_5D4594[1311148]);
  if ( !v0 )
  {
    result = (char *)sub_4B0220(*(_DWORD *)&byte_5D4594[1311148] + 512);
    if ( !result )
      return result;
    v0 = (char *)memchr(*(const void **)&byte_5D4594[1311144], 0, *(size_t *)&byte_5D4594[1311148]);
  }
  v2 = (int)&v0[-*(_DWORD *)&byte_5D4594[1311144]];
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1311144] + v2) = -1;
  result = (char *)(*(_DWORD *)&byte_5D4594[1311140] + 136 * v2);
  *((_DWORD *)result + 15) = v2;
  return result;
}

//----- (004B0220) --------------------------------------------------------
int __cdecl sub_4B0220(size_t a1)
{
  unsigned int v1; // esi
  int result; // eax

  v1 = a1 - *(_DWORD *)&byte_5D4594[1311148];
  result = realloc(*(LPVOID *)&byte_5D4594[1311140], 136 * a1);
  if ( result )
  {
    *(_DWORD *)&byte_5D4594[1311140] = result;
    memset((void *)(result + 136 * *(_DWORD *)&byte_5D4594[1311148]), 0, 136 * v1);
    result = realloc(*(LPVOID *)&byte_5D4594[1311144], a1);
    if ( result )
    {
      *(_DWORD *)&byte_5D4594[1311144] = result;
      memset((void *)(*(_DWORD *)&byte_5D4594[1311148] + result), 0, v1);
      *(_DWORD *)&byte_5D4594[1311148] = a1;
      result = 1;
    }
  }
  return result;
}

//----- (004B02D0) --------------------------------------------------------
int sub_4B02D0()
{
  *(_DWORD *)&byte_5D4594[1311936] = 0;
  *(_DWORD *)&byte_5D4594[1311924] = 0;
  *(_DWORD *)&byte_5D4594[1311928] = 0;
  *(_DWORD *)&byte_5D4594[1311932] = 0;
  return 1;
}

//----- (004B0610) --------------------------------------------------------
void __cdecl sub_4B0610(int a1)
{
  if ( *(_DWORD *)&byte_5D4594[1311936] && (!*(_DWORD *)&byte_5D4594[1311932] || a1 == 1))
  {
    sub_555500(1);
  }
}

//----- (004B0650) --------------------------------------------------------
int sub_4B0650()
{
  *(_DWORD *)&byte_5D4594[1312460] = 0;
  return 1;
}

//----- (004B0660) --------------------------------------------------------
void *sub_4B0660()
{
  void *result; // eax

  for ( result = *(void **)&byte_5D4594[1312460]; *(_DWORD *)&byte_5D4594[1312460]; result = *(void **)&byte_5D4594[1312460] )
    sub_4B07D0(result);
  return result;
}

//----- (004B0680) --------------------------------------------------------
int *__cdecl sub_4B0680(unsigned __int8 a1, unsigned __int8 a2)
{
  int *result; // eax
  unsigned __int8 v3; // bl
  int v4; // edi
  int *v5; // esi
  size_t v6; // eax
  int *v7; // [esp+14h] [ebp+4h]

  result = *(int **)&byte_5D4594[1312460];
  v3 = a1;
  v4 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 1048);
  if ( *(_DWORD *)&byte_5D4594[1312460] )
  {
    while ( 1 )
    {
      v7 = result;
      if ( *result == v4
        && result[1] == v3
        && result[2] == a2
        && result[12] == *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 216)
        && result[13] == *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 220)
        && result[14] == *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 224) )
      {
        break;
      }
      result = (int *)result[18];
      if ( !result )
      {
        v5 = (int *)calloc(1u, 0x50u);
        v7[18] = (int)v5;
        v5[17] = (int)v7;
        goto LABEL_11;
      }
    }
    ++result[4];
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1312460] = calloc(1u, 0x50u);
    v5 = *(int **)&byte_5D4594[1312460];
    *(_DWORD *)(*(_DWORD *)&byte_5D4594[1312460] + 68) = 0;
LABEL_11:
    *v5 = v4;
    v5[1] = v3;
    v5[2] = a2;
    v5[4] = 0;
    v6 = 2 * (22 * v4 * (v4 + 1) / 7 + 6 * v4) + 17;
    v5[3] = v6;
    v5[12] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 216);
    v5[13] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 220);
    v5[14] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 224);
    v5[16] = (int)calloc(1u, v6);
    v5[18] = 0;
    sub_4B0870(v5);
    result = v5;
  }
  return result;
}

//----- (004B07D0) --------------------------------------------------------
int __cdecl sub_4B07D0(LPVOID lpMem)
{
  int result; // eax
  int v2; // eax
  int v3; // eax

  result = *((_DWORD *)lpMem + 4) - 1;
  *((_DWORD *)lpMem + 4) = result;
  if ( result < 0 )
  {
    v2 = *((_DWORD *)lpMem + 17);
    if ( v2 )
      *(_DWORD *)(v2 + 72) = *((_DWORD *)lpMem + 18);
    v3 = *((_DWORD *)lpMem + 18);
    if ( v3 )
      *(_DWORD *)(v3 + 68) = *((_DWORD *)lpMem + 17);
    if ( lpMem == *(LPVOID *)&byte_5D4594[1312460] )
      *(_DWORD *)&byte_5D4594[1312460] = *((_DWORD *)lpMem + 18);
    free(*((LPVOID *)lpMem + 16));
    free(lpMem);
  }
  return result;
}

//----- (004B0820) --------------------------------------------------------
int (__cdecl *__cdecl sub_4B0820(int a1, int a2, int a3))(_DWORD)
{
  int (__cdecl *v3)(_DWORD); // esi
  char v5[12]; // [esp+4h] [ebp-Ch]

  v5[10] = 8;
  *(_DWORD *)v5 = *(_DWORD *)(a1 + 64);
  v3 = sub_47D5B0(sub_4B0B20);
  sub_47D2C0((int)v5, a2, a3);
  return sub_47D5B0((int)v3);
}

//----- (004B0870) --------------------------------------------------------
int __cdecl sub_4B0870(int *a1)
{
  int v1; // ebx
  _DWORD *v2; // esi
  int v3; // ebp
  int v4; // eax
  int v5; // edx
  _BYTE *v6; // esi
  int v7; // ebp
  int result; // eax
  int v9; // ecx
  _BYTE *v10; // esi
  _BYTE *v11; // esi
  int v12; // edi
  int v13; // ebp
  int v14; // edx
  _BYTE *v15; // esi
  int v16; // eax
  bool v17; // zf
  int v18; // [esp+10h] [ebp-44h]
  int v19; // [esp+14h] [ebp-40h]
  int v20; // [esp+18h] [ebp-3Ch]
  int v21; // [esp+20h] [ebp-34h]
  int v22; // [esp+24h] [ebp-30h]
  int v23; // [esp+28h] [ebp-2Ch]
  int v24; // [esp+28h] [ebp-2Ch]
  unsigned __int8 v25; // [esp+2Ch] [ebp-28h]
  int v26; // [esp+2Ch] [ebp-28h]
  int v27; // [esp+30h] [ebp-24h]
  int v28; // [esp+34h] [ebp-20h]
  unsigned __int8 v29; // [esp+38h] [ebp-1Ch]
  int v30; // [esp+38h] [ebp-1Ch]
  int v31; // [esp+3Ch] [ebp-18h]
  unsigned __int8 v32; // [esp+40h] [ebp-14h]
  int v33; // [esp+40h] [ebp-14h]
  int v34; // [esp+48h] [ebp-Ch]
  int v35; // [esp+4Ch] [ebp-8h]
  int v36; // [esp+50h] [ebp-4h]
  int v37; // [esp+58h] [ebp+4h]

  v1 = *a1;
  v2 = (_DWORD *)a1[16];
  v3 = a1[1];
  v4 = a1[2];
  *v2 = 2 * *a1;
  ++v2;
  *v2 = 2 * v1;
  ++v2;
  *v2 = -*a1;
  ++v2;
  *v2 = -*a1;
  v32 = (unsigned __int16)(v3 * a1[12]) >> 8;
  v5 = a1[13];
  v23 = a1[14];
  v29 = (unsigned __int16)(v3 * v5) >> 8;
  v25 = (unsigned __int16)(v3 * v23) >> 8;
  v6 = (char *)v2 + 5;
  v34 = v32 << 16;
  v18 = v32 << 16;
  v7 = -v1;
  v31 = -v1;
  v27 = (int)(((((unsigned int)(v4 * a1[12]) >> 8) & 0xFF) - v32) << 16) / v1;
  v35 = v29 << 16;
  v19 = v29 << 16;
  v28 = (int)(((((unsigned int)(v4 * v5) >> 8) & 0xFF) - v29) << 16) / v1;
  v36 = v25 << 16;
  v20 = v25 << 16;
  v30 = (int)(((((unsigned int)(v4 * v23) >> 8) & 0xFF) - v25) << 16) / v1;
  result = 2 * v1;
  if ( 2 * v1 )
  {
    v33 = 2 * v1;
    do
    {
      v9 = (__int64)sqrt((double)(v1 * v1 - v7 * v7));
      if ( v9 < v1 )
      {
        *v6 = 1;
        v10 = v6 + 1;
        *v10 = v1 - v9;
        v6 = v10 + 1;
      }
      v26 = 2 * v9;
      if ( 2 * v9 )
      {
        *v6 = 7;
        v11 = v6 + 1;
        v12 = v34;
        v13 = v35;
        *v11 = 2 * v9;
        v6 = v11 + 1;
        v37 = v36;
        v21 = v18 / v9;
        v22 = v19 / v9;
        v14 = -v9;
        v24 = v20 / v9;
        do
        {
          *(_WORD *)v6 = (v37 >> 19) & 0x1F | (8 * (BYTE2(v13) & 0xFC | (32 * (HIWORD(v12) & 0xFFF8))));
          if ( v14 >= 0 )
          {
            v12 -= v21;
            v13 -= v22;
            v37 -= v24;
          }
          else
          {
            v12 += v21;
            v13 += v22;
            v37 += v24;
          }
          ++v14;
          v6 += 2;
          --v26;
        }
        while ( v26 );
        v7 = v31;
      }
      if ( v9 < v1 )
      {
        *v6 = 1;
        v15 = v6 + 1;
        *v15 = v1 - v9;
        v6 = v15 + 1;
      }
      if ( v7 >= 0 )
      {
        v19 -= v28;
        v18 -= v27;
        v16 = v20 - v30;
      }
      else
      {
        v19 += v28;
        v18 += v27;
        v16 = v30 + v20;
      }
      v20 = v16;
      ++v7;
      result = v33 - 1;
      v17 = v33 == 1;
      v31 = v7;
      --v33;
    }
    while ( !v17 );
  }
  return result;
}

//----- (004B0B20) --------------------------------------------------------
int __cdecl sub_4B0B20(int a1)
{
  return *(_DWORD *)a1;
}

//----- (004B0B30) --------------------------------------------------------
int sub_4B0B30()
{
  if ( *(_DWORD *)&byte_5D4594[3801780] )
  {
    if ( *(_DWORD *)&byte_5D4594[3801780] == 1 )
    {
      *(_DWORD *)&byte_5D4594[1312468] = sub_4B1380;
      *(_DWORD *)&byte_5D4594[1312464] = sub_4B2480;
      return 1;
    }
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1312468] = sub_4B0D30;
    *(_DWORD *)&byte_5D4594[1312464] = sub_4B1A60;
  }
  return 1;
}

//----- (004B0B90) --------------------------------------------------------
int __cdecl sub_4B0B90(int a1, int a2, int a3)
{
  int result; // eax

  if ( *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 52) )
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD))&byte_5D4594[1312464])(a1, a2, a3);
  else
    result = (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD))&byte_5D4594[1312468])(a1, a2, a3);
  return result;
}

//----- (004B0BC0) --------------------------------------------------------
int __cdecl sub_4B0BC0(int a1, int a2, int a3)
{
  int v3; // ebp
  void (__cdecl *v4)(int, int, int); // esi
  int v5; // edi
  int v6; // ebx
  int result; // eax
  int v8; // ebp
  int v9; // edi
  int v10; // [esp+10h] [ebp-10h]
  int v11; // [esp+14h] [ebp-Ch]
  int v12; // [esp+18h] [ebp-8h]
  int v13; // [esp+1Ch] [ebp-4h]
  int v14; // [esp+24h] [ebp+4h]
  int v15; // [esp+28h] [ebp+8h]
  int v16; // [esp+2Ch] [ebp+Ch]

  v3 = a3;
  v16 = 1 - a3;
  v4 = *(void (__cdecl **)(int, int, int))&byte_5D4594[3798708];
  v10 = 5 - 2 * v3;
  v12 = 0;
  v13 = v3;
  v11 = 3;
  if ( !*(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 52) )
    v4 = *(void (__cdecl **)(int, int, int))&byte_5D4594[3798720];
  v5 = a2;
  v6 = a1;
  v4(a1, a2 + v3, a1);
  v14 = a1 + v3;
  v15 = v6 - v3;
  v4(v6 - v3, v5, v6 + v3);
  v4(v6 - v3, v5, v14);
  result = ((int (__cdecl *)(int, int, int))v4)(v6, v5 - v3, v6);
  if ( v3 > 0 )
  {
    v8 = v6;
    v9 = v5 - v6;
    do
    {
      if ( v16 >= 0 )
      {
        v16 += v10;
        v10 += 4;
        --v13;
        --v14;
        ++v15;
      }
      else
      {
        v16 += v11;
        v10 += 2;
      }
      ++v6;
      ++v12;
      --v8;
      v11 += 2;
      v4(v8, v9 + v14, v6);
      v4(v15, v9 + v6, v14);
      v4(v15, v9 + v8, v14);
      v4(v8, v9 + v15, v6);
      result = v13;
    }
    while ( v13 > v12 );
  }
  return result;
}

//----- (004B0D30) --------------------------------------------------------
char __cdecl sub_4B0D30(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // edi
  char result; // al
  int v6; // ecx
  int v7; // edx
  int v8; // edi
  int v9; // [esp+10h] [ebp-10h]
  int v10; // [esp+14h] [ebp-Ch]
  int v11; // [esp+18h] [ebp-8h]
  int v12; // [esp+1Ch] [ebp-4h]
  int v13; // [esp+24h] [ebp+4h]
  int v14; // [esp+28h] [ebp+8h]
  int v15; // [esp+2Ch] [ebp+Ch]

  v3 = a1;
  v4 = a3;
  if ( **(_DWORD **)&byte_5D4594[3799572] && sub_49F8E0(a1, a2, a3) )
    return sub_4B0F50(a1, a2, a3);
  v6 = 0;
  v9 = 1 - a3;
  v15 = 5 - 2 * a3;
  result = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
  v13 = 4 * (v4 + a2);
  v7 = v4;
  v10 = 3;
  *(_BYTE *)(*(_DWORD *)(v13 + *(_DWORD *)&byte_5D4594[3798784]) + v3) = result;
  *(_BYTE *)(v3 + *(_DWORD *)(4 * a2 + *(_DWORD *)&byte_5D4594[3798784]) + v4) = result;
  *(_BYTE *)(v4 + v3 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2)) = result;
  v12 = 4 * (a2 - v4);
  *(_BYTE *)(v3 + *(_DWORD *)(v12 + *(_DWORD *)&byte_5D4594[3798784])) = result;
  *(_BYTE *)(*(_DWORD *)(v12 + *(_DWORD *)&byte_5D4594[3798784]) + v3) = result;
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2) - v4 + v3) = result;
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2) - v4 + v3) = result;
  *(_BYTE *)(v3 + *(_DWORD *)(v13 + *(_DWORD *)&byte_5D4594[3798784])) = result;
  if ( v4 > 0 )
  {
    v8 = 4 * a2;
    v14 = 4 * a2;
    v11 = v12;
    do
    {
      if ( v9 >= 0 )
      {
        v9 += v15;
        --v7;
        v15 += 4;
        v13 -= 4;
        v11 += 4;
      }
      else
      {
        v9 += v10;
        v15 += 2;
      }
      v8 += 4;
      ++v6;
      v10 += 2;
      v14 -= 4;
      *(_BYTE *)(v6 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v13) + v3) = result;
      *(_BYTE *)(v7 + *(_DWORD *)(v8 + *(_DWORD *)&byte_5D4594[3798784]) + v3) = result;
      *(_BYTE *)(v7 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v14) + v3) = result;
      *(_BYTE *)(v3 + v6 + *(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784])) = result;
      *(_BYTE *)(*(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784]) - v6 + v3) = result;
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v14) - v7 + v3) = result;
      *(_BYTE *)(*(_DWORD *)(v8 + *(_DWORD *)&byte_5D4594[3798784]) - v7 + v3) = result;
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v13) - v6 + v3) = result;
    }
    while ( v7 > v6 );
  }
  return result;
}

//----- (004B0F50) --------------------------------------------------------
int __cdecl sub_4B0F50(int a1, int a2, int a3)
{
  int v3; // esi
  char v4; // bl
  int v5; // edx
  int result; // eax
  int v7; // edi
  int v8; // ebp
  int v9; // edi
  int v10; // esi
  int v11; // ebx
  int v12; // ebp
  int v13; // edx
  int v14; // ecx
  int v15; // [esp+10h] [ebp-30h]
  int v16; // [esp+14h] [ebp-2Ch]
  int v17; // [esp+18h] [ebp-28h]
  int v18; // [esp+1Ch] [ebp-24h]
  int v19; // [esp+20h] [ebp-20h]
  int v20; // [esp+24h] [ebp-1Ch]
  int v21; // [esp+24h] [ebp-1Ch]
  int v22; // [esp+28h] [ebp-18h]
  int v23; // [esp+2Ch] [ebp-14h]
  int v24; // [esp+30h] [ebp-10h]
  int v25; // [esp+30h] [ebp-10h]
  int v26; // [esp+34h] [ebp-Ch]
  int v27; // [esp+38h] [ebp-8h]
  int v28; // [esp+3Ch] [ebp-4h]
  int v29; // [esp+44h] [ebp+4h]
  int v30; // [esp+48h] [ebp+8h]
  char v31; // [esp+4Ch] [ebp+Ch]

  v3 = a3;
  v28 = 0;
  v20 = 1 - a3;
  v19 = 5 - 2 * a3;
  v27 = a3;
  v26 = 3;
  v4 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
  v17 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 4);
  v5 = a2;
  v15 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 16);
  v31 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
  result = a2 + v27;
  v16 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 12);
  v18 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 8);
  v24 = a2 + v27;
  if ( a1 >= v17
    && a1 < *(int *)(*(_DWORD *)&byte_5D4594[3799572] + 12)
    && result >= *(int *)(*(_DWORD *)&byte_5D4594[3799572] + 8)
    && result < v15 )
  {
    *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * result) + a1) = v4;
  }
  v7 = a1 + v3;
  v30 = a1 + v3;
  if ( a1 + v3 >= v17 )
  {
    if ( v7 < v16 && v5 >= v18 && v5 < v15 )
    {
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v5) + v30) = v4;
      v7 = a1 + v3;
    }
    if ( v7 >= v17 && v7 < v16 && v5 >= v18 && v5 < v15 )
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v5) + v30) = v4;
  }
  v8 = v5 - v3;
  if ( a1 >= v17 )
  {
    if ( a1 < v16 && v8 >= v18 && v8 < v15 )
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v8) + a1) = v4;
    if ( a1 >= v17 && a1 < v16 && v8 >= v18 && v8 < v15 )
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v8) + a1) = v4;
  }
  v9 = a1 - v3;
  if ( a1 - v3 >= v17 )
  {
    if ( v9 < v16 && v5 >= v18 && v5 < v15 )
    {
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v5) + v9) = v31;
      result = v24;
    }
    if ( v9 >= v17 && v9 < v16 && v5 >= v18 && v5 < v15 )
    {
      *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v5) + v9) = v31;
      result = v24;
    }
  }
  if ( a1 >= v17 && a1 < v16 && result >= v18 && result < v15 )
  {
    *(_BYTE *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * result) + a1) = v31;
    result = v24;
  }
  if ( v3 > 0 )
  {
    v10 = a1;
    v23 = 4 * v5;
    v22 = 4 * v5;
    v25 = 4 * result;
    v11 = 4 * v8;
    v12 = v18;
    result = a1;
    v13 = v5 - a1;
    v14 = v20;
    v29 = v11;
    while ( 1 )
    {
      if ( v14 >= 0 )
      {
        v21 = v19 + v14;
        v19 += 4;
        --v27;
        --v30;
        ++v9;
        v29 += 4;
        v25 -= 4;
      }
      else
      {
        v21 = v26 + v14;
        v19 += 2;
      }
      v26 += 2;
      ++v10;
      ++v28;
      v23 += 4;
      --result;
      v22 -= 4;
      if ( v10 >= v17 && v10 < v16 && v13 + v30 >= v12 && v13 + v30 < v15 )
        *(_BYTE *)(*(_DWORD *)(v25 + *(_DWORD *)&byte_5D4594[3798784]) + v10) = v31;
      if ( v30 >= v17 )
      {
        if ( v30 < v16 && v13 + v10 >= v12 && v13 + v10 < v15 )
        {
          *(_BYTE *)(*(_DWORD *)(v23 + *(_DWORD *)&byte_5D4594[3798784]) + v30) = v31;
          v12 = v18;
        }
        if ( v30 < v16 && v13 + result >= v12 && v13 + result < v15 )
        {
          *(_BYTE *)(*(_DWORD *)(v22 + *(_DWORD *)&byte_5D4594[3798784]) + v30) = v31;
          v12 = v18;
        }
      }
      if ( v10 >= v17 && v10 < v16 && v13 + v9 >= v12 && v13 + v9 < v15 )
        *(_BYTE *)(*(_DWORD *)(v29 + *(_DWORD *)&byte_5D4594[3798784]) + v10) = v31;
      if ( result >= v17 && result < v16 && v13 + v9 >= v12 && v13 + v9 < v15 )
        *(_BYTE *)(*(_DWORD *)(v29 + *(_DWORD *)&byte_5D4594[3798784]) + result) = v31;
      if ( v9 >= v17 && v9 < v16 )
      {
        if ( v13 + result >= v12 && v13 + result < v15 )
          *(_BYTE *)(*(_DWORD *)(v22 + *(_DWORD *)&byte_5D4594[3798784]) + v9) = v31;
        if ( v9 < v16 && v13 + v10 >= v12 && v13 + v10 < v15 )
          *(_BYTE *)(*(_DWORD *)(v23 + *(_DWORD *)&byte_5D4594[3798784]) + v9) = v31;
      }
      if ( result >= v17 && result < v16 && v13 + v30 >= v12 && v13 + v30 < v15 )
        *(_BYTE *)(*(_DWORD *)(v25 + *(_DWORD *)&byte_5D4594[3798784]) + result) = v31;
      if ( v27 <= v28 )
        break;
      v14 = v21;
    }
  }
  return result;
}

//----- (004B1380) --------------------------------------------------------
__int16 __cdecl sub_4B1380(int a1, int a2, int a3)
{
  int v3; // ebx
  int v4; // esi
  __int16 result; // ax
  int v6; // ecx
  int v7; // edi
  int v8; // ecx
  int v9; // ecx
  int v10; // edx
  int v11; // ebx
  int v12; // esi
  int v13; // edi
  int v14; // ebp
  int v15; // [esp+10h] [ebp-18h]
  int v16; // [esp+14h] [ebp-14h]
  int v17; // [esp+18h] [ebp-10h]
  int v18; // [esp+1Ch] [ebp-Ch]
  int v19; // [esp+1Ch] [ebp-Ch]
  int v20; // [esp+20h] [ebp-8h]
  int v21; // [esp+24h] [ebp-4h]
  int v22; // [esp+2Ch] [ebp+4h]
  int v23; // [esp+30h] [ebp+8h]
  int v24; // [esp+30h] [ebp+8h]
  int v25; // [esp+34h] [ebp+Ch]

  v3 = a2;
  v4 = a3;
  if ( **(_DWORD **)&byte_5D4594[3799572] && sub_49F8E0(a1, a2, a3) )
    return sub_4B15E0(a1, a2, a3);
  v15 = 1 - a3;
  v25 = 5 - 2 * a3;
  result = *(_WORD *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
  v6 = 2 * a1;
  v7 = 4 * (a2 + v4);
  v18 = v6;
  v20 = 0;
  v21 = v4;
  v16 = 3;
  *(_WORD *)(*(_DWORD *)(v7 + *(_DWORD *)&byte_5D4594[3798784]) + v6) = result;
  v23 = 4 * a2;
  v8 = 2 * (v4 + a1);
  v17 = v8;
  *(_WORD *)(*(_DWORD *)(4 * v3 + *(_DWORD *)&byte_5D4594[3798784]) + v8) = result;
  *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v3) + v8) = result;
  v9 = 4 * (v3 - v4);
  *(_WORD *)(*(_DWORD *)(v9 + *(_DWORD *)&byte_5D4594[3798784]) + v18) = result;
  *(_WORD *)(*(_DWORD *)(v9 + *(_DWORD *)&byte_5D4594[3798784]) + 2 * a1) = result;
  v10 = 2 * (a1 - v4);
  *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v3) + v10) = result;
  *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v3) + v10) = result;
  *(_WORD *)(*(_DWORD *)(v7 + *(_DWORD *)&byte_5D4594[3798784]) + 2 * a1) = result;
  if ( v4 > 0 )
  {
    v11 = 4 * v3;
    v12 = v18;
    v22 = v7;
    v13 = v18;
    v19 = v10;
    v14 = v23;
    v24 = v9;
    do
    {
      if ( v15 >= 0 )
      {
        v15 += v25;
        v22 -= 4;
        v24 += 4;
        v25 += 4;
        --v21;
        v17 -= 2;
        v19 += 2;
      }
      else
      {
        v15 += v16;
        v25 += 2;
      }
      v12 += 2;
      v13 -= 2;
      v16 += 2;
      v11 += 4;
      v14 -= 4;
      ++v20;
      *(_WORD *)(*(_DWORD *)(v22 + *(_DWORD *)&byte_5D4594[3798784]) + v12) = result;
      *(_WORD *)(*(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784]) + v17) = result;
      *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v14) + v17) = result;
      *(_WORD *)(*(_DWORD *)(v24 + *(_DWORD *)&byte_5D4594[3798784]) + v12) = result;
      *(_WORD *)(*(_DWORD *)(v24 + *(_DWORD *)&byte_5D4594[3798784]) + v13) = result;
      *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v14) + v19) = result;
      *(_WORD *)(*(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784]) + v19) = result;
      *(_WORD *)(*(_DWORD *)(v22 + *(_DWORD *)&byte_5D4594[3798784]) + v13) = result;
    }
    while ( v21 > v20 );
  }
  return result;
}

//----- (004B15E0) --------------------------------------------------------
int __cdecl sub_4B15E0(int a1, int a2, int a3)
{
  int v3; // esi
  __int16 v4; // bp
  int v5; // edi
  int v6; // ecx
  int result; // eax
  int v8; // ebx
  int v9; // edx
  int v10; // edi
  int v11; // edx
  int v12; // ebp
  int v13; // edi
  int v14; // edx
  int v15; // esi
  int v16; // ecx
  int v17; // edx
  int v18; // [esp+10h] [ebp-44h]
  int v19; // [esp+14h] [ebp-40h]
  int v20; // [esp+18h] [ebp-3Ch]
  int v21; // [esp+1Ch] [ebp-38h]
  int v22; // [esp+20h] [ebp-34h]
  int v23; // [esp+24h] [ebp-30h]
  __int16 v24; // [esp+28h] [ebp-2Ch]
  int v25; // [esp+2Ch] [ebp-28h]
  int v26; // [esp+30h] [ebp-24h]
  int v27; // [esp+34h] [ebp-20h]
  int v28; // [esp+38h] [ebp-1Ch]
  int v29; // [esp+3Ch] [ebp-18h]
  int v30; // [esp+40h] [ebp-14h]
  int v31; // [esp+44h] [ebp-10h]
  int v32; // [esp+48h] [ebp-Ch]
  int v33; // [esp+4Ch] [ebp-8h]
  int v34; // [esp+4Ch] [ebp-8h]
  int v35; // [esp+58h] [ebp+4h]
  int v36; // [esp+5Ch] [ebp+8h]
  int v37; // [esp+5Ch] [ebp+8h]
  int v38; // [esp+60h] [ebp+Ch]

  v3 = a3;
  v32 = 0;
  v21 = 1 - a3;
  v31 = a3;
  v22 = 5 - 2 * a3;
  v30 = 3;
  v4 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
  v5 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 4);
  v38 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 8);
  v6 = a2;
  v18 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 16);
  result = a1;
  v24 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
  v8 = a2 + v31;
  v20 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 4);
  v19 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 12);
  v36 = a2 + v31;
  if ( a1 >= v5 && a1 < *(int *)(*(_DWORD *)&byte_5D4594[3799572] + 12) && v8 >= v38 && v8 < v18 )
    *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v8) + 2 * a1) = v4;
  v9 = a1 + v3;
  v33 = a1 + v3;
  if ( a1 + v3 >= v5 )
  {
    if ( v9 < v19 && v6 >= v38 && v6 < v18 )
      *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v6) + 2 * v9) = v4;
    if ( v9 >= v20 && v9 < v19 && v6 >= v38 && v6 < v18 )
      *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v6) + 2 * v9) = v4;
  }
  v10 = v6 - v3;
  if ( a1 >= v20 )
  {
    if ( a1 < v19 && v10 >= v38 && v10 < v18 )
      *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v10) + 2 * a1) = v4;
    if ( a1 >= v20 && a1 < v19 && v10 >= v38 && v10 < v18 )
      *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v10) + 2 * a1) = v4;
  }
  v11 = a1 - v3;
  if ( a1 - v3 >= v20 )
  {
    if ( v11 < v19 && v6 >= v38 && v6 < v18 )
    {
      *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v6) + 2 * v11) = v4;
      v8 = v36;
    }
    if ( v11 >= v20 && v11 < v19 && v6 >= v38 && v6 < v18 )
    {
      *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v6) + 2 * v11) = v4;
      v8 = v36;
    }
  }
  if ( a1 >= v20 && a1 < v19 && v8 >= v38 && v8 < v18 )
  {
    *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v8) + 2 * a1) = v4;
    v8 = v36;
  }
  if ( v3 > 0 )
  {
    v35 = a1 - v3;
    v28 = 2 * v11;
    v27 = 4 * v6;
    v23 = v8;
    v25 = 4 * v10;
    v37 = 2 * result;
    v12 = result - v3;
    v26 = v6 - result;
    v13 = 2 * v33;
    v29 = 2 * result;
    v34 = result - v6;
    v14 = v8;
    v15 = v6;
    do
    {
      if ( v21 >= 0 )
      {
        v13 -= 2;
        v21 += v22;
        v22 += 4;
        --v31;
        v25 += 4;
        --v14;
        v28 += 2;
        v35 = v12 + 1;
        v23 = v14;
      }
      else
      {
        v21 += v30;
        v22 += 2;
      }
      v30 += 2;
      ++v32;
      ++v15;
      v37 += 2;
      v27 -= 4;
      v29 -= 2;
      v16 = v15 + v34;
      --result;
      if ( v15 + v34 >= v20 && v16 < v19 && v14 >= v38 && v14 < v18 )
      {
        *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v14) + v37) = v24;
        v14 = v23;
      }
      v17 = v34 + v14;
      if ( v17 >= v20 )
      {
        if ( v17 < v19 && v15 >= v38 && v15 < v18 )
          *(_WORD *)(v13 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v15)) = v24;
        if ( v17 >= v20 && v17 < v19 && result + v26 >= v38 && result + v26 < v18 )
          *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v27) + v13) = v24;
      }
      if ( v16 < v20 || v16 >= v19 )
      {
        v12 = v35;
      }
      else
      {
        v12 = v35;
        if ( v35 + v26 >= v38 && v35 + v26 < v18 )
          *(_WORD *)(*(_DWORD *)(v25 + *(_DWORD *)&byte_5D4594[3798784]) + v37) = v24;
      }
      if ( result >= v20 && result < v19 && v26 + v12 >= v38 && v26 + v12 < v18 )
        *(_WORD *)(*(_DWORD *)(v25 + *(_DWORD *)&byte_5D4594[3798784]) + v29) = v24;
      if ( v12 >= v20 && v12 < v19 )
      {
        if ( result + v26 >= v38 && result + v26 < v18 )
          *(_WORD *)(*(_DWORD *)(v27 + *(_DWORD *)&byte_5D4594[3798784]) + v28) = v24;
        if ( v12 < v19 && v15 >= v38 && v15 < v18 )
          *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v15) + v28) = v24;
      }
      if ( result < v20 || result >= v19 )
      {
        v14 = v23;
      }
      else
      {
        v14 = v23;
        if ( v23 >= v38 && v23 < v18 )
        {
          *(_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v23) + v29) = v24;
          v12 = v35;
        }
      }
    }
    while ( v31 > v32 );
  }
  return result;
}

//----- (004B1A60) --------------------------------------------------------
int __cdecl sub_4B1A60(int a1, int a2, int a3)
{
  int result; // eax
  int v4; // edi
  int v5; // esi
  int v6; // ecx
  int v7; // ebp
  int v8; // eax
  _BYTE *v9; // edx
  _BYTE *v10; // edx
  _BYTE *v11; // edx
  _BYTE *v12; // edx
  int v13; // [esp+10h] [ebp-14h]
  int v14; // [esp+14h] [ebp-10h]
  int v15; // [esp+18h] [ebp-Ch]
  int v16; // [esp+1Ch] [ebp-8h]
  int v17; // [esp+20h] [ebp-4h]
  int v18; // [esp+28h] [ebp+4h]
  int v19; // [esp+2Ch] [ebp+8h]
  int v20; // [esp+30h] [ebp+Ch]

  result = *(_DWORD *)&byte_5D4594[810632];
  if ( *(_DWORD *)&byte_5D4594[810632] )
  {
    v4 = a3;
    v5 = a1;
    if ( **(_DWORD **)&byte_5D4594[3799572] && sub_49F8E0(a1, a2, a3) )
    {
      result = sub_4B1E30(a1, a2, a3);
    }
    else
    {
      v6 = 0;
      v18 = 1 - a3;
      v7 = a3;
      v13 = 5 - 2 * a3;
      v16 = 3;
      v8 = 4 * (a2 + a3);
      v15 = v8;
      v9 = (_BYTE *)(v5 + *(_DWORD *)(v8 + *(_DWORD *)&byte_5D4594[3798784]));
      result = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
      *v9 = *(_BYTE *)(result + ((unsigned __int8)*v9 << 8) + *(_DWORD *)&byte_5D4594[810632]);
      v14 = 4 * a2;
      v10 = (_BYTE *)(a3 + v5 + *(_DWORD *)(4 * a2 + *(_DWORD *)&byte_5D4594[3798784]));
      *v10 = *(_BYTE *)(result + ((unsigned __int8)*v10 << 8) + *(_DWORD *)&byte_5D4594[810632]);
      v11 = (_BYTE *)(a3 + v5 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2));
      *v11 = *(_BYTE *)(result + ((unsigned __int8)*v11 << 8) + *(_DWORD *)&byte_5D4594[810632]);
      v17 = 4 * (a2 - a3);
      *(_BYTE *)(v5 + *(_DWORD *)(v17 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(result
                                                                                      + (*(unsigned __int8 *)(*(_DWORD *)(v17 + *(_DWORD *)&byte_5D4594[3798784]) + v5) << 8)
                                                                                      + *(_DWORD *)&byte_5D4594[810632]);
      *(_BYTE *)(v5 + *(_DWORD *)(v17 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(result
                                                                                      + (*(unsigned __int8 *)(v5 + *(_DWORD *)(v17 + *(_DWORD *)&byte_5D4594[3798784])) << 8)
                                                                                      + *(_DWORD *)&byte_5D4594[810632]);
      v12 = (_BYTE *)(v5 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2) - a3);
      *v12 = *(_BYTE *)(result + ((unsigned __int8)*v12 << 8) + *(_DWORD *)&byte_5D4594[810632]);
      *(_BYTE *)(v5 + *(_DWORD *)(4 * a2 + *(_DWORD *)&byte_5D4594[3798784]) - a3) = *(_BYTE *)(result
                                                                                              + (*(unsigned __int8 *)(v5 + *(_DWORD *)(4 * a2 + *(_DWORD *)&byte_5D4594[3798784]) - a3) << 8)
                                                                                              + *(_DWORD *)&byte_5D4594[810632]);
      *(_BYTE *)(v5 + *(_DWORD *)(v15 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(result
                                                                                      + (*(unsigned __int8 *)(*(_DWORD *)(v15 + *(_DWORD *)&byte_5D4594[3798784]) + v5) << 8)
                                                                                      + *(_DWORD *)&byte_5D4594[810632]);
      if ( a3 > 0 )
      {
        v20 = 4 * a2;
        v19 = 4 * (a2 - v4);
        do
        {
          if ( v18 >= 0 )
          {
            v18 += v13;
            v13 += 4;
            --v7;
            v15 -= 4;
            v19 += 4;
          }
          else
          {
            v18 += v16;
            v13 += 2;
          }
          v16 += 2;
          v20 -= 4;
          ++v6;
          v14 += 4;
          *(_BYTE *)(v5 + v6 + *(_DWORD *)(v15 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(result
                                                                                               + (*(unsigned __int8 *)(v5 + v6 + *(_DWORD *)(v15 + *(_DWORD *)&byte_5D4594[3798784])) << 8)
                                                                                               + *(_DWORD *)&byte_5D4594[810632]);
          *(_BYTE *)(v5 + v7 + *(_DWORD *)(v14 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(result
                                                                                               + (*(unsigned __int8 *)(v5 + v7 + *(_DWORD *)(v14 + *(_DWORD *)&byte_5D4594[3798784])) << 8)
                                                                                               + *(_DWORD *)&byte_5D4594[810632]);
          *(_BYTE *)(v5 + v7 + *(_DWORD *)(v20 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(result
                                                                                               + (*(unsigned __int8 *)(v5 + v7 + *(_DWORD *)(v20 + *(_DWORD *)&byte_5D4594[3798784])) << 8)
                                                                                               + *(_DWORD *)&byte_5D4594[810632]);
          *(_BYTE *)(v5 + v6 + *(_DWORD *)(v19 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(result
                                                                                               + (*(unsigned __int8 *)(v5 + v6 + *(_DWORD *)(v19 + *(_DWORD *)&byte_5D4594[3798784])) << 8)
                                                                                               + *(_DWORD *)&byte_5D4594[810632]);
          *(_BYTE *)(v5 + *(_DWORD *)(v19 + *(_DWORD *)&byte_5D4594[3798784]) - v6) = *(_BYTE *)(result
                                                                                               + (*(unsigned __int8 *)(v5 + *(_DWORD *)(v19 + *(_DWORD *)&byte_5D4594[3798784]) - v6) << 8)
                                                                                               + *(_DWORD *)&byte_5D4594[810632]);
          *(_BYTE *)(v5 + *(_DWORD *)(v20 + *(_DWORD *)&byte_5D4594[3798784]) - v7) = *(_BYTE *)(result
                                                                                               + (*(unsigned __int8 *)(v5 + *(_DWORD *)(v20 + *(_DWORD *)&byte_5D4594[3798784]) - v7) << 8)
                                                                                               + *(_DWORD *)&byte_5D4594[810632]);
          *(_BYTE *)(v5 + *(_DWORD *)(v14 + *(_DWORD *)&byte_5D4594[3798784]) - v7) = *(_BYTE *)(result
                                                                                               + (*(unsigned __int8 *)(v5 + *(_DWORD *)(v14 + *(_DWORD *)&byte_5D4594[3798784]) - v7) << 8)
                                                                                               + *(_DWORD *)&byte_5D4594[810632]);
          *(_BYTE *)(v5 + *(_DWORD *)(v15 + *(_DWORD *)&byte_5D4594[3798784]) - v6) = *(_BYTE *)(result
                                                                                               + (*(unsigned __int8 *)(v5 + *(_DWORD *)(v15 + *(_DWORD *)&byte_5D4594[3798784]) - v6) << 8)
                                                                                               + *(_DWORD *)&byte_5D4594[810632]);
        }
        while ( v7 > v6 );
      }
    }
  }
  return result;
}

//----- (004B1E30) --------------------------------------------------------
int __cdecl sub_4B1E30(int a1, int a2, int a3)
{
  int result; // eax
  int v4; // edi
  int v5; // ebp
  int v6; // edx
  bool v7; // cc
  unsigned __int8 v8; // dl
  int v9; // esi
  int v10; // ebx
  int v11; // ebx
  int v12; // esi
  int v13; // esi
  int v14; // ebp
  int v15; // edi
  int v16; // ecx
  int v17; // esi
  int v18; // [esp+10h] [ebp-3Ch]
  int v19; // [esp+14h] [ebp-38h]
  int v20; // [esp+18h] [ebp-34h]
  int v21; // [esp+1Ch] [ebp-30h]
  int v22; // [esp+20h] [ebp-2Ch]
  unsigned __int8 v23; // [esp+24h] [ebp-28h]
  int v24; // [esp+24h] [ebp-28h]
  int v25; // [esp+28h] [ebp-24h]
  int v26; // [esp+2Ch] [ebp-20h]
  int v27; // [esp+30h] [ebp-1Ch]
  int v28; // [esp+34h] [ebp-18h]
  int v29; // [esp+38h] [ebp-14h]
  int v30; // [esp+3Ch] [ebp-10h]
  int v31; // [esp+3Ch] [ebp-10h]
  int v32; // [esp+40h] [ebp-Ch]
  int v33; // [esp+44h] [ebp-8h]
  int v34; // [esp+48h] [ebp-4h]
  int i; // [esp+50h] [ebp+4h]
  int v36; // [esp+58h] [ebp+Ch]

  result = *(_DWORD *)&byte_5D4594[810632];
  if ( *(_DWORD *)&byte_5D4594[810632] )
  {
    v4 = a3;
    v32 = 0;
    v22 = 1 - a3;
    v25 = 5 - 2 * a3;
    v33 = a3;
    v29 = 3;
    v5 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 12);
    v23 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
    v6 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 4);
    v18 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 16);
    result = a2;
    v21 = v6;
    v7 = a1 < v6;
    v8 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
    v9 = a2 + a3;
    v19 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 12);
    v20 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 8);
    v30 = a2 + a3;
    if ( !v7 && a1 < v5 && v9 >= *(int *)(*(_DWORD *)&byte_5D4594[3799572] + 8) && v9 < v18 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 12);
      *(_BYTE *)(a1 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * (a2 + a3))) = *(_BYTE *)(v23
                                                                                                + (*(unsigned __int8 *)(a1 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * (a2 + a3))) << 8)
                                                                                                + *(_DWORD *)&byte_5D4594[810632]);
    }
    v10 = a1 + a3;
    if ( a1 + a3 >= v21 )
    {
      if ( v10 < v5 && a2 >= v20 && a2 < v18 )
      {
        v5 = v19;
        *(_BYTE *)(a1 + a3 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2)) = *(_BYTE *)(v23
                                                                                                + (*(unsigned __int8 *)(a1 + a3 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2)) << 8)
                                                                                                + *(_DWORD *)&byte_5D4594[810632]);
        v10 = a1 + a3;
      }
      if ( v10 >= v21 && v10 < v5 && a2 >= v20 && a2 < v18 )
      {
        v5 = v19;
        *(_BYTE *)(v10 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2)) = *(_BYTE *)(v23
                                                                                            + (*(unsigned __int8 *)(v10 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2)) << 8)
                                                                                            + *(_DWORD *)&byte_5D4594[810632]);
      }
    }
    v11 = a2 - a3;
    if ( a1 >= v21 )
    {
      if ( a1 < v5 && v11 >= v20 && v11 < v18 )
      {
        v5 = v19;
        *(_BYTE *)(a1 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * (a2 - a3))) = *(_BYTE *)(v23
                                                                                                  + (*(unsigned __int8 *)(a1 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * (a2 - a3))) << 8)
                                                                                                  + *(_DWORD *)&byte_5D4594[810632]);
        v11 = a2 - a3;
      }
      if ( a1 >= v21 && a1 < v5 && v11 >= v20 && v11 < v18 )
      {
        *(_BYTE *)(a1 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v11)) = *(_BYTE *)(v23
                                                                                            + (*(unsigned __int8 *)(a1 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v11)) << 8)
                                                                                            + *(_DWORD *)&byte_5D4594[810632]);
        v11 = a2 - a3;
      }
    }
    v12 = a1 - a3;
    if ( a1 - a3 >= v21 )
    {
      if ( v12 < v19 && a2 >= v20 && a2 < v18 )
      {
        *(_BYTE *)(v12 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2)) = *(_BYTE *)(v23
                                                                                            + (*(unsigned __int8 *)(v12 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2)) << 8)
                                                                                            + *(_DWORD *)&byte_5D4594[810632]);
        v8 = v23;
        v11 = a2 - a3;
      }
      if ( v12 >= v21 && v12 < v19 && a2 >= v20 && a2 < v18 )
      {
        *(_BYTE *)(v12 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2)) = *(_BYTE *)(v8
                                                                                            + (*(unsigned __int8 *)(v12 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2)) << 8)
                                                                                            + *(_DWORD *)&byte_5D4594[810632]);
        v8 = v23;
        v11 = a2 - a3;
      }
    }
    if ( a1 >= v21 && a1 < v19 )
    {
      if ( v30 >= v20 && v30 < v18 )
      {
        *(_BYTE *)(a1 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v30)) = *(_BYTE *)(v8
                                                                                            + (*(unsigned __int8 *)(a1 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v30)) << 8)
                                                                                            + *(_DWORD *)&byte_5D4594[810632]);
        v8 = v23;
      }
      v11 = a2 - a3;
    }
    if ( a3 > 0 )
    {
      v36 = a1 - a3;
      v31 = 4 * v30;
      v28 = a1 + v4;
      v24 = 4 * v11;
      v34 = a1 - a2;
      v13 = a2 - a1;
      result = v36;
      v14 = a1;
      v27 = 4 * a2;
      v26 = 4 * a2;
      for ( i = a2 - a1; ; v13 = i )
      {
        if ( v22 >= 0 )
        {
          v22 += v25;
          v25 += 4;
          --v33;
          v31 -= 4;
          v15 = v28 - 1;
          ++result;
          --v28;
          v24 += 4;
          v36 = result;
        }
        else
        {
          v22 += v29;
          v15 = v28;
          v25 += 2;
        }
        v29 += 2;
        ++v14;
        ++v32;
        v26 -= 4;
        --a2;
        v27 += 4;
        if ( v14 < v21 || v14 >= v19 )
          goto LABEL_54;
        v16 = v13 + v15;
        v17 = v20;
        if ( v16 >= v20 && v16 < v18 )
          break;
LABEL_55:
        if ( v15 >= v21 && v15 < v19 )
        {
          if ( v14 + i >= v17 && v14 + i < v18 )
          {
            v17 = v20;
            *(_BYTE *)(v15 + *(_DWORD *)(v27 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(v8
                                                                                             + (*(unsigned __int8 *)(*(_DWORD *)(v27 + *(_DWORD *)&byte_5D4594[3798784]) + v15) << 8)
                                                                                             + *(_DWORD *)&byte_5D4594[810632]);
            result = v36;
          }
          if ( v15 < v19 && a2 >= v17 && a2 < v18 )
          {
            *(_BYTE *)(v15 + *(_DWORD *)(v26 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(v8
                                                                                             + (*(unsigned __int8 *)(*(_DWORD *)(v26 + *(_DWORD *)&byte_5D4594[3798784]) + v15) << 8)
                                                                                             + *(_DWORD *)&byte_5D4594[810632]);
            result = v36;
          }
        }
        if ( v14 >= v21 && v14 < v19 && result + i >= v17 && result + i < v18 )
        {
          *(_BYTE *)(v14 + *(_DWORD *)(v24 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(v8
                                                                                           + (*(unsigned __int8 *)(*(_DWORD *)(v24 + *(_DWORD *)&byte_5D4594[3798784]) + v14) << 8)
                                                                                           + *(_DWORD *)&byte_5D4594[810632]);
          result = v36;
        }
        if ( v34 + a2 >= v21 && v34 + a2 < v19 && result + i >= v17 && result + i < v18 )
        {
          *(_BYTE *)(v34 + a2 + *(_DWORD *)(v24 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(v8
                                                                                                + (*(unsigned __int8 *)(*(_DWORD *)(v24 + *(_DWORD *)&byte_5D4594[3798784]) + v34 + a2) << 8)
                                                                                                + *(_DWORD *)&byte_5D4594[810632]);
          result = v36;
        }
        if ( result >= v21 && result < v19 )
        {
          if ( a2 >= v17 && a2 < v18 )
          {
            *(_BYTE *)(result + *(_DWORD *)(v26 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(v8
                                                                                                + (*(unsigned __int8 *)(result + *(_DWORD *)(v26 + *(_DWORD *)&byte_5D4594[3798784])) << 8)
                                                                                                + *(_DWORD *)&byte_5D4594[810632]);
            result = v36;
          }
          if ( result < v19 && v14 + i >= v17 && v14 + i < v18 )
            *(_BYTE *)(result + *(_DWORD *)(v27 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(v8
                                                                                                + (*(unsigned __int8 *)(result + *(_DWORD *)(v27 + *(_DWORD *)&byte_5D4594[3798784])) << 8)
                                                                                                + *(_DWORD *)&byte_5D4594[810632]);
        }
        if ( v33 <= v32 )
          return result;
      }
      *(_BYTE *)(v14 + *(_DWORD *)(v31 + *(_DWORD *)&byte_5D4594[3798784])) = *(_BYTE *)(v8
                                                                                       + (*(unsigned __int8 *)(*(_DWORD *)(v31 + *(_DWORD *)&byte_5D4594[3798784]) + v14) << 8)
                                                                                       + *(_DWORD *)&byte_5D4594[810632]);
      result = v36;
LABEL_54:
      v17 = v20;
      goto LABEL_55;
    }
  }
  return result;
}

//----- (004B2480) --------------------------------------------------------
_WORD *__cdecl sub_4B2480(int a1, int a2, int a3)
{
  _WORD *result; // eax
  unsigned int v4; // esi
  int v5; // ecx
  int v6; // ecx
  int v7; // ebp
  int v8; // esi
  int v9; // edi
  int v10; // ecx
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  __int16 v18; // dx
  int v19; // ecx
  int v20; // eax
  int v21; // eax
  int v22; // eax
  int v23; // eax
  int v24; // eax
  int v25; // eax
  int v26; // eax
  int v27; // eax
  _WORD *v28; // [esp+1Ch] [ebp-34h]
  _WORD *v29; // [esp+1Ch] [ebp-34h]
  _WORD *v30; // [esp+1Ch] [ebp-34h]
  _WORD *v31; // [esp+1Ch] [ebp-34h]
  _WORD *v32; // [esp+1Ch] [ebp-34h]
  _WORD *v33; // [esp+1Ch] [ebp-34h]
  _WORD *v34; // [esp+1Ch] [ebp-34h]
  _WORD *v35; // [esp+1Ch] [ebp-34h]
  _WORD *v36; // [esp+1Ch] [ebp-34h]
  _WORD *v37; // [esp+1Ch] [ebp-34h]
  _WORD *v38; // [esp+1Ch] [ebp-34h]
  _WORD *v39; // [esp+1Ch] [ebp-34h]
  _WORD *v40; // [esp+1Ch] [ebp-34h]
  _WORD *v41; // [esp+1Ch] [ebp-34h]
  _WORD *v42; // [esp+1Ch] [ebp-34h]
  _WORD *v43; // [esp+1Ch] [ebp-34h]
  int v44; // [esp+20h] [ebp-30h]
  int v45; // [esp+24h] [ebp-2Ch]
  int v46; // [esp+28h] [ebp-28h]
  int v47; // [esp+28h] [ebp-28h]
  int v48; // [esp+2Ch] [ebp-24h]
  int v49; // [esp+30h] [ebp-20h]
  int v50; // [esp+30h] [ebp-20h]
  int v51; // [esp+34h] [ebp-1Ch]
  int v52; // [esp+34h] [ebp-1Ch]
  int v53; // [esp+38h] [ebp-18h]
  int v54; // [esp+38h] [ebp-18h]
  int v55; // [esp+3Ch] [ebp-14h]
  _WORD *v56; // [esp+40h] [ebp-10h]
  int v57; // [esp+44h] [ebp-Ch]
  unsigned __int8 v58; // [esp+48h] [ebp-8h]
  int v59; // [esp+48h] [ebp-8h]
  unsigned __int8 v60; // [esp+4Ch] [ebp-4h]
  int v61; // [esp+4Ch] [ebp-4h]
  int v62; // [esp+54h] [ebp+4h]
  int v63; // [esp+54h] [ebp+4h]
  int v64; // [esp+58h] [ebp+8h]

  if ( **(_DWORD **)&byte_5D4594[3799572] && sub_49F8E0(a1, a2, a3) )
    return (_WORD *)sub_4B3450(a1, a2, a3);
  v57 = 0;
  v56 = (_WORD *)a3;
  v4 = *(unsigned __int16 *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
  v55 = 3;
  v58 = (*(_DWORD *)&byte_5D4594[3804368] & v4) >> byte_5D4594[3804380];
  v44 = 1 - a3;
  v60 = ((unsigned __int8)*(_WORD *)(*(_DWORD *)&byte_5D4594[3799572] + 244) & byte_5D4594[3804372]) << byte_5D4594[3804384];
  v45 = 5 - 2 * a3;
  v5 = 4 * (a3 + a2);
  v53 = v5;
  v46 = 2 * a1;
  v6 = 2 * a1 + *(_DWORD *)(v5 + *(_DWORD *)&byte_5D4594[3798784]);
  v28 = (_WORD *)v6;
  LOWORD(v6) = *(_WORD *)v6;
  v7 = (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v4) >> byte_5D4594[3804376]);
  v8 = v60;
  v9 = v58;
  *v28 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                  + 2
                  * (unsigned __int8)((((unsigned __int8)v6 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                    + ((v60
                                      - (unsigned __int8)(((unsigned __int8)v6 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v6) >> byte_5D4594[3804380]) + ((v58 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v6) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v6) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v6) >> byte_5D4594[3804376])) >> 2)));
  v49 = 4 * a2;
  v10 = 2 * (a1 + a3) + *(_DWORD *)(4 * a2 + *(_DWORD *)&byte_5D4594[3798784]);
  v59 = 2 * (a1 + a3);
  v29 = (_WORD *)v10;
  LOWORD(v10) = *(_WORD *)v10;
  *v29 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                  + 2
                  * (unsigned __int8)((((unsigned __int8)v10 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                    + ((v60
                                      - (unsigned __int8)(((unsigned __int8)v10 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v10) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v10) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v10) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v10) >> byte_5D4594[3804376])) >> 2)));
  v11 = v59 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2);
  v30 = (_WORD *)v11;
  LOWORD(v11) = *(_WORD *)v11;
  *v30 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                  + 2
                  * (unsigned __int8)((((unsigned __int8)v11 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                    + ((v60
                                      - (unsigned __int8)(((unsigned __int8)v11 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v11) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v11) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v11) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v11) >> byte_5D4594[3804376])) >> 2)));
  v12 = 4 * (a2 - a3);
  v61 = v12;
  v13 = 2 * a1 + *(_DWORD *)(v12 + *(_DWORD *)&byte_5D4594[3798784]);
  v31 = (_WORD *)v13;
  LOWORD(v13) = *(_WORD *)v13;
  *v31 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                  + 2
                  * (unsigned __int8)((((unsigned __int8)v13 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                    + ((v8
                                      - (unsigned __int8)(((unsigned __int8)v13 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v13) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v13) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v13) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v13) >> byte_5D4594[3804376])) >> 2)));
  v51 = 2 * a1;
  v14 = 2 * a1 + *(_DWORD *)(v61 + *(_DWORD *)&byte_5D4594[3798784]);
  v32 = (_WORD *)v14;
  LOWORD(v14) = *(_WORD *)v14;
  *v32 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                  + 2
                  * (unsigned __int8)((((unsigned __int8)v14 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                    + ((v8
                                      - (unsigned __int8)(((unsigned __int8)v14 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v14) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v14) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v14) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v14) >> byte_5D4594[3804376])) >> 2)));
  v62 = 2 * (a1 - a3);
  v15 = v62 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2);
  v33 = (_WORD *)v15;
  LOWORD(v15) = *(_WORD *)v15;
  *v33 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                  + 2
                  * (unsigned __int8)((((unsigned __int8)v15 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                    + ((v8
                                      - (unsigned __int8)(((unsigned __int8)v15 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v15) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v15) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v15) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v15) >> byte_5D4594[3804376])) >> 2)));
  v16 = v62 + *(_DWORD *)(4 * a2 + *(_DWORD *)&byte_5D4594[3798784]);
  v34 = (_WORD *)v16;
  LOWORD(v16) = *(_WORD *)v16;
  *v34 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                  + 2
                  * (unsigned __int8)((((unsigned __int8)v16 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                    + ((v8
                                      - (unsigned __int8)(((unsigned __int8)v16 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v16) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v16) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v16) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v16) >> byte_5D4594[3804376])) >> 2)));
  v17 = v51 + *(_DWORD *)(v53 + *(_DWORD *)&byte_5D4594[3798784]);
  v35 = (_WORD *)v17;
  LOWORD(v17) = *(_WORD *)v17;
  v18 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                 + 2
                 * (unsigned __int8)((((unsigned __int8)v17 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                   + ((v8
                                     - (unsigned __int8)(((unsigned __int8)v17 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v17) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v17) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v17) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v17) >> byte_5D4594[3804376])) >> 2)));
  result = v35;
  *v35 = v18;
  if ( a3 > 0 )
  {
    v52 = v53;
    v19 = v46;
    v64 = v59;
    v48 = v49;
    v47 = v49;
    v50 = v62;
    v54 = v19;
    v63 = v61;
    while ( 1 )
    {
      if ( v44 >= 0 )
      {
        v44 += v45;
        v45 += 4;
        v56 = (_WORD *)((char *)v56 - 1);
        v64 -= 2;
        v52 -= 4;
        v63 += 4;
        v50 += 2;
      }
      else
      {
        v44 += v55;
        v45 += 2;
      }
      v55 += 2;
      ++v57;
      v48 += 4;
      v47 -= 4;
      v54 -= 2;
      v20 = v19 + 2 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v52);
      v36 = (_WORD *)v20;
      LOWORD(v20) = *(_WORD *)v20;
      *v36 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                      + 2
                      * (unsigned __int8)((((unsigned __int8)v20 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                        + ((v8
                                          - (unsigned __int8)(((unsigned __int8)v20 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v20) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v20) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v20) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v20) >> byte_5D4594[3804376])) >> 2)));
      v21 = v64 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v48);
      v37 = (_WORD *)v21;
      LOWORD(v21) = *(_WORD *)v21;
      *v37 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                      + 2
                      * (unsigned __int8)((((unsigned __int8)v21 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                        + ((v8
                                          - (unsigned __int8)(((unsigned __int8)v21 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v21) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v21) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v21) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v21) >> byte_5D4594[3804376])) >> 2)));
      v22 = v64 + *(_DWORD *)(v47 + *(_DWORD *)&byte_5D4594[3798784]);
      v38 = (_WORD *)v22;
      LOWORD(v22) = *(_WORD *)v22;
      *v38 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                      + 2
                      * (unsigned __int8)((((unsigned __int8)v22 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                        + ((v8
                                          - (unsigned __int8)(((unsigned __int8)v22 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v22) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v22) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v22) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v22) >> byte_5D4594[3804376])) >> 2)));
      v23 = v19 + 2 + *(_DWORD *)(v63 + *(_DWORD *)&byte_5D4594[3798784]);
      v39 = (_WORD *)v23;
      LOWORD(v23) = *(_WORD *)v23;
      *v39 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                      + 2
                      * (unsigned __int8)((((unsigned __int8)v23 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                        + ((v8
                                          - (unsigned __int8)(((unsigned __int8)v23 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v23) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v23) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v23) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v23) >> byte_5D4594[3804376])) >> 2)));
      v24 = v54 + *(_DWORD *)(v63 + *(_DWORD *)&byte_5D4594[3798784]);
      v40 = (_WORD *)v24;
      LOWORD(v24) = *(_WORD *)v24;
      *v40 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                      + 2
                      * (unsigned __int8)((((unsigned __int8)v24 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                        + ((v8
                                          - (unsigned __int8)(((unsigned __int8)v24 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v24) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v24) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v24) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v24) >> byte_5D4594[3804376])) >> 2)));
      v25 = v50 + *(_DWORD *)(v47 + *(_DWORD *)&byte_5D4594[3798784]);
      v41 = (_WORD *)v25;
      LOWORD(v25) = *(_WORD *)v25;
      *v41 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                      + 2
                      * (unsigned __int8)((((unsigned __int8)v25 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                        + ((v8
                                          - (unsigned __int8)(((unsigned __int8)v25 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v25) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v25) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v25) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v25) >> byte_5D4594[3804376])) >> 2)));
      v26 = v50 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v48);
      v42 = (_WORD *)v26;
      LOWORD(v26) = *(_WORD *)v26;
      *v42 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                      + 2
                      * (unsigned __int8)((((unsigned __int8)v26 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                        + ((v8
                                          - (unsigned __int8)(((unsigned __int8)v26 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v26) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v26) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v26) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v26) >> byte_5D4594[3804376])) >> 2)));
      v27 = v54 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v52);
      v43 = (_WORD *)v27;
      LOWORD(v27) = *(_WORD *)v27;
      *v43 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                      + 2
                      * (unsigned __int8)((((unsigned __int8)v27 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                        + ((v8
                                          - (unsigned __int8)(((unsigned __int8)v27 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v27) >> byte_5D4594[3804380]) + ((v9 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v27) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v27) >> byte_5D4594[3804376]) + ((v7 - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v27) >> byte_5D4594[3804376])) >> 2)));
      result = v56;
      if ( (int)v56 <= v57 )
        break;
      v19 += 2;
    }
  }
  return result;
}

//----- (004B3450) --------------------------------------------------------
int __cdecl sub_4B3450(int a1, int a2, int a3)
{
  __int16 v3; // ax
  unsigned __int8 v4; // bp
  unsigned __int8 v5; // dl
  unsigned __int8 v6; // di
  char v7; // bl
  unsigned __int8 v8; // al
  unsigned __int8 v9; // si
  int v10; // ecx
  int v11; // ecx
  int v12; // ecx
  int v13; // ecx
  int result; // eax
  int v15; // eax
  int v16; // ebx
  int v17; // edx
  int v18; // ecx
  int v19; // edx
  int v20; // eax
  int v21; // eax
  _WORD *v22; // eax
  unsigned int v23; // ebx
  int v24; // ecx
  _WORD *v25; // eax
  unsigned int v26; // ebx
  _WORD *v27; // eax
  unsigned int v28; // ebx
  _WORD *v29; // eax
  unsigned int v30; // ebx
  _WORD *v31; // eax
  unsigned int v32; // ebx
  _WORD *v33; // eax
  unsigned int v34; // ebx
  _WORD *v35; // eax
  unsigned int v36; // ebx
  _WORD *v37; // eax
  unsigned int v38; // ebx
  _WORD *v39; // [esp+1Ch] [ebp-54h]
  _WORD *v40; // [esp+1Ch] [ebp-54h]
  _WORD *v41; // [esp+1Ch] [ebp-54h]
  _WORD *v42; // [esp+1Ch] [ebp-54h]
  _WORD *v43; // [esp+1Ch] [ebp-54h]
  _WORD *v44; // [esp+1Ch] [ebp-54h]
  _WORD *v45; // [esp+1Ch] [ebp-54h]
  _WORD *v46; // [esp+1Ch] [ebp-54h]
  int v47; // [esp+1Ch] [ebp-54h]
  int v48; // [esp+20h] [ebp-50h]
  int v49; // [esp+24h] [ebp-4Ch]
  int v50; // [esp+28h] [ebp-48h]
  unsigned int v51; // [esp+2Ch] [ebp-44h]
  unsigned int v52; // [esp+2Ch] [ebp-44h]
  unsigned int v53; // [esp+2Ch] [ebp-44h]
  unsigned int v54; // [esp+2Ch] [ebp-44h]
  unsigned int v55; // [esp+2Ch] [ebp-44h]
  unsigned int v56; // [esp+2Ch] [ebp-44h]
  unsigned int v57; // [esp+2Ch] [ebp-44h]
  unsigned int v58; // [esp+2Ch] [ebp-44h]
  int v59; // [esp+2Ch] [ebp-44h]
  int v60; // [esp+30h] [ebp-40h]
  int v61; // [esp+34h] [ebp-3Ch]
  int v62; // [esp+34h] [ebp-3Ch]
  int v63; // [esp+38h] [ebp-38h]
  int v64; // [esp+38h] [ebp-38h]
  int v65; // [esp+3Ch] [ebp-34h]
  int v66; // [esp+40h] [ebp-30h]
  int v67; // [esp+44h] [ebp-2Ch]
  int v68; // [esp+44h] [ebp-2Ch]
  int v69; // [esp+48h] [ebp-28h]
  int v70; // [esp+4Ch] [ebp-24h]
  unsigned __int8 v71; // [esp+50h] [ebp-20h]
  int v72; // [esp+50h] [ebp-20h]
  int v73; // [esp+54h] [ebp-1Ch]
  int v74; // [esp+54h] [ebp-1Ch]
  int v75; // [esp+58h] [ebp-18h]
  unsigned __int8 v76; // [esp+5Ch] [ebp-14h]
  int v77; // [esp+5Ch] [ebp-14h]
  int v78; // [esp+60h] [ebp-10h]
  int v79; // [esp+64h] [ebp-Ch]
  unsigned __int8 v80; // [esp+68h] [ebp-8h]
  int i; // [esp+68h] [ebp-8h]
  int v82; // [esp+78h] [ebp+8h]
  int v83; // [esp+7Ch] [ebp+Ch]

  v79 = a3;
  v65 = 1 - a3;
  v66 = 5 - 2 * a3;
  v60 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 4);
  v48 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 12);
  v3 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3799572] + 244);
  v49 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 8);
  v50 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 16);
  v78 = 0;
  v75 = 3;
  v71 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v3) >> byte_5D4594[3804376];
  v4 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v3) >> byte_5D4594[3804376];
  v76 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v3) >> byte_5D4594[3804380];
  v5 = byte_5D4594[3804372];
  v6 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v3) >> byte_5D4594[3804380];
  v7 = v3 & byte_5D4594[3804372];
  v8 = byte_5D4594[3804384];
  v73 = a3 + a2;
  v80 = v7 << byte_5D4594[3804384];
  v9 = v7 << byte_5D4594[3804384];
  if ( a1 >= v60 && a1 < v48 && v73 >= v49 && v73 < v50 )
  {
    v39 = (_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v73) + 2 * a1);
    v51 = (unsigned __int16)*v39;
    *v39 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                    + 2
                    * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v51) >> byte_5D4594[3804376])
                                      + ((v71
                                        - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v51) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v51) >> byte_5D4594[3804380]) + ((v76 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v51) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v39 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((v80 - (unsigned __int8)((*(_BYTE *)v39 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2)));
    v8 = byte_5D4594[3804384];
    v5 = byte_5D4594[3804372];
  }
  v10 = a3 + a1;
  v63 = a3 + a1;
  if ( a3 + a1 < v60 )
    goto LABEL_17;
  if ( v10 < v48 )
  {
    if ( a2 >= v49 && a2 < v50 )
    {
      v40 = (_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2) + 2 * v63);
      v52 = (unsigned __int16)*v40;
      *v40 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                      + 2
                      * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v52) >> byte_5D4594[3804376])
                                        + ((v71
                                          - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v52) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v52) >> byte_5D4594[3804380]) + ((v76 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v52) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v40 & v5) << v8) + ((v80 - (unsigned __int8)((*(_BYTE *)v40 & v5) << v8)) >> 2)));
      v8 = byte_5D4594[3804384];
      v5 = byte_5D4594[3804372];
    }
    v10 = a3 + a1;
  }
  if ( v10 < v60 || v10 >= v48 )
    goto LABEL_17;
  v11 = a2;
  if ( a2 >= v49 && a2 < v50 )
  {
    v41 = (_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2) + 2 * v63);
    v53 = (unsigned __int16)*v41;
    *v41 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                    + 2
                    * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v53) >> byte_5D4594[3804376])
                                      + ((v71
                                        - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v53) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v53) >> byte_5D4594[3804380]) + ((v76 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v53) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v41 & v5) << v8) + ((v80 - (unsigned __int8)((*(_BYTE *)v41 & v5) << v8)) >> 2)));
    v8 = byte_5D4594[3804384];
    v5 = byte_5D4594[3804372];
LABEL_17:
    v11 = a2;
  }
  v67 = v11 - a3;
  if ( a1 >= v60 && a1 < v48 && v67 >= v49 && v67 < v50 )
  {
    v42 = (_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v67) + 2 * a1);
    v54 = (unsigned __int16)*v42;
    *v42 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                    + 2
                    * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v54) >> byte_5D4594[3804376])
                                      + ((v71
                                        - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v54) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v54) >> byte_5D4594[3804380]) + ((v76 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v54) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v42 & v5) << v8) + ((v80 - (unsigned __int8)((*(_BYTE *)v42 & v5) << v8)) >> 2)));
    v8 = byte_5D4594[3804384];
    v5 = byte_5D4594[3804372];
  }
  if ( a1 >= v60 && a1 < v48 && v67 >= v49 && v67 < v50 )
  {
    v43 = (_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v67) + 2 * a1);
    v55 = (unsigned __int16)*v43;
    *v43 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                    + 2
                    * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v55) >> byte_5D4594[3804376])
                                      + ((v71
                                        - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v55) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v55) >> byte_5D4594[3804380]) + ((v76 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v55) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v43 & v5) << v8) + ((v80 - (unsigned __int8)((*(_BYTE *)v43 & v5) << v8)) >> 2)));
    v8 = byte_5D4594[3804384];
    v5 = byte_5D4594[3804372];
  }
  v12 = a1 - a3;
  v61 = a1 - a3;
  if ( a1 - a3 >= v60 )
  {
    if ( v12 < v48 )
    {
      if ( a2 >= v49 && a2 < v50 )
      {
        v44 = (_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2) + 2 * v61);
        v56 = (unsigned __int16)*v44;
        *v44 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                        + 2
                        * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v56) >> byte_5D4594[3804376])
                                          + ((v71
                                            - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v56) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v56) >> byte_5D4594[3804380]) + ((v76 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v56) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v44 & v5) << v8) + ((v80 - (unsigned __int8)((*(_BYTE *)v44 & v5) << v8)) >> 2)));
        v8 = byte_5D4594[3804384];
        v5 = byte_5D4594[3804372];
      }
      v12 = a1 - a3;
    }
    if ( v12 >= v60 && v12 < v48 && a2 >= v49 && a2 < v50 )
    {
      v45 = (_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * a2) + 2 * v61);
      v57 = (unsigned __int16)*v45;
      *v45 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                      + 2
                      * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v57) >> byte_5D4594[3804376])
                                        + ((v71
                                          - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v57) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v57) >> byte_5D4594[3804380]) + ((v76 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v57) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v45 & v5) << v8) + ((v80 - (unsigned __int8)((*(_BYTE *)v45 & v5) << v8)) >> 2)));
      v8 = byte_5D4594[3804384];
      v5 = byte_5D4594[3804372];
    }
  }
  v13 = a1;
  if ( a1 >= v60 && a1 < v48 )
  {
    if ( v73 >= v49 && v73 < v50 )
    {
      v46 = (_WORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v73) + 2 * a1);
      v58 = (unsigned __int16)*v46;
      *v46 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                      + 2
                      * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v58) >> byte_5D4594[3804376])
                                        + ((v71
                                          - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v58) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v58) >> byte_5D4594[3804380]) + ((v76 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v58) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v46 & v5) << v8) + ((v80 - (unsigned __int8)((*(_BYTE *)v46 & v5) << v8)) >> 2)));
    }
    v13 = a1;
  }
  result = a3;
  if ( a3 > 0 )
  {
    v59 = a3 + a2;
    v15 = a2;
    v82 = a1 - a3;
    v72 = 2 * v61;
    v69 = 4 * v15;
    v83 = v13;
    v62 = 2 * v13;
    v47 = 4 * v67;
    v64 = 2 * v63;
    v16 = 2 * v13;
    v17 = v15 - v13;
    v18 = v13 - v15;
    v70 = v15;
    v74 = v16;
    v68 = v17;
    for ( i = v18; ; v18 = i )
    {
      if ( v65 >= 0 )
      {
        v65 += v66;
        v66 += 4;
        --v79;
        v64 -= 2;
        v47 += 4;
        v72 += 2;
        ++v82;
        v19 = --v59;
      }
      else
      {
        v65 += v75;
        v19 = v59;
        v66 += 2;
      }
      v75 += 2;
      ++v78;
      v62 += 2;
      v69 -= 4;
      v20 = v70 + 1;
      v70 = v20;
      v74 -= 2;
      v21 = v18 + v20;
      --v83;
      v77 = v21;
      if ( v21 >= v60 && v21 < v48 && v19 >= v49 && v19 < v50 )
      {
        v22 = (_WORD *)(v62 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v19));
        v23 = (unsigned __int16)*v22;
        *v22 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                        + 2
                        * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v23) >> byte_5D4594[3804376])
                                          + ((v4
                                            - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v23) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v23) >> byte_5D4594[3804380]) + ((v6 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v23) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)((((unsigned __int8)*v22 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((v9 - (unsigned __int8)(((unsigned __int8)*v22 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2)));
        v21 = v77;
      }
      v24 = v59 + i;
      if ( v59 + i >= v60 )
      {
        if ( v24 < v48 && v70 >= v49 && v70 < v50 )
        {
          v25 = (_WORD *)(v64 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v70));
          v26 = (unsigned __int16)*v25;
          v24 = v59 + i;
          *v25 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                          + 2
                          * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v26) >> byte_5D4594[3804376])
                                            + ((v4
                                              - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v26) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v26) >> byte_5D4594[3804380]) + ((v6 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v26) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)((((unsigned __int8)*v25 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((v9 - (unsigned __int8)(((unsigned __int8)*v25 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2)));
          v21 = v77;
        }
        if ( v24 >= v60 && v24 < v48 && v68 + v83 >= v49 && v68 + v83 < v50 )
        {
          v27 = (_WORD *)(v64 + *(_DWORD *)(v69 + *(_DWORD *)&byte_5D4594[3798784]));
          v28 = (unsigned __int16)*v27;
          *v27 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                          + 2
                          * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v28) >> byte_5D4594[3804376])
                                            + ((v4
                                              - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v28) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v28) >> byte_5D4594[3804380]) + ((v6 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v28) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)((((unsigned __int8)*v27 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((v9 - (unsigned __int8)(((unsigned __int8)*v27 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2)));
          v21 = v77;
        }
      }
      if ( v21 >= v60 && v21 < v48 && v68 + v82 >= v49 && v68 + v82 < v50 )
      {
        v29 = (_WORD *)(v62 + *(_DWORD *)(v47 + *(_DWORD *)&byte_5D4594[3798784]));
        v30 = (unsigned __int16)*v29;
        *v29 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                        + 2
                        * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v30) >> byte_5D4594[3804376])
                                          + ((v4
                                            - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v30) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v30) >> byte_5D4594[3804380]) + ((v6 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v30) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)((((unsigned __int8)*v29 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((v9 - (unsigned __int8)(((unsigned __int8)*v29 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2)));
      }
      if ( v83 >= v60 && v83 < v48 && v68 + v82 >= v49 && v68 + v82 < v50 )
      {
        v31 = (_WORD *)(v74 + *(_DWORD *)(v47 + *(_DWORD *)&byte_5D4594[3798784]));
        v32 = (unsigned __int16)*v31;
        *v31 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                        + 2
                        * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v32) >> byte_5D4594[3804376])
                                          + ((v4
                                            - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v32) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v32) >> byte_5D4594[3804380]) + ((v6 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v32) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)((((unsigned __int8)*v31 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((v9 - (unsigned __int8)(((unsigned __int8)*v31 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2)));
      }
      if ( v82 >= v60 )
      {
        if ( v82 < v48 && v68 + v83 >= v49 && v68 + v83 < v50 )
        {
          v33 = (_WORD *)(v72 + *(_DWORD *)(v69 + *(_DWORD *)&byte_5D4594[3798784]));
          v34 = (unsigned __int16)*v33;
          *v33 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                          + 2
                          * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v34) >> byte_5D4594[3804376])
                                            + ((v4
                                              - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v34) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v34) >> byte_5D4594[3804380]) + ((v6 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v34) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)((((unsigned __int8)*v33 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((v9 - (unsigned __int8)(((unsigned __int8)*v33 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2)));
        }
        if ( v82 < v48 && v70 >= v49 && v70 < v50 )
        {
          v35 = (_WORD *)(v72 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v70));
          v36 = (unsigned __int16)*v35;
          *v35 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                          + 2
                          * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v36) >> byte_5D4594[3804376])
                                            + ((v4
                                              - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v36) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v36) >> byte_5D4594[3804380]) + ((v6 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v36) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)((((unsigned __int8)*v35 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((v9 - (unsigned __int8)(((unsigned __int8)*v35 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2)));
        }
      }
      if ( v83 >= v60 && v83 < v48 && v59 >= v49 && v59 < v50 )
      {
        v37 = (_WORD *)(v74 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + 4 * v59));
        v38 = (unsigned __int16)*v37;
        *v37 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                        + 2
                        * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v38) >> byte_5D4594[3804376])
                                          + ((v4
                                            - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v38) >> byte_5D4594[3804376])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v38) >> byte_5D4594[3804380]) + ((v6 - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v38) >> byte_5D4594[3804380])) >> 2))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)((((unsigned __int8)*v37 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((v9 - (unsigned __int8)(((unsigned __int8)*v37 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 2)));
      }
      result = v79;
      if ( v79 <= v78 )
        break;
    }
  }
  return result;
}

//----- (004B4860) --------------------------------------------------------
int __cdecl sub_4B4860(int a1, int a2, int a3, int a4)
{
  int v4; // edi
  int v5; // eax
  int result; // eax
  int v7; // eax
  int v8; // eax
  int v9; // ebx
  int v10; // edi
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax

  v4 = *(_DWORD *)(a1 + 32);
  switch ( a2 )
  {
    case 5:
      goto LABEL_22;
    case 6:
    case 7:
      v9 = a3;
      v10 = (unsigned __int16)a3;
      sub_46AA60((_DWORD *)a1, &a4, &a3);
      if ( v10 > *(int *)(a1 + 8) + a4 - 10 )
        v10 = *(_DWORD *)(a1 + 8) + a4 - 10;
      sub_46A9B0(*(_DWORD **)(a1 + 400), v10 - a4 - 5, 0);
      sub_46B490(a1, 0x4000, 0, v9);
      return 1;
    case 8:
      v8 = *(_DWORD *)(a1 + 44);
      if ( !(v8 & 0x100) )
        goto LABEL_22;
      sub_46B490(*(_DWORD *)(a1 + 52), 0x4000, a1, 0);
      result = 1;
      break;
    case 17:
      v5 = *(_DWORD *)(a1 + 44);
      if ( !(v5 & 0x100) )
        goto LABEL_22;
      sub_46AFE0(a1, *(_DWORD *)(a1 + 72));
      sub_46B490(*(_DWORD *)(a1 + 52), 16389, a1, 0);
      sub_46B500(a1);
      result = 1;
      break;
    case 18:
      v7 = *(_DWORD *)(a1 + 44);
      if ( v7 & 0x100 )
      {
        sub_46AFE0(a1, *(_DWORD *)(a1 + 64));
        sub_46B490(*(_DWORD *)(a1 + 52), 16390, a1, 0);
        result = 1;
      }
      else
      {
LABEL_22:
        result = 1;
      }
      break;
    case 21:
      switch ( a3 )
      {
        case 15:
        case 208:
          if ( a4 != 2 )
            goto LABEL_22;
          sub_46A8A0();
          result = 1;
          break;
        case 200:
          if ( a4 == 2 )
            sub_46A8B0();
          goto LABEL_22;
        case 203:
          if ( a4 != 2 )
            goto LABEL_22;
          v13 = *(_DWORD *)(v4 + 12);
          if ( v13 >= *(int *)(v4 + 4) - 1 )
            goto LABEL_22;
          v14 = v13 + 2;
          *(_DWORD *)(v4 + 12) = v14;
          sub_46B490(*(_DWORD *)(a1 + 52), 16393, a1, v14);
          sub_46A9B0(
            *(_DWORD **)(a1 + 400),
            (__int64)((double)(int)(*(_DWORD *)(v4 + 12) - *(_DWORD *)v4) * *(float *)(v4 + 8)),
            0);
          result = 1;
          break;
        case 205:
          if ( a4 != 2 )
            goto LABEL_22;
          v11 = *(_DWORD *)(v4 + 12);
          if ( v11 <= *(int *)v4 + 1 )
            goto LABEL_22;
          v12 = v11 - 2;
          *(_DWORD *)(v4 + 12) = v12;
          sub_46B490(*(_DWORD *)(a1 + 52), 16393, a1, v12);
          sub_46A9B0(
            *(_DWORD **)(a1 + 400),
            (__int64)((double)(int)(*(_DWORD *)(v4 + 12) - *(_DWORD *)v4) * *(float *)(v4 + 8)),
            0);
          result = 1;
          break;
        default:
          goto LABEL_23;
      }
      break;
    default:
LABEL_23:
      result = 0;
      break;
  }
  return result;
}

//----- (004B4BA0) --------------------------------------------------------
int __cdecl sub_4B4BA0(int a1, int a2, unsigned int a3, int a4)
{
  int v4; // edi
  int v5; // eax
  int result; // eax
  int v7; // eax
  int v8; // eax
  int v9; // ebx
  signed int v10; // edi
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax

  v4 = *(_DWORD *)(a1 + 32);
  switch ( a2 )
  {
    case 5:
      goto LABEL_22;
    case 6:
    case 7:
      v9 = a3;
      v10 = a3 >> 16;
      sub_46AA60((_DWORD *)a1, &a3, &a4);
      if ( v10 > *(int *)(a1 + 12) + a4 - 10 )
        v10 = *(_DWORD *)(a1 + 12) + a4 - 10;
      sub_46A9B0(*(_DWORD **)(a1 + 400), 0, v10 - a4 - 5);
      sub_46B490(a1, 0x4000, 0, v9);
      return 1;
    case 8:
      v8 = *(_DWORD *)(a1 + 44);
      if ( !(v8 & 0x100) )
        goto LABEL_22;
      sub_46B490(*(_DWORD *)(a1 + 52), 0x4000, a1, 0);
      result = 1;
      break;
    case 17:
      v5 = *(_DWORD *)(a1 + 44);
      if ( !(v5 & 0x100) )
        goto LABEL_22;
      sub_46AFE0(a1, *(_DWORD *)(a1 + 72));
      sub_46B490(*(_DWORD *)(a1 + 52), 16389, a1, 0);
      sub_46B500(a1);
      result = 1;
      break;
    case 18:
      v7 = *(_DWORD *)(a1 + 44);
      if ( v7 & 0x100 )
      {
        sub_46AFE0(a1, *(_DWORD *)(a1 + 64));
        sub_46B490(*(_DWORD *)(a1 + 52), 16390, a1, 0);
        result = 1;
      }
      else
      {
LABEL_22:
        result = 1;
      }
      break;
    case 21:
      switch ( a3 )
      {
        case 0xFu:
        case 0xCDu:
          if ( a4 != 2 )
            goto LABEL_22;
          sub_46A8A0();
          result = 1;
          break;
        case 0xC8u:
          if ( a4 != 2 )
            goto LABEL_22;
          v11 = *(_DWORD *)(v4 + 12);
          if ( v11 >= *(int *)(v4 + 4) - 1 )
            goto LABEL_22;
          v12 = v11 + 2;
          *(_DWORD *)(v4 + 12) = v12;
          sub_46B490(*(_DWORD *)(a1 + 52), 16393, a1, v12);
          sub_46A9B0(
            *(_DWORD **)(a1 + 400),
            0,
            (__int64)((double)(int)(*(_DWORD *)(v4 + 4) - *(_DWORD *)(v4 + 12)) * *(float *)(v4 + 8)));
          result = 1;
          break;
        case 0xCBu:
          if ( a4 == 2 )
            sub_46A8B0();
          goto LABEL_22;
        case 0xD0u:
          if ( a4 != 2 )
            goto LABEL_22;
          v13 = *(_DWORD *)(v4 + 12);
          if ( v13 <= *(int *)v4 + 1 )
            goto LABEL_22;
          v14 = v13 - 2;
          *(_DWORD *)(v4 + 12) = v14;
          sub_46B490(*(_DWORD *)(a1 + 52), 16393, a1, v14);
          sub_46A9B0(
            *(_DWORD **)(a1 + 400),
            0,
            (__int64)((double)(int)(*(_DWORD *)(v4 + 4) - *(_DWORD *)(v4 + 12)) * *(float *)(v4 + 8)));
          result = 1;
          break;
        default:
          goto LABEL_23;
      }
      break;
    default:
LABEL_23:
      result = 0;
      break;
  }
  return result;
}

//----- (004B4EE0) --------------------------------------------------------
_DWORD *__cdecl sub_4B4EE0(int a1, int a2, int a3, int a4, int a5, int a6, _DWORD *a7, float *a8)
{
  int v8; // eax
  int v9; // ebp
  _DWORD *v10; // edi
  int v11; // eax
  double v12; // st7
  float *v13; // edx

  v8 = a7[2];
  if ( v8 & 0x10 )
  {
    v9 = a6;
    v10 = sub_46C3E0(a1, a2 | 0x100, a3, a4, a5, a6, sub_4B5010);
    sub_4B51A0((int)v10);
  }
  else
  {
    if ( !(v8 & 8) )
      return 0;
    v9 = a6;
    v10 = sub_46C3E0(a1, a2 | 0x100, a3, a4, a5, a6, sub_4B5320);
    sub_4B5500((int)v10);
  }
  if ( v10 )
  {
    if ( !a7[4] )
      a7[4] = v10;
    sub_46AF80((int)v10, a7);
    sub_4B5640((int)v10, a2 | 0x100, (int)a7);
    v11 = *(_DWORD *)a8;
    if ( *((_DWORD *)a8 + 1) == *(_DWORD *)a8 )
      *((_DWORD *)a8 + 1) = v11 + 1;
    if ( a7[2] & 0x10 )
      v12 = (double)(a5 - 10) / (double)(int)(*((_DWORD *)a8 + 1) - v11);
    else
      v12 = (double)(v9 - 10) / (double)(int)(*((_DWORD *)a8 + 1) - v11);
    a8[2] = v12;
    v13 = (float *)malloc(0x10u);
    *v13 = *a8;
    v13[1] = a8[1];
    v13[2] = a8[2];
    v13[3] = a8[3];
    v10[8] = v13;
  }
  return v10;
}

//----- (004B5010) --------------------------------------------------------
int __cdecl sub_4B5010(int a1, unsigned int a2, int a3, int a4)
{
  int v4; // edi
  int v5; // esi
  int v6; // esi
  int v7; // eax
  int v8; // eax
  int v10; // ebx
  int v11; // ecx
  int v12; // eax
  __int64 v13; // rax
  int v14; // ecx
  int v15; // eax
  int v16; // edx
  double v17; // st7
  int *v18; // [esp-4h] [ebp-Ch]

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 32);
  if ( a2 > 0x4000 )
  {
    if ( a2 == 16394 )
    {
      if ( a3 >= *(int *)v5 && a3 <= *(int *)(v5 + 4) )
      {
        v17 = (double)a3;
        *(_DWORD *)(v5 + 12) = a3;
        sub_46A9B0(*(_DWORD **)(v4 + 400), (__int64)(v17 * *(float *)(v5 + 8)), 0);
      }
    }
    else if ( a2 == 16395 )
    {
      v14 = a3;
      v15 = a4;
      *(_DWORD *)v5 = a3;
      *(_DWORD *)(v5 + 4) = v15;
      v16 = *(_DWORD *)(v4 + 8) - 10;
      *(_DWORD *)(v5 + 12) = v14;
      a3 = v15 - v14;
      *(float *)(v5 + 8) = (double)v16 / (double)(v15 - v14);
      sub_46A9B0(*(_DWORD **)(v4 + 400), 0, 0);
      return 0;
    }
    return 0;
  }
  if ( a2 == 0x4000 )
  {
    v10 = (unsigned __int16)a4;
    sub_46AA60((_DWORD *)a1, &a3, &a1);
    if ( v10 < a3 )
    {
      sub_46A9B0(*(_DWORD **)(v4 + 400), 0, 0);
      v11 = *(_DWORD *)v5;
LABEL_15:
      *(_DWORD *)(v5 + 12) = v11;
      goto LABEL_16;
    }
    v12 = *(_DWORD *)(v4 + 8);
    if ( v10 < v12 + a3 )
    {
      a4 = v10 - a3;
      v13 = (__int64)((double)(v10 - a3) / *(float *)(v5 + 8));
      v11 = *(_DWORD *)(v5 + 4);
      *(_DWORD *)(v5 + 12) = v13;
      if ( (int)v13 > v11 )
        goto LABEL_15;
    }
    else
    {
      sub_46A9B0(*(_DWORD **)(v4 + 400), v12 - *(_DWORD *)(*(_DWORD *)(v4 + 400) + 8), 0);
      *(_DWORD *)(v5 + 12) = *(_DWORD *)(v5 + 4);
    }
LABEL_16:
    sub_46B490(*(_DWORD *)(v4 + 52), 16393, v4, *(_DWORD *)(v5 + 12));
    return 0;
  }
  if ( a2 == 2 )
  {
    free(*(LPVOID *)(a1 + 32));
    return 0;
  }
  if ( a2 != 23 )
    return 0;
  v6 = a3;
  v7 = *(_DWORD *)(a1 + 36);
  if ( a3 )
    LOBYTE(v7) = v7 | 2;
  else
    LOBYTE(v7) = v7 & 0xFD;
  v18 = (int *)a1;
  *(_DWORD *)(a1 + 36) = v7;
  v8 = sub_46B0A0(v18);
  sub_46B490(*(_DWORD *)(v4 + 52), 16387, v6, v8);
  return 1;
}

//----- (004B51A0) --------------------------------------------------------
int __cdecl sub_4B51A0(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
  {
    if ( (signed char)*(_BYTE *)(a1 + 4) >= 0 )
      result = sub_46B430((_DWORD *)a1, sub_4B4860, sub_4B51E0, 0);
    else
      result = sub_46B430((_DWORD *)a1, sub_4B4860, sub_4B52C0, 0);
  }
  return result;
}

//----- (004B51E0) --------------------------------------------------------
int __cdecl sub_4B51E0(int a1, int a2)
{
  int v2; // ebp
  int v3; // ebx
  int v4; // edi
  int xLeft; // [esp+10h] [ebp-8h]
  int yTop; // [esp+14h] [ebp-4h]

  v2 = *(_DWORD *)(a2 + 28);
  v3 = *(_DWORD *)(a2 + 20);
  sub_46AA60((_DWORD *)a1, &xLeft, &yTop);
  if ( *(_BYTE *)(a1 + 4) & 8 )
  {
    if ( *(_BYTE *)a2 & 2 && *(_DWORD *)(a2 + 36) != 0x80000000 )
    {
      sub_434460(*(_DWORD *)(a2 + 36));
      sub_49CC70(xLeft, yTop, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12));
    }
  }
  else
  {
    v3 = *(_DWORD *)(a2 + 44);
  }
  if ( v3 != 0x80000000 )
  {
    sub_434460(v3);
    sub_49CE30(xLeft + 1, yTop + 1, *(_DWORD *)(a1 + 8) - 2, *(_DWORD *)(a1 + 12) - 2);
  }
  v4 = yTop + *(_DWORD *)(a1 + 12) / 2;
  if ( v2 != 0x80000000 )
  {
    sub_434460(v2);
    sub_49CE30(xLeft, v4 - 1, *(_DWORD *)(a1 + 8), 3);
  }
  return 1;
}

//----- (004B52C0) --------------------------------------------------------
int __cdecl sub_4B52C0(int a1, int a2)
{
  int v2; // esi
  int v4; // [esp+Ch] [ebp-8h]
  int v5; // [esp+10h] [ebp-4h]

  v2 = *(_DWORD *)(a2 + 24);
  sub_46AA60((_DWORD *)a1, &v4, &v5);
  if ( !(*(_BYTE *)(a1 + 4) & 8) )
    v2 = *(_DWORD *)(a2 + 48);
  if ( v2 )
    sub_47D2C0(v2, v4, v5);
  return 1;
}

//----- (004B5320) --------------------------------------------------------
int __cdecl sub_4B5320(int a1, unsigned int a2, int a3, unsigned int a4)
{
  int v4; // edi
  int v5; // esi
  signed int v6; // ebx
  int v7; // eax
  __int64 v8; // rax
  int v9; // ecx
  int v11; // esi
  int v12; // eax
  int v13; // eax
  unsigned int v14; // eax
  int v15; // ecx
  int v16; // eax
  double v17; // st7
  int v18; // eax
  int v19; // eax
  int *v20; // [esp-4h] [ebp-Ch]

  v4 = a1;
  v5 = *(_DWORD *)(a1 + 32);
  if ( a2 > 0x4007 )
  {
    if ( a2 == 16394 )
    {
      if ( a3 >= *(int *)v5 )
      {
        v18 = *(_DWORD *)(v5 + 4);
        if ( a3 <= v18 )
        {
          v19 = v18 - a3;
          *(_DWORD *)(v5 + 12) = a3;
          a3 = v19;
          sub_46A9B0(*(_DWORD **)(v4 + 400), 0, (__int64)((double)v19 * *(float *)(v5 + 8)));
        }
      }
    }
    else if ( a2 == 16395 )
    {
      v14 = a4;
      v15 = a3;
      *(_DWORD *)(v5 + 4) = a4;
      *(_DWORD *)v5 = v15;
      a3 = v14 - v15;
      v16 = *(_DWORD *)(v4 + 12);
      *(_DWORD *)(v5 + 12) = v15;
      v17 = (double)a3;
      a3 = v16 - 10;
      *(float *)(v5 + 8) = (double)(v16 - 10) / v17;
      sub_46A9B0(*(_DWORD **)(v4 + 400), 0, (__int64)(v17 * *(float *)(v5 + 8)));
      return 0;
    }
    return 0;
  }
  switch ( a2 )
  {
    case 0x4007u:
      sub_46B490(*(_DWORD *)(a1 + 52), 16396, a1, *(_DWORD *)(v5 + 12));
      return 0;
    case 2u:
      free(*(LPVOID *)(a1 + 32));
      return 0;
    case 0x17u:
      v11 = a3;
      v12 = *(_DWORD *)(a1 + 36);
      if ( a3 )
        LOBYTE(v12) = v12 | 2;
      else
        LOBYTE(v12) = v12 & 0xFD;
      v20 = (int *)a1;
      *(_DWORD *)(a1 + 36) = v12;
      v13 = sub_46B0A0(v20);
      sub_46B490(*(_DWORD *)(v4 + 52), 16387, v11, v13);
      return 1;
  }
  if ( a2 != 0x4000 )
    return 0;
  v6 = a4 >> 16;
  sub_46AA60((_DWORD *)a1, &a1, &a3);
  if ( v6 >= a3 )
  {
    v7 = *(_DWORD *)(v4 + 12);
    if ( v6 < v7 + a3 )
    {
      a4 = v6 - a3;
      v8 = (__int64)((double)(v6 - a3) / *(float *)(v5 + 8));
      v9 = *(_DWORD *)(v5 + 4);
      *(_DWORD *)(v5 + 12) = v8;
      if ( (int)v8 > v9 )
        *(_DWORD *)(v5 + 12) = v9;
      *(_DWORD *)(v5 + 12) = v9 - *(_DWORD *)(v5 + 12);
    }
    else
    {
      sub_46A9B0(*(_DWORD **)(v4 + 400), 0, v7 - *(_DWORD *)(*(_DWORD *)(v4 + 400) + 12));
      *(_DWORD *)(v5 + 12) = *(_DWORD *)v5;
    }
  }
  else
  {
    sub_46A9B0(*(_DWORD **)(v4 + 400), 0, 0);
    *(_DWORD *)(v5 + 12) = *(_DWORD *)(v5 + 4);
  }
  sub_46B490(*(_DWORD *)(v4 + 52), 16393, v4, *(_DWORD *)(v5 + 12));
  return 0;
}

//----- (004B5500) --------------------------------------------------------
int __cdecl sub_4B5500(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
  {
    if ( (signed char)*(_BYTE *)(a1 + 4) >= 0 )
      result = sub_46B430((_DWORD *)a1, sub_4B4BA0, sub_4B5540, 0);
    else
      result = sub_46B430((_DWORD *)a1, sub_4B4BA0, sub_4B5620, 0);
  }
  return result;
}

//----- (004B5540) --------------------------------------------------------
int __cdecl sub_4B5540(int a1, int a2)
{
  int v2; // ebx
  int v3; // ebp
  int v4; // edi
  int xLeft; // [esp+10h] [ebp-8h]
  int yTop; // [esp+14h] [ebp-4h]

  v2 = *(_DWORD *)(a2 + 28);
  v3 = *(_DWORD *)(a2 + 20);
  sub_46AA60((_DWORD *)a1, &xLeft, &yTop);
  if ( *(_BYTE *)(a1 + 4) & 8 )
  {
    if ( *(_BYTE *)a2 & 2 )
    {
      v2 = *(_DWORD *)(a2 + 52);
      if ( *(_DWORD *)(a2 + 36) != 0x80000000 )
      {
        sub_434460(*(_DWORD *)(a2 + 36));
        sub_49CC70(xLeft, yTop, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12));
      }
    }
  }
  else
  {
    v3 = *(_DWORD *)(a2 + 44);
  }
  if ( v3 != 0x80000000 )
  {
    sub_434460(v3);
    sub_49CE30(xLeft + 1, yTop + 1, *(_DWORD *)(a1 + 8) - 2, *(_DWORD *)(a1 + 12) - 2);
  }
  v4 = xLeft + *(_DWORD *)(a1 + 8) / 2;
  if ( v2 != 0x80000000 )
  {
    sub_434460(v2);
    sub_49CE30(v4 - 1, yTop + 4, 3, *(_DWORD *)(a1 + 12) - 8);
  }
  return 1;
}

//----- (004B5620) --------------------------------------------------------
int __cdecl sub_4B5620(_DWORD *a1, int a2)
{
  int v2; // [esp+0h] [ebp-8h]
  int v3; // [esp+4h] [ebp-4h]

  sub_46AA60(a1, &v2, &v3);
  return 1;
}

//----- (004B5640) --------------------------------------------------------
int __cdecl sub_4B5640(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // eax
  int result; // eax
  char v6[332]; // [esp+Ch] [ebp-14Ch]

  v3 = *(_DWORD *)(a3 + 68);
  *(_DWORD *)v6 = 0;
  memset(&v6[4], 0, 0x148u);
  v4 = a2;
  *(_DWORD *)&v6[16] = a1;
  LOBYTE(v4) = a2 & 0xEF | 0xC;
  *(_DWORD *)&v6[8] = 1;
  *(_DWORD *)&v6[68] = v3;
  if ( (v4 & 0x80u) == 0 )
  {
    *(_DWORD *)&v6[52] = *(_DWORD *)(a3 + 52);
    *(_DWORD *)&v6[28] = *(_DWORD *)(a3 + 20);
    *(_DWORD *)&v6[20] = *(_DWORD *)(a3 + 28);
  }
  else
  {
    *(_DWORD *)&v6[32] = *(_DWORD *)(a3 + 32);
    *(_DWORD *)&v6[48] = *(_DWORD *)(a3 + 48);
    *(_DWORD *)&v6[56] = *(_DWORD *)(a3 + 56);
    *(_DWORD *)&v6[24] = *(_DWORD *)(a3 + 24);
    *(_DWORD *)&v6[40] = *(_DWORD *)(a3 + 40);
  }
  if ( *(_BYTE *)(a3 + 8) & 0x10 )
    result = sub_4A91A0(a1, v4, 0, 0, 10, *(_DWORD *)(a1 + 12), v6);
  else
    result = sub_4A91A0(a1, v4, 0, 0, *(_DWORD *)(a1 + 8), 10, v6);
  return result;
}

//----- (004B5700) --------------------------------------------------------
void __cdecl sub_4B5700(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // eax
  int v7; // edx

  if ( a1 )
  {
    v6 = *(_DWORD *)(a1 + 400);
    v7 = *(_DWORD *)(v6 + 4);
    LOBYTE(v7) = v7 | 0x80;
    *(_DWORD *)(v6 + 4) = v7;
    sub_4A8340(*(_DWORD *)(a1 + 400));
    *(_DWORD *)(*(_DWORD *)(a1 + 400) + 60) = a2;
    *(_DWORD *)(*(_DWORD *)(a1 + 400) + 68) = a4;
    *(_DWORD *)(*(_DWORD *)(a1 + 400) + 84) = a3;
    *(_DWORD *)(*(_DWORD *)(a1 + 400) + 92) = a5;
    *(_DWORD *)(*(_DWORD *)(a1 + 400) + 76) = a6;
  }
}

//----- (004B5770) --------------------------------------------------------
int __cdecl sub_4B5770(int a1)
{
  int i; // esi
  wchar_t *v2; // eax
  wchar_t *v3; // eax
  _DWORD *v4; // esi
  _DWORD *v5; // ebx
  _DWORD *v6; // ebp
  _DWORD *v7; // edi
  char *v8; // eax
  char *v10; // [esp+14h] [ebp+4h]

  *(_DWORD *)&byte_5D4594[1312488] = a1;
  *(_DWORD *)&byte_5D4594[1312480] = sub_4A0AD0((const char *)&byte_587000[174792], sub_4B5AB0);
  sub_46A9B0(
    *(_DWORD **)&byte_5D4594[1312480],
    *(_DWORD *)&byte_5D4594[3805496] / 2 - 75,
    *(_DWORD *)&byte_5D4594[3807120] / 2 - 77);
  sub_46B120(*(_DWORD **)&byte_5D4594[1312480], 0);
  sub_46A8C0(*(int *)&byte_5D4594[1312480]);
  sub_46C690(*(int *)&byte_5D4594[1312480]);
  sub_46B500(*(int *)&byte_5D4594[1312480]);
  *(_DWORD *)&byte_5D4594[1312484] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1312480], 1981);
  sub_4B5990();
  for ( i = 0; i < *(int *)&byte_5D4594[1312472]; ++i )
    sub_46B490(*(int *)&byte_5D4594[1312484], 16397, *(_DWORD *)(*(_DWORD *)&byte_5D4594[1312476] + 4 * i), -1);
  v2 = sub_40F1D0((char *)&byte_587000[174848], 0, (const char *)&byte_587000[174804], 213);
  sub_46B490(*(int *)&byte_5D4594[1312484], 16397, (int)v2, -1);
  sub_46B490(*(int *)&byte_5D4594[1312484], 16403, 0, 0);
  v3 = sub_40F1D0((char *)&byte_587000[174900], 0, (const char *)&byte_587000[174856], 216);
  sub_46B490(*(int *)&byte_5D4594[1312484], 16397, (int)v3, -1);
  sub_46B490(*(int *)&byte_5D4594[1312484], 16403, 0, 0);
  v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1312480], 1982);
  v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1312480], 1983);
  v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1312480], 1984);
  v7 = *(_DWORD **)(*(_DWORD *)&byte_5D4594[1312484] + 32);
  v10 = sub_42F970((const char *)&byte_587000[174908]);
  v8 = sub_42F970((const char *)&byte_587000[174920]);
  sub_4B5700((int)v4, 0, 0, (int)v10, (int)v8, (int)v8);
  sub_46B280((int)v4, *(int *)&byte_5D4594[1312484]);
  sub_46B280((int)v5, *(int *)&byte_5D4594[1312484]);
  sub_46B280((int)v6, *(int *)&byte_5D4594[1312484]);
  v7[9] = v4;
  v7[7] = v5;
  v7[8] = v6;
  *(_DWORD *)(v4[100] + 8) = 16;
  *(_DWORD *)(v4[100] + 12) = 10;
  return 1;
}

//----- (004B5990) --------------------------------------------------------
void *sub_4B5990()
{
  int v0; // esi
  int v1; // ecx
  unsigned __int8 *v2; // eax
  int v3; // edx
  void *result; // eax
  __int16 *v5; // ecx
  __int16 v6[16]; // [esp+8h] [ebp-20h]

  v0 = 0;
  v6[0] = 0;
  memset(&v6[1], 0, 0x1Cu);
  v6[15] = 0;
  v1 = 0;
  *(_DWORD *)&byte_5D4594[1312472] = 0;
  if ( !*(_DWORD *)&byte_587000[174360] )
    return *(void **)&byte_5D4594[1312476];
  v2 = &byte_587000[174360];
  do
  {
    v3 = *((_DWORD *)v2 + 2);
    v2 += 8;
    ++v1;
  }
  while ( v3 );
  *(_DWORD *)&byte_5D4594[1312472] = v1;
  if ( v1 <= 0 )
    return *(void **)&byte_5D4594[1312476];
  result = malloc(4 * v1);
  *(_DWORD *)&byte_5D4594[1312476] = result;
  v5 = v6;
  if ( *(_DWORD *)&byte_5D4594[1312472] > 0 )
  {
    do
    {
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1312476] + 4 * v0) = sub_4B5A30((wchar_t *)v5);
      result = *(void **)&byte_5D4594[1312476];
      v5 = *(__int16 **)(*(_DWORD *)&byte_5D4594[1312476] + 4 * v0++);
    }
    while ( v0 < *(int *)&byte_5D4594[1312472] );
  }
  return result;
}

//----- (004B5A30) --------------------------------------------------------
wchar_t *__cdecl sub_4B5A30(wchar_t *a1)
{
  int v1; // ebp
  __int16 *v2; // edi
  char **v3; // ebx
  wchar_t *v4; // esi
  __int16 v6[16]; // [esp+8h] [ebp-20h]

  v1 = 0;
  memset(v6, 0xFFu, sizeof(v6));
  v2 = v6;
  if ( *(int *)&byte_5D4594[1312472] <= 0 )
    return (wchar_t *)v6;
  v3 = (char **)&byte_587000[174360];
  do
  {
    v4 = sub_40F1D0(*v3, 0, (const char *)&byte_587000[174932], 101);
    if ( nox_wcscmp(v4, (const wchar_t *)v2) < 0 && nox_wcscmp(v4, a1) > 0 )
      v2 = (__int16 *)v4;
    ++v1;
    v3 += 2;
  }
  while ( v1 < *(int *)&byte_5D4594[1312472] );
  return (wchar_t *)v2;
}

//----- (004B5AB0) --------------------------------------------------------
int __cdecl sub_4B5AB0(int a1, int a2, int *a3, int a4)
{
  int *v4; // edi
  int v5; // eax
  wchar_t *v6; // eax
  int v7; // esi
  int v8; // eax
  int v9; // eax

  if ( a2 != 16391 )
    return 0;
  v4 = a3;
  if ( sub_46B0A0(a3) != 1985 )
    return 0;
  a2 = 0;
  v5 = sub_46B490(*(int *)&byte_5D4594[1312484], 16404, 0, 0);
  v6 = (wchar_t *)sub_46B490(*(int *)&byte_5D4594[1312484], 16406, v5, 0);
  v7 = sub_4B5B70(v6);
  v8 = sub_41FC40();
  sub_40DB50(v8 + 1, (int)&a2);
  if ( v7 != a2 )
  {
    v9 = sub_41FC40();
    sub_40DB80(v9 + 1, v7);
  }
  sub_46B490(*(int *)&byte_5D4594[1312488], 16391, (int)v4, a4);
  sub_4B5BF0();
  return 0;
}

//----- (004B5B70) --------------------------------------------------------
int __cdecl sub_4B5B70(wchar_t *a1)
{
  int v1; // edi
  char **v2; // esi
  wchar_t *v3; // eax
  wchar_t *v4; // eax
  int result; // eax

  v1 = 0;
  if ( *(int *)&byte_5D4594[1312472] <= 0 )
  {
LABEL_5:
    v4 = sub_40F1D0((char *)&byte_587000[175064], 0, (const char *)&byte_587000[175020], 78);
    result = nox_wcscmp(a1, v4) != 0;
  }
  else
  {
    v2 = (char **)&byte_587000[174360];
    while ( 1 )
    {
      v3 = sub_40F1D0(*v2, 0, (const char *)&byte_587000[174976], 71);
      if ( !nox_wcscmp(a1, v3) )
        break;
      ++v1;
      v2 += 2;
      if ( v1 >= *(int *)&byte_5D4594[1312472] )
        goto LABEL_5;
    }
    result = *(_DWORD *)&byte_587000[8 * v1 + 174364];
  }
  return result;
}

//----- (004B5BF0) --------------------------------------------------------
void sub_4B5BF0()
{
  sub_46C6E0(*(int *)&byte_5D4594[1312480]);
  sub_46ADE0(*(int *)&byte_5D4594[1312480]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1312480]);
  *(_DWORD *)&byte_5D4594[1312480] = 0;
  *(_DWORD *)&byte_5D4594[1312488] = 0;
  *(_DWORD *)&byte_5D4594[1312484] = 0;
  free(*(LPVOID *)&byte_5D4594[1312476]);
  *(_DWORD *)&byte_5D4594[1312472] = 0;
}

//----- (004B5C40) --------------------------------------------------------
int __cdecl sub_4B5C40(int a1, int a2, char *a3)
{
  char *v3; // eax
  const char *v4; // ecx
  int v5; // ebp
  unsigned __int8 *v6; // edi

  v3 = strtok(a3, (const char *)&byte_587000[175852]);
  v4 = *(const char **)&byte_587000[175072];
  v5 = 0;
  if ( *(_DWORD *)&byte_587000[175072] )
  {
    v6 = &byte_587000[175072];
    do
    {
      if ( !strcmp(v4, v3) )
        break;
      v4 = (const char *)*((_DWORD *)v6 + 2);
      v6 += 8;
      ++v5;
    }
    while ( v4 );
  }
  if ( !*(_DWORD *)&byte_587000[8 * v5 + 175072] )
    return 0;
  *(_DWORD *)(a1 + 100) = *(_DWORD *)&byte_587000[8 * v5 + 175076];
  return 1;
}

//----- (004B5CD0) --------------------------------------------------------
int sub_4B5CD0()
{
  char v0; // si
  unsigned __int8 *v1; // edi
  int v2; // edi
  unsigned __int8 *v3; // esi
  int v4; // eax
  int v5; // edx
  int v6; // esi
  unsigned __int8 *v7; // edi
  int v8; // esi
  unsigned __int8 *v9; // edi
  unsigned int v10; // edx
  int result; // eax
  int v12; // [esp+8h] [ebp-4h]

  v0 = 0;
  v1 = &byte_5D4594[1312500];
  do
  {
    LOBYTE(v12) = v0 / 63;
    *(_DWORD *)v1 = sub_4344A0((unsigned __int8)(v0 / 63) / 3, 3 * (unsigned __int8)(v0 / 63) / 5, v12);
    v1 += 4;
    --v0;
  }
  while ( (int)v1 < (int)&byte_5D4594[1312756] );
  v2 = 0;
  v3 = &byte_5D4594[1312756];
  do
  {
    LOBYTE(v12) = v2 / 32;
    v4 = sub_4344A0(v12, v12, 0);
    LOBYTE(v5) = -1 - v12;
    *(_DWORD *)v3 = v4;
    *((_DWORD *)v3 + 32) = sub_4344A0(255, v5, 0);
    v3 += 4;
    v2 += 255;
  }
  while ( (int)v3 < (int)&byte_5D4594[1312884] );
  v6 = 0;
  v7 = &byte_5D4594[1313012];
  do
  {
    LOBYTE(v12) = v6 / 63;
    *(_DWORD *)v7 = sub_4344A0(v12, v12, v12);
    v7 += 4;
    v6 += 255;
  }
  while ( (int)v7 < (int)&byte_5D4594[1313268] );
  v8 = 0;
  v9 = &byte_5D4594[1313268];
  do
  {
    result = sub_4344A0(v8 / 63, 50, 50);
    *(_DWORD *)v9 = result;
    v9 += 4;
    v8 += 255;
  }
  while ( (int)v9 < (int)&byte_5D4594[1313524] );
  return result;
}
// 4B5D21: variable 'v12' is possibly undefined
// 4B5D71: variable 'v5' is possibly undefined

//----- (004B5E10) --------------------------------------------------------
int __cdecl sub_4B5E10(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // edi
  int v4; // esi
  int v5; // eax
  bool v6; // zf
  int v7; // eax
  unsigned int v8; // ett
  int v9; // ebp
  int v10; // ebx
  float v12; // [esp+0h] [ebp-24h]
  int v13; // [esp+14h] [ebp-10h]
  int v14; // [esp+18h] [ebp-Ch]
  int v15; // [esp+2Ch] [ebp+8h]

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 12) + *a1 - a1[4];
  v4 = *(_DWORD *)(a2 + 16) + a1[1] - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104) - a1[5];
  v13 = *a1 - a1[4] + *(_DWORD *)(a2 + 432);
  v5 = *(_DWORD *)(a2 + 356) - *(_DWORD *)&byte_5D4594[2598000];
  v6 = *(_DWORD *)(a2 + 356) == *(_DWORD *)&byte_5D4594[2598000];
  v14 = a1[1] - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104) - a1[5] + *(_DWORD *)(a2 + 436);
  v15 = v5;
  if ( v5 >= 0 && !v6 )
  {
    v8 = v5 << 6;
    v7 = (unsigned int)(v5 << 6) / *(_DWORD *)&byte_5D4594[2649704];
    if ( (int)(v8 / *(_DWORD *)&byte_5D4594[2649704]) >= 64 )
      v7 = 63;
    v9 = *(_DWORD *)&byte_5D4594[4 * v7 + 1312500];
    v10 = v2 + 136;
    sub_484BE0((_DWORD *)(v2 + 136), 128, 128, 255);
    v12 = (double)v15 * 20.0 / (double)*(int *)&byte_5D4594[2649704];
    sub_484D70(v10, v12);
    sub_434460(v9);
    sub_434560(1);
    sub_434580(0x80u);
    sub_49F500(v3, v4);
    sub_49F500(v13, v14);
    sub_49E4B0();
    sub_434560(0);
  }
  return 1;
}

//----- (004B5F30) --------------------------------------------------------
int __cdecl sub_4B5F30(_DWORD *a1, int a2)
{
  int v2; // ecx
  int v3; // edi
  int v4; // esi
  int v5; // ebx
  int v6; // eax
  int v7; // ebp
  int v8; // ebx
  float v10; // [esp+0h] [ebp-1Ch]
  int v11; // [esp+14h] [ebp-8h]
  int v12; // [esp+18h] [ebp-4h]
  signed int v13; // [esp+20h] [ebp+4h]
  int v14; // [esp+24h] [ebp+8h]

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 12) + *a1 - a1[4];
  v4 = *(_DWORD *)(a2 + 16) + a1[1] - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104) - a1[5];
  v12 = a1[1] - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104) - a1[5] + *(_DWORD *)(a2 + 436);
  v5 = *(_DWORD *)(a2 + 356) - *(_DWORD *)&byte_5D4594[2598000];
  v11 = *a1 - a1[4] + *(_DWORD *)(a2 + 432);
  v14 = v5;
  if ( v5 > 0 )
  {
    v6 = (v5 << 6) / (int)(*(_DWORD *)&byte_5D4594[2649704] / 3u);
    v13 = *(_DWORD *)&byte_5D4594[2649704] / 3u;
    if ( v6 >= 64 )
      v6 = 63;
    v7 = *(_DWORD *)&byte_5D4594[4 * v6 + 1312756];
    v8 = v2 + 136;
    sub_484BE0((_DWORD *)(v2 + 136), 255, 128, 50);
    v10 = (double)v14 * 20.0 / (double)v13;
    sub_484D70(v8, v10);
    sub_434460(v7);
    sub_434560(1);
    sub_434580(0x80u);
    sub_49F500(v3, v4);
    sub_49F500(v11, v12);
    sub_49E4B0();
    sub_434560(0);
  }
  return 1;
}

//----- (004B6050) --------------------------------------------------------
int __cdecl sub_4B6050(_DWORD *a1, int a2)
{
  int v2; // ebp
  int v3; // edi
  int v4; // esi
  int v5; // ebx
  int v6; // ebp
  int v7; // eax

  v2 = *(_DWORD *)(a2 + 16);
  v3 = *(_DWORD *)(a2 + 12) + *a1 - a1[4];
  v4 = v2 + a1[1] - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104) - a1[5];
  v5 = *(_DWORD *)(a2 + 436) - v2;
  v6 = *(_DWORD *)(a2 + 432) + *a1 - a1[4];
  if ( *(_DWORD *)(a2 + 356) - *(_DWORD *)&byte_5D4594[2598000] > 0 )
  {
    v7 = ((*(_DWORD *)(a2 + 356) - *(_DWORD *)&byte_5D4594[2598000]) << 6)
       / (int)(*(_DWORD *)&byte_5D4594[2649704] / 3u);
    if ( v7 >= 64 )
      v7 = 63;
    sub_434460(*(_DWORD *)&byte_5D4594[4 * v7 + 1313012]);
    sub_434560(1);
    sub_434580(0x80u);
    sub_49F500(v3, v4 - 4);
    sub_49F500(v6, v5 + v4 - 4);
    sub_49E4B0();
    sub_434560(0);
  }
  return 1;
}

//----- (004B6120) --------------------------------------------------------
int __cdecl sub_4B6120(_DWORD *a1, int a2)
{
  int v2; // ebp
  int v3; // edi
  int v4; // esi
  int v5; // ebx
  int v6; // ebp
  int v7; // eax

  v2 = *(_DWORD *)(a2 + 16);
  v3 = *(_DWORD *)(a2 + 12) + *a1 - a1[4];
  v4 = v2 + a1[1] - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104) - a1[5];
  v5 = *(_DWORD *)(a2 + 436) - v2;
  v6 = *(_DWORD *)(a2 + 432) + *a1 - a1[4];
  if ( *(_DWORD *)(a2 + 356) - *(_DWORD *)&byte_5D4594[2598000] > 0 )
  {
    v7 = ((*(_DWORD *)(a2 + 356) - *(_DWORD *)&byte_5D4594[2598000]) << 6)
       / (int)(*(_DWORD *)&byte_5D4594[2649704] / 3u);
    if ( v7 >= 64 )
      v7 = 63;
    sub_434460(*(_DWORD *)&byte_5D4594[4 * v7 + 1313268]);
    sub_434560(1);
    sub_434580(0x80u);
    sub_49F500(v3, v4 - 4);
    sub_49F500(v6, v5 + v4 - 4);
    sub_49E4B0();
    sub_434560(0);
  }
  return 1;
}

//----- (004B61F0) --------------------------------------------------------
int __cdecl sub_4B61F0(int *a1, int a2)
{
  int v2; // ecx
  int v3; // edx
  unsigned __int16 v4; // bx
  int v5; // edi
  int v6; // eax
  int v7; // ebx
  int v8; // ecx
  _DWORD *v9; // eax
  _DWORD *v10; // edi
  _DWORD *v11; // eax
  int v12; // ebx
  int v13; // ebp
  int v14; // ecx
  int2 a1a; // [esp+Ch] [ebp-10h]
  int2 a2a; // [esp+14h] [ebp-8h]
  int v18; // [esp+20h] [ebp+4h]

  if ( !*(_BYTE *)(a2 + 432) )
  {
    v2 = a1[4];
    v3 = *a1;
    v4 = *(_WORD *)(a2 + 439);
    a1a.field_0 = *a1 + *(unsigned __int16 *)(a2 + 437) - v2;
    v5 = a1[5];
    v6 = a1[1];
    a1a.field_4 = v4 - v5 + v6 - 20;
    v7 = *(unsigned __int16 *)(a2 + 441) - v2;
    v8 = *(unsigned __int16 *)(a2 + 443) - v5;
    a2a.field_0 = v3 + v7;
    a2a.field_4 = v8 + v6 - 20;
LABEL_12:
    *(_DWORD *)&byte_5D4594[1312492] = sub_4344A0(144, 104, 64);
    *(_DWORD *)&byte_5D4594[1312496] = sub_4344A0(24, 16, 0);
    sub_4B63B0(&a1a, &a2a);
    return 1;
  }
  if ( sub_578B70(*(_DWORD *)(a2 + 437)) )
    v9 = sub_45A720(*(_DWORD *)(a2 + 437));
  else
    v9 = sub_45A6F0(*(_DWORD *)(a2 + 437));
  v10 = v9;
  if ( sub_578B70(*(_DWORD *)(a2 + 441)) )
    v11 = sub_45A720(*(_DWORD *)(a2 + 441));
  else
    v11 = sub_45A6F0(*(_DWORD *)(a2 + 441));
  if ( v10 && v11 )
  {
    v12 = a1[4];
    v13 = *a1;
    v14 = a1[1];
    v18 = a1[5];
    a1a.field_0 = v13 + v10[3] - v12;
    a1a.field_4 = v14 + v10[4] - v18;
    a2a.field_0 = v13 + v11[3] - v12;
    a2a.field_4 = v14 + v11[4] - *((__int16 *)v11 + 53) - *((__int16 *)v11 + 52) - v18;
    a1a.field_0 += *(_DWORD *)&byte_587000[8 * *((unsigned __int8 *)v10 + 297) + 175864];
    a1a.field_4 += *(_DWORD *)&byte_587000[8 * *((unsigned __int8 *)v10 + 297) + 175868];
    a2a.field_4 -= 8;
    goto LABEL_12;
  }
  return 1;
}

//----- (004B63B0) --------------------------------------------------------
int __cdecl sub_4B63B0(int2 *a1, int2 *a2)
{
  int v2; // ebx
  int v3; // ebp

  sub_434460(*(int *)&byte_5D4594[1312492]);
  sub_49F500(a1->field_0, a1->field_4);
  sub_49F500(a2->field_0, a2->field_4);
  sub_49E4B0();
  v2 = a2->field_0 - a1->field_0;
  v3 = a2->field_4 - a1->field_4;
  sub_434460(*(int *)&byte_5D4594[1312496]);
  if ( v2 < 0 )
    v2 = -v2;
  if ( v3 < 0 )
    v3 = -v3;
  if ( v2 <= v3 )
  {
    sub_49F500(a1->field_0 - 1, a1->field_4);
    sub_49F500(a2->field_0 - 1, a2->field_4);
    sub_49E4B0();
    sub_49F500(a1->field_0 + 1, a1->field_4);
    sub_49F500(a2->field_0 + 1, a2->field_4);
  }
  else
  {
    sub_49F500(a1->field_0, a1->field_4 - 1);
    sub_49F500(a2->field_0, a2->field_4 - 1);
    sub_49E4B0();
    sub_49F500(a1->field_0, a1->field_4 + 1);
    sub_49F500(a2->field_0, a2->field_4 + 1);
  }
  return sub_49E4B0();
}

//----- (004B64A0) --------------------------------------------------------
int __cdecl sub_4B64A0(int *a1, int a2)
{
  return sub_4BBD30(a1, a2);
}

//----- (004B64C0) --------------------------------------------------------
int sub_4B64C0()
{
  unsigned __int8 v0; // bl
  unsigned __int8 *v1; // esi
  int v2; // ebp
  int v3; // edi
  int v5; // [esp+10h] [ebp-10h]
  int v6; // [esp+14h] [ebp-Ch]
  int v7; // [esp+18h] [ebp-8h]
  int v8; // [esp+1Ch] [ebp-4h]

  *(_DWORD *)&byte_5D4594[1313524] = sub_4344A0(255, 255, 0);
  *(_DWORD *)&byte_5D4594[1313528] = sub_4344A0(255, 100, 0);
  *(_DWORD *)&byte_5D4594[1313532] = sub_4344A0(255, 255, 0);
  *(_DWORD *)&byte_5D4594[1313536] = sub_4344A0(0, 0, 255);
  *(_DWORD *)&byte_5D4594[1313540] = sub_4344A0(0, 200, 255);
  *(_DWORD *)&byte_5D4594[1313544] = sub_4344A0(0, 200, 200);
  *(_DWORD *)&byte_5D4594[1313548] = sub_4344A0(50, 255, 255);
  *(_DWORD *)&byte_5D4594[1313552] = sub_4344A0(255, 0, 255);
  *(_DWORD *)&byte_5D4594[1313556] = sub_4344A0(255, 200, 255);
  *(_DWORD *)&byte_5D4594[1313560] = sub_4344A0(255, 200, 0);
  *(_DWORD *)&byte_5D4594[1313564] = sub_4344A0(255, 255, 100);
  *(_DWORD *)&byte_5D4594[1313568] = sub_4344A0(100, 255, 50);
  *(_DWORD *)&byte_5D4594[1313572] = sub_4344A0(150, 255, 150);
  *(_DWORD *)&byte_5D4594[1313576] = sub_4344A0(255, 255, 0);
  *(_DWORD *)&byte_5D4594[1313580] = sub_4344A0(0, 220, 0);
  *(_DWORD *)&byte_5D4594[1313584] = sub_4344A0(150, 255, 150);
  *(_DWORD *)&byte_5D4594[1313588] = sub_4344A0(200, 200, 200);
  *(_DWORD *)&byte_5D4594[1313592] = sub_4344A0(255, 255, 255);
  LOBYTE(v8) = -1;
  LOBYTE(v7) = -1;
  LOBYTE(v6) = -1;
  v0 = 0;
  v1 = &byte_5D4594[1313656];
  v2 = 1085;
  v5 = 600;
  v3 = 765;
  do
  {
    if ( v0 > 3u )
    {
      if ( v0 > 7u )
        LOBYTE(v8) = v2 / 9 - 1;
      else
        LOBYTE(v7) = v5 / 4 - 1;
    }
    else
    {
      LOBYTE(v6) = v3 / 3;
    }
    *(_DWORD *)v1 = sub_4344A0(v8, v7, v6);
    ++v0;
    v3 -= 255;
    v2 -= 155;
    v1 -= 4;
    v5 -= 200;
  }
  while ( v0 < 0x10u );
  return sub_4B5CD0();
}
// 4B66DF: variable 'v8' is possibly undefined
// 4B66DF: variable 'v7' is possibly undefined
// 4B66DF: variable 'v6' is possibly undefined

//----- (004B6720) --------------------------------------------------------
void __cdecl sub_4B6720(int2 *a1, int a2, int a3, char a4)
{
  int *v4; // eax

  if ( *(_DWORD *)&byte_5D4594[805852] )
  {
    sub_434040(a2);
    sub_434080(a3 + 4);
    v4 = sub_4B0680(0, 32 * a4);
    sub_4B0820((int)v4, a1->field_0, a1->field_4);
  }
}

//----- (004B6770) --------------------------------------------------------
int __cdecl sub_4B6770(int *a1, int a2, int a3, int a4)
{
  int v4; // edx
  int v5; // ebx
  int v6; // ecx
  int v7; // eax
  int result; // eax
  int v9; // edi
  int v10; // ebx
  int v11; // ecx
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // esi
  int v16; // [esp+Ch] [ebp-Ch]
  int2 xLeft; // [esp+10h] [ebp-8h]
  int v18; // [esp+20h] [ebp+8h]

  v4 = a2;
  v5 = *(_DWORD *)(a2 + 444);
  v6 = *(_DWORD *)(a2 + 448) - v5;
  v7 = *(_DWORD *)(a2 + 448) - *(_DWORD *)&byte_5D4594[2598000];
  v16 = *(_DWORD *)(a2 + 448) - v5;
  v18 = v7;
  if ( v7 == v6 )
    v18 = --v7;
  if ( v7 > 0 )
  {
    v9 = *a1;
    v10 = a1[1];
    v11 = *a1 + *(_DWORD *)(v4 + 12) - a1[4];
    v12 = *(_DWORD *)(v4 + 16) - *(__int16 *)(v4 + 106) - *(__int16 *)(v4 + 104) - a1[5];
    xLeft.field_0 = v11;
    v13 = v10 + v12;
    xLeft.field_4 = v13;
    if ( v11 - 10 >= v9 && v13 - 10 >= v10 && v11 + 10 < a1[2] && v13 + 10 < a1[3] )
    {
      v14 = v18 * sub_415FF0(0, 4, (const char *)&byte_587000[175936], 213) / v16;
      v15 = v14;
      if ( v14 )
      {
        sub_4B6720(&xLeft, a4, 2 * v14 + 1, v14 + 1);
        sub_434460(a3);
        sub_499B70(xLeft.field_0, xLeft.field_4, v15);
      }
    }
    result = 1;
  }
  else
  {
    sub_45A4E0(v4);
    result = 0;
  }
  return result;
}

//----- (004B6880) --------------------------------------------------------
int __cdecl sub_4B6880(_DWORD *a1, int a2, int a3, int a4)
{
  int v4; // edx
  int v5; // ebx
  int v6; // eax
  int result; // eax
  int v8; // ecx
  int v9; // eax
  int v10; // edx
  int v11; // eax
  bool v12; // cc
  int v13; // esi
  int2 xLeft; // [esp+Ch] [ebp-8h]
  int v15; // [esp+1Ch] [ebp+8h]

  v4 = a2;
  v5 = *(_DWORD *)(a2 + 448) - *(_DWORD *)(a2 + 444);
  v15 = *(_DWORD *)(a2 + 448) - *(_DWORD *)&byte_5D4594[2598000];
  v6 = v15;
  if ( v15 == v5 )
    v6 = --v15;
  if ( v6 > 0 )
  {
    v8 = *a1 + *(_DWORD *)(v4 + 12) - a1[4];
    v9 = *(_DWORD *)(v4 + 16) - *(__int16 *)(v4 + 106) - *(__int16 *)(v4 + 104) - a1[5];
    v10 = a1[1];
    v11 = v10 + v9;
    v12 = v8 - 10 < *a1;
    xLeft.field_0 = v8;
    xLeft.field_4 = v11;
    if ( !v12 && v11 - 10 >= v10 && v8 + 10 < a1[2] && v11 + 10 < a1[3] )
    {
      v13 = 4 * v15 / v5;
      sub_4B6720(&xLeft, a4, 2 * v13 + 1, 5 * v15 / v5);
      sub_434460(a3);
      sub_499B70(xLeft.field_0, xLeft.field_4, v13);
    }
    result = 1;
  }
  else
  {
    sub_45A4E0(v4);
    result = 0;
  }
  return result;
}

//----- (004B6970) --------------------------------------------------------
int __cdecl sub_4B6970(_DWORD *a1, int a2, int a3, int a4)
{
  int v4; // eax
  int v5; // eax

  v4 = *(_DWORD *)(a2 + 440);
  *(_DWORD *)(a2 + 432) += v4 * *(int *)&byte_587000[8 * *(unsigned __int8 *)(a2 + 299) + 192088];
  v5 = v4 * *(int *)&byte_587000[8 * *(unsigned __int8 *)(a2 + 299) + 192092] + *(_DWORD *)(a2 + 436);
  *(_DWORD *)(a2 + 436) = v5;
  sub_49AA90((_DWORD *)a2, *(_DWORD *)(a2 + 432) >> 12, v5 >> 12);
  sub_4B69F0(a2);
  return sub_4B6880(a1, a2, a3, a4);
}

//----- (004B69F0) --------------------------------------------------------
__int16 __cdecl sub_4B69F0(int a1)
{
  char v1; // cl
  __int16 result; // ax
  int v3; // edx

  v1 = *(_BYTE *)(a1 + 296);
  *(_WORD *)(a1 + 104) += v1;
  result = *(_WORD *)(a1 + 104);
  if ( result >= 0 )
  {
    if ( byte_5D4594[2598000] & 1 )
      *(_BYTE *)(a1 + 296) = v1 - 1;
  }
  else
  {
    *(_WORD *)(a1 + 104) = -result;
    result = 26209 * v1;
    v3 = -9 * v1 / 10;
    *(_BYTE *)(a1 + 296) = v3;
    if ( (char)v3 < 2 )
    {
      *(_WORD *)(a1 + 104) = 0;
      *(_BYTE *)(a1 + 296) = 0;
    }
  }
  return result;
}

//----- (004B6A60) --------------------------------------------------------
int __cdecl sub_4B6A60(_DWORD *a1, int a2)
{
  return sub_4B6970(a1, a2, *(int *)&byte_5D4594[1313532], *(int *)&byte_5D4594[1313528]);
}

//----- (004B6A80) --------------------------------------------------------
int __cdecl sub_4B6A80(_DWORD *a1, int a2)
{
  return sub_4B6970(a1, a2, *(int *)&byte_5D4594[1313540], *(int *)&byte_5D4594[1313536]);
}

//----- (004B6AA0) --------------------------------------------------------
int __cdecl sub_4B6AA0(_DWORD *a1, int a2)
{
  return sub_4B6970(a1, a2, *(int *)&byte_5D4594[1313548], *(int *)&byte_5D4594[1313544]);
}

//----- (004B6AC0) --------------------------------------------------------
int __cdecl sub_4B6AC0(_DWORD *a1, int a2)
{
  return sub_4B6970(a1, a2, *(int *)&byte_5D4594[1313584], *(int *)&byte_5D4594[1313580]);
}

//----- (004B6AE0) --------------------------------------------------------
int __cdecl sub_4B6AE0(_DWORD *a1, int a2)
{
  return sub_4B6970(a1, a2, *(int *)&byte_5D4594[1313532], *(int *)&byte_5D4594[1313576]);
}

//----- (004B6B00) --------------------------------------------------------
int __cdecl sub_4B6B00(int *a1, int a2)
{
  int result; // eax

  if ( sub_415FF0(0, 10, (const char *)&byte_587000[175976], 317) >= 5 )
    result = sub_4B6770(a1, a2, *(int *)&byte_5D4594[2523948], *(int *)&byte_5D4594[1313540]);
  else
    result = sub_4B6770(a1, a2, *(int *)&byte_5D4594[1313540], *(int *)&byte_5D4594[1313536]);
  return result;
}

//----- (004B6B60) --------------------------------------------------------
int __cdecl sub_4B6B60(int *a1, int a2)
{
  return sub_4B6B80(a1, a2, 0);
}

//----- (004B6B80) --------------------------------------------------------
int __cdecl sub_4B6B80(int *a1, int a2, int a3)
{
  int v3; // esi
  int v4; // eax
  int v5; // ecx
  int v6; // edi
  int v7; // ebx
  int v8; // eax
  int v10; // edi
  int v11; // ebp
  int v12; // edx
  int v13; // edx
  int v14; // edi
  int v15; // ebx
  char v16; // al
  char v17; // cl
  char v18; // al
  int v19; // [esp+10h] [ebp-Ch]
  int2 xLeft; // [esp+14h] [ebp-8h]
  int v21; // [esp+24h] [ebp+8h]

  v3 = a2;
  if ( !*(_DWORD *)&byte_5D4594[1313660] )
  {
    *(_DWORD *)&byte_5D4594[1313660] = sub_44CFC0((CHAR *)&byte_587000[176016]);
    *(_DWORD *)&byte_5D4594[1313664] = sub_44CFC0((CHAR *)&byte_587000[176032]);
    *(_DWORD *)&byte_5D4594[1313668] = sub_44CFC0((CHAR *)&byte_587000[176040]);
    *(_DWORD *)&byte_5D4594[1313672] = sub_44CFC0((CHAR *)&byte_587000[176052]);
    *(_DWORD *)&byte_5D4594[1313676] = sub_44CFC0((CHAR *)&byte_587000[176064]);
    *(_DWORD *)&byte_5D4594[1313680] = sub_44CFC0((CHAR *)&byte_587000[176076]);
    *(_DWORD *)&byte_5D4594[1313684] = sub_44CFC0((CHAR *)&byte_587000[176092]);
  }
  v4 = *(_DWORD *)(a2 + 108);
  if ( v4 == *(_DWORD *)&byte_5D4594[1313660] || v4 == *(_DWORD *)&byte_5D4594[1313684] )
  {
    v5 = *(_DWORD *)&byte_5D4594[1313540];
    v21 = *(_DWORD *)&byte_5D4594[1313536];
    goto LABEL_13;
  }
  if ( v4 == *(_DWORD *)&byte_5D4594[1313668] )
  {
    v5 = *(_DWORD *)&byte_5D4594[1313584];
    v21 = *(_DWORD *)&byte_5D4594[1313580];
LABEL_13:
    v19 = v5;
    goto LABEL_14;
  }
  if ( v4 == *(_DWORD *)&byte_5D4594[1313672]
    || v4 == *(_DWORD *)&byte_5D4594[1313676]
    || v4 == *(_DWORD *)&byte_5D4594[1313680] )
  {
    v21 = *(_DWORD *)&byte_5D4594[1313588];
    v19 = *(_DWORD *)&byte_5D4594[1313592];
  }
  else
  {
    v21 = *(_DWORD *)&byte_5D4594[1313528];
    v19 = *(_DWORD *)&byte_5D4594[1313532];
  }
LABEL_14:
  if ( a3 )
  {
    v6 = *(unsigned __int16 *)(v3 + 432) - *(_DWORD *)(v3 + 12);
    v7 = *(unsigned __int16 *)(v3 + 434) - *(_DWORD *)(v3 + 16);
    v8 = sub_48C6B0(v6, v7);
    if ( v8 + 1 <= 10 )
    {
      sub_45A4E0(v3);
      return 0;
    }
    sub_49AA90(
      (_DWORD *)v3,
      *(_DWORD *)(v3 + 12) + v6 * *(unsigned __int8 *)(v3 + 443) / (v8 + 1),
      *(_DWORD *)(v3 + 16) + v7 * *(unsigned __int8 *)(v3 + 443) / (v8 + 1));
  }
  v10 = *a1;
  v11 = a1[1];
  v12 = *(_DWORD *)(v3 + 16) - a1[5];
  xLeft.field_0 = *(_DWORD *)(v3 + 12) + *a1 - a1[4];
  xLeft.field_4 = v12 + v11 - 22;
  v13 = *(unsigned __int8 *)(v3 + 444);
  if ( xLeft.field_0 - v13 < v10 )
    return 1;
  if ( xLeft.field_4 - v13 < v11 )
    return 1;
  if ( v13 + xLeft.field_0 >= a1[2] )
    return 1;
  if ( v13 + xLeft.field_4 >= a1[3] )
    return 1;
  sub_4B6720(&xLeft, v21, v13, 5);
  sub_434460(v19);
  sub_499B70(xLeft.field_0, xLeft.field_4, *(unsigned __int8 *)(v3 + 444) >> 1);
  v14 = *(_DWORD *)(v3 + 32) - *(_DWORD *)(v3 + 12);
  v15 = *(_DWORD *)(v3 + 36) - *(_DWORD *)(v3 + 16);
  sub_434460(v19);
  sub_49F500(xLeft.field_0, xLeft.field_4);
  sub_49F570(v14, v15);
  sub_49E4B0();
  v16 = *(_BYTE *)(v3 + 445);
  if ( !v16 )
    return 1;
  v17 = *(_BYTE *)(v3 + 446) - 1;
  *(_BYTE *)(v3 + 446) = v17;
  if ( v17 )
    return 1;
  *(_BYTE *)(v3 + 446) = v16;
  v18 = *(_BYTE *)(v3 + 444) - 1;
  *(_BYTE *)(v3 + 444) = v18;
  if ( v18 )
    return 1;
  sub_45A4E0(v3);
  return 0;
}
// 4B6CB4: variable 'v8' is possibly undefined

//----- (004B6E20) --------------------------------------------------------
int __cdecl sub_4B6E20(int *a1, int a2)
{
  return sub_4B6B80(a1, a2, 1);
}

//----- (004B6E40) --------------------------------------------------------
int __cdecl sub_4B6E40(_DWORD *a1, int a2)
{
  return sub_4B6970(a1, a2, *(int *)&byte_5D4594[1313556], *(int *)&byte_5D4594[1313552]);
}

//----- (004B6E60) --------------------------------------------------------
int __cdecl sub_4B6E60(_DWORD *a1, int a2)
{
  return sub_4B6970(a1, a2, *(int *)&byte_5D4594[1313572], *(int *)&byte_5D4594[1313568]);
}

//----- (004B6E80) --------------------------------------------------------
int __cdecl sub_4B6E80(int *a1, int a2)
{
  bool v2; // cc
  __int16 v3; // ax
  __int16 v4; // ax
  int v5; // edx
  int v6; // edi
  int v7; // ecx
  int v8; // eax
  int v9; // edi
  int v10; // esi
  int v11; // ebx
  int v12; // ebp
  __int64 v13; // rax
  int2 v15; // [esp+10h] [ebp-8h]

  v2 = sub_415FF0(0, 100, (const char *)&byte_587000[176104], 503) < 50;
  v3 = *(_WORD *)(a2 + 104);
  if ( v2 )
  {
    if ( v3 > 0 )
    {
      v4 = v3 - 1;
LABEL_6:
      *(_WORD *)(a2 + 104) = v4;
      goto LABEL_7;
    }
  }
  else if ( v3 < 35 )
  {
    v4 = v3 + 1;
    goto LABEL_6;
  }
LABEL_7:
  v5 = *a1;
  v6 = a1[1];
  v7 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
  v8 = v6 + *(_DWORD *)(a2 + 16) - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104) - a1[5];
  v15.field_0 = v7;
  v15.field_4 = v8;
  if ( v7 - 10 >= v5 && v8 - 10 >= v6 && v7 + 10 < a1[2] && v8 + 10 < a1[3] )
  {
    sub_4B6720(&v15, *(int *)&byte_5D4594[1313560], 10, 4);
    v9 = *a1 + *(_DWORD *)(a2 + 32) - a1[4];
    v10 = a1[1] + *(_DWORD *)(a2 + 36) - *(__int16 *)(a2 + 104) - a1[5];
    v11 = v15.field_0 - v9;
    v12 = v15.field_4 - v10;
    if ( v11 * v11 + v12 * v12 > 400 )
    {
      v13 = (__int64)sqrt((double)(v11 * v11 + v12 * v12));
      v9 = v15.field_0 - 20 * v11 / (int)v13;
      v10 = v15.field_4 - 20 * v12 / (int)v13;
    }
    sub_434460(*(int *)&byte_5D4594[1313564]);
    sub_49F500(v15.field_0, v15.field_4);
    sub_49F500(v9, v10);
    sub_49E4B0();
  }
  return 1;
}

//----- (004B6FE0) --------------------------------------------------------
int __cdecl sub_4B6FE0(int *a1, int a2)
{
  int result; // eax

  if ( sub_415FF0(0, 10, (const char *)&byte_587000[176144], 554) >= 5 )
    result = sub_4B6770(a1, a2, *(int *)&byte_5D4594[2523948], *(int *)&byte_5D4594[1313564]);
  else
    result = sub_4B6770(a1, a2, *(int *)&byte_5D4594[1313564], *(int *)&byte_5D4594[1313560]);
  return result;
}

//----- (004B7040) --------------------------------------------------------
int __cdecl sub_4B7040(_DWORD *a1, int a2)
{
  return sub_4B6970(a1, a2, *(int *)&byte_5D4594[2523948], *(int *)&byte_5D4594[1313540]);
}

//----- (004B7060) --------------------------------------------------------
int __cdecl sub_4B7060(_DWORD *a1, int a2)
{
  int result; // eax
  int v3; // eax
  int v4; // eax
  int v5; // edi

  result = sub_4B6970(a1, a2, *(int *)&byte_5D4594[2523948], *(int *)&byte_5D4594[1313540]);
  if ( result == 1 && *(_BYTE *)(a2 + 296) >= 5 )
  {
    v3 = *(_DWORD *)&byte_5D4594[1313688];
    if ( !*(_DWORD *)&byte_5D4594[1313688] )
    {
      v3 = sub_44CFC0((CHAR *)&byte_587000[176184]);
      *(_DWORD *)&byte_5D4594[1313688] = v3;
    }
    v4 = sub_45A360(v3, *(_DWORD *)(a2 + 12), *(_DWORD *)(a2 + 16));
    v5 = v4;
    if ( v4 )
    {
      if ( v4 != -432 )
      {
        *(_DWORD *)(v4 + 432) = *(_DWORD *)(a2 + 12) << 12;
        *(_DWORD *)(v4 + 436) = *(_DWORD *)(a2 + 16) << 12;
        *(_BYTE *)(v4 + 299) = sub_415FF0(0, 255, (const char *)&byte_587000[176196], 605);
        *(_DWORD *)(v5 + 440) = sub_415FF0(1, 1611, (const char *)&byte_587000[176236], 608);
        *(_DWORD *)(v5 + 448) = *(_DWORD *)&byte_5D4594[2598000]
                              + sub_415FF0(10, 96, (const char *)&byte_587000[176276], 611);
        *(_DWORD *)(v5 + 444) = *(_DWORD *)&byte_5D4594[2598000];
      }
      *(_WORD *)(v5 + 104) = sub_415FF0(5, 15, (const char *)&byte_587000[176316], 618);
      *(_WORD *)(v5 + 106) = 0;
      *(_BYTE *)(v5 + 296) = sub_415FF0(0, 8, (const char *)&byte_587000[176356], 620);
      sub_45A110((_DWORD *)v5);
    }
    sub_45A4E0(a2);
    result = 0;
  }
  return result;
}

//----- (004B71A0) --------------------------------------------------------
int __cdecl sub_4B71A0(_DWORD *a1, int a2)
{
  int v2; // edx
  int v3; // ecx
  int v4; // ebx
  int v5; // ebx
  int v6; // edi
  int result; // eax
  int v8; // eax
  int v9; // esi
  int v10; // ebp
  int2 v11; // [esp+10h] [ebp-8h]
  int v12; // [esp+20h] [ebp+8h]

  v2 = *(_DWORD *)(a2 + 16);
  v3 = *(__int16 *)(a2 + 106);
  v11.field_0 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
  v11.field_4 = a1[1] + v2 - v3 - *(__int16 *)(a2 + 104) - a1[5];
  *(_DWORD *)(a2 + 432) += *(_DWORD *)(a2 + 440) * *(_DWORD *)&byte_587000[8 * *(unsigned __int8 *)(a2 + 299) + 192088];
  v4 = *(_DWORD *)(a2 + 440) * *(_DWORD *)&byte_587000[8 * *(unsigned __int8 *)(a2 + 299) + 192092]
     + *(_DWORD *)(a2 + 436);
  *(_DWORD *)(a2 + 436) = v4;
  sub_49AA90((_DWORD *)a2, *(_DWORD *)(a2 + 432) >> 12, v4 >> 12);
  v5 = *(_DWORD *)(a2 + 444) - *(_DWORD *)(a2 + 448);
  v6 = *(_DWORD *)(a2 + 444) - *(_DWORD *)&byte_5D4594[2598000];
  if ( v6 == v5 )
    --v6;
  if ( v6 > 0 )
  {
    if ( v11.field_0 - 10 >= *a1 && v11.field_4 - 10 >= a1[1] && v11.field_0 + 10 < a1[2] && v11.field_4 + 10 < a1[3] )
    {
      sub_4B69F0(a2);
      v8 = 4 * (16 * v6 / v5);
      v12 = *(_DWORD *)&byte_5D4594[v8 + 1313596];
      v9 = v8 / 16;
      v10 = (v8 / 16) >> 1;
      sub_4B6720(&v11, *(_DWORD *)&byte_5D4594[v8 + 1313596], 2 * (v8 / 16) + 1, 5 * v6 / v5);
      sub_434460(v12);
      sub_49CE30(v11.field_0 - v10, v11.field_4 - v10, v9, v9);
    }
    result = 1;
  }
  else
  {
    sub_45A4E0(a2);
    result = 0;
  }
  return result;
}

//----- (004B7310) --------------------------------------------------------
int __cdecl sub_4B7310(_DWORD *a1, int a2)
{
  _DWORD *v2; // esi
  __int16 v3; // cx
  int v4; // edi
  int v5; // eax
  __int16 v6; // bp
  int v7; // ebx
  __int16 v8; // ax
  double v9; // st7
  __int16 v10; // ax
  int v11; // edi
  char v12; // al
  int result; // eax
  int v14; // ebx
  int v15; // edi
  int v16; // edx
  int v17; // ebx
  int v18; // eax
  int v19; // edi
  float v20; // [esp+0h] [ebp-2Ch]
  float v21; // [esp+0h] [ebp-2Ch]
  int2 xLeft; // [esp+14h] [ebp-18h]
  __int16 v23[4]; // [esp+1Ch] [ebp-10h]
  float2 v24; // [esp+24h] [ebp-8h]
  int v25; // [esp+34h] [ebp+8h]

  v2 = (_DWORD *)a2;
  if ( !*(_DWORD *)&byte_5D4594[1313692] )
  {
    *(_DWORD *)&byte_5D4594[1313692] = sub_44CFC0((CHAR *)&byte_587000[176396]);
    *(_DWORD *)&byte_5D4594[1313696] = sub_44CFC0((CHAR *)&byte_587000[176412]);
  }
  v3 = *(_WORD *)(a2 + 104);
  if ( v3 > 0 )
  {
    v14 = a1[5];
    v15 = *(_DWORD *)(a2 + 16);
    xLeft.field_0 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
    v16 = a1[1] - v14;
    v17 = *(_DWORD *)&byte_5D4594[1313588];
    v18 = *(_DWORD *)(a2 + 108);
    xLeft.field_4 = v15 + v16 - v3;
    if ( v18 != *(_DWORD *)&byte_5D4594[1313692] )
      v17 = *(_DWORD *)&byte_5D4594[1313536];
    sub_4B6720(&xLeft, v17, *(unsigned __int8 *)(a2 + 442), 5);
    v19 = *(__int16 *)(a2 + 104) - *(__int16 *)(a2 + 440);
    sub_434460(v17);
    sub_49F500(xLeft.field_0, xLeft.field_4);
    sub_49F570(0, v19);
    sub_49E4B0();
    *(_WORD *)(a2 + 440) = *(_WORD *)(a2 + 104);
    *(_WORD *)(a2 + 104) += *(char *)(a2 + 296);
    sub_434460(*(int *)&byte_5D4594[1313592]);
    sub_499B70(xLeft.field_0, xLeft.field_4, *(unsigned __int8 *)(a2 + 442) / 3);
    result = 1;
  }
  else
  {
    if ( !*(_DWORD *)&byte_5D4594[1313700] )
    {
      *(_DWORD *)&byte_5D4594[1313700] = sub_44CFC0((CHAR *)&byte_587000[176424]);
      *(_DWORD *)&byte_5D4594[1313704] = sub_44CFC0((CHAR *)&byte_587000[176440]);
    }
    v4 = *(_DWORD *)(a2 + 12);
    v5 = *(_DWORD *)(a2 + 16);
    v6 = v5 + 20;
    v25 = v5 - *(_DWORD *)(a2 + 436);
    v24.field_0 = (double)(v2[3] - v2[108]);
    v24.field_4 = (double)v25;
    v7 = sub_509ED0(&v24);
    v23[2] = v4;
    v23[3] = v6;
    v20 = *(float *)&byte_587000[8 * v7 + 194136] * 150.0 + (double)(int)v2[108];
    v8 = sub_419A70(v20);
    v9 = *(float *)&byte_587000[8 * v7 + 194140] * 150.0;
    v23[0] = v8;
    v21 = v9 + (double)(int)v2[109];
    v10 = sub_419A70(v21);
    v11 = *(_DWORD *)&byte_5D4594[1313700];
    v23[1] = v10;
    if ( v2[27] != *(_DWORD *)&byte_5D4594[1313692] )
      v11 = *(_DWORD *)&byte_5D4594[1313704];
    v12 = sub_415FF0(6, 8, (const char *)&byte_587000[176452], 793);
    sub_499490(v11, v23, 0, 0, v12, 1);
    sub_45A4E0((int)v2);
    result = 0;
  }
  return result;
}

//----- (004B7540) --------------------------------------------------------
int __cdecl sub_4B7540(_DWORD *a1, int a2)
{
  unsigned int v2; // eax
  int v4; // edx
  int v5; // eax
  char v6; // al
  char v7; // al
  char v8; // al
  unsigned __int8 v9; // al
  char v10; // al
  char v11; // al
  char v12; // dl
  bool v13; // zf
  char v14; // al
  char v15; // al
  char v16; // al
  int2 xLeft; // [esp+8h] [ebp-8h]

  if ( *(_BYTE *)(a2 + 441) == 3 )
    goto LABEL_29;
  v2 = *(_DWORD *)(a2 + 356);
  if ( v2 && v2 <= *(int *)&byte_5D4594[2598000] )
  {
    *(_BYTE *)(a2 + 441) = 3;
    *(_BYTE *)(a2 + 442) = 4;
    *(_BYTE *)(a2 + 443) = 4;
    sub_49B950((_DWORD *)a2, *(int *)&byte_5D4594[2649704]);
  }
  if ( *(_BYTE *)(a2 + 441) == 3 )
  {
LABEL_29:
    if ( !*(_BYTE *)(a2 + 440) )
    {
      sub_45A4E0(a2);
      return 0;
    }
  }
  v4 = a1[1];
  xLeft.field_0 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
  v5 = *(unsigned __int8 *)(a2 + 440);
  xLeft.field_4 = *(_DWORD *)(a2 + 16) + v4 - a1[5] - *(__int16 *)(a2 + 104);
  sub_4B6720(&xLeft, *(_DWORD *)(a2 + 432), v5, v5 + 3);
  sub_434460(*(_DWORD *)(a2 + 436));
  sub_499B70(xLeft.field_0, xLeft.field_4, *(unsigned __int8 *)(a2 + 440) >> 1);
  if ( byte_5D4594[2598000] & 3 )
    *(_WORD *)(a2 + 104) += *(char *)(a2 + 446);
  v6 = *(_BYTE *)(a2 + 442);
  if ( v6 )
  {
    v7 = v6 - 1;
    *(_BYTE *)(a2 + 442) = v7;
    if ( !v7 )
    {
      v8 = *(_BYTE *)(a2 + 441);
      if ( v8 == 1 )
      {
        v9 = *(_BYTE *)(a2 + 440) + 1;
        *(_BYTE *)(a2 + 440) = v9;
        if ( v9 >= 5u )
          *(_BYTE *)(a2 + 441) = 2;
      }
      else
      {
        v13 = v8 == 2;
        v14 = *(_BYTE *)(a2 + 440);
        if ( v13 )
        {
          v15 = v14 - 1;
          *(_BYTE *)(a2 + 440) = v15;
          if ( !v15 )
            *(_BYTE *)(a2 + 441) = 1;
        }
        else
        {
          v16 = v14 - 1;
          *(_BYTE *)(a2 + 440) = v16;
          if ( !v16 )
          {
            sub_45A4E0(a2);
            return 0;
          }
        }
      }
      *(_BYTE *)(a2 + 442) = *(_BYTE *)(a2 + 443);
    }
  }
  v10 = *(_BYTE *)(a2 + 445);
  if ( v10 )
  {
    v11 = v10 - 1;
    *(_BYTE *)(a2 + 445) = v11;
    if ( !v11 )
    {
      v12 = *(_BYTE *)(a2 + 444);
      *(_BYTE *)(a2 + 446) = -*(_BYTE *)(a2 + 446);
      *(_BYTE *)(a2 + 445) = v12;
    }
  }
  if ( (short)*(_WORD *)(a2 + 104) >= 0 )
    return 1;
  sub_45A4E0(a2);
  return 0;
}

//----- (004B7700) --------------------------------------------------------
int __cdecl sub_4B7700(int a1, int a2)
{
  int v2; // eax

  v2 = *(_DWORD *)&byte_5D4594[1313708];
  if ( !*(_DWORD *)&byte_5D4594[1313708] )
  {
    v2 = sub_44CFC0((CHAR *)&byte_587000[176492]);
    *(_DWORD *)&byte_5D4594[1313708] = v2;
  }
  sub_4B7740(v2, a1, a2);
  return 1;
}

//----- (004B7740) --------------------------------------------------------
_DWORD *__cdecl sub_4B7740(int a1, int a2, int a3)
{
  int2 *v3; // edi
  int v4; // ebp
  int v5; // eax
  int v6; // esi
  char v7; // al
  _DWORD *result; // eax
  int2 a2a; // [esp+10h] [ebp-8h]

  v3 = (int2 *)(a3 + 12);
  v4 = 2;
  do
  {
    a2a.field_0 = v3->field_0 + sub_415FF0(-15, 15, (const char *)&byte_587000[176508], 35);
    v5 = *(_DWORD *)(a3 + 16) + sub_415FF0(-15, 15, (const char *)&byte_587000[176548], 36);
    a2a.field_4 = v5;
    v6 = v5 - *(_DWORD *)(a2 + 20);
    v7 = sub_415FF0(8, 12, (const char *)&byte_587000[176588], 40);
    result = (_DWORD *)sub_499950(a1, &a2a, v3, v6, -v7);
    --v4;
  }
  while ( v4 );
  return result;
}

//----- (004B77D0) --------------------------------------------------------
int __cdecl sub_4B77D0(int a1, int a2)
{
  int v2; // eax

  v2 = *(_DWORD *)&byte_5D4594[1313712];
  if ( !*(_DWORD *)&byte_5D4594[1313712] )
  {
    v2 = sub_44CFC0((CHAR *)&byte_587000[176628]);
    *(_DWORD *)&byte_5D4594[1313712] = v2;
  }
  sub_4B7740(v2, a1, a2);
  return 1;
}

//----- (004B7810) --------------------------------------------------------
int __cdecl sub_4B7810(int a1, int a2)
{
  int v3; // ebx
  int v4; // ebp
  int v5; // eax
  int v6; // edi
  int v7; // eax
  int v8; // esi
  int v9; // [esp+8h] [ebp+8h]

  if ( sub_40A5C0(0x200000) )
    return 1;
  if ( !*(_DWORD *)&byte_5D4594[1313716] )
    *(_DWORD *)&byte_5D4594[1313716] = sub_44CFC0((CHAR *)&byte_587000[176640]);
  v3 = a2;
  v9 = 2;
  do
  {
    v4 = *(_DWORD *)(v3 + 12) + sub_415FF0(-10, 10, (const char *)&byte_587000[176656], 42);
    v5 = sub_415FF0(-10, 10, (const char *)&byte_587000[176696], 43);
    v6 = *(_DWORD *)(v3 + 16) + v5;
    v7 = sub_45A360(*(int *)&byte_5D4594[1313716], v4, v6);
    v8 = v7;
    if ( v7 )
    {
      *(_DWORD *)(v7 + 432) = v4 << 12;
      *(_DWORD *)(v7 + 436) = v6 << 12;
      *(_BYTE *)(v7 + 299) = 0;
      *(_DWORD *)(v7 + 440) = 0;
      *(_DWORD *)(v7 + 448) = *(_DWORD *)&byte_5D4594[2598000]
                            + sub_415FF0(90, 120, (const char *)&byte_587000[176736], 63);
      *(_DWORD *)(v8 + 444) = *(_DWORD *)&byte_5D4594[2598000];
      *(_WORD *)(v8 + 106) = 0;
      *(_BYTE *)(v8 + 296) = -5;
      *(_WORD *)(v8 + 104) = v6 - *(_WORD *)(a1 + 20);
      sub_45A110((_DWORD *)v8);
    }
    --v9;
  }
  while ( v9 );
  return 1;
}

//----- (004B7920) --------------------------------------------------------
int __cdecl sub_4B7920(int *a1, _DWORD *a2)
{
  int v2; // eax
  int v3; // edi
  _DWORD *v4; // edi
  int v5; // eax

  v2 = *(_DWORD *)&byte_5D4594[1313720];
  if ( !*(_DWORD *)&byte_5D4594[1313720] )
  {
    v2 = sub_44CFC0((CHAR *)&byte_587000[176776]);
    *(_DWORD *)&byte_5D4594[1313720] = v2;
  }
  v3 = a2[81];
  if ( (a2[3] - v3) * (a2[3] - v3) + (a2[4] - a2[82]) * (a2[4] - a2[82]) > 200 )
  {
    v4 = (_DWORD *)sub_45A360(v2, v3, a2[82]);
    v4[108] = a2[3];
    v4[109] = a2[4];
    sub_45A110(v4);
    v5 = a2[4];
    a2[81] = a2[3];
    a2[82] = v5;
    sub_49B950(v4, *(_DWORD *)&byte_5D4594[2649704] / 3u);
  }
  return sub_4BBD30(a1, (int)a2);
}

//----- (004B79D0) --------------------------------------------------------
int __cdecl sub_4B79D0(int *a1, _DWORD *a2)
{
  int v2; // eax
  int v3; // edi
  _DWORD *v4; // edi
  int v5; // eax

  v2 = *(_DWORD *)&byte_5D4594[1313724];
  if ( !*(_DWORD *)&byte_5D4594[1313724] )
  {
    v2 = sub_44CFC0((CHAR *)&byte_587000[176792]);
    *(_DWORD *)&byte_5D4594[1313724] = v2;
  }
  v3 = a2[81];
  if ( (a2[3] - v3) * (a2[3] - v3) + (a2[4] - a2[82]) * (a2[4] - a2[82]) > 200 )
  {
    v4 = (_DWORD *)sub_45A360(v2, v3, a2[82]);
    v4[108] = a2[3];
    v4[109] = a2[4];
    sub_45A110(v4);
    v5 = a2[4];
    a2[81] = a2[3];
    a2[82] = v5;
    sub_49B950(v4, *(_DWORD *)&byte_5D4594[2649704] / 3u);
  }
  return sub_4BBD30(a1, (int)a2);
}

//----- (004B7A80) --------------------------------------------------------
int __cdecl sub_4B7A80(_DWORD *a1, int a2)
{
  int result; // eax
  __int16 v3; // dx
  int v4; // eax
  int v5; // ecx
  int v6; // ebx
  int v7; // edi
  int v8; // eax
  int v9; // eax
  int v10; // eax
  int v11; // [esp-18h] [ebp-28h]
  int v12; // [esp-14h] [ebp-24h]
  char v13; // [esp-Ch] [ebp-1Ch]
  __int16 v14[4]; // [esp+0h] [ebp-10h]
  int2 v15; // [esp+8h] [ebp-8h]

  if ( !*(_DWORD *)&byte_5D4594[1313728] )
  {
    *(_DWORD *)&byte_5D4594[1313736] = sub_44CFC0((CHAR *)&byte_587000[176812]);
    *(_DWORD *)&byte_5D4594[1313732] = sub_4344A0(100, 100, 255);
    *(_DWORD *)&byte_5D4594[1313728] = 1;
  }
  if ( (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(a2 + 316)) <= 0x46 )
  {
    if ( sub_415FF0(0, 100, (const char *)&byte_587000[176824], 54) > 85 )
    {
      v3 = *(_WORD *)(a2 + 328);
      v14[0] = *(_WORD *)(a2 + 324);
      v14[1] = v3;
      v14[2] = *(_WORD *)(a2 + 12) + sub_415FF0(-5, 5, (const char *)&byte_587000[176864], 60);
      v14[3] = *(_WORD *)(a2 + 16) + sub_415FF0(-5, 5, (const char *)&byte_587000[176904], 61);
      v13 = sub_415FF0(6, 10, (const char *)&byte_587000[176944], 66);
      v4 = sub_415FF0(-5, 5, (const char *)&byte_587000[176984], 65);
      sub_499490(*(int *)&byte_5D4594[1313736], v14, 0, v4, v13, 0);
    }
    v5 = *(_DWORD *)(a2 + 12);
    v6 = a1[1] - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104);
    v7 = a1[5];
    v8 = *(_DWORD *)(a2 + 328);
    v15.field_0 = v5 + *a1 - a1[4];
    v12 = *(_DWORD *)(a2 + 324);
    v11 = *(_DWORD *)(a2 + 16);
    v15.field_4 = *(_DWORD *)(a2 + 16) + v6 - v7;
    v9 = sub_48C690(v5, v11, v12, v8);
    v10 = 8 - v9 / 40;
    if ( v10 < 0 )
      v10 = 1;
    sub_4B6720(&v15, *(int *)&byte_5D4594[1313732], v10, 12);
    result = 1;
  }
  else
  {
    sub_45A4E0(a2);
    result = 0;
  }
  return result;
}
// 4B7BE5: variable 'v9' is possibly undefined

//----- (004B7C20) --------------------------------------------------------
int __cdecl sub_4B7C20(int *a1, int a2)
{
  return sub_4BC700(a1, a2);
}

//----- (004B7C40) --------------------------------------------------------
_DWORD *__cdecl sub_4B7C40(__int16 a1, unsigned __int16 *a2, unsigned __int16 a3, unsigned __int8 a4, __int16 a5)
{
  int v5; // eax
  _DWORD *result; // eax
  _DWORD *v7; // edi
  _DWORD *v8; // esi
  int v9; // [esp-8h] [ebp-1Ch]
  int v10; // [esp-4h] [ebp-18h]
  int v11; // [esp+10h] [ebp-4h]

  v10 = a2[1];
  v9 = *a2;
  v5 = sub_44CFC0((CHAR *)&byte_587000[177024]);
  result = (_DWORD *)sub_45A360(v5, v9, v10);
  v7 = result;
  if ( result )
  {
    result = sub_45A240(a3);
    v8 = result;
    if ( result )
    {
      result[3] = *a2;
      result[4] = a2[1];
      *((_BYTE *)result + 297) = sub_509EA0(a4);
      HIWORD(v11) = a1;
      LOWORD(v11) = a5;
      v8[69] = 8;
      v7[108] = v8;
      v7[109] = v11;
      result = *(_DWORD **)&byte_5D4594[2598000];
      v7[79] = *(_DWORD *)&byte_5D4594[2598000];
    }
  }
  return result;
}

//----- (004B7D00) --------------------------------------------------------
int __cdecl sub_4B7D00(int *a1, _DWORD *a2)
{
  _DWORD *v2; // esi
  int v3; // ecx
  int v4; // edx
  int v5; // ebx
  int v6; // eax
  int v7; // ecx
  int v8; // edx
  int result; // eax
  unsigned int v10; // ebp
  unsigned __int8 *v11; // edi
  unsigned int v12; // eax
  int v13; // ecx
  int v14; // eax
  int v15; // [esp+Ch] [ebp-8h]
  __int64 v16; // [esp+Ch] [ebp-8h]
  int v17; // [esp+10h] [ebp-4h]
  int v18; // [esp+1Ch] [ebp+8h]

  v2 = a2;
  v3 = a2[3];
  v4 = a2[4];
  v5 = a2[76];
  v18 = a2[77];
  v6 = *(_DWORD *)&byte_5D4594[1313740];
  v15 = v3;
  v17 = v4;
  if ( !*(_DWORD *)&byte_5D4594[1313740] )
  {
    v6 = sub_44CFC0((CHAR *)&byte_587000[177040]);
    *(_DWORD *)&byte_5D4594[1313740] = v6;
  }
  v7 = *(_DWORD *)&byte_5D4594[2598000] - v2[79];
  v8 = *((unsigned __int16 *)v2 + 218);
  if ( v7 < (unsigned int)(unsigned __int16)v8 )
  {
    if ( v7 >= v8 - 1 )
      sub_499610(v6, 50, 1000, 30, v2[3], v2[4]);
    sub_4BBD60(a1, (int)v2);
    v10 = 0;
    v11 = &byte_587000[192092];
    do
    {
      if ( v10 >= *(unsigned __int8 *)(v5 + 8) )
        v10 = 0;
      v12 = (v10 + *(_DWORD *)&byte_5D4594[2598000] + v2[32]) / ((unsigned int)*(unsigned __int8 *)(v5 + 9) + 1);
      v2[77] = v12;
      if ( v12 >= *(unsigned __int8 *)(v5 + 8) )
        v2[77] = v12 % *(unsigned __int8 *)(v5 + 8);
      *(_DWORD *)(v5 + 12) = 5;
      v13 = v15 + 2 * *((_DWORD *)v11 - 1);
      v2[3] = v13;
      v14 = v17 + 2 * *(_DWORD *)v11;
      v2[4] = v14;
      if ( v13 >= 0 && v13 < 5888 && v14 >= 0 && v14 < 5888 )
        sub_4BBD60(a1, (int)v2);
      v11 += 80;
      ++v10;
    }
    while ( (int)v11 < (int)&byte_587000[194140] );
    v2[3] = v15;
    v2[4] = v17;
    v2[77] = v18;
    *(_DWORD *)(v5 + 12) = 2;
    sub_434560(1);
    v16 = *(unsigned int *)&byte_5D4594[2598000];
    LODWORD(v16) = v2[79];
    sub_434580((__int64)(((double)*(unsigned int *)&byte_5D4594[2598000] - (double)v16)
                       / (double)*((unsigned __int16 *)v2 + 218)
                       * 255.0));
    (*(void (__cdecl **)(int *, _DWORD))(v2[108] + 300))(a1, v2[108]);
    sub_434560(0);
    result = 1;
  }
  else
  {
    sub_45A4B0((_QWORD *)v2[108]);
    sub_45A4E0((int)v2);
    result = 0;
  }
  return result;
}

//----- (004B7EE0) --------------------------------------------------------
int __cdecl sub_4B7EE0(__int16 a1)
{
  int result; // eax
  int v2; // esi

  if ( !*(_DWORD *)&byte_5D4594[1313744] )
    *(_DWORD *)&byte_5D4594[1313744] = sub_44CFC0((CHAR *)&byte_587000[177052]);
  if ( !*(_DWORD *)&byte_5D4594[1313740] )
    *(_DWORD *)&byte_5D4594[1313740] = sub_44CFC0((CHAR *)&byte_587000[177068]);
  result = sub_45A060();
  v2 = result;
  if ( result )
  {
    while ( *(_DWORD *)(v2 + 108) != *(_DWORD *)&byte_5D4594[1313744] || *(_WORD *)(v2 + 438) != a1 )
    {
      result = sub_45A070(v2);
      v2 = result;
      if ( !result )
        return result;
    }
    sub_499610(*(int *)&byte_5D4594[1313740], 50, 1000, 30, *(_DWORD *)(v2 + 12), *(_DWORD *)(v2 + 16));
    sub_45A4B0(*(_QWORD **)(v2 + 432));
    result = sub_45A4E0(v2);
  }
  return result;
}

//----- (004B7F90) --------------------------------------------------------
int sub_4B7F90()
{
  int result; // eax

  *(_DWORD *)&byte_5D4594[1313748] = sub_44CFC0((CHAR *)&byte_587000[177080]);
  *(_DWORD *)&byte_5D4594[1313752] = sub_44CFC0((CHAR *)&byte_587000[177100]);
  *(_DWORD *)&byte_5D4594[1313756] = sub_44CFC0((CHAR *)&byte_587000[177120]);
  *(_DWORD *)&byte_5D4594[1313760] = sub_44CFC0((CHAR *)&byte_587000[177140]);
  *(_DWORD *)&byte_5D4594[1313768] = sub_44CFC0((CHAR *)&byte_587000[177160]);
  *(_DWORD *)&byte_5D4594[1313772] = sub_44CFC0((CHAR *)&byte_587000[177180]);
  *(_DWORD *)&byte_5D4594[1313776] = sub_44CFC0((CHAR *)&byte_587000[177200]);
  result = sub_44CFC0((CHAR *)&byte_587000[177220]);
  *(_DWORD *)&byte_5D4594[1313780] = result;
  *(_DWORD *)&byte_5D4594[1313764] = 0;
  *(_DWORD *)&byte_5D4594[1313784] = 1;
  return result;
}

//----- (004B8020) --------------------------------------------------------
int __cdecl sub_4B8020(int *a1, _DWORD *a2)
{
  int v2; // esi
  int v3; // eax
  _DWORD *v4; // eax
  int v5; // eax
  int result; // eax

  v2 = a2[108];
  if ( sub_578B70(a2[108]) )
  {
    v3 = sub_578B30(v2);
    v4 = sub_45A720(v3);
  }
  else
  {
    v5 = sub_578B30(v2);
    v4 = sub_45A6F0(v5);
  }
  if ( v4 )
  {
    sub_49AA90(a2, v4[3], v4[4] + 3);
    result = sub_4BBD60(a1, (int)a2);
  }
  else
  {
    sub_45A4E0((int)a2);
    result = 0;
  }
  return result;
}
// 4B8040: variable 'v3' is possibly undefined
// 4B804D: variable 'v5' is possibly undefined

//----- (004B8090) --------------------------------------------------------
_DWORD *__cdecl sub_4B8090(unsigned int a1, int a2)
{
  int v2; // edi
  int v3; // eax
  _DWORD *result; // eax
  int v5; // eax
  _DWORD *v6; // esi
  int4 v7; // [esp+0h] [ebp-10h]

  if ( !*(_DWORD *)&byte_5D4594[1313784] )
    sub_4B7F90();
  v2 = a2;
  switch ( a2 )
  {
    case 0:
      sub_44CFC0((CHAR *)&byte_587000[177380]);
      break;
    case 1:
      sub_44CFC0((CHAR *)&byte_587000[177240]);
      break;
    case 2:
      sub_44CFC0((CHAR *)&byte_587000[177260]);
      break;
    case 3:
      sub_44CFC0((CHAR *)&byte_587000[177360]);
      break;
    case 5:
      sub_44CFC0((CHAR *)&byte_587000[177280]);
      break;
    case 6:
      sub_44CFC0((CHAR *)&byte_587000[177340]);
      break;
    case 7:
      sub_44CFC0((CHAR *)&byte_587000[177320]);
      break;
    case 8:
      sub_44CFC0((CHAR *)&byte_587000[177300]);
      break;
    default:
      break;
  }
  if ( sub_578B70(a1) )
  {
    v3 = sub_578B30(a1);
    result = sub_45A720(v3);
  }
  else
  {
    v5 = sub_578B30(a1);
    result = sub_45A6F0(v5);
  }
  v6 = result;
  if ( result )
  {
    v7.field_0 = result[3] - 10;
    v7.field_4 = result[4] - 10;
    v7.field_8 = result[3] + 10;
    v7.field_C = result[4] + 10;
    *(_DWORD *)&byte_5D4594[1313788] = 0;
    sub_49AB00(&v7, sub_4B81E0, (int)&a1);
    result = *(_DWORD **)&byte_5D4594[1313788];
    if ( *(_DWORD *)&byte_5D4594[1313788] != 1 )
    {
      result = (_DWORD *)sub_45A360(*(_DWORD *)&byte_5D4594[4 * v2 + 1313748], v6[3], v6[4] + 3);
      if ( result )
        result[108] = a1;
    }
  }
  return result;
}
// 4B810D: variable 'v3' is possibly undefined
// 4B811F: variable 'v5' is possibly undefined

//----- (004B81E0) --------------------------------------------------------
void __cdecl sub_4B81E0(int a1, int a2)
{
  unsigned __int8 *v2; // eax

  v2 = &byte_5D4594[1313748];
  do
  {
    if ( *(_DWORD *)(a1 + 108) == *(_DWORD *)v2 && *(_DWORD *)(a1 + 432) == *(_DWORD *)a2 )
      *(_DWORD *)&byte_5D4594[1313788] = 1;
    v2 += 4;
  }
  while ( (int)v2 < (int)&byte_5D4594[1313784] );
}

//----- (004B8220) --------------------------------------------------------
int sub_4B8220()
{
  int result; // eax

  if ( *(_DWORD *)&byte_5D4594[1313792] )
    sub_45A4B0(*(_QWORD **)&byte_5D4594[1313792]);
  *(_DWORD *)&byte_5D4594[1313792] = 0;
  if ( *(_DWORD *)&byte_5D4594[1313796] )
    sub_45A4B0(*(_QWORD **)&byte_5D4594[1313796]);
  result = *(_DWORD *)&byte_5D4594[1313800];
  if ( *(_DWORD *)&byte_5D4594[1313800] )
    result = sub_45A4B0(*(_QWORD **)&byte_5D4594[1313800]);
  *(_DWORD *)&byte_5D4594[1313796] = 0;
  *(_DWORD *)&byte_5D4594[1313800] = 0;
  return result;
}

//----- (004B8270) --------------------------------------------------------
int __cdecl sub_4B8270(int a1, int a2)
{
  int v2; // ebx
  char *v3; // esi
  _DWORD *v4; // eax
  char *v5; // eax
  _DWORD *v6; // edi
  _DWORD *v7; // eax
  _DWORD *v8; // ebp
  unsigned __int8 v9; // al
  int *v10; // ebp
  _DWORD *v11; // eax
  int v12; // edi
  int v13; // eax
  int v14; // ecx
  _DWORD *v15; // edx
  int v16; // eax
  int *v17; // edi
  int v18; // eax
  char v20; // al
  __int16 *v21; // edi
  int v22; // esi
  int *v23; // eax
  int v24; // eax
  int v25; // eax
  int v26; // [esp-4h] [ebp-6Ch]
  int v27; // [esp+10h] [ebp-58h]
  int v28; // [esp+14h] [ebp-54h]
  char *v29; // [esp+18h] [ebp-50h]
  int v30; // [esp+1Ch] [ebp-4Ch]
  int v31; // [esp+20h] [ebp-48h]
  char *v32; // [esp+24h] [ebp-44h]
  int v33; // [esp+28h] [ebp-40h]
  int v34; // [esp+2Ch] [ebp-3Ch]
  BOOL v35; // [esp+30h] [ebp-38h]
  int v36[13]; // [esp+34h] [ebp-34h]

  v2 = a2;
  v26 = *(_DWORD *)(a2 + 128);
  v31 = 0;
  v30 = 0;
  v29 = 0;
  v3 = sub_417040(v26);
  v32 = v3;
  if ( !v3 )
    return 1;
  if ( *(_DWORD *)&byte_5D4594[2618908] && *(_BYTE *)(*(_DWORD *)&byte_5D4594[2618908] + 3680) & 1 )
    v30 = 1;
  if ( *(_DWORD *)&byte_5D4594[2616328] == *(_DWORD *)(v2 + 128) )
  {
    v4 = sub_418C80(*(int *)&byte_5D4594[2616328]);
    if ( !v4 )
      goto LABEL_15;
    v5 = sub_418AB0(*((unsigned __int8 *)v4 + 4));
    goto LABEL_14;
  }
  if ( v3[3680] & 1 )
    return 1;
  v6 = sub_418C80(*(int *)&byte_5D4594[2616328]);
  if ( v6 )
  {
    v7 = sub_418C80(*(_DWORD *)(v2 + 128));
    v8 = v7;
    if ( v7 )
    {
      if ( sub_419150((int)v6, (int)v7) )
        v31 = 1;
      v5 = sub_418AB0(*((unsigned __int8 *)v8 + 4));
LABEL_14:
      v29 = v5;
      goto LABEL_15;
    }
  }
LABEL_15:
  v9 = sub_417DD0();
  v10 = (int *)a1;
  v35 = v9 != 0;
  if ( !(v3[4] & 1) )
  {
LABEL_24:
    v12 = 0;
    goto LABEL_25;
  }
  v36[2] = *(_DWORD *)&byte_5D4594[3805496];
  v36[8] = *(_DWORD *)&byte_5D4594[3805496];
  v11 = *(_DWORD **)&byte_5D4594[1313792];
  v12 = 0;
  v36[0] = 0;
  v36[1] = 0;
  v36[3] = *(_DWORD *)&byte_5D4594[3807120];
  v36[9] = *(_DWORD *)&byte_5D4594[3807120];
  v36[4] = 0;
  v36[5] = 0;
  if ( *(_DWORD *)&byte_5D4594[1313792]
    || (v13 = sub_44CFC0((CHAR *)&byte_587000[177400]),
        v11 = sub_45A240(v13),
        (*(_DWORD *)&byte_5D4594[1313792] = v11) != 0) )
  {
    v14 = 0;
    v15 = v3 + 2324;
    while ( *v15 != 1 )
    {
      ++v14;
      v15 += 6;
      if ( v14 >= 27 )
        goto LABEL_23;
    }
    qmemcpy(v11 + 108, &v3[24 * v14 + 2328], 0x14u);
    v11 = *(_DWORD **)&byte_5D4594[1313792];
    v3 = v32;
LABEL_23:
    v11[3] = *(_DWORD *)(v2 + 12) - v10[4] + *v10 + 15;
    *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313792] + 16) = v10[1] - v10[5] + *(_DWORD *)(v2 + 16) - 25;
    (*(void (__cdecl **)(int *, _DWORD))(*(_DWORD *)&byte_5D4594[1313792] + 300))(v36, *(_DWORD *)&byte_5D4594[1313792]);
    goto LABEL_24;
  }
LABEL_25:
  if ( !sub_4356C0(v2, 23) )
  {
    if ( !sub_4356C0(v2, 25) )
    {
      *(_DWORD *)&byte_5D4594[3798668] = *((_DWORD *)v3 + 574);
      *(_DWORD *)&byte_5D4594[3798672] = *((_DWORD *)v3 + 576);
      *(_DWORD *)&byte_5D4594[3798676] = *((_DWORD *)v3 + 578);
      *(_DWORD *)&byte_5D4594[3798680] = *((_DWORD *)v3 + 577);
      *(_DWORD *)&byte_5D4594[3798684] = *((_DWORD *)v3 + 575);
      *(_DWORD *)&byte_5D4594[3798688] = *((_DWORD *)v3 + 573);
      v16 = *((_DWORD *)v3 + 920);
      if ( v16 & 0x400 )
      {
        v17 = (int *)&byte_5D4594[3798668];
        do
        {
          sub_434480(*v17, (int)&v33, (int)&a2, (int)&a1);
          if ( (unsigned __int8)a2 >= 0x9Bu )
            LOBYTE(a2) = -1;
          else
            LOBYTE(a2) = a2 + 100;
          *v17 = sub_4344A0(v33, a2, a1);
          ++v17;
        }
        while ( (int)v17 < (int)&byte_5D4594[3798692] );
        v12 = 0;
      }
      goto LABEL_37;
    }
    goto LABEL_29;
  }
  if ( !(byte_5D4594[2598000] & 1) )
  {
LABEL_29:
    *(_DWORD *)&byte_5D4594[3798668] = *(_DWORD *)&byte_5D4594[2650684];
    *(_DWORD *)&byte_5D4594[3798672] = *(_DWORD *)&byte_5D4594[2650684];
    *(_DWORD *)&byte_5D4594[3798676] = *(_DWORD *)&byte_5D4594[2650684];
    *(_DWORD *)&byte_5D4594[3798680] = *(_DWORD *)&byte_5D4594[2650684];
    *(_DWORD *)&byte_5D4594[3798684] = *(_DWORD *)&byte_5D4594[2650684];
    *(_DWORD *)&byte_5D4594[3798688] = *(_DWORD *)&byte_5D4594[2650684];
    goto LABEL_37;
  }
  *(_DWORD *)&byte_5D4594[3798668] = *(_DWORD *)&byte_5D4594[2523948];
  *(_DWORD *)&byte_5D4594[3798672] = *(_DWORD *)&byte_5D4594[2523948];
  *(_DWORD *)&byte_5D4594[3798676] = *(_DWORD *)&byte_5D4594[2523948];
  *(_DWORD *)&byte_5D4594[3798680] = *(_DWORD *)&byte_5D4594[2523948];
  *(_DWORD *)&byte_5D4594[3798684] = *(_DWORD *)&byte_5D4594[2523948];
  *(_DWORD *)&byte_5D4594[3798688] = *(_DWORD *)&byte_5D4594[2523948];
LABEL_37:
  sub_4341D0(1, *(int *)&byte_5D4594[3798668]);
  sub_4341D0(2, *(int *)&byte_5D4594[3798672]);
  sub_4341D0(3, *(int *)&byte_5D4594[3798676]);
  sub_4341D0(4, *(int *)&byte_5D4594[3798680]);
  sub_4341D0(5, *(int *)&byte_5D4594[3798684]);
  sub_4341D0(6, *(int *)&byte_5D4594[3798688]);
  v18 = sub_4B8FA0(v2, &v28, &v27);
  if ( !v18 )
    return 0;
  sub_4C4770(v10, (unsigned __int8 *)v2, v18);

  // A player in Nox has a 32-bit integer field that contains bits for each
  // type of armor / weapon. sub_4B8D40 is responsible for iterating over
  // each type and drawing it to the screen.
  //
  // To add support for drawing the quiver, we must modify sub_4B8D40 to
  // iterate from 1 instead of 2 (i.e. bit 1 indicates quiver equipped). We
  // must also modify how sub_4B8D40 is called because of Z ordering.
  //
  // The Z ordering is simple to understand. Usually Nox will draw the player
  // body, and then the armor / weapon on top (or vice versa depending on
  // rotation). The quiver is unique because it is on the player's back, e.g.
  // it must be drawn first, then the body, then the rest of the armor.
  v20 = *(_BYTE *)(v2 + 297);
  if ( v20 != 1 && v20 && v20 != 2 && v20 != 3 && v20 != 6 || *(_DWORD *)(v2 + 276) == 37 )
  {
    sub_4B8D40(v10, v2, *((_DWORD *)v3 + 1) & 2, (_DWORD *)v3 + 581, v28, v27);
    sub_4B8960(v10, v2, *(_DWORD *)v3, (_DWORD *)v3 + 743, v28, v27);
    sub_4B8D40(v10, v2, *((_DWORD *)v3 + 1) & ~2, (_DWORD *)v3 + 581, v28, v27);
  }
  else
  {
    sub_4B8D40(v10, v2, *((_DWORD *)v3 + 1) & ~2, (_DWORD *)v3 + 581, v28, v27);
    sub_4B8960(v10, v2, *(_DWORD *)v3, (_DWORD *)v3 + 743, v28, v27);
    sub_4B8D40(v10, v2, *((_DWORD *)v3 + 1) & 2, (_DWORD *)v3 + 581, v28, v27);
  }

  if ( v30
    || !sub_4356C0(v2, 0)
    || *(_DWORD *)(v2 + 128) == *(_DWORD *)&byte_5D4594[2616328]
    || *(_DWORD *)&byte_5D4594[2614252] && (sub_4356C0(*(int *)&byte_5D4594[2614252], 21) || v31) )
  {
    a1 = sub_4344A0(155, 155, 155);
    if ( !sub_48D830(v2) && !sub_40A5C0(2048) )
    {
      v21 = (__int16 *)(v3 + 4704);
      sub_43F840(0, (unsigned __int16 *)v3 + 2352, &v34, 0, 0);
      v22 = *v10 + *(_DWORD *)(v2 + 12) + v34 / -2 - v10[4];
      a2 = v10[1] - v10[5] + *(_DWORD *)(v2 + 16) - 64;
      sub_434390(*(int *)&byte_5D4594[2614248]);
      sub_43F6E0(0, v21, v22 + 1, a2 + 1);
      sub_434390(a1);
      if ( v35 )
      {
        if ( v29 )
        {
          v23 = (int *)sub_418D50((int)v29);
          if ( v23 )
            sub_434390(*v23);
        }
      }
      sub_43F6E0(0, v21, v22, a2);
      v3 = v32;
      v12 = 0;
    }
    if ( sub_4356C0(v2, 16) )
    {
      v36[2] = *(_DWORD *)&byte_5D4594[3805496];
      v36[8] = *(_DWORD *)&byte_5D4594[3805496];
      v36[0] = 0;
      v36[1] = 0;
      v36[3] = *(_DWORD *)&byte_5D4594[3807120];
      v36[9] = *(_DWORD *)&byte_5D4594[3807120];
      v36[4] = 0;
      v36[5] = 0;
      if ( !*(_DWORD *)&byte_5D4594[1313796] )
      {
        v24 = sub_44CFC0((CHAR *)&byte_587000[177408]);
        *(_DWORD *)&byte_5D4594[1313796] = sub_45A240(v24);
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313796] + 120) |= 0x1000000u;
      }
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313796] + 12) = *v10 + *(_DWORD *)(v2 + 12) - v10[4];
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313796] + 16) = v10[1] - v10[5] + *(_DWORD *)(v2 + 16) - 50;
      (*(void (__cdecl **)(int *, _DWORD))(*(_DWORD *)&byte_5D4594[1313796] + 300))(
        v36,
        *(_DWORD *)&byte_5D4594[1313796]);
    }
    if ( sub_4356C0(v2, 30) )
    {
      v36[2] = *(_DWORD *)&byte_5D4594[3805496];
      v36[8] = *(_DWORD *)&byte_5D4594[3805496];
      v36[0] = 0;
      v36[1] = 0;
      v36[3] = *(_DWORD *)&byte_5D4594[3807120];
      v36[9] = *(_DWORD *)&byte_5D4594[3807120];
      v36[4] = 0;
      v36[5] = 0;
      if ( !*(_DWORD *)&byte_5D4594[1313800] )
      {
        v25 = sub_44CFC0((CHAR *)&byte_587000[177424]);
        *(_DWORD *)&byte_5D4594[1313800] = sub_45A240(v25);
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313800] + 120) |= 0x1000000u;
      }
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313800] + 12) = *v10 + *(_DWORD *)(v2 + 12) - v10[4];
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313800] + 16) = v10[1] - v10[5] + *(_DWORD *)(v2 + 16) - 50;
      (*(void (__cdecl **)(int *, _DWORD))(*(_DWORD *)&byte_5D4594[1313800] + 300))(
        v36,
        *(_DWORD *)&byte_5D4594[1313800]);
    }
    do
      sub_4341D0(v12++, *(int *)&byte_5D4594[2523948]);
    while ( v12 < 6 );
    if ( v2 != *(_DWORD *)&byte_5D4594[2614252] && sub_470A90() )
    {
      if ( sub_40A5C0(4096) )
        sub_4B8EB0(v10, v2, (unsigned __int8)v3[2282], (*((_DWORD *)v3 + 920) >> 10) & 1);
    }
  }
  return 1;
}

//----- (004B8960) --------------------------------------------------------
__int16 __cdecl sub_4B8960(int *a1, int a2, int a3, _DWORD *a4, int a5, int a6)
{
  unsigned __int8 *v6; // esi
  int v7; // ecx
  int v8; // edx
  char v9; // al
  int v10; // eax
  int v11; // edi
  int i; // esi
  int v13; // ebp
  int v14; // eax
  int v15; // ebx
  unsigned __int8 v16; // cl
  int v17; // edi
  int j; // esi
  int v19; // ecx
  int v20; // edi
  int k; // esi
  int v22; // eax
  int v23; // ecx
  int v24; // edi
  int l; // esi
  int v27; // [esp+8h] [ebp-18h]
  BOOL v28; // [esp+Ch] [ebp-14h]
  int *v29; // [esp+10h] [ebp-10h]
  int v30; // [esp+14h] [ebp-Ch]
  int v31; // [esp+18h] [ebp-8h]

  v6 = (unsigned __int8 *)a2;
  v28 = sub_4356C0(a2, 23);
  v7 = 0;
  v30 = 0;
  v31 = 0;
  if ( byte_5D4594[2598000] & 1 )
    v27 = *(_DWORD *)&byte_5D4594[2523948];
  else
    v27 = *(_DWORD *)&byte_5D4594[2650684];
  v8 = a3;
  if ( a3 & 2 )
  {
    v9 = *(_BYTE *)(a2 + 297);
    if ( v9 == 6 || v9 == 7 || v9 == 8 )
    {
      v10 = *(_DWORD *)(a2 + 276);
      if ( v10 != 6 && v10 != 35 && v10 != 39 && v10 != 40 )
      {
        while ( !((1 << v7) & 2) )
        {
          if ( ++v7 >= 26 )
            goto LABEL_22;
        }
        v11 = *(_DWORD *)(a5 + 4 * v7 + 52);
        if ( v11 )
        {
          if ( v28 )
          {
            for ( i = 1; i < 7; ++i )
              sub_4341D0(i, v27);
            v6 = (unsigned __int8 *)a2;
          }
          else
          {
            sub_4B8CA0(a4, (char *)2);
          }
          sub_4C4770(a1, v6, *(_DWORD *)(*(_DWORD *)(v11 + 4 * v6[297] + 4) + 4 * a6));
          v8 = a3;
          v30 = 1;
        }
      }
    }
  }
LABEL_22:
  v13 = 0;
  v29 = (int *)(a5 + 52);
  do
  {
    v14 = 1 << v13;
    if ( !((1 << v13) & 2) )
    {
      v15 = v14 & 0x3000000;
      if ( !(v14 & 0x3000000) || (v16 = v6[297], v16 != 3) && v16 && v16 != 6 && v16 != 7 )
      {
        if ( v14 & v8 && (!(v14 & 0xC00) || !(v8 & 0x4000)) )
        {
          v17 = *v29;
          if ( *v29 )
          {
            if ( v28 )
            {
              for ( j = 1; j < 7; ++j )
                sub_4341D0(j, v27);
              v6 = (unsigned __int8 *)a2;
            }
            else
            {
              sub_4B8CA0(a4, (char *)(1 << v13));
            }
            sub_4C4770(a1, v6, *(_DWORD *)(*(_DWORD *)(v17 + 4 * v6[297] + 4) + 4 * a6));
            if ( v15 )
              v31 = 1;
            v8 = a3;
          }
        }
      }
    }
    ++v13;
    ++v29;
  }
  while ( v13 < 26 );
  if ( a3 & 2 && !v30 )
  {
    v19 = 0;
    while ( !((1 << v19) & 2) )
    {
      if ( ++v19 >= 26 )
        goto LABEL_55;
    }
    v20 = *(_DWORD *)(a5 + 4 * v19 + 52);
    if ( v20 )
    {
      if ( v28 )
      {
        for ( k = 1; k < 7; ++k )
          sub_4341D0(k, v27);
        v6 = (unsigned __int8 *)a2;
      }
      else
      {
        sub_4B8CA0(a4, (char *)2);
      }
      sub_4C4770(a1, v6, *(_DWORD *)(*(_DWORD *)(v20 + 4 * v6[297] + 4) + 4 * a6));
      v8 = a3;
    }
  }
LABEL_55:
  LOWORD(v22) = v31;
  if ( !v31 && v8 & 0x3000000 )
  {
    v23 = 0;
    v22 = (v8 & 0x1000000) != 0 ? 0x1000000 : 0x2000000;
    while ( !((1 << v23) & v22) )
    {
      if ( ++v23 >= 26 )
        return v22;
    }
    v24 = *(_DWORD *)(a5 + 4 * v23 + 52);
    if ( v24 )
    {
      if ( v28 )
      {
        for ( l = 1; l < 7; ++l )
          sub_4341D0(l, v27);
        v6 = (unsigned __int8 *)a2;
      }
      else
      {
        sub_4B8CA0(a4, (char *)v22);
      }
      LOWORD(v22) = sub_4C4770(a1, v6, *(_DWORD *)(*(_DWORD *)(v24 + 4 * v6[297] + 4) + 4 * a6));
    }
  }
  return v22;
}

//----- (004B8CA0) --------------------------------------------------------
_DWORD *__cdecl sub_4B8CA0(_DWORD *a1, char *a2)
{
  _DWORD *result; // eax
  int v3; // ebx
  int v4; // eax
  int v5; // edx
  int v6; // ecx
  _DWORD *v7; // ebp
  int v8; // edi
  _BYTE *v9; // esi
  _DWORD *v10; // ecx
  int v11; // eax
  int *v12; // edi
  int v13; // ebx
  _DWORD **v14; // esi
  int v15; // [esp-Ch] [ebp-14h]

  result = a1;
  v3 = 0;
  while ( (char *)*result != a2 )
  {
    ++v3;
    result += 6;
    if ( v3 >= 26 )
      return result;
  }
  v4 = sub_415CD0(a2);
  result = sub_413270(v4);
  v7 = result;
  if ( result )
  {
    v8 = 1;
    v9 = result + 4;
    do
    {
      LOBYTE(result) = v9[1];
      LOBYTE(v6) = *v9;
      LOBYTE(v5) = *(v9 - 1);
      sub_4340A0(v8++, v5, v6, (int)result);
      v9 += 3;
    }
    while ( v8 < 7 );
    v10 = a1;
    v11 = 3 * v3;
    v12 = v7 + 9;
    v13 = 4;
    v14 = (_DWORD **)&a1[2 * v11 + 1];
    do
    {
      result = *v14;
      if ( *v14 )
      {
        LOBYTE(v5) = *((_BYTE *)result + 26);
        LOBYTE(v10) = *((_BYTE *)result + 25);
        v15 = v5;
        LOBYTE(v5) = *((_BYTE *)result + 24);
        sub_4340A0(*v12, v5, (int)v10, v15);
      }
      ++v14;
      ++v12;
      --v13;
    }
    while ( v13 );
  }
  return result;
}
// 4B8CE7: variable 'v5' is possibly undefined
// 4B8CE7: variable 'v6' is possibly undefined
// 4B8D20: variable 'v10' is possibly undefined

//----- (004B8D40) --------------------------------------------------------
__int16 __cdecl sub_4B8D40(int *a1, int a2, int a3, _DWORD *a4, int a5, int a6)
{
  unsigned __int8 *v6; // esi
  int v7; // ebx
  int *v8; // ebp
  int v9; // eax
  int v10; // edi
  int i; // esi
  int v13; // [esp+10h] [ebp-8h]
  BOOL v14; // [esp+14h] [ebp-4h]

  v6 = (unsigned __int8 *)a2;
  v14 = sub_4356C0(a2, 25);
  if ( byte_5D4594[2598000] & 1 )
    v13 = *(_DWORD *)&byte_5D4594[2523948];
  else
    v13 = *(_DWORD *)&byte_5D4594[2650684];
  v7 = 1;
  v8 = (int *)(a5 + 160);
  do
  {
    v9 = 1 << v7;
    if ( (1 << v7) & a3 )
    {
      v10 = *v8;
      if ( *v8 )
      {
        if ( v14 )
        {
          for ( i = 1; i < 7; ++i )
            sub_4341D0(i, v13);
          v6 = (unsigned __int8 *)a2;
        }
        else
        {
          sub_4B8E10(a4, (char *)(1 << v7));
        }
        LOWORD(v9) = sub_4C4770(a1, v6, *(_DWORD *)(*(_DWORD *)(v10 + 4 * v6[297] + 4) + 4 * a6));
      }
    }
    ++v7;
    ++v8;
  }
  while ( v7 < 27 );
  return v9;
}

//----- (004B8E10) --------------------------------------------------------
_DWORD *__cdecl sub_4B8E10(_DWORD *a1, char *a2)
{
  _DWORD *result; // eax
  int v3; // ebx
  int v4; // eax
  int v5; // edx
  int v6; // ecx
  _DWORD *v7; // ebp
  int v8; // edi
  _BYTE *v9; // esi
  _DWORD *v10; // ecx
  int v11; // eax
  int *v12; // edi
  int v13; // ebx
  _DWORD **v14; // esi
  int v15; // [esp-Ch] [ebp-14h]

  result = a1;
  v3 = 0;
  while ( (char *)*result != a2 )
  {
    ++v3;
    result += 6;
    if ( v3 >= 27 )
      return result;
  }
  v4 = sub_415840(a2);
  result = sub_413250(v4);
  v7 = result;
  if ( result )
  {
    v8 = 1;
    v9 = result + 4;
    do
    {
      LOBYTE(result) = v9[1];
      LOBYTE(v6) = *v9;
      LOBYTE(v5) = *(v9 - 1);
      sub_4340A0(v8++, v5, v6, (int)result);
      v9 += 3;
    }
    while ( v8 < 7 );
    v10 = a1;
    v11 = 3 * v3;
    v12 = v7 + 9;
    v13 = 4;
    v14 = (_DWORD **)&a1[2 * v11 + 1];
    do
    {
      result = *v14;
      if ( *v14 )
      {
        LOBYTE(v5) = *((_BYTE *)result + 26);
        LOBYTE(v10) = *((_BYTE *)result + 25);
        v15 = v5;
        LOBYTE(v5) = *((_BYTE *)result + 24);
        sub_4340A0(*v12, v5, (int)v10, v15);
      }
      ++v14;
      ++v12;
      --v13;
    }
    while ( v13 );
  }
  return result;
}
// 4B8E57: variable 'v5' is possibly undefined
// 4B8E57: variable 'v6' is possibly undefined
// 4B8E90: variable 'v10' is possibly undefined

//----- (004B8EB0) --------------------------------------------------------
void __cdecl sub_4B8EB0(_DWORD *a1, int a2, unsigned __int16 a3, char a4)
{
  int v4; // esi
  int v5; // esi
  int v6; // edi
  float v7; // [esp+0h] [ebp-14h]

  if ( a2 )
  {
    v4 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
    v7 = *(float *)(a2 + 48) + *(float *)(a2 + 48);
    v5 = sub_419A70(v7) + v4;
    v6 = *(_DWORD *)(a2 + 16) + a1[1] - *(__int16 *)(a2 + 104) - a1[5] - 48;
    sub_434460(*(int *)&byte_5D4594[2650656]);
    sub_49CE30(v5, v6, 2, 48);
    if ( a4 )
      sub_434460(*(int *)&byte_5D4594[2618904]);
    else
      sub_434460(*(int *)&byte_5D4594[2650644]);
    sub_49CE30(v5, v6 - 48 * a3 / 100 + 48, 2, 48 * a3 / 100);
    if ( a4 )
      sub_434460(*(int *)&byte_5D4594[2650688]);
    else
      sub_434460(*(int *)&byte_5D4594[2598268]);
    sub_49CC70(v5 - 1, v6 - 1, 4, 50);
  }
}

//----- (004B8FA0) --------------------------------------------------------
int __cdecl sub_4B8FA0(int a1, int *a2, int *a3)
{
  int v3; // esi
  int v4; // eax
  bool v5; // zf
  int v6; // esi
  int v8; // eax
  int v9; // ecx

  v3 = *(_DWORD *)(a1 + 304);
  if ( *(_DWORD *)(a1 + 276) || !sub_48D830(a1) )
  {
    if ( *(_DWORD *)(a1 + 276) != 4 || (v5 = !sub_4356C0(a1, 31), v4 = 53, v5) )
      v4 = *(_DWORD *)(a1 + 276);
  }
  else
  {
    v4 = 19;
  }
  v5 = *(_WORD *)(v3 + 264 * v4 + 44) == 0;
  v6 = v3 + 264 * v4 + 4;
  if ( v5 )
    return 0;
  v8 = sub_4BC5D0((_DWORD *)a1, v6);
  if ( v8 < 0 )
    return 0;
  v9 = *(__int16 *)(v6 + 40);
  if ( v8 >= v9 )
    v8 = v9 - 1;
  if ( a2 )
    *a2 = v6;
  if ( a3 )
    *a3 = v8;
  return *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v6 + 48) + 4 * *(unsigned __int8 *)(a1 + 297) + 4) + 4 * v8);
}

//----- (004B9050) --------------------------------------------------------
int __cdecl sub_4B9050(int *a1, int a2)
{
  int v2; // eax
  int v4; // edi
  int *v5; // ebp
  int v6; // eax
  int v7; // esi
  int v8; // eax
  int v9; // esi
  int v10; // eax
  int v11; // esi
  int v12; // esi
  int *v13; // ebx
  int v14; // eax
  int v15; // eax
  int *v16; // ebx
  int v17; // esi
  int v18; // eax
  int v19; // ebp
  int v20; // ebx
  int *v21; // esi
  char v22; // al
  int v23; // eax
  void (__cdecl **v24)(char *, int); // ebx
  char *v25; // eax
  int v26; // eax
  void (__cdecl **v27)(char *, int); // ebx
  char *v28; // eax
  int i; // esi
  int v30; // [esp-4h] [ebp-24h]
  int v31; // [esp-4h] [ebp-24h]
  int v32; // [esp-4h] [ebp-24h]
  int *v33; // [esp+10h] [ebp-10h]
  int v34; // [esp+14h] [ebp-Ch]
  int v35; // [esp+18h] [ebp-8h]
  int v36; // [esp+1Ch] [ebp-4h]

  if ( sub_40A5C0(0x200000) )
  {
    v2 = *(_DWORD *)(sub_44D330((CHAR *)&byte_587000[177440]) + 92) + 4;
    if ( *(_WORD *)(v2 + 40) )
    {
      sub_4C4770(
        a1,
        (unsigned __int8 *)a2,
        **(_DWORD **)(*(_DWORD *)(v2 + 48) + 4 * *(unsigned __int8 *)(a2 + 297) + 4));
      return 1;
    }
  }
  else
  {
    v4 = a2;
    v30 = *(_DWORD *)(a2 + 128);
    v36 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[2614252] + 304);
    v5 = (int *)sub_49A340(v30);
    v33 = v5;
    if ( v5 )
    {
      if ( sub_4356C0(v4, 23) )
      {
        if ( byte_5D4594[2598000] & 1 )
        {
          v6 = 0;
          do
          {
            v7 = v6 + 1;
            sub_4341D0(v6 + 1, *(int *)&byte_5D4594[2523948]);
            v6 = v7;
          }
          while ( v7 < 6 );
        }
        else
        {
          v8 = 0;
          do
          {
            v9 = v8 + 1;
            sub_4341D0(v8 + 1, *(int *)&byte_5D4594[2650684]);
            v8 = v9;
          }
          while ( v9 < 6 );
        }
      }
      else if ( sub_4356C0(v4, 25) )
      {
        v10 = 0;
        do
        {
          v11 = v10 + 1;
          sub_4341D0(v10 + 1, *(int *)&byte_5D4594[2650684]);
          v10 = v11;
        }
        while ( v11 < 6 );
      }
      else if ( v5[328] == 1 )
      {
        v12 = 0;
        v13 = v5 + 2;
        do
        {
          sub_434480(*v13, (int)&v35, (int)&a2, (int)&v34);
          if ( (unsigned __int8)a2 >= 0x9Bu )
            LOBYTE(a2) = -1;
          else
            LOBYTE(a2) = a2 + 100;
          ++v12;
          v14 = sub_4344A0(v35, a2, v34);
          sub_4341D0(v12, v14);
          ++v13;
        }
        while ( v12 < 6 );
      }
      else
      {
        v15 = 0;
        v16 = v5 + 2;
        do
        {
          v17 = v15 + 1;
          sub_4341D0(v15 + 1, *v16);
          v15 = v17;
          ++v16;
        }
        while ( v17 < 6 );
      }
      v18 = sub_49A4B0((_DWORD *)v4, v5[326], v5[327]);
      v19 = v36 + 264 * v18 + 4;
      if ( *(_WORD *)(v36 + 264 * v18 + 44) )
      {
        v20 = sub_4BC5D0((_DWORD *)v4, v36 + 264 * v18 + 4);
        if ( v20 < 0 )
          return 0;
        v21 = a1;
        sub_4C4770(
          a1,
          (unsigned __int8 *)v4,
          *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v19 + 48) + 4 * *(unsigned __int8 *)(v4 + 297) + 4) + 4 * v20));
        v22 = *(_BYTE *)(v4 + 297);
        if ( v22 != 1 && v22 && v22 != 2 && v22 != 3 && v22 != 6 || *(_DWORD *)(v4 + 276) == 37 )
        {
          sub_4B8960(v21, v4, v33[327], v33 + 170, v19, v20);
          sub_4B8D40(v21, v4, v33[326], v33 + 8, v19, v20);
        }
        else
        {
          sub_4B8D40(v21, v4, v33[326], v33 + 8, v19, v20);
          sub_4B8960(v21, v4, v33[327], v33 + 170, v19, v20);
        }
        if ( sub_4356C0(v4, 16) )
        {
          if ( !*(_DWORD *)&byte_5D4594[1313796] )
          {
            v23 = sub_44CFC0((CHAR *)&byte_587000[177452]);
            *(_DWORD *)&byte_5D4594[1313796] = sub_45A240(v23);
            *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313796] + 120) |= 0x1000000u;
          }
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313796] + 12) = *v21 + *(_DWORD *)(v4 + 12) - v21[4];
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313796] + 16) = v21[1] - v21[5] + *(_DWORD *)(v4 + 16) - 50;
          v31 = *(_DWORD *)&byte_5D4594[1313796];
          v24 = (void (__cdecl **)(char *, int))(*(_DWORD *)&byte_5D4594[1313796] + 300);
          v25 = sub_437250();
          (*v24)(v25, v31);
        }
        if ( sub_4356C0(v4, 30) )
        {
          if ( !*(_DWORD *)&byte_5D4594[1313800] )
          {
            v26 = sub_44CFC0((CHAR *)&byte_587000[177468]);
            *(_DWORD *)&byte_5D4594[1313800] = sub_45A240(v26);
            *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313800] + 120) |= 0x1000000u;
          }
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313800] + 12) = *v21 + *(_DWORD *)(v4 + 12) - v21[4];
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[1313800] + 16) = v21[1] - v21[5] + *(_DWORD *)(v4 + 16) - 50;
          v32 = *(_DWORD *)&byte_5D4594[1313800];
          v27 = (void (__cdecl **)(char *, int))(*(_DWORD *)&byte_5D4594[1313800] + 300);
          v28 = sub_437250();
          (*v27)(v28, v32);
        }
        if ( sub_4951F0(*(_DWORD *)(v4 + 128)) )
        {
          v33 = 0;
          a1 = 0;
          LOBYTE(a2) = 0;
          sub_495180(*(_DWORD *)(v4 + 128), &v33, &a1, &a2);
          sub_4BC080(v21, v4, (unsigned __int16)v33, (unsigned __int16)a1, a2);
        }
        for ( i = 0; i < 6; ++i )
          sub_4341D0(i, *(int *)&byte_5D4594[2523948]);
      }
    }
  }
  return 1;
}

//----- (004B9470) --------------------------------------------------------
int __cdecl sub_4B9470(const char **a1)
{
  const char *v1; // esi
  int v2; // edx
  unsigned __int8 *v3; // edi

  if ( !a1 )
    return 0;
  v1 = *(const char **)&byte_587000[177488];
  v2 = 0;
  if ( !*(_DWORD *)&byte_587000[177488] )
    return 0;
  v3 = &byte_587000[177488];
  while ( strcmp(*a1, v1) )
  {
    v1 = (const char *)*((_DWORD *)v3 + 2);
    v3 += 8;
    ++v2;
    if ( !v1 )
      return 0;
  }
  return *(_DWORD *)&byte_587000[8 * v2 + 177492];
}

//----- (004B94E0) --------------------------------------------------------
int __cdecl sub_4B94E0(int a1)
{
  int result; // eax

  if ( *(_DWORD *)(a1 + 112) & 0x10000000 )
    result = sub_4B9470(*(const char ***)(a1 + 436));
  else
    result = 0;
  return result;
}

//----- (004B9500) --------------------------------------------------------
int __cdecl sub_4B9500(int *a1, int a2)
{
  int v2; // ebx
  int v3; // edi
  int v4; // esi
  int v5; // eax
  unsigned __int16 *v6; // ebx

  v2 = a2;
  sub_4B96B0(a1, a2);
  if ( sub_40A5C0(128) )
  {
    if ( *(_DWORD *)(v2 + 120) & 0x1000000 )
    {
      v3 = *a1 + *(_DWORD *)(v2 + 12) - a1[4];
      v4 = *(_DWORD *)(v2 + 16)
         + a1[1]
         - *(__int16 *)(v2 + 104)
         - (unsigned __int64)(__int64)*(float *)(v2 + 100)
         - a1[5];
      v5 = sub_4B94E0(v2);
      v6 = (unsigned __int16 *)sub_418A80(v5);
      if ( v6 )
      {
        sub_434390(*(int *)&byte_5D4594[2618904]);
        sub_43F840(0, v6, &a2, 0, 0);
        sub_43F6E0(0, (__int16 *)v6, a2 / -2 + v3, v4);
      }
    }
  }
  return 1;
}

//----- (004B95B0) --------------------------------------------------------
int __cdecl sub_4B95B0(int *a1, int a2)
{
  sub_4B9690(a1, a2);
  return 1;
}

//----- (004B95D0) --------------------------------------------------------
_DWORD *__cdecl sub_4B95D0(int a1)
{
  _DWORD *result; // eax
  int v2; // edx
  int v3; // ecx
  _DWORD *v4; // ebx
  int v5; // edi
  _BYTE *v6; // esi
  int *v7; // edi
  _DWORD **v8; // esi
  int v9; // ebx

  result = sub_413250(*(_DWORD *)(a1 + 108));
  v4 = result;
  if ( result )
  {
    v5 = 1;
    v6 = result + 4;
    do
    {
      LOBYTE(v3) = v6[1];
      LOBYTE(v2) = *v6;
      LOBYTE(result) = *(v6 - 1);
      sub_4340A0(v5++, (int)result, v2, v3);
      v6 += 3;
    }
    while ( v5 < 7 );
    v7 = v4 + 9;
    v8 = (_DWORD **)(a1 + 432);
    v9 = 4;
    do
    {
      result = *v8;
      if ( *v8 )
      {
        LOBYTE(v3) = *((_BYTE *)result + 26);
        LOBYTE(v2) = *((_BYTE *)result + 25);
        LOBYTE(result) = *((_BYTE *)result + 24);
        sub_4340A0(*v7, (int)result, v2, v3);
      }
      ++v8;
      ++v7;
      --v9;
    }
    while ( v9 );
  }
  return result;
}
// 4B9604: variable 'v2' is possibly undefined
// 4B9604: variable 'v3' is possibly undefined

//----- (004B9650) --------------------------------------------------------
_DWORD *__cdecl sub_4B9650(int a1)
{
  _DWORD *result; // eax
  int v2; // edx
  int v3; // ecx
  int v4; // edi
  _BYTE *v5; // esi

  result = sub_413250(a1);
  if ( result )
  {
    v4 = 1;
    v5 = result + 4;
    do
    {
      LOBYTE(v3) = v5[1];
      LOBYTE(v2) = *v5;
      LOBYTE(result) = *(v5 - 1);
      sub_4340A0(v4++, (int)result, v2, v3);
      v5 += 3;
    }
    while ( v4 < 7 );
  }
  return result;
}
// 4B9677: variable 'v2' is possibly undefined
// 4B9677: variable 'v3' is possibly undefined

//----- (004B9690) --------------------------------------------------------
int __cdecl sub_4B9690(int *a1, int a2)
{
  sub_4B95D0(a2);
  return sub_4BCC20(a1, a2);
}

//----- (004B96B0) --------------------------------------------------------
int __cdecl sub_4B96B0(int *a1, int a2)
{
  sub_4B95D0(a2);
  return sub_4BBD60(a1, a2);
}

//----- (004B96D0) --------------------------------------------------------
int __cdecl sub_4B96D0(int *a1, int a2)
{
  sub_4B96F0(a2);
  return sub_4BCC20(a1, a2);
}

//----- (004B96F0) --------------------------------------------------------
_DWORD *__cdecl sub_4B96F0(int a1)
{
  _DWORD *result; // eax
  int v2; // edx
  int v3; // ecx
  _DWORD *v4; // ebx
  int v5; // edi
  _BYTE *v6; // esi
  int *v7; // edi
  _DWORD **v8; // esi
  int v9; // ebx

  result = sub_413270(*(_DWORD *)(a1 + 108));
  v4 = result;
  if ( result )
  {
    v5 = 1;
    v6 = result + 4;
    do
    {
      LOBYTE(v3) = v6[1];
      LOBYTE(v2) = *v6;
      LOBYTE(result) = *(v6 - 1);
      sub_4340A0(v5++, (int)result, v2, v3);
      v6 += 3;
    }
    while ( v5 < 7 );
    v7 = v4 + 9;
    v8 = (_DWORD **)(a1 + 432);
    v9 = 4;
    do
    {
      result = *v8;
      if ( *v8 )
      {
        LOBYTE(v3) = *((_BYTE *)result + 26);
        LOBYTE(v2) = *((_BYTE *)result + 25);
        LOBYTE(result) = *((_BYTE *)result + 24);
        sub_4340A0(*v7, (int)result, v2, v3);
      }
      ++v8;
      ++v7;
      --v9;
    }
    while ( v9 );
  }
  return result;
}
// 4B9724: variable 'v2' is possibly undefined
// 4B9724: variable 'v3' is possibly undefined

//----- (004B9770) --------------------------------------------------------
int __cdecl sub_4B9770(int *a1, int a2)
{
  sub_4B96F0(a2);
  return sub_4BBD60(a1, a2);
}

//----- (004B9790) --------------------------------------------------------
int __cdecl sub_4B9790(int a1, int a2)
{
  int v2; // esi
  int v3; // ebp
  int v4; // ebx
  int v5; // edi
  int v7; // [esp+14h] [ebp+4h]

  v2 = *(_DWORD *)&byte_5D4594[2650644];
  sub_4C32A0(
    *(_DWORD *)(a2 + 12) - *(_DWORD *)(a1 + 16),
    *(_DWORD *)(a2 + 16) - *(_DWORD *)(a1 + 20),
    10,
    *(int *)&byte_5D4594[2650644]);
  v3 = *(_DWORD *)(a2 + 16) - *(_DWORD *)(a1 + 20);
  v4 = *(_DWORD *)(a2 + 12) - *(_DWORD *)(a1 + 16);
  v5 = (unsigned __int8)(2 * byte_5D4594[2598000]);
  sub_434560(1);
  sub_434460(v2);
  v7 = 5;
  do
  {
    sub_49F500(
      v4 + 10 * *(int *)&byte_587000[8 * v5 + 192088] / 16,
      v3 + 10 * *(int *)&byte_587000[8 * v5 + 192092] / 16);
    sub_49F500(
      v4 + 10 * *(int *)&byte_587000[8 * ((v5 + 102) % 256) + 192088] / 16,
      v3 + 10 * *(int *)&byte_587000[8 * ((v5 + 102) % 256) + 192092] / 16);
    sub_49E4B0();
    v5 = (v5 + 102) % 256;
    --v7;
  }
  while ( v7 );
  sub_434560(0);
  return 1;
}

//----- (004B98A0) --------------------------------------------------------
int __cdecl sub_4B98A0(int *a1, int a2)
{
  int v2; // esi
  int v3; // edi
  int v4; // ecx
  int v5; // eax
  int v6; // eax
  int v7; // edi
  float v9; // [esp+0h] [ebp-1Ch]
  int2 v10; // [esp+14h] [ebp-8h]

  if ( !*(_DWORD *)&byte_5D4594[1313804] )
  {
    *(_DWORD *)&byte_5D4594[1313808] = sub_4344A0(0, 200, 255);
    *(_DWORD *)&byte_5D4594[1313812] = sub_4344A0(255, 255, 50);
    *(_DWORD *)&byte_5D4594[1313804] = 1;
  }
  v2 = *a1;
  v3 = a1[1];
  v4 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
  v5 = *(_DWORD *)(a2 + 16) - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104) - a1[5];
  v10.field_0 = v4;
  v6 = v3 + v5;
  v10.field_4 = v6;
  if ( v4 - 10 >= v2 && v6 - 10 >= v3 && v4 + 10 < a1[2] && v6 + 10 < a1[3] )
  {
    v7 = sub_415FF0(1, 4, (const char *)&byte_587000[177744], 48);
    sub_4B6720(&v10, *(int *)&byte_5D4594[1313808], 2 * v7 + 1, (v7 >> 1) + 3);
    sub_434460(*(int *)&byte_5D4594[2523948]);
    sub_49CE30(v10.field_0 - (v7 >> 1), v10.field_4 - (v7 >> 1), v7, v7);
    sub_484BE0((_DWORD *)(a2 + 136), 200, 200, 255);
    v9 = sub_416090(0.0, 100.0);
    sub_484D70(a2 + 136, v9);
  }
  return 1;
}

//----- (004B99F0) --------------------------------------------------------
int __cdecl sub_4B99F0(int *a1, int a2)
{
  int v2; // esi
  int v3; // edi
  int v4; // ecx
  int v5; // eax
  int v6; // eax
  int v7; // edi
  float v9; // [esp+0h] [ebp-1Ch]
  int2 v10; // [esp+14h] [ebp-8h]

  if ( !*(_DWORD *)&byte_5D4594[1313804] )
  {
    *(_DWORD *)&byte_5D4594[1313808] = sub_4344A0(0, 200, 255);
    *(_DWORD *)&byte_5D4594[1313812] = sub_4344A0(255, 255, 50);
    *(_DWORD *)&byte_5D4594[1313804] = 1;
  }
  v2 = *a1;
  v3 = a1[1];
  v4 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
  v5 = *(_DWORD *)(a2 + 16) - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104) - a1[5];
  v10.field_0 = v4;
  v6 = v3 + v5;
  v10.field_4 = v6;
  if ( v4 - 10 >= v2 && v6 - 10 >= v3 && v4 + 10 < a1[2] && v6 + 10 < a1[3] )
  {
    v7 = sub_415FF0(1, 4, (const char *)&byte_587000[177824], 91);
    sub_4B6720(&v10, *(int *)&byte_5D4594[1313812], 2 * v7 + 1, (v7 >> 1) + 3);
    sub_434460(*(int *)&byte_5D4594[2523948]);
    sub_49CE30(v10.field_0 - (v7 >> 1), v10.field_4 - (v7 >> 1), v7, v7);
    sub_484BE0((_DWORD *)(a2 + 136), 255, 180, 50);
    v9 = sub_416090(0.0, 100.0);
    sub_484D70(a2 + 136, v9);
  }
  return 1;
}

//----- (004B9B40) --------------------------------------------------------
int sub_4B9B40()
{
  return 1;
}

//----- (004B9B50) --------------------------------------------------------
int __cdecl sub_4B9B50(int *a1, int a2)
{
  int v2; // edi
  int v3; // ecx
  int v4; // edx
  unsigned int v5; // ecx
  int v6; // ecx

  v2 = *(_DWORD *)(a2 + 304);
  if ( !*(_DWORD *)(a2 + 432) && !*(_DWORD *)(a2 + 436) )
  {
    *(_DWORD *)(a2 + 432) = *(_DWORD *)(a2 + 12);
    *(_DWORD *)(a2 + 436) = *(_DWORD *)(a2 + 16);
  }
  v3 = *(_DWORD *)(a2 + 12) - *(_DWORD *)(a2 + 432);
  v4 = *(_DWORD *)(a2 + 16) - *(_DWORD *)(a2 + 436);
  if ( v3 * v3 + v4 * v4 >= 100 )
  {
    if ( v3 <= 0 )
    {
      if ( v4 > 0 )
      {
        *(_DWORD *)(a2 + 444) = 0;
LABEL_8:
        v5 = *(_DWORD *)(a2 + 440) + 1;
        *(_DWORD *)(a2 + 440) = v5;
        if ( v5 >= 0x10 )
          *(_DWORD *)(a2 + 440) = 0;
        goto LABEL_17;
      }
      *(_DWORD *)(a2 + 444) = 16;
    }
    else
    {
      if ( v4 > 0 )
      {
        *(_DWORD *)(a2 + 444) = 16;
        goto LABEL_8;
      }
      *(_DWORD *)(a2 + 444) = 0;
    }
    v6 = *(_DWORD *)(a2 + 440);
    if ( v6 )
      *(_DWORD *)(a2 + 440) = v6 - 1;
    else
      *(_DWORD *)(a2 + 440) = 15;
LABEL_17:
    *(_DWORD *)(a2 + 432) = *(_DWORD *)(a2 + 12);
    *(_DWORD *)(a2 + 436) = *(_DWORD *)(a2 + 16);
  }
  sub_4C4770(
    a1,
    (unsigned __int8 *)a2,
    *(_DWORD *)(*(_DWORD *)(v2 + 4) + 4 * (*(_DWORD *)(a2 + 440) + *(_DWORD *)(a2 + 444))));
  return 1;
}

//----- (004B9C70) --------------------------------------------------------
int __cdecl sub_4B9C70(int *a1, _DWORD *a2)
{
  _DWORD *v2; // esi
  char v3; // cl
  int v4; // ecx
  int v5; // eax
  int v6; // eax
  int v7; // esi

  v2 = a2;
  if ( !sub_40A5C0(2) || !*(_DWORD *)&byte_5D4594[2614252] )
    goto LABEL_10;
  if ( a2[30] & 0x40000000 )
  {
    LOBYTE(a2) = -1;
LABEL_10:
    sub_434560(1);
    sub_434580((unsigned __int8)a2);
    v7 = sub_4BBD60(a1, (int)v2);
    sub_434560(0);
    sub_434600(0);
    return v7;
  }
  if ( sub_4356C0(*(int *)&byte_5D4594[2614252], 21) )
  {
    sub_434600(1);
    sub_433E40(*(int *)&byte_5D4594[2618904]);
    v3 = *(_DWORD *)&byte_5D4594[3799568] >= 16 ? -1 : -128;
LABEL_9:
    LOBYTE(a2) = v3;
    goto LABEL_10;
  }
  v4 = a2[3] - *(_DWORD *)(*(_DWORD *)&byte_5D4594[2614252] + 12);
  v5 = a2[4] - *(_DWORD *)(*(_DWORD *)&byte_5D4594[2614252] + 16);
  v6 = v4 * v4 + v5 * v5;
  if ( v6 < 22500 )
  {
    v3 = -56 - 200 * v6 / 22500;
    goto LABEL_9;
  }
  return 1;
}

//----- (004B9D70) --------------------------------------------------------
int __cdecl sub_4B9D70(_DWORD *a1, int a2)
{
  _DWORD *v2; // eax
  int v3; // edi
  int v4; // ebp
  int v5; // edx
  int v6; // ecx
  int v7; // esi
  int v8; // ebp
  int v9; // ebx
  int v10; // edi
  int v12; // [esp+14h] [ebp-Ch]
  int v13; // [esp+18h] [ebp-8h]
  int v14; // [esp+1Ch] [ebp-4h]
  int v15; // [esp+24h] [ebp+4h]
  int v16; // [esp+28h] [ebp+8h]
  int v17; // [esp+28h] [ebp+8h]

  v2 = (_DWORD *)a2;
  v3 = a1[4];
  v4 = *(__int16 *)(a2 + 104);
  v16 = a1[1];
  v13 = v2[4];
  v5 = v2[3];
  v12 = v4;
  v6 = v2[8];
  v7 = v16 + v13 - a1[5] - v4;
  v14 = v2[9];
  v8 = *a1 + v6 - v3;
  v9 = v5 + *a1 - v3;
  v10 = v16 + v14 - a1[5] - v12;
  if ( v5 - v6 >= 0 )
    v15 = v5 - v6;
  else
    v15 = v6 - v5;
  if ( v13 - v14 >= 0 )
    v17 = v13 - v14;
  else
    v17 = v14 - v13;
  sub_434460(*(int *)&byte_5D4594[2650660]);
  if ( v15 <= v17 )
  {
    sub_49F500(v9 + 1, v7);
    sub_49F500(v8 - 1, v10);
    sub_49E4B0();
    sub_49F500(v9 - 1, v7);
    sub_49F500(v8 - 1, v10);
  }
  else
  {
    sub_49F500(v9, v7 + 1);
    sub_49F500(v8, v10 + 1);
    sub_49E4B0();
    sub_49F500(v9, v7 + 1);
    sub_49F500(v8, v10 - 1);
  }
  sub_49E4B0();
  sub_49CE30(v9 - 1, v7 - 1, 4, 4);
  sub_434460(*(int *)&byte_5D4594[2523948]);
  sub_49F500(v9, v7);
  sub_49F500(v8, v10);
  sub_49E4B0();
  sub_49CE30(v9, v7, 2, 2);
  return 1;
}

//----- (004B9ED0) --------------------------------------------------------
int __cdecl sub_4B9ED0(_DWORD *a1, int a2)
{
  int v2; // esi
  int v3; // edi

  v2 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
  v3 = *(_DWORD *)(a2 + 16) + a1[1] - a1[5];
  sub_434460(*(int *)&byte_5D4594[2650660]);
  sub_49CE30(v2 - 1, v3 - 1, 3, 3);
  sub_49CE30(v2 - 5, v3, 1, 1);
  sub_49CE30(v2, v3 + 7, 1, 1);
  sub_49CE30(v2 + 8, v3 - 2, 1, 1);
  return 1;
}

//----- (004B9F50) --------------------------------------------------------
int __cdecl sub_4B9F50(int *a1, int a2)
{
  int v2; // ecx
  int v3; // edi
  int v4; // eax
  bool v5; // cc
  char v6; // al
  int v7; // ecx
  int v8; // edi
  int v9; // eax
  int result; // eax
  float v11; // [esp+0h] [ebp-28h]
  int2 xLeft; // [esp+10h] [ebp-18h]
  int2 a2a; // [esp+18h] [ebp-10h]
  int2 a3; // [esp+20h] [ebp-8h]

  if ( !*(_DWORD *)&byte_5D4594[1313820] )
  {
    *(_DWORD *)&byte_5D4594[1313816] = sub_4344A0(170, 170, 170);
    *(_DWORD *)&byte_5D4594[1313820] = 1;
  }
  v2 = 8 * *(unsigned __int8 *)(a2 + 448);
  v3 = *(unsigned __int8 *)(a2 + 450);
  a2a.field_0 = *(_DWORD *)(a2 + 440) + v3 * *(int *)&byte_587000[v2 + 192088] / 16;
  a2a.field_4 = *(_DWORD *)(a2 + 444) + v3 * *(int *)&byte_587000[v2 + 192092] / 16;
  sub_4739E0(a1, &a2a, &xLeft);
  v4 = xLeft.field_4 - *(__int16 *)(a2 + 104);
  v5 = xLeft.field_0 <= *a1;
  xLeft.field_4 -= *(__int16 *)(a2 + 104);
  if ( v5 || xLeft.field_0 >= a1[2] || v4 <= a1[1] || v4 >= a1[3] )
    goto LABEL_22;
  if ( a2a.field_4 >= *(int *)(a2 + 444) )
  {
    sub_4B6720(&xLeft, *(_DWORD *)(a2 + 432), 3, 5);
    sub_434460(*(_DWORD *)(a2 + 436));
    sub_499B70(xLeft.field_0, xLeft.field_4, 3);
  }
  else
  {
    sub_4B6720(&xLeft, *(int *)&byte_5D4594[1313816], 2, 4);
    sub_434460(*(int *)&byte_5D4594[1313816]);
    sub_499B70(xLeft.field_0, xLeft.field_4, 2);
  }
  sub_49F500(xLeft.field_0, xLeft.field_4);
  v6 = *(_BYTE *)(a2 + 449);
  v7 = *(unsigned __int8 *)(a2 + 448) - 2 * v6;
  if ( v6 > 0 )
  {
    v7 += v7 < 0 ? 0x100 : 0;
  }
  else if ( v7 >= 256 )
  {
    v7 -= 256;
  }
  v8 = *(unsigned __int8 *)(a2 + 450);
  a2a.field_0 = *(_DWORD *)(a2 + 440) + v8 * *(_DWORD *)&byte_587000[8 * v7 + 192088] / 16;
  a2a.field_4 = *(_DWORD *)(a2 + 444) + v8 * *(_DWORD *)&byte_587000[8 * v7 + 192092] / 16;
  sub_4739E0(a1, &a2a, &xLeft);
  xLeft.field_4 -= *(__int16 *)(a2 + 104);
  sub_49F500(xLeft.field_0, xLeft.field_4);
  if ( a2a.field_4 >= *(int *)(a2 + 444) )
    sub_434460(*(_DWORD *)(a2 + 436));
  else
    sub_434460(*(int *)&byte_5D4594[1313816]);
  sub_49E4B0();
  *(_BYTE *)(a2 + 448) += *(_BYTE *)(a2 + 449);
  *(_WORD *)(a2 + 104) += *(unsigned __int8 *)(a2 + 451);
  sub_4739E0(a1, (int2 *)(a2 + 12), &a3);
  v11 = (double)*(__int16 *)(a2 + 104) * 0.0024999999 * 50.0;
  v9 = sub_419A70(v11);
  if ( 50 - v9 <= 0 )
  {
LABEL_22:
    sub_45A4E0(a2);
    result = 0;
  }
  else
  {
    *(_BYTE *)(a2 + 450) = 50 - v9;
    result = 1;
  }
  return result;
}

//----- (004BA230) --------------------------------------------------------
int __cdecl sub_4BA230(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // ebx
  unsigned __int8 *v6; // eax
  int v7; // ecx
  int i; // ebp
  int result; // eax
  int v10; // edi
  int v11; // esi
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int j; // edi
  unsigned __int8 *v17; // esi
  int v18; // eax
  int v19; // edx
  int v20; // eax
  int v21; // ecx
  int v22; // eax
  int v23; // edx
  double v24; // st7
  int v25; // eax
  int v26; // eax
  int v27; // edx
  float v28; // [esp+0h] [ebp-30h]
  float v29; // [esp+0h] [ebp-30h]
  float v30; // [esp+0h] [ebp-30h]
  float v31; // [esp+0h] [ebp-30h]
  int2 a4a; // [esp+10h] [ebp-20h]
  int2 a3a; // [esp+18h] [ebp-18h]
  int2 a2a; // [esp+20h] [ebp-10h]
  int2 a1a; // [esp+28h] [ebp-8h]
  int v36; // [esp+34h] [ebp+4h]
  float v37; // [esp+34h] [ebp+4h]

  v5 = 0;
  if ( !*(_DWORD *)&byte_5D4594[1316404] )
  {
    *(_DWORD *)&byte_5D4594[1313828] = sub_4344A0(40, 180, 255);
    *(_DWORD *)&byte_5D4594[1313832] = sub_4344A0(255, 255, 255);
    *(_DWORD *)&byte_5D4594[1313836] = sub_4344A0(40, 180, 255);
    *(_DWORD *)&byte_5D4594[1313844] = 8;
    *(_DWORD *)&byte_5D4594[1313852] = 8;
    *(_DWORD *)&byte_5D4594[1313856] = 0;
    *(_DWORD *)&byte_5D4594[1313860] = 0;
    byte_5D4594[1313840] = 16;
    byte_5D4594[1313842] = 16;
    *(_DWORD *)&byte_5D4594[1313848] = 12;
    byte_5D4594[1313841] = 24;
    v6 = &byte_5D4594[1313900];
    *(_DWORD *)&byte_5D4594[1313864] = 0;
    do
    {
      v7 = 30;
      do
      {
        *((_DWORD *)v6 - 1) = 0;
        *(_DWORD *)v6 = 0;
        *((_DWORD *)v6 + 1) = 0;
        *((_DWORD *)v6 + 2) = 0;
        *((_DWORD *)v6 - 2) = 0;
        v6 += 28;
        --v7;
      }
      while ( v7 );
    }
    while ( (int)v6 < (int)&byte_5D4594[1316420] );
    *(_DWORD *)&byte_5D4594[1316404] = 1;
  }
  sub_4BA670(a1, a2, a3, a4, a5);
  for ( i = 0; i < 3; ++i )
  {
    result = *(_DWORD *)&byte_5D4594[1316408];
    v10 = 0;
    if ( *(int *)&byte_5D4594[1316408] + 1 <= 0 )
      continue;
    do
    {
      v11 = 28 * (30 * i + v10);
      v12 = *(_DWORD *)&byte_5D4594[v11 + 1313900] + *(_DWORD *)&byte_5D4594[v11 + 1313896];
      *(_DWORD *)&byte_5D4594[v11 + 1313896] = v12;
      if ( v12 < 256 )
      {
        if ( v12 >= 0 )
          goto LABEL_14;
        v13 = v12 + 255;
      }
      else
      {
        v13 = v12 - 256;
      }
      *(_DWORD *)&byte_5D4594[v11 + 1313896] = v13;
LABEL_14:
      if ( !v10 )
        *(_DWORD *)&byte_5D4594[840 * i + 1313896] = a1;
      v14 = *(_DWORD *)&byte_5D4594[v11 + 1313904] + *(_DWORD *)&byte_5D4594[v11 + 1313900];
      *(_DWORD *)&byte_5D4594[v11 + 1313900] = v14;
      if ( i == 1 )
      {
        if ( v14 <= 10 )
        {
          if ( v14 < -10 )
            *(_DWORD *)&byte_5D4594[28 * v10 + 1314740] = -10;
        }
        else
        {
          *(_DWORD *)&byte_5D4594[28 * v10 + 1314740] = 10;
        }
      }
      else if ( v14 <= 25 )
      {
        if ( v14 < -25 )
          *(_DWORD *)&byte_5D4594[v11 + 1313900] = -25;
      }
      else
      {
        *(_DWORD *)&byte_5D4594[v11 + 1313900] = 25;
      }
      v15 = *(_DWORD *)&byte_5D4594[v11 + 1313908] - 1;
      *(_DWORD *)&byte_5D4594[v11 + 1313908] = v15;
      if ( v15 <= 0 )
      {
        *(_DWORD *)&byte_5D4594[v11 + 1313908] = sub_415FF0(10, 90, (const char *)&byte_587000[177904], 378);
        *(_DWORD *)&byte_5D4594[v11 + 1313904] = sub_415FF0(4, 8, (const char *)&byte_587000[177940], 382);
        if ( sub_415FF0(0, 1, (const char *)&byte_587000[177976], 385) )
          *(_DWORD *)&byte_5D4594[v11 + 1313904] = -*(_DWORD *)&byte_5D4594[v11 + 1313904];
        if ( i == 1 )
        {
          *(_DWORD *)&byte_5D4594[28 * v10 + 1314732] = sub_415FF0(40, 50, (const char *)&byte_587000[178012], 392);
        }
        else
        {
          *(_DWORD *)&byte_5D4594[v11 + 1313892] = sub_415FF0(80, 110, (const char *)&byte_587000[178048], 395);
          if ( v10 < 4 && sub_415FF0(0, 100, (const char *)&byte_587000[178084], 402) > 90 )
          {
            *(_DWORD *)&byte_5D4594[v11 + 1313892] = sub_415FF0(150, 200, (const char *)&byte_587000[178120], 407);
            *(_DWORD *)&byte_5D4594[v11 + 1313908] *= 2;
          }
        }
      }
      result = *(_DWORD *)&byte_5D4594[1316408];
      ++v10;
    }
    while ( v10 < *(int *)&byte_5D4594[1316408] + 1 );
    v5 = 0;
  }
  for ( j = 0; j < 3; ++j )
  {
    if ( result > 0 )
    {
      v17 = &byte_5D4594[840 * j + 1313896];
      do
      {
        v36 = *((_DWORD *)v17 - 1);
        v18 = *(_DWORD *)v17;
        v19 = *((_DWORD *)v17 - 2);
        a1a.field_0 = *((_DWORD *)v17 - 3);
        a1a.field_4 = v19;
        v37 = (double)v36;
        v28 = v37 * *(float *)&byte_587000[8 * v18 + 194136];
        v20 = sub_419A70(v28);
        v21 = *(_DWORD *)v17;
        a3a.field_0 = v20;
        v29 = v37 * *(float *)&byte_587000[8 * v21 + 194140];
        v22 = sub_419A70(v29);
        v23 = *((_DWORD *)v17 + 4);
        v24 = v37 * *(float *)&byte_587000[8 * *((_DWORD *)v17 + 7) + 194136];
        a3a.field_4 = v22;
        v25 = *((_DWORD *)v17 + 5);
        a2a.field_0 = v23;
        a2a.field_4 = v25;
        v30 = v24;
        v26 = sub_419A70(v30);
        v27 = *((_DWORD *)v17 + 7);
        a4a.field_0 = v26;
        v31 = v37 * *(float *)&byte_587000[8 * v27 + 194140];
        a4a.field_4 = sub_419A70(v31);
        sub_4BE800(*(_DWORD *)&byte_5D4594[4 * j + 1313828]);
        sub_4BE810(
          1,
          *(_DWORD *)&byte_5D4594[4 * j + 1313828],
          *(_DWORD *)&byte_5D4594[4 * j + 1313844],
          byte_5D4594[j + 1313840]);
        if ( j == 1 )
          sub_4BEAD0(&a1a, &a2a, &a3a, &a4a, 8, 1);
        else
          sub_4BEAD0(&a1a, &a2a, &a3a, &a4a, 8, 0);
        result = *(_DWORD *)&byte_5D4594[1316408];
        ++v5;
        v17 += 28;
      }
      while ( v5 < *(int *)&byte_5D4594[1316408] );
      v5 = 0;
    }
  }
  return result;
}

//----- (004BA670) --------------------------------------------------------
void __cdecl sub_4BA670(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // ebx
  int v6; // edi
  int v7; // esi
  int v8; // eax
  double v9; // st7
  double v10; // st6
  double v11; // st5
  double v12; // st4
  double v13; // st5
  double v14; // st5
  double v15; // rt0
  int v16; // eax
  int v17; // ecx
  int v18; // esi
  int v19; // edx
  unsigned __int8 *v20; // eax
  float v21; // [esp-Ch] [ebp-44h]
  int2 a4a; // [esp+18h] [ebp-20h]
  int2 a3a; // [esp+20h] [ebp-18h]
  int2 a2a; // [esp+28h] [ebp-10h]
  int2 a1a; // [esp+30h] [ebp-8h]
  float v26; // [esp+40h] [ebp+8h]

  v5 = a5;
  v6 = a4 - a2;
  v7 = a5 - a3;
  v8 = sub_48C6B0(a4 - a2, a5 - a3);
  *(_DWORD *)&byte_5D4594[1316408] = v8 / 40 + 1;
  if ( v8 / 40 + 2 >= 30 )
    *(_DWORD *)&byte_5D4594[1316408] = 28;
  a1a.field_0 = a2;
  v9 = *(float *)&byte_587000[8 * a1 + 194136];
  v10 = *(float *)&byte_587000[8 * a1 + 194140];
  v11 = (double)(a4 - a2);
  v12 = (double)v7;
  a1a.field_4 = a3;
  a2a.field_0 = a4;
  a2a.field_4 = v5;
  *(float *)&byte_5D4594[1313880] = v12;
  v26 = sqrt(v12 * *(float *)&byte_5D4594[1313880] + v11 * v11) + 0.0099999998;
  *(float *)&byte_5D4594[1313876] = v11 / v26;
  v13 = *(float *)&byte_5D4594[1313880] / v26;
  *(float *)&byte_5D4594[1313880] = v13;
  v14 = v13 * v10 + *(float *)&byte_5D4594[1313876] * v9;
  if ( v14 < 0.0 )
    v14 = v14 * 0.2;
  v15 = (1.0 - v14) * (double)v8 * 2.3;
  *(float *)&byte_5D4594[1313868] = v9 * v15;
  *(float *)&byte_5D4594[1313872] = v10 * v15;
  a3a.field_0 = sub_419A70(*(float *)&byte_5D4594[1313868]);
  v16 = sub_419A70(*(float *)&byte_5D4594[1313872]);
  a4a.field_0 = v6;
  v17 = 0;
  a3a.field_4 = v16;
  a4a.field_4 = v7;
  a5 = 0;
  do
  {
    if ( v17 )
      *(float *)&byte_5D4594[4 * v17 + 1313856] = *(float *)&byte_5D4594[4 * v17 + 1313856] + 0.25;
    else
      *(float *)&byte_5D4594[1313856] = *(float *)&byte_5D4594[1313856] + 0.2;
    v18 = *(_DWORD *)&byte_5D4594[1316408];
    if ( *(float *)&byte_5D4594[4 * v17 + 1313856] >= 1.0 )
    {
      v19 = *(_DWORD *)&byte_5D4594[1316408] + 1;
      if ( *(_DWORD *)&byte_5D4594[1316408] + 1 > 0 )
      {
        v20 = &byte_5D4594[28 * (v19 + 30 * v17) + 1313872];
        do
        {
          *((_DWORD *)v20 + 6) = *((_DWORD *)v20 - 1);
          *((_DWORD *)v20 + 7) = *(_DWORD *)v20;
          *((_DWORD *)v20 + 8) = *((_DWORD *)v20 + 1);
          *((_DWORD *)v20 + 9) = *((_DWORD *)v20 + 2);
          *((_DWORD *)v20 + 5) = *((_DWORD *)v20 - 2);
          v20 -= 28;
          --v19;
        }
        while ( v19 );
      }
      *(_DWORD *)&byte_5D4594[4 * v17 + 1313856] = 0;
      *(_DWORD *)&byte_5D4594[840 * v17 + 1313908] = 0;
    }
    v21 = *(float *)&byte_5D4594[4 * v17 + 1313856];
    *(_DWORD *)&byte_5D4594[1316412] = 0;
    sub_4BEDE0(&a1a, &a2a, &a3a, &a4a, v18, v21, sub_4BA8B0, (int)&a5);
    v17 = ++a5;
  }
  while ( a5 < 3 );
}
// 4BA6B4: variable 'v8' is possibly undefined

//----- (004BA8B0) --------------------------------------------------------
char __cdecl sub_4BA8B0(int *a1, int *a2, int *a3)
{
  int v3; // esi
  char *v4; // edi
  int v5; // edx
  int v6; // eax

  v3 = *a3;
  v4 = sub_437250();
  if ( !*(_DWORD *)&byte_5D4594[1316416] )
    *(_DWORD *)&byte_5D4594[1316416] = sub_44CFC0((CHAR *)&byte_587000[178156]);
  v6 = 28 * (*(_DWORD *)&byte_5D4594[1316412] + 30 * v3);
  v5 = *(_DWORD *)&byte_5D4594[1316412] + 1;
  *(_DWORD *)&byte_5D4594[v6 + 1313884] = *a1;
  *(_DWORD *)&byte_5D4594[v6 + 1313888] = a1[1];
  *(_DWORD *)&byte_5D4594[v6 + 1313912] = *a2;
  *(_DWORD *)&byte_5D4594[v6 + 1313916] = a2[1];
  LOBYTE(v6) = byte_5D4594[2598000];
  *(_DWORD *)&byte_5D4594[1316412] = v5;
  if ( byte_5D4594[2598000] & 4 )
  {
    v6 = sub_415FF0(0, 10, (const char *)&byte_587000[178168], 135);
    if ( v6 > 5 )
      LOBYTE(v6) = sub_499710(
                     *a2 + *((_DWORD *)v4 + 4) - *(_DWORD *)v4,
                     a2[1] + *((_DWORD *)v4 + 5) - *((_DWORD *)v4 + 1),
                     8,
                     *(int *)&byte_5D4594[1316416]);
  }
  return v6;
}

//----- (004BA980) --------------------------------------------------------
int __cdecl sub_4BA980(int *a1, int a2)
{
  int v3; // ebx
  unsigned __int16 v4; // di
  int v5; // ebp
  int v6; // ecx
  int v7; // edx
  int v8; // eax
  int v9; // esi
  int *v10; // edi
  int *v11; // ebx
  int v12; // eax
  _DWORD *v13; // eax
  int v14; // eax
  _DWORD *v15; // edi
  int v16; // eax
  _DWORD *v17; // eax
  int v18; // eax
  _DWORD *v19; // ebp
  int v20; // eax
  int v21; // edx
  int v22; // ebx
  int v23; // ecx
  int2 *v24; // [esp+0h] [ebp-Ch]
  float2 v25; // [esp+4h] [ebp-8h]
  unsigned __int8 v26; // [esp+14h] [ebp+8h]

  v24 = sub_4309F0();
  v3 = a2;
  if ( *(_BYTE *)(a2 + 432) )
  {
    if ( sub_578B70(*(_DWORD *)(a2 + 437)) )
    {
      v12 = sub_578B30(*(_DWORD *)(a2 + 437));
      v13 = sub_45A720(v12);
    }
    else
    {
      v14 = sub_578B30(*(_DWORD *)(a2 + 437));
      v13 = sub_45A6F0(v14);
    }
    v15 = v13;
    if ( sub_578B70(*(_DWORD *)(a2 + 441)) )
    {
      v16 = sub_578B30(*(_DWORD *)(a2 + 441));
      v17 = sub_45A720(v16);
    }
    else
    {
      v18 = sub_578B30(*(_DWORD *)(a2 + 441));
      v17 = sub_45A6F0(v18);
    }
    v19 = v17;
    if ( v15 && v17 )
    {
      v20 = a1[5];
      v21 = a1[4];
      v22 = *a1;
      v23 = a1[1];
      v9 = *a1 + v15[3] - v21;
      a2 = *a1 + v15[3] - v21;
      a1 = (int *)(v15[4] - v20 + v23 - 20);
      v10 = (int *)(v22 + v19[3] - v21);
      v11 = (int *)(v19[4] - v20 + v23 - 20);
    }
    else
    {
      v9 = a2;
      v10 = a1;
      v11 = a1;
    }
    v25.field_0 = (double)v24->field_0 - (double)a2;
    v25.field_4 = (double)v24->field_4 - (double)(int)a1;
    v26 = sub_509ED0(&v25);
  }
  else
  {
    v4 = *(_WORD *)(a2 + 439);
    v26 = *(_BYTE *)(a2 + 433);
    v5 = a1[5];
    v6 = a1[4];
    v7 = *a1;
    v8 = a1[1];
    v9 = *a1 + *(unsigned __int16 *)(v3 + 437) - v6;
    a1 = (int *)(v4 - v5 + v8 - 20);
    v10 = (int *)(v7 + *(unsigned __int16 *)(v3 + 441) - v6);
    v11 = (int *)(*(unsigned __int16 *)(v3 + 443) - v5 + v8 - 20);
  }
  sub_4BA230(v26, v9, (int)a1, (int)v10, (int)v11);
  return 1;
}
// 4BAA32: variable 'v12' is possibly undefined
// 4BAA46: variable 'v14' is possibly undefined
// 4BAA70: variable 'v16' is possibly undefined
// 4BAA84: variable 'v18' is possibly undefined

//----- (004BAB30) --------------------------------------------------------
int sub_4BAB30()
{
  int result; // eax

  *(_DWORD *)&byte_5D4594[1316464] = sub_4344A0(255, 255, 255);
  *(_DWORD *)&byte_5D4594[1316488] = sub_4344A0(128, 128, 255);
  *(_DWORD *)&byte_5D4594[1316424] = sub_4344A0(128, 128, 255);
  *(_DWORD *)&byte_5D4594[1316428] = sub_4344A0(64, 64, 255);
  *(_DWORD *)&byte_5D4594[1316516] = sub_4344A0(200, 200, 255);
  *(_DWORD *)&byte_5D4594[1316512] = sub_4344A0(128, 128, 255);
  *(_DWORD *)&byte_5D4594[1316496] = sub_4344A0(255, 255, 255);
  *(_DWORD *)&byte_5D4594[1316468] = sub_4344A0(255, 255, 0);
  *(_DWORD *)&byte_5D4594[1316460] = sub_4344A0(30, 160, 30);
  *(_DWORD *)&byte_5D4594[1316444] = sub_4344A0(60, 140, 60);
  *(_DWORD *)&byte_5D4594[1316504] = sub_4344A0(40, 225, 40);
  *(_DWORD *)&byte_5D4594[1316480] = sub_4344A0(150, 220, 150);
  *(_DWORD *)&byte_5D4594[1316520] = sub_44CFC0((CHAR *)&byte_587000[178220]);
  *(_DWORD *)&byte_5D4594[1316524] = sub_44CFC0((CHAR *)&byte_587000[178232]);
  result = sub_44CFC0((CHAR *)&byte_587000[178244]);
  *(_DWORD *)&byte_5D4594[1316528] = result;
  return result;
}

//----- (004BAC80) --------------------------------------------------------
int __cdecl sub_4BAC80(int *a1, int a2)
{
  int v2; // ebx
  int v3; // edi
  int v4; // ebp
  int v5; // ecx
  unsigned __int16 v6; // ax
  _DWORD *v7; // eax
  _DWORD *v8; // edi
  _DWORD *v9; // eax
  int v10; // esi
  int v11; // ecx
  int v12; // ebx
  int v13; // edx
  int2 a2a; // [esp+10h] [ebp-20h]
  int2 a1a; // [esp+18h] [ebp-18h]
  int2 a3; // [esp+20h] [ebp-10h]
  int2 v18; // [esp+28h] [ebp-8h]
  int v19; // [esp+34h] [ebp+4h]

  if ( !*(_BYTE *)(a2 + 432) )
  {
    v2 = *a1;
    v3 = a1[4];
    v4 = a1[5];
    v5 = *a1;
    v19 = a1[1];
    v18.field_0 = *(unsigned __int16 *)(a2 + 437);
    a1a.field_0 = v18.field_0 + v5 - v3;
    v6 = *(_WORD *)(a2 + 441);
    v18.field_4 = *(unsigned __int16 *)(a2 + 439);
    a1a.field_4 = v19 - v4 + v18.field_4 - 20;
    a3.field_0 = v6;
    a2a.field_0 = v2 + v6 - v3;
    a3.field_4 = *(unsigned __int16 *)(a2 + 443);
    a2a.field_4 = a3.field_4 - v4 + v19 - 20;
    goto LABEL_12;
  }
  if ( sub_578B70(*(_DWORD *)(a2 + 437)) )
    v7 = sub_45A720(*(_DWORD *)(a2 + 437));
  else
    v7 = sub_45A6F0(*(_DWORD *)(a2 + 437));
  v8 = v7;
  if ( sub_578B70(*(_DWORD *)(a2 + 441)) )
    v9 = sub_45A720(*(_DWORD *)(a2 + 441));
  else
    v9 = sub_45A6F0(*(_DWORD *)(a2 + 441));
  if ( v8 && v9 )
  {
    v10 = a1[4];
    v11 = *a1 - v10;
    a1a.field_0 = *a1 + v8[3] - v10;
    v12 = a1[5];
    v13 = a1[1];
    a1a.field_4 = v13 + v8[4] - v12 - 20;
    v18 = *(int2 *)(v8 + 3);
    a2a.field_0 = v9[3] + v11;
    a2a.field_4 = v9[4] - v12 + v13 - 20;
    a3 = *(int2 *)(v9 + 3);
LABEL_12:
    *(_DWORD *)&byte_5D4594[1316452] = *(_DWORD *)&byte_5D4594[1316428];
    *(_DWORD *)&byte_5D4594[1316436] = *(_DWORD *)&byte_5D4594[1316464];
    *(_DWORD *)&byte_5D4594[1316456] = *(_DWORD *)&byte_5D4594[1316424];
    *(_DWORD *)&byte_5D4594[1316484] = *(_DWORD *)&byte_5D4594[1316488];
    byte_5D4594[1316420] = 1;
    sub_4BAE60(&a1a, &a2a, 2, 0, 1, 1, 1);
    if ( !sub_413A50() )
      sub_4999D0(*(int *)&byte_5D4594[1316520], &v18, &a3);
  }
  return 1;
}

//----- (004BAE60) --------------------------------------------------------
int __cdecl sub_4BAE60(int2 *a1, int2 *a2, int a3, __int16 *a4, int a5, int a6, int a7)
{
  int2 *v7; // ebx
  int2 *v8; // ebp
  int v9; // esi
  int v10; // eax
  int v11; // eax
  __int64 v12; // rax
  int v13; // eax
  int v14; // edi
  int v15; // ebx
  int v16; // eax
  int v17; // edx
  int v18; // esi
  int v19; // ecx
  int result; // eax
  int2 *v21; // [esp+14h] [ebp+4h]
  int2 *v22; // [esp+18h] [ebp+8h]

  v7 = a2;
  v8 = a1;
  if ( a1->field_0 - a2->field_0 >= 0 )
    v9 = a1->field_0 - a2->field_0;
  else
    v9 = a2->field_0 - a1->field_0;
  v10 = a2->field_4;
  if ( a1->field_4 - v10 >= 0 )
    v11 = a1->field_4 - v10;
  else
    v11 = v10 - a1->field_4;
  v12 = (__int64)sqrt((double)(v9 * v9 + v11 * v11));
  if ( (int)v12 >= 512 )
  {
    *(_DWORD *)&byte_5D4594[1316476] = *(_DWORD *)&byte_587000[178204];
    *(_DWORD *)&byte_5D4594[1316448] = *(_DWORD *)&byte_587000[178216];
    goto LABEL_19;
  }
  *(_DWORD *)&byte_5D4594[1316476] = *(_DWORD *)&byte_587000[178208]
                                   + (int)v12
                                   * (*(_DWORD *)&byte_587000[178204] - *(_DWORD *)&byte_587000[178208])
                                   / 512;
  if ( (int)v12 >= 64 )
  {
    if ( (int)v12 >= 128 )
    {
      if ( (int)v12 >= 256 )
      {
        v13 = *(_DWORD *)&byte_587000[178216];
        goto LABEL_17;
      }
      v13 = *(_DWORD *)&byte_587000[178216] - 1;
    }
    else
    {
      v13 = *(_DWORD *)&byte_587000[178216] - 2;
    }
  }
  else
  {
    v13 = *(_DWORD *)&byte_587000[178216] - 3;
  }
  if ( v13 >= 1 )
  {
LABEL_17:
    *(_DWORD *)&byte_5D4594[1316448] = v13;
    goto LABEL_19;
  }
  *(_DWORD *)&byte_5D4594[1316448] = 1;
LABEL_19:
  *(_DWORD *)&byte_5D4594[1316532] = a3;
  if ( a3 == 1 || a3 == 3 )
  {
    *(_WORD *)&byte_5D4594[1316432] = *a4;
    *(_WORD *)&byte_5D4594[1316434] = a4[2];
    v14 = a1->field_0;
    v15 = a2->field_0;
    v16 = a1->field_0 - a2->field_0;
    if ( v16 < 0 )
      v16 = v15 - v14;
    v17 = a1->field_4;
    v18 = a2->field_4;
    v19 = a1->field_4 - v18;
    if ( v19 < 0 )
      v19 = v18 - v17;
    if ( v16 <= v19 )
      *(_DWORD *)&byte_5D4594[1316500] = (v17 >= v18) + 2;
    else
      *(_DWORD *)&byte_5D4594[1316500] = v14 >= v15;
    v7 = a2;
  }
  LOWORD(v22) = a1->field_0;
  LOWORD(v21) = v7->field_0;
  HIWORD(v22) = v8->field_4;
  HIWORD(v21) = v7->field_4;
  if ( a6 )
  {
    *(_DWORD *)&byte_5D4594[1316492] = 1;
    *(_DWORD *)&byte_5D4594[1316472] = *(_DWORD *)&byte_5D4594[1316456];
    *(_DWORD *)&byte_5D4594[1316508] = 0;
    sub_4BB070((int)v22, (int)v21);
    *(_DWORD *)&byte_5D4594[1316492] = 1;
    *(_DWORD *)&byte_5D4594[1316472] = *(_DWORD *)&byte_5D4594[1316452];
    sub_4BB070((int)v22, (int)v21);
  }
  result = a7;
  if ( a7 )
  {
    *(_DWORD *)&byte_5D4594[1316492] = 1;
    *(_DWORD *)&byte_5D4594[1316472] = *(_DWORD *)&byte_5D4594[1316436];
    *(_DWORD *)&byte_5D4594[1316440] = *(_DWORD *)&byte_5D4594[1316484];
    *(_DWORD *)&byte_5D4594[1316508] = 1;
    result = sub_4BB070((int)v22, (int)v21);
  }
  return result;
}

//----- (004BB070) --------------------------------------------------------
int __cdecl sub_4BB070(int a1, int a2)
{
  int v2; // eax
  bool v3; // zf
  int v4; // esi
  int v5; // edi
  int v6; // ebx
  int v7; // ebp
  unsigned __int8 v8; // al
  int v9; // ecx
  int v10; // eax
  int v11; // ecx
  int v12; // eax
  int v14; // edi
  int v15; // esi
  int v16; // eax
  int v17; // [esp+10h] [ebp-14h]
  int v18; // [esp+10h] [ebp-14h]
  int v19; // [esp+14h] [ebp-10h]
  int v20; // [esp+14h] [ebp-10h]
  int v21; // [esp+18h] [ebp-Ch]
  int v22; // [esp+18h] [ebp-Ch]
  int v23; // [esp+20h] [ebp-4h]
  int v24; // [esp+20h] [ebp-4h]
  int v25; // [esp+28h] [ebp+4h]
  int v26; // [esp+28h] [ebp+4h]
  int v27; // [esp+2Ch] [ebp+8h]
  int v28; // [esp+2Ch] [ebp+8h]

  v2 = *(_DWORD *)&byte_5D4594[1316492] + 1;
  v3 = *(_DWORD *)&byte_5D4594[1316492] + 1 == *(_DWORD *)&byte_5D4594[1316448];
  v23 = 0;
  ++*(_DWORD *)&byte_5D4594[1316492];
  if ( !v3 )
  {
    v14 = 1;
    v15 = 1;
    if ( v2 > 1 )
    {
      v16 = v2 - 1;
      do
      {
        v14 *= *(_DWORD *)&byte_587000[178212] + 9;
        v15 *= 10;
        --v16;
      }
      while ( v16 );
    }
    LOWORD(v24) = v15
                * sub_415FF0(
                    -*(_DWORD *)&byte_5D4594[1316476],
                    *(int *)&byte_5D4594[1316476],
                    (const char *)&byte_587000[178256],
                    193)
                / v14
                + (((__int16)a1 + (__int16)a2) >> 1);
    HIWORD(v24) = v15
                * sub_415FF0(
                    -*(_DWORD *)&byte_5D4594[1316476],
                    *(int *)&byte_5D4594[1316476],
                    (const char *)&byte_587000[178296],
                    196)
                / v14
                + ((SHIWORD(a1) + SHIWORD(a2)) >> 1);
    sub_4BB070(a1, v24);
    sub_4BB070(v24, a2);
    return --*(_DWORD *)&byte_5D4594[1316492];
  }
  if ( *(_DWORD *)&byte_5D4594[1316508] )
  {
    LOBYTE(v23) = byte_5D4594[1316420] + 48;
    sub_434040(*(int *)&byte_5D4594[1316440]);
    sub_434080(12);
    v4 = SHIWORD(a1);
    v5 = (__int16)a1;
    sub_49F500((__int16)a1, SHIWORD(a1));
    v6 = SHIWORD(a2);
    v7 = (__int16)a2;
    sub_49F500((__int16)a2, SHIWORD(a2));
    sub_49E4F0(v23);
    v23 = 1;
  }
  else
  {
    sub_434040(*(int *)&byte_5D4594[1316472]);
    sub_434080(3);
    v4 = SHIWORD(a1);
    v5 = (__int16)a1;
    sub_49F500((__int16)a1, SHIWORD(a1));
    v6 = SHIWORD(a2);
    v7 = (__int16)a2;
    sub_49F500((__int16)a2, SHIWORD(a2));
    sub_49E4F0(32);
  }
  sub_434460(*(int *)&byte_5D4594[1316472]);
  sub_49F500(v5, v4);
  sub_49F500(v7, v6);
  sub_49E4B0();
  if ( !v23 )
    return --*(_DWORD *)&byte_5D4594[1316492];
  v8 = byte_5D4594[1316420];
  v25 = 1;
  if ( (byte_5D4594[1316420] & 0xFEu) > 2 )
  {
    v19 = v7 + 1;
    v21 = v5 + 1;
    v17 = v4 + 1;
    v27 = v6 + 1;
    do
    {
      sub_49F5A0();
      v9 = v5 - v7;
      if ( v5 - v7 < 0 )
        v9 = v7 - v5;
      v10 = v4 - v6;
      if ( v4 - v6 < 0 )
        v10 = v6 - v4;
      if ( v9 <= v10 )
      {
        sub_49F500(v19, v6);
        sub_49F500(v21, v4);
      }
      else
      {
        sub_49F500(v7, v27);
        sub_49F500(v5, v17);
      }
      sub_49E4B0();
      ++v27;
      ++v17;
      ++v21;
      v8 = byte_5D4594[1316420];
      ++v19;
      ++v25;
    }
    while ( v25 < byte_5D4594[1316420] >> 1 );
  }
  v26 = 1;
  if ( (v8 & 0xFEu) <= 2 )
    return --*(_DWORD *)&byte_5D4594[1316492];
  v20 = v7 - 1;
  v18 = v5 - 1;
  v22 = v4 - 1;
  v28 = v6 - 1;
  do
  {
    sub_49F5A0();
    v11 = v5 - v7;
    if ( v5 - v7 < 0 )
      v11 = v7 - v5;
    v12 = v4 - v6;
    if ( v4 - v6 < 0 )
      v12 = v6 - v4;
    if ( v11 <= v12 )
    {
      sub_49F500(v20, v6);
      sub_49F500(v18, v4);
    }
    else
    {
      sub_49F500(v7, v28);
      sub_49F500(v5, v22);
    }
    sub_49E4B0();
    --v28;
    --v22;
    --v18;
    ++v26;
    --v20;
  }
  while ( v26 < byte_5D4594[1316420] >> 1 );
  return --*(_DWORD *)&byte_5D4594[1316492];
}

//----- (004BB3F0) --------------------------------------------------------
int __cdecl sub_4BB3F0(int *a1, int a2)
{
  unsigned __int16 v2; // ax
  int v3; // ebx
  int v4; // edi
  int v5; // ebp
  int v6; // edx
  int v7; // ecx
  unsigned __int16 v8; // ax
  _DWORD *v9; // eax
  _DWORD *v10; // edi
  _DWORD *v11; // eax
  int v12; // esi
  int v13; // ecx
  int v14; // ebx
  int v15; // edx
  int2 a2a; // [esp+10h] [ebp-20h]
  int2 a1a; // [esp+18h] [ebp-18h]
  int2 v19; // [esp+20h] [ebp-10h]
  int2 a3; // [esp+28h] [ebp-8h]

  if ( !*(_BYTE *)(a2 + 432) )
  {
    v2 = *(_WORD *)(a2 + 437);
    v3 = *a1;
    v4 = a1[4];
    v5 = a1[5];
    v6 = a1[1];
    v7 = v2 + *a1 - v4;
    v19.field_0 = v2;
    a1a.field_0 = v7;
    LOWORD(v7) = *(_WORD *)(a2 + 439);
    a2a.field_0 = v3 + *(unsigned __int16 *)(a2 + 441) - v4;
    v19.field_4 = (unsigned __int16)v7;
    v8 = *(_WORD *)(a2 + 443);
    a1a.field_4 = v6 - v5 + (unsigned __int16)v7 - 20;
    a3.field_0 = v8;
    a2a.field_4 = v8 - v5 + v6 - 20;
    goto LABEL_12;
  }
  if ( sub_578B70(*(_DWORD *)(a2 + 437)) )
    v9 = sub_45A720(*(_DWORD *)(a2 + 437));
  else
    v9 = sub_45A6F0(*(_DWORD *)(a2 + 437));
  v10 = v9;
  if ( sub_578B70(*(_DWORD *)(a2 + 441)) )
    v11 = sub_45A720(*(_DWORD *)(a2 + 441));
  else
    v11 = sub_45A6F0(*(_DWORD *)(a2 + 441));
  if ( v10 && v11 )
  {
    v12 = a1[4];
    v13 = *a1 - v12;
    a1a.field_0 = *a1 + v10[3] - v12;
    v14 = a1[5];
    v15 = a1[1];
    a1a.field_4 = v15 + v10[4] - v14 - 20;
    v19 = *(int2 *)(v10 + 3);
    a2a.field_0 = v11[3] + v13;
    a2a.field_4 = v11[4] - v14 + v15 - 20;
    a3 = *(int2 *)(v11 + 3);
LABEL_12:
    *(_DWORD *)&byte_5D4594[1316452] = *(_DWORD *)&byte_5D4594[1316428];
    *(_DWORD *)&byte_5D4594[1316436] = *(_DWORD *)&byte_5D4594[1316464];
    *(_DWORD *)&byte_5D4594[1316456] = *(_DWORD *)&byte_5D4594[1316424];
    *(_DWORD *)&byte_5D4594[1316484] = *(_DWORD *)&byte_5D4594[1316488];
    byte_5D4594[1316420] = 1;
    sub_4BAE60(&a1a, &a2a, 2, 0, 1, 1, 1);
    if ( !sub_413A50() )
      sub_4999D0(*(int *)&byte_5D4594[1316520], &v19, &a3);
  }
  return 1;
}

//----- (004BB5D0) --------------------------------------------------------
int __cdecl sub_4BB5D0(int *a1, int a2)
{
  int v2; // esi
  bool v3; // zf
  int v4; // ebp
  int v5; // edi
  int v6; // ebx
  int v7; // ecx
  unsigned __int16 v8; // ax
  _DWORD *v9; // eax
  _DWORD *v10; // edi
  _DWORD *v11; // eax
  int v12; // esi
  int v13; // edx
  int v14; // ebp
  int v15; // ecx
  int2 a2a; // [esp+10h] [ebp-20h]
  int2 a1a; // [esp+18h] [ebp-18h]
  int2 a3; // [esp+20h] [ebp-10h]
  int2 v20; // [esp+28h] [ebp-8h]
  int v21; // [esp+34h] [ebp+4h]
  char v22; // [esp+38h] [ebp+8h]

  v2 = a2;
  v3 = *(_BYTE *)(a2 + 432) == 0;
  v22 = *(_BYTE *)(a2 + 433);
  if ( v3 )
  {
    v4 = *a1;
    v5 = a1[4];
    v6 = a1[5];
    v7 = *a1;
    v21 = a1[1];
    v20.field_0 = *(unsigned __int16 *)(v2 + 437);
    a1a.field_0 = v20.field_0 + v7 - v5;
    v8 = *(_WORD *)(v2 + 441);
    v20.field_4 = *(unsigned __int16 *)(v2 + 439);
    a1a.field_4 = v21 - v6 + v20.field_4 - 20;
    a3.field_0 = v8;
    a2a.field_0 = v4 + v8 - v5;
    a3.field_4 = *(unsigned __int16 *)(v2 + 443);
    a2a.field_4 = a3.field_4 - v6 + v21 - 20;
    goto LABEL_12;
  }
  if ( sub_578B70(*(_DWORD *)(v2 + 437)) )
    v9 = sub_45A720(*(_DWORD *)(v2 + 437));
  else
    v9 = sub_45A6F0(*(_DWORD *)(v2 + 437));
  v10 = v9;
  if ( sub_578B70(*(_DWORD *)(v2 + 441)) )
    v11 = sub_45A720(*(_DWORD *)(v2 + 441));
  else
    v11 = sub_45A6F0(*(_DWORD *)(v2 + 441));
  if ( v10 && v11 )
  {
    v12 = *a1;
    v13 = a1[4];
    v14 = a1[5];
    v15 = a1[1];
    a1a.field_0 = v10[3] + *a1 - v13;
    a1a.field_4 = v10[4] - v14 + v15 - 20;
    v20 = *(int2 *)(v10 + 3);
    a2a.field_0 = v12 + v11[3] - v13;
    a2a.field_4 = v11[4] - v14 + v15 - 20;
    a3 = *(int2 *)(v11 + 3);
LABEL_12:
    byte_5D4594[1316420] = 2 * (v22 + 127);
    *(_DWORD *)&byte_5D4594[1316436] = *(_DWORD *)&byte_5D4594[1316496];
    *(_DWORD *)&byte_5D4594[1316484] = *(_DWORD *)&byte_5D4594[1316468];
    sub_4BAE60(&a1a, &a2a, 2, 0, 0, 0, 1);
    if ( !sub_413A50() )
      sub_4999D0(*(int *)&byte_5D4594[1316524], &v20, &a3);
  }
  return 1;
}

//----- (004BB7B0) --------------------------------------------------------
int __cdecl sub_4BB7B0(int *a1, int a2)
{
  int v2; // eax
  int v3; // eax
  int v5; // ebx
  int v6; // edi
  int v7; // ebp
  int v8; // ecx
  unsigned __int16 v9; // ax
  _DWORD *v10; // eax
  _DWORD *v11; // edi
  _DWORD *v12; // eax
  int v13; // esi
  int v14; // edx
  int v15; // ebx
  int v16; // ecx
  int2 a2a; // [esp+10h] [ebp-20h]
  int2 a1a; // [esp+18h] [ebp-18h]
  int2 a3; // [esp+20h] [ebp-10h]
  int2 v20; // [esp+28h] [ebp-8h]
  int v21; // [esp+34h] [ebp+4h]

  if ( *(_BYTE *)(a2 + 432) )
  {
    if ( sub_578B70(*(_DWORD *)(a2 + 437)) )
      v10 = sub_45A720(*(_DWORD *)(a2 + 437));
    else
      v10 = sub_45A6F0(*(_DWORD *)(a2 + 437));
    v11 = v10;
    if ( sub_578B70(*(_DWORD *)(a2 + 441)) )
      v12 = sub_45A720(*(_DWORD *)(a2 + 441));
    else
      v12 = sub_45A6F0(*(_DWORD *)(a2 + 441));
    if ( !v11 || !v12 )
      return 1;
    v13 = *a1;
    v14 = a1[4];
    a1a.field_0 = v11[3] + *a1 - v14;
    v15 = a1[5];
    v16 = a1[1];
    a1a.field_4 = v16 + v11[4] - v15 - 20;
    v20 = *(int2 *)(v11 + 3);
    a2a.field_0 = v13 + v12[3] - v14;
    a2a.field_4 = v12[4] - v15 + v16 - 20;
    a3 = *(int2 *)(v12 + 3);
  }
  else
  {
    v2 = *(_DWORD *)(a2 + 433);
    if ( v2 )
    {
      v3 = v2 - 1;
      *(_DWORD *)(a2 + 433) = v3;
      if ( !v3 )
      {
        sub_45A4E0(a2);
        return 0;
      }
    }
    v5 = *a1;
    v6 = a1[4];
    v7 = a1[5];
    v8 = *a1;
    v21 = a1[1];
    v20.field_0 = *(unsigned __int16 *)(a2 + 437);
    a1a.field_0 = v20.field_0 + v8 - v6;
    v9 = *(_WORD *)(a2 + 441);
    v20.field_4 = *(unsigned __int16 *)(a2 + 439);
    a1a.field_4 = v21 - v7 + v20.field_4 - 20;
    a3.field_0 = v9;
    a2a.field_0 = v5 + v9 - v6;
    a3.field_4 = *(unsigned __int16 *)(a2 + 443);
    a2a.field_4 = a3.field_4 - v7 + v21 - 20;
  }
  *(_DWORD *)&byte_5D4594[1316452] = *(_DWORD *)&byte_5D4594[1316444];
  *(_DWORD *)&byte_5D4594[1316436] = *(_DWORD *)&byte_5D4594[1316504];
  *(_DWORD *)&byte_5D4594[1316456] = *(_DWORD *)&byte_5D4594[1316460];
  *(_DWORD *)&byte_5D4594[1316484] = *(_DWORD *)&byte_5D4594[1316480];
  byte_5D4594[1316420] = 1;
  sub_4BAE60(&a1a, &a2a, 2, 0, 1, 1, 1);
  if ( !sub_413A50() )
    sub_4999D0(*(int *)&byte_5D4594[1316528], &v20, &a3);
  return 1;
}

//----- (004BB9D0) --------------------------------------------------------
int __cdecl sub_4BB9D0(_DWORD *a1, int a2)
{
  int v2; // edi
  int v3; // ebx
  int v4; // ebp
  int v5; // edi
  int v7; // [esp+10h] [ebp-20h]
  int v8; // [esp+14h] [ebp-1Ch]
  int v9; // [esp+18h] [ebp-18h]
  int v10; // [esp+1Ch] [ebp-14h]
  int v11; // [esp+20h] [ebp-10h]
  int v12; // [esp+2Ch] [ebp-4h]

  v2 = *a1 - a1[4];
  v3 = a1[1] - a1[5];
  v4 = *(_DWORD *)(a2 + 12) + v2 + sub_419A70(*(float *)(a2 + 64));
  v12 = *(_DWORD *)(a2 + 16) + v3 + sub_419A70(*(float *)(a2 + 68));
  v7 = *(_DWORD *)(a2 + 12) + v2 + sub_419A70(*(float *)(a2 + 88));
  v8 = *(_DWORD *)(a2 + 16) + v3 + sub_419A70(*(float *)(a2 + 92));
  v9 = *(_DWORD *)(a2 + 12) + v2 + sub_419A70(*(float *)(a2 + 72));
  v10 = *(_DWORD *)(a2 + 16) + v3 + sub_419A70(*(float *)(a2 + 76));
  v11 = *(_DWORD *)(a2 + 12) + v2 + sub_419A70(*(float *)(a2 + 80));
  v5 = *(_DWORD *)(a2 + 16) + v3 + sub_419A70(*(float *)(a2 + 84));
  sub_434460(*(int *)&byte_5D4594[2650656]);
  sub_434560(1);
  sub_49F500(v4, v12);
  sub_49F500(v11, v5);
  sub_49E4B0();
  sub_49F500(v7, v8);
  sub_49F500(v11, v5);
  sub_49E4B0();
  sub_49F500(v4, v12);
  sub_49F500(v9, v10);
  sub_49E4B0();
  sub_49F500(v7, v8);
  sub_49F500(v9, v10);
  sub_49E4B0();
  sub_434560(0);
  return 1;
}

//----- (004BBB30) --------------------------------------------------------
int __cdecl sub_4BBB30(_DWORD *a1, int a2)
{
  int v2; // esi
  int v4; // ebp
  int v5; // edi
  int v6; // ebx
  int v7; // ebp
  int v8; // eax
  int v9; // edx
  int v10; // ecx
  int v11; // eax
  int v12; // edi
  float v13; // [esp-10h] [ebp-34h]
  int v14; // [esp+4h] [ebp-20h]
  int v15; // [esp+8h] [ebp-1Ch]
  int v16; // [esp+Ch] [ebp-18h]
  int v17; // [esp+10h] [ebp-14h]
  int v18; // [esp+14h] [ebp-10h]
  int v19; // [esp+1Ch] [ebp-8h]
  int v20; // [esp+2Ch] [ebp+8h]

  v2 = a2;
  if ( !*(_BYTE *)(a2 + 432)
    && !*(_BYTE *)(a2 + 433)
    && !*(_BYTE *)(a2 + 434)
    && !*(_BYTE *)(a2 + 435)
    && !*(_BYTE *)(a2 + 436)
    && !*(_BYTE *)(a2 + 437) )
  {
    return 1;
  }
  v4 = a1[1] - a1[5];
  v13 = *(float *)(a2 + 64);
  v5 = *a1 - a1[4];
  v20 = a1[1] - a1[5];
  v18 = *(_DWORD *)(v2 + 12) + v5 + sub_419A70(v13);
  v6 = *(_DWORD *)(v2 + 16) + v4 + sub_419A70(*(float *)(v2 + 68));
  v19 = *(_DWORD *)(v2 + 12) + v5 + sub_419A70(*(float *)(v2 + 88));
  v7 = *(_DWORD *)(v2 + 16) + v20 + sub_419A70(*(float *)(v2 + 92));
  v16 = *(_DWORD *)(v2 + 12) + v5 + sub_419A70(*(float *)(v2 + 72));
  v17 = *(_DWORD *)(v2 + 16) + v20 + sub_419A70(*(float *)(v2 + 76));
  v14 = *(_DWORD *)(v2 + 12) + v5 + sub_419A70(*(float *)(v2 + 80));
  v8 = sub_419A70(*(float *)(v2 + 84));
  v9 = v20;
  v10 = *(_DWORD *)(v2 + 16);
  v11 = v10 + v20 + v8;
  v12 = 0;
  v15 = v11;
  do
  {
    if ( v12 )
    {
      LOBYTE(v9) = *(_BYTE *)(v2 + 437);
      LOBYTE(v11) = *(_BYTE *)(v2 + 436);
      LOBYTE(v10) = *(_BYTE *)(v2 + 435);
    }
    else
    {
      LOBYTE(v9) = *(_BYTE *)(v2 + 434);
      LOBYTE(v11) = *(_BYTE *)(v2 + 433);
      LOBYTE(v10) = *(_BYTE *)(v2 + 432);
    }
    sub_434430(v10, v11, v9);
    sub_49F500(v12 + v18, v6);
    sub_49F500(v12 + v14, v15);
    sub_49E4B0();
    sub_49F500(v12 + v19, v7);
    sub_49F500(v12 + v14, v15);
    sub_49E4B0();
    sub_49F500(v12 + v18, v6);
    sub_49F500(v12 + v16, v17);
    sub_49E4B0();
    sub_49F500(v12 + v19, v7);
    sub_49F500(v12 + v16, v17);
    v11 = sub_49E4B0();
    ++v12;
  }
  while ( v12 < 2 );
  return 1;
}
// 4BBC74: variable 'v10' is possibly undefined
// 4BBC74: variable 'v9' is possibly undefined

//----- (004BBD30) --------------------------------------------------------
int __cdecl sub_4BBD30(int *a1, int a2)
{
  sub_4C4770(a1, (unsigned __int8 *)a2, *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a2 + 304) + 4) + 4 * *(_DWORD *)(a2 + 308)));
  return 1;
}

//----- (004BBD60) --------------------------------------------------------
int __cdecl sub_4BBD60(int *a1, int a2)
{
  int v2; // edi
  int v3; // esi
  int v4; // ecx
  int result; // eax
  int v6; // ebx
  int v7; // eax

  v2 = *(_DWORD *)(a2 + 304);
  switch ( *(_DWORD *)(v2 + 12) )
  {
    case 0:
      v3 = (*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(a2 + 316)) / ((unsigned int)*(unsigned __int8 *)(v2 + 9) + 1);
      v7 = *(unsigned __int8 *)(v2 + 8);
      if ( v3 >= v7 )
        v3 = v7 - 1;
      goto LABEL_12;
    case 1:
      v3 = (*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(a2 + 316)) / ((unsigned int)*(unsigned __int8 *)(v2 + 9) + 1);
      if ( v3 < *(unsigned __int8 *)(v2 + 8) )
        goto LABEL_12;
      sub_45A4E0(a2);
      return 0;
    case 2:
      if ( *(_DWORD *)(a2 + 120) & 0x1000000 )
        goto LABEL_9;
      if ( !(*(_DWORD *)(a2 + 112) & 0x10000000) )
        goto LABEL_8;
      if ( sub_40A5C0(32) )
      {
LABEL_9:
        v3 = (*(_DWORD *)&byte_5D4594[2598000] + *(_DWORD *)(a2 + 128))
           / ((unsigned int)*(unsigned __int8 *)(v2 + 9) + 1);
        goto LABEL_10;
      }
      if ( *(_DWORD *)(a2 + 112) & 0x10000000 )
        goto LABEL_14;
LABEL_8:
      v3 = 0;
      goto LABEL_12;
    case 3:
      v6 = 2 * *(unsigned __int8 *)(v2 + 8);
      sub_434560(1);
      v3 = (*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(a2 + 316)) / ((unsigned int)*(unsigned __int8 *)(v2 + 9) + 1);
      if ( v3 < v6 )
      {
        sub_434580(-56 - 200 * v3 / v6);
LABEL_10:
        v4 = *(unsigned __int8 *)(v2 + 8);
        if ( v3 >= v4 )
          v3 %= v4;
LABEL_12:
        sub_4C4770(a1, (unsigned __int8 *)a2, *(_DWORD *)(*(_DWORD *)(v2 + 4) + 4 * v3));
        if ( *(_DWORD *)(v2 + 12) == 3 )
          sub_434560(0);
LABEL_14:
        result = 1;
      }
      else
      {
        sub_45A4E0(a2);
        result = 0;
      }
      return result;
    case 4:
      v3 = sub_415FF0(0, *(unsigned __int8 *)(v2 + 8) - 1, (const char *)&byte_587000[178336], 24);
      goto LABEL_12;
    case 5:
      v3 = *(_DWORD *)(a2 + 308);
      goto LABEL_12;
    default:
      goto LABEL_14;
  }
}

//----- (004BBF10) --------------------------------------------------------
int __cdecl sub_4BBF10(int *a1, _DWORD *a2)
{
  int v2; // eax
  int v3; // edx
  int v4; // eax
  int v5; // eax
  int result; // eax

  v2 = a2[70];
  v3 = a2[76];
  if ( v2 & 2 )
  {
    a2[79] = *(_DWORD *)&byte_5D4594[2598000];
    v4 = 0;
  }
  else if ( v2 & 4 )
  {
    v4 = 1;
  }
  else
  {
    v4 = ((unsigned __int8)v2 >> 2) & 2;
  }
  v5 = 48 * v4 + v3 + 4;
  if ( *(_DWORD *)(v5 + 44) == 2 )
    a2[79] = *(_DWORD *)&byte_5D4594[2598000];
  if ( *(_WORD *)(v5 + 40) )
    result = sub_4BC6B0(a1, (int)a2, v5);
  else
    result = 1;
  return result;
}

//----- (004BBF90) --------------------------------------------------------
int __cdecl sub_4BBF90(int *a1, int a2)
{
  int v2; // eax
  int v3; // edx
  int v5; // ecx
  int v6; // eax
  _BYTE *v7; // esi
  int v8; // edi
  char *v9; // eax
  int v10; // ecx
  int *v11; // edi
  int v12; // esi

  if ( !sub_40A5C0(0x200000) )
  {
    v9 = sub_49A340(*(_DWORD *)(a2 + 128));
    if ( !v9 )
      return 1;
    v10 = 0;
    v11 = (int *)(v9 + 8);
    do
    {
      v12 = v10 + 1;
      sub_4341D0(v10 + 1, *v11);
      v10 = v12;
      ++v11;
    }
    while ( v12 < 6 );
    return sub_4BC180(a1, a2);
  }
  v2 = sub_4DA790();
  if ( !v2 )
    return sub_4BC180(a1, a2);
  while ( 1 )
  {
    v3 = *(_DWORD *)(v2 + 40);
    if ( *(_DWORD *)(a2 + 128) == v3 )
      break;
    v2 = sub_4DA7A0(v2);
    if ( !v2 )
      return sub_4BC180(a1, a2);
  }
  v5 = *(_DWORD *)(v2 + 748);
  v6 = 0;
  v7 = (_BYTE *)(v5 + 2077);
  do
  {
    LOBYTE(v3) = v7[1];
    LOBYTE(v5) = *(v7 - 1);
    v8 = v6 + 1;
    LOBYTE(v6) = *v7;
    sub_4340A0(v8, v5, v6, v3);
    v6 = v8;
    v7 += 3;
  }
  while ( v8 < 6 );
  return sub_4BC180(a1, a2);
}
// 4BC002: variable 'v5' is possibly undefined
// 4BC002: variable 'v3' is possibly undefined

//----- (004BC080) --------------------------------------------------------
void __cdecl sub_4BC080(_DWORD *a1, int a2, unsigned __int16 a3, unsigned __int16 a4, char a5)
{
  int v5; // edi
  int v6; // edi
  int v7; // ebp
  int v8; // ebx
  int v9; // esi
  float v10; // [esp+0h] [ebp-14h]
  float v11; // [esp+0h] [ebp-14h]
  float v12; // [esp+0h] [ebp-14h]

  if ( a2 )
  {
    v5 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
    v10 = *(float *)(a2 + 48) + *(float *)(a2 + 48);
    v6 = sub_419A70(v10) + v5;
    v7 = *(_DWORD *)(a2 + 16) + a1[1] - *(__int16 *)(a2 + 104) - a1[5];
    v11 = *(float *)(a2 + 100) - *(float *)(a2 + 96);
    v8 = sub_419A70(v11);
    if ( v8 < 30 )
      v8 = 30;
    v12 = *(float *)(a2 + 96) + *(float *)(a2 + 100);
    v9 = v7 + sub_419A70(v12) / -2 - v8 / 2;
    if ( a4 )
    {
      sub_434460(*(int *)&byte_5D4594[2650656]);
      sub_49CE30(v6, v9, 2, v8);
      if ( a5 )
        sub_434460(*(int *)&byte_5D4594[2618904]);
      else
        sub_434460(*(int *)&byte_5D4594[2650644]);
      sub_49CE30(v6, v8 + v9 - v8 * a3 / a4, 2, v8 * a3 / a4);
    }
  }
}

//----- (004BC180) --------------------------------------------------------
int __cdecl sub_4BC180(int *a1, int a2)
{
  int v2; // esi
  int v3; // edi
  char v4; // cl
  int v5; // eax
  int v6; // eax
  int v7; // ecx
  int v8; // ebx
  int v10; // edi
  int v11; // ebp
  int *v12; // edi
  char *v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // ebp
  char *v17; // ebx
  int *v18; // ebx
  int v19; // ebp
  int v20; // edi
  int v21; // [esp+Ch] [ebp-Ch]
  int v22; // [esp+10h] [ebp-8h]
  int v23; // [esp+14h] [ebp-4h]

  v2 = a2;
  v23 = 1;
  v3 = *(_DWORD *)(a2 + 304);
  if ( !sub_40A5C0(0x200000) )
  {
    v4 = *(_BYTE *)(v2 + 432);
    if ( *(_BYTE *)(v2 + 297) != v4 )
    {
      v5 = *(_DWORD *)(v2 + 276);
      if ( v5 != 1 && v5 != 3 && v5 != 5 )
      {
        if ( (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(v2 + 436)) >= *(int *)&byte_5D4594[2649704] >> 2 )
        {
          *(_DWORD *)(v2 + 436) = *(_DWORD *)&byte_5D4594[2598000];
          *(_BYTE *)(v2 + 432) = *(_BYTE *)(v2 + 297);
        }
        else
        {
          *(_BYTE *)(v2 + 297) = v4;
        }
      }
    }
  }
  v6 = *(_DWORD *)&byte_5D4594[1316536];
  if ( !*(_DWORD *)&byte_5D4594[1316536] )
  {
    v6 = sub_44CFC0((CHAR *)&byte_587000[178376]);
    *(_DWORD *)&byte_5D4594[1316536] = v6;
  }
  v7 = 48 * *(_DWORD *)(v2 + 276);
  v8 = v7 + v3 + 4;
  if ( !*(_WORD *)(v7 + v3 + 44) )
    return 1;
  if ( *(_DWORD *)(v2 + 108) != v6 )
    goto LABEL_22;
  if ( sub_40A5C0(0x200000) )
  {
    v10 = 0;
    v11 = 0;
  }
  else
  {
    v10 = *(_DWORD *)(v2 + 12) - *(_DWORD *)(*(_DWORD *)&byte_5D4594[2614252] + 12);
    v11 = *(_DWORD *)(v2 + 16) - *(_DWORD *)(*(_DWORD *)&byte_5D4594[2614252] + 16);
  }
  if ( *(_DWORD *)&byte_5D4594[2614252] && sub_4356C0(*(int *)&byte_5D4594[2614252], 21) )
  {
    sub_434600(1);
    sub_433E40(*(int *)&byte_5D4594[2618904]);
    LOBYTE(a2) = *(_DWORD *)&byte_5D4594[3799568] >= 16 ? -1 : -128;
LABEL_21:
    sub_434560(1);
    sub_434580(a2);
LABEL_22:
    sub_4BC490(v2);
    v12 = a1;
    v23 = sub_4BC6B0(a1, v2, v8);
    sub_434600(0);
    goto LABEL_24;
  }
  if ( v10 * v10 + v11 * v11 < 40000 )
    goto LABEL_21;
  v12 = a1;
LABEL_24:
  if ( sub_4951F0(*(_DWORD *)(v2 + 128)) )
  {
    v22 = 0;
    v21 = 0;
    LOBYTE(a2) = 0;
    sub_495180(*(_DWORD *)(v2 + 128), &v22, &v21, &a2);
    sub_4BC080(v12, v2, v22, v21, a2);
  }
  if ( !sub_417DA0(4) && (!*(_DWORD *)&byte_5D4594[2614252] || !sub_419130(*(_DWORD *)&byte_5D4594[2614252] + 24)) )
    goto LABEL_45;
  if ( !sub_40A5C0(1) )
  {
    v15 = *(_DWORD *)&byte_5D4594[2614252] + 24;
LABEL_34:
    if ( v15 )
    {
      v16 = 0;
      v17 = sub_418AB0(*(unsigned __int8 *)(v15 + 4));
      if ( v17 && sub_495A80(*(_DWORD *)(v2 + 128)) )
        v16 = 1;
      if ( (!sub_40A5C0(4096) || !(*(_BYTE *)(v2 + 112) & 2) || !(*(_BYTE *)(v2 + 116) & 8)) && v16 )
      {
        v18 = (int *)sub_418D50((int)v17);
        v19 = *v12 + *(_DWORD *)(v2 + 12) - v12[4];
        v20 = *(_DWORD *)(v2 + 16) + v12[1] - *(__int16 *)(v2 + 104) - a1[5] - 2 * sub_419A70(*(float *)(v2 + 100));
        if ( v18 )
          sub_434460(*v18);
        sub_4B0BC0(v19, v20, 3);
      }
    }
    goto LABEL_45;
  }
  v13 = sub_417090(31);
  if ( v13 )
  {
    v14 = *((_DWORD *)v13 + 514);
    if ( v14 )
    {
      v15 = v14 + 48;
      goto LABEL_34;
    }
  }
LABEL_45:
  sub_434560(0);
  return v23;
}

//----- (004BC490) --------------------------------------------------------
char __cdecl sub_4BC490(int a1)
{
  int v1; // eax
  unsigned int v2; // ecx
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax

  LOBYTE(v1) = byte_5D4594[2598000];
  if ( !(byte_5D4594[2598000] & 3) && *(_DWORD *)(a1 + 276) == 8 && *(_DWORD *)(a1 + 116) & 0x40000 )
  {
    v2 = *(_DWORD *)(a1 + 308);
    v3 = *(_DWORD *)(a1 + 308);
    if ( v3 )
    {
      v4 = v3 - 2;
      if ( v4 )
      {
        if ( v4 == 2 )
        {
          v1 = sub_415FF0(0, 100, (const char *)&byte_587000[178464], 74);
          if ( v1 < 15 )
          {
            v5 = *(_DWORD *)(a1 + 308);
            *(_BYTE *)(a1 + 299) = 0;
            v1 = v5 - 1;
            *(_DWORD *)(a1 + 308) = v1;
          }
        }
        else
        {
          LOBYTE(v1) = *(_BYTE *)(a1 + 299);
          switch ( (_BYTE)v1 )
          {
            case 0:
              if ( v2 < 2 )
              {
                *(_DWORD *)(a1 + 308) = v2 + 1;
                return v1;
              }
LABEL_11:
              *(_DWORD *)(a1 + 308) = v2 - 1;
              return v1;
            case 1:
              goto LABEL_11;
            case 2:
              *(_DWORD *)(a1 + 308) = v2 + 1;
              break;
            default:
              *(_DWORD *)(a1 + 308) = 2;
              *(_BYTE *)(a1 + 299) = 0;
              break;
          }
        }
      }
      else
      {
        v1 = sub_415FF0(0, 100, (const char *)&byte_587000[178384], 52);
        if ( v1 >= 5 )
        {
          if ( v1 < 10 )
          {
            v7 = *(_DWORD *)(a1 + 308);
            *(_BYTE *)(a1 + 299) = 2;
            v1 = v7 + 1;
            *(_DWORD *)(a1 + 308) = v1;
          }
        }
        else
        {
          v6 = *(_DWORD *)(a1 + 308);
          *(_BYTE *)(a1 + 299) = 1;
          v1 = v6 - 1;
          *(_DWORD *)(a1 + 308) = v1;
        }
      }
    }
    else
    {
      v1 = sub_415FF0(0, 100, (const char *)&byte_587000[178424], 66);
      if ( v1 < 15 )
      {
        v8 = *(_DWORD *)(a1 + 308);
        *(_BYTE *)(a1 + 299) = 0;
        v1 = v8 + 1;
        *(_DWORD *)(a1 + 308) = v1;
      }
    }
  }
  return v1;
}

//----- (004BC5D0) --------------------------------------------------------
int __cdecl sub_4BC5D0(_DWORD *a1, int a2)
{
  int result; // eax
  int v3; // ecx
  int v4; // ecx

  switch ( *(_DWORD *)(a2 + 44) )
  {
    case 0:
      result = (*(_DWORD *)&byte_5D4594[2598000] - a1[79]) / (unsigned int)(*(__int16 *)(a2 + 42) + 1);
      v4 = *(__int16 *)(a2 + 40);
      if ( result >= v4 )
        result = v4 - 1;
      break;
    case 1:
      result = (*(_DWORD *)&byte_5D4594[2598000] - a1[79]) / (unsigned int)(*(__int16 *)(a2 + 42) + 1);
      if ( result >= *(__int16 *)(a2 + 40) )
      {
        sub_45A4E0((int)a1);
        result = -1;
      }
      break;
    case 2:
      result = (*(_DWORD *)&byte_5D4594[2598000] + a1[32]) / (unsigned int)(*(__int16 *)(a2 + 42) + 1);
      v3 = *(__int16 *)(a2 + 40);
      if ( result >= v3 )
        result %= v3;
      break;
    case 4:
      result = sub_415FF0(0, *(__int16 *)(a2 + 40) - 1, (const char *)&byte_587000[178504], 19);
      break;
    case 5:
      result = a1[77];
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (004BC6B0) --------------------------------------------------------
int __cdecl sub_4BC6B0(int *a1, int a2, int a3)
{
  int v3; // eax

  v3 = sub_4BC5D0((_DWORD *)a2, a3);
  if ( v3 < 0 )
    return 0;
  sub_4C4770(a1, (unsigned __int8 *)a2, *(_DWORD *)(*(_DWORD *)(a3 + 4 * *(unsigned __int8 *)(a2 + 297) + 4) + 4 * v3));
  return 1;
}

//----- (004BC700) --------------------------------------------------------
int __cdecl sub_4BC700(int *a1, int a2)
{
  return sub_4BC6B0(a1, a2, *(_DWORD *)(a2 + 304));
}

//----- (004BC720) --------------------------------------------------------
int __cdecl sub_4BC720(int a1)
{
  int result; // eax

  result = *(_DWORD *)(a1 + 304);
  *(_DWORD *)(a1 + 432) = *(unsigned __int8 *)(result + 27) * (*(unsigned __int8 *)(result + 32) + 1);
  return result;
}

//----- (004BC750) --------------------------------------------------------
int __cdecl sub_4BC750(int *a1, int a2)
{
  int v2; // esi
  int v3; // eax
  int v4; // edi
  int v5; // eax
  int v6; // ebx
  int v7; // eax
  int v8; // ecx
  unsigned int v9; // ecx
  int v10; // ebp
  int v11; // ebp
  int v12; // ecx
  int v13; // eax
  signed int v14; // ecx
  signed int v15; // eax
  int v16; // eax
  int v17; // eax
  int result; // eax
  unsigned __int8 *v19; // [esp+10h] [ebp-8h]
  int v20; // [esp+14h] [ebp-4h]
  unsigned __int8 *v21; // [esp+20h] [ebp+8h]

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 280);
  v4 = *(_DWORD *)(a2 + 304);
  if ( v3 & 0x100 )
  {
    v5 = 1;
  }
  else if ( v3 & 0x200 )
  {
    v5 = 2;
  }
  else
  {
    v5 = (*(_DWORD *)(a2 + 280) & 0xC00) != 0 ? 3 : 0;
  }
  v6 = *(unsigned __int8 *)(v5 + v4 + 24);
  v19 = (unsigned __int8 *)(v5 + v4 + 24);
  v21 = (unsigned __int8 *)(v5 + v4 + 29);
  v20 = *(_DWORD *)(v4 + 4 * v5 + 4);
  switch ( *(_DWORD *)(v4 + 4 * v5 + 36) )
  {
    case 0:
      v7 = v5 + v4 + 29;
      goto LABEL_12;
    case 2:
      v7 = (*(_DWORD *)&byte_5D4594[2598000] + *(_DWORD *)(v2 + 128))
         / ((unsigned int)*(unsigned __int8 *)(v5 + v4 + 29) + 1);
      if ( v7 >= v6 )
        v7 %= v6;
      goto LABEL_12;
    case 4:
      v7 = sub_415FF0(0, v6, (const char *)&byte_587000[178544], 86);
      goto LABEL_12;
    case 5:
      v7 = *(_DWORD *)(v2 + 308);
LABEL_12:
      v8 = *(_DWORD *)(v2 + 280);
      if ( v8 & 0x800 )
      {
        v9 = *(_DWORD *)(v2 + 120) & 0xDFFFFFFF;
        v7 = v6 - 1;
        *(_DWORD *)(v2 + 112) &= 0xFFF7FFFF;
        *(_DWORD *)(v2 + 120) = v9;
      }
      v10 = *(_DWORD *)(v2 + 432);
      if ( v10 )
      {
        v7 = ((*v21 + 1) * (unsigned int)*v19 - v10) / ((unsigned int)*v21 + 1);
        if ( v7 >= v6 )
          v7 = v6 - 1;
        if ( v7 < 0 )
          v7 = 0;
        v11 = v10 - 1;
        *(_DWORD *)(v2 + 432) = v11;
        if ( !v11 )
        {
          v12 = *(_DWORD *)(v2 + 280);
          BYTE1(v12) = BYTE1(v12) & 0xFB | 8;
          *(_DWORD *)(v2 + 280) = v12;
        }
      }
      sub_4C4770(a1, (unsigned __int8 *)v2, *(_DWORD *)(v20 + 4 * v7));
      v13 = *(_DWORD *)(v2 + 280);
      if ( !(v13 & 0xC00) )
      {
        v14 = *(unsigned __int8 *)(v4 + 28);
        v15 = (*(_DWORD *)&byte_5D4594[2598000] + *(_DWORD *)(v2 + 128))
            / ((unsigned int)*(unsigned __int8 *)(v4 + 33) + 1);
        if ( v15 >= v14 )
          v15 %= v14;
        sub_4C4770(a1, (unsigned __int8 *)v2, *(_DWORD *)(*(_DWORD *)(v4 + 20) + 4 * v15));
      }
      v16 = *(_DWORD *)(v2 + 280);
      if ( v16 & 0x800 )
      {
        v17 = *(_DWORD *)(v2 + 120);
        LOBYTE(v17) = v17 | 1;
        *(_DWORD *)(v2 + 120) = v17;
      }
      result = 1;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (004BC920) --------------------------------------------------------
int sub_4BC920()
{
  return 1;
}

//----- (004BC930) --------------------------------------------------------
int __cdecl sub_4BC930(int *a1, int a2)
{
  int v2; // eax
  int v3; // edi
  int v4; // ecx
  int v5; // esi
  int v6; // edx
  int v7; // edx
  int v8; // edx
  signed int v10; // eax

  v2 = *(_DWORD *)(a2 + 304);
  if ( *(_DWORD *)(a2 + 120) & 0x1000000 )
  {
    v3 = *(_DWORD *)(v2 + 4);
    v4 = *(unsigned __int8 *)(v2 + 24);
    v5 = *(unsigned __int8 *)(v2 + 29);
    v6 = *(_DWORD *)(v2 + 36);
  }
  else
  {
    v3 = *(_DWORD *)(v2 + 8);
    v4 = *(unsigned __int8 *)(v2 + 25);
    v5 = *(unsigned __int8 *)(v2 + 30);
    v6 = *(_DWORD *)(v2 + 40);
  }
  v7 = v6 - 2;
  if ( v7 )
  {
    v8 = v7 - 2;
    if ( v8 )
    {
      if ( v8 != 1 )
        return 0;
      v10 = *(_DWORD *)(a2 + 308);
    }
    else
    {
      v10 = sub_415FF0(0, v4, (const char *)&byte_587000[178584], 57);
    }
  }
  else
  {
    v10 = (*(_DWORD *)&byte_5D4594[2598000] + *(_DWORD *)(a2 + 128)) / (unsigned int)(v5 + 1);
    if ( v10 >= v4 )
      v10 %= v4;
  }
  sub_4C4770(a1, (unsigned __int8 *)a2, *(_DWORD *)(v3 + 4 * v10));
  return 1;
}

//----- (004BC9E0) --------------------------------------------------------
int __cdecl sub_4BC9E0(int *a1, int a2)
{
  _BYTE *v2; // edi
  int v3; // eax
  int v4; // edx
  int v5; // ecx
  char v6; // al
  char v7; // dl
  char v9; // dl
  char v10; // dl
  char v11; // dl
  int v12; // [esp-4h] [ebp-18h]
  int v13; // [esp-4h] [ebp-18h]
  int v14; // [esp-4h] [ebp-18h]
  int v15; // [esp-4h] [ebp-18h]
  int2 a3; // [esp+Ch] [ebp-8h]

  sub_4C4770(
    a1,
    (unsigned __int8 *)a2,
    *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a2 + 304) + 4) + 4 * *(unsigned __int8 *)(a2 + 299)));
  if ( !sub_40A5C0(4096) || *(_BYTE *)(a2 + 432) != 1 )
    return 1;
  if ( !*(_DWORD *)(a2 + 436) )
  {
    *(_DWORD *)(a2 + 440) = sub_42F970((const char *)&byte_587000[178624]);
    *(_DWORD *)(a2 + 436) = sub_42F970((const char *)&byte_587000[178644]);
    *(_DWORD *)(a2 + 444) = sub_42F970((const char *)&byte_587000[178664]);
    *(_DWORD *)(a2 + 448) = sub_42F970((const char *)&byte_587000[178680]);
  }
  sub_4739E0(a1, (int2 *)(a2 + 12), &a3);
  a3.field_0 -= 64;
  a3.field_4 -= 79;
  v2 = (_BYTE *)(*(int (__cdecl **)(int2 *))&byte_5D4594[3807156])((int2 *)(a2 + 12));
  v3 = sub_4345F0(1);
  LOBYTE(v4) = v2[8];
  LOBYTE(v3) = v2[4];
  LOBYTE(v5) = *v2;
  sub_433CD0(v5, v3, v4);
  v6 = *(_BYTE *)(a2 + 299);
  if ( !v6 )
  {
    v7 = *(_BYTE *)(a2 + 433);
    v12 = a3.field_4 - 20;
    a3.field_0 -= 15;
    a3.field_4 -= 20;
    if ( v7 == 1 )
      sub_47D2C0(*(_DWORD *)(a2 + 440), a3.field_0, v12);
    else
      sub_47D2C0(*(_DWORD *)(a2 + 444), a3.field_0, v12);
    return 1;
  }
  if ( v6 == 8 )
  {
    v9 = *(_BYTE *)(a2 + 433);
    v13 = a3.field_4 - 20;
    a3.field_0 += 15;
    a3.field_4 -= 20;
    if ( v9 == 1 )
      sub_47D2C0(*(_DWORD *)(a2 + 436), a3.field_0, v13);
    else
      sub_47D2C0(*(_DWORD *)(a2 + 448), a3.field_0, v13);
    return 1;
  }
  if ( v6 != 16 )
  {
    v11 = *(_BYTE *)(a2 + 433);
    v15 = a3.field_4 + 2;
    a3.field_0 -= 8;
    a3.field_4 += 2;
    if ( v11 == 1 )
    {
      sub_47D2C0(*(_DWORD *)(a2 + 436), a3.field_0, v15);
      return 1;
    }
    sub_47D2C0(*(_DWORD *)(a2 + 448), a3.field_0, v15);
    return 1;
  }
  v10 = *(_BYTE *)(a2 + 433);
  v14 = a3.field_4 + 2;
  a3.field_0 += 8;
  a3.field_4 += 2;
  if ( v10 == 1 )
    sub_47D2C0(*(_DWORD *)(a2 + 440), a3.field_0, v14);
  else
    sub_47D2C0(*(_DWORD *)(a2 + 444), a3.field_0, v14);
  return 1;
}
// 4BCABD: variable 'v5' is possibly undefined
// 4BCABD: variable 'v4' is possibly undefined

//----- (004BCC20) --------------------------------------------------------
int __cdecl sub_4BCC20(int *a1, int a2)
{
  if ( !(*(_DWORD *)(a2 + 112) & 0x40000) || *(_DWORD *)(a2 + 120) & 0x1000000 )
    sub_4C4770(a1, (unsigned __int8 *)a2, *(_DWORD *)(*(_DWORD *)(a2 + 304) + 4));
  return 1;
}

//----- (004BCC60) --------------------------------------------------------
int __cdecl sub_4BCC60(int *a1, int a2)
{
  sub_4C4770(a1, (unsigned __int8 *)a2, *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a2 + 304) + 4) + 4 * *(_DWORD *)(a2 + 308)));
  return 1;
}

//----- (004BCC90) --------------------------------------------------------
int __cdecl sub_4BCC90(_DWORD *a1, int a2)
{
  int v2; // edi
  int v3; // ebx
  int v4; // eax
  int v5; // ecx
  int v6; // edx
  int v7; // eax
  int v8; // edi
  int v9; // ebx
  int v10; // eax
  int v11; // ebp
  int v12; // eax
  int v13; // eax
  int v14; // eax
  float v16; // [esp-8h] [ebp-38h]
  int2 a2a; // [esp+10h] [ebp-20h]
  int v18; // [esp+1Ch] [ebp-14h]
  int v19; // [esp+20h] [ebp-10h]
  int v20; // [esp+28h] [ebp-8h]

  v2 = *(_DWORD *)&byte_5D4594[2618904];
  if ( *(_DWORD *)(a2 + 288) >= *(int *)&byte_5D4594[2598000] )
    v2 = *(_DWORD *)&byte_5D4594[2589772];
  sub_434460(v2);
  sub_434390(*(int *)&byte_5D4594[2523948]);
  v3 = *(_DWORD *)(a2 + 16);
  v4 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
  v5 = *(_DWORD *)(a2 + 112);
  v6 = a1[1] - a1[5];
  a2a.field_0 = *a1 + *(_DWORD *)(a2 + 12) - a1[4];
  a2a.field_4 = v3 + v6;
  if ( (v5 & 0x80u) == 0 )
  {
    if ( v5 & 2 )
    {
      sub_4BD010(a2, &a2a, v2);
      sub_49F500(a2a.field_0, a2a.field_4);
      sub_49F570(
        *(_DWORD *)&byte_587000[8 * *(unsigned __int8 *)(a2 + 297) + 179880],
        *(_DWORD *)&byte_587000[8 * *(unsigned __int8 *)(a2 + 297) + 179884]);
      sub_49E4B0();
      nox_swprintf((wchar_t *)&byte_5D4594[1316540], (const wchar_t *)&byte_587000[179952], *(_DWORD *)(a2 + 128));
      sub_43F6E0(0, (__int16 *)&byte_5D4594[1316540], a2a.field_0, a2a.field_4 - 10);
      v12 = sub_44CEF0(*(_DWORD *)(a2 + 108));
      nox_swprintf((wchar_t *)&byte_5D4594[1316540], (const wchar_t *)&byte_587000[179960], v12);
      sub_43F6E0(0, (__int16 *)&byte_5D4594[1316540], a2a.field_0, a2a.field_4);
      nox_swprintf(
        (wchar_t *)&byte_5D4594[1316540],
        (const wchar_t *)&byte_587000[179968],
        *(_DWORD *)&byte_587000[4 * *(_DWORD *)(a2 + 276) + 178920]);
      sub_43F6E0(0, (__int16 *)&byte_5D4594[1316540], a2a.field_0, a2a.field_4 + 10);
    }
    else if ( v5 & 4 )
    {
      sub_4BD010(a2, &a2a, v2);
      sub_49F500(a2a.field_0, a2a.field_4);
      sub_49F570(
        *(_DWORD *)&byte_587000[8 * *(unsigned __int8 *)(a2 + 297) + 179880],
        *(_DWORD *)&byte_587000[8 * *(unsigned __int8 *)(a2 + 297) + 179884]);
      sub_49E4B0();
      nox_swprintf((wchar_t *)&byte_5D4594[1316540], (const wchar_t *)&byte_587000[179976], *(_DWORD *)(a2 + 128));
      sub_43F6E0(0, (__int16 *)&byte_5D4594[1316540], a2a.field_0, a2a.field_4 - 10);
      v13 = sub_44CEF0(*(_DWORD *)(a2 + 108));
      nox_swprintf((wchar_t *)&byte_5D4594[1316540], (const wchar_t *)&byte_587000[179984], v13);
      sub_43F6E0(0, (__int16 *)&byte_5D4594[1316540], a2a.field_0, a2a.field_4);
      nox_swprintf(
        (wchar_t *)&byte_5D4594[1316540],
        (const wchar_t *)&byte_587000[179992],
        *(_DWORD *)&byte_587000[4 * *(_DWORD *)(a2 + 276) + 178696]);
      sub_43F6E0(0, (__int16 *)&byte_5D4594[1316540], a2a.field_0, a2a.field_4 + 10);
    }
    else
    {
      sub_4BD010(a2, &a2a, v2);
    }
  }
  else
  {
    v20 = v4;
    v7 = sub_419A70(*(float *)(a2 + 100));
    v16 = *(float *)(a2 + 96);
    v8 = a2a.field_4 - v7;
    v19 = a2a.field_0;
    v9 = a2a.field_4 - sub_419A70(v16);
    v10 = 8 * *(unsigned __int8 *)(a2 + 299);
    v11 = *(_DWORD *)&byte_587000[v10 + 196184];
    v18 = *(_DWORD *)&byte_587000[v10 + 196188];
    sub_49F500(a2a.field_0, v9);
    sub_49F570(v11, v18);
    sub_49E4B0();
    sub_49F500(v20, v8);
    sub_49F570(v11, v18);
    sub_49E4B0();
    sub_49F500(a2a.field_0, v9);
    sub_49F500(v20, v8);
    sub_49E4B0();
    sub_49F500(a2a.field_0 + v11, v9 + v18);
    sub_49F500(v20 + v11, v8 + v18);
    sub_49E4B0();
  }
  nox_swprintf((wchar_t *)&byte_5D4594[1316540], (const wchar_t *)&byte_587000[180000], *(_DWORD *)(a2 + 128));
  sub_43F6E0(0, (__int16 *)&byte_5D4594[1316540], a2a.field_0, a2a.field_4 - 10);
  v14 = sub_44CEF0(*(_DWORD *)(a2 + 108));
  nox_swprintf((wchar_t *)&byte_5D4594[1316540], (const wchar_t *)&byte_587000[180008], v14);
  sub_43F6E0(0, (__int16 *)&byte_5D4594[1316540], a2a.field_0, a2a.field_4);
  return 1;
}

//----- (004BD010) --------------------------------------------------------
int __cdecl sub_4BD010(int a1, int2 *a2, int a3)
{
  int v3; // esi
  int result; // eax
  int2 *v5; // edi
  int v6; // eax
  int v7; // edx
  int v8; // eax
  int v9; // ebx
  int v10; // ebp
  int v11; // esi
  float v12; // [esp+0h] [ebp-24h]
  float v13; // [esp+0h] [ebp-24h]
  int v14; // [esp+4h] [ebp-20h]
  float v15; // [esp+4h] [ebp-20h]
  float v16; // [esp+4h] [ebp-20h]
  int2 v17; // [esp+14h] [ebp-10h]
  int2 v18; // [esp+1Ch] [ebp-8h]
  int v19; // [esp+28h] [ebp+4h]
  int2 *a2a; // [esp+2Ch] [ebp+8h]

  v3 = a1;
  if ( *(_DWORD *)(a1 + 44) == 2 )
  {
    v9 = (__int64)*(float *)(a1 + 48);
    v12 = *(float *)(a1 + 100) - (double)*(__int16 *)(a1 + 104);
    v10 = a2->field_4 - sub_419A70(v12);
    v19 = a2->field_4;
    v13 = *(float *)(v3 + 96) - (double)*(__int16 *)(v3 + 104);
    v11 = v19 - sub_419A70(v13);
    if ( v11 > 0 )
      sub_4C3270(a2->field_0, v19, v9, *(int *)&byte_5D4594[2650644]);
    sub_4C3270(a2->field_0, v11, v9, a3);
    sub_4C3270(a2->field_0, v10, v9, a3);
    sub_434460(a3);
    sub_49F500(a2->field_0 - v9, v11);
    sub_49F500(a2->field_0 - v9, v10);
    sub_49E4B0();
    sub_49F500(v9 + a2->field_0, v11);
    sub_49F500(v9 + a2->field_0, v10);
    result = sub_49E4B0();
  }
  else
  {
    result = *(_DWORD *)(a1 + 44) - 3;
    if ( *(_DWORD *)(a1 + 44) == 3 )
    {
      v5 = a2;
      v14 = *(__int16 *)(a1 + 104);
      v18.field_0 = a2->field_0;
      v15 = *(float *)(a1 + 100) - (double)v14;
      v6 = sub_419A70(v15);
      a2a = (int2 *)*(__int16 *)(a1 + 104);
      v7 = v5->field_4 - v6;
      v8 = v5->field_0;
      v18.field_4 = v7;
      v17.field_0 = v8;
      v16 = *(float *)(a1 + 96) - (double)(int)a2a;
      v17.field_4 = v5->field_4 - sub_419A70(v16);
      if ( v17.field_4 > 0 )
        sub_4CEA90((float *)(a1 + 64), v5, *(int *)&byte_5D4594[2650644]);
      sub_4CEA90((float *)(a1 + 64), &v17, a3);
      sub_4CEA90((float *)(a1 + 64), &v18, a3);
      sub_434460(a3);
      sub_49F500(
        v17.field_0 + (unsigned __int64)(__int64)*(float *)(a1 + 72),
        v17.field_4 + (unsigned __int64)(__int64)*(float *)(a1 + 76));
      sub_49F500(
        v18.field_0 + (unsigned __int64)(__int64)*(float *)(a1 + 72),
        v18.field_4 + (unsigned __int64)(__int64)*(float *)(a1 + 76));
      sub_49E4B0();
      sub_49F500(
        v17.field_0 + (unsigned __int64)(__int64)*(float *)(a1 + 80),
        v17.field_4 + (unsigned __int64)(__int64)*(float *)(a1 + 84));
      sub_49F500(
        v18.field_0 + (unsigned __int64)(__int64)*(float *)(a1 + 80),
        v18.field_4 + (unsigned __int64)(__int64)*(float *)(a1 + 84));
      sub_49E4B0();
      sub_49F500(
        v17.field_0 + (unsigned __int64)(__int64)*(float *)(a1 + 88),
        v17.field_4 + (unsigned __int64)(__int64)*(float *)(a1 + 92));
      sub_49F500(
        v18.field_0 + (unsigned __int64)(__int64)*(float *)(a1 + 88),
        v18.field_4 + (unsigned __int64)(__int64)*(float *)(a1 + 92));
      result = sub_49E4B0();
    }
  }
  return result;
}

//----- (004BD280) --------------------------------------------------------
_DWORD *__cdecl sub_4BD280(int a1, int a2)
{
  int v2; // esi
  _DWORD *result; // eax
  _DWORD *v4; // ecx
  int v5; // edi

  v2 = a2 + 4;
  result = malloc(a1 * (a2 + 4) + 4);
  if ( result )
  {
    v4 = result + 1;
    *result = result + 1;
    if ( a1 != 1 )
    {
      v5 = a1 - 1;
      do
      {
        --v5;
        *v4 = (char *)v4 + v2;
        v4 = (_DWORD *)((char *)v4 + v2);
      }
      while ( v5 );
    }
    *v4 = 0;
  }
  return result;
}

//----- (004BD2D0) --------------------------------------------------------
void __cdecl sub_4BD2D0(LPVOID lpMem)
{
  free(lpMem);
}

//----- (004BD2E0) --------------------------------------------------------
_DWORD *__cdecl sub_4BD2E0(_DWORD **a1)
{
  _DWORD *result; // eax
  _DWORD *v2; // edx

  result = *a1;
  if ( *a1 )
  {
    v2 = (_DWORD *)*result;
    ++result;
    *a1 = v2;
  }
  return result;
}

//----- (004BD300) --------------------------------------------------------
int __cdecl sub_4BD300(_DWORD *a1, int a2)
{
  int result; // eax

  result = a2 - 4;
  *(_DWORD *)(a2 - 4) = *a1;
  *a1 = a2 - 4;
  return result;
}

//----- (004BD320) --------------------------------------------------------
int __cdecl sub_4BD320(_DWORD **a1)
{
  int result; // eax
  _DWORD *i; // ecx

  result = 0;
  for ( i = *a1; i; ++result )
    i = (_DWORD *)*i;
  return result;
}

//----- (004BD340) --------------------------------------------------------
_DWORD *__cdecl sub_4BD340(int a1, int a2, int a3, int a4)
{
  _DWORD *v4; // esi

  v4 = malloc(0x1Cu);
  memset(v4, 0, 0x1Cu);
  *v4 = a1;
  v4[6] = a4;
  v4[1] = sub_4BD280(a2 / (a4 + 24), a4 + 24);
  v4[2] = sub_4BD280(a3, 84);
  sub_425760(v4 + 3);
  if ( v4[1] && v4[2] )
    return v4;
  sub_4BD3C0(v4);
  return 0;
}

//----- (004BD3C0) --------------------------------------------------------
void __cdecl sub_4BD3C0(LPVOID lpMem)
{
  int i; // eax

  for ( i = sub_425940((int *)lpMem + 3); i; i = sub_425940((int *)lpMem + 3) )
    sub_4BD690(i);
  if ( *((_DWORD *)lpMem + 1) )
    sub_4BD2D0(*((LPVOID *)lpMem + 1));
  if ( *((_DWORD *)lpMem + 2) )
    sub_4BD2D0(*((LPVOID *)lpMem + 2));
  free(lpMem);
}

//----- (004BD420) --------------------------------------------------------
_DWORD *__cdecl sub_4BD420(int a1, int a2)
{
  _DWORD *result; // eax

  result = *(_DWORD **)(a1 + 12);
  if ( result == (_DWORD *)(a1 + 12) )
    return 0;
  while ( result[4] != a2 || !result[5] )
  {
    result = (_DWORD *)*result;
    if ( result == (_DWORD *)(a1 + 12) )
      return 0;
  }
  return result;
}

//----- (004BD450) --------------------------------------------------------
_DWORD *__cdecl sub_4BD450(int a1)
{
  _DWORD *result; // eax

  for ( result = *(_DWORD **)(a1 + 12); result != (_DWORD *)(a1 + 12); result = (_DWORD *)*result )
    result[5] = 0;
  return result;
}

//----- (004BD470) --------------------------------------------------------
_DWORD *__cdecl sub_4BD470(_DWORD **a1, int a2)
{
  _DWORD *v2; // eax
  _DWORD *v3; // edi
  _DWORD *v5; // ebx
  _DWORD *v6; // eax
  _DWORD *v7; // ebp
  char *v8; // edi
  signed int v9; // eax
  _DWORD *v10; // [esp+18h] [ebp+8h]

  v2 = sub_4BD420((int)a1, a2);
  v3 = v2;
  if ( v2 )
  {
    sub_425920((_DWORD **)v2);
    sub_425900(a1 + 3, v3);
    return v3;
  }
  if ( sub_486B60((int)*a1, a2) )
  {
    v5 = sub_4BD2E0((_DWORD **)a1[2]);
    if ( !v5 )
    {
      sub_4BD600((int)a1);
      v5 = sub_4BD2E0((_DWORD **)a1[2]);
      if ( !v5 )
      {
        sub_486E00((int)*a1);
        return 0;
      }
    }
    v5[4] = a2;
    v5[13] = a1;
    sub_425770(v5);
    v5[3] = 0;
    sub_487C30(v5 + 6);
    nullsub_10(v5 + 14);
    v5[11] = v5 + 14;
    v6 = (_DWORD *)(*a1)[71];
    v10 = (_DWORD *)(*a1)[71];
    if ( !v6 )
    {
LABEL_19:
      sub_486AA0(*a1, v5[4], v5 + 14);
      sub_425900(a1 + 3, v5);
      v5[5] = 1;
      sub_486E00((int)*a1);
      return v5;
    }
    while ( 1 )
    {
      v7 = a1[6];
      if ( (int)v7 > (int)v6 )
        v7 = v6;
      v8 = (char *)sub_4BD2E0((_DWORD **)a1[1]);
      if ( !v8 )
        break;
LABEL_17:
      sub_487D30(v8, (int)(v8 + 24), (int)v7);
      sub_487C50((int)(v5 + 6), v8);
      v9 = sub_486DB0((int)*a1, v8 + 24, (signed int)v7);
      if ( (_DWORD *)v9 != v7 )
        goto LABEL_20;
      v10 = (_DWORD *)((char *)v10 - v9);
      if ( !v10 )
        goto LABEL_19;
      v6 = v10;
    }
    while ( sub_4BD600((int)a1) )
    {
      v8 = (char *)sub_4BD2E0((_DWORD **)a1[1]);
      if ( v8 )
        goto LABEL_17;
    }
LABEL_20:
    sub_4BD690((int)v5);
  }
  return 0;
}
// 487CF0: using guessed type void __cdecl nullsub_10(_DWORD);

//----- (004BD600) --------------------------------------------------------
int __cdecl sub_4BD600(int a1)
{
  int v1; // esi

  v1 = sub_425960(a1 + 12);
  if ( !v1 )
    return 0;
  while ( sub_4BD680(v1) )
  {
    v1 = sub_425960(v1);
    if ( !v1 )
      return 0;
  }
  sub_4BD690(v1);
  return 1;
}

//----- (004BD650) --------------------------------------------------------
int __cdecl sub_4BD650(int a1)
{
  int result; // eax

  result = a1;
  ++*(_DWORD *)(a1 + 12);
  return result;
}

//----- (004BD660) --------------------------------------------------------
int __cdecl sub_4BD660(int a1)
{
  int result; // eax

  result = *(_DWORD *)(a1 + 12) - 1;
  *(_DWORD *)(a1 + 12) = result;
  if ( result < 0 )
    *(_DWORD *)(a1 + 12) = 0;
  return result;
}

//----- (004BD680) --------------------------------------------------------
int __cdecl sub_4BD680(int a1)
{
  return *(_DWORD *)(a1 + 12);
}

//----- (004BD690) --------------------------------------------------------
int __cdecl sub_4BD690(int a1)
{
  _DWORD **i; // esi

  if ( *(_DWORD *)(a1 + 4) != a1 )
    sub_425920((_DWORD **)a1);
  for ( i = (_DWORD **)sub_425940((int *)(a1 + 32)); i; i = (_DWORD **)sub_425940((int *)(a1 + 32)) )
  {
    sub_425920(i);
    sub_487D60((int)i);
    sub_4BD300(*(_DWORD **)(*(_DWORD *)(a1 + 52) + 4), (int)i);
  }
  nullsub_9(a1 + 24);
  return sub_4BD300(*(_DWORD **)(*(_DWORD *)(a1 + 52) + 8), a1);
}
// 487CA0: using guessed type void __cdecl nullsub_9(_DWORD);

//----- (004BD700) --------------------------------------------------------
int __cdecl sub_4BD700(int a1)
{
  return *(int *)(a1 + 16);
}

//----- (004BD710) --------------------------------------------------------
int __cdecl sub_4BD710(int a1)
{
  return a1 + 24;
}

//----- (004BD720) --------------------------------------------------------
_DWORD *__cdecl sub_4BD720(int a1)
{
  _DWORD *v1; // esi

  v1 = malloc(0x138u);
  memset(v1, 0, 0x138u);
  sub_425770(v1);
  sub_4BDC00((int)(v1 + 30));
  sub_4864A0(v1 + 44);
  sub_4BD7C0(v1);
  v1[33] = a1;
  v1[43] = *(_DWORD *)(a1 + 256);
  if ( !(*(int (__cdecl **)(_DWORD *))(*(_DWORD *)(a1 + 256) + 4))(v1) )
    return v1;
  if ( v1 )
    sub_4BD7A0(v1);
  return 0;
}

//----- (004BD7A0) --------------------------------------------------------
void __cdecl sub_4BD7A0(LPVOID lpMem)
{
  (*(void (__cdecl **)(LPVOID))(*((_DWORD *)lpMem + 43) + 8))(lpMem);
  free(lpMem);
}

//----- (004BD7C0) --------------------------------------------------------
_DWORD *__cdecl sub_4BD7C0(_DWORD *a1)
{
  _DWORD *result; // eax

  a1[69] = sub_4BD8C0;
  a1[70] = sub_4BD940;
  a1[71] = sub_4BD9B0;
  a1[34] = 0;
  a1[35] = 0;
  a1[36] = 0;
  a1[38] = 0;
  a1[3] = 1;
  sub_4BDC00((int)(a1 + 30));
  a1[30] = 0;
  a1[29] = *(_DWORD *)&byte_5D4594[1193340];
  a1[28] = 0;
  result = sub_4864A0(a1 + 4);
  a1[72] = 0;
  return result;
}

//----- (004BD840) --------------------------------------------------------
int __cdecl sub_4BD840(int a3)
{
  int v1; // ebp
  unsigned int *v2; // edi
  _DWORD *v3; // esi
  int result; // eax

  v1 = *(_DWORD *)(a3 + 132);
  v2 = (unsigned int *)(a3 + 176);
  sub_4864A0((_DWORD *)(a3 + 176));
  sub_486570((unsigned int *)(a3 + 176), (_DWORD *)(a3 + 16));
  sub_486620((_DWORD *)(a3 + 16));
  if ( *(_DWORD *)(a3 + 112) )
  {
    sub_486570(v2, *(_DWORD **)(a3 + 112));
    sub_486620(*(_DWORD **)(a3 + 112));
  }
  v3 = *(_DWORD **)(a3 + 116);
  if ( v3 )
    sub_486570(v2, v3);
  sub_486570(v2, (_DWORD *)(v1 + 88));
  result = *(_DWORD *)(v1 + 184);
  if ( result )
    result = sub_486570(v2, *(_DWORD **)(v1 + 184));
  return result;
}

//----- (004BD8C0) --------------------------------------------------------
int __cdecl sub_4BD8C0(int a1)
{
  int (__cdecl *v1)(int); // eax
  int result; // eax
  int v3; // eax
  int v4; // eax

  v1 = *(int (__cdecl **)(int))(a1 + 136);
  if ( v1 )
  {
    result = v1(a1);
    if ( result )
    {
      *(_DWORD *)(a1 + 300) = 0;
      *(_DWORD *)(a1 + 304) = 0;
      *(_DWORD *)(a1 + 296) = 0;
      return result;
    }
  }
  else
  {
    if ( *(_DWORD *)(a1 + 292) )
    {
      v3 = sub_425940(*(int **)(a1 + 292));
      *(_DWORD *)(a1 + 292) = v3;
      if ( v3 )
      {
        *(_DWORD *)(a1 + 296) = *(_DWORD *)(v3 + 12);
        v4 = *(_DWORD *)(v3 + 16);
        *(_DWORD *)(a1 + 300) = v4;
        *(_DWORD *)(a1 + 304) = v4;
        return 0;
      }
    }
    *(_DWORD *)(a1 + 300) = 0;
  }
  return 0;
}

//----- (004BD940) --------------------------------------------------------
int __cdecl sub_4BD940(int a1)
{
  void (__cdecl *v1)(int); // eax

  if ( *(_DWORD *)(a1 + 128) )
  {
    if ( *(int *)(a1 + 128) != -1 )
      --*(_DWORD *)(a1 + 128);
    sub_4BDB90((_DWORD *)a1, *(_DWORD **)(a1 + 288));
  }
  else
  {
    sub_4BDB90((_DWORD *)a1, 0);
  }
  v1 = *(void (__cdecl **)(int))(a1 + 140);
  if ( v1 )
    v1(a1);
  if ( *(_DWORD *)(a1 + 288) )
    (*(void (__cdecl **)(int))(*(_DWORD *)(a1 + 172) + 36))(a1);
  return 0;
}

//----- (004BD9B0) --------------------------------------------------------
int __cdecl sub_4BD9B0(_DWORD *a2)
{
  int v1; // eax
  int (__cdecl *v2)(_DWORD *); // eax
  int result; // eax

  a2[72] = 0;
  v1 = a2[31];
  LOBYTE(v1) = v1 & 0xFA;
  a2[31] = v1;
  a2[32] = 0;
  sub_4864A0(a2 + 4);
  v2 = (int (__cdecl *)(_DWORD *))a2[36];
  if ( v2 )
    result = v2(a2);
  else
    result = 0;
  return result;
}

//----- (004BDA00) --------------------------------------------------------
int __cdecl sub_4BDA00(int a1)
{
  return *(_DWORD *)(a1 + 124) & 8;
}

//----- (004BDA10) --------------------------------------------------------
int (__cdecl *__cdecl sub_4BDA10(int a1, int a2))(int)
{
  *(_DWORD *)(a1 + 12) = a2;
  *(_DWORD *)(a1 + 124) |= 8u;
  return sub_4BDA80(a1);
}

//----- (004BDA30) --------------------------------------------------------
_DWORD *__cdecl sub_4BDA30(_DWORD *a1)
{
  _DWORD *result; // eax

  result = a1;
  if ( a1[31] & 8 )
  {
    a1[31] &= 0xFFFFFFF7;
    a1[3] = 1;
    result = sub_4BD7C0(a1);
  }
  return result;
}

//----- (004BDA60) --------------------------------------------------------
void __cdecl sub_4BDA60(LPVOID lpMem)
{
  sub_4BDA80((int)lpMem);
  sub_486E90((int)lpMem);
  sub_4BD7A0(lpMem);
}

//----- (004BDA80) --------------------------------------------------------
int (__cdecl *__cdecl sub_4BDA80(int a1))(int)
{
  int (__cdecl *result)(int); // eax

  if ( *(_BYTE *)(a1 + 124) & 5 )
    (*(void (__cdecl **)(int))(*(_DWORD *)(a1 + 172) + 16))(a1);
  result = *(int (__cdecl **)(int))(a1 + 148);
  if ( result )
    result = (int (__cdecl *)(int))result(a1);
  *(_DWORD *)(a1 + 288) = 0;
  return result;
}

//----- (004BDAC0) --------------------------------------------------------
void __cdecl sub_4BDAC0(int a1)
{
  int v1; // eax

  if ( *(_BYTE *)(a1 + 124) & 1 )
  {
    v1 = *(_DWORD *)(a1 + 124);
    LOBYTE(v1) = v1 & 0xFE;
    *(_DWORD *)(a1 + 124) = v1;
    (*(int (__cdecl **)(int))(*(_DWORD *)(a1 + 172) + 20))(a1);
    *(_DWORD *)(a1 + 124) |= 4u;
  }
}

//----- (004BDAF0) --------------------------------------------------------
void __cdecl sub_4BDAF0(int a1)
{
  if ( *(_BYTE *)(a1 + 124) & 4 )
  {
    (*(int (__cdecl **)(int))(*(_DWORD *)(a1 + 172) + 24))(a1);
    *(_DWORD *)(a1 + 124) &= 0xFFFFFFFB;
    *(_DWORD *)(a1 + 124) |= 1u;
  }
}

//----- (004BDB20) --------------------------------------------------------
int __cdecl sub_4BDB20(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)(a1 + 124) |= 0x10u;
  return result;
}

//----- (004BDB30) --------------------------------------------------------
int __cdecl sub_4BDB30(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)(a1 + 124) &= 0xFFFFFFEF;
  return result;
}

//----- (004BDB40) --------------------------------------------------------
int __cdecl sub_4BDB40(int a2)
{
  int result; // eax

  if ( *(_BYTE *)(a2 + 124) & 5 )
    return -2146500608;
  if ( !*(_DWORD *)(a2 + 288) )
    return -2147024896;
  sub_486520((unsigned int *)(a2 + 16));
  sub_4BD840(a2);
  result = (*(int (__cdecl **)(int))(*(_DWORD *)(a2 + 172) + 12))(a2);
  if ( !result )
    *(_DWORD *)(a2 + 124) |= 1u;
  return result;
}

//----- (004BDB90) --------------------------------------------------------
void __cdecl sub_4BDB90(_DWORD *a1, _DWORD *a2)
{
  int v2; // eax
  int v3; // eax
  _DWORD *v4; // eax
  int v5; // eax

  a1[72] = a2;
  if ( a2 )
  {
    v2 = sub_487C80((int)a2);
    a1[73] = v2;
    if ( v2 )
    {
      a1[74] = *(_DWORD *)(v2 + 12);
      v3 = *(_DWORD *)(v2 + 16);
      a1[75] = v3;
      a1[76] = v3;
      *a2 = 0;
    }
    else
    {
      v4 = (_DWORD *)a1[72];
      a1[74] = *v4;
      v5 = v4[1];
      a1[75] = v5;
      a1[76] = v5;
    }
  }
}

//----- (004BDC00) --------------------------------------------------------
int __cdecl sub_4BDC00(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)(a1 + 8) = 0;
  *(_DWORD *)(a1 + 4) = 0;
  return result;
}

//----- (004BDC10) --------------------------------------------------------
int __cdecl sub_4BDC10(int *a1)
{
  *(_DWORD *)&byte_5D4594[1316708] = sub_4A0AD0((const char *)&byte_587000[180032], sub_4BDDB0);
  sub_46B120(*(_DWORD **)&byte_5D4594[1316708], 0);
  sub_46C690(*(int *)&byte_5D4594[1316708]);
  sub_46A8C0(*(int *)&byte_5D4594[1316708]);
  sub_46B300(*(int *)&byte_5D4594[1316708], sub_4BDDA0);
  sub_46B500(*(int *)&byte_5D4594[1316708]);
  return sub_4BDC70(a1);
}

//----- (004BDC70) --------------------------------------------------------
int __cdecl sub_4BDC70(int *a1)
{
  _DWORD *v1; // eax
  _DWORD *v2; // eax
  _DWORD *v3; // eax

  if ( sub_40A5C0(1) )
  {
    v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316708], 10167);
    v1[9] |= 4u;
    *(_DWORD *)&byte_5D4594[1316704] = 0;
  }
  else
  {
    v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316708], 10164);
    v2[9] |= 4u;
    v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316708], 10167);
    sub_46ABB0((int)v3, 0);
    *(_DWORD *)&byte_5D4594[1316704] = 1;
  }
  sub_453F70(a1 + 6);
  sub_4535E0(a1 + 11);
  sub_4535F0(a1[12]);
  return sub_4BDD10();
}

//----- (004BDD10) --------------------------------------------------------
int sub_4BDD10()
{
  int v1; // eax
  char *v2; // eax

  switch ( *(_DWORD *)&byte_5D4594[1316704] )
  {
    case 0:
      v2 = sub_4165B0();
      v1 = sub_4CEBA0(*(int *)&byte_5D4594[1316708], v2);
      goto LABEL_6;
    case 1:
      *(_DWORD *)&byte_5D4594[1316712] = sub_453850(*(int *)&byte_5D4594[1316708]);
      return sub_46B500(*(int *)&byte_5D4594[1316712]);
    case 2:
      v1 = sub_4530C0(*(int *)&byte_5D4594[1316708], 0x1000000);
      goto LABEL_6;
    case 3:
      v1 = sub_4530C0(*(int *)&byte_5D4594[1316708], 0x2000000);
LABEL_6:
      *(_DWORD *)&byte_5D4594[1316712] = v1;
      break;
    default:
      return sub_46B500(*(int *)&byte_5D4594[1316712]);
  }
  return sub_46B500(*(int *)&byte_5D4594[1316712]);
}

//----- (004BDDA0) --------------------------------------------------------
int sub_4BDDA0()
{
  return 1;
}

//----- (004BDDB0) --------------------------------------------------------
int __cdecl sub_4BDDB0(int a1, int a2, int *a3, int a4)
{
  int v3; // esi
  int result; // eax
  char *v5; // ebx

  if ( a2 == 23 )
    return 1;
  if ( a2 != 16391 )
    return 1;
  v3 = sub_46B0A0(a3);
  sub_452D80(766, 100);
  switch ( v3 )
  {
    case 10148:
      v5 = sub_4165B0();
      qmemcpy(v5 + 24, sub_453F90(), 0x14u);
      *((_DWORD *)v5 + 11) = *(_DWORD *)sub_453600();
      *((_DWORD *)v5 + 12) = sub_453610();
      sub_4BDF30();
      return 1;
    case 10164:
      if ( *(_DWORD *)&byte_5D4594[1316712] )
      {
        sub_46C4E0(*(_DWORD **)&byte_5D4594[1316712]);
        *(_DWORD *)&byte_5D4594[1316712] = 0;
      }
      *(_DWORD *)&byte_5D4594[1316704] = 1;
      sub_4BDD10();
      result = 1;
      break;
    case 10165:
      if ( *(_DWORD *)&byte_5D4594[1316712] )
      {
        sub_46C4E0(*(_DWORD **)&byte_5D4594[1316712]);
        *(_DWORD *)&byte_5D4594[1316712] = 0;
      }
      *(_DWORD *)&byte_5D4594[1316704] = 2;
      sub_4BDD10();
      result = 1;
      break;
    case 10166:
      if ( *(_DWORD *)&byte_5D4594[1316712] )
      {
        sub_46C4E0(*(_DWORD **)&byte_5D4594[1316712]);
        *(_DWORD *)&byte_5D4594[1316712] = 0;
      }
      *(_DWORD *)&byte_5D4594[1316704] = 3;
      sub_4BDD10();
      result = 1;
      break;
    case 10167:
      if ( *(_DWORD *)&byte_5D4594[1316712] )
      {
        sub_46C4E0(*(_DWORD **)&byte_5D4594[1316712]);
        *(_DWORD *)&byte_5D4594[1316712] = 0;
      }
      *(_DWORD *)&byte_5D4594[1316704] = 0;
      sub_4BDD10();
      result = 1;
      break;
    default:
      return 1;
  }
  return result;
}

//----- (004BDF30) --------------------------------------------------------
int sub_4BDF30()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1316708];
  if ( *(_DWORD *)&byte_5D4594[1316708] )
  {
    sub_46C6E0(*(int *)&byte_5D4594[1316708]);
    sub_46C4E0(*(_DWORD **)&byte_5D4594[1316708]);
    *(_DWORD *)&byte_5D4594[1316708] = 0;
    *(_DWORD *)&byte_5D4594[1316712] = 0;
    result = sub_46B500(0);
  }
  return result;
}

//----- (004BDF70) --------------------------------------------------------
int (*__cdecl sub_4BDF70(int *a1))(void)
{
  int (*result)(void); // eax

  result = *(int (**)(void))&byte_5D4594[1316708];
  if ( *(_DWORD *)&byte_5D4594[1316708] )
    result = sub_4BDF90(a1);
  return result;
}

//----- (004BDF90) --------------------------------------------------------
int (*__cdecl sub_4BDF90(int *a1))(void)
{
  int (*result)(void); // eax

  sub_453F70(a1 + 6);
  sub_4535E0(a1 + 11);
  sub_4535F0(a1[12]);
  result = *(int (**)(void))&byte_587000[4 * *(_DWORD *)&byte_5D4594[1316704] + 180016];
  if ( result )
    result = (int (*)(void))result();
  return result;
}

//----- (004BDFD0) --------------------------------------------------------
int sub_4BDFD0()
{
  char *v0; // eax
  int v1; // esi
  int v2; // edi
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  int v5; // eax
  _DWORD *v6; // esi
  _DWORD *v7; // eax
  int v9; // [esp+8h] [ebp-8h]
  int v10; // [esp+Ch] [ebp-4h]

  v0 = sub_416640();
  v1 = *(_DWORD *)&byte_587000[26048];
  v2 = (int)v0;
  if ( sub_43F320(0) > 10 )
    v1 = 2;
  if ( sub_43AF70() == 1 )
    v3 = sub_4A0AD0(*(const char **)&byte_587000[4 * v1 + 180088], sub_4BE330);
  else
    v3 = sub_4A0AD0(*(const char **)&byte_587000[4 * v1 + 180048], sub_4BE330);
  *(_DWORD *)&byte_5D4594[1316972] = v3;
  sub_46B120(v3, 0);
  sub_46C690(*(int *)&byte_5D4594[1316972]);
  sub_46A8C0(*(int *)&byte_5D4594[1316972]);
  sub_46B500(*(int *)&byte_5D4594[1316972]);
  sub_46B300(*(int *)&byte_5D4594[1316972], sub_4BE320);
  v4 = sub_46B0C0(0, 10100);
  sub_46AA20((int)v4, &v10, &v9);
  if ( sub_43AF70() == 1 )
    v5 = v9 + 55;
  else
    v5 = v9 + 80;
  sub_46A9B0(*(_DWORD **)&byte_5D4594[1316972], v10 + 15, v5);
  v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2104);
  sub_46B280((int)v6, *(int *)&byte_5D4594[1316972]);
  sub_46B2C0((int)v6, sub_4BE330);
  if ( sub_43AF70() == 1 )
  {
    v7 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2119);
    sub_46B280((int)v7, *(int *)&byte_5D4594[1316972]);
  }
  return sub_4BE120(v2);
}

//----- (004BE120) --------------------------------------------------------
int __cdecl sub_4BE120(int a1)
{
  _DWORD *v1; // eax
  int v2; // ecx
  unsigned int v3; // ecx
  _DWORD *v4; // eax
  int v5; // ecx
  unsigned int v6; // ecx
  _DWORD *v7; // esi
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  _DWORD *v11; // eax
  _DWORD *v12; // eax
  int result; // eax
  _DWORD *v14; // eax
  int v15; // [esp-14h] [ebp-40h]
  wchar_t v16[16]; // [esp+Ch] [ebp-20h]

  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2102);
  v2 = v1[9];
  if ( *(_DWORD *)(a1 + 58) )
    v3 = v2 | 4;
  else
    v3 = v2 & 0xFFFFFFFB;
  v1[9] = v3;
  v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2103);
  v5 = v4[9];
  if ( *(_DWORD *)(a1 + 62) )
    v6 = v5 | 4;
  else
    v6 = v5 & 0xFFFFFFFB;
  v4[9] = v6;
  v7 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2110);
  nox_swprintf(v16, (const wchar_t *)&byte_587000[180392], *(_DWORD *)(a1 + 70));
  sub_46B490((int)v7, 16414, (int)v16, -1);
  switch ( *(_DWORD *)(a1 + 66) )
  {
    case 0:
      v8 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2110);
      sub_46ABB0((int)v8, 0);
      v15 = 2106;
      goto LABEL_12;
    case 1:
      v9 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2110);
      sub_46ABB0((int)v9, 0);
      v10 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2107);
      goto LABEL_13;
    case 2:
      v11 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2110);
      sub_46ABB0((int)v11, 0);
      v10 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2108);
      goto LABEL_13;
    case 3:
      v12 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2110);
      sub_46ABB0((int)v12, 1);
      v15 = 2109;
LABEL_12:
      v10 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], v15);
LABEL_13:
      v10[9] |= 4u;
      break;
    default:
      break;
  }
  result = sub_43AF70();
  if ( result == 1 )
  {
    v14 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2119);
    sub_46B490((int)v14, 16394, *(_DWORD *)(a1 + 74), 0);
    result = sub_4BE2C0(*(_DWORD *)(a1 + 74));
  }
  return result;
}

//----- (004BE2C0) --------------------------------------------------------
int __cdecl sub_4BE2C0(int a1)
{
  wchar_t *v1; // eax
  _DWORD *v2; // eax

  *(_DWORD *)(sub_416640() + 74) = a1;
  v1 = sub_40F1D0((char *)&byte_587000[180448], 0, (const char *)&byte_587000[180400], 71);
  nox_swprintf((wchar_t *)&byte_5D4594[1316716], v1, a1);
  v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2120);
  return sub_46B490((int)v2, 16385, (int)&byte_5D4594[1316716], -1);
}

//----- (004BE320) --------------------------------------------------------
int sub_4BE320()
{
  return 1;
}

//----- (004BE330) --------------------------------------------------------
int __cdecl sub_4BE330(int a1, unsigned int a2, int *a3, int a4)
{
  _DWORD *v4; // esi
  char *v5; // edi
  int result; // eax
  const wchar_t *v7; // eax
  int v8; // eax
  int v9; // esi
  char *v10; // eax
  char *v11; // eax
  char *v12; // esi
  _DWORD *v13; // eax
  char *v14; // esi
  _DWORD *v15; // eax
  char *v16; // esi
  _DWORD *v17; // eax
  char *v18; // esi
  _DWORD *v19; // eax
  char *v20; // edi
  const wchar_t *v21; // eax
  int v22; // esi

  if ( a2 > 0x4007 )
  {
    if ( a2 == 16393 )
    {
      sub_4BE2C0(a4);
      sub_501AC0(a4);
    }
    else if ( a2 == 16415 )
    {
      v20 = sub_416640();
      v21 = (const wchar_t *)sub_46B490((int)a3, 16413, 0, 0);
      if ( v21 )
      {
        if ( *v21 )
        {
          v22 = nox_wcstol(v21, 0, 10);
          if ( v22 < 0 )
            v22 = 0;
          if ( sub_46B0A0(a3) == 2110 )
          {
            *(_DWORD *)(v20 + 70) = v22;
            return 1;
          }
        }
      }
    }
    return 1;
  }
  if ( a2 != 16391 )
  {
    if ( a2 != 23 && a2 == 16387 )
    {
      v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], a4);
      v5 = sub_416640();
      if ( !v4 )
        return 0;
      if ( (unsigned __int16)a3 == 1 )
        return 0;
      v7 = (const wchar_t *)sub_46B490((int)v4, 16413, 0, 0);
      if ( v7 && *v7 )
      {
        v8 = nox_wcstol(v7, 0, 10);
        if ( v8 < 0 )
          v8 = 0;
        if ( a4 == 2110 )
        {
          *(_DWORD *)(v5 + 70) = v8;
          return 1;
        }
      }
    }
    return 1;
  }
  v9 = sub_46B0A0(a3);
  sub_452D80(766, 100);
  switch ( v9 )
  {
    case 2102:
      v10 = sub_416640();
      *(_DWORD *)(v10 + 58) ^= 1u;
      result = 1;
      break;
    case 2103:
      v11 = sub_416640();
      *(_DWORD *)(v11 + 62) ^= 1u;
      result = 1;
      break;
    case 2106:
      v12 = sub_416640();
      v13 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2110);
      sub_46ABB0((int)v13, 0);
      *(_DWORD *)(v12 + 66) = 0;
      sub_40A6A0(1);
      result = 1;
      break;
    case 2107:
      v14 = sub_416640();
      v15 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2110);
      sub_46ABB0((int)v15, 0);
      *(_DWORD *)(v14 + 66) = 1;
      sub_40A6A0(1);
      result = 1;
      break;
    case 2108:
      v16 = sub_416640();
      v17 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2110);
      sub_46ABB0((int)v17, 0);
      *(_DWORD *)(v16 + 66) = 2;
      sub_40A6A0(1);
      result = 1;
      break;
    case 2109:
      v18 = sub_416640();
      v19 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1316972], 2110);
      sub_46ABB0((int)v19, 1);
      *(_DWORD *)(v18 + 66) = 3;
      sub_40A6A0(1);
      result = 1;
      break;
    case 2130:
      sub_4BE610();
      result = 1;
      break;
    default:
      return 1;
  }
  return result;
}

//----- (004BE610) --------------------------------------------------------
int sub_4BE610()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1316972];
  if ( *(_DWORD *)&byte_5D4594[1316972] )
  {
    sub_46C6E0(*(int *)&byte_5D4594[1316972]);
    sub_46C4E0(*(_DWORD **)&byte_5D4594[1316972]);
    *(_DWORD *)&byte_5D4594[1316972] = 0;
    result = sub_46B500(0);
  }
  return result;
}

//----- (004BE640) --------------------------------------------------------
int __cdecl sub_4BE640(int a1, int a2)
{
  unsigned int v2; // ecx
  int result; // eax
  int v4; // esi
  signed int v5; // edi

  v2 = sub_430B40() + a2;
  if ( !a1 )
    return 0;
  v4 = *(_DWORD *)(a1 + 96);
  if ( *(_BYTE *)(v4 + 10) )
  {
    if ( *(_BYTE *)(v4 + 10) == 2 )
      result = *(_DWORD *)(*(_DWORD *)(v4 + 4)
                         + 4
                         * ((int)(v2 / ((unsigned int)*(unsigned __int8 *)(v4 + 9) + 1)) % *(unsigned __int8 *)(v4 + 8)));
    else
      result = 0;
  }
  else
  {
    v5 = (v2 - *(_DWORD *)(v4 + 12)) / ((unsigned int)*(unsigned __int8 *)(v4 + 9) + 1);
    if ( v5 >= *(unsigned __int8 *)(v4 + 8) - 1 )
    {
      v5 = *(unsigned __int8 *)(v4 + 8) - 1;
      if ( *(_DWORD *)v4 )
        (*(void (__cdecl **)(int))v4)(a1);
    }
    result = *(_DWORD *)(*(_DWORD *)(v4 + 4) + 4 * v5);
  }
  return result;
}

//----- (004BE6D0) --------------------------------------------------------
__int16 __cdecl sub_4BE6D0(int a1, int a2, int a3)
{
  int v3; // eax

  v3 = sub_4BE640(a1, 0);
  if ( v3 )
  {
    if ( *(_DWORD *)&byte_5D4594[3798728] )
      LOWORD(v3) = sub_48B3F0(v3, a2, a3);
    else
      LOWORD(v3) = sub_47D2C0(v3, a2, a3);
  }
  return v3;
}

//----- (004BE710) --------------------------------------------------------
__int16 __cdecl sub_4BE710(int a1, int a2, int a3, int a4)
{
  __int16 result; // ax
  int v5; // [esp-Ch] [ebp-Ch]

  v5 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a1 + 96) + 4) + 4 * a4);
  if ( *(_DWORD *)&byte_5D4594[3798728] )
    result = sub_48B3F0(v5, a2, a3);
  else
    result = sub_47D2C0(v5, a2, a3);
  return result;
}

//----- (004BE750) --------------------------------------------------------
__int16 __cdecl sub_4BE750(int a1, int a2, int a3)
{
  int v3; // eax
  int v4; // esi
  int v6; // [esp+4h] [ebp-4h]

  v3 = sub_4BE640(a1, 0);
  v4 = v3;
  if ( v3 )
  {
    sub_47D5C0(v3, 0, 0, &v6, &a1);
    LOWORD(v3) = sub_47D2C0(v4, a2 - v6 / 2, a3 - a1 / 2);
  }
  return v3;
}

//----- (004BE7B0) --------------------------------------------------------
int __cdecl sub_4BE7B0(int a1)
{
  int result; // eax

  if ( sub_477620() == 10 )
  {
    ++*(_DWORD *)&byte_5D4594[1316976];
    result = sub_4BE640(a1, *(int *)&byte_5D4594[1316976]);
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1316976] = 0;
    result = sub_4BE640(a1, 0);
  }
  return result;
}

//----- (004BE800) --------------------------------------------------------
int __cdecl sub_4BE800(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1316980] = a1;
  return result;
}

//----- (004BE810) --------------------------------------------------------
char __cdecl sub_4BE810(int a1, int a2, int a3, char a4)
{
  char result; // al

  *(_DWORD *)&byte_5D4594[1316988] = a1;
  result = a4;
  *(_DWORD *)&byte_5D4594[1316984] = a2;
  *(_DWORD *)&byte_5D4594[1316992] = a3;
  byte_5D4594[1316996] = a4;
  return result;
}

//----- (004BE840) --------------------------------------------------------
int __cdecl sub_4BE840(int *a1, int *a2, int *a3, int *a4, int a5)
{
  int v5; // eax
  double v6; // st7
  int *v7; // edx
  unsigned __int8 *v8; // ecx
  int v9; // esi
  int v10; // ebx
  int v11; // eax
  int v12; // edx
  int v13; // ebp
  unsigned __int8 *v14; // eax
  int v15; // ecx
  double v16; // st7
  double v17; // st7
  double v18; // st6
  double v19; // st5
  double v20; // st4
  double v21; // st3
  double v22; // st2
  double v23; // st1
  double v24; // st0
  int result; // eax
  int v26; // esi
  int v27; // edi
  int v28; // ecx
  bool v29; // zf
  int v30; // [esp+4h] [ebp-38h]
  int v31; // [esp+8h] [ebp-34h]
  int v32; // [esp+Ch] [ebp-30h]
  int v33; // [esp+14h] [ebp-28h]
  int v34; // [esp+18h] [ebp-24h]
  int v35[4];
  int v39[4];
  int v43; // [esp+40h] [ebp+4h]
  float v44; // [esp+40h] [ebp+4h]
  int v45; // [esp+44h] [ebp+8h]
  int v46; // [esp+48h] [ebp+Ch]
  float v47; // [esp+48h] [ebp+Ch]
  int v48; // [esp+4Ch] [ebp+10h]

  v31 = *a1;
  v34 = a1[1];
  v5 = a3[1];
  v30 = *a3;
  v6 = 1.0 / (double)a5;
  v46 = *a4;
  v7 = a2;
  v45 = a4[1];
  v48 = *v7;
  v33 = v7[1];
  v32 = v5;
  v8 = &byte_581450[9812];
  v43 = 0;
  do
  {
    v9 = *((_DWORD *)v8 - 1);
    v10 = v31;
    v11 = v32 * *((_DWORD *)v8 + 1) + v45 * *((_DWORD *)v8 + 2);
    v12 = v33 * *(_DWORD *)v8;
    v39[v43] = v31 * *((_DWORD *)v8 - 1)
                                    + v30 * *((_DWORD *)v8 + 1)
                                    + v48 * *(_DWORD *)v8
                                    + v46 * *((_DWORD *)v8 + 2);
    v13 = v34;
    v8 += 16;
    v35[v43] = v34 * v9 + v12 + v11;
    v43++;
  }
  while ( (int)v8 < (int)&byte_581450[9876] );
  *(float *)&byte_587000[180484] = v6;
  v14 = &byte_587000[180468];
  v15 = 0;
  *(float *)&byte_587000[180480] = v6 * v6;
  *(float *)&byte_587000[180476] = v6 * v6 * v6;
  *(float *)&byte_587000[180496] = *(float *)&byte_587000[180480] + *(float *)&byte_587000[180480];
  v16 = *(float *)&byte_587000[180476] * 6.0;
  *(float *)&byte_587000[180492] = v16;
  *(float *)&byte_587000[180508] = v16;
  v17 = (double)v39[3];
  v18 = (double)v39[2];
  v19 = (double)v39[1];
  v20 = (double)v39[0];
  v21 = (double)v35[3];
  v22 = (double)v35[2];
  v47 = (double)v35[1];
  v44 = (double)v35[0];
  do
  {
    v23 = v20 * *((float *)v14 - 2);
    v24 = v19 * *((float *)v14 - 1);
    v14 += 16;
    *(float *)((char *)&v35 + v15) = v23 + v24 + v18 * *((float *)v14 - 4) + v17 * *((float *)v14 - 3);
    *(float *)((char *)&v39 + v15) = v44 * *((float *)v14 - 6)
                                   + v47 * *((float *)v14 - 5)
                                   + v22 * *((float *)v14 - 4)
                                   + v21 * *((float *)v14 - 3);
    v15 += 4;
  }
  while ( (int)v14 < (int)&byte_587000[180532] );
  result = a5;
  if ( a5 > 0 )
  {
    do
    {
      *(float *)v35 = *(float *)v35 + *(float *)&v35[1];
      *(float *)&v35[1] = *(float *)&v35[2] + *(float *)&v35[1];
      *(float *)&v35[2] = *(float *)&v35[3] + *(float *)&v35[2];
      *(float *)v39 = *(float *)v39 + *(float *)&v39[1];
      *(float *)&v39[1] = *(float *)&v39[2] + *(float *)&v39[1];
      *(float *)&v39[2] = *(float *)&v39[3] + *(float *)&v39[2];
      v26 = sub_419A70(v35[0]);
      v27 = sub_419A70(v39[0]);
      sub_49F500(v10, v13);
      sub_49F500(v26, v27);
      sub_434460(*(int *)&byte_5D4594[1316980]);
      sub_49E4B0();
      if ( *(_DWORD *)&byte_5D4594[1316988] )
      {
        sub_49F500(v10, v13);
        sub_49F500(v26, v27);
        sub_434040(*(int *)&byte_5D4594[1316984]);
        sub_434080(*(int *)&byte_5D4594[1316992]);
        LOBYTE(v28) = byte_5D4594[1316996];
        sub_49E4F0(v28);
      }
      v10 = v26;
      result = a5 - 1;
      v29 = a5 == 1;
      v13 = v27;
      --a5;
    }
    while ( !v29 );
  }
  return result;
}
// 4BEAA0: variable 'v28' is possibly undefined

//----- (004BEAD0) --------------------------------------------------------
void __cdecl sub_4BEAD0(int2 *a1, int2 *a2, int2 *a3, int2 *a4, int a5, int a6)
{
  int v6; // eax
  double v7; // st7
  unsigned __int8 *v8; // ecx
  int v9; // edi
  int v10; // eax
  int v11; // esi
  int v12; // ebx
  int v13; // edi
  int v14; // edx
  int v15; // ebx
  unsigned __int8 *v16; // eax
  int v17; // ecx
  double v18; // st7
  double v19; // st7
  double v20; // st6
  double v21; // st5
  double v22; // st4
  double v23; // st3
  double v24; // st2
  double v25; // st1
  double v26; // st0
  int v27; // ebp
  int v28; // ebx
  int i; // eax
  int v30; // esi
  int v31; // ecx
  int v32; // eax
  bool v33; // zf
  int v34; // [esp+4h] [ebp-38h]
  int v35; // [esp+8h] [ebp-34h]
  int v36; // [esp+Ch] [ebp-30h]
  int v37; // [esp+10h] [ebp-2Ch]
  int v38; // [esp+14h] [ebp-28h]
  int v39; // [esp+18h] [ebp-24h]
  int v40[8]; // [esp+1Ch] [ebp-20h]
  int v41; // [esp+40h] [ebp+4h]
  int v42; // [esp+44h] [ebp+8h]
  float v43; // [esp+44h] [ebp+8h]
  int v44; // [esp+48h] [ebp+Ch]
  int v45; // [esp+4Ch] [ebp+10h]
  float v46; // [esp+4Ch] [ebp+10h]
  int v47; // [esp+4Ch] [ebp+10h]
  int v48; // [esp+50h] [ebp+14h]

  v36 = a1->field_0;
  v41 = a1->field_4;
  v6 = a4->field_4;
  v34 = a4->field_0;
  v7 = 1.0 / (double)a5;
  v35 = a2->field_0;
  v39 = a2->field_4;
  v42 = a3->field_0;
  v38 = a3->field_4;
  v44 = v6;
  v8 = &byte_581450[9876];
  v45 = 0;
  do
  {
    v9 = *((_DWORD *)v8 + 1);
    v10 = *((_DWORD *)v8 + 2);
    v37 = v9;
    v11 = v39 * *(_DWORD *)v8;
    v12 = v35 * *(_DWORD *)v8 + v34 * v10 + v42 * v9;
    v13 = v36;
    v14 = v41 * *((_DWORD *)v8 - 1);
    v15 = v36 * *((_DWORD *)v8 - 1) + v12;
    v8 += 16;
    v40[v45 + 4] = v15;
    ++v45;
    *(int *)((char *)&v39 + v45 * 4) = v14 + v11 + v38 * v37 + v44 * v10;
  }
  while ( (int)v8 < (int)&byte_581450[9940] );
  *(float *)&byte_587000[180484] = v7;
  v16 = &byte_587000[180468];
  v17 = 0;
  *(float *)&byte_587000[180480] = v7 * v7;
  *(float *)&byte_587000[180476] = v7 * v7 * v7;
  *(float *)&byte_587000[180496] = *(float *)&byte_587000[180480] + *(float *)&byte_587000[180480];
  v18 = *(float *)&byte_587000[180476] * 6.0;
  *(float *)&byte_587000[180492] = v18;
  *(float *)&byte_587000[180508] = v18;
  v19 = (double)v40[7];
  v20 = (double)v40[6];
  v21 = (double)v40[5];
  v22 = (double)v40[4];
  v23 = (double)v40[3];
  v24 = (double)v40[2];
  v43 = (double)v40[1];
  v46 = (double)v40[0];
  do
  {
    v25 = v22 * *((float *)v16 - 2);
    v26 = v21 * *((float *)v16 - 1);
    v16 += 16;
    ++v17;
    *(float *)((char *)&v39 + v17 * 4) = v25 + v26 + v20 * *((float *)v16 - 4) + v19 * *((float *)v16 - 3);
    *(float *)&v40[v17 + 3] = v46 * *((float *)v16 - 6)
                            + v43 * *((float *)v16 - 5)
                            + v24 * *((float *)v16 - 4)
                            + v23 * *((float *)v16 - 3);
  }
  while ( (int)v16 < (int)&byte_587000[180532] );
  if ( a5 > 0 )
  {
    v47 = a5;
    do
    {
      *(float *)v40 = *(float *)v40 + *(float *)&v40[1];
      *(float *)&v40[1] = *(float *)&v40[2] + *(float *)&v40[1];
      *(float *)&v40[2] = *(float *)&v40[3] + *(float *)&v40[2];
      *(float *)&v40[4] = *(float *)&v40[4] + *(float *)&v40[5];
      *(float *)&v40[5] = *(float *)&v40[6] + *(float *)&v40[5];
      *(float *)&v40[6] = *(float *)&v40[7] + *(float *)&v40[6];
      v27 = sub_419A70(*(float *)v40);
      v28 = sub_419A70(*(float *)&v40[4]);
      sub_49F500(v13, v41);
      sub_49F500(v27, v28);
      sub_434460(*(int *)&byte_5D4594[1316980]);
      sub_49E4B0();
      if ( a6 )
      {
        v48 = 0;
        for ( i = v13 - v28; ; i = v13 - v28 )
        {
          v30 = v48 != 0 ? 1 : -1;
          if ( i >= 0 )
            v31 = i;
          else
            v31 = v28 - v13;
          if ( i < 0 )
            i = v28 - v13;
          if ( v31 <= i )
          {
            sub_49F500(v30 + v27, v28);
            sub_49F500(v13 + v30, v41);
          }
          else
          {
            sub_49F500(v27, v30 + v28);
            sub_49F500(v13, v41 + v30);
          }
          sub_49E4B0();
          if ( ++v48 >= 2 )
            break;
        }
      }
      if ( *(_DWORD *)&byte_5D4594[1316988] )
      {
        sub_49F500(v13, v41);
        sub_49F500(v27, v28);
        sub_434040(*(int *)&byte_5D4594[1316984]);
        v32 = sub_434080(*(int *)&byte_5D4594[1316992]);
        LOBYTE(v32) = byte_5D4594[1316996];
        sub_49E4F0(v32);
      }
      v13 = v27;
      v33 = v47 == 1;
      v41 = v28;
      --v47;
    }
    while ( !v33 );
  }
}

//----- (004BEDE0) --------------------------------------------------------
void __cdecl sub_4BEDE0(int2 *a1, int2 *a2, int2 *a3, int2 *a4, int a5, float a6, int a7, int a8)
{
  int v8; // ecx
  double v9; // st7
  unsigned __int8 *v10; // ecx
  int v11; // esi
  int v12; // eax
  int v13; // ebx
  int v14; // eax
  int v15; // esi
  double v16; // st6
  double v17; // st7
  double v18; // st7
  float v19; // [esp+0h] [ebp-54h]
  float v20; // [esp+0h] [ebp-54h]
  float v21; // [esp+10h] [ebp-44h]
  float v22; // [esp+10h] [ebp-44h]
  int v23; // [esp+14h] [ebp-40h]
  float v24; // [esp+14h] [ebp-40h]
  int v25; // [esp+18h] [ebp-3Ch]
  float v26; // [esp+18h] [ebp-3Ch]
  int v27; // [esp+1Ch] [ebp-38h]
  float v28; // [esp+1Ch] [ebp-38h]
  int v29; // [esp+20h] [ebp-34h]
  float v30; // [esp+20h] [ebp-34h]
  int v31; // [esp+24h] [ebp-30h]
  float v32; // [esp+24h] [ebp-30h]
  int v33; // [esp+28h] [ebp-2Ch]
  float v34; // [esp+28h] [ebp-2Ch]
  int2 v35[5]; // [esp+2Ch] [ebp-28h]
  int2 *v36; // [esp+58h] [ebp+4h]
  float v37; // [esp+58h] [ebp+4h]
  int2 *v38; // [esp+5Ch] [ebp+8h]
  float v39; // [esp+5Ch] [ebp+8h]
  int v40; // [esp+60h] [ebp+Ch]
  float v41; // [esp+60h] [ebp+Ch]
  int v42; // [esp+64h] [ebp+10h]
  float v43; // [esp+64h] [ebp+10h]
  float v44; // [esp+68h] [ebp+14h]
  float v45; // [esp+6Ch] [ebp+18h]

  v8 = a1->field_0;
  v33 = a1->field_4;
  v35[2].field_4 = a1->field_4;
  v25 = v8;
  v35[2].field_0 = v8;
  v27 = a2->field_0;
  v9 = 1.0 / (double)a5;
  v23 = a3->field_0;
  v29 = a3->field_4;
  v21 = 0.0;
  v40 = a4->field_0;
  v31 = a2->field_4;
  v42 = a4->field_4;
  v10 = &byte_581450[9876];
  v38 = 0;
  do
  {
    v11 = *((_DWORD *)v10 + 1);
    v12 = *((_DWORD *)v10 + 2);
    v36 = (int2 *)*((_DWORD *)v10 - 1);
    v13 = v27 * *(_DWORD *)v10 + v25 * (_DWORD)v36 + v23 * v11 + v40 * v12;
    v14 = v33 * (_DWORD)v36 + v31 * *(_DWORD *)v10 + v29 * v11 + v42 * v12;
    v10 += 16;
    *(int *)((char *)&v35[0].field_0 + (_DWORD)v38) = v13;
    *(int *)((char *)&v35[3].field_0 + (_DWORD)v38) = v14;
    v38 = (int2 *)((char *)v38 + 4);
  }
  while ( (int)v10 < (int)&byte_581450[9940] );
  v15 = a5;
  if ( a5 > 0 )
  {
    v16 = v9 * a6;
    v41 = v16 + v9;
    v45 = (double)v35[0].field_0;
    v43 = (double)v35[0].field_4;
    v34 = (double)v35[1].field_0;
    v32 = (double)v35[1].field_4;
    v28 = (double)v35[3].field_0;
    v30 = (double)v35[3].field_4;
    v26 = (double)v35[4].field_0;
    v24 = (double)v35[4].field_4;
    do
    {
      v17 = v41 + v21;
      v22 = v17;
      if ( v17 > 1.0 )
        v22 = 1.0;
      v18 = v22 * v22;
      v44 = v18;
      v37 = v18 * v22;
      v19 = v43 * v44 + v45 * v37 + v34 * v22 + v32;
      v35[0].field_0 = sub_419A70(v19);
      v20 = v30 * v44 + v28 * v37 + v26 * v22 + v24;
      v35[0].field_4 = sub_419A70(v20);
      v39 = v16;
      v21 = v22 - v39;
      ((void (__cdecl *)(int2 *, int2 *, int))a7)(&v35[2], v35, a8);
      --v15;
      v35[2].field_0 = v35[0].field_0;
      v35[2].field_4 = v35[0].field_4;
    }
    while ( v15 );
  }
}

//----- (004BF000) --------------------------------------------------------
void sub_4BF000()
{
  srand(0x15EA1u);
}

//----- (004BF010) --------------------------------------------------------
int __cdecl sub_4BF010(int a1)
{
  int v1; // ecx
  char v3[3]; // [esp+0h] [ebp-4h]
  char v4; // [esp+3h] [ebp-1h]

  v4 = HIBYTE(v1);
  v3[0] = -32;
  *(_WORD *)&v3[1] = sub_578B00(a1);
  return sub_4E53C0(31, v3, 3, 0, 1);
}

//----- (004BF040) --------------------------------------------------------
void sub_4BF040()
{
  srand(0x15EABu);
}

//----- (004BF050) --------------------------------------------------------
wchar_t *__cdecl sub_4BF050(wchar_t *a1)
{
  int *v1; // esi
  int v2; // eax
  const wchar_t *v3; // ebx
  _DWORD *v4; // eax
  wchar_t *v5; // eax
  wchar_t *result; // eax
  int v7; // edx
  int v8; // ecx
  const wchar_t *v9; // ecx
  int v10; // ecx
  wchar_t *v11; // ecx
  const wchar_t *v12; // edi
  int v13; // eax
  wchar_t *v14; // eax
  int v15; // esi
  wchar_t *v16; // esi
  wchar_t *v17; // esi
  int v18; // eax
  int v19; // eax
  const wchar_t *v20; // eax
  wchar_t *v21; // eax
  wchar_t *v22; // eax
  const wchar_t *v23; // eax
  int v24; // eax
  int v25; // eax
  wchar_t *v26; // eax
  wchar_t *v27; // eax
  const wchar_t *v28; // eax
  int v29; // eax
  const wchar_t *v30; // eax
  wchar_t *v31; // eax
  const wchar_t *v32; // eax
  int v33; // [esp-4h] [ebp-18h]
  wchar_t *v34; // [esp+Ch] [ebp-8h]
  wchar_t *v35; // [esp+10h] [ebp-4h]

  *(_WORD *)&byte_5D4594[1317000] = 0;
  nox_wcscpy((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_5D4594[1319048]);
  v1 = (int *)a1;
  if ( !a1 )
    return (wchar_t *)&byte_5D4594[1317000];
  v2 = *((_DWORD *)a1 + 28);
  if ( !(v2 & 0x13001000) )
  {
    if ( !(v2 & 0x100) )
    {
      result = (wchar_t *)sub_44CF30(*((_DWORD *)a1 + 27));
      if ( result )
        return result;
      return (wchar_t *)&byte_5D4594[1317000];
    }
    v18 = *((_DWORD *)a1 + 29);
    LOBYTE(a1) = -13;
    if ( v18 & 1 )
    {
      v19 = v1[108];
      if ( !v19 )
      {
        LOBYTE(a1) = -30;
        *(_WORD *)((char *)&a1 + 1) = sub_578B00((int)v1);
        HIBYTE(a1) = 1;
        v1[108] = 137;
        goto LABEL_93;
      }
      if ( v19 != 137 )
      {
        if ( *(_DWORD *)&byte_587000[26048] != 6 )
        {
          v22 = sub_40F1D0((char *)&byte_587000[180736], 0, (const char *)&byte_587000[180700], 292);
          nox_swprintf((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180744], v22);
          v23 = (const wchar_t *)sub_424930(v1[108]);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v23);
          goto LABEL_93;
        }
        v20 = (const wchar_t *)sub_424930(v1[108]);
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v20);
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180652]);
        v21 = sub_40F1D0((char *)&byte_587000[180692], 0, (const char *)&byte_587000[180656], 288);
        goto LABEL_90;
      }
      return (wchar_t *)&byte_5D4594[1317000];
    }
    if ( v18 & 2 )
    {
      v24 = v1[108];
      if ( !v24 )
      {
        LOBYTE(a1) = -30;
        *(_WORD *)((char *)&a1 + 1) = sub_578B00((int)v1);
        HIBYTE(a1) = 2;
        v1[108] = 41;
        goto LABEL_93;
      }
      if ( v24 == 41 )
        return (wchar_t *)&byte_5D4594[1317000];
      if ( *(_DWORD *)&byte_587000[26048] == 3 || *(_DWORD *)&byte_587000[26048] == 5 )
      {
        v27 = sub_40F1D0((char *)&byte_587000[180788], 0, (const char *)&byte_587000[180752], 313);
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v27);
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180800]);
        v28 = (const wchar_t *)sub_427240(v1[108]);
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v28);
      }
      else
      {
        v25 = sub_427240(v1[108]);
        nox_swprintf((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180804], v25);
        v26 = sub_40F1D0((char *)&byte_587000[180848], 0, (const char *)&byte_587000[180812], 320);
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v26);
      }
    }
    else if ( v18 & 4 )
    {
      v29 = v1[108];
      if ( !v29 )
      {
        LOBYTE(a1) = -30;
        *(_WORD *)((char *)&a1 + 1) = sub_578B00((int)v1);
        HIBYTE(a1) = 4;
        v1[108] = 6;
        goto LABEL_93;
      }
      if ( v29 == 6 )
        return (wchar_t *)&byte_5D4594[1317000];
      if ( *(_DWORD *)&byte_587000[26048] == 6 )
      {
        v30 = (const wchar_t *)sub_425260(v1[108]);
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v30);
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180860]);
        v21 = sub_40F1D0((char *)&byte_587000[180900], 0, (const char *)&byte_587000[180864], 342);
LABEL_90:
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v21);
        goto LABEL_93;
      }
      v31 = sub_40F1D0((char *)&byte_587000[180944], 0, (const char *)&byte_587000[180908], 346);
      nox_swprintf((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180952], v31);
      v32 = (const wchar_t *)sub_425260(v1[108]);
      nox_wcscat((wchar_t *)&byte_5D4594[1317000], v32);
    }
    else
    {
      result = (wchar_t *)sub_44CF30(v1[27]);
      if ( result )
        return result;
    }
LABEL_93:
    if ( (_BYTE)a1 != (_BYTE)-13 )
    {
      sub_4E53C0(31, &a1, 4, 0, 1);
      return (wchar_t *)&byte_5D4594[1317000];
    }
    return (wchar_t *)&byte_5D4594[1317000];
  }
  v3 = 0;
  v34 = 0;
  v35 = 0;
  a1 = 0;
  if ( v2 & 0x11001000 )
    v4 = sub_413250(v1[27]);
  else
    v4 = sub_413270(v1[27]);
  if ( v4 )
  {
    v7 = v1[28] & 0x1000000;
    if ( !v7 || v7 == 0x1000000 && !(v1[29] & 0x7800000) )
    {
      v8 = v1[108];
      if ( v8 )
      {
        v9 = *(const wchar_t **)(v8 + 8);
        if ( v9 )
          v3 = v9;
      }
      v10 = v1[109];
      if ( v10 )
      {
        v11 = *(wchar_t **)(v10 + 8);
        if ( v11 )
          v34 = v11;
      }
    }
    v12 = (const wchar_t *)v4[2];
    if ( !v7 || !(v1[29] & 0x7800000) )
    {
      v13 = v1[110];
      if ( v13 )
      {
        v14 = *(wchar_t **)(v13 + 8);
        if ( v14 )
          v35 = v14;
      }
      v15 = v1[111];
      if ( v15 )
      {
        v16 = *(wchar_t **)(v15 + 12);
        if ( v16 )
          a1 = v16;
      }
    }
    switch ( *(_DWORD *)&byte_587000[26048] )
    {
      case 2:
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v12);
        if ( v35 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180588]);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v35);
        }
        v17 = a1;
        if ( a1 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180592]);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v17);
        }
        if ( v34 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v34);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180596]);
        }
        if ( !v3 )
          return (wchar_t *)&byte_5D4594[1317000];
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180600]);
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v3);
        result = (wchar_t *)&byte_5D4594[1317000];
        break;
      case 3:
        if ( v3 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v3);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180604]);
        }
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v12);
        if ( v34 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180608]);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v34);
        }
        if ( v35 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180612]);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v35);
        }
        if ( !a1 )
          return (wchar_t *)&byte_5D4594[1317000];
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180616]);
        goto LABEL_67;
      case 5:
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v12);
        if ( v34 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180620]);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v34);
        }
        if ( v3 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180624]);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v3);
        }
        if ( v35 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180628]);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v35);
        }
        if ( !a1 )
          return (wchar_t *)&byte_5D4594[1317000];
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180632]);
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], a1);
        result = (wchar_t *)&byte_5D4594[1317000];
        break;
      case 6:
        if ( v3 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v3);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180572]);
        }
        if ( v35 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v35);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180576]);
        }
        if ( a1 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], a1);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180580]);
        }
        if ( v34 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180584]);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v34);
        }
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v12);
        result = (wchar_t *)&byte_5D4594[1317000];
        break;
      default:
        if ( v3 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v3);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180636]);
        }
        if ( v34 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v34);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180640]);
        }
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], v12);
        if ( v35 )
        {
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180644]);
          nox_wcscat((wchar_t *)&byte_5D4594[1317000], v35);
        }
        if ( !a1 )
          return (wchar_t *)&byte_5D4594[1317000];
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], (const wchar_t *)&byte_587000[180648]);
LABEL_67:
        nox_wcscat((wchar_t *)&byte_5D4594[1317000], a1);
        result = (wchar_t *)&byte_5D4594[1317000];
        break;
    }
  }
  else
  {
    v33 = sub_44CEF0(v1[27]);
    v5 = sub_40F1D0((char *)&byte_587000[180560], 0, (const char *)&byte_587000[180524], 53);
    nox_swprintf((wchar_t *)&byte_5D4594[1317000], v5, v33);
    result = (wchar_t *)&byte_5D4594[1317000];
  }
  return result;
}

//----- (004BF7E0) --------------------------------------------------------
__int16 __cdecl sub_4BF7E0(_DWORD *a1)
{
  int v1; // esi
  int v2; // ebp
  int v3; // eax
  int v4; // edi
  int v5; // ebx
  int v6; // eax
  int v7; // eax
  int v8; // ebx
  int v9; // eax
  int v10; // ebx
  int v11; // eax
  int v13; // [esp+10h] [ebp-4h]
  unsigned __int8 *v14; // [esp+18h] [ebp+4h]
  unsigned __int8 *v15; // [esp+18h] [ebp+4h]

  v1 = a1[1] + 15;
  v2 = *a1 + 11;
  v13 = a1[1] + 15;
  sub_434460(*(int *)&byte_5D4594[2650656]);
  sub_49CE30(v2, v1, 200, 200);
  LOWORD(v3) = *(_WORD *)&byte_5D4594[2614252];
  if ( *(_DWORD *)&byte_5D4594[2614252] )
  {
    v4 = *(_DWORD *)&byte_5D4594[2618908];
    if ( *(_DWORD *)&byte_5D4594[2618908] )
    {
      sub_4341D0(1, *(_DWORD *)(*(_DWORD *)&byte_5D4594[2618908] + 2296));
      sub_4341D0(2, *(_DWORD *)(v4 + 2304));
      sub_4341D0(3, *(_DWORD *)(v4 + 2312));
      sub_4341D0(4, *(_DWORD *)(v4 + 2308));
      sub_4341D0(5, *(_DWORD *)(v4 + 2300));
      sub_4341D0(6, *(_DWORD *)(v4 + 2292));
      if ( *(_DWORD *)(v4 + 2292) == *(_DWORD *)(v4 + 2296) )
        sub_47D2C0(*(_DWORD *)&byte_5D4594[4 * *(unsigned __int8 *)(v4 + 2252) + 3798180], v2, v1);
      else
        sub_47D2C0(*(_DWORD *)&byte_5D4594[4 * *(unsigned __int8 *)(v4 + 2252) + 3798172], v2, v1);
      v5 = 0;
      v14 = &byte_5D4594[104 * *(unsigned __int8 *)(v4 + 2252) + 3798188];
      do
      {
        if ( *(_DWORD *)v4 & (1 << v5) && !((1 << v5) & 0x3000000) )
        {
          v6 = sub_415CD0((char *)(1 << v5));
          sub_4BF9F0(1 << v5, v6, v2, v13, (int)v14, v5, 0);
        }
        ++v5;
      }
      while ( v5 < 26 );
      if ( *(_BYTE *)v4 & 2 )
      {
        v7 = sub_415CD0((char *)2);
        sub_4BF9F0(2, v7, v2, v13, (int)v14, 0, 1);
      }
      v8 = 0;
      do
      {
        if ( *(_DWORD *)v4 & (1 << v8) && (1 << v8) & 0x3000000 )
        {
          v9 = sub_415CD0((char *)(1 << v8));
          sub_4BF9F0(1 << v8, v9, v2, v13, (int)v14, v8, 0);
        }
        ++v8;
      }
      while ( v8 < 26 );
      v10 = 0;
      v15 = &byte_5D4594[108 * *(unsigned __int8 *)(v4 + 2252) + 3798412];
      do
      {
        v3 = *(_DWORD *)(v4 + 4);
        if ( v3 & (1 << v10) )
        {
          v11 = sub_415840((char *)(1 << v10));
          LOWORD(v3) = sub_4BF9F0(1 << v10, v11, v2, v13, (int)v15, v10, 0);
        }
        ++v10;
      }
      while ( v10 < 27 );
    }
  }
  return v3;
}

//----- (004BF9F0) --------------------------------------------------------
__int16 __cdecl sub_4BF9F0(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax
  int v8; // esi
  _DWORD *v9; // eax
  int v10; // edx
  int v11; // ecx
  _DWORD *v12; // ebx
  int v13; // ebp
  int v14; // edi
  _BYTE *v15; // esi
  int *v16; // edi
  _BYTE **v17; // esi
  int v18; // ebx
  _BYTE *v19; // eax

  v7 = sub_461600(a2);
  v8 = v7;
  if ( v7 )
  {
    if ( *(_DWORD *)(v7 + 112) & 0x2000000 )
      v9 = sub_413270(*(_DWORD *)(v7 + 108));
    else
      v9 = sub_413250(*(_DWORD *)(v7 + 108));
    v12 = v9;
    if ( v9 )
    {
      v13 = v8 + 432;
      v14 = 1;
      v15 = v9 + 4;
      do
      {
        LOBYTE(v9) = v15[1];
        LOBYTE(v11) = *v15;
        LOBYTE(v10) = *(v15 - 1);
        sub_4340A0(v14++, v10, v11, (int)v9);
        v15 += 3;
      }
      while ( v14 < 7 );
      v16 = v12 + 9;
      v17 = (_BYTE **)v13;
      v18 = 4;
      do
      {
        v19 = *v17;
        if ( *v17 )
        {
          LOBYTE(v11) = v19[26];
          LOBYTE(v10) = v19[25];
          LOBYTE(v19) = v19[24];
          sub_4340A0(*v16, (int)v19, v10, v11);
        }
        ++v17;
        ++v16;
        --v18;
      }
      while ( v18 );
    }
    if ( a7 )
      LOWORD(v7) = sub_47D2C0(*(int *)&byte_5D4594[1319052], a3, a4);
    else
      LOWORD(v7) = sub_47D2C0(*(_DWORD *)(a5 + 4 * a6), a3, a4);
  }
  return v7;
}
// 4BFA4C: variable 'v10' is possibly undefined
// 4BFA4C: variable 'v11' is possibly undefined

//----- (004BFAD0) --------------------------------------------------------
int sub_4BFAD0()
{
  int v0; // esi
  int v1; // ebx
  int i; // edi
  char *v3; // eax
  const char *v4; // ecx
  int v5; // ebp
  int v6; // ebp

  v0 = 0;
  v1 = 0;
  for ( i = 0; i < 8; i += 4 )
  {
    v3 = sub_42F970(*(const char **)&byte_587000[i + 180960]);
    v4 = *(const char **)&byte_587000[i + 180968];
    *(_DWORD *)&byte_5D4594[i + 3798172] = v3;
    *(_DWORD *)&byte_5D4594[i + 3798180] = sub_42F970(v4);
    v5 = 26;
    do
    {
      *(_DWORD *)&byte_5D4594[v1 + 3798188] = sub_42F970(*(const char **)&byte_587000[v1 + 180976]);
      v1 += 4;
      --v5;
    }
    while ( v5 );
    v6 = 27;
    do
    {
      *(_DWORD *)&byte_5D4594[v0 + 3798412] = sub_42F970(*(const char **)&byte_587000[v0 + 181184]);
      v0 += 4;
      --v6;
    }
    while ( v6 );
  }
  *(_DWORD *)&byte_5D4594[1319052] = sub_42F970((const char *)&byte_587000[183420]);
  return 1;
}

//----- (004BFB70) --------------------------------------------------------
_DWORD *__cdecl sub_4BFB70(int a1)
{
  _DWORD *result; // eax

  result = *(_DWORD **)&byte_5D4594[1319056];
  if ( *(_DWORD *)&byte_5D4594[1319056] )
  {
    result = (_DWORD *)a1;
    *(_DWORD *)&byte_5D4594[1319056] = a1;
  }
  else
  {
    if ( a1 == 1 )
      result = sub_452D80(1022, 100);
    *(_DWORD *)&byte_5D4594[1319056] = a1;
  }
  return result;
}

//----- (004BFBB0) --------------------------------------------------------
_DWORD *__cdecl sub_4BFBB0(_DWORD *a1)
{
  _DWORD *result; // eax

  result = *(_DWORD **)&byte_5D4594[1319056];
  if ( *(_DWORD *)&byte_5D4594[1319056] )
  {
    if ( *(_DWORD *)&byte_5D4594[1319056] == 1 )
    {
      result = a1;
      if ( !a1 )
      {
        sub_4BFC70();
        result = sub_4BFB70(0);
      }
    }
  }
  else if ( a1 == (_DWORD *)1 )
  {
    sub_4BFBF0();
    result = sub_4BFB70(1);
  }
  return result;
}

//----- (004BFBF0) --------------------------------------------------------
int sub_4BFBF0()
{
  int result; // eax
  int v1; // [esp+0h] [ebp-8h]
  int v2; // [esp+4h] [ebp-4h]

  result = *(_DWORD *)&byte_5D4594[1319060];
  if ( *(_DWORD *)&byte_5D4594[1319060] )
  {
    sub_46AC00(*(int *)&byte_5D4594[1319060], 0);
    sub_46ABB0(*(int *)&byte_5D4594[1319060], 1);
    sub_46AB70(*(int *)&byte_5D4594[1319060], &v2, &v1);
    sub_46A9B0(
      *(_DWORD **)&byte_5D4594[1319060],
      *(_DWORD *)&byte_5D4594[3805496] / 2 - v2 / 2,
      *(_DWORD *)&byte_5D4594[3807120] / 2 - v1 / 2);
    result = sub_46B500(0);
  }
  return result;
}

//----- (004BFC70) --------------------------------------------------------
int sub_4BFC70()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1319060];
  if ( *(_DWORD *)&byte_5D4594[1319060] )
  {
    sub_46AC00(*(int *)&byte_5D4594[1319060], 1);
    result = sub_46B500(0);
  }
  return result;
}

//----- (004BFC90) --------------------------------------------------------
int sub_4BFC90()
{
  int result; // eax

  result = sub_4A0AD0((const char *)&byte_587000[183444], sub_4BFCD0);
  *(_DWORD *)&byte_5D4594[1319060] = result;
  if ( result )
  {
    sub_4BFB70(0);
    sub_4BFC70();
    result = 1;
  }
  return result;
}

//----- (004BFCD0) --------------------------------------------------------
int __cdecl sub_4BFCD0(int a1, int a2, int *a3, int a4)
{
  int v3; // esi

  if ( a2 == 16391 )
  {
    v3 = sub_46B0A0(a3);
    sub_452D80(766, 100);
    if ( v3 == 10803 )
      sub_4BFC70();
  }
  return 0;
}

//----- (004BFD10) --------------------------------------------------------
_DWORD *sub_4BFD10()
{
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1319060]);
  *(_DWORD *)&byte_5D4594[1319060] = 0;
  return sub_4BFB70(0);
}

//----- (004BFD30) --------------------------------------------------------
int sub_4BFD30()
{
  return *(_DWORD *)&byte_5D4594[1319056];
}

//----- (004BFD40) --------------------------------------------------------
int sub_4BFD40()
{
  int result; // eax

  if ( *(_DWORD *)&byte_5D4594[1319268] == 1 )
  {
    sub_46AC00(*(int *)&byte_5D4594[1319228], 1);
    sub_46ABB0(*(int *)&byte_5D4594[1319228], 0);
    sub_46C6E0(*(int *)&byte_5D4594[1319228]);
    result = *(_DWORD *)&byte_5D4594[1319256];
    if ( *(_DWORD *)&byte_5D4594[1319256] )
      result = sub_45A4B0(*(_QWORD **)&byte_5D4594[1319256]);
    *(_DWORD *)&byte_5D4594[1319256] = 0;
    *(_DWORD *)&byte_5D4594[1319268] = 0;
  }
  else
  {
    sub_46ABB0(*(int *)&byte_5D4594[1319228], 1);
    sub_46C690(*(int *)&byte_5D4594[1319228]);
    result = sub_46A8C0(*(int *)&byte_5D4594[1319228]);
    *(_DWORD *)&byte_5D4594[1319268] = 1;
  }
  return result;
}

//----- (004BFDD0) --------------------------------------------------------
int __cdecl sub_4BFDD0(_DWORD *a1, int a2, unsigned int a3)
{
  int result; // eax

  switch ( a2 )
  {
    case 5:
    case 9:
    case 13:
      if ( !sub_46AAB0(a1, (unsigned __int16)a3, a3 >> 16) )
        sub_4BFE40();
      goto LABEL_4;
    case 6:
    case 7:
    case 10:
    case 11:
    case 14:
    case 15:
LABEL_4:
      result = 1;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (004BFE40) --------------------------------------------------------
int sub_4BFE40()
{
  const wchar_t *v0; // eax
  unsigned int v1; // esi
  int v3; // [esp+0h] [ebp-10h]
  int v4; // [esp+4h] [ebp-Ch]
  int2 v5; // [esp+8h] [ebp-8h]

  if ( *(_DWORD *)&byte_5D4594[1319268] != 1 )
    return 0;
  v0 = (const wchar_t *)sub_46AF00(*(int *)&byte_5D4594[1319232]);
  v1 = nox_wcstol(v0, 0, 10);
  if ( v1 > *(int *)&byte_5D4594[1319248] )
    v1 = *(_DWORD *)&byte_5D4594[1319248];
  sub_46AA20(*(int *)&byte_5D4594[1319228], &v3, &v4);
  v5.field_0 = v3 + *(_DWORD *)&byte_587000[183456];
  v5.field_4 = v4 + *(_DWORD *)&byte_587000[183460];
  if ( *(_DWORD *)&byte_5D4594[1319100] )
    (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))&byte_5D4594[1319100])(
      &v5,
      *(_DWORD *)&byte_5D4594[1319244],
      *(_DWORD *)&byte_5D4594[1319240],
      v1,
      *(_DWORD *)&byte_5D4594[1319252]);
  sub_4BFD40();
  return 1;
}

//----- (004BFEF0) --------------------------------------------------------
int sub_4BFEF0()
{
  _DWORD *v0; // eax

  *(_DWORD *)&byte_5D4594[1319264] = 0;
  v0 = sub_4A0AD0((const char *)&byte_587000[183464], sub_4C01C0);
  *(_DWORD *)&byte_5D4594[1319228] = v0;
  if ( !v0 )
    return 0;
  sub_46B430(v0, sub_4BFDD0, sub_4C0030, 0);
  *(_DWORD *)&byte_5D4594[1319232] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1319228], 3601);
  *(_DWORD *)&byte_5D4594[1319236] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1319228], 3607);
  sub_46AC00(*(int *)&byte_5D4594[1319228], 1);
  sub_46ABB0(*(int *)&byte_5D4594[1319228], 0);
  *(_DWORD *)&byte_5D4594[1319108] = 0;
  *(_DWORD *)&byte_5D4594[1319112] = 0;
  *(_DWORD *)&byte_5D4594[1319116] = *(_DWORD *)&byte_5D4594[3805496];
  *(_DWORD *)&byte_5D4594[1319120] = *(_DWORD *)&byte_5D4594[3807120];
  *(_DWORD *)&byte_5D4594[1319140] = *(_DWORD *)&byte_5D4594[3805496];
  *(_DWORD *)&byte_5D4594[1319144] = *(_DWORD *)&byte_5D4594[3807120];
  *(_DWORD *)&byte_5D4594[1319124] = 0;
  *(_DWORD *)&byte_5D4594[1319128] = 0;
  *(_DWORD *)&byte_5D4594[1319196] = sub_42F970((const char *)&byte_587000[183480]);
  *(_DWORD *)&byte_5D4594[1319200] = sub_42F970((const char *)&byte_587000[183496]);
  *(_DWORD *)&byte_5D4594[1319204] = sub_42F970((const char *)&byte_587000[183512]);
  *(_DWORD *)&byte_5D4594[1319208] = sub_42F970((const char *)&byte_587000[183532]);
  *(_DWORD *)&byte_5D4594[1319212] = sub_42F970((const char *)&byte_587000[183552]);
  *(_DWORD *)&byte_5D4594[1319216] = sub_42F970((const char *)&byte_587000[183572]);
  *(_DWORD *)&byte_5D4594[1319220] = sub_42F970((const char *)&byte_587000[183592]);
  *(_DWORD *)&byte_5D4594[1319224] = sub_42F970((const char *)&byte_587000[183620]);
  return 1;
}

//----- (004C0030) --------------------------------------------------------
int __cdecl sub_4C0030(int a1)
{
  int v1; // ecx
  int v2; // ecx
  int v3; // edx
  int v5; // [esp+0h] [ebp-8h]
  int v6; // [esp+4h] [ebp-4h]

  sub_49CF10(0, 0, *(int *)&byte_5D4594[3805496], *(int *)&byte_5D4594[3807120]);
  sub_46AA20(a1, &v5, &v6);
  v1 = *(_DWORD *)&byte_5D4594[1319196];
  if ( !*(_DWORD *)&byte_5D4594[1319264] )
    v1 = *(_DWORD *)&byte_5D4594[1319216];
  sub_47D2C0(v1, v5, v6);
  *(_DWORD *)(*(_DWORD *)&byte_5D4594[1319256] + 12) = v5 + *(_DWORD *)&byte_587000[183456];
  *(_DWORD *)(*(_DWORD *)&byte_5D4594[1319256] + 16) = v6 + *(_DWORD *)&byte_587000[183460];
  (*(void (__cdecl **)(unsigned __int8 *, _DWORD))(*(_DWORD *)&byte_5D4594[1319256] + 300))(
    &byte_5D4594[1319108],
    *(_DWORD *)&byte_5D4594[1319256]);
  if ( sub_46B0C0(*(_DWORD **)&byte_5D4594[1319228], 3603)[9] & 4 )
    sub_47D2C0(*(int *)&byte_5D4594[1319204], v5, v6);
  if ( sub_46B0C0(*(_DWORD **)&byte_5D4594[1319228], 3602)[9] & 4 )
    sub_47D2C0(*(int *)&byte_5D4594[1319200], v5, v6);
  if ( sub_46B0C0(*(_DWORD **)&byte_5D4594[1319228], 3604)[9] & 4 )
  {
    v2 = *(_DWORD *)&byte_5D4594[1319208];
    if ( !*(_DWORD *)&byte_5D4594[1319264] )
      v2 = *(_DWORD *)&byte_5D4594[1319220];
    sub_47D2C0(v2, v5, v6);
  }
  if ( sub_46B0C0(*(_DWORD **)&byte_5D4594[1319228], 3605)[9] & 4 )
  {
    v3 = *(_DWORD *)&byte_5D4594[1319212];
    if ( !*(_DWORD *)&byte_5D4594[1319264] )
      v3 = *(_DWORD *)&byte_5D4594[1319224];
    sub_47D2C0(v3, v5, v6);
  }
  return 1;
}

//----- (004C01C0) --------------------------------------------------------
int __cdecl sub_4C01C0(int a1, int a2, int *a3, int a4)
{
  int v3; // esi
  int result; // eax
  const wchar_t *v5; // eax
  unsigned int v6; // esi
  const wchar_t *v7; // eax
  unsigned int v8; // esi
  const wchar_t *v9; // eax
  int v10; // eax
  int v11; // esi
  int v12; // [esp+4h] [ebp-10h]
  int v13; // [esp+8h] [ebp-Ch]
  int2 v14; // [esp+Ch] [ebp-8h]

  if ( a2 != 16391 || *(_DWORD *)&byte_5D4594[1319268] != 1 )
    return 0;
  v3 = sub_46B0A0(a3);
  sub_452D80(766, 100);
  switch ( v3 )
  {
    case 3602:
      v7 = (const wchar_t *)sub_46AF00(*(int *)&byte_5D4594[1319232]);
      v8 = nox_wcstol(v7, 0, 10) + 1;
      if ( v8 > *(int *)&byte_5D4594[1319248] )
        return 0;
      nox_swprintf((wchar_t *)&byte_5D4594[1319164], (const wchar_t *)&byte_587000[183644], v8);
      sub_46AEE0(*(int *)&byte_5D4594[1319232], (int)&byte_5D4594[1319164]);
      if ( !*(_DWORD *)&byte_5D4594[1319264] )
        return 0;
      nox_swprintf(
        (wchar_t *)&byte_5D4594[1319068],
        (const wchar_t *)&byte_587000[183652],
        *(_DWORD *)&byte_5D4594[1319260] * v8);
      sub_46AEE0(*(int *)&byte_5D4594[1319236], (int)&byte_5D4594[1319068]);
      result = 0;
      break;
    case 3603:
      v9 = (const wchar_t *)sub_46AF00(*(int *)&byte_5D4594[1319232]);
      v10 = nox_wcstol(v9, 0, 10);
      v11 = v10;
      if ( v10 > 1 )
      {
        nox_swprintf((wchar_t *)&byte_5D4594[1319164], (const wchar_t *)&byte_587000[183660], v10 - 1);
        sub_46AEE0(*(int *)&byte_5D4594[1319232], (int)&byte_5D4594[1319164]);
        if ( *(_DWORD *)&byte_5D4594[1319264] )
        {
          nox_swprintf(
            (wchar_t *)&byte_5D4594[1319068],
            (const wchar_t *)&byte_587000[183668],
            *(_DWORD *)&byte_5D4594[1319260] * (v11 - 1));
          sub_46AEE0(*(int *)&byte_5D4594[1319236], (int)&byte_5D4594[1319068]);
        }
      }
      return 0;
    case 3604:
    case 3606:
      v5 = (const wchar_t *)sub_46AF00(*(int *)&byte_5D4594[1319232]);
      v6 = nox_wcstol(v5, 0, 10);
      if ( v6 > *(int *)&byte_5D4594[1319248] )
        v6 = *(_DWORD *)&byte_5D4594[1319248];
      sub_46AA20(*(int *)&byte_5D4594[1319228], &v12, &v13);
      v14.field_0 = v12 + *(_DWORD *)&byte_587000[183456];
      v14.field_4 = v13 + *(_DWORD *)&byte_587000[183460];
      if ( *(_DWORD *)&byte_5D4594[1319160] )
        (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD))&byte_5D4594[1319160])(
          &v14,
          *(_DWORD *)&byte_5D4594[1319244],
          *(_DWORD *)&byte_5D4594[1319240],
          v6,
          *(_DWORD *)&byte_5D4594[1319252]);
      sub_4BFD40();
      result = 0;
      break;
    case 3605:
      sub_4BFE40();
      result = 0;
      break;
    default:
      return 0;
  }
  return result;
}

//----- (004C03E0) --------------------------------------------------------
int sub_4C03E0()
{
  int result; // eax

  if ( *(_DWORD *)&byte_5D4594[1319256] )
    sub_45A4B0(*(_QWORD **)&byte_5D4594[1319256]);
  *(_DWORD *)&byte_5D4594[1319256] = 0;
  result = sub_46C4E0(*(_DWORD **)&byte_5D4594[1319228]);
  *(_DWORD *)&byte_5D4594[1319228] = 0;
  *(_DWORD *)&byte_5D4594[1319232] = 0;
  *(_DWORD *)&byte_5D4594[1319236] = 0;
  *(_DWORD *)&byte_5D4594[1319264] = 0;
  return result;
}

//----- (004C0430) --------------------------------------------------------
int __cdecl sub_4C0430(int a1, int a2, int a3, int a4, int a5, const void *a6, int a7, int a8, int a9, int a10)
{
  _DWORD *v10; // eax
  int result; // eax

  v10 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1319228], 3606);
  sub_46AEE0((int)v10, a1);
  *(_DWORD *)&byte_5D4594[1319256] = sub_45A240(a5);
  *(_DWORD *)(*(_DWORD *)&byte_5D4594[1319256] + 120) |= 0x40000000u;
  if ( a6 )
    qmemcpy((void *)(*(_DWORD *)&byte_5D4594[1319256] + 432), a6, 0x14u);
  *(_DWORD *)&byte_5D4594[1319160] = a9;
  *(_DWORD *)&byte_5D4594[1319100] = a10;
  *(_DWORD *)&byte_5D4594[1319240] = a5;
  *(_DWORD *)&byte_5D4594[1319244] = a4;
  *(_DWORD *)&byte_5D4594[1319248] = a7;
  *(_DWORD *)&byte_5D4594[1319252] = a8;
  sub_4BFD40();
  sub_4C0560(a2, a3);
  nox_swprintf((wchar_t *)&byte_5D4594[1319164], (const wchar_t *)&byte_587000[183676], 1);
  sub_46AEE0(*(int *)&byte_5D4594[1319232], (int)&byte_5D4594[1319164]);
  if ( *(_DWORD *)&byte_5D4594[1319264] )
  {
    nox_swprintf((wchar_t *)&byte_5D4594[1319068], (const wchar_t *)&byte_587000[183684], *(_DWORD *)&byte_5D4594[1319260]);
    result = sub_46AEE0(*(int *)&byte_5D4594[1319236], (int)&byte_5D4594[1319068]);
  }
  else
  {
    nox_swprintf((wchar_t *)&byte_5D4594[1319068], (const wchar_t *)&byte_5D4594[1319272]);
    result = sub_46AEE0(*(int *)&byte_5D4594[1319236], (int)&byte_5D4594[1319068]);
  }
  return result;
}

//----- (004C0560) --------------------------------------------------------
int __cdecl sub_4C0560(int a1, int a2)
{
  int v2; // ecx
  int v3; // eax
  int v5; // [esp+8h] [ebp-8h]
  int v6; // [esp+Ch] [ebp-4h]

  sub_46AB70(*(int *)&byte_5D4594[1319228], &v5, &v6);
  v2 = a1 - *(_DWORD *)&byte_587000[183456];
  v3 = a2 - *(_DWORD *)&byte_587000[183460];
  if ( a1 - *(int *)&byte_587000[183456] < 0 )
    v2 = 0;
  if ( v3 < 0 )
    v3 = 0;
  if ( v2 + v5 >= *(int *)&byte_5D4594[3805496] )
    v2 = *(_DWORD *)&byte_5D4594[3805496] - v5;
  if ( v3 + v6 >= *(int *)&byte_5D4594[3807120] )
    v3 = *(_DWORD *)&byte_5D4594[3807120] - v6;
  return sub_46A9B0(*(_DWORD **)&byte_5D4594[1319228], v2, v3);
}

//----- (004C05F0) --------------------------------------------------------
int __cdecl sub_4C05F0(int a1, int a2)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1319264] = a1;
  *(_DWORD *)&byte_5D4594[1319260] = a2;
  return result;
}

//----- (004C0610) --------------------------------------------------------
int sub_4C0610()
{
  char v1[2]; // [esp+0h] [ebp-2h]

  v1[0] = -55;
  v1[1] = 14;
  return sub_40EBC0(31, 0, v1, 2);
}

//----- (004C0630) --------------------------------------------------------
int __cdecl sub_4C0630(int a1, unsigned int a2, unsigned int a3)
{
  int v3; // eax
  _DWORD *v4; // ecx
  _DWORD *v5; // eax
  int v6; // esi
  int v7; // edi
  _DWORD *v8; // eax
  int v9; // esi
  int v10; // edi
  _DWORD *v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // esi
  int v15; // eax
  int2 a1a; // [esp+4h] [ebp-8h]

  a1a.field_4 = a3 >> 16;
  a1a.field_0 = (unsigned __int16)a3;
  if ( a2 == 5 )
  {
    v12 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3704);
    if ( sub_46AAB0(v12, a1a.field_0, a1a.field_4) )
    {
      LOBYTE(v13) = sub_4C0910(&a1a);
      v14 = v13;
      if ( v13[1] )
      {
        sub_46ADC0(*(int *)&byte_5D4594[1320940]);
        sub_4160D0(2);
        *(int2 *)&byte_5D4594[1319276] = a1a;
        *(_DWORD *)&byte_5D4594[1320968] = *v14;
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1320968] + 128) = v14[v14[1] + 1];
        v14[v14[1] + 1] = 0;
        sub_477690(*(int *)&byte_5D4594[1320968]);
        v15 = v14[1] - 1;
        v14[1] = v15;
        if ( !v15 )
          *v14 = 0;
        *(_DWORD *)&byte_5D4594[1320972] = v14;
        *(_DWORD *)&byte_5D4594[1320304] = 0;
        sub_452D80(791, 100);
      }
    }
    return 1;
  }
  if ( a2 <= 5 || a2 > 7 )
    return 0;
  v3 = sub_46AE00();
  v4 = *(_DWORD **)&byte_5D4594[1320940];
  if ( v3 == *(_DWORD *)&byte_5D4594[1320940] )
  {
    sub_46ADE0(*(int *)&byte_5D4594[1320940]);
    v4 = *(_DWORD **)&byte_5D4594[1320940];
  }
  if ( !*(_DWORD *)&byte_5D4594[1320968] )
    return 1;
  if ( *(_DWORD *)&byte_5D4594[1320304] )
  {
    if ( *(_DWORD *)&byte_5D4594[1320304] == 1 )
    {
      v8 = sub_46B0C0(v4, 3705);
      if ( !sub_46AAB0(v8, a1a.field_0, a1a.field_4)
        || (v9 = *(_DWORD *)&byte_5D4594[1319276] - a1a.field_0,
            v10 = *(_DWORD *)&byte_5D4594[1319280] - a1a.field_4,
            !sub_4160F0(3u, *(_DWORD *)&byte_5D4594[2649704] / 3u))
        && v9 * v9 + v10 * v10 < 100 )
      {
        sub_4C08E0(*(int *)&byte_5D4594[1320968]);
      }
    }
  }
  else
  {
    v5 = sub_46B0C0(v4, 3704);
    if ( sub_46AAB0(v5, a1a.field_0, a1a.field_4) )
    {
      v6 = *(_DWORD *)&byte_5D4594[1319276] - a1a.field_0;
      v7 = *(_DWORD *)&byte_5D4594[1319280] - a1a.field_4;
      if ( !sub_4160F0(2u, *(_DWORD *)&byte_5D4594[2649704] / 3u) && v6 * v6 + v7 * v7 < 100 )
        sub_4C08E0(*(int *)&byte_5D4594[1320968]);
    }
    else
    {
      sub_4C08E0(*(int *)&byte_5D4594[1320968]);
    }
  }
  *(_DWORD *)(*(_DWORD *)&byte_5D4594[1320972] + 4 * (*(_DWORD *)(*(_DWORD *)&byte_5D4594[1320972] + 4))++ + 8) = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1320968] + 128);
  if ( *(_DWORD *)(*(_DWORD *)&byte_5D4594[1320972] + 4) == 1 )
    **(_DWORD **)&byte_5D4594[1320972] = *(_DWORD *)&byte_5D4594[1320968];
  sub_4776A0();
  *(_DWORD *)&byte_5D4594[1320968] = 0;
  *(_DWORD *)&byte_5D4594[1320972] = 0;
  return 1;
}
// 4C0836: variable 'v13' is possibly undefined

//----- (004C08E0) --------------------------------------------------------
int __cdecl sub_4C08E0(int a1)
{
  char v2[4]; // [esp+0h] [ebp-4h]

  v2[0] = -55;
  v2[1] = 16;
  *(_WORD *)&v2[2] = sub_578B00(a1);
  return sub_40EBC0(31, 0, v2, 4);
}

//----- (004C0910) --------------------------------------------------------
char __cdecl sub_4C0910(int2 *a1)
{
  _DWORD *v1; // eax
  int v2; // edi
  int v3; // ebx
  int i; // esi
  int v5; // eax
  int v7; // [esp+10h] [ebp-1Ch]
  int v8; // [esp+14h] [ebp-18h]
  int v9; // [esp+18h] [ebp-14h]
  int4 v10; // [esp+1Ch] [ebp-10h]

  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3704);
  sub_46AA60(v1, &v8, &v9);
  v2 = 0;
  v7 = 0;
  while ( 2 )
  {
    v3 = 0;
    for ( i = 0; i < 100; i += 50 )
    {
      v10.field_0 = i + v8;
      v10.field_8 = i + v8 + 50;
      v10.field_4 = v2 + v9;
      v10.field_C = v2 + v9 + 50;
      v5 = sub_4281F0(a1, &v10);
      if ( v5 )
        return (char)&byte_5D4594[140 * (v7 + 2 * v3) + 1319284];
      ++v3;
    }
    v2 += 50;
    ++v7;
    if ( v2 < 100 )
      continue;
    break;
  }
  return v5;
}
// 4C097E: variable 'v5' is possibly undefined

//----- (004C09D0) --------------------------------------------------------
int sub_4C09D0()
{
  _DWORD *v0; // eax
  wchar_t *v2; // eax
  wchar_t *v3; // esi
  wchar_t *v4; // eax
  wchar_t *v5; // esi
  wchar_t *v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // eax
  wchar_t *v9; // esi
  wchar_t *v10; // eax
  wchar_t *v11; // esi
  wchar_t *v12; // eax
  wchar_t *v13; // esi
  wchar_t *v14; // eax
  unsigned __int8 *v15; // edx
  unsigned __int8 *v16; // eax
  int v17; // ecx
  unsigned __int8 *v18; // edx
  unsigned __int8 *v19; // eax
  int v20; // ecx
  wchar_t *v21; // eax

  v0 = sub_4A0AD0((const char *)&byte_587000[183712], sub_4C0C90);
  *(_DWORD *)&byte_5D4594[1320940] = v0;
  if ( !v0 )
    return 0;
  sub_46B430(v0, sub_4C0630, sub_4C0D00, 0);
  v2 = sub_40F1D0((char *)&byte_587000[183764], 0, (const char *)&byte_587000[183724], 692);
  sub_46B000((wchar_t *)(*(_DWORD *)&byte_5D4594[1320940] + 36), v2);
  v3 = (wchar_t *)sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3702);
  v4 = sub_40F1D0((char *)&byte_587000[183816], 0, (const char *)&byte_587000[183776], 695);
  sub_46B000(v3 + 18, v4);
  v5 = (wchar_t *)sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3703);
  v6 = sub_40F1D0((char *)&byte_587000[183872], 0, (const char *)&byte_587000[183832], 698);
  sub_46B000(v5 + 18, v6);
  v7 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3704);
  sub_46B070((int)v7, sub_4C1120);
  v8 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3705);
  sub_46B070((int)v8, sub_4C1120);
  v9 = (wchar_t *)sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3708);
  v10 = sub_40F1D0((char *)&byte_587000[183928], 0, (const char *)&byte_587000[183888], 709);
  sub_46B000(v9 + 18, v10);
  v11 = (wchar_t *)sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3709);
  v12 = sub_40F1D0((char *)&byte_587000[183988], 0, (const char *)&byte_587000[183948], 712);
  sub_46B000(v11 + 18, v12);
  v13 = (wchar_t *)sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3710);
  v14 = sub_40F1D0((char *)&byte_587000[184048], 0, (const char *)&byte_587000[184008], 715);
  sub_46B000(v13 + 18, v14);
  sub_46AC00(*(int *)&byte_5D4594[1320940], 1);
  sub_46ABB0(*(int *)&byte_5D4594[1320940], 0);
  v15 = &byte_5D4594[1319288];
  do
  {
    v16 = v15;
    v17 = 2;
    do
    {
      *((_DWORD *)v16 - 1) = 0;
      *(_DWORD *)v16 = 0;
      v16 += 280;
      --v17;
    }
    while ( v17 );
    v15 += 140;
  }
  while ( (int)v15 < (int)&byte_5D4594[1319568] );
  v18 = &byte_5D4594[1320312];
  do
  {
    v19 = v18;
    v20 = 2;
    do
    {
      *((_DWORD *)v19 - 1) = 0;
      *(_DWORD *)v19 = 0;
      v19 += 280;
      --v20;
    }
    while ( v20 );
    v18 += 140;
  }
  while ( (int)v18 < (int)&byte_5D4594[1320592] );
  v21 = sub_40F1D0((char *)&byte_587000[184100], 0, (const char *)&byte_587000[184060], 749);
  nox_wcscpy((wchar_t *)&byte_5D4594[1319972], v21);
  *(_DWORD *)&byte_5D4594[1320188] = 0;
  *(_DWORD *)&byte_5D4594[1320192] = 0;
  *(_DWORD *)&byte_5D4594[1320196] = *(_DWORD *)&byte_5D4594[3805496];
  *(_DWORD *)&byte_5D4594[1320200] = *(_DWORD *)&byte_5D4594[3807120];
  *(_DWORD *)&byte_5D4594[1320220] = *(_DWORD *)&byte_5D4594[3805496];
  *(_DWORD *)&byte_5D4594[1320224] = *(_DWORD *)&byte_5D4594[3807120];
  *(_DWORD *)&byte_5D4594[1320204] = 0;
  *(_DWORD *)&byte_5D4594[1320208] = 0;
  *(_DWORD *)&byte_5D4594[1320164] = sub_42F970((const char *)&byte_587000[184116]);
  *(_DWORD *)&byte_5D4594[1320168] = sub_42F970((const char *)&byte_587000[184128]);
  *(_DWORD *)&byte_5D4594[1320172] = sub_42F970((const char *)&byte_587000[184152]);
  *(_DWORD *)&byte_5D4594[1320176] = sub_42F970((const char *)&byte_587000[184172]);
  *(_DWORD *)&byte_5D4594[1320180] = sub_42F970((const char *)&byte_587000[184192]);
  *(_DWORD *)&byte_5D4594[1320184] = sub_42F970((const char *)&byte_587000[184208]);
  return 1;
}

//----- (004C0C90) --------------------------------------------------------
int __cdecl sub_4C0C90(int a1, int a2, int *a3, int a4)
{
  int v3; // esi

  if ( a2 == 16391 )
  {
    v3 = sub_46B0A0(a3);
    sub_452D80(766, 100);
    if ( v3 == 3708 )
    {
      sub_4C0CE0();
    }
    else if ( v3 == 3710 )
    {
      sub_4C0610();
      return 0;
    }
  }
  return 0;
}

//----- (004C0CE0) --------------------------------------------------------
int sub_4C0CE0()
{
  char v1[2]; // [esp+0h] [ebp-2h]

  v1[0] = -55;
  v1[1] = 17;
  return sub_40EBC0(31, 0, v1, 2);
}

//----- (004C0D00) --------------------------------------------------------
int sub_4C0D00()
{
  _DWORD *v0; // eax
  _DWORD *v1; // eax
  _DWORD *v2; // eax
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // eax
  unsigned __int8 *v6; // esi
  int v7; // ebp
  int v8; // ebx
  int v9; // edi
  _DWORD *v10; // eax
  unsigned __int8 *v11; // esi
  int v12; // ebp
  int v13; // ebx
  int v14; // edi
  unsigned __int8 *v16; // [esp+10h] [ebp-58h]
  unsigned __int8 *v17; // [esp+10h] [ebp-58h]
  int v18; // [esp+14h] [ebp-54h]
  int v19; // [esp+18h] [ebp-50h]
  int v20; // [esp+1Ch] [ebp-4Ch]
  int v21; // [esp+20h] [ebp-48h]
  int v22; // [esp+24h] [ebp-44h]
  wchar_t v23[32]; // [esp+28h] [ebp-40h]

  sub_46AA20(*(int *)&byte_5D4594[1320940], &v21, &v22);
  sub_46AB70(*(int *)&byte_5D4594[1320940], &v20, &v19);
  sub_47D2C0(*(int *)&byte_5D4594[1320164], v21, v22);
  v0 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3711);
  sub_46B490((int)v0, 16385, (int)&byte_5D4594[1320240], 0);
  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3712);
  sub_46B490((int)v1, 16385, (int)&byte_5D4594[1320868], 0);
  v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3713);
  sub_46B490((int)v2, 16385, (int)&byte_5D4594[1320100], 0);
  sub_47D2C0(
    *(int *)&byte_5D4594[1320184],
    v21 + *(_DWORD *)&byte_587000[183696] - 64,
    v22 + *(_DWORD *)&byte_587000[183700] - 64);
  sub_47D2C0(
    *(int *)&byte_5D4594[1320184],
    v21 + *(_DWORD *)&byte_587000[183704] - 64,
    v22 + *(_DWORD *)&byte_587000[183708] - 64);
  v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3708);
  if ( *(_DWORD *)&byte_5D4594[1320944] )
  {
    sub_47D2C0(*(int *)&byte_5D4594[1320172], v21, v22);
  }
  else if ( v3[9] & 4 )
  {
    sub_47D2C0(*(int *)&byte_5D4594[1320168], v21, v22);
  }
  if ( *(_DWORD *)&byte_5D4594[1320948] )
    sub_47D2C0(*(int *)&byte_5D4594[1320176], v21, v22);
  v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3710);
  if ( *(_DWORD *)&byte_5D4594[1320960] || v4[9] & 4 )
    sub_47D2C0(*(int *)&byte_5D4594[1320180], v21, v22);
  v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3704);
  sub_46AA60(v5, &v21, &v22);
  v6 = &byte_5D4594[1319284];
  v18 = sub_43F320(0);
  v7 = 0;
  v16 = &byte_5D4594[1319284];
  do
  {
    v8 = 0;
    do
    {
      if ( *((_DWORD *)v6 + 1) )
      {
        *(_DWORD *)(*(_DWORD *)v6 + 12) = v8 + v21 + 25;
        *(_DWORD *)(*(_DWORD *)v6 + 16) = v22 + v7 + 25;
        (*(void (__cdecl **)(unsigned __int8 *, _DWORD))(*(_DWORD *)v6 + 300))(&byte_5D4594[1320188], *(_DWORD *)v6);
        nox_swprintf(v23, (const wchar_t *)&byte_587000[184220], *((_DWORD *)v6 + 1));
        sub_434390(*(int *)&byte_5D4594[2523948]);
        sub_43F6E0(0, (__int16 *)v23, v8 + v21 + 5, v22 + v7 + 5);
        v9 = v22 + v7 + 50;
        nox_swprintf(v23, (const wchar_t *)&byte_587000[184228], *((_DWORD *)v6 + 34));
        sub_434390(*(int *)&byte_5D4594[2589772]);
        sub_43F6E0(0, (__int16 *)v23, v8 + v21 + 5, v9 - v18 - 5);
      }
      v8 += 50;
      v6 += 280;
    }
    while ( v8 < 100 );
    v7 += 50;
    v6 = v16 + 140;
    v16 += 140;
  }
  while ( (int)v16 < (int)&byte_5D4594[1319564] );
  v10 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3705);
  sub_46AA60(v10, &v21, &v22);
  v11 = &byte_5D4594[1320308];
  v12 = 0;
  v17 = &byte_5D4594[1320308];
  do
  {
    v13 = 0;
    do
    {
      if ( *((_DWORD *)v11 + 1) )
      {
        *(_DWORD *)(*(_DWORD *)v11 + 12) = v13 + v21 + 25;
        *(_DWORD *)(*(_DWORD *)v11 + 16) = v22 + v12 + 25;
        (*(void (__cdecl **)(unsigned __int8 *, _DWORD))(*(_DWORD *)v11 + 300))(&byte_5D4594[1320188], *(_DWORD *)v11);
        nox_swprintf(v23, (const wchar_t *)&byte_587000[184236], *((_DWORD *)v11 + 1));
        sub_434390(*(int *)&byte_5D4594[2523948]);
        sub_43F6E0(0, (__int16 *)v23, v13 + v21 + 5, v22 + v12 + 5);
        v14 = v22 + v12 + 50;
        nox_swprintf(v23, (const wchar_t *)&byte_587000[184244], *((_DWORD *)v11 + 34));
        sub_434390(*(int *)&byte_5D4594[2589772]);
        sub_43F6E0(0, (__int16 *)v23, v13 + v21 + 5, v14 - v18 - 5);
      }
      v13 += 50;
      v11 += 280;
    }
    while ( v13 < 100 );
    v12 += 50;
    v11 = v17 + 140;
    v17 += 140;
  }
  while ( (int)v17 < (int)&byte_5D4594[1320588] );
  return 1;
}

//----- (004C1120) --------------------------------------------------------
int __cdecl sub_4C1120(int a1, int a2, wchar_t **a3)
{
  _DWORD *v3; // eax
  wchar_t **v4; // eax
  _DWORD *v5; // eax
  wchar_t *v6; // eax
  int2 a1a; // [esp+0h] [ebp-8h]

  a1a.field_0 = (unsigned __int16)a3;
  a1a.field_4 = (unsigned int)a3 >> 16;
  v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3704);
  if ( sub_46AAB0(v3, (unsigned __int16)a3, (unsigned int)a3 >> 16) )
  {
    LOBYTE(v4) = sub_4C0910(&a1a);
  }
  else
  {
    v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3705);
    if ( sub_46AAB0(v5, a1a.field_0, a1a.field_4) )
      LOBYTE(v4) = sub_4C11E0(&a1a);
    else
      v4 = a3;
  }
  if ( *v4 )
  {
    *((_DWORD *)*v4 + 32) = v4[2];
    v6 = sub_4BF050(*v4);
    sub_4776B0(v6);
  }
  return 1;
}
// 4C11AC: variable 'v4' is possibly undefined

//----- (004C11E0) --------------------------------------------------------
char __cdecl sub_4C11E0(_DWORD *a1)
{
  _DWORD *v1; // eax
  int v2; // edi
  int v3; // ebx
  int i; // esi
  int v5; // eax
  int v7; // [esp+10h] [ebp-1Ch]
  int v8; // [esp+14h] [ebp-18h]
  int v9; // [esp+18h] [ebp-14h]
  int4 v10; // [esp+1Ch] [ebp-10h]

  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3705);
  sub_46AA60(v1, &v8, &v9);
  v2 = 0;
  v7 = 0;
  while ( 2 )
  {
    v3 = 0;
    for ( i = 0; i < 100; i += 50 )
    {
      v10.field_0 = i + v8;
      v10.field_8 = i + v8 + 50;
      v10.field_4 = v2 + v9;
      v10.field_C = v2 + v9 + 50;
      v5 = sub_4281F0((int2 *)a1, &v10);
      if ( v5 )
        return (char)&byte_5D4594[140 * (v7 + 2 * v3) + 1320308];
      ++v3;
    }
    v2 += 50;
    ++v7;
    if ( v2 < 100 )
      continue;
    break;
  }
  return v5;
}
// 4C124E: variable 'v5' is possibly undefined

//----- (004C12A0) --------------------------------------------------------
int sub_4C12A0()
{
  int result; // eax

  sub_46C4E0(*(_DWORD **)&byte_5D4594[1320940]);
  result = 0;
  *(_DWORD *)&byte_5D4594[1320940] = 0;
  *(_DWORD *)&byte_5D4594[1320964] = 0;
  return result;
}

//----- (004C12C0) --------------------------------------------------------
int sub_4C12C0()
{
  return *(_DWORD *)&byte_5D4594[1320964];
}

//----- (004C12D0) --------------------------------------------------------
int sub_4C12D0()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1320964];
  if ( *(_DWORD *)&byte_5D4594[1320964] )
    result = sub_46A8C0(*(int *)&byte_5D4594[1320940]);
  return result;
}

//----- (004C12F0) --------------------------------------------------------
BOOL __cdecl sub_4C12F0(int *a1)
{
  _DWORD *v1; // eax

  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3704);
  return sub_46AAB0(v1, *a1, a1[1]);
}

//----- (004C1320) --------------------------------------------------------
int __cdecl sub_4C1320(int a1)
{
  int v1; // esi
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  int v5; // [esp+4h] [ebp-8h]
  int v6; // [esp+8h] [ebp-4h]

  v1 = *(_DWORD *)&byte_5D4594[2618908];
  if ( !*(_DWORD *)&byte_5D4594[2618908] )
    return 0;
  if ( *(_DWORD *)&byte_5D4594[1320964] == 1 )
    return 0;
  *(_DWORD *)&byte_5D4594[1320964] = 1;
  sub_4C1410();
  nox_wcscpy((wchar_t *)&byte_5D4594[1319844], (const wchar_t *)(a1 + 2));
  sub_46ABB0(*(int *)&byte_5D4594[1320940], 1);
  sub_4C12D0();
  sub_46AB70(*(int *)&byte_5D4594[1320940], &v6, &v5);
  sub_46A9B0(*(_DWORD **)&byte_5D4594[1320940], 198, 193);
  v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3702);
  sub_46B490((int)v3, 16385, v1 + 4704, 0);
  v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3703);
  sub_46B490((int)v4, 16385, (int)&byte_5D4594[1319844], 0);
  sub_467BB0();
  return 1;
}

//----- (004C1410) --------------------------------------------------------
int sub_4C1410()
{
  _DWORD *v0; // eax
  _DWORD *v1; // eax
  unsigned __int8 *v2; // ebp
  unsigned __int8 *v3; // esi
  int v4; // ebx
  unsigned __int8 *v5; // ebp
  unsigned __int8 *v6; // esi
  int v7; // ebx
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // eax
  int result; // eax
  wchar_t v12[64]; // [esp+10h] [ebp-80h]

  *(_WORD *)&byte_5D4594[1320240] = 0;
  *(_WORD *)&byte_5D4594[1320868] = 0;
  *(_WORD *)&byte_5D4594[1320100] = 0;
  v0 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3702);
  sub_46B490((int)v0, 16385, (int)&byte_5D4594[1320976], 0);
  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3703);
  sub_46B490((int)v1, 16385, (int)&byte_5D4594[1320980], 0);
  v2 = &byte_5D4594[1319284];
  do
  {
    v3 = v2;
    v4 = 2;
    do
    {
      if ( *(_DWORD *)v3 )
        sub_45A4B0(*(_QWORD **)v3);
      *(_DWORD *)v3 = 0;
      *((_DWORD *)v3 + 1) = 0;
      v3 += 280;
      --v4;
    }
    while ( v4 );
    v2 += 140;
  }
  while ( (int)v2 < (int)&byte_5D4594[1319564] );
  v5 = &byte_5D4594[1320308];
  do
  {
    v6 = v5;
    v7 = 2;
    do
    {
      if ( *(_DWORD *)v6 )
        sub_45A4B0(*(_QWORD **)v6);
      *(_DWORD *)v6 = 0;
      *((_DWORD *)v6 + 1) = 0;
      v6 += 280;
      --v7;
    }
    while ( v7 );
    v5 += 140;
  }
  while ( (int)v5 < (int)&byte_5D4594[1320588] );
  nox_swprintf(v12, (const wchar_t *)&byte_5D4594[1319972], 0);
  v8 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3711);
  sub_46B490((int)v8, 16385, (int)v12, 0);
  v9 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3712);
  sub_46B490((int)v9, 16385, (int)v12, 0);
  v10 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3713);
  result = sub_46B490((int)v10, 16385, (int)v12, 0);
  *(_DWORD *)&byte_5D4594[1320944] = 0;
  *(_DWORD *)&byte_5D4594[1320948] = 0;
  *(_DWORD *)&byte_5D4594[1320968] = 0;
  *(_DWORD *)&byte_5D4594[1320972] = 0;
  *(_DWORD *)&byte_5D4594[1320932] = 0;
  *(_DWORD *)&byte_5D4594[1320936] = 0;
  return result;
}

//----- (004C1590) --------------------------------------------------------
int sub_4C1590()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1320964];
  if ( *(_DWORD *)&byte_5D4594[1320964] )
  {
    sub_4C1410();
    sub_46AC00(*(int *)&byte_5D4594[1320940], 1);
    sub_46ABB0(*(int *)&byte_5D4594[1320940], 0);
    *(_DWORD *)&byte_5D4594[1320964] = 0;
    result = sub_467C10();
  }
  return result;
}

//----- (004C15D0) --------------------------------------------------------
int __cdecl sub_4C15D0(int a1)
{
  int result; // eax
  int v2; // ebp
  unsigned __int8 *v3; // ebx
  int v4; // esi
  int v5; // edi
  unsigned __int8 *v6; // esi
  int v7; // ebp
  unsigned __int8 *v8; // ebx
  int v9; // esi
  int v10; // edi
  wchar_t *v11; // eax
  unsigned __int8 *v12; // [esp+8h] [ebp-4h]

  result = *(_DWORD *)&byte_5D4594[1320964];
  v2 = 0;
  v12 = 0;
  if ( *(_DWORD *)&byte_5D4594[1320964] )
  {
    v3 = &byte_5D4594[1319284];
    while ( 2 )
    {
      v4 = 0;
      v5 = (int)v3;
      do
      {
        if ( sub_4C1760(v5, *(unsigned __int16 *)(a1 + 2)) )
        {
          v6 = &byte_5D4594[140 * (v2 + 2 * v4) + 1319284];
          goto LABEL_18;
        }
        ++v4;
        v5 += 280;
      }
      while ( v4 < 2 );
      v3 += 140;
      ++v2;
      if ( (int)v3 < (int)&byte_5D4594[1319564] )
        continue;
      break;
    }
    v7 = 0;
    v8 = &byte_5D4594[1320308];
    while ( 2 )
    {
      v9 = 0;
      v10 = (int)v8;
      do
      {
        if ( sub_4C1760(v10, *(unsigned __int16 *)(a1 + 2)) )
        {
          v12 = &byte_5D4594[140 * (v7 + 2 * v9) + 1320308];
          goto LABEL_17;
        }
        ++v9;
        v10 += 280;
      }
      while ( v9 < 2 );
      v8 += 140;
      ++v7;
      if ( (int)v8 < (int)&byte_5D4594[1320588] )
        continue;
      break;
    }
    v11 = sub_40F1D0((char *)&byte_587000[184292], 0, (const char *)&byte_587000[184252], 1141);
    sub_445490(v11);
LABEL_17:
    v6 = v12;
LABEL_18:
    *((_DWORD *)v6 + 34) -= *((_DWORD *)v6 + 34) / *((_DWORD *)v6 + 1);
    sub_4C1710((int)v6, *(unsigned __int16 *)(a1 + 2));
    result = *((_DWORD *)v6 + 1) - 1;
    *((_DWORD *)v6 + 1) = result;
    if ( !result )
    {
      result = sub_45A4B0(*(_QWORD **)v6);
      *(_DWORD *)v6 = 0;
    }
  }
  return result;
}

//----- (004C1710) --------------------------------------------------------
int __cdecl sub_4C1710(int a1, int a2)
{
  int result; // eax
  _DWORD *i; // ecx
  _DWORD *v4; // ecx
  int v5; // edx

  result = 0;
  for ( i = (_DWORD *)(a1 + 8); *i != a2; ++i )
  {
    if ( ++result >= 32 )
      return result;
  }
  if ( result < 31 )
  {
    v4 = (_DWORD *)(a1 + 4 * result + 8);
    v5 = 31 - result;
    do
    {
      result = v4[1];
      *v4 = result;
      ++v4;
      --v5;
    }
    while ( v5 );
  }
  *(_DWORD *)(a1 + 132) = 0;
  return result;
}

//----- (004C1760) --------------------------------------------------------
int __cdecl sub_4C1760(int a1, int a2)
{
  int v2; // eax
  _DWORD *i; // ecx

  if ( !*(_DWORD *)(a1 + 4) )
    return 0;
  v2 = 0;
  for ( i = (_DWORD *)(a1 + 8); *i != a2; ++i )
  {
    if ( ++v2 >= 32 )
      return 0;
  }
  return 1;
}

//----- (004C1790) --------------------------------------------------------
char *__cdecl sub_4C1790(int a1)
{
  char *result; // eax
  int v2; // ebp
  char *v3; // esi
  _DWORD *v4; // eax
  int v5; // ecx
  int *v6; // ebx
  _BYTE *v7; // edi
  int v8; // eax
  int v9; // eax
  int v10; // [esp+10h] [ebp+4h]

  result = *(char **)&byte_5D4594[1320964];
  if ( !*(_DWORD *)&byte_5D4594[1320964] )
    return result;
  v2 = a1;
  *(_DWORD *)&byte_5D4594[1320944] = 0;
  *(_DWORD *)&byte_5D4594[1320948] = 0;
  if ( *(_BYTE *)(a1 + 2) == 1 )
  {
    v3 = *(char **)&byte_5D4594[1320932];
    if ( *(_DWORD *)&byte_5D4594[1320932] )
    {
      result = (char *)sub_4C18E0(*(unsigned __int16 *)(a1 + 3), *(_DWORD **)&byte_5D4594[1320932]);
      if ( result )
        goto LABEL_12;
      result = sub_4C1910(*(unsigned __int16 *)(a1 + 3));
    }
    else
    {
      result = sub_4C1910(*(unsigned __int16 *)(a1 + 3));
    }
  }
  else
  {
    v3 = *(char **)&byte_5D4594[1320936];
    if ( *(_DWORD *)&byte_5D4594[1320936] )
    {
      result = (char *)sub_4C18E0(*(unsigned __int16 *)(a1 + 3), *(_DWORD **)&byte_5D4594[1320936]);
      if ( result )
        goto LABEL_12;
      result = sub_4C19C0(*(unsigned __int16 *)(a1 + 3));
    }
    else
    {
      result = sub_4C19C0(*(unsigned __int16 *)(a1 + 3));
    }
  }
  v3 = result;
LABEL_12:
  if ( v3 )
  {
    if ( !*(_DWORD *)v3 )
    {
      v4 = sub_45A240(*(unsigned __int16 *)(a1 + 3));
      *(_DWORD *)v3 = v4;
      if ( v4[28] & 0x13001000 )
      {
        v5 = -11 - a1;
        v6 = v4 + 108;
        v7 = (_BYTE *)(a1 + 11);
        v10 = -11 - a1;
        do
        {
          if ( *v7 == -1 )
          {
            *v6 = 0;
          }
          else
          {
            v8 = sub_413330((unsigned __int8)*v7);
            v5 = v10;
            *v6 = v8;
          }
          ++v7;
          ++v6;
        }
        while ( (int)&v7[v5] < 4 );
      }
      *((_DWORD *)v3 + 1) = 0;
      *((_DWORD *)v3 + 34) = 0;
    }
    *(_DWORD *)&v3[4 * *((_DWORD *)v3 + 1) + 8] = *(unsigned __int16 *)(v2 + 5);
    v9 = *((_DWORD *)v3 + 34);
    ++*((_DWORD *)v3 + 1);
    result = (char *)(*(_DWORD *)(v2 + 7) + v9);
    *((_DWORD *)v3 + 34) = result;
    *(_DWORD *)&byte_5D4594[1320932] = 0;
    *(_DWORD *)&byte_5D4594[1320936] = 0;
  }
  return result;
}

//----- (004C18E0) --------------------------------------------------------
int __cdecl sub_4C18E0(int a1, _DWORD *a2)
{
  if ( !a2[1] )
    return 1;
  if ( *(_DWORD *)(*a2 + 108) != a1 || *(_DWORD *)(*a2 + 112) & 0x13001000 )
    return 0;
  return 1;
}

//----- (004C1910) --------------------------------------------------------
char *__cdecl sub_4C1910(int a1)
{
  int v1; // edi
  unsigned __int8 *v2; // esi
  int v3; // ecx
  unsigned __int8 *v4; // edx
  int v5; // eax
  int v6; // esi
  unsigned __int8 *v7; // edx
  int v8; // eax
  unsigned __int8 *v9; // ecx

  v1 = 0;
  v2 = &byte_5D4594[1319284];
  while ( 2 )
  {
    v3 = 0;
    v4 = v2;
    do
    {
      v5 = *(_DWORD *)v4;
      if ( *(_DWORD *)v4 && *(_DWORD *)(v5 + 108) == a1 && !(*(_DWORD *)(v5 + 112) & 0x13001000) )
        return (char *)&byte_5D4594[140 * (v1 + 2 * v3) + 1319284];
      ++v3;
      v4 += 280;
    }
    while ( v3 < 2 );
    v2 += 140;
    ++v1;
    if ( (int)v2 < (int)&byte_5D4594[1319564] )
      continue;
    break;
  }
  v6 = 0;
  v7 = &byte_5D4594[1319284];
  while ( 2 )
  {
    v8 = 0;
    v9 = v7;
    do
    {
      if ( !*(_DWORD *)v9 )
        return (char *)&byte_5D4594[140 * (v6 + 2 * v8) + 1319284];
      ++v8;
      v9 += 280;
    }
    while ( v8 < 2 );
    v7 += 140;
    ++v6;
    if ( (int)v7 < (int)&byte_5D4594[1319564] )
      continue;
    break;
  }
  return 0;
}

//----- (004C19C0) --------------------------------------------------------
char *__cdecl sub_4C19C0(int a1)
{
  int v1; // edi
  unsigned __int8 *v2; // esi
  int v3; // ecx
  unsigned __int8 *v4; // edx
  int v5; // eax
  int v6; // esi
  unsigned __int8 *v7; // edx
  int v8; // eax
  unsigned __int8 *v9; // ecx

  v1 = 0;
  v2 = &byte_5D4594[1320308];
  while ( 2 )
  {
    v3 = 0;
    v4 = v2;
    do
    {
      v5 = *(_DWORD *)v4;
      if ( *(_DWORD *)v4 && *(_DWORD *)(v5 + 108) == a1 && !(*(_DWORD *)(v5 + 112) & 0x13001000) )
        return (char *)&byte_5D4594[140 * (v1 + 2 * v3) + 1320308];
      ++v3;
      v4 += 280;
    }
    while ( v3 < 2 );
    v2 += 140;
    ++v1;
    if ( (int)v2 < (int)&byte_5D4594[1320588] )
      continue;
    break;
  }
  v6 = 0;
  v7 = &byte_5D4594[1320308];
  while ( 2 )
  {
    v8 = 0;
    v9 = v7;
    do
    {
      if ( !*(_DWORD *)v9 )
        return (char *)&byte_5D4594[140 * (v6 + 2 * v8) + 1320308];
      ++v8;
      v9 += 280;
    }
    while ( v8 < 2 );
    v7 += 140;
    ++v6;
    if ( (int)v7 < (int)&byte_5D4594[1320588] )
      continue;
    break;
  }
  return 0;
}

//----- (004C1A70) --------------------------------------------------------
char *__cdecl sub_4C1A70(int a1, int *a2)
{
  _DWORD *v2; // eax
  int v3; // ecx
  _DWORD *v4; // eax
  _DWORD *v5; // edi
  char *v6; // eax
  char *result; // eax
  char v8[4]; // [esp+0h] [ebp-14h]
  int2 a1a; // [esp+4h] [ebp-10h]
  int v10; // [esp+Ch] [ebp-8h]
  int v11; // [esp+10h] [ebp-4h]

  v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3704);
  sub_46AA60(v2, &v10, &v11);
  v3 = v11 + 25;
  if ( a2 )
  {
    v3 = a2[1];
    a1a.field_0 = *a2;
  }
  else
  {
    a1a.field_0 = v10 + 25;
  }
  a1a.field_4 = v3;
  LOBYTE(v4) = sub_4C0910(&a1a);
  v5 = v4;
  if ( sub_4C18E0(*(_DWORD *)(a1 + 108), v4) )
  {
    *(_DWORD *)&byte_5D4594[1320932] = v5;
    v6 = sub_4C1910(*(_DWORD *)(a1 + 108));
    if ( v6 )
    {
      if ( *((_DWORD *)v6 + 1) )
        *(_DWORD *)&byte_5D4594[1320932] = v6;
    }
  }
  else
  {
    result = sub_4C1910(*(_DWORD *)(a1 + 108));
    *(_DWORD *)&byte_5D4594[1320932] = result;
    if ( !result )
      return result;
  }
  v8[0] = -55;
  v8[1] = 15;
  *(_WORD *)&v8[2] = sub_578B00(a1);
  return (char *)sub_40EBC0(31, 0, v8, 4);
}
// 4C1ACF: variable 'v4' is possibly undefined

//----- (004C1B50) --------------------------------------------------------
int __cdecl sub_4C1B50(int a1)
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1320964];
  if ( *(_DWORD *)&byte_5D4594[1320964] )
  {
    nox_swprintf((wchar_t *)&byte_5D4594[1320240], (const wchar_t *)&byte_587000[184316], *(_DWORD *)(a1 + 2));
    if ( *(_DWORD *)(a1 + 6) )
      nox_swprintf((wchar_t *)&byte_5D4594[1320868], (const wchar_t *)&byte_587000[184324], *(_DWORD *)(a1 + 6));
    else
      nox_wcscpy((wchar_t *)&byte_5D4594[1320868], (const wchar_t *)&byte_5D4594[1320984]);
    result = nox_swprintf((wchar_t *)&byte_5D4594[1320100], (const wchar_t *)&byte_587000[184336], *(_DWORD *)(a1 + 10));
  }
  return result;
}

//----- (004C1BC0) --------------------------------------------------------
int __cdecl sub_4C1BC0(int a1)
{
  unsigned int v1; // edx
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1320964];
  if ( *(_DWORD *)&byte_5D4594[1320964] )
  {
    result = a1;
    *(_DWORD *)&byte_5D4594[1320944] = *(_BYTE *)(a1 + 2) & 1;
    LOBYTE(v1) = *(_BYTE *)(a1 + 2);
    *(_DWORD *)&byte_5D4594[1320948] = (v1 >> 1) & 1;
  }
  return result;
}
// 4C1BDC: variable 'v1' is possibly undefined

//----- (004C1BF0) --------------------------------------------------------
int sub_4C1BF0()
{
  int result; // eax
  int v1; // esi
  _DWORD *v2; // eax
  _DWORD *v3; // eax

  result = *(_DWORD *)&byte_5D4594[1320964];
  v1 = *(_DWORD *)&byte_5D4594[2618908];
  if ( *(_DWORD *)&byte_5D4594[1320964] )
  {
    if ( *(_DWORD *)&byte_5D4594[2618908] )
    {
      sub_4C1410();
      v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3702);
      sub_46B490((int)v2, 16385, v1 + 4704, 0);
      v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1320940], 3703);
      result = sub_46B490((int)v3, 16385, (int)&byte_5D4594[1319844], 0);
    }
  }
  return result;
}

//----- (004C1C60) --------------------------------------------------------
int __fastcall sub_4C1C60(int a1, int a2)
{
  return (unsigned __int64)(a2 * (__int64)a1) >> 16;
}

//----- (004C1C70) --------------------------------------------------------
int __fastcall sub_4C1C70(int a1, int a2)
{
  return ((__int64)a1 << 16) / a2;
}

//----- (004C1C80) --------------------------------------------------------
int __cdecl sub_4C1C80(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_587000[184444] = a1;
  return result;
}

//----- (004C1C90) --------------------------------------------------------
int sub_4C1C90()
{
  return *(_DWORD *)&byte_587000[184444];
}

//----- (004C1CA0) --------------------------------------------------------
int __cdecl sub_4C1CA0(int a1)
{
  int result; // eax

  *(_DWORD *)&byte_587000[184448] = a1;
  if ( a1 == 3 )
  {
    sub_46AE60(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321020]);
    sub_46AEC0(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321016]);
    result = sub_46AEA0(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321016]);
  }
  else if ( a1 == 4 )
  {
    sub_46AE60(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321028]);
    sub_46AEC0(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321024]);
    result = sub_46AEA0(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321024]);
  }
  else
  {
    result = a1 - 5;
    if ( a1 == 5 )
    {
      sub_46AE60(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321012]);
      sub_46AEC0(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321008]);
      result = sub_46AEA0(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321008]);
    }
  }
  return result;
}

//----- (004C1D70) --------------------------------------------------------
int sub_4C1D70()
{
  return *(_DWORD *)&byte_587000[184448];
}

//----- (004C1D80) --------------------------------------------------------
int sub_4C1D80()
{
  wchar_t *v0; // eax
  _DWORD *v1; // esi
  char *v2; // eax
  _DWORD *v3; // eax
  _DWORD *v4; // eax
  int v5; // edx
  unsigned __int8 *v6; // eax

  *(_DWORD *)&byte_5D4594[1321004] = 0;
  *(_DWORD *)&byte_5D4594[1321000] = -145;
  *(_DWORD *)&byte_5D4594[1320988] = *(_DWORD *)&byte_5D4594[3805496] - 95;
  *(_DWORD *)&byte_5D4594[1320992] = -145;
  *(_DWORD *)&byte_5D4594[1321032] = sub_46C3E0(0, 8, *(_DWORD *)&byte_5D4594[3805496] - 95, -145, 87, 115, 0);
  sub_46B430(*(_DWORD **)&byte_5D4594[1321032], sub_4C2BD0, sub_4C24A0, 0);
  *(_DWORD *)&byte_5D4594[1321036] = sub_46C3E0(*(int *)&byte_5D4594[1321032], 136, 5, 38, 76, 76, 0);
  sub_46B430(*(_DWORD **)&byte_5D4594[1321036], sub_4C2B10, sub_4C1FE0, sub_4C2C20);
  v0 = sub_40F1D0((char *)&byte_587000[184592], 0, (const char *)&byte_587000[184556], 818);
  sub_46B000((wchar_t *)(*(_DWORD *)&byte_5D4594[1321036] + 36), v0);
  *(_DWORD *)&byte_5D4594[1320996] = sub_42F970((const char *)&byte_587000[184608]);
  v1 = sub_46C3E0(*(int *)&byte_5D4594[1321036], 160, 0, 0, 1, 1, 0);
  v2 = sub_42F970((const char *)&byte_587000[184628]);
  sub_46AE60((int)v1, (int)v2);
  sub_46AE40((int)v1, -5, -38);
  v3 = sub_46C3E0(*(int *)&byte_5D4594[1321032], 8, 19, 0, 48, 39, 0);
  sub_46B430(v3, sub_4C2BE0, sub_4C24A0, 0);
  *(_DWORD *)&byte_5D4594[1321008] = sub_42F970((const char *)&byte_587000[184644]);
  *(_DWORD *)&byte_5D4594[1321012] = sub_42F970((const char *)&byte_587000[184672]);
  *(_DWORD *)&byte_5D4594[1321016] = sub_42F970((const char *)&byte_587000[184696]);
  *(_DWORD *)&byte_5D4594[1321020] = sub_42F970((const char *)&byte_587000[184724]);
  *(_DWORD *)&byte_5D4594[1321024] = sub_42F970((const char *)&byte_587000[184748]);
  *(_DWORD *)&byte_5D4594[1321028] = sub_42F970((const char *)&byte_587000[184776]);
  v4 = sub_46C3E0(0, 168, *(_DWORD *)&byte_5D4594[1320988] + 27, *(_DWORD *)&byte_5D4594[1320992] + 12, 34, 34, 0);
  *(_DWORD *)&byte_5D4594[1321040] = v4;
  v5 = v4[11];
  BYTE1(v5) |= 1u;
  v4[11] = v5;
  sub_46B430(*(_DWORD **)&byte_5D4594[1321040], sub_4C24B0, 0, sub_4C2CE0);
  sub_46AE60(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321028]);
  sub_46AEC0(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321024]);
  sub_46AEA0(*(int *)&byte_5D4594[1321040], *(int *)&byte_5D4594[1321024]);
  sub_46AE40(*(int *)&byte_5D4594[1321040], -27, -12);
  byte_5D4594[1321200] = 0;
  sub_46AC00(*(int *)&byte_5D4594[1321032], 1);
  sub_46AC00(*(int *)&byte_5D4594[1321040], 1);
  v6 = &byte_5D4594[1321060];
  do
  {
    *(_DWORD *)v6 = 0;
    v6 += 32;
  }
  while ( (int)v6 < (int)&byte_5D4594[1321188] );
  sub_4C2BF0();
  *(_DWORD *)&byte_5D4594[1321044] = 0;
  *(_DWORD *)&byte_5D4594[1321204] = 0;
  *(_DWORD *)&byte_5D4594[1321196] = 0;
  return 1;
}

//----- (004C1FE0) --------------------------------------------------------
int __cdecl sub_4C1FE0(_DWORD *a1)
{
  int2 *v1; // ebp
  unsigned __int8 *v2; // ebx
  int v3; // ebp
  int v4; // eax
  int v5; // esi
  int v6; // eax
  int v7; // edi
  int v8; // ebp
  int v9; // edi
  BOOL v10; // edi
  int v11; // ecx
  unsigned int v12; // edx
  int v13; // ebx
  int *v14; // esi
  _DWORD *v15; // eax
  int v17; // [esp-18h] [ebp-4Ch]
  int v18; // [esp-14h] [ebp-48h]
  char v19; // [esp+7h] [ebp-2Dh]
  int v20; // [esp+8h] [ebp-2Ch]
  int v21; // [esp+Ch] [ebp-28h]
  int v22; // [esp+10h] [ebp-24h]
  int v23; // [esp+14h] [ebp-20h]
  int2 *v24; // [esp+18h] [ebp-1Ch]
  int2 a1a; // [esp+1Ch] [ebp-18h]
  int v26; // [esp+24h] [ebp-10h]
  int v27; // [esp+28h] [ebp-Ch]
  int v28; // [esp+2Ch] [ebp-8h]
  int v29; // [esp+30h] [ebp-4h]

  v1 = sub_4309F0();
  v24 = v1;
  if ( byte_5D4594[1321200] == 1 )
  {
    *(_DWORD *)&byte_5D4594[1320992] += 20;
    if ( *(_DWORD *)&byte_5D4594[1320992] >= *(int *)&byte_5D4594[1321004] )
    {
      *(_DWORD *)&byte_5D4594[1320992] = *(_DWORD *)&byte_5D4594[1321004];
      byte_5D4594[1321200] = 2;
    }
  }
  else if ( byte_5D4594[1321200] == 3 )
  {
    *(_DWORD *)&byte_5D4594[1320992] -= 20;
    if ( *(_DWORD *)&byte_5D4594[1320992] <= *(int *)&byte_5D4594[1321000] )
    {
      *(_DWORD *)&byte_5D4594[1320992] = *(_DWORD *)&byte_5D4594[1321000];
      byte_5D4594[1321200] = 0;
      sub_46AC00(*(int *)&byte_5D4594[1321032], 1);
      sub_46AC00(*(int *)&byte_5D4594[1321040], 1);
    }
  }
  sub_46A9B0(*(_DWORD **)&byte_5D4594[1321032], *(int *)&byte_5D4594[1320988], *(int *)&byte_5D4594[1320992]);
  sub_46A9B0(
    *(_DWORD **)&byte_5D4594[1321040],
    *(_DWORD *)&byte_5D4594[1320988] + 27,
    *(_DWORD *)&byte_5D4594[1320992] + 12);
  sub_46AA60(a1, &v28, &v29);
  sub_46AB70((int)a1, &v21, &v20);
  sub_43F320(0);
  if ( *(_DWORD *)&byte_5D4594[1320996] )
    sub_47D2C0(*(int *)&byte_5D4594[1320996], *(int *)&byte_5D4594[1320988], *(int *)&byte_5D4594[1320992]);
  v2 = &byte_5D4594[1321064];
  do
  {
    if ( *((_DWORD *)v2 - 1) )
    {
      switch ( v2[8] )
      {
        case 1u:
          v22 = 1;
          v23 = 1;
          break;
        case 2u:
          v22 = 1;
          v23 = 2;
          break;
        case 4u:
          v22 = 2;
          v23 = 2;
          break;
      }
      v3 = v28 + 38 * *(_DWORD *)v2 + 2;
      v4 = *((_DWORD *)v2 + 1);
      a1a.field_0 = v28 + 38 * *(_DWORD *)v2 + 2;
      v5 = v29 + 38 * v4 + 2;
      v21 = 38 * v22 - 4;
      v20 = 38 * v23 - 4;
      if ( *((_DWORD *)v2 + 4) )
      {
        sub_434460(*(int *)&byte_5D4594[2589772]);
        v18 = v20;
        v17 = v21;
        *((_DWORD *)v2 + 4) = 0;
        sub_49CE30(v3, v5, v17, v18);
      }
      else
      {
        v6 = sub_4C2440(*((_DWORD *)v2 - 2));
        if ( v6 )
        {
          sub_47D2C0(v6, v3, v5);
        }
        else
        {
          v7 = v3 + v21 / 2;
          v8 = v5 + v20 / 2;
          sub_434460(*(int *)&byte_5D4594[2650660]);
          sub_4B0BC0(v7, v8, 9);
          sub_4C3270(v7, v8, 9, *(int *)&byte_5D4594[2614248]);
          v3 = a1a.field_0;
        }
      }
      if ( sub_495180(*((_DWORD *)v2 - 3), &v27, &v26, &v19) )
      {
        if ( (_WORD)v26 )
          v9 = v20 * (unsigned __int16)v27 / (unsigned __int16)v26;
        else
          v9 = 0;
        if ( v19 )
          sub_434460(*(int *)&byte_5D4594[2650688]);
        else
          sub_434460(*(int *)&byte_5D4594[2598268]);
        sub_49CE30(v21 + v3 - 2, v5, 2, v20);
        if ( v19 )
          sub_434460(*(int *)&byte_5D4594[2618904]);
        else
          sub_434460(*(int *)&byte_5D4594[2650644]);
        sub_49CE30(v21 + v3 - 2, v20 + v5 - v9, 2, v9);
      }
      v1 = v24;
    }
    v2 += 32;
  }
  while ( (int)v2 < (int)&byte_5D4594[1321192] );
  v10 = sub_46AAB0(*(_DWORD **)&byte_5D4594[1321040], v1->field_0, v1->field_4);
  if ( sub_46AAB0(a1, v1->field_0, v1->field_4) || v10 || *(_DWORD *)&byte_5D4594[1321212] == 1 )
  {
    v11 = v1->field_4;
    a1a.field_0 = (v1->field_0 - v28) / 38;
    a1a.field_4 = (v11 - v29) / 38;
    v13 = sub_4C2410(&a1a);
    *(_DWORD *)&byte_5D4594[1321212] = 0;
    v14 = (int *)sub_4C2D60();
    if ( v14 )
    {
      do
      {
        v15 = sub_45A6F0(*v14);
        if ( v15 )
        {
          if ( v14 == (int *)v13 || v10 )
          {
            v15[30] |= 0x40000000u;
            *(_DWORD *)&byte_5D4594[1321212] = 1;
          }
          else
          {
            v15[30] &= 0xBFFFFFFF;
          }
        }
        v14 = (int *)sub_4C2D90((int)v14);
      }
      while ( v14 );
      v1 = v24;
    }
  }
  if ( *(_DWORD *)&byte_5D4594[1321044] && !sub_46AAB0(*(_DWORD **)&byte_5D4594[1321044], v1->field_0, v1->field_4) )
    sub_4C2470();
  return 1;
}

//----- (004C2410) --------------------------------------------------------
int __cdecl sub_4C2410(int2 *a1)
{
  int result; // eax
  int v2; // edx
  int v3; // ecx

  result = 0;
  if ( a1 )
  {
    v2 = a1->field_0;
    if ( a1->field_0 >= 0 && v2 < 2 )
    {
      v3 = a1->field_4;
      if ( v3 >= 0 && v3 < 2 )
        result = *(_DWORD *)&byte_5D4594[4 * (v3 + 2 * v2) + 1321180];
    }
  }
  return result;
}

//----- (004C2440) --------------------------------------------------------
int __cdecl sub_4C2440(int a1)
{
  const char *v1; // eax
  int v2; // eax

  v1 = (const char *)sub_44CEF0(a1);
  if ( !v1 )
    return 0;
  v2 = sub_427010(v1);
  return sub_427430(v2);
}

//----- (004C2470) --------------------------------------------------------
int sub_4C2470()
{
  int result; // eax

  sub_46C4E0(*(_DWORD **)&byte_5D4594[1321044]);
  *(_DWORD *)&byte_5D4594[1321044] = 0;
  *(_DWORD *)&byte_5D4594[1321204] = 0;
  sub_452D80(920, 100);
  result = *(_DWORD *)&byte_5D4594[1321040];
  *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321040] + 36) &= 0xFFFFFFFD;
  return result;
}

//----- (004C24A0) --------------------------------------------------------
int sub_4C24A0()
{
  return 1;
}

//----- (004C24B0) --------------------------------------------------------
int __cdecl sub_4C24B0(int a1, int a2, unsigned int a3)
{
  int2 a1a; // [esp+0h] [ebp-8h]

  switch ( a2 )
  {
    case 5:
    case 6:
      return 1;
    case 7:
      *(_DWORD *)&byte_5D4594[1321204] = 0;
      a1a.field_4 = a3 >> 16;
      a1a.field_0 = (unsigned __int16)a3;
      sub_4C2560(&a1a);
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321040] + 36) |= 2u;
      return 1;
    case 17:
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321040] + 36) |= 2u;
      return 0;
    case 18:
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321040] + 36) &= 0xFFFFFFFD;
      return 0;
    default:
      return 0;
  }
}

//----- (004C2560) --------------------------------------------------------
_DWORD *__cdecl sub_4C2560(int2 *a1)
{
  char **v1; // esi
  unsigned __int16 *v2; // eax
  int v3; // esi
  bool v4; // sf
  int v5; // ecx
  int v6; // edi
  int v7; // eax
  int v8; // edi
  int i; // ebp
  _DWORD *v10; // ebx
  int v12; // [esp+10h] [ebp-8h]
  int v13; // [esp+14h] [ebp-4h]

  *(_DWORD *)&byte_587000[184452] = 0;
  v1 = (char **)&byte_587000[184344];
  do
  {
    if ( v1 != (char **)&byte_587000[184352] )
    {
      v2 = sub_40F1D0(*v1, 0, (const char *)&byte_587000[184804], 588);
      sub_43F840(0, v2, &v12, &v13, *(int *)&byte_5D4594[3805496]);
      if ( *(_DWORD *)&byte_587000[184452] < v12 )
        *(_DWORD *)&byte_587000[184452] = v12;
    }
    ++v1;
  }
  while ( (int)v1 < (int)&byte_587000[184368] );
  *(_DWORD *)&byte_587000[184452] += 8;
  v3 = sub_43F320(0) + 2;
  v5 = a1->field_0 - *(_DWORD *)&byte_587000[184452] / 2;
  v4 = v5 < 0;
  v12 = a1->field_0 - *(_DWORD *)&byte_587000[184452] / 2;
  v6 = 5 * v3 + 12;
  if ( v4 )
  {
    v5 = 0;
  }
  else
  {
    if ( *(_DWORD *)&byte_587000[184452] + v5 < *(int *)&byte_5D4594[3805496] )
      goto LABEL_11;
    v5 = *(_DWORD *)&byte_5D4594[3805496] - *(_DWORD *)&byte_587000[184452] - 1;
  }
  v12 = v5;
LABEL_11:
  v7 = a1->field_4 - v6 / 2;
  v13 = v7;
  if ( v7 < 0 )
  {
    v7 = 0;
LABEL_15:
    v13 = v7;
    goto LABEL_16;
  }
  if ( v6 + v7 >= *(int *)&byte_5D4594[3807120] )
  {
    v7 = *(_DWORD *)&byte_5D4594[3805496] - v6 - 1;
    goto LABEL_15;
  }
LABEL_16:
  *(_DWORD *)&byte_5D4594[1321044] = sub_46C3E0(0, 40, v5, v7, *(int *)&byte_587000[184452], 5 * v3 + 12, 0);
  sub_46B430(*(_DWORD **)&byte_5D4594[1321044], 0, sub_4C26F0, 0);
  sub_46A8C0(*(int *)&byte_5D4594[1321044]);
  v8 = 0;
  for ( i = 0; i < 6; ++i )
  {
    if ( i != 2 )
    {
      v10 = sub_46C3E0(*(int *)&byte_5D4594[1321044], 8, 0, v8, *(int *)&byte_587000[184452], v3 + 1, 0);
      sub_46B430(v10, sub_4C2A60, sub_4C27F0, 0);
      v10[8] = i;
      v8 += v3 + 2;
    }
  }
  return sub_452D80(791, 100);
}

//----- (004C26F0) --------------------------------------------------------
int __cdecl sub_4C26F0(int yTop)
{
  int v1; // esi
  int result; // eax
  int xLeft; // [esp+4h] [ebp-Ch]
  int v4; // [esp+8h] [ebp-8h]
  int v5; // [esp+Ch] [ebp-4h]

  v1 = yTop;
  sub_46AA60((_DWORD *)yTop, &xLeft, &yTop);
  sub_46AB70(v1, &v4, &v5);
  sub_49CF10(xLeft, yTop, v4, v5);
  sub_434460(*(int *)&byte_5D4594[2650648]);
  sub_49F500(xLeft + 1, yTop);
  sub_49F570(v4 - 2, 0);
  sub_49E4B0();
  sub_49F500(xLeft + 1, yTop + v5);
  sub_49F570(v4 - 2, 0);
  sub_49E4B0();
  sub_49F500(xLeft, yTop + 1);
  sub_49F570(0, v5 - 2);
  sub_49E4B0();
  sub_49F500(xLeft + v4, yTop + 1);
  sub_49F570(0, v5 - 2);
  sub_49E4B0();
  result = 1;
  *(_DWORD *)&byte_5D4594[3799524] = 1;
  return result;
}

//----- (004C27F0) --------------------------------------------------------
int __cdecl sub_4C27F0(_DWORD *a1)
{
  int result; // eax
  unsigned __int16 *v2; // edi
  int2 *v3; // ebp
  int v4; // esi
  int v5; // ebx
  int v6; // edx
  int v7; // ebx
  int v8; // [esp-18h] [ebp-24h]
  __int16 *v9; // [esp-14h] [ebp-20h]
  int v10; // [esp+0h] [ebp-Ch]
  int v11; // [esp+4h] [ebp-8h]
  int v12; // [esp+8h] [ebp-4h]

  if ( !*(_DWORD *)&byte_5D4594[1321208] )
    *(_DWORD *)&byte_5D4594[1321208] = sub_4E3AA0((CHAR *)&byte_587000[184840]);
  if ( *(_DWORD *)&byte_5D4594[1321204] || (result = 1, a1[8] != 1) )
  {
    v2 = sub_40F1D0(*(char **)&byte_587000[4 * a1[8] + 184344], 0, (const char *)&byte_587000[184860], 446);
    sub_46AA60(a1, &v11, &v10);
    sub_43F840(0, v2, &v12, 0, 0);
    v3 = sub_4309F0();
    sub_43F320(0);
    v4 = (*(_DWORD *)&byte_587000[184452] - v12) / 2 + 1;
    if ( sub_46AAB0(a1, v3->field_0, v3->field_4) )
    {
      sub_4C2A00(v11 + v4, v10 + 3, *(int *)&byte_5D4594[2589772], *(int *)&byte_5D4594[2650656], (__int16 *)v2);
      if ( a1[8] != *(_DWORD *)&byte_587000[184552] )
      {
        *(_DWORD *)&byte_587000[184552] = a1[8];
        sub_452D80(920, 100);
        return 1;
      }
      return 1;
    }
    if ( *(_DWORD *)&byte_5D4594[1321204] )
    {
      if ( sub_4C2DD0(*(int *)&byte_5D4594[1321204]) )
      {
        sub_4C2A00(v11 + v4, v10 + 3, *(int *)&byte_5D4594[2523948], *(int *)&byte_5D4594[2650656], (__int16 *)v2);
        return 1;
      }
      v5 = a1[8];
      if ( v5 != 4 && v5 != 5 )
      {
        sub_4C2A00(v11 + v4, v10 + 3, *(int *)&byte_5D4594[2523948], *(int *)&byte_5D4594[2650656], (__int16 *)v2);
        return 1;
      }
      v6 = *(_DWORD *)&byte_5D4594[2650660];
      v9 = (__int16 *)v2;
      v8 = *(_DWORD *)&byte_5D4594[2650656];
    }
    else
    {
      v7 = a1[8];
      if ( v7 != 4 && v7 != 5 )
      {
        sub_4C2A00(v11 + v4, v10 + 3, *(int *)&byte_5D4594[2650684], *(int *)&byte_5D4594[2650656], (__int16 *)v2);
        return 1;
      }
      v9 = (__int16 *)v2;
      if ( !sub_4C2E00() )
      {
        sub_4C2A00(v11 + v4, v10 + 3, *(int *)&byte_5D4594[2650660], *(int *)&byte_5D4594[2650656], (__int16 *)v2);
        return 1;
      }
      v6 = *(_DWORD *)&byte_5D4594[2650684];
      v8 = *(_DWORD *)&byte_5D4594[2650656];
    }
    sub_4C2A00(v11 + v4, v10 + 3, v6, v8, v9);
    return 1;
  }
  return result;
}

//----- (004C2A00) --------------------------------------------------------
int __cdecl sub_4C2A00(int a1, int a2, int a3, int a4, __int16 *a5)
{
  unsigned __int8 *v5; // esi

  sub_434390(a4);
  v5 = &byte_587000[184520];
  do
  {
    sub_43F6E0(0, a5, a1 + *(_DWORD *)v5, a2 + *((_DWORD *)v5 + 1));
    v5 += 8;
  }
  while ( (int)v5 < (int)&byte_587000[184552] );
  sub_434390(a3);
  return sub_43F6E0(0, a5, a1, a2);
}

//----- (004C2A60) --------------------------------------------------------
int __cdecl sub_4C2A60(int a1, unsigned int a2)
{
  int result; // eax

  if ( a2 >= 5 )
  {
    if ( a2 <= 6 )
      return 1;
    if ( a2 == 7 )
    {
      LOBYTE(a2) = 120;
      result = *(_DWORD *)(a1 + 32);
      if ( result == 2 )
        return 1;
      if ( *(_DWORD *)&byte_5D4594[1321204] )
      {
        *(_WORD *)((char *)&a2 + 1) = **(_WORD **)&byte_5D4594[1321204];
      }
      else
      {
        if ( result == 1 )
          return result;
        *(_WORD *)((char *)&a2 + 1) = 0;
      }
      HIBYTE(a2) = *(_BYTE *)(a1 + 32);
      sub_40EBC0(31, 0, &a2, 4);
      sub_4C2470();
      if ( !*(_DWORD *)(a1 + 32) )
      {
        sub_452D80(777, 100);
        return 1;
      }
      sub_452D80(898, 100);
      return 1;
    }
  }
  return 0;
}

//----- (004C2B10) --------------------------------------------------------
int __cdecl sub_4C2B10(_DWORD *a1, unsigned int a2, unsigned int a3)
{
  unsigned int v3; // edx
  int2 v5; // [esp+0h] [ebp-10h]
  int2 a1a; // [esp+8h] [ebp-8h]

  if ( a2 >= 5 )
  {
    if ( a2 <= 6 )
      return 1;
    if ( a2 == 7 )
    {
      v5.field_4 = a3 >> 16;
      v5.field_0 = (unsigned __int16)a3;
      sub_46AA60(a1, &a2, &a3);
      a1a.field_0 = (v5.field_0 - (int)a2) / 38;
      a1a.field_4 = (v5.field_4 - (int)a3) / 38;
      *(_DWORD *)&byte_5D4594[1321204] = sub_4C2410(&a1a);
      if ( *(_DWORD *)&byte_5D4594[1321204] )
        sub_4C2560(&v5);
      return 1;
    }
  }
  return 0;
}

//----- (004C2BD0) --------------------------------------------------------
int sub_4C2BD0()
{
  return 0;
}

//----- (004C2BE0) --------------------------------------------------------
int sub_4C2BE0()
{
  return 1;
}

//----- (004C2BF0) --------------------------------------------------------
int *sub_4C2BF0()
{
  int *v0; // edx
  int *result; // eax
  int v2; // ecx

  v0 = (int *)&byte_5D4594[1321180];
  do
  {
    result = v0;
    v2 = 2;
    do
    {
      *result = 0;
      result += 2;
      --v2;
    }
    while ( v2 );
    ++v0;
  }
  while ( (int)v0 < (int)&byte_5D4594[1321188] );
  return result;
}

//----- (004C2C20) --------------------------------------------------------
int __cdecl sub_4C2C20(_DWORD *a1, int a2, unsigned int a3)
{
  wchar_t *v3; // eax
  int2 a2a; // [esp+0h] [ebp-8h]

  a2a.field_4 = a3 >> 16;
  a2a.field_0 = (unsigned __int16)a3;
  v3 = (wchar_t *)sub_4C2C60(a1, &a2a);
  sub_4776B0(v3);
  return 1;
}

//----- (004C2C60) --------------------------------------------------------
int __cdecl sub_4C2C60(_DWORD *a1, int2 *a2)
{
  int v2; // ecx
  unsigned int v3; // edx
  int v4; // eax
  int result; // eax
  int v6; // [esp+4h] [ebp-Ch]
  int2 a1a; // [esp+8h] [ebp-8h]

  sub_46AA60(a1, &a1, &v6);
  a1a.field_0 = (a2->field_0 - (int)a1) / 38;
  a1a.field_4 = (a2->field_4 - (int)v6) / 38;
  v4 = sub_4C2410(&a1a);
  if ( v4 )
    result = sub_44CF30(*(_DWORD *)(v4 + 4));
  else
    result = 0;
  return result;
}

//----- (004C2CE0) --------------------------------------------------------
int sub_4C2CE0()
{
  wchar_t *v0; // eax
  wchar_t *v2; // eax
  wchar_t *v3; // eax

  switch ( *(_DWORD *)&byte_587000[184448] )
  {
    case 3:
      v3 = sub_40F1D0((char *)&byte_587000[184980], 0, (const char *)&byte_587000[184944], 785);
      sub_4776B0(v3);
      break;
    case 4:
      v2 = sub_40F1D0((char *)&byte_587000[184932], 0, (const char *)&byte_587000[184896], 782);
      sub_4776B0(v2);
      return 1;
    case 5:
      v0 = sub_40F1D0((char *)&byte_587000[185028], 0, (const char *)&byte_587000[184992], 788);
      sub_4776B0(v0);
      return 1;
  }
  return 1;
}

//----- (004C2D60) --------------------------------------------------------
char *sub_4C2D60()
{
  int v0; // eax
  unsigned __int8 *v1; // ecx

  v0 = 0;
  v1 = &byte_5D4594[1321060];
  while ( !*(_DWORD *)v1 )
  {
    v1 += 32;
    ++v0;
    if ( (int)v1 >= (int)&byte_5D4594[1321188] )
      return 0;
  }
  return (char *)&byte_5D4594[32 * v0 + 1321052];
}

//----- (004C2D90) --------------------------------------------------------
char *__cdecl sub_4C2D90(int a1)
{
  int v1; // eax
  unsigned __int8 *v2; // ecx

  v1 = *(_DWORD *)(a1 + 24) + 1;
  if ( v1 >= 4 )
    return 0;
  v2 = &byte_5D4594[32 * v1 + 1321060];
  while ( !*(_DWORD *)v2 )
  {
    v2 += 32;
    ++v1;
    if ( (int)v2 >= (int)&byte_5D4594[1321188] )
      return 0;
  }
  return (char *)&byte_5D4594[32 * v1 + 1321052];
}

//----- (004C2DD0) --------------------------------------------------------
BOOL __cdecl sub_4C2DD0(int a1)
{
  int v1; // eax

  v1 = *(_DWORD *)&byte_5D4594[1321208];
  if ( !*(_DWORD *)&byte_5D4594[1321208] )
  {
    v1 = sub_4E3AA0((CHAR *)&byte_587000[185040]);
    *(_DWORD *)&byte_5D4594[1321208] = v1;
  }
  return *(_DWORD *)(a1 + 4) != v1;
}

//----- (004C2E00) --------------------------------------------------------
int sub_4C2E00()
{
  char *v0; // esi

  if ( !*(_DWORD *)&byte_5D4594[1321208] )
    *(_DWORD *)&byte_5D4594[1321208] = sub_4E3AA0((CHAR *)&byte_587000[185060]);
  v0 = sub_4C2D60();
  if ( !v0 )
    return 0;
  while ( !sub_4C2DD0((int)v0) )
  {
    v0 = sub_4C2D90((int)v0);
    if ( !v0 )
      return 0;
  }
  return 1;
}

//----- (004C2E50) --------------------------------------------------------
char __cdecl sub_4C2E50(int a1, int a2, int a3)
{
  char *v3; // eax

  v3 = sub_4C2D60();
  if ( v3 )
  {
    while ( *(_DWORD *)v3 != a1 || *((_DWORD *)v3 + 1) != a2 )
    {
      v3 = sub_4C2D90((int)v3);
      if ( !v3 )
        goto LABEL_5;
    }
  }
  else
  {
LABEL_5:
    v3 = sub_4C2F20();
    if ( v3 )
    {
      *(_DWORD *)v3 = a1;
      *((_DWORD *)v3 + 1) = a2;
      v3[20] = sub_4C2EF0(a2);
      sub_4C2F70();
      LOBYTE(v3) = byte_5D4594[1321200];
      if ( !byte_5D4594[1321200] || byte_5D4594[1321200] == 3 )
      {
        if ( !a3 )
          sub_452D80(801, 100);
        byte_5D4594[1321200] = 1;
        sub_46AC00(*(int *)&byte_5D4594[1321032], 0);
        LOBYTE(v3) = sub_46AC00(*(int *)&byte_5D4594[1321040], 0);
      }
      ++*(_DWORD *)&byte_5D4594[1321196];
    }
  }
  return (char)v3;
}

//----- (004C2EF0) --------------------------------------------------------
int __cdecl sub_4C2EF0(int a1)
{
  int v1; // eax
  int v3; // eax

  v1 = *(_DWORD *)(sub_44CF10(a1) + 36);
  if ( v1 & 1 )
    return 1;
  v3 = -((v1 & 2) != 0);
  LOBYTE(v3) = v3 & 0xFE;
  return v3 + 4;
}

//----- (004C2F20) --------------------------------------------------------
char *sub_4C2F20()
{
  int v0; // esi
  unsigned __int8 *v1; // eax
  char *result; // eax

  v0 = 0;
  v1 = &byte_5D4594[1321060];
  while ( *(_DWORD *)v1 )
  {
    v1 += 32;
    ++v0;
    if ( (int)v1 >= (int)&byte_5D4594[1321188] )
      return 0;
  }
  memset(&byte_5D4594[32 * v0 + 1321052], 0, 0x20u);
  *(_DWORD *)&byte_5D4594[32 * v0 + 1321060] = 1;
  result = (char *)&byte_5D4594[32 * v0 + 1321052];
  *(_DWORD *)&byte_5D4594[32 * v0 + 1321076] = v0;
  return result;
}

//----- (004C2F70) --------------------------------------------------------
char *sub_4C2F70()
{
  int i; // edi
  char *result; // eax
  char *j; // esi

  sub_4C2BF0();
  for ( i = 1; ; i = 4 )
  {
    while ( 1 )
    {
      result = sub_4C2D60();
      for ( j = result; result; j = result )
      {
        if ( (unsigned __int8)j[20] == i )
          sub_4C2FD0((int)j);
        result = sub_4C2D90((int)j);
      }
      if ( i != 1 )
        break;
      i = 2;
    }
    if ( i != 2 )
      break;
  }
  return result;
}

//----- (004C2FD0) --------------------------------------------------------
int __cdecl sub_4C2FD0(int a1)
{
  int v1; // esi
  int *v2; // edi
  int v3; // edx
  int result; // eax

  v1 = 0;
  v2 = (int *)(a1 + 12);
  while ( 1 )
  {
    v3 = *(unsigned __int8 *)(a1 + 20);
    *v2 = *(_DWORD *)&byte_587000[8 * v1 + 184456];
    *(_DWORD *)(a1 + 16) = *(_DWORD *)&byte_587000[8 * v1 + 184460];
    if ( sub_4C30C0(v2, v3) )
      break;
    result = *(unsigned __int8 *)(a1 + 20);
    v1 += result;
    if ( v1 >= 4 )
      return result;
  }
  return sub_4C3030((int *)(a1 + 12), *(unsigned __int8 *)(a1 + 20), a1);
}

//----- (004C3030) --------------------------------------------------------
int __cdecl sub_4C3030(int *a1, int a2, int a3)
{
  int v3; // esi
  int result; // eax
  int v5; // ebx
  int v6; // eax
  unsigned __int8 *v7; // ecx

  if ( a2 == 1 )
  {
    v3 = 1;
    a2 = 1;
  }
  else if ( a2 == 2 )
  {
    v3 = 1;
    a2 = 2;
  }
  else
  {
    v3 = 2;
    if ( a2 == 4 )
      a2 = 2;
    else
      v3 = a2;
  }
  result = a2;
  v5 = a1[1];
  if ( v5 < v5 + a2 )
  {
    do
    {
      v6 = *a1;
      if ( *a1 < *a1 + v3 )
      {
        v7 = &byte_5D4594[4 * (v5 + 2 * v6) + 1321180];
        do
        {
          *(_DWORD *)v7 = a3;
          ++v6;
          v7 += 8;
        }
        while ( v6 < v3 + *a1 );
      }
      ++v5;
      result = a1[1] + a2;
    }
    while ( v5 < result );
  }
  return result;
}

//----- (004C30C0) --------------------------------------------------------
int __cdecl sub_4C30C0(int *a1, int a2)
{
  int v2; // ecx
  int v3; // eax
  int v4; // esi
  int v5; // ebx
  int v6; // edi
  int v7; // edx
  int v8; // eax
  unsigned __int8 *v9; // ecx

  switch ( a2 )
  {
    case 1:
      v2 = 1;
      v3 = 1;
      break;
    case 2:
      v2 = 1;
      v3 = 2;
      break;
    case 4:
      v2 = 2;
      v3 = 2;
      break;
    default:
      v2 = a2;
      v3 = a2;
      break;
  }
  v4 = a1[1];
  v5 = v4 + v3;
  if ( v4 >= v4 + v3 )
    return 1;
  v6 = *a1;
  v7 = *a1 + v2;
  while ( 1 )
  {
    v8 = *a1;
    if ( v6 < v7 )
      break;
LABEL_14:
    if ( ++v4 >= v5 )
      return 1;
  }
  v9 = &byte_5D4594[4 * (v4 + 2 * v6) + 1321180];
  while ( !*(_DWORD *)v9 )
  {
    ++v8;
    v9 += 8;
    if ( v8 >= v7 )
      goto LABEL_14;
  }
  return 0;
}

//----- (004C3140) --------------------------------------------------------
int *__cdecl sub_4C3140(int a1, void *a2)
{
  int *result; // eax
  int *v3; // esi
  _DWORD *v4; // eax

  result = (int *)sub_4C31D0(a1);
  v3 = result;
  if ( result )
  {
    if ( result == *(int **)&byte_5D4594[1321204] )
      sub_4C2470();
    v4 = sub_45A6F0(a1);
    if ( v4 )
      v4[30] &= 0xBFFFFFFF;
    sub_4C3030(v3 + 3, *((unsigned __int8 *)v3 + 20), 0);
    sub_4C3210((int)v3);
    sub_4C2F70();
    result = (int *)--*(_DWORD *)&byte_5D4594[1321196];
    if ( !*(_DWORD *)&byte_5D4594[1321196] )
    {
      result = (int *)a2;
      if ( !a2 )
        result = sub_452D80(802, 100);
      byte_5D4594[1321200] = 3;
    }
  }
  return result;
}

//----- (004C31D0) --------------------------------------------------------
char *__cdecl sub_4C31D0(int a1)
{
  int v1; // eax
  unsigned __int8 *v2; // ecx

  v1 = 0;
  v2 = &byte_5D4594[1321052];
  while ( !*((_DWORD *)v2 + 2) || *(_DWORD *)v2 != a1 )
  {
    v2 += 32;
    ++v1;
    if ( (int)v2 >= (int)&byte_5D4594[1321180] )
      return 0;
  }
  return (char *)&byte_5D4594[32 * v1 + 1321052];
}

//----- (004C3210) --------------------------------------------------------
int __cdecl sub_4C3210(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)(a1 + 8) = 0;
  return result;
}

//----- (004C3220) --------------------------------------------------------
BOOL __cdecl sub_4C3220(int a1)
{
  return sub_4C31D0(*(_DWORD *)(a1 + 128)) != 0;
}

//----- (004C3240) --------------------------------------------------------
BOOL __cdecl sub_4C3240(int a1)
{
  return sub_4C31D0(a1) != 0;
}

//----- (004C3260) --------------------------------------------------------
BOOL sub_4C3260()
{
  return sub_4C2D60() != 0;
}

//----- (004C3270) --------------------------------------------------------
int __cdecl sub_4C3270(int a1, int a2, int a3, int a4)
{
  sub_434460(a4);
  return sub_4B0B90(a1, a2, a3);
}

//----- (004C32A0) --------------------------------------------------------
int __cdecl sub_4C32A0(int a1, int a2, int a3, int a4)
{
  unsigned __int8 *v4; // ebx
  int v5; // esi
  int v6; // edi
  int v8; // [esp+10h] [ebp-8h]
  int v9; // [esp+14h] [ebp-4h]

  v8 = (a3 * *(_DWORD *)&byte_587000[192088]) >> 4;
  v9 = (a3 * *(_DWORD *)&byte_587000[192092]) >> 4;
  sub_434460(a4);
  sub_434560(1);
  v4 = &byte_587000[192220];
  do
  {
    v5 = (a3 * *((_DWORD *)v4 - 1)) >> 4;
    v6 = (*(_DWORD *)v4 * a3) >> 4;
    sub_49F500(a1 + v8, a2 + v9);
    sub_49F500(v5 + a1, v6 + a2);
    sub_49E4B0();
    v4 += 128;
    v8 = v5;
    v9 = v6;
  }
  while ( (int)v4 < (int)&byte_587000[194140] );
  sub_49F500(a1 + ((a3 * *(_DWORD *)&byte_587000[192088]) >> 4), a2 + ((a3 * *(_DWORD *)&byte_587000[192092]) >> 4));
  sub_49F500(a1 + v5, a2 + v6);
  sub_49E4B0();
  return sub_434560(0);
}

//----- (004C3390) --------------------------------------------------------
int sub_4C3390()
{
  *(_DWORD *)&byte_5D4594[1321220] = sub_42F970((const char *)&byte_587000[185080]);
  *(_DWORD *)&byte_5D4594[1321216] = sub_46C3E0(
                                       0,
                                       136,
                                       *(_DWORD *)&byte_5D4594[3805496] - 50,
                                       *(_DWORD *)&byte_5D4594[3807120] / 2 - 100,
                                       50,
                                       50,
                                       0);
  sub_46AE60(*(int *)&byte_5D4594[1321216], *(int *)&byte_5D4594[1321220]);
  sub_46B430(*(_DWORD **)&byte_5D4594[1321216], 0, sub_4C3410, 0);
  sub_46AC00(*(int *)&byte_5D4594[1321216], 1);
  return 1;
}

//----- (004C3410) --------------------------------------------------------
int __cdecl sub_4C3410(int *a1)
{
  int *v1; // esi
  int v2; // edx
  int v4; // [esp+4h] [ebp-4h]

  v1 = a1;
  sub_46AA60(a1, &a1, &v4);
  v2 = v1[25];
  a1 = (int *)((char *)a1 + v1[24]);
  sub_47D2C0(v1[15], (int)a1, v2 + v4);
  return 1;
}

//----- (004C3460) --------------------------------------------------------
int __cdecl sub_4C3460(int a1)
{
  return sub_46AC00(*(int *)&byte_5D4594[1321216], a1);
}

//----- (004C3480) --------------------------------------------------------
BOOL sub_4C3480()
{
  return *(_DWORD *)&byte_5D4594[1321216] && !sub_46ACC0(*(int *)&byte_5D4594[1321216]);
}

//----- (004C34A0) --------------------------------------------------------
int sub_4C34A0()
{
  int result; // eax

  result = sub_46C4E0(*(_DWORD **)&byte_5D4594[1321216]);
  *(_DWORD *)&byte_5D4594[1321216] = 0;
  return result;
}

//----- (004C34C0) --------------------------------------------------------
void __cdecl sub_4C34C0(int a1)
{
  _DWORD *v1; // eax

  if ( *(_DWORD *)&byte_5D4594[1321224] )
  {
    if ( a1 )
    {
      v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321224], 8901);
      sub_46B490((int)v1, 16385, a1, 0);
    }
  }
}

//----- (004C3500) --------------------------------------------------------
int sub_4C3500()
{
  _DWORD *v0; // ecx

  v0 = sub_4A0AD0((const char *)&byte_587000[185096], 0);
  *(_DWORD *)&byte_5D4594[1321224] = v0;
  if ( v0 )
  {
    sub_46A9B0(v0, (*(_DWORD *)&byte_5D4594[3805496] - 320) / 2, (*(_DWORD *)&byte_5D4594[3807120] - 240) / 2);
    v0 = *(_DWORD **)&byte_5D4594[1321224];
  }
  sub_46AC00((int)v0, 1);
  return *(_DWORD *)&byte_5D4594[1321224];
}

//----- (004C3560) --------------------------------------------------------
int sub_4C3560()
{
  sub_46A8C0(*(int *)&byte_5D4594[1321224]);
  return *(_DWORD *)&byte_5D4594[1321224];
}

//----- (004C3580) --------------------------------------------------------
int sub_4C3580()
{
  return sub_46AC00(*(int *)&byte_5D4594[1321224], 1);
}

//----- (004C35B0) --------------------------------------------------------
int __cdecl sub_4C35B0(int a1)
{
  if ( sub_46ACC0(*(int *)&byte_5D4594[1321228]) )
    return 0;
  sub_413A00(0);
  if ( a1 )
  {
    sub_46AC00(*(int *)&byte_5D4594[1321228], 1);
  }
  else
  {
    sub_4C3620();
    sub_433290((char *)&byte_587000[185108]);
    sub_46AC00(*(int *)&byte_5D4594[1321228], 1);
    sub_472280();
    sub_4ADA40();
  }
  return 1;
}

//----- (004C3620) --------------------------------------------------------
char *sub_4C3620()
{
  int v0; // ebp
  int i; // esi
  wchar_t *v2; // eax
  int v3; // edi
  wchar_t *v4; // eax
  char *v5; // ebx
  wchar_t *v6; // eax
  char *v7; // eax
  wchar_t *v8; // eax
  int v9; // esi
  wchar_t *v10; // eax
  char *result; // eax
  char v12[256]; // [esp+8h] [ebp-100h]

  v0 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321240] + 32);
  sub_42CD90();
  for ( i = 0; i < *(__int16 *)(v0 + 44); ++i )
  {
    v2 = (wchar_t *)sub_46B490(*(int *)&byte_5D4594[1321240], 16406, i, 0);
    v3 = sub_42EA40(v2);
    v4 = (wchar_t *)sub_46B490(*(int *)&byte_5D4594[1321244], 16406, i, 0);
    v5 = sub_42E960(v4);
    v6 = (wchar_t *)sub_46B490(*(int *)&byte_5D4594[1321248], 16406, i, 0);
    v7 = sub_42E960(v6);
    if ( v7 )
    {
      nox_sprintf(v12, (const char *)&byte_587000[185116], v7, v3);
      sub_42CF50(v12);
    }
    if ( v5 )
    {
      nox_sprintf(v12, (const char *)&byte_587000[185124], v5, v3);
      sub_42CF50(v12);
    }
  }
  v8 = sub_40F1D0((char *)&byte_587000[185172], 0, (const char *)&byte_587000[185132], 191);
  v9 = sub_42EA40(v8);
  v10 = sub_40F1D0((char *)&byte_587000[185240], 0, (const char *)&byte_587000[185200], 192);
  result = sub_42E960(v10);
  if ( result )
  {
    nox_sprintf(v12, (const char *)&byte_587000[185252], result, v9);
    result = (char *)sub_42CF50(v12);
  }
  return result;
}

//----- (004C3760) --------------------------------------------------------
int sub_4C3760()
{
  int result; // eax
  _DWORD **v1; // eax
  _DWORD *v2; // esi
  _DWORD *v3; // esi
  int v4; // esi
  int v5; // edi
  _DWORD *v6; // eax
  int v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax
  _DWORD *v10; // esi
  wchar_t *v11; // eax

  result = sub_4A0AD0((const char *)&byte_587000[185260], sub_4C3A90);
  *(_DWORD *)&byte_5D4594[1321228] = result;
  if ( result )
  {
    *(_DWORD *)&byte_5D4594[1321236] = sub_46B0C0((_DWORD *)result, 910);
    *(_DWORD *)&byte_5D4594[1321240] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], 911);
    *(_DWORD *)&byte_5D4594[1321244] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], 912);
    *(_DWORD *)&byte_5D4594[1321248] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], 913);
    result = *(_DWORD *)&byte_5D4594[1321236];
    if ( *(_DWORD *)&byte_5D4594[1321236] )
    {
      v1 = *(_DWORD ***)(*(_DWORD *)&byte_5D4594[1321236] + 32);
      *v1[7] = 921;
      *v1[8] = 922;
      *v1[9] = 920;
      sub_46B2C0(*(int *)&byte_5D4594[1321236], sub_4C3CD0);
      sub_46B120(*(_DWORD **)&byte_5D4594[1321240], *(int *)&byte_5D4594[1321236]);
      sub_46B120(*(_DWORD **)&byte_5D4594[1321244], *(int *)&byte_5D4594[1321236]);
      sub_46B120(*(_DWORD **)&byte_5D4594[1321248], *(int *)&byte_5D4594[1321236]);
      sub_46B300(*(int *)&byte_5D4594[1321244], sub_4C3A60);
      sub_46B300(*(int *)&byte_5D4594[1321248], sub_4C3A60);
      v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], 921);
      sub_46B490(*(int *)&byte_5D4594[1321240], 16408, (int)v2, 0);
      sub_46B490(*(int *)&byte_5D4594[1321244], 16408, (int)v2, 0);
      sub_46B490(*(int *)&byte_5D4594[1321248], 16408, (int)v2, 0);
      v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], 922);
      sub_46B490(*(int *)&byte_5D4594[1321240], 16409, (int)v3, 0);
      sub_46B490(*(int *)&byte_5D4594[1321244], 16409, (int)v3, 0);
      sub_46B490(*(int *)&byte_5D4594[1321248], 16409, (int)v3, 0);
      v4 = 971;
      v5 = sub_47DBC0() + 971;
      if ( v5 > 971 )
      {
        do
        {
          v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], v4);
          sub_46ABB0((int)v6, 1);
          ++v4;
        }
        while ( v4 < v5 );
      }
      v7 = sub_430AF0();
      v8 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], v7 + 971);
      sub_46B490((int)v8, 16392, 1, 0);
      sub_46A9B0(
        *(_DWORD **)&byte_5D4594[1321228],
        (*(_DWORD *)&byte_5D4594[3805496] - *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321228] + 8)) / 2,
        0);
      *(_DWORD *)&byte_5D4594[1321232] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], 980);
      sub_46B120(*(_DWORD **)&byte_5D4594[1321232], 0);
      sub_46B2C0(*(int *)&byte_5D4594[1321232], sub_4C3A90);
      sub_46B300(*(int *)&byte_5D4594[1321232], sub_4C3EB0);
      sub_46AC00(*(int *)&byte_5D4594[1321232], 1);
      sub_46A9B0(
        *(_DWORD **)&byte_5D4594[1321232],
        (*(_DWORD *)&byte_5D4594[3805496] - *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321232] + 8)) / 2,
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321232] + 20));
      v9 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321232], 981);
      sub_46AEE0((int)v9, (int)&byte_5D4594[1321256]);
      v10 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], 932);
      v11 = sub_40F1D0((char *)&byte_587000[185316], 0, (const char *)&byte_587000[185276], 603);
      sub_46AEE0((int)v10, (int)v11);
      sub_46ABB0((int)v10, 1);
      sub_46AC00(*(int *)&byte_5D4594[1321228], 1);
      result = 1;
    }
  }
  return result;
}

//----- (004C3A60) --------------------------------------------------------
int __cdecl sub_4C3A60(_DWORD *a1, unsigned int a2, unsigned int a3, int a4)
{
  int result; // eax

  if ( a2 < 0x13 || a2 > 0x14 )
    result = sub_4A28E0(a1, a2, a3, a4);
  else
    result = 0;
  return result;
}

//----- (004C3A90) --------------------------------------------------------
int __cdecl sub_4C3A90(int a1, int a2, int *a3, int a4)
{
  int v3; // esi
  int result; // eax

  if ( a2 == 23 )
    return 1;
  if ( a2 != 16391 )
    return 0;
  v3 = sub_46B0A0(a3);
  sub_452D80(921, 100);
  switch ( v3 )
  {
    case 931:
      sub_42CD90();
      sub_4317B0((char *)&byte_587000[185332], 1);
      sub_4C3B70();
      result = 0;
      break;
    case 932:
      sub_4C35B0(0);
      result = 0;
      break;
    case 933:
      sub_4C3CB0();
      result = 0;
      break;
    case 971:
    case 972:
    case 973:
      sub_430AA0(v3 - 971);
      return 0;
    default:
      return 0;
  }
  return result;
}

//----- (004C3B70) --------------------------------------------------------
char *sub_4C3B70()
{
  char *result; // eax
  int *v1; // esi
  char *v2; // edi
  char *v3; // ebx

  sub_46B490(*(int *)&byte_5D4594[1321236], 16399, 0, 0);
  sub_46B490(*(int *)&byte_5D4594[1321240], 16399, 0, 0);
  sub_46B490(*(int *)&byte_5D4594[1321244], 16399, 0, 0);
  sub_46B490(*(int *)&byte_5D4594[1321248], 16399, 0, 0);
  result = *(char **)&byte_587000[75892];
  if ( *(_DWORD *)&byte_587000[75892] )
  {
    v1 = (int *)&byte_587000[75896];
    do
    {
      if ( *v1 != 44 )
      {
        sub_46B490(*(int *)&byte_5D4594[1321240], 16397, v1[1], -1);
        sub_46B490(*(int *)&byte_5D4594[1321236], 16397, (int)&byte_587000[185340], -1);
        v2 = sub_42E8E0(*v1, 1);
        v3 = sub_42E8E0(*v1, 2);
        if ( v2 && *(_WORD *)v2 )
          sub_46B490(*(int *)&byte_5D4594[1321244], 16397, (int)v2, -1);
        else
          sub_46B490(*(int *)&byte_5D4594[1321244], 16397, (int)&byte_587000[185344], -1);
        if ( v3 && *(_WORD *)v3 && v2 != v3 )
          sub_46B490(*(int *)&byte_5D4594[1321248], 16397, (int)v3, -1);
        else
          sub_46B490(*(int *)&byte_5D4594[1321248], 16397, (int)&byte_587000[185348], -1);
      }
      result = (char *)v1[2];
      v1 += 3;
    }
    while ( result );
  }
  return result;
}

//----- (004C3CB0) --------------------------------------------------------
char *sub_4C3CB0()
{
  sub_42CD90();
  sub_4317B0((char *)&byte_587000[185352], 1);
  return sub_4C3B70();
}

//----- (004C3CD0) --------------------------------------------------------
int __cdecl sub_4C3CD0(int a1, unsigned int a2, int a3, int a4)
{
  int v5; // eax
  wchar_t *v6; // eax
  int v7; // esi
  int v8; // esi
  int v9; // [esp-4h] [ebp-10h]

  if ( a2 > 0x4007 )
  {
    if ( a2 == 16393 )
    {
      v7 = *(_DWORD *)(a1 + 32);
      sub_4A30D0(a1, 0x4009u, (wchar_t *)a3, a4);
      v8 = sub_4A4800(v7);
      sub_46B490(*(int *)&byte_5D4594[1321240], 16412, v8, 0);
      sub_46B490(*(int *)&byte_5D4594[1321244], 16412, v8, 0);
      sub_46B490(*(int *)&byte_5D4594[1321248], 16412, v8, 0);
    }
    else if ( a2 == 16400 )
    {
      v5 = *(_DWORD *)(a3 + 32);
      if ( (int)*(_DWORD *)(v5 + 48) >= 0 )
      {
        *(_DWORD *)&byte_5D4594[1321252] = a3;
        v9 = sub_46B490(*(int *)&byte_5D4594[1321240], 16406, *(_DWORD *)(v5 + 48), 0);
        v6 = sub_40F1D0((char *)&byte_587000[185404], 0, (const char *)&byte_587000[185364], 436);
        nox_swprintf((wchar_t *)&byte_5D4594[1321256], (const wchar_t *)&byte_587000[185428], v6, v9);
        sub_46A8C0(*(int *)&byte_5D4594[1321232]);
        sub_46B500(*(int *)&byte_5D4594[1321232]);
        sub_46C690(*(int *)&byte_5D4594[1321232]);
        return sub_4A30D0(a1, 0x4010u, (wchar_t *)a3, a4);
      }
    }
  }
  else
  {
    if ( a2 != 16391 )
    {
      if ( a2 == 23 )
        return 1;
      if ( a2 != 0x4000 )
        return sub_4A30D0(a1, a2, (wchar_t *)a3, a4);
    }
    if ( (_DWORD *)a3 == sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], 921)
      || (_DWORD *)a3 == sub_46B0C0(*(_DWORD **)&byte_5D4594[1321228], 922) )
    {
      sub_46B490(*(int *)&byte_5D4594[1321240], a2, a3, 0);
      sub_46B490(*(int *)&byte_5D4594[1321244], a2, a3, 0);
      sub_46B490(*(int *)&byte_5D4594[1321248], a2, a3, 0);
      return sub_4A30D0(a1, a2, (wchar_t *)a3, a4);
    }
  }
  return sub_4A30D0(a1, a2, (wchar_t *)a3, a4);
}

//----- (004C3EB0) --------------------------------------------------------
int __cdecl sub_4C3EB0(int a1, int a2, char *a3, int a4)
{
  int result; // eax

  switch ( a2 )
  {
    case 6:
    case 7:
      goto LABEL_10;
    case 10:
    case 11:
      sub_4C4100((char *)0x10002);
      goto LABEL_15;
    case 14:
    case 15:
      sub_4C4100((char *)0x10001);
      goto LABEL_15;
    case 19:
      sub_4C4100((char *)0x10003);
      goto LABEL_15;
    case 20:
      sub_4C4100((char *)0x10004);
      goto LABEL_15;
    case 21:
      if ( a3 == (char *)1 )
      {
        if ( a4 == 2 )
        {
          sub_46B500(0);
          sub_46C6E0(*(int *)&byte_5D4594[1321232]);
          sub_46AC00(*(int *)&byte_5D4594[1321232], 1);
          if ( *(_DWORD *)&byte_5D4594[1321252] )
            sub_46B490(*(int *)&byte_5D4594[1321252], 16403, -1, 0);
        }
        result = 1;
      }
      else if ( a4 == 1 && sub_4C3FC0(a3) )
      {
LABEL_10:
        sub_4C4100((char *)0x10000);
LABEL_15:
        sub_46B500(0);
        sub_46C6E0(*(int *)&byte_5D4594[1321232]);
        sub_46AC00(*(int *)&byte_5D4594[1321232], 1);
        result = 1;
      }
      else
      {
LABEL_5:
        result = 0;
      }
      return result;
    default:
      goto LABEL_5;
  }
}

//----- (004C3FC0) --------------------------------------------------------
int __cdecl sub_4C3FC0(char *a1)
{
  int v1; // ecx
  unsigned __int8 *v2; // eax
  int v3; // esi
  int v4; // ecx
  const wchar_t *v6; // edi
  int v7; // esi
  int v8; // ebx
  const wchar_t *v9; // eax
  int v10; // esi
  int v11; // ebx
  const wchar_t *v12; // eax

  v1 = 0;
  if ( *(_DWORD *)&byte_587000[73672] )
  {
    v2 = &byte_587000[73672];
    do
    {
      if ( *((char **)v2 + 1) == a1 )
        break;
      v3 = *((_DWORD *)v2 + 4);
      v2 += 16;
      ++v1;
    }
    while ( v3 );
  }
  v4 = 16 * v1;
  if ( !*(_DWORD *)&byte_587000[v4 + 73672] )
    return 0;
  v6 = *(const wchar_t **)&byte_587000[v4 + 73684];
  if ( *(_DWORD *)&byte_5D4594[1321252] )
  {
    v7 = 0;
    v8 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321244] + 32);
    if ( *(_WORD *)(v8 + 44) > 0 )
    {
      do
      {
        v9 = (const wchar_t *)sub_46B490(*(int *)&byte_5D4594[1321244], 16406, v7, 0);
        if ( !nox_wcscmp(v9, v6) )
          sub_46B490(*(int *)&byte_5D4594[1321244], 16407, (int)&byte_587000[185444], v7);
        ++v7;
      }
      while ( v7 < *(__int16 *)(v8 + 44) );
    }
    v10 = 0;
    v11 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321248] + 32);
    if ( *(_WORD *)(v11 + 44) > 0 )
    {
      do
      {
        v12 = (const wchar_t *)sub_46B490(*(int *)&byte_5D4594[1321248], 16406, v10, 0);
        if ( !nox_wcscmp(v12, v6) )
          sub_46B490(*(int *)&byte_5D4594[1321248], 16407, (int)&byte_587000[185448], v10);
        ++v10;
      }
      while ( v10 < *(__int16 *)(v11 + 44) );
    }
    sub_46B490(
      *(int *)&byte_5D4594[1321252],
      16407,
      (int)v6,
      *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1321252] + 32) + 48));
    sub_46B490(*(int *)&byte_5D4594[1321252], 16403, -1, 0);
    *(_DWORD *)&byte_5D4594[1321252] = 0;
  }
  return 1;
}

//----- (004C4100) --------------------------------------------------------
int __cdecl sub_4C4100(char *a1)
{
  char *v1; // edi
  int v2; // esi
  int v3; // ebx
  const wchar_t *v4; // eax
  int v5; // esi
  int v6; // ebx
  const wchar_t *v7; // eax

  v1 = sub_42EA00(a1);
  if ( !*(_DWORD *)&byte_5D4594[1321252] )
    return 1;
  v2 = 0;
  v3 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321244] + 32);
  if ( *(_WORD *)(v3 + 44) > 0 )
  {
    do
    {
      v4 = (const wchar_t *)sub_46B490(*(int *)&byte_5D4594[1321244], 16406, v2, 0);
      if ( !nox_wcscmp(v4, (const wchar_t *)v1) )
        sub_46B490(*(int *)&byte_5D4594[1321244], 16407, (int)&byte_587000[185452], v2);
      ++v2;
    }
    while ( v2 < *(__int16 *)(v3 + 44) );
  }
  v5 = 0;
  v6 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1321248] + 32);
  if ( *(_WORD *)(v6 + 44) > 0 )
  {
    do
    {
      v7 = (const wchar_t *)sub_46B490(*(int *)&byte_5D4594[1321248], 16406, v5, 0);
      if ( !nox_wcscmp(v7, (const wchar_t *)v1) )
        sub_46B490(*(int *)&byte_5D4594[1321248], 16407, (int)&byte_587000[185456], v5);
      ++v5;
    }
    while ( v5 < *(__int16 *)(v6 + 44) );
  }
  sub_46B490(
    *(int *)&byte_5D4594[1321252],
    16407,
    (int)v1,
    *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1321252] + 32) + 48));
  sub_46B490(*(int *)&byte_5D4594[1321252], 16403, -1, 0);
  *(_DWORD *)&byte_5D4594[1321252] = 0;
  return 1;
}

//----- (004C4220) --------------------------------------------------------
int sub_4C4220()
{
  int result; // eax

  sub_46C4E0(*(_DWORD **)&byte_5D4594[1321228]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1321232]);
  result = 0;
  *(_DWORD *)&byte_5D4594[1321228] = 0;
  *(_DWORD *)&byte_5D4594[1321232] = 0;
  *(_DWORD *)&byte_5D4594[1321236] = 0;
  *(_DWORD *)&byte_5D4594[1321240] = 0;
  *(_DWORD *)&byte_5D4594[1321244] = 0;
  *(_DWORD *)&byte_5D4594[1321248] = 0;
  return result;
}

//----- (004C4260) --------------------------------------------------------
int sub_4C4260()
{
  sub_4C3B70();
  sub_46A8C0(*(int *)&byte_5D4594[1321228]);
  return sub_413A00(1);
}

//----- (004C4280) --------------------------------------------------------
BOOL sub_4C4280()
{
  return sub_46ACC0(*(int *)&byte_5D4594[1321228]) == 0;
}

//----- (004C42A0) --------------------------------------------------------
int __cdecl sub_4C42A0(int2 *a1, int2 *a2, int *a3, int *a4)
{
  int v4; // ecx
  int v5; // eax
  int result; // eax
  double v7; // st7
  double v8; // st7
  int v9; // esi
  int v10; // edx
  int *v11; // ecx
  int v12; // ebx
  int v13; // edi
  double v14; // st7
  int v15; // esi
  int v16; // edi
  double v17; // st7
  int v18; // ebp
  int v19; // eax
  int v20; // eax
  int v21; // eax
  double v22; // st7
  int v23; // edi
  int v24; // edx
  int v25; // ebx
  unsigned __int8 *v26; // ecx
  int v27; // eax
  int v28; // esi
  int v29; // ebp
  bool v30; // zf
  bool v31; // cc
  unsigned __int8 *v32; // edi
  int v33; // ecx
  unsigned __int8 *v34; // edx
  int v35; // eax
  int v36; // eax
  unsigned __int8 *v37; // ebx
  unsigned __int8 *v38; // esi
  int v39; // ecx
  unsigned __int8 *v40; // edx
  int v41; // eax
  float v42; // [esp+0h] [ebp-24h]
  float v43; // [esp+14h] [ebp-10h]
  float v44; // [esp+14h] [ebp-10h]
  unsigned __int8 *v45; // [esp+14h] [ebp-10h]
  int v46; // [esp+18h] [ebp-Ch]
  int v47; // [esp+1Ch] [ebp-8h]
  int v48; // [esp+1Ch] [ebp-8h]
  float v49; // [esp+1Ch] [ebp-8h]
  int v50; // [esp+20h] [ebp-4h]
  float v51; // [esp+28h] [ebp+4h]
  float v52; // [esp+28h] [ebp+4h]
  float v53; // [esp+28h] [ebp+4h]
  int2 *v54; // [esp+2Ch] [ebp+8h]
  int2 *v55; // [esp+2Ch] [ebp+8h]
  int2 *v56; // [esp+2Ch] [ebp+8h]
  int2 *v57; // [esp+2Ch] [ebp+8h]
  int2 *v58; // [esp+2Ch] [ebp+8h]
  int2 *v59; // [esp+2Ch] [ebp+8h]
  int2 *v60; // [esp+2Ch] [ebp+8h]

  v4 = a1->field_4;
  v5 = a2->field_4;
  if ( v4 == v5 )
  {
    if ( !*(_DWORD *)&byte_5D4594[4 * v4 + 3679340] )
      return 0;
    v47 = a1->field_0;
    v54 = (int2 *)a2->field_0;
    if ( a1->field_0 > (int)v54 )
    {
      v51 = (double)(int)v54;
      v7 = (double)v47;
    }
    else
    {
      v51 = (double)v47;
      v7 = (double)(int)v54;
    }
    v43 = v7;
    if ( v4 < 0 )
      return 0;
    if ( v4 >= *(int *)&byte_5D4594[3807120] )
      v4 = *(_DWORD *)&byte_5D4594[3807120] - 1;
    if ( v51 < 0.0 )
      v51 = 0.0;
    v8 = (double)*(int *)&byte_5D4594[3805496];
    if ( v51 > v8 )
      v51 = v8;
    v9 = *(_DWORD *)&byte_5D4594[4 * v4 + 3679340];
    v10 = 0;
    if ( v9 <= 0 )
    {
LABEL_22:
      *a4 = 0;
      result = 1;
    }
    else
    {
      v11 = (int *)&byte_5D4594[128 * v4 + 3682960];
      while ( 1 )
      {
        v12 = *(v11 - 1);
        v13 = *v11;
        v55 = (int2 *)*v11;
        if ( (double)*(v11 - 1) > v51 )
        {
          if ( *a3 < v12 )
            *a3 = v12;
          if ( (double)(int)v55 < v43 && *a4 > v13 )
          {
            *a4 = v13;
            return 1;
          }
          return 1;
        }
        v14 = (double)(int)v55;
        if ( v51 <= v14 && v43 > v14 )
          break;
        if ( v43 <= v14 )
          return 1;
        v10 += 2;
        v11 += 2;
        if ( v10 >= v9 )
          goto LABEL_22;
      }
      if ( *a4 <= v13 )
        return 1;
      *a4 = v13;
      result = 1;
    }
    return result;
  }
  v48 = a1->field_0;
  v56 = (int2 *)a2->field_0;
  if ( a1->field_0 > (int)v56 )
  {
    v15 = v5;
    v16 = a1->field_4;
    v50 = v5;
    v52 = (double)(int)v56;
    v17 = (double)v48;
  }
  else
  {
    v15 = a1->field_4;
    v16 = v5;
    v50 = a1->field_4;
    v52 = (double)v48;
    v17 = (double)(int)v56;
  }
  v44 = v17;
  v18 = v16 - v15;
  v57 = (int2 *)(v16 - v15);
  if ( v16 - v15 >= 0 )
  {
    v46 = 1;
  }
  else
  {
    v18 = v15 - v16;
    v57 = (int2 *)(v15 - v16);
    v46 = -1;
  }
  v49 = (v44 - v52) / (double)(int)v57;
  if ( v15 >= 0 )
  {
    v19 = *(_DWORD *)&byte_5D4594[3807120];
    if ( v15 < *(int *)&byte_5D4594[3807120] )
      goto LABEL_44;
    if ( v16 >= *(int *)&byte_5D4594[3807120] )
      return 0;
    v58 = (int2 *)(v15 - *(_DWORD *)&byte_5D4594[3807120] + 1);
    v15 = *(_DWORD *)&byte_5D4594[3807120] - 1;
    v52 = (double)(int)v58 * v49 + v52;
    v20 = sub_419A70(v52);
    if ( *a3 < v20 )
      *a3 = v20;
  }
  else
  {
    v15 = 0;
    v52 = v52 - (double)v50 * v49;
  }
  v19 = *(_DWORD *)&byte_5D4594[3807120];
LABEL_44:
  if ( v16 >= 0 )
  {
    if ( v16 >= v19 )
    {
      v59 = (int2 *)(v19 - v16 + v18 - 1);
      v44 = (double)(int)v59 * v49 + v52;
      v21 = sub_419A70(v44);
      if ( *a4 > v21 )
        *a4 = v21;
      v18 = (int)v59;
    }
  }
  else
  {
    v18 += v16;
  }
  if ( v52 < 0.0 )
  {
    v52 = 0.0;
    v15 -= sub_419A70(0.0);
  }
  v22 = (double)*(int *)&byte_5D4594[3805496];
  if ( v44 > v22 )
  {
    v42 = v44 - v22;
    v18 -= sub_419A70(v42);
  }
  v23 = *(_DWORD *)&byte_5D4594[4 * v15 + 3679340];
  v24 = 0;
  v25 = 1;
  if ( v23 > 0 )
  {
    v26 = &byte_5D4594[128 * v15 + 3682960];
    while ( (double)*((int *)v26 - 1) > v52 || (double)(int)(*(_DWORD *)v26 + 2) < v52 )
    {
      v24 += 2;
      v26 += 8;
      if ( v24 >= v23 )
        goto LABEL_61;
    }
    v25 = 0;
  }
LABEL_61:
  v27 = v46;
  v28 = v46 + v15;
  v29 = v18 - 1;
  v60 = (int2 *)v29;
  v53 = v49 + v52;
  if ( v25 )
  {
    v30 = v29 == 0;
    v31 = v29 <= 0;
    if ( v29 <= 0 )
    {
LABEL_71:
      if ( v30 )
        return 0;
      goto LABEL_77;
    }
    v45 = &byte_5D4594[4 * v28 + 3679340];
    v32 = &byte_5D4594[128 * v28 + 3682960];
    while ( 1 )
    {
      v33 = 0;
      if ( *(_DWORD *)v45 > 0 )
        break;
LABEL_69:
      v28 += v46;
      v35 = (int)&v60[-1].field_4 + 3;
      v32 += 128 * v46;
      v53 = v49 + v53;
      v60 = (int2 *)v35;
      v45 += 4 * v46;
      if ( v35 <= 0 )
      {
        v29 = v35;
        v27 = v46;
        v30 = v29 == 0;
        v31 = v29 <= 0;
        goto LABEL_71;
      }
    }
    v34 = v32;
    while ( (double)*((int *)v34 - 1) > v53 || (double)(int)(*(_DWORD *)v34 + 2) < v53 )
    {
      v33 += 2;
      v34 += 8;
      if ( v33 >= *(int *)v45 )
        goto LABEL_69;
    }
    v36 = sub_419A70(v53) - 1;
    if ( *a3 < v36 )
      *a3 = v36;
    v29 = (int)v60;
    v27 = v46;
  }
  v31 = v29 <= 0;
LABEL_77:
  if ( !v31 )
  {
    v37 = &byte_5D4594[4 * v28 + 3679340];
    v38 = &byte_5D4594[128 * v28 + 3682960];
    while ( 1 )
    {
      v39 = 0;
      if ( *(int *)v37 <= 0 )
        break;
      v40 = v38;
      while ( (double)*((int *)v40 - 1) > v53 || (double)(int)(*(_DWORD *)v40 + 2) < v53 )
      {
        v39 += 2;
        v40 += 8;
        if ( v39 >= *(int *)v37 )
          goto LABEL_87;
      }
      --v29;
      v38 += 128 * v27;
      v37 += 4 * v27;
      v53 = v49 + v53;
      if ( v29 <= 0 )
        return 1;
    }
LABEL_87:
    v41 = sub_419A70(v53);
    if ( *a4 > v41 )
      *a4 = v41;
  }
  return 1;
}

//----- (004C4770) --------------------------------------------------------
__int16 __cdecl sub_4C4770(int *a1, unsigned __int8 *a2, int a3)
{
  unsigned __int8 *v3; // esi
  char *v4; // eax
  _DWORD *v5; // edi
  _DWORD *v6; // eax
  int v7; // ecx
  int v8; // edi
  int v9; // ecx
  int v10; // ebp
  int v11; // edx
  int v12; // eax
  int v13; // ebx
  int v14; // edx
  int v15; // ebx
  int v16; // edi
  int v17; // ebx
  unsigned __int8 v18; // al
  unsigned __int8 v19; // cl
  int v20; // ecx
  int v21; // edx
  int v22; // ecx
  int v23; // edi
  int v24; // ebx
  int v25; // ebx
  int v26; // edi
  int v27; // ecx
  unsigned __int8 *v28; // edi
  __int16 v29; // ax
  int v30; // ebp
  int v31; // edx
  int v32; // eax
  int v33; // eax
  int v34; // edx
  int v35; // ecx
  double v36; // st7
  double v37; // st7
  unsigned __int8 v38; // bl
  unsigned __int8 v39; // al
  int v40; // edx
  int v41; // ecx
  int v42; // edi
  int v43; // ebx
  int v44; // eax
  int v45; // eax
  int v46; // eax
  int v47; // ebp
  int v48; // eax
  int v49; // eax
  int v50; // eax
  int v51; // ebx
  int v53; // [esp+18h] [ebp-30h]
  int v54; // [esp+1Ch] [ebp-2Ch]
  int2 a1a; // [esp+20h] [ebp-28h]
  int2 a2a; // [esp+28h] [ebp-20h]
  int a4; // [esp+30h] [ebp-18h]
  int a3a; // [esp+34h] [ebp-14h]
  __int64 v59; // [esp+38h] [ebp-10h]
  __int64 v60; // [esp+40h] [ebp-8h]
  unsigned __int8 v61; // [esp+4Ch] [ebp+4h]
  unsigned __int8 v62; // [esp+4Ch] [ebp+4h]
  unsigned __int8 v63; // [esp+50h] [ebp+8h]
  unsigned __int8 v64; // [esp+50h] [ebp+8h]

  v53 = 0;
  v54 = 0;
  if ( !*(_DWORD *)&byte_5D4594[1321520] )
    *(_DWORD *)&byte_5D4594[1321520] = sub_44CFC0((CHAR *)&byte_587000[185484]);
  v3 = a2;
  if ( a2[112] & 4 )
  {
    v4 = sub_417040(*((_DWORD *)a2 + 32));
    if ( *(_DWORD *)&byte_5D4594[2616328] == *((_DWORD *)a2 + 32) )
    {
      if ( v4 && v4[3680] & 1 )
        v54 = 1;
    }
    else if ( v4 && v4[3680] & 1 )
    {
      return (__int16)v4;
    }
    v5 = sub_418C80(*(int *)&byte_5D4594[2616328]);
    if ( v5 )
    {
      v6 = sub_418C80(*((_DWORD *)a2 + 32));
      if ( v6 )
      {
        if ( *(_DWORD *)&byte_5D4594[2616328] == *((_DWORD *)a2 + 32) || sub_419150((int)v5, (int)v6) )
          v53 = 1;
      }
    }
  }
  v7 = *((_DWORD *)a2 + 3);
  a3a = 0;
  v8 = *a1;
  v9 = v7 - a1[4];
  v10 = a1[1];
  v11 = *((__int16 *)a2 + 53);
  LODWORD(v59) = v9 + *a1 - *a2;
  v12 = *((_DWORD *)a2 + 4);
  v13 = *((_DWORD *)a2 + 4) - v11 - a2[1] - *((__int16 *)a2 + 52);
  v14 = a1[5];
  HIDWORD(v59) = v10 + v13 - v14;
  a4 = *(_DWORD *)&byte_5D4594[3805496];
  if ( *(_DWORD *)&byte_587000[80808] )
  {
    v15 = *((_DWORD *)a2 + 30);
    if ( !(v15 & 0x40000000) && !(v15 & 1) && (a2[112] & 0x80u) != 0 )
    {
      v16 = v9 + v8;
      a1a.field_0 = v16;
      v17 = v10 + v12 - v14;
      v18 = a2[299];
      v19 = a2[299];
      a1a.field_4 = v17;
      v20 = 8 * v19;
      v21 = v16 + *(_DWORD *)&byte_587000[v20 + 196184];
      v22 = v17 + *(_DWORD *)&byte_587000[v20 + 196188];
      a2a.field_0 = v21;
      a2a.field_4 = v22;
      if ( v18 < 0x18u && v18 && (v18 < 8u || v18 > 0x10u) )
      {
        v23 = (v21 + v16) >> 1;
        v24 = (v22 + v17) >> 1;
        if ( sub_4C5630(v23 - 5, v23 - 5, v24) )
        {
          a1a.field_0 -= 2;
          a2a.field_0 -= 2;
        }
        else if ( sub_4C5630(v23 + 5, v23 + 5, v24) )
        {
          a1a.field_0 += 2;
          a2a.field_0 += 2;
        }
      }
      else
      {
        v25 = (v22 + v17) >> 1;
        v26 = (v21 + v16) >> 1;
        if ( sub_4C5630(v26, v26, v25 - 5) )
        {
          v27 = a2a.field_4 - 2;
          a1a.field_4 -= 2;
        }
        else
        {
          if ( !sub_4C5630(v26, v26, v25 + 5) )
            goto LABEL_32;
          v27 = a2a.field_4 + 2;
          a1a.field_4 += 2;
        }
        a2a.field_4 = v27;
      }
LABEL_32:
      v4 = (char *)sub_4C42A0(&a1a, &a2a, &a3a, &a4);
      if ( !v4 )
        return (__int16)v4;
      goto LABEL_33;
    }
  }
LABEL_33:
  if ( *((_DWORD *)a2 + 28) & 0x80000 && *((_DWORD *)a2 + 30) & 0x1000000 || *((_DWORD *)a2 + 30) & 0x40000000 )
    v28 = &byte_587000[185472];
  else
    v28 = (unsigned __int8 *)(*(int (__cdecl **)(int2 *))&byte_5D4594[3807156])((int2 *)(a2 + 12));
  v29 = *((_WORD *)a2 + 52);
  a2a.field_0 = 0;
  if ( v29 >= 0 )
  {
    v30 = 0;
  }
  else
  {
    if ( *(int *)&byte_5D4594[1321512] < 0 && a2 == *(unsigned __int8 **)&byte_5D4594[1321516] )
      a2a.field_0 = 1;
    v30 = -v29;
  }
  *(_DWORD *)&byte_5D4594[1321516] = a2;
  v31 = *((__int16 *)a2 + 52);
  a1a.field_0 = v30;
  *(_DWORD *)&byte_5D4594[1321512] = v31;
  if ( sub_4356C0((int)a2, 25) )
  {
    sub_434600(1);
    sub_433E40(*(int *)&byte_5D4594[2650684]);
  }
  else if ( a2[112] & 2 && (v32 = *((_DWORD *)a2 + 30), v32 & 0x40000000) && !(v32 & 0x8020) )
  {
    sub_434600(1);
    sub_433E40(*(int *)&byte_5D4594[2650684]);
  }
  else
  {
    v33 = sub_4345F0(1);
    LOBYTE(v34) = v28[8];
    LOBYTE(v33) = v28[4];
    LOBYTE(v35) = *v28;
    sub_433CD0(v35, v33, v34);
  }
  if ( *((_DWORD *)a2 + 120) )
  {
    v60 = (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *((_DWORD *)a2 + 85));
    v36 = (double)v60;
    v60 = *(unsigned int *)&byte_5D4594[2649704];
    v37 = 1.0 - v36 / (double)*(int *)&byte_5D4594[2649704];
    if ( v37 < 0.0 )
      v37 = 0.001;
    v38 = (__int64)(v37 * 255.0);
    v63 = (__int64)(v37 * 255.0);
    if ( *((_DWORD *)v3 + 27) == *(_DWORD *)&byte_5D4594[1321520] )
    {
      v39 = sub_4C4EC0(a1, (int)v3);
      if ( v39 < v38 )
      {
        v64 = v39;
        sub_434560(1);
        sub_434580(v64);
        goto LABEL_64;
      }
    }
    else if ( *((_DWORD *)v3 + 30) & 0x4000000 )
    {
      v63 = v38 >> 1;
    }
    sub_434560(1);
    sub_434580(v63);
    goto LABEL_64;
  }
  if ( *((_DWORD *)a2 + 27) == *(_DWORD *)&byte_5D4594[1321520] )
  {
    v61 = sub_4C4EC0(a1, (int)a2);
    sub_434560(1);
    sub_434580(v61);
  }
  else if ( *((_DWORD *)a2 + 30) & 0x4000000 )
  {
    sub_434560(1);
    sub_434580(0x80u);
  }
LABEL_64:
  if ( !sub_4356C0((int)v3, 0)
    && !v54
    && (*((_DWORD *)v3 + 27) != *(_DWORD *)&byte_5D4594[1321520]
     || !*(_DWORD *)&byte_5D4594[2614252]
     || !sub_4356C0(*(int *)&byte_5D4594[2614252], 21)) )
  {
    goto LABEL_105;
  }
  if ( *(_DWORD *)&byte_5D4594[2618908] && *(_BYTE *)(*(_DWORD *)&byte_5D4594[2618908] + 3680) & 1 )
  {
    sub_434560(1);
    sub_434580(0x80u);
    goto LABEL_105;
  }
  v40 = *((_DWORD *)v3 + 8);
  v41 = *((_DWORD *)v3 + 9);
  v42 = *((_DWORD *)v3 + 3) - v40;
  v43 = *((_DWORD *)v3 + 4) - v41;
  v44 = *((_DWORD *)v3 + 3) - v40;
  if ( v42 < 0 )
    v44 = v40 - *((_DWORD *)v3 + 3);
  if ( v44 < 4 )
  {
    v45 = *((_DWORD *)v3 + 4) - v41;
    if ( v43 < 0 )
      v45 = v41 - *((_DWORD *)v3 + 4);
    if ( v45 < 4 )
    {
      v46 = *(_DWORD *)&byte_5D4594[2614252];
      if ( !*(_DWORD *)&byte_5D4594[2614252] )
        goto LABEL_82;
      if ( !sub_4356C0(*(int *)&byte_5D4594[2614252], 21) )
      {
        LOWORD(v4) = v53;
        if ( !v53 )
          return (__int16)v4;
      }
    }
  }
  v46 = *(_DWORD *)&byte_5D4594[2614252];
LABEL_82:
  if ( v42 || v43 )
  {
    v47 = *((_DWORD *)v3 + 5) - *((_DWORD *)v3 + 10);
    if ( !v47 )
      v47 = 1;
    v48 = sub_419B10(sqrt((double)(v42 * v42 + v43 * v43))) / v47;
    v30 = a1a.field_0;
    v42 = v48;
    v46 = *(_DWORD *)&byte_5D4594[2614252];
  }
  if ( !v46 )
    goto LABEL_123;
  if ( v54 )
    goto LABEL_95;
  if ( v53 || !sub_4356C0(v46, 21) )
  {
LABEL_123:
    if ( v42 < 8 )
    {
      v49 = (v42 << 7) / 8;
      v62 = v49;
      if ( (_BYTE)v49 )
        goto LABEL_97;
      LOBYTE(v49) = 1;
LABEL_96:
      v62 = v49;
LABEL_97:
      if ( v53 && (unsigned __int8)v49 <= 1u )
      {
        if ( (v50 = *((_DWORD *)v3 + 28), v50 & 2) && *((_DWORD *)v3 + 69) == 8 || v50 & 4 && !*((_DWORD *)v3 + 69) )
        {
          sub_434600(1);
          sub_433E40(*(int *)&byte_5D4594[2618904]);
          v62 = -128;
        }
      }
      goto LABEL_104;
    }
LABEL_95:
    LOBYTE(v49) = -128;
    goto LABEL_96;
  }
  sub_434600(1);
  sub_433E40(*(int *)&byte_5D4594[2618904]);
  v62 = *(_DWORD *)&byte_5D4594[3799568] >= 16 ? -1 : -128;
LABEL_104:
  sub_434560(1);
  sub_434580(v62);
LABEL_105:
  if ( !(v3[112] & 4) && sub_4356C0((int)v3, 23) && !sub_40A5C0(2048) )
  {
    sub_434600(1);
    if ( byte_5D4594[2598000] & 1 )
      sub_433E40(*(int *)&byte_5D4594[2523948]);
    else
      sub_433E40(*(int *)&byte_5D4594[2650684]);
  }
  if ( !sub_4356C0((int)v3, 23) && sub_4356C0((int)v3, 11) )
  {
    sub_434600(1);
    sub_433E40(*(int *)&byte_5D4594[2650660]);
  }
  v51 = a2a.field_0;
  if ( a2a.field_0 )
  {
    sub_49F7F0();
    sub_49F7C0(*(int *)&byte_5D4594[3799476]);
  }
  else
  {
    sub_47D370(v30);
  }
  sub_47D2C0(a3, v59, SHIDWORD(v59));
  sub_4345F0(0);
  sub_434560(0);
  sub_434600(0);
  if ( v51 )
    sub_49F860();
  *((_WORD *)v3 + 1) = 1;
  LOWORD(v4) = *(_WORD *)&byte_5D4594[3799516];
  *((_WORD *)v3 + 2) = *(_WORD *)&byte_5D4594[3799516];
  *((_WORD *)v3 + 3) = *(_WORD *)&byte_5D4594[3799504];
  *((_DWORD *)v3 + 2) = a3;
  return (__int16)v4;
}
// 4C4AD0: variable 'v35' is possibly undefined
// 4C4AD0: variable 'v34' is possibly undefined

//----- (004C4EC0) --------------------------------------------------------
char __cdecl sub_4C4EC0(_DWORD *a1, int a2)
{
  int v3; // ecx
  int v4; // eax
  int v5; // ecx

  if ( *(_DWORD *)&byte_5D4594[2614252] && sub_4356C0(*(int *)&byte_5D4594[2614252], 21) )
    return -1;
  v3 = *(_DWORD *)(a2 + 12) - a1[8] / 2 - a1[4];
  v4 = *(_DWORD *)(a2 + 16) - a1[9] / 2 - a1[5];
  v5 = 128 - ((v3 * v3 + v4 * v4) << 7) / *(_DWORD *)&byte_587000[185464];
  if ( v5 < 0 )
    return 0;
  if ( v5 > 128 )
    LOBYTE(v5) = -128;
  return v5;
}

//----- (004C4F40) --------------------------------------------------------
__int16 __cdecl sub_4C4F40(_DWORD *a1, int a2)
{
  char *v2; // eax
  int v3; // edi
  signed int v4; // esi
  unsigned int v5; // eax
  signed int v6; // edx

  v2 = *(char **)&byte_5D4594[1321524];
  if ( !*(_DWORD *)&byte_5D4594[1321524] )
  {
    v2 = sub_42FA20((const char *)&byte_587000[185492]);
    *(_DWORD *)&byte_5D4594[1321524] = v2;
  }
  v3 = *((_DWORD *)v2 + 24);
  v4 = *(unsigned __int8 *)(v3 + 8);
  v5 = (*(_DWORD *)&byte_5D4594[2598000] + *(_DWORD *)(a2 + 128)) / (unsigned int)(8 * v4);
  v6 = ((*(_DWORD *)&byte_5D4594[2598000] + *(_DWORD *)(a2 + 128)) % (unsigned int)(8 * v4)) >> 1;
  if ( v6 < v4 )
    LOWORD(v5) = sub_47D2C0(
                   *(_DWORD *)(*(_DWORD *)(v3 + 4) + 4 * v6),
                   *(_DWORD *)(a2 + 12) - a1[4] + *a1 - 64,
                   a1[1] - *(__int16 *)(a2 + 106) - *(__int16 *)(a2 + 104) - a1[5] + *(_DWORD *)(a2 + 16) - 64);
  return v5;
}

//----- (004C4FD0) --------------------------------------------------------
int sub_4C4FD0()
{
  int result; // eax

  *(_DWORD *)&byte_5D4594[1321536] = sub_4344A0(255, 200, 255);
  *(_DWORD *)&byte_5D4594[1321796] = sub_4344A0(255, 0, 255);
  result = sub_4344A0(100, 40, 100);
  *(_DWORD *)&byte_5D4594[1321532] = result;
  return result;
}

//----- (004C5020) --------------------------------------------------------
int __cdecl sub_4C5020(int a1)
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1321800];
  if ( *(int *)&byte_5D4594[1321800] < 32 )
  {
    result = *(_DWORD *)&byte_5D4594[1321800] + 1;
    *(_DWORD *)&byte_5D4594[8 * result + 1321532] = *(_DWORD *)(a1 + 1);
    *(_DWORD *)&byte_5D4594[8 * result + 1321536] = *(_DWORD *)(a1 + 5);
    *(_DWORD *)&byte_5D4594[1321800] = result;
  }
  return result;
}

//----- (004C5050) --------------------------------------------------------
void sub_4C5050()
{
  *(_DWORD *)&byte_5D4594[1321800] = 0;
}

//----- (004C5060) --------------------------------------------------------
int __cdecl sub_4C5060(_DWORD *a1)
{
  int result; // eax
  unsigned __int16 *v2; // ebp
  int v3; // esi
  int v4; // edi
  int v5; // ebx
  int v6; // ecx
  int v7; // edi
  int v8; // esi
  int v9; // edx
  int v10; // [esp+0h] [ebp-24h]
  int2 a1a; // [esp+4h] [ebp-20h]
  int2 v12; // [esp+Ch] [ebp-18h]
  int2 a2; // [esp+14h] [ebp-10h]
  int2 v14; // [esp+1Ch] [ebp-8h]

  result = *(_DWORD *)&byte_5D4594[2614252];
  if ( *(_DWORD *)&byte_5D4594[2614252] )
  {
    result = *(_DWORD *)&byte_5D4594[1321800];
    v10 = 0;
    if ( *(_DWORD *)&byte_5D4594[1321800] > 0 )
    {
      v2 = (unsigned __int16 *)&byte_5D4594[1321540];
      do
      {
        v3 = *a1 + *v2 - a1[4];
        v4 = a1[1] + v2[1] - a1[5];
        v5 = sub_4992B0(v3, v4);
        v6 = v2[3] - v2[1];
        if ( v3 <= 0 || v3 >= a1[8] - 1 || v4 <= 0 || v4 >= a1[9] - 1 )
          v5 = 0;
        v14.field_0 = v3 + v2[2] - *v2;
        v14.field_4 = v4 + v6;
        v12.field_0 = v3;
        v12.field_4 = v4;
        v7 = sub_498C20(&v12, &v14, (int)a1);
        if ( v7 )
        {
          v8 = 0;
          for ( a1a = v12; v8 < v7; v5 = 1 - v5 )
          {
            *(_QWORD*)&a2 = sub_499290(v8);
            if ( v5 )
              sub_4C51D0(&a1a, &a2);
            a1a = a2;
            ++v8;
          }
          if ( v5 )
            sub_4C51D0(&a1a, &v14);
        }
        else if ( v5 )
        {
          sub_4C51D0(&v12, &v14);
        }
        result = v10 + 1;
        v2 += 4;
        ++v10;
      }
      while ( v10 < *(int *)&byte_5D4594[1321800] );
    }
  }
  return result;
}
// 4C5151: variable 'v9' is possibly undefined

//----- (004C51D0) --------------------------------------------------------
int __cdecl sub_4C51D0(int2 *a1, int2 *a2)
{
  int v2; // esi
  int v3; // edi
  int v4; // ebx
  int v5; // ebp
  int v6; // esi
  int v7; // ecx
  int v8; // eax
  int v9; // ebx
  int v11; // ebp

  v2 = a1->field_4;
  v3 = a1->field_0;
  v4 = a2->field_0 - a1->field_0;
  v5 = a2->field_4 - v2;
  sub_434460(*(int *)&byte_5D4594[1321532]);
  sub_434560(1);
  sub_49F500(v3, v2);
  sub_49F570(v4, v5);
  sub_49E4B0();
  sub_434560(0);
  v6 = v2 - 22;
  sub_434460(*(int *)&byte_5D4594[1321536]);
  sub_49F500(v3, v6);
  sub_49F570(v4, v5);
  sub_49E4B0();
  sub_434460(*(int *)&byte_5D4594[1321796]);
  v7 = v4;
  if ( v4 < 0 )
    v7 = -v4;
  v8 = v5;
  if ( v5 < 0 )
    v8 = -v5;
  if ( v7 <= v8 )
  {
    sub_49F500(v3 - 1, v6);
    v11 = v6 + v5;
    sub_49F500(v4 + v3 - 1, v11);
    sub_49E4B0();
    sub_49F500(v3 + 1, v6);
    sub_49F500(v4 + v3 + 1, v11);
  }
  else
  {
    sub_49F500(v3, v6 - 1);
    v9 = v3 + v4;
    sub_49F500(v9, v6 + v5 - 1);
    sub_49E4B0();
    sub_49F500(v3, v6 + 1);
    sub_49F500(v9, v6 + v5 + 1);
  }
  return sub_49E4B0();
}

//----- (004C52E0) --------------------------------------------------------
int __cdecl sub_4C52E0(int *a1, int a2)
{
  int v2; // edx
  int result; // eax
  int v4; // esi
  int *v5; // edx
  int *v6; // ecx
  int v7; // ebx
  int v8; // eax
  int v9; // edi
  int v10; // esi
  int v11; // ebp
  int v12; // edx
  int v13; // ebx
  int v14; // edi
  int v15; // esi
  bool v16; // cc
  int v17; // [esp+8h] [ebp-14h]
  int v18; // [esp+Ch] [ebp-10h]
  int *v19; // [esp+10h] [ebp-Ch]
  int v20; // [esp+14h] [ebp-8h]
  int v21; // [esp+18h] [ebp-4h]

  v2 = *(_DWORD *)&byte_5D4594[3807120];
  memset(&byte_5D4594[3679340], 0, 4 * *(_DWORD *)&byte_5D4594[3807120]);
  result = a2;
  v4 = 0;
  *(_DWORD *)&byte_5D4594[3679320] = v2;
  *(_DWORD *)&byte_5D4594[3798156] = 0;
  v21 = 0;
  if ( a2 > 0 )
  {
    v5 = a1;
    v6 = a1 + 1;
    v19 = a1 + 1;
    while ( 1 )
    {
      v7 = *(v6 - 1);
      if ( v4 == result - 1 )
      {
        v8 = *v5;
        v9 = *v6;
        v10 = v5[1];
      }
      else
      {
        v8 = v6[1];
        v9 = *v6;
        v10 = v6[2];
      }
      if ( v9 != v10 )
      {
        if ( v7 == v8 )
        {
          if ( v10 <= v9 )
          {
            if ( v10 >= v9 )
              goto LABEL_26;
            do
              sub_4C5430(v7, v10++);
            while ( v10 < v9 );
          }
          else
          {
            do
              sub_4C5430(v7, v9++);
            while ( v9 < v10 );
          }
          goto LABEL_25;
        }
        if ( v9 <= v10 )
        {
          v17 = *(v6 - 1);
          v11 = v9;
          v18 = v10;
          v12 = v8 <= v7 ? -1 : 1;
        }
        else
        {
          v17 = v8;
          v11 = v10;
          v18 = v9;
          v12 = v8 <= v7 ? 1 : -1;
        }
        v20 = v12;
        if ( v8 - v7 >= 0 )
          v13 = v8 - v7;
        else
          v13 = v7 - v8;
        v14 = v18 - v11;
        v15 = 0;
        if ( v11 < v18 )
        {
          do
          {
            sub_4C5430(v17, v11);
            v15 += v13;
            ++v11;
            for ( ; v15 >= v14; v17 += v20 )
              v15 -= v14;
          }
          while ( v11 < v18 );
LABEL_25:
          v6 = v19;
          goto LABEL_26;
        }
      }
LABEL_26:
      result = a2;
      v4 = v21 + 1;
      v6 += 2;
      v16 = ++v21 < a2;
      v19 = v6;
      if ( !v16 )
        return result;
      v5 = a1;
    }
  }
  return result;
}

//----- (004C5430) --------------------------------------------------------
void __cdecl sub_4C5430(int a1, int a2)
{
  int v2; // esi
  int v3; // ecx
  unsigned __int8 *v4; // eax
  int v5; // eax
  unsigned __int8 *v6; // edx

  v2 = *(_DWORD *)&byte_5D4594[4 * a2 + 3679340];
  if ( v2 < 32 )
  {
    v3 = 0;
    if ( v2 > 0 )
    {
      v4 = &byte_5D4594[128 * a2 + 3682956];
      do
      {
        if ( a1 < *(int *)v4 )
          break;
        ++v3;
        v4 += 4;
      }
      while ( v3 < v2 );
    }
    if ( v3 != v2 && v2 - 1 >= v3 )
    {
      v5 = v2 - v3;
      v6 = &byte_5D4594[4 * (v2 - 1 + 32 * a2) + 3682960];
      do
      {
        *(_DWORD *)v6 = *((_DWORD *)v6 - 1);
        v6 -= 4;
        --v5;
      }
      while ( v5 );
    }
    *(_DWORD *)&byte_5D4594[4 * a2 + 3679340] = v2 + 1;
    *(_DWORD *)&byte_5D4594[4 * (v3 + 32 * a2) + 3682956] = a1;
    if ( a2 < *(int *)&byte_5D4594[3679320] )
      *(_DWORD *)&byte_5D4594[3679320] = a2;
    if ( a2 > *(int *)&byte_5D4594[3798156] )
      *(_DWORD *)&byte_5D4594[3798156] = a2;
  }
}

//----- (004C54D0) --------------------------------------------------------
void sub_4C54D0()
{
  ++*(_DWORD *)&byte_587000[185504];
}

//----- (004C54E0) --------------------------------------------------------
int sub_4C54E0()
{
  int result; // eax

  result = --*(_DWORD *)&byte_587000[185504];
  if ( *(int *)&byte_587000[185504] <= 0 )
    *(_DWORD *)&byte_587000[185504] = 1;
  return result;
}

//----- (004C5500) --------------------------------------------------------
int __cdecl sub_4C5500(int *a1)
{
  int *v1; // ebx
  int v2; // ebp
  int v3; // esi
  int v4; // edi
  int v5; // eax
  unsigned __int8 *v6; // ebx
  int *v7; // esi
  int v8; // eax
  int v9; // ecx
  unsigned int v10; // ebp
  int v11; // ecx
  int result; // eax
  unsigned __int8 *v13; // [esp+10h] [ebp-14h]
  int v14; // [esp+18h] [ebp-Ch]
  int v15; // [esp+1Ch] [ebp-8h]
  int v16; // [esp+20h] [ebp-4h]

  v1 = a1;
  v2 = *a1;
  v3 = a1[1];
  v14 = *a1;
  v15 = a1[1];
  v16 = sub_49F6D0(0);
  sub_434460(*(int *)&byte_5D4594[2650656]);
  v4 = *(_DWORD *)&byte_5D4594[3679320];
  if ( *(_DWORD *)&byte_5D4594[3679320] > v3 )
  {
    sub_49CE30(v2, v3, a1[8], *(_DWORD *)&byte_5D4594[3679320] - v3);
    v4 = *(_DWORD *)&byte_5D4594[3679320];
  }
  v5 = *(_DWORD *)&byte_5D4594[3798156];
  if ( v4 < *(int *)&byte_5D4594[3798156] )
  {
    v13 = &byte_5D4594[4 * v4 + 3679340];
    v6 = &byte_5D4594[128 * v4 + 3682956];
    do
    {
      v7 = (int *)(v6 + 4);
      v8 = v2;
      v9 = *(_DWORD *)v6;
      if ( *(_DWORD *)v13 > 0 )
      {
        v10 = (unsigned int)(*(_DWORD *)v13 + 1) >> 1;
        do
        {
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD))&byte_5D4594[3798720])(v8, v4, v9);
          v8 = *v7;
          v9 = v7[1];
          v7 += 2;
          --v10;
        }
        while ( v10 );
        v2 = v14;
      }
      (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD))&byte_5D4594[3798720])(v8, v4, v2 + a1[8]);
      v5 = *(_DWORD *)&byte_5D4594[3798156];
      ++v4;
      v6 += 128;
      v13 += 4;
    }
    while ( v4 < *(int *)&byte_5D4594[3798156] );
    v3 = v15;
    v1 = a1;
  }
  v11 = v1[9];
  if ( v5 < v11 + v3 )
    sub_49CE30(v2, v5, v1[8], v3 + v11 - v5);
  sub_49F6D0(v16);
  result = *(_DWORD *)&byte_5D4594[2650636];
  if ( result & 0x400 )
    result = sub_498AE0();
  return result;
}

//----- (004C5630) --------------------------------------------------------
int __cdecl sub_4C5630(int a1, int a2, int a3)
{
  int v3; // ecx
  int v4; // edx
  unsigned __int8 *i; // eax

  v3 = 0;
  v4 = *(_DWORD *)&byte_5D4594[4 * a3 + 3679340];
  if ( v4 <= 0 )
    return 0;
  for ( i = &byte_5D4594[128 * a3 + 3682956]; a1 > *((_DWORD *)i + 1) || a2 < *(int *)i; i += 8 )
  {
    v3 += 2;
    if ( v3 >= v4 )
      return 0;
  }
  return 1;
}

//----- (004C5680) --------------------------------------------------------
int __cdecl sub_4C5680(int a1, int a2, int a3)
{
  int v3; // ecx
  int v4; // edx
  unsigned __int8 *i; // eax

  v3 = 0;
  v4 = *(_DWORD *)&byte_5D4594[4 * a3 + 3679340];
  if ( v4 <= 0 )
    return 0;
  for ( i = &byte_5D4594[128 * a3 + 3682960]; a1 < *((_DWORD *)i - 1) || a2 >= *(int *)i; i += 8 )
  {
    v3 += 2;
    if ( v3 >= v4 )
      return 0;
  }
  return 1;
}

//----- (004C56D0) --------------------------------------------------------
int __cdecl sub_4C56D0(_DWORD *a1)
{
  int v1; // eax
  int v2; // ebp
  int v3; // ecx
  int v4; // edx
  int result; // eax
  int v6; // ecx
  int v7; // ebx
  int v8; // edx
  int v9; // esi
  bool v10; // cc
  unsigned __int8 *v11; // edx
  int v12; // eax
  unsigned __int8 *v13; // edi
  int v14; // ebp
  unsigned int v15; // ecx

  v1 = a1[5];
  if ( v1 >= 0 )
  {
    if ( v1 >= 46 )
      v2 = 0;
    else
      v2 = 46 - v1;
  }
  else
  {
    v2 = 46 - v1;
  }
  *(_DWORD *)&byte_5D4594[3679320] = v2;
  v3 = a1[9];
  v4 = a1[5];
  result = *(_DWORD *)&byte_5D4594[3807120];
  if ( v3 + v4 > 5865 )
    result = *(_DWORD *)&byte_5D4594[3807120] - v3 - v4 + 5865;
  *(_DWORD *)&byte_5D4594[3798156] = result;
  if ( result < 0 )
  {
    result = 0;
    *(_DWORD *)&byte_5D4594[3798156] = 0;
  }
  v6 = a1[4];
  if ( v6 >= 0 )
  {
    if ( v6 >= 46 )
      v7 = 0;
    else
      v7 = 46 - v6;
  }
  else
  {
    v7 = 46 - v6;
  }
  v8 = a1[8];
  v9 = *(_DWORD *)&byte_5D4594[3805496];
  if ( v8 + v6 > 5865 )
    v9 = *(_DWORD *)&byte_5D4594[3805496] - v8 - v6 + 5865;
  if ( v9 < 0 )
    v9 = 0;
  if ( v7 > v9 )
    v7 = v9;
  v10 = v2 < result;
  if ( v2 > result )
  {
    v2 = result;
    *(_DWORD *)&byte_5D4594[3679320] = result;
    v10 = 0;
  }
  if ( v10 )
  {
    v11 = &byte_5D4594[128 * v2 + 3682960];
    v12 = result - v2;
    v13 = &byte_5D4594[4 * v2 + 3679340];
    v14 = v12;
    v15 = v12;
    result = 2;
    memset32(v13, 2, v15);
    do
    {
      *((_DWORD *)v11 - 1) = v7;
      *(_DWORD *)v11 = v9;
      v11 += 128;
      --v14;
    }
    while ( v14 );
  }
  return result;
}

//----- (004C57C0) --------------------------------------------------------
int __cdecl sub_4C57C0(FILE *a1, int a2, _DWORD *a3, _DWORD *a4)
{
  int result; // eax

  if ( !a1 )
    return 0;
  result = sub_4C5850(a1);
  if ( result )
  {
    if ( *(_DWORD *)&byte_5D4594[1322572] )
    {
      result = sub_4C5A60(a1, a2);
      if ( !result )
        return result;
    }
    else if ( !sub_4C5CB0(a1) || !sub_4C5D20(a1, a2) )
    {
      return 0;
    }
    fclose(a1);
    *a3 = *(_DWORD *)&byte_5D4594[3679312];
    *a4 = *(_DWORD *)&byte_5D4594[3679316];
    result = 1;
  }
  return result;
}

//----- (004C5850) --------------------------------------------------------
BOOL __cdecl sub_4C5850(FILE *a1)
{
  FILE *v1; // esi
  int v3; // [esp+4h] [ebp-4h]

  v1 = a1;
  if ( fscanf(a1, (const char *)&byte_587000[185508], &a1) != 1 )
    return 0;
  if ( (_BYTE)a1 != 10 )
    return 0;
  if ( fscanf(v1, (const char *)&byte_587000[185512], &a1) != 1 )
    return 0;
  if ( (_BYTE)a1 != 5 )
    return 0;
  if ( fscanf(v1, (const char *)&byte_587000[185516], &a1) != 1 )
    return 0;
  if ( (_BYTE)a1 != 1 )
    return 0;
  if ( fscanf(v1, (const char *)&byte_587000[185520], &a1) != 1 )
    return 0;
  if ( (_BYTE)a1 != 8 )
    return 0;
  if ( fscanf(v1, (const char *)&byte_587000[185524], &v3) != 1 )
    return 0;
  if ( (_WORD)v3 )
    return 0;
  if ( fscanf(v1, (const char *)&byte_587000[185528], &v3) != 1 )
    return 0;
  if ( (_WORD)v3 )
    return 0;
  if ( fscanf(v1, (const char *)&byte_587000[185532], &v3) != 1 )
    return 0;
  *(_DWORD *)&byte_5D4594[3679312] = (unsigned __int16)v3;
  if ( fscanf(v1, (const char *)&byte_587000[185536], &v3) != 1 )
    return 0;
  *(_DWORD *)&byte_5D4594[3679316] = (unsigned __int16)v3;
  if ( *(_DWORD *)&byte_5D4594[3679312] > 639 )
    return 0;
  if ( (int)(unsigned __int16)v3 > 639 )
    return 0;
  ++*(_DWORD *)&byte_5D4594[3679312];
  *(_DWORD *)&byte_5D4594[3679316] = (unsigned __int16)v3 + 1;
  fseek(v1, 65, 0);
  if ( fscanf(v1, (const char *)&byte_587000[185540], &a1) != 1 )
    return 0;
  if ( (_BYTE)a1 == 1 )
  {
    *(_DWORD *)&byte_5D4594[1322572] = 0;
  }
  else
  {
    if ( (_BYTE)a1 != 3 )
      return 0;
    *(_DWORD *)&byte_5D4594[1322572] = 1;
  }
  if ( fscanf(v1, (const char *)&byte_587000[185544], &v3) == 1 )
  {
    *(_DWORD *)&byte_5D4594[3679308] = (unsigned __int16)v3;
    return fscanf(v1, (const char *)&byte_587000[185548], &v3) == 1;
  }
  return 0;
}

//----- (004C5A60) --------------------------------------------------------
int __cdecl sub_4C5A60(FILE *a1, int a2)
{
  int v2; // ebx
  int v3; // ebp
  int v4; // eax
  int v5; // esi
  char v6; // dl
  int v7; // eax
  int v8; // ecx
  bool v9; // cc
  int v11; // [esp+10h] [ebp-10h]
  int v12; // [esp+14h] [ebp-Ch]
  int v13; // [esp+18h] [ebp-8h]
  int v14; // [esp+1Ch] [ebp-4h]
  int i; // [esp+28h] [ebp+8h]

  HIWORD(v2) = 0;
  LOBYTE(v12) = 0;
  LOBYTE(v11) = 0;
  fseek(a1, 128, 0);
  v13 = 0;
  if ( *(_DWORD *)&byte_5D4594[3679316] > 0 )
  {
    v3 = a2;
    v4 = *(_DWORD *)&byte_5D4594[3679308];
    v14 = a2;
    while ( 2 )
    {
      for ( i = 0; i < 3; ++i )
      {
        v5 = 0;
        if ( v4 > 0 )
        {
          while ( sub_4C5B80(a1, v5, &v11, &v12) )
          {
            LOBYTE(v2) = v12;
            v6 = v11;
            BYTE1(v2) = v12;
            v7 = v2 << 16;
            LOWORD(v7) = v2;
            v8 = (unsigned __int8)v11 >> 2;
            memset32((void *)(v5 + v3), v7, v8);
            memset((void *)(v5 + v3 + 4 * v8), v2, v6 & 3);
            v5 += (unsigned __int8)v11;
            v4 = *(_DWORD *)&byte_5D4594[3679308];
            if ( v5 >= *(int *)&byte_5D4594[3679308] )
              goto LABEL_7;
          }
          return 0;
        }
LABEL_7:
        v3 += 409600;
      }
      v3 = v14 + 640;
      v9 = ++v13 < *(int *)&byte_5D4594[3679316];
      v14 += 640;
      if ( v9 )
        continue;
      break;
    }
  }
  sub_4C5B80(a1, 0, &v11, &v12);
  return 1;
}

//----- (004C5B80) --------------------------------------------------------
int __cdecl sub_4C5B80(FILE *a1, int a2, _BYTE *a3, _BYTE *a4)
{
  int v4; // eax
  int v5; // ecx
  int result; // eax
  _BYTE *v7; // ecx
  FILE *v8; // esi
  char v9; // bl
  int v10; // ebx
  unsigned __int8 v11; // al
  _BYTE *v12; // eax
  char v13; // cl
  _BYTE *v14; // eax

  if ( *(_DWORD *)&byte_5D4594[1322576] )
  {
    v4 = a2;
    if ( *(_DWORD *)&byte_5D4594[1322576] + a2 <= *(int *)&byte_5D4594[3679308] )
    {
      v7 = a4;
      *a3 = byte_5D4594[1322576];
      *(_DWORD *)&byte_5D4594[1322576] = 0;
      *v7 = byte_5D4594[1322580];
      result = 1;
    }
    else
    {
      *a3 = byte_5D4594[3679308] - a2;
      v5 = v4 - *(_DWORD *)&byte_5D4594[3679308] + *(_DWORD *)&byte_5D4594[1322576];
      result = 1;
      *(_DWORD *)&byte_5D4594[1322576] = v5;
    }
  }
  else
  {
    v8 = a1;
    if ( fscanf(a1, (const char *)&byte_587000[185552], &a1) == 1 )
    {
      v9 = (char)a1;
      if ( ((unsigned __int8)a1 & 0xC0) == 0xC0 )
      {
        v10 = (unsigned __int8)a1 & 0x3F;
        if ( fscanf(v8, (const char *)&byte_587000[185556], &a1) == 1 )
        {
          if ( v10 + a2 <= *(int *)&byte_5D4594[3679308] )
          {
            v12 = a4;
            v13 = (char)a1;
            *a3 = v10;
            *v12 = v13;
          }
          else
          {
            v11 = byte_5D4594[3679308] - a2;
            *a3 = byte_5D4594[3679308] - a2;
            *(_DWORD *)&byte_5D4594[1322576] = v10 - v11;
            *(_DWORD *)&byte_5D4594[1322580] = (unsigned __int8)a1;
            *a4 = (_BYTE)a1;
          }
          result = 1;
        }
        else
        {
          result = 0;
        }
      }
      else
      {
        v14 = a4;
        *a3 = 1;
        *v14 = v9;
        result = 1;
      }
    }
    else
    {
      result = 0;
    }
  }
  return result;
}

//----- (004C5CB0) --------------------------------------------------------
BOOL __cdecl sub_4C5CB0(FILE *a1)
{
  FILE *v1; // esi

  v1 = a1;
  if ( fseek(a1, -769, 2) )
    return 0;
  if ( fread(&a1, 1u, 1u, v1) != 1 )
    return 0;
  if ( (_BYTE)a1 == 12 )
    return fread(&byte_5D4594[1321804], 1u, 0x300u, v1) == 768;
  return 0;
}

//----- (004C5D20) --------------------------------------------------------
int __cdecl sub_4C5D20(FILE *a1, int a2)
{
  int v2; // ebx
  int v3; // eax
  int v4; // ebp
  int v5; // esi
  char *v6; // edi
  char v7; // dl
  int v8; // eax
  int v9; // ecx
  char *v10; // edi
  char v11; // dl
  int v12; // eax
  int v13; // ecx
  char v14; // dl
  int v15; // eax
  int v16; // ecx
  int result; // eax
  int v18; // [esp+10h] [ebp-Ch]
  int v19; // [esp+14h] [ebp-8h]
  int v20; // [esp+18h] [ebp-4h]

  HIWORD(v2) = 0;
  LOBYTE(v19) = 0;
  LOBYTE(v18) = 0;
  fseek(a1, 128, 0);
  v20 = 0;
  if ( *(int *)&byte_5D4594[3679316] <= 0 )
  {
LABEL_7:
    sub_4C5B80(a1, 0, &v18, &v19);
    result = 1;
  }
  else
  {
    v3 = *(_DWORD *)&byte_5D4594[3679308];
    v4 = a2 + 819200;
    while ( 1 )
    {
      v5 = 0;
      if ( v3 > 0 )
        break;
LABEL_6:
      v4 += 640;
      if ( ++v20 >= *(int *)&byte_5D4594[3679316] )
        goto LABEL_7;
    }
    while ( sub_4C5B80(a1, v5, &v18, &v19) )
    {
      v6 = (char *)(v5 + v4 - 819200);
      v7 = v18;
      LOBYTE(v2) = byte_5D4594[3 * (unsigned __int8)v19 + 1321804];
      BYTE1(v2) = byte_5D4594[3 * (unsigned __int8)v19 + 1321804];
      v8 = v2 << 16;
      LOWORD(v8) = v2;
      v9 = (unsigned __int8)v18 >> 2;
      memset32(v6, v8, v9);
      memset(&v6[4 * v9], v2, v7 & 3);
      v10 = (char *)(v5 + v4 - 409600);
      v11 = v18;
      LOBYTE(v2) = byte_5D4594[3 * (unsigned __int8)v19 + 1321805];
      BYTE1(v2) = byte_5D4594[3 * (unsigned __int8)v19 + 1321805];
      v12 = v2 << 16;
      LOWORD(v12) = v2;
      v13 = (unsigned __int8)v18 >> 2;
      memset32(v10, v12, v13);
      memset(&v10[4 * v13], v2, v11 & 3);
      v14 = v18;
      LOBYTE(v2) = byte_5D4594[3 * (unsigned __int8)v19 + 1321806];
      BYTE1(v2) = byte_5D4594[3 * (unsigned __int8)v19 + 1321806];
      v15 = v2 << 16;
      LOWORD(v15) = v2;
      v16 = (unsigned __int8)v18 >> 2;
      memset32((void *)(v5 + v4), v15, v16);
      memset((void *)(v5 + v4 + 4 * v16), v2, v14 & 3);
      v5 += (unsigned __int8)v18;
      v3 = *(_DWORD *)&byte_5D4594[3679308];
      if ( v5 >= *(int *)&byte_5D4594[3679308] )
        goto LABEL_6;
    }
    result = 0;
  }
  return result;
}

//----- (004C5EB0) --------------------------------------------------------
void __cdecl sub_4C5EB0(int a1, int a2, int a3)
{
  int v3; // ecx
  int v4; // eax

  if ( a1 )
  {
    switch ( *(_BYTE *)(a1 + 10) & 0x3F )
    {
      case 2:
      case 7:
        *(_DWORD *)&byte_5D4594[3799536] = sub_4C69A0;
        sub_4C60D0(a1, a2, a3);
        return;
      case 3:
      case 4:
      case 5:
      case 6:
        *(_DWORD *)&byte_5D4594[3799544] = sub_4C7110;
        *(_DWORD *)&byte_5D4594[3799488] = sub_4C6E40;
        if ( !*(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 52) )
        {
          if ( *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 56) )
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C6BA0;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C7060;
            sub_4C6260(a1, a2, a3);
            return;
          }
          goto LABEL_21;
        }
        *(_DWORD *)&byte_5D4594[3799544] = sub_4C7240;
        if ( *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 56) )
        {
          v3 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
          if ( v3 == 255 )
          {
            if ( !*(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 64) )
            {
              *(_DWORD *)&byte_5D4594[3799536] = sub_4C6BA0;
              *(_DWORD *)&byte_5D4594[3799432] = sub_4C7060;
              sub_4C6260(a1, a2, a3);
              return;
            }
            goto LABEL_21;
          }
          if ( v3 == 128 )
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C6BF0;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C6FD0;
          }
          else
          {
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C6E40;
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C6C60;
          }
          sub_4C6260(a1, a2, a3);
        }
        else
        {
          v4 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
          if ( v4 == 255 )
          {
LABEL_21:
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C69A0;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C6DE0;
            sub_4C6260(a1, a2, a3);
            return;
          }
          if ( v4 == 128 )
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C6B50;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C6FD0;
          }
          else
          {
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C6E40;
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C6A00;
          }
          sub_4C6260(a1, a2, a3);
        }
        break;
      case 8:
        *(_DWORD *)&byte_5D4594[3799536] = sub_4C73A0;
        sub_4C6260(a1, a2, a3);
        return;
      default:
        return;
    }
  }
}

//----- (004C60D0) --------------------------------------------------------
void __cdecl sub_4C60D0(int a1, int a2, int a3)
{
  int4 *result; // eax
  int v4; // esi
  int *v5; // eax
  int4 *v6; // ecx
  int v7; // ebx
  int v8; // edx
  int v9; // edi
  int v10; // ebp
  int v11; // eax
  int v12; // edx
  int v13; // esi
  int v14; // ecx
  int v15; // ebx
  int v16; // ebp
  int4 a1a; // [esp+10h] [ebp-20h]
  RECT rc; // [esp+20h] [ebp-10h]
  int v19; // [esp+3Ch] [ebp+Ch]

  result = (int4 *)(*(int (__cdecl **)(_DWORD))&byte_5D4594[3799492])(a1);
  *(_DWORD *)&byte_5D4594[3799444] = result;
  if ( result )
  {
    v4 = result->field_0;
    v5 = &result->field_4;
    *(_DWORD *)&byte_5D4594[3799444] = v5;
    v6 = (int4 *)*v5;
    ++v5;
    v7 = v4;
    *(_DWORD *)&byte_5D4594[3799444] = v5;
    v8 = *v5;
    ++v5;
    *(_DWORD *)&byte_5D4594[3799560] = v8;
    v9 = v8 + a2;
    *(_DWORD *)&byte_5D4594[3799444] = v5;
    *(_DWORD *)&byte_5D4594[3799556] = *v5;
    v10 = *(_DWORD *)&byte_5D4594[3799556] + a3;
    result = (int4 *)(v5 + 1);
    v19 = *(_DWORD *)&byte_5D4594[3799556] + a3;
    *(_DWORD *)&byte_5D4594[3799444] = result;
    if ( *(_DWORD *)&byte_5D4594[3799484] )
    {
      v6 = (int4 *)((char *)v6 - *(_DWORD *)&byte_5D4594[3799484]);
      if ( (int)v6 <= 0 )
        return;
      *(_DWORD *)&byte_5D4594[3799476] = (char *)v6 + v10;
    }
    *(_DWORD *)&byte_5D4594[3799520] = v8 + a2;
    *(_DWORD *)&byte_5D4594[3799444] = (char *)result + 1;
    *(_DWORD *)&byte_5D4594[3799512] = v10;
    *(_DWORD *)&byte_5D4594[3799516] = v4;
    *(_DWORD *)&byte_5D4594[3799504] = v6;
    if ( **(_DWORD **)&byte_5D4594[3799572] )
    {
      SetRect(&rc, v9, v10, v4 + v9, (int)v6 + v10);
      result = sub_49F930(&a1a, (int4 *)&rc, (int4 *)(*(_DWORD *)&byte_5D4594[3799572] + 4));
      if ( !result )
        return;
      v11 = a1a.field_0 - rc.left;
      v12 = a1a.field_4 - rc.top;
      v7 = a1a.field_8 - a1a.field_0;
      v6 = (int4 *)(a1a.field_C - a1a.field_4);
      if ( a1a.field_0 != rc.left || v12 )
      {
        v9 += v11;
        v7 = a1a.field_8 - a1a.field_0;
        *(_DWORD *)&byte_5D4594[3799444] += v11 + v4 * v12;
        v10 = v12 + v19;
      }
      else
      {
        v10 = v19;
      }
    }
    v13 = v4 - v7;
    result = v6;
    v14 = (int)&v6[-1].field_C + 3;
    *(_DWORD *)&byte_5D4594[3799456] = v7;
    if ( result )
    {
      v15 = 4 * v10;
      v16 = v14 + 1;
      do
      {
        v15 += 4;
        *(_DWORD *)&byte_5D4594[3799540] = v9 + *(_DWORD *)(v15 + *(_DWORD *)&byte_5D4594[3798784] - 4);
        (*(void (**)(void))&byte_5D4594[3799536])();
        --v16;
        *(_DWORD *)&byte_5D4594[3799444] += v13;
      }
      while ( v16 );
    }
  }
}

//----- (004C6260) --------------------------------------------------------
int __cdecl sub_4C6260(int a1, int a2, int a3)
{
  int result; // eax
  signed int v4; // ebx
  int v5; // edi
  int *v6; // ecx
  int v7; // eax
  int v8; // ebp
  int v9; // eax
  int v10; // esi
  int v11; // ecx
  int v12; // ecx
  int4 *v13; // edi
  int v14; // edx
  signed int v15; // esi
  void *v16; // eax
  int v17; // edx
  RECT rc; // [esp+10h] [ebp-20h]
  int4 a1a; // [esp+20h] [ebp-10h]
  int v20; // [esp+34h] [ebp+4h]
  int v21; // [esp+38h] [ebp+8h]
  int4 *v22; // [esp+3Ch] [ebp+Ch]

  result = (*(int (__cdecl **)(_DWORD))&byte_5D4594[3799492])(a1);
  *(_DWORD *)&byte_5D4594[3799444] = result;
  if ( result )
  {
    v4 = *(_DWORD *)result;
    *(_DWORD *)&byte_5D4594[3799444] = result + 4;
    v5 = *(_DWORD *)(result + 4);
    v6 = (int *)(result + 8);
    *(_DWORD *)&byte_5D4594[3799444] = v6;
    v7 = *(_DWORD *)(result + 8);
    ++v6;
    *(_DWORD *)&byte_5D4594[3799560] = v7;
    v8 = v7 + a2;
    *(_DWORD *)&byte_5D4594[3799444] = v6;
    v9 = *v6;
    *(_DWORD *)&byte_5D4594[3799556] = v9;
    v10 = v9 + a3;
    result = *(_DWORD *)&byte_5D4594[3799484];
    v11 = (int)(v6 + 1);
    *(_DWORD *)&byte_5D4594[3799444] = v11;
    if ( *(_DWORD *)&byte_5D4594[3799484] )
    {
      v5 -= *(_DWORD *)&byte_5D4594[3799484];
      if ( v5 <= 0 )
        return result;
      *(_DWORD *)&byte_5D4594[3799476] = v5 + v10;
    }
    *(_DWORD *)&byte_5D4594[3799444] = v11 + 1;
    *(_DWORD *)&byte_5D4594[3799520] = v8;
    *(_DWORD *)&byte_5D4594[3799512] = v10;
    *(_DWORD *)&byte_5D4594[3799516] = v4;
    *(_DWORD *)&byte_5D4594[3799504] = v5;
    if ( !**(_DWORD **)&byte_5D4594[3799572] )
      goto LABEL_30;
    SetRect(&rc, v8, v10, v4 + v8, v5 + v10);
    result = sub_49F930(&a1a, (int4 *)&rc, (int4 *)(*(_DWORD *)&byte_5D4594[3799572] + 4));
    if ( !result )
      return result;
    if ( rc.left != a1a.field_0 || rc.right != a1a.field_8 || rc.top != a1a.field_4 || rc.bottom != a1a.field_C )
    {
      result = sub_4C64E0(v8, v10, v4, &a1a.field_0);
    }
    else
    {
LABEL_30:
      result = v10 & 1;
      v20 = 0;
      *(_DWORD *)&byte_5D4594[3799508] ^= result;
      v12 = v5;
      v13 = (int4 *)(v5 - 1);
      v22 = v13;
      if ( v12 )
      {
        v14 = 4 * v10;
        v21 = 4 * v10;
        do
        {
          v15 = v4;
          v16 = (void *)(*(_DWORD *)(v14 + *(_DWORD *)&byte_5D4594[3798784]) + v8);
          *(_DWORD *)&byte_5D4594[3799540] = *(_DWORD *)(v14 + *(_DWORD *)&byte_5D4594[3798784]) + v8;
          if ( *(_DWORD *)&byte_5D4594[3799552] && (*(_DWORD *)&byte_5D4594[3799508] ^= 1u) != 0 )
          {
            if ( v20 )
            {
              qmemcpy(v16, (const void *)(v8 + *(_DWORD *)(v14 + *(_DWORD *)&byte_5D4594[3798784] - 4)), v4);
              v13 = v22;
            }
            sub_4C6900(v4, 1);
          }
          else if ( v4 > 0 )
          {
            while ( 2 )
            {
              *(_DWORD *)&byte_5D4594[3799428] = (unsigned __int8)**(_BYTE **)&byte_5D4594[3799444];
              ++*(_DWORD *)&byte_5D4594[3799444];
              v17 = (unsigned __int8)**(_BYTE **)&byte_5D4594[3799444];
              result = (byte_5D4594[3799428] & 0xF) - 1;
              *(_DWORD *)&byte_5D4594[3799456] = (unsigned __int8)**(_BYTE **)&byte_5D4594[3799444];
              ++*(_DWORD *)&byte_5D4594[3799444];
              switch ( byte_5D4594[3799428] & 0xF )
              {
                case 1:
                  *(_DWORD *)&byte_5D4594[3799540] += v17;
                  goto LABEL_26;
                case 2:
                case 7:
                  (*(void (**)(void))&byte_5D4594[3799536])();
                  goto LABEL_26;
                case 4:
                  (*(void (**)(void))&byte_5D4594[3799432])();
                  goto LABEL_26;
                case 5:
                  (*(void (**)(void))&byte_5D4594[3799544])();
                  goto LABEL_26;
                case 6:
                  (*(void (**)(void))&byte_5D4594[3799488])();
LABEL_26:
                  v15 -= *(_DWORD *)&byte_5D4594[3799456];
                  if ( v15 <= 0 )
                    break;
                  continue;
                default:
                  return result;
              }
            }
          }
          v14 = v21 + 4;
          result = (int)v13;
          v13 = (int4 *)((char *)v13 - 1);
          ++v20;
          v21 += 4;
          v22 = v13;
        }
        while ( result );
      }
    }
  }
  return result;
}

//----- (004C64E0) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4C64E0(int a1, int a2, int a3, int *a4)
{
  int v4; // ebp
  int v5; // ebx
  unsigned __int8 *result; // eax
  int v7; // edi
  int v8; // ecx
  unsigned __int8 *v9; // esi
  int v10; // esi
  int v11; // edi
  int v12; // edx
  int v13; // esi
  unsigned int v14; // ecx
  char *v15; // esi
  char *v16; // eax
  char v17; // dl
  unsigned int v18; // ecx
  char *v19; // edi
  char *v20; // esi
  int v21; // edx
  int v22; // ecx
  unsigned __int8 *v23; // eax
  int v24; // ecx
  int v25; // edi
  int v26; // ecx
  int v27; // edx
  int v28; // edi
  int v29; // ecx
  int v30; // edi
  int v31; // ecx
  int v32; // edi
  int v33; // ecx
  int v34; // edi
  int v35; // ecx
  bool v36; // zf
  unsigned __int8 *v37; // [esp+10h] [ebp-18h]
  int v38; // [esp+14h] [ebp-14h]
  int v39; // [esp+18h] [ebp-10h]
  int v40; // [esp+1Ch] [ebp-Ch]
  int v41; // [esp+20h] [ebp-8h]
  int v42; // [esp+24h] [ebp-4h]
  int v43; // [esp+30h] [ebp+8h]
  int v44; // [esp+38h] [ebp+10h]

  v4 = *a4;
  v5 = a4[2];
  result = *(unsigned __int8 **)&byte_5D4594[3799484];
  v7 = a2;
  v8 = a4[1] - a2;
  v9 = (unsigned __int8 *)(a4[3] - a4[1]);
  v44 = a4[2];
  if ( *(_DWORD *)&byte_5D4594[3799484] )
  {
    v9 -= *(_DWORD *)&byte_5D4594[3799484];
    if ( (int)v9 <= 0 )
      return result;
    *(_DWORD *)&byte_5D4594[3799476] = &v9[a2];
  }
  if ( v8 )
  {
    v7 = v8 + a2;
    sub_4C6900(a3, v8);
  }
  v39 = 0;
  *(_DWORD *)&byte_5D4594[3799508] ^= v7 & 1;
  result = v9;
  v10 = (int)(v9 - 1);
  if ( result )
  {
    result = *(unsigned __int8 **)&byte_5D4594[3799444];
    v11 = 4 * v7;
    v40 = v11;
    v42 = v10 + 1;
    do
    {
      v12 = a3;
      v13 = a1;
      v41 = a3;
      if ( !*(_DWORD *)&byte_5D4594[3799552] || (*(_DWORD *)&byte_5D4594[3799508] ^= 1u) == 0 )
      {
        v21 = a1 + *(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784]);
        *(_DWORD *)&byte_5D4594[3799540] = a1 + *(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784]);
        if ( a3 <= 0 )
          goto LABEL_85;
        while ( 1 )
        {
          v38 = v21;
          v22 = *result;
          v23 = result + 1;
          *(_DWORD *)&byte_5D4594[3799428] = v22;
          *(_DWORD *)&byte_5D4594[3799444] = v23;
          v24 = *v23;
          result = v23 + 1;
          *(_DWORD *)&byte_5D4594[3799456] = v24;
          *(_DWORD *)&byte_5D4594[3799444] = result;
          v37 = result;
          v43 = v24;
          switch ( byte_5D4594[3799428] & 0xF )
          {
            case 1:
              v21 += v24;
              *(_DWORD *)&byte_5D4594[3799540] = v21;
              goto LABEL_82;
            case 2:
              v25 = v24 + v13;
              if ( v13 < v4 )
              {
                v5 = v44;
                if ( v25 > v4 )
                {
                  if ( v25 <= v44 )
                    v26 = v13 - v4 + v24;
                  else
                    v26 = v44 - v4;
                  *(_DWORD *)&byte_5D4594[3799456] = v26;
                  *(_DWORD *)&byte_5D4594[3799444] = &result[v4 - v13];
                  *(_DWORD *)&byte_5D4594[3799540] = v4 - v13 + v21;
                  goto LABEL_28;
                }
              }
              else
              {
                v5 = v44;
                if ( v25 <= v44 )
                  goto LABEL_28;
              }
              if ( v13 < v5 && v25 > v5 )
              {
                *(_DWORD *)&byte_5D4594[3799456] = v5 - v13;
LABEL_28:
                (*(void (**)(void))&byte_5D4594[3799536])();
              }
              v27 = v43;
              result = &v37[v43];
LABEL_80:
              *(_DWORD *)&byte_5D4594[3799444] = result;
              v21 = v38 + v27;
              *(_DWORD *)&byte_5D4594[3799540] = v21;
LABEL_83:
              v13 += v43;
              v41 -= v43;
              if ( v41 <= 0 )
              {
                v11 = v40;
                goto LABEL_85;
              }
              break;
            case 4:
              v30 = v24 + v13;
              if ( v13 < v4 )
              {
                v5 = v44;
                if ( v30 > v4 )
                {
                  if ( v30 <= v44 )
                    v31 = v13 - v4 + v24;
                  else
                    v31 = v44 - v4;
                  *(_DWORD *)&byte_5D4594[3799456] = v31;
                  *(_DWORD *)&byte_5D4594[3799444] = &result[v4 - v13];
                  *(_DWORD *)&byte_5D4594[3799540] = v4 - v13 + v21;
                  goto LABEL_52;
                }
              }
              else
              {
                v5 = v44;
                if ( v30 <= v44 )
                  goto LABEL_52;
              }
              if ( v13 < v5 && v30 > v5 )
              {
                *(_DWORD *)&byte_5D4594[3799456] = v5 - v13;
LABEL_52:
                (*(void (**)(void))&byte_5D4594[3799432])();
              }
              v27 = v43;
              result = &v37[v43];
              goto LABEL_80;
            case 5:
              v32 = v24 + v13;
              if ( v13 < v4 )
              {
                v5 = v44;
                if ( v32 > v4 )
                {
                  if ( v32 <= v44 )
                    v33 = v13 - v4 + v24;
                  else
                    v33 = v44 - v4;
                  *(_DWORD *)&byte_5D4594[3799456] = v33;
                  *(_DWORD *)&byte_5D4594[3799540] = v4 - v13 + v21;
                  *(_DWORD *)&byte_5D4594[3799444] = &result[2 * (v4 - v13)];
                  goto LABEL_65;
                }
              }
              else
              {
                v5 = v44;
                if ( v32 <= v44 )
                  goto LABEL_65;
              }
              if ( v13 < v5 && v32 > v5 )
              {
                *(_DWORD *)&byte_5D4594[3799456] = v5 - v13;
LABEL_65:
                (*(void (**)(void))&byte_5D4594[3799544])();
              }
              result = &v37[2 * v43];
              v21 = v38 + v43;
              *(_DWORD *)&byte_5D4594[3799444] = &v37[2 * v43];
              *(_DWORD *)&byte_5D4594[3799540] = v38 + v43;
              goto LABEL_83;
            case 6:
              v34 = v24 + v13;
              if ( v13 < v4 )
              {
                v5 = v44;
                if ( v34 > v4 )
                {
                  if ( v34 <= v44 )
                    v35 = v13 - v4 + v24;
                  else
                    v35 = v44 - v4;
                  *(_DWORD *)&byte_5D4594[3799456] = v35;
                  *(_DWORD *)&byte_5D4594[3799540] = v4 - v13 + v21;
                  *(_DWORD *)&byte_5D4594[3799444] = &result[2 * (v4 - v13)];
                  goto LABEL_78;
                }
              }
              else
              {
                v5 = v44;
                if ( v34 <= v44 )
                  goto LABEL_78;
              }
              if ( v13 < v5 && v34 > v5 )
              {
                *(_DWORD *)&byte_5D4594[3799456] = v5 - v13;
LABEL_78:
                (*(void (**)(void))&byte_5D4594[3799488])();
              }
LABEL_79:
              v27 = v43;
              result = &v37[2 * v43];
              goto LABEL_80;
            case 7:
              v28 = v24 + v13;
              if ( v13 < v4 )
              {
                v5 = v44;
                if ( v28 > v4 )
                {
                  if ( v28 <= v44 )
                    v29 = v13 - v4 + v24;
                  else
                    v29 = v44 - v4;
                  *(_DWORD *)&byte_5D4594[3799456] = v29;
                  *(_DWORD *)&byte_5D4594[3799540] = v4 - v13 + v21;
                  *(_DWORD *)&byte_5D4594[3799444] = &result[2 * (v4 - v13)];
                  (*(void (**)(void))&byte_5D4594[3799536])();
                  goto LABEL_79;
                }
              }
              else
              {
                v5 = v44;
                if ( v28 <= v44 )
                {
                  (*(void (**)(void))&byte_5D4594[3799536])();
                  goto LABEL_79;
                }
              }
              if ( v13 < v5 && v28 > v5 )
              {
                *(_DWORD *)&byte_5D4594[3799456] = v5 - v13;
                (*(void (**)(void))&byte_5D4594[3799536])();
              }
              goto LABEL_79;
            default:
LABEL_82:
              v5 = v44;
              goto LABEL_83;
          }
        }
      }
      if ( v39 )
      {
        v14 = v5 - v4;
        v15 = (char *)(v4 + *(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784] - 4));
        v16 = (char *)(v4 + *(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784]));
        if ( v5 - v4 > a3 )
          v14 = a3;
        v17 = v14;
        v18 = v14 >> 2;
        qmemcpy(v16, v15, 4 * v18);
        v20 = &v15[4 * v18];
        v19 = &v16[4 * v18];
        LOBYTE(v18) = v17;
        v12 = a3;
        qmemcpy(v19, v20, v18 & 3);
        v11 = v40;
      }
      sub_4C6900(v12, 1);
      result = *(unsigned __int8 **)&byte_5D4594[3799444];
LABEL_85:
      v11 += 4;
      v36 = v42 == 1;
      ++v39;
      v40 = v11;
      --v42;
    }
    while ( !v36 );
  }
  return result;
}

//----- (004C6900) --------------------------------------------------------
char *__cdecl sub_4C6900(int a1, int a2)
{
  char *result; // eax
  int v3; // ebp
  int i; // esi
  char v5; // cl
  char *v6; // eax
  unsigned __int8 v7; // dl

  result = (char *)(a2 - 1);
  if ( a2 )
  {
    v3 = a2;
    result = *(char **)&byte_5D4594[3799444];
    do
    {
      for ( i = a1; i > 0; i -= v7 )
      {
        v5 = *result;
        v6 = result + 1;
        *(_DWORD *)&byte_5D4594[3799444] = v6;
        v7 = *v6;
        result = v6 + 1;
        *(_DWORD *)&byte_5D4594[3799444] = result;
        switch ( v5 & 0xF )
        {
          case 2:
          case 4:
            result += v7;
            goto LABEL_7;
          case 5:
          case 6:
          case 7:
            result += 2 * v7;
LABEL_7:
            *(_DWORD *)&byte_5D4594[3799444] = result;
            break;
          default:
            continue;
        }
      }
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (004C69A0) --------------------------------------------------------
void sub_4C69A0()
{
  _BYTE *v0; // esi
  _BYTE *v1; // edi
  unsigned __int8 v2; // dl
  int v3; // ecx
  int v4; // eax
  int v6; // edx
  int v7; // edx

  v0 = *(_BYTE **)&byte_5D4594[3799444];
  v1 = *(_BYTE **)&byte_5D4594[3799540];
  v2 = byte_5D4594[3799456];
  v3 = *(_DWORD *)&byte_5D4594[3799456] >> 2;
  if ( *(_DWORD *)&byte_5D4594[3799456] >> 2 )
  {
    do
    {
      v4 = *(_DWORD *)v0;
      v0 += 4;
      *(_DWORD *)v1 = v4;
      v1 += 4;
    }
    while ( v3-- > 1 );
  }
  v6 = v2 & 3;
  if ( v6 )
  {
    LOBYTE(v4) = *v0++;
    *v1++ = v4;
    v7 = v6 - 1;
    if ( v7 )
    {
      LOBYTE(v4) = *v0++;
      *v1++ = v4;
      if ( v7 != 1 )
      {
        LOBYTE(v4) = *v0++;
        *v1++ = v4;
      }
    }
  }
  *(_DWORD *)&byte_5D4594[3799444] = v0;
  *(_DWORD *)&byte_5D4594[3799540] = v1;
}

//----- (004C6A00) --------------------------------------------------------
void sub_4C6A00()
{
  int result; // eax
  __int16 v1; // si
  _BYTE *v2; // edi
  int v3; // eax
  unsigned __int8 v4; // cl
  int v5; // eax
  bool v6; // zf
  unsigned __int8 v7; // [esp+0h] [ebp-20h]
  int v8; // [esp+4h] [ebp-1Ch]
  unsigned __int8 v9; // [esp+14h] [ebp-Ch]
  unsigned __int8 v10; // [esp+1Ch] [ebp-4h]

  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
    v2 = *(_BYTE **)&byte_5D4594[3799540];
    v8 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v7 = **(_BYTE **)&byte_5D4594[3799444];
      ++*(_DWORD *)&byte_5D4594[3799444];
      v3 = 4 * v7;
      v4 = byte_5D4594[v3 + 3803308];
      v10 = byte_5D4594[v3 + 3803310];
      v9 = byte_5D4594[v3 + 3803309];
      v5 = 4 * (unsigned __int8)*v2;
      *v2 = *(_BYTE *)((((unsigned __int8)(byte_5D4594[v5 + 3803310]
                                         + ((unsigned __int16)(v1 * (v10 - byte_5D4594[v5 + 3803310])) >> 8)) >> 3) | (4 * ((byte_5D4594[v5 + 3803309] + ((unsigned __int16)(v1 * (v9 - byte_5D4594[v5 + 3803309])) >> 8)) & 0xF8 | (32 * ((byte_5D4594[v5 + 3803308] + ((unsigned __int16)(v1 * (v4 - byte_5D4594[v5 + 3803308])) >> 8)) & 0xF8)))))
                     + *(_DWORD *)&byte_5D4594[810640]);
      v2 = (_BYTE *)(*(_DWORD *)&byte_5D4594[3799540] + 1);
      result = v8 - 1;
      v6 = v8 == 1;
      ++*(_DWORD *)&byte_5D4594[3799540];
      --v8;
    }
    while ( !v6 );
  }
}

//----- (004C6B50) --------------------------------------------------------
void sub_4C6B50()
{
  int v0; // ecx
  unsigned __int8 *v1; // esi
  unsigned __int8 *v2; // edi
  int v3; // ebx
  int v4; // eax
  int v5; // eax
  bool v7; // cc

  v0 = *(_DWORD *)&byte_5D4594[3799456];
  v1 = *(unsigned __int8 **)&byte_5D4594[3799444];
  v2 = *(unsigned __int8 **)&byte_5D4594[3799540];
  v3 = *(_DWORD *)&byte_5D4594[810632];
  if ( *(_DWORD *)&byte_5D4594[810632] )
  {
    do
    {
      v4 = *v1++ << 8;
      v5 = *v2++ + v4;
      *(v2 - 1) = *(_BYTE *)(v3 + v5);
      v7 = v0-- <= 1;
    }
    while ( !v7 );
    *(_DWORD *)&byte_5D4594[3799444] = v1;
    *(_DWORD *)&byte_5D4594[3799540] = v2;
  }
}

//----- (004C6BA0) --------------------------------------------------------
void sub_4C6BA0()
{
  int v0; // ecx
  unsigned __int8 *v1; // esi
  _BYTE *v2; // edi
  int v3; // ebx
  int v4; // eax
  int result; // eax

  v0 = *(_DWORD *)&byte_5D4594[3799456];
  v1 = *(unsigned __int8 **)&byte_5D4594[3799444];
  v2 = *(_BYTE **)&byte_5D4594[3799540];
  v3 = (*(_DWORD *)&byte_5D4594[3801748] >> 3) + *(_DWORD *)&byte_5D4594[810636];
  do
  {
    v4 = *v1++;
    result = 32 * v4;
    *v2++ = *(_BYTE *)(v3 + result);
  }
  while ( v0-- > 1 );
  *(_DWORD *)&byte_5D4594[3799444] = v1;
  *(_DWORD *)&byte_5D4594[3799540] = v2;
}

//----- (004C6BF0) --------------------------------------------------------
void sub_4C6BF0()
{
  unsigned __int8 *v0; // esi
  unsigned __int8 *v1; // edi
  int v2; // ebx
  int v3; // ecx
  int v4; // eax
  unsigned __int8 result; // al
  int v7; // [esp+Ch] [ebp-4h]

  v0 = *(unsigned __int8 **)&byte_5D4594[3799444];
  v1 = *(unsigned __int8 **)&byte_5D4594[3799540];
  v7 = *(_DWORD *)&byte_5D4594[3799456];
  v2 = (*(_DWORD *)&byte_5D4594[3801748] >> 3) + *(_DWORD *)&byte_5D4594[810636];
  v3 = *(_DWORD *)&byte_5D4594[810632];
  do
  {
    v4 = (*(unsigned __int8 *)(v2 + 32 * *v0++) << 8) + *v1;
    result = *(_BYTE *)(v3 + v4);
    *v1++ = result;
  }
  while ( v7-- > 1 );
  *(_DWORD *)&byte_5D4594[3799444] = v0;
  *(_DWORD *)&byte_5D4594[3799540] = v1;
}

//----- (004C6C60) --------------------------------------------------------
void sub_4C6C60()
{
  int result; // eax
  int v1; // ecx
  _BYTE *v2; // edi
  unsigned __int8 v3; // dl
  int v4; // eax
  unsigned __int8 v5; // cl
  int v6; // eax
  bool v7; // zf
  unsigned __int8 v8; // [esp+0h] [ebp-24h]
  unsigned __int8 v9; // [esp+4h] [ebp-20h]
  int v10; // [esp+4h] [ebp-20h]
  int v11; // [esp+8h] [ebp-1Ch]
  unsigned __int8 v12; // [esp+18h] [ebp-Ch]
  unsigned __int8 v13; // [esp+20h] [ebp-4h]

  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  v9 = *(_DWORD *)&byte_5D4594[3801748] >> 3;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = v9;
    v8 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
    v2 = *(_BYTE **)&byte_5D4594[3799540];
    v11 = v9;
    v10 = *(_DWORD *)&byte_5D4594[3799456];
    while ( 1 )
    {
      v3 = *(_BYTE *)(v1 + 32 * (unsigned __int8)**(_BYTE **)&byte_5D4594[3799444] + *(_DWORD *)&byte_5D4594[810636]);
      ++*(_DWORD *)&byte_5D4594[3799444];
      v4 = 4 * v3;
      v5 = byte_5D4594[v4 + 3803308];
      v13 = byte_5D4594[v4 + 3803310];
      v12 = byte_5D4594[v4 + 3803309];
      v6 = 4 * (unsigned __int8)*v2;
      *v2 = *(_BYTE *)((((unsigned __int8)(byte_5D4594[v6 + 3803310]
                                         + ((unsigned __int16)(v8 * (v13 - byte_5D4594[v6 + 3803310])) >> 8)) >> 3) | (4 * ((byte_5D4594[v6 + 3803309] + ((unsigned __int16)(v8 * (v12 - byte_5D4594[v6 + 3803309])) >> 8)) & 0xF8 | (32 * ((byte_5D4594[v6 + 3803308] + ((unsigned __int16)(v8 * (v5 - byte_5D4594[v6 + 3803308])) >> 8)) & 0xF8)))))
                     + *(_DWORD *)&byte_5D4594[810640]);
      v2 = (_BYTE *)(*(_DWORD *)&byte_5D4594[3799540] + 1);
      result = v10 - 1;
      v7 = v10 == 1;
      ++*(_DWORD *)&byte_5D4594[3799540];
      --v10;
      if ( v7 )
        break;
      v1 = v11;
    }
  }
}

//----- (004C6DE0) --------------------------------------------------------
void sub_4C6DE0()
{
  int v0; // ecx
  _BYTE *v1; // esi
  _BYTE *v2; // edi
  int v3; // ebx
  int v4; // eax

  v0 = *(_DWORD *)&byte_5D4594[3799456];
  v1 = *(_BYTE **)&byte_5D4594[3799444];
  v2 = *(_BYTE **)&byte_5D4594[3799540];
  v3 = 32 * byte_5D4594[48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + 3801020] + *(_DWORD *)&byte_5D4594[810636];
  v4 = 0;
  do
  {
    LOBYTE(v4) = *v1++;
    *v2++ = *(_BYTE *)(v3 + v4);
  }
  while ( v0-- > 1 );
  *(_DWORD *)&byte_5D4594[3799444] = v1;
  *(_DWORD *)&byte_5D4594[3799540] = v2;
}

//----- (004C6E40) --------------------------------------------------------
void sub_4C6E40()
{
  int result; // eax
  int v1; // ecx
  _BYTE *v2; // edi
  unsigned __int8 v3; // dl
  int v4; // eax
  unsigned __int8 v5; // cl
  int v6; // eax
  bool v7; // zf
  unsigned __int8 v8; // [esp+0h] [ebp-24h]
  unsigned __int8 v9; // [esp+4h] [ebp-20h]
  int v10; // [esp+4h] [ebp-20h]
  int v11; // [esp+8h] [ebp-1Ch]
  unsigned __int8 v12; // [esp+18h] [ebp-Ch]
  unsigned __int8 v13; // [esp+20h] [ebp-4h]

  result = *(_DWORD *)&byte_5D4594[3799572];
  LOBYTE(result) = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
  v9 = *(_BYTE *)(48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + *(_DWORD *)&byte_5D4594[3799572] + 304);
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = 32 * v9;
    v8 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
    v2 = *(_BYTE **)&byte_5D4594[3799540];
    v11 = 32 * v9;
    v10 = *(_DWORD *)&byte_5D4594[3799456];
    while ( 1 )
    {
      v3 = *(_BYTE *)(v1 + (unsigned __int8)**(_BYTE **)&byte_5D4594[3799444] + *(_DWORD *)&byte_5D4594[810636]);
      ++*(_DWORD *)&byte_5D4594[3799444];
      v4 = 4 * v3;
      v5 = byte_5D4594[v4 + 3803308];
      v13 = byte_5D4594[v4 + 3803310];
      v12 = byte_5D4594[v4 + 3803309];
      v6 = 4 * (unsigned __int8)*v2;
      *v2 = *(_BYTE *)((((unsigned __int8)(byte_5D4594[v6 + 3803310]
                                         + ((unsigned __int16)(v8 * (v13 - byte_5D4594[v6 + 3803310])) >> 8)) >> 3) | (4 * ((byte_5D4594[v6 + 3803309] + ((unsigned __int16)(v8 * (v12 - byte_5D4594[v6 + 3803309])) >> 8)) & 0xF8 | (32 * ((byte_5D4594[v6 + 3803308] + ((unsigned __int16)(v8 * (v5 - byte_5D4594[v6 + 3803308])) >> 8)) & 0xF8)))))
                     + *(_DWORD *)&byte_5D4594[810640]);
      v2 = (_BYTE *)(*(_DWORD *)&byte_5D4594[3799540] + 1);
      result = v10 - 1;
      v7 = v10 == 1;
      ++*(_DWORD *)&byte_5D4594[3799540];
      --v10;
      if ( v7 )
        break;
      v1 = v11;
    }
  }
}

//----- (004C6FD0) --------------------------------------------------------
void sub_4C6FD0()
{
  _BYTE *result; // eax
  int v1; // esi
  unsigned __int8 v2; // [esp+0h] [ebp-4h]

  result = (_BYTE *)(*(_DWORD *)&byte_5D4594[3799456] - 1);
  v2 = *(_BYTE *)(48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + *(_DWORD *)&byte_5D4594[3799572] + 304);
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = *(_DWORD *)&byte_5D4594[3799456];
    result = *(_BYTE **)&byte_5D4594[3799540];
    do
    {
      *result = *(_BYTE *)(((unsigned __int8)*result << 8)
                         + *(unsigned __int8 *)(32 * v2
                                              + (unsigned __int8)**(_BYTE **)&byte_5D4594[3799444]
                                              + *(_DWORD *)&byte_5D4594[810636])
                         + *(_DWORD *)&byte_5D4594[810632]);
      result = (_BYTE *)(*(_DWORD *)&byte_5D4594[3799540] + 1);
      --v1;
      ++*(_DWORD *)&byte_5D4594[3799444];
      ++*(_DWORD *)&byte_5D4594[3799540];
    }
    while ( v1 );
  }
}

//----- (004C7060) --------------------------------------------------------
void sub_4C7060()
{
  int result; // eax
  int v1; // edi
  int v2; // ebp
  unsigned __int8 v3; // dl

  result = *(_DWORD *)&byte_5D4594[3799428] >> 4;
  LOBYTE(result) = *(_BYTE *)(48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + *(_DWORD *)&byte_5D4594[3799572] + 304);
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    result = 32
           * *(unsigned __int8 *)(48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + *(_DWORD *)&byte_5D4594[3799572] + 304);
    v1 = (unsigned __int8)(*(_DWORD *)&byte_5D4594[3801748] >> 3);
    v2 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v3 = *(_BYTE *)(result + (unsigned __int8)**(_BYTE **)&byte_5D4594[3799444] + *(_DWORD *)&byte_5D4594[810636]);
      ++*(_DWORD *)&byte_5D4594[3799444];
      **(_BYTE **)&byte_5D4594[3799540] = *(_BYTE *)(v1 + 32 * v3 + *(_DWORD *)&byte_5D4594[810636]);
      --v2;
      ++*(_DWORD *)&byte_5D4594[3799540];
    }
    while ( v2 );
  }
}

//----- (004C7110) --------------------------------------------------------
unsigned int sub_4C7110()
{
  unsigned int result; // eax
  _BYTE *v1; // edi
  int v2; // ecx
  unsigned __int8 v3; // bl
  unsigned __int8 v4; // [esp+0h] [ebp-18h]
  unsigned int v5; // [esp+4h] [ebp-14h]
  unsigned __int8 v6; // [esp+Ch] [ebp-Ch]
  unsigned __int8 v7; // [esp+10h] [ebp-8h]

  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    HIWORD(result) = *(_WORD *)&byte_5D4594[3799458];
    v1 = *(_BYTE **)&byte_5D4594[3799540];
    v5 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      LOWORD(result) = **(_WORD **)&byte_5D4594[3799444];
      v2 = 4 * (unsigned __int8)*v1;
      v6 = 16 * **(_WORD **)&byte_5D4594[3799444];
      v3 = byte_5D4594[v2 + 3803309];
      v7 = byte_5D4594[v2 + 3803308];
      v4 = byte_5D4594[v2 + 3803310];
      *(_DWORD *)&byte_5D4594[3799444] += 2;
      *v1 = *(_BYTE *)((((unsigned __int8)(v4 + ((unsigned __int16)(v6 * ((result & 0xF0) - v4)) >> 8)) >> 3) | (unsigned __int16)(4 * ((v3 + ((unsigned __int16)(v6 * (((result >> 4) & 0xF0) - v3)) >> 8)) & 0xF8 | (32 * ((v7 + ((unsigned __int16)(v6 * ((BYTE1(result) & 0xF0) - v7)) >> 8)) & 0xF8)))))
                     + *(_DWORD *)&byte_5D4594[810640]);
      v1 = (_BYTE *)(*(_DWORD *)&byte_5D4594[3799540] + 1);
      result = v5 - 1;
      ++*(_DWORD *)&byte_5D4594[3799540];
      v5 = result;
    }
    while ( result );
  }
  return result;
}

//----- (004C7240) --------------------------------------------------------
unsigned int sub_4C7240()
{
  unsigned int result; // eax
  int v1; // ecx
  unsigned __int8 *v2; // edi
  int v3; // edx
  unsigned __int8 v4; // cl
  int v5; // ecx
  unsigned __int8 v6; // [esp+4h] [ebp-18h]
  unsigned int v7; // [esp+4h] [ebp-18h]
  int v8; // [esp+8h] [ebp-14h]

  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  v6 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = v6;
    HIWORD(result) = *(_WORD *)&byte_5D4594[3799458];
    v2 = *(unsigned __int8 **)&byte_5D4594[3799540];
    v8 = v6;
    v7 = *(_DWORD *)&byte_5D4594[3799456];
    while ( 1 )
    {
      LOWORD(result) = **(_WORD **)&byte_5D4594[3799444];
      v3 = v1 * 16 * (**(_WORD **)&byte_5D4594[3799444] & 0xF);
      v4 = *v2;
      *(_DWORD *)&byte_5D4594[3799444] += 2;
      v5 = 4 * v4;
      *v2 = *(_BYTE *)((((unsigned __int8)(byte_5D4594[v5 + 3803310]
                                         + ((unsigned __int16)(BYTE1(v3) * ((result & 0xF0) - byte_5D4594[v5 + 3803310])) >> 8)) >> 3) | (unsigned __int16)(4 * ((byte_5D4594[v5 + 3803309] + ((unsigned __int16)(BYTE1(v3) * (((result >> 4) & 0xF0) - byte_5D4594[v5 + 3803309])) >> 8)) & 0xF8 | (32 * ((byte_5D4594[v5 + 3803308] + ((unsigned __int16)(BYTE1(v3) * ((BYTE1(result) & 0xF0) - byte_5D4594[v5 + 3803308])) >> 8)) & 0xF8)))))
                     + *(_DWORD *)&byte_5D4594[810640]);
      v2 = (unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799540] + 1);
      result = v7 - 1;
      ++*(_DWORD *)&byte_5D4594[3799540];
      v7 = result;
      if ( !result )
        break;
      v1 = v8;
    }
  }
  return result;
}

//----- (004C73A0) --------------------------------------------------------
unsigned __int8 sub_4C73A0()
{
  __int16 *v0; // esi
  unsigned __int8 *v1; // edi
  unsigned __int8 *v2; // edx
  __int16 v3; // cx
  int v4; // eax
  unsigned __int8 result; // al
  int v7; // [esp+Ch] [ebp-4h]

  v0 = *(__int16 **)&byte_5D4594[3799444];
  v1 = *(unsigned __int8 **)&byte_5D4594[3799540];
  v7 = *(_DWORD *)&byte_5D4594[3799456];
  do
  {
    v2 = &byte_5D4594[4 * *v1 + 3803308];
    v3 = *v0;
    v4 = (unsigned __int16)(*v0 & 0x7C00) >> 7;
    ++v0;
    //result = *(_BYTE *)(*(_DWORD *)&byte_5D4594[810640]
    //                  + (((unsigned __int8)(__CFADD__(v2[2], 8 * (v3 & 0x1F)) ? -1 : (unsigned __int8)(byte_5D4594[4 * *v1 + 3803310] + 8 * (v3 & 0x1F))) >> 3) | (4 * (((unsigned __int8)-__CFADD__(v2[1], (unsigned __int16)(v3 & 0x3E0) >> 2) | (unsigned __int8)(v2[1] + ((unsigned __int16)(v3 & 0x3E0) >> 2))) & 0xF8)) | ((((unsigned __int8)-__CFADD__(*v2, (_BYTE)v4) | (unsigned __int8)(*v2 + v4)) & 0xF8) << 7)));
    result =  *(_BYTE *)(*(_DWORD *)&byte_5D4594[810640] + (SADD8(v2[2], 8 * (v3 & 0x1F)) >> 3) | (4 * (SADD8(v2[1], (unsigned __int16)(v3 & 0x3E0) >> 2) & 0xF8) | (SADD8(*v2, (_BYTE)v4) & 0xF8) << 7));
	*v1++ = result;
  }
  while ( v7-- > 1 );
  *(_DWORD *)&byte_5D4594[3799444] = v0;
  *(_DWORD *)&byte_5D4594[3799540] = v1;
  return result;
}

//----- (004C7440) --------------------------------------------------------
void __cdecl sub_4C7440(int a1, int a2, int a3)
{
  int v3; // ecx
  int v4; // eax
  int v5; // ecx
#if 0
  if (*(_BYTE *)(a1 + 10) != 8)
  {
    dprintf("%x %x %x", a1, a2, a3);
	dprintf("\t%d", *(_BYTE *)(a1 + 10));
  }
#endif
  if ( a1 )
  {
    switch ( *(_BYTE *)(a1 + 10) & 0x3F )
    {
      case 2:
      case 7:
        *(_DWORD *)&byte_5D4594[3799536] = sub_4C80E0;
        sub_4C7860(a1, a2, a3);
        return;
      case 3:
      case 4:
      case 5:
      case 6:
        *(_DWORD *)&byte_5D4594[3799544] = sub_4C96A0;
        *(_DWORD *)&byte_5D4594[3799488] = nullsub_7;
        if ( !*(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 52) )
        {
          if ( *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 56) )
          {
            *(_DWORD *)&byte_5D4594[3799544] = sub_4C9970;
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C86B0;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C91C0;
            sub_4C79F0(a1, a2, a3);
            return;
          }
          v5 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 68);
          *(_DWORD *)&byte_5D4594[3799536] = sub_4C8D60;
          if ( v5 )
            goto LABEL_23;
          goto LABEL_22;
        }
        *(_DWORD *)&byte_5D4594[3799544] = sub_4C97F0;
        if ( *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 56) )
        {
          v3 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
          if ( v3 == 255 )
          {
            if ( !*(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 64) )
            {
              *(_DWORD *)&byte_5D4594[3799536] = sub_4C86B0;
              *(_DWORD *)&byte_5D4594[3799432] = sub_4C91C0;
              sub_4C79F0(a1, a2, a3);
              return;
            }
            goto LABEL_22;
          }
          if ( v3 == 128 )
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C8A30;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C94D0;
          }
          else
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C8850;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C92F0;
          }
          sub_4C79F0(a1, a2, a3);
        }
        else
        {
          v4 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
          if ( v4 == 255 )
          {
LABEL_22:
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C80E0;
LABEL_23:
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C8DF0;
            sub_4C79F0(a1, a2, a3);
            return;
          }
          if ( v4 == 128 )
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C8410;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C9050;
          }
          else
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C8130;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C8EC0;
          }
          sub_4C79F0(a1, a2, a3);
        }
        break;
      case 8:
        *(_DWORD *)&byte_5D4594[3799536] = sub_4C9B20;
        sub_4C79F0(a1, a2, a3);
        return;
      default:
        return;
    }
  }
}
// 47D640: using guessed type void nullsub_7();
#if 1
//----- (004C7670) --------------------------------------------------------
void __cdecl sub_4C7670(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // ecx
  int v5; // eax
  int v6; // ecx

  v3 = 0;
  if ( a1 )
  {
    switch ( *(_BYTE *)(a1 + 10) & 0x3F )
    {
      case 2:
      case 7:
        *(_DWORD *)&byte_5D4594[3799536] = sub_4C80E0;
        sub_4C7860(a1, a2, a3);
        return;
      case 3:
      case 4:
      case 5:
      case 6:
        *(_DWORD *)&byte_5D4594[3799544] = sub_4C96A0;
        *(_DWORD *)&byte_5D4594[3799488] = nullsub_7;
        if ( !*(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 52) )
        {
          if ( *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 56) )
          {
            *(_DWORD *)&byte_5D4594[3799544] = sub_4C9970;
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C8760;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C91C0;
            v3 = 1;
            goto LABEL_23;
          }
          v6 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 68);
          *(_DWORD *)&byte_5D4594[3799536] = sub_4C8D60;
          if ( v6 )
            goto LABEL_22;
          goto LABEL_21;
        }
        *(_DWORD *)&byte_5D4594[3799544] = sub_4C97F0;
        if ( *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 56) )
        {
          v4 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
          if ( v4 == 255 )
          {
            if ( !*(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 64) )
            {
              *(_DWORD *)&byte_5D4594[3799536] = sub_4C8760;
              *(_DWORD *)&byte_5D4594[3799432] = sub_4C91C0;
              v3 = 1;
              goto LABEL_23;
            }
            goto LABEL_21;
          }
          if ( v4 == 128 )
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C8C00;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C94D0;
            v3 = 1;
          }
          else
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C8850;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C92F0;
          }
        }
        else
        {
          v5 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
          if ( v5 == 255 )
          {
LABEL_21:
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C80E0;
LABEL_22:
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C8DF0;
            goto LABEL_23;
          }
          if ( v5 == 128 )
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C8570;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C9050;
          }
          else
          {
            *(_DWORD *)&byte_5D4594[3799536] = sub_4C82C0;
            *(_DWORD *)&byte_5D4594[3799432] = sub_4C8EC0;
          }
          v3 = 1;
        }
LABEL_23:
        sub_4C79F0(a1, a2, a3);
#if 0
        if ( v3 )
          _m_femms();
#endif
        break;
      case 8:
        *(_DWORD *)&byte_5D4594[3799536] = sub_4C9B20;
        sub_4C79F0(a1, a2, a3);
        return;
      default:
        return;
    }
  }
}
// 47D640: using guessed type void nullsub_7();
#endif
//----- (004C7860) --------------------------------------------------------
void __cdecl sub_4C7860(int a1, int a2, int a3)
{
  int4 *result; // eax
  int v4; // esi
  int *v5; // eax
  int4 *v6; // ecx
  int v7; // edx
  int v8; // edi
  int v9; // ebx
  int v10; // ebp
  int v11; // eax
  int v12; // edi
  int v13; // ebx
  int v14; // esi
  int v15; // ecx
  int v16; // ebp
  int v17; // edi
  int4 a1a; // [esp+10h] [ebp-20h]
  RECT rc; // [esp+20h] [ebp-10h]
  int v20; // [esp+3Ch] [ebp+Ch]

  result = (int4 *)(*(int (__cdecl **)(_DWORD))&byte_5D4594[3799492])(a1);
  *(_DWORD *)&byte_5D4594[3799444] = result;
  if ( result )
  {
    v4 = result->field_0;
    v5 = &result->field_4;
    *(_DWORD *)&byte_5D4594[3799444] = v5;
    v6 = (int4 *)*v5;
    ++v5;
    v7 = v4;
    *(_DWORD *)&byte_5D4594[3799444] = v5;
    v8 = *v5;
    ++v5;
    *(_DWORD *)&byte_5D4594[3799560] = v8;
    v9 = v8 + a2;
    *(_DWORD *)&byte_5D4594[3799444] = v5;
    *(_DWORD *)&byte_5D4594[3799556] = *v5;
    v10 = *(_DWORD *)&byte_5D4594[3799556] + a3;
    result = (int4 *)(v5 + 1);
    v20 = *(_DWORD *)&byte_5D4594[3799556] + a3;
    *(_DWORD *)&byte_5D4594[3799444] = result;
    if ( *(_DWORD *)&byte_5D4594[3799484] )
    {
      v6 = (int4 *)((char *)v6 - *(_DWORD *)&byte_5D4594[3799484]);
      if ( (int)v6 <= 0 )
        return;
      *(_DWORD *)&byte_5D4594[3799476] = (char *)v6 + v10;
    }
    *(_DWORD *)&byte_5D4594[3799520] = v8 + a2;
    *(_DWORD *)&byte_5D4594[3799444] = (char *)result + 1;
    *(_DWORD *)&byte_5D4594[3799512] = v10;
    *(_DWORD *)&byte_5D4594[3799516] = v4;
    *(_DWORD *)&byte_5D4594[3799504] = v6;
    if ( **(_DWORD **)&byte_5D4594[3799572] )
    {
      SetRect(&rc, v9, v10, v4 + v9, (int)v6 + v10);
      result = sub_49F930(&a1a, (int4 *)&rc, (int4 *)(*(_DWORD *)&byte_5D4594[3799572] + 4));
      if ( !result )
        return;
      v11 = a1a.field_0 - rc.left;
      v12 = a1a.field_4 - rc.top;
      v7 = a1a.field_8 - a1a.field_0;
      v6 = (int4 *)(a1a.field_C - a1a.field_4);
      if ( a1a.field_0 != rc.left || v12 )
      {
        v9 += v11;
        *(_DWORD *)&byte_5D4594[3799444] += v4 * v12 + 2 * v11;
        v10 = v12 + v20;
      }
      else
      {
        v10 = v20;
      }
    }
    v13 = 2 * v9;
    v14 = 2 * (v4 - v7);
    result = v6;
    v15 = (int)&v6[-1].field_C + 3;
    *(_DWORD *)&byte_5D4594[3799456] = v7;
    if ( result )
    {
      v16 = 4 * v10;
      v17 = v15 + 1;
      do
      {
        v16 += 4;
        *(_DWORD *)&byte_5D4594[3799540] = v13 + *(_DWORD *)(*(_DWORD *)&byte_5D4594[3798784] + v16 - 4);
        (*(void (**)(void))&byte_5D4594[3799536])();
        --v17;
        *(_DWORD *)&byte_5D4594[3799444] += v14;
      }
      while ( v17 );
    }
  }
}

//----- (004C79F0) --------------------------------------------------------
int __cdecl sub_4C79F0(int a1, int a2, int a3)
{
  int result; // eax
  int v4; // ebp
  int v5; // esi
  int *v6; // ecx
  int v7; // eax
  int v8; // ebx
  int v9; // eax
  int v10; // edi
  int v11; // ecx
  int v12; // ecx
  int v13; // esi
  int v14; // eax
  int v15; // ebx
  int v16; // esi
  char *v17; // edx
  int v18; // ecx
  bool v19; // zf
  RECT rc; // [esp+10h] [ebp-20h]
  int4 a1a; // [esp+20h] [ebp-10h]
  int v22; // [esp+34h] [ebp+4h]
  int v23; // [esp+38h] [ebp+8h]
  int v24; // [esp+3Ch] [ebp+Ch]

  result = (*(int (__cdecl **)(_DWORD))&byte_5D4594[3799492])(a1);
  *(_DWORD *)&byte_5D4594[3799444] = result;
  if ( result )
  {
    v4 = *(_DWORD *)result;
    *(_DWORD *)&byte_5D4594[3799444] = result + 4;
    v5 = *(_DWORD *)(result + 4);
    v6 = (int *)(result + 8);
    *(_DWORD *)&byte_5D4594[3799444] = v6;
    v7 = *(_DWORD *)(result + 8);
    ++v6;
    *(_DWORD *)&byte_5D4594[3799560] = v7;
    v8 = v7 + a2;
    *(_DWORD *)&byte_5D4594[3799444] = v6;
    v9 = *v6;
    *(_DWORD *)&byte_5D4594[3799556] = v9;
    v10 = v9 + a3;
    result = *(_DWORD *)&byte_5D4594[3799484];
    v11 = (int)(v6 + 1);
    *(_DWORD *)&byte_5D4594[3799444] = v11;
    if ( *(_DWORD *)&byte_5D4594[3799484] )
    {
      v5 -= *(_DWORD *)&byte_5D4594[3799484];
      if ( v5 <= 0 )
        return result;
      *(_DWORD *)&byte_5D4594[3799476] = v5 + v10;
    }
    *(_DWORD *)&byte_5D4594[3799444] = v11 + 1;
    *(_DWORD *)&byte_5D4594[3799520] = v8;
    *(_DWORD *)&byte_5D4594[3799512] = v10;
    *(_DWORD *)&byte_5D4594[3799516] = v4;
    *(_DWORD *)&byte_5D4594[3799504] = v5;
    if ( !**(_DWORD **)&byte_5D4594[3799572] )
      goto LABEL_33;
    SetRect(&rc, v8, v10, v8 + v4, v5 + v10);
    result = sub_49F930(&a1a, (int4 *)&rc, (int4 *)(*(_DWORD *)&byte_5D4594[3799572] + 4));
    if ( !result )
      return result;
    if ( rc.left != a1a.field_0 || rc.right != a1a.field_8 || rc.top != a1a.field_4 || rc.bottom != a1a.field_C )
    {
      result = sub_4C7C80(v8, v10, v4, &a1a.field_0);
    }
    else
    {
LABEL_33:
      result = v10 & 1;
      v22 = 0;
      *(_DWORD *)&byte_5D4594[3799508] ^= result;
      v12 = v5;
      v13 = v5 - 1;
      if ( v12 )
      {
        v14 = 2 * v8;
        v24 = 2 * v8;
        v15 = 4 * v10;
        v23 = v13 + 1;
        while ( 1 )
        {
          v16 = v4;
          v17 = (char *)(v14 + *(_DWORD *)(v15 + *(_DWORD *)&byte_5D4594[3798784]));
          *(_DWORD *)&byte_5D4594[3799540] = v14 + *(_DWORD *)(v15 + *(_DWORD *)&byte_5D4594[3798784]);
          if ( *(_DWORD *)&byte_5D4594[3799552] && (*(_DWORD *)&byte_5D4594[3799508] ^= 1u) != 0 )
          {
            if ( v22 )
              qmemcpy(v17, (const void *)(v14 + *(_DWORD *)(v15 + *(_DWORD *)&byte_5D4594[3798784] - 4)), 2 * v4);
            sub_4C8040(v4, 1);
          }
          else if ( v4 > 0 )
          {
            while ( 1 )
            {
              *(_DWORD *)&byte_5D4594[3799428] = (unsigned __int8)**(_BYTE **)&byte_5D4594[3799444];
              ++*(_DWORD *)&byte_5D4594[3799444];
              v18 = (unsigned __int8)**(_BYTE **)&byte_5D4594[3799444];
              *(_DWORD *)&byte_5D4594[3799456] = (unsigned __int8)**(_BYTE **)&byte_5D4594[3799444];
              ++*(_DWORD *)&byte_5D4594[3799444];
              switch ( byte_5D4594[3799428] & 0xF )
              {
                case 1:
                  *(_DWORD *)&byte_5D4594[3799540] = &v17[2 * v18];
                  break;
                case 2:
                case 7:
                  (*(void (**)(void))&byte_5D4594[3799536])();
                  break;
                case 4:
                  (*(void (**)(void))&byte_5D4594[3799432])();
                  break;
                case 5:
                  (*(void (**)(void))&byte_5D4594[3799544])();
                  break;
                case 6:
                  (*(void (**)(void))&byte_5D4594[3799488])();
                  break;
                default:
                  break;
              }
              v16 -= *(_DWORD *)&byte_5D4594[3799456];
              if ( v16 <= 0 )
                break;
              v17 = *(char **)&byte_5D4594[3799540];
            }
          }
          v15 += 4;
          result = v23 - 1;
          v19 = v23 == 1;
          ++v22;
          --v23;
          if ( v19 )
            break;
          v14 = v24;
        }
      }
    }
  }
  return result;
}

//----- (004C7C80) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4C7C80(int a1, int a2, int a3, int *a4)
{
  int v4; // ebp
  int v5; // ebx
  unsigned __int8 *result; // eax
  int v7; // edi
  int v8; // ecx
  unsigned __int8 *v9; // esi
  int v10; // esi
  int v11; // edi
  int v12; // edx
  int v13; // esi
  char *v14; // esi
  char *v15; // eax
  int v16; // ecx
  unsigned int v17; // ecx
  char v18; // dl
  char *v19; // edi
  char *v20; // esi
  int v21; // edx
  int v22; // ecx
  unsigned __int8 *v23; // eax
  int v24; // ecx
  int v25; // edi
  int v26; // ecx
  int v27; // ecx
  int v28; // edi
  int v29; // ecx
  int v30; // ecx
  int v31; // edi
  int v32; // ecx
  int v33; // ecx
  int v34; // edi
  int v35; // ecx
  int v36; // ecx
  bool v37; // zf
  unsigned __int8 *v38; // [esp+10h] [ebp-18h]
  int v39; // [esp+14h] [ebp-14h]
  int v40; // [esp+18h] [ebp-10h]
  int v41; // [esp+1Ch] [ebp-Ch]
  int v42; // [esp+20h] [ebp-8h]
  int v43; // [esp+24h] [ebp-4h]
  int v44; // [esp+30h] [ebp+8h]
  int v45; // [esp+38h] [ebp+10h]

  v4 = *a4;
  v5 = a4[2];
  result = *(unsigned __int8 **)&byte_5D4594[3799484];
  v7 = a2;
  v8 = a4[1] - a2;
  v9 = (unsigned __int8 *)(a4[3] - a4[1]);
  v45 = a4[2];
  if ( *(_DWORD *)&byte_5D4594[3799484] )
  {
    v9 -= *(_DWORD *)&byte_5D4594[3799484];
    if ( (int)v9 <= 0 )
      return result;
    *(_DWORD *)&byte_5D4594[3799476] = &v9[a2];
  }
  if ( v8 )
  {
    v7 = v8 + a2;
    sub_4C8040(a3, v8);
  }
  v40 = 0;
  *(_DWORD *)&byte_5D4594[3799508] ^= v7 & 1;
  result = v9;
  v10 = (int)(v9 - 1);
  if ( result )
  {
    result = *(unsigned __int8 **)&byte_5D4594[3799444];
    v11 = 4 * v7;
    v41 = v11;
    v43 = v10 + 1;
    do
    {
      v12 = a3;
      v13 = a1;
      v42 = a3;
      if ( !*(_DWORD *)&byte_5D4594[3799552] || (*(_DWORD *)&byte_5D4594[3799508] ^= 1u) == 0 )
      {
        v21 = *(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784]) + 2 * a1;
        *(_DWORD *)&byte_5D4594[3799540] = *(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784]) + 2 * a1;
        if ( a3 <= 0 )
          goto LABEL_72;
        while ( 1 )
        {
          v39 = v21;
          v22 = *result;
          v23 = result + 1;
          *(_DWORD *)&byte_5D4594[3799428] = v22;
          *(_DWORD *)&byte_5D4594[3799444] = v23;
          v24 = *v23;
          result = v23 + 1;
          *(_DWORD *)&byte_5D4594[3799456] = v24;
          *(_DWORD *)&byte_5D4594[3799444] = result;
          v38 = result;
          v44 = v24;
          switch ( byte_5D4594[3799428] & 0xF )
          {
            case 1:
              v21 += 2 * v24;
              *(_DWORD *)&byte_5D4594[3799540] = v21;
              goto LABEL_69;
            case 2:
            case 7:
              v25 = v24 + v13;
              if ( v13 < v4 )
              {
                v5 = v45;
                if ( v25 > v4 )
                {
                  if ( v25 <= v45 )
                    v26 = v13 - v4 + v24;
                  else
                    v26 = v45 - v4;
                  *(_DWORD *)&byte_5D4594[3799456] = v26;
                  v27 = 2 * (v4 - v13);
                  *(_DWORD *)&byte_5D4594[3799444] = &result[v27];
                  *(_DWORD *)&byte_5D4594[3799540] = v27 + v21;
                  (*(void (**)(void))&byte_5D4594[3799536])();
                  goto LABEL_66;
                }
              }
              else
              {
                v5 = v45;
                if ( v25 <= v45 )
                {
                  (*(void (**)(void))&byte_5D4594[3799536])();
                  goto LABEL_66;
                }
              }
              if ( v13 < v5 && v25 > v5 )
              {
                *(_DWORD *)&byte_5D4594[3799456] = v5 - v13;
                (*(void (**)(void))&byte_5D4594[3799536])();
              }
              goto LABEL_66;
            case 4:
              v28 = v24 + v13;
              if ( v13 < v4 )
              {
                v5 = v45;
                if ( v28 > v4 )
                {
                  if ( v28 <= v45 )
                    v29 = v13 - v4 + v24;
                  else
                    v29 = v45 - v4;
                  *(_DWORD *)&byte_5D4594[3799456] = v29;
                  *(_DWORD *)&byte_5D4594[3799444] = &result[v4 - v13];
                  *(_DWORD *)&byte_5D4594[3799540] = v21 + 2 * (v4 - v13);
                  goto LABEL_39;
                }
              }
              else
              {
                v5 = v45;
                if ( v28 <= v45 )
                  goto LABEL_39;
              }
              if ( v13 < v5 && v28 > v5 )
              {
                *(_DWORD *)&byte_5D4594[3799456] = v5 - v13;
LABEL_39:
                (*(void (**)(void))&byte_5D4594[3799432])();
              }
              v30 = v44;
              result = &v38[v44];
LABEL_67:
              *(_DWORD *)&byte_5D4594[3799444] = result;
              v21 = v39 + 2 * v30;
              *(_DWORD *)&byte_5D4594[3799540] = v39 + 2 * v30;
LABEL_70:
              v13 += v44;
              v42 -= v44;
              if ( v42 <= 0 )
              {
                v11 = v41;
                goto LABEL_72;
              }
              break;
            case 5:
              v31 = v24 + v13;
              if ( v13 < v4 )
              {
                v5 = v45;
                if ( v31 > v4 )
                {
                  if ( v31 <= v45 )
                    v32 = v13 - v4 + v24;
                  else
                    v32 = v45 - v4;
                  *(_DWORD *)&byte_5D4594[3799456] = v32;
                  v33 = 2 * (v4 - v13);
                  *(_DWORD *)&byte_5D4594[3799444] = &result[v33];
                  *(_DWORD *)&byte_5D4594[3799540] = v33 + v21;
                  goto LABEL_52;
                }
              }
              else
              {
                v5 = v45;
                if ( v31 <= v45 )
                  goto LABEL_52;
              }
              if ( v13 < v5 && v31 > v5 )
              {
                *(_DWORD *)&byte_5D4594[3799456] = v5 - v13;
LABEL_52:
                (*(void (**)(void))&byte_5D4594[3799544])();
              }
              result = &v38[2 * v44];
              v21 = v39 + 2 * v44;
              *(_DWORD *)&byte_5D4594[3799444] = &v38[2 * v44];
              *(_DWORD *)&byte_5D4594[3799540] = v39 + 2 * v44;
              goto LABEL_70;
            case 6:
              v34 = v24 + v13;
              if ( v13 < v4 )
              {
                v5 = v45;
                if ( v34 > v4 )
                {
                  if ( v34 <= v45 )
                    v35 = v13 - v4 + v24;
                  else
                    v35 = v45 - v4;
                  *(_DWORD *)&byte_5D4594[3799456] = v35;
                  v36 = 2 * (v4 - v13);
                  *(_DWORD *)&byte_5D4594[3799444] = &result[v36];
                  *(_DWORD *)&byte_5D4594[3799540] = v36 + v21;
                  goto LABEL_65;
                }
              }
              else
              {
                v5 = v45;
                if ( v34 <= v45 )
                  goto LABEL_65;
              }
              if ( v13 < v5 && v34 > v5 )
              {
                *(_DWORD *)&byte_5D4594[3799456] = v5 - v13;
LABEL_65:
                (*(void (**)(void))&byte_5D4594[3799488])();
              }
LABEL_66:
              v30 = v44;
              result = &v38[2 * v44];
              goto LABEL_67;
            default:
LABEL_69:
              v5 = v45;
              goto LABEL_70;
          }
        }
      }
      if ( v40 )
      {
        v14 = (char *)(2 * v4 + *(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784] - 4));
        v15 = (char *)(*(_DWORD *)(v11 + *(_DWORD *)&byte_5D4594[3798784]) + 2 * v4);
        v16 = v5 - v4;
        if ( v5 - v4 > a3 )
          v16 = a3;
        v17 = 2 * v16;
        v18 = v17;
        v17 >>= 2;
        qmemcpy(v15, v14, 4 * v17);
        v20 = &v14[4 * v17];
        v19 = &v15[4 * v17];
        LOBYTE(v17) = v18;
        v12 = a3;
        qmemcpy(v19, v20, v17 & 3);
        v11 = v41;
      }
      sub_4C8040(v12, 1);
      result = *(unsigned __int8 **)&byte_5D4594[3799444];
LABEL_72:
      v11 += 4;
      v37 = v43 == 1;
      ++v40;
      v41 = v11;
      --v43;
    }
    while ( !v37 );
  }
  return result;
}

//----- (004C8040) --------------------------------------------------------
char *__cdecl sub_4C8040(int a1, int a2)
{
  char *result; // eax
  int v3; // ebp
  int i; // esi
  char v5; // cl
  char *v6; // eax
  unsigned __int8 v7; // dl

  result = (char *)(a2 - 1);
  if ( a2 )
  {
    v3 = a2;
    result = *(char **)&byte_5D4594[3799444];
    do
    {
      for ( i = a1; i > 0; i -= v7 )
      {
        v5 = *result;
        v6 = result + 1;
        *(_DWORD *)&byte_5D4594[3799444] = v6;
        v7 = *v6;
        result = v6 + 1;
        *(_DWORD *)&byte_5D4594[3799444] = result;
        switch ( v5 & 0xF )
        {
          case 2:
          case 5:
          case 6:
          case 7:
            result += 2 * v7;
            goto LABEL_7;
          case 4:
            result += v7;
LABEL_7:
            *(_DWORD *)&byte_5D4594[3799444] = result;
            break;
          default:
            continue;
        }
      }
      --v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (004C80E0) --------------------------------------------------------
void sub_4C80E0()
{
  memcpy( *(WORD **)&byte_5D4594[3799540], *(WORD **)&byte_5D4594[3799444], *(_DWORD *)&byte_5D4594[3799456] << 1 );
  *(_DWORD *)&byte_5D4594[3799444] += *(_DWORD *)&byte_5D4594[3799456] << 1;
  *(_DWORD *)&byte_5D4594[3799540] += *(_DWORD *)&byte_5D4594[3799456] << 1;
}

//----- (004C8130) --------------------------------------------------------
void sub_4C8130()
{
  int result; // eax
  __int16 v1; // si
  _WORD *v2; // edi
  int v3; // [esp+0h] [ebp-1Ch]
  unsigned __int8 v4; // [esp+Ch] [ebp-10h]
  unsigned __int8 v5; // [esp+14h] [ebp-8h]

  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
    v2 = *(_WORD **)&byte_5D4594[3799540];
    v3 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v5 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & *v2) >> byte_5D4594[3804376];
      v4 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & *v2) >> byte_5D4594[3804380];
      *v2 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                     + 2
                     * (unsigned __int8)(v5
                                       + ((unsigned __int16)(v1
                                                           * ((unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & **(_WORD **)&byte_5D4594[3799444]) >> byte_5D4594[3804376])
                                                            - v5)) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656]
                                                                                      + 2
                                                                                      * (unsigned __int8)(v4 + ((unsigned __int16)(v1 * ((unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & **(_WORD **)&byte_5D4594[3799444]) >> byte_5D4594[3804380]) - v4)) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v2 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((unsigned __int16)(v1 * ((unsigned __int8)(((unsigned __int8)**(_WORD **)&byte_5D4594[3799444] & byte_5D4594[3804372]) << byte_5D4594[3804384]) - (unsigned __int8)((*(_BYTE *)v2 & byte_5D4594[3804372]) << byte_5D4594[3804384]))) >> 8)));
      v2 = (_WORD *)(*(_DWORD *)&byte_5D4594[3799540] + 2);
      result = v3 - 1;
      *(_DWORD *)&byte_5D4594[3799444] += 2;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      v3 = result;
    }
    while ( result );
  }
}

__int16 sub_4C82C0()
{
	DebugBreak();
	return 0;
}

#if 0
//----- (004C82C0) --------------------------------------------------------
__int16 sub_4C82C0()
{
  int v0; // ecx
  __m64 *v1; // esi
  __m64 *v2; // edi
  __m64 v3; // mm7
  __m64 v4; // mm0
  __m64 v5; // mm1
  __m64 v6; // mm2
  __m64 v7; // mm0
  bool v8; // cc
  __int16 result; // ax
  int v10; // ecx
  __m64 v11; // [esp+Ch] [ebp-8h]

  v0 = *(_DWORD *)&byte_5D4594[3799456];
  v1 = *(__m64 **)&byte_5D4594[3799444];
  v2 = *(__m64 **)&byte_5D4594[3799540];
  v3 = *(__m64 *)(*(_DWORD *)&byte_5D4594[3799572] + 1040);
  while ( 1 )
  {
    v4 = _m_psrlw(_m_pand((__m64)v2->m64_u64, *(__m64 *)&byte_5D4594[3804396]), *(__m64 *)&byte_5D4594[3804444]);
    v5 = _m_psrlw(_m_pand((__m64)v2->m64_u64, *(__m64 *)&byte_5D4594[3804404]), *(__m64 *)&byte_5D4594[3804452]);
    v6 = _m_psllw(_m_pand((__m64)v2->m64_u64, *(__m64 *)&byte_5D4594[3804412]), *(__m64 *)&byte_5D4594[3804460]);
    v7 = _m_por(
           _m_por(
             _m_pand(
               _m_psrlw(
                 _m_paddw(
                   _m_psllwi(v4, 8u),
                   _m_pmullw(
                     _m_psubw(
                       _m_psrlw(
                         _m_pand((__m64)v1->m64_u64, *(__m64 *)&byte_5D4594[3804396]),
                         *(__m64 *)&byte_5D4594[3804444]),
                       v4),
                     v3)),
                 *(__m64 *)&byte_5D4594[3804468]),
               *(__m64 *)&byte_5D4594[3804396]),
             _m_pand(
               _m_psrlw(
                 _m_paddw(
                   _m_psllwi(v5, 8u),
                   _m_pmullw(
                     _m_psubw(
                       _m_psrlw(
                         _m_pand((__m64)v1->m64_u64, *(__m64 *)&byte_5D4594[3804404]),
                         *(__m64 *)&byte_5D4594[3804452]),
                       v5),
                     v3)),
                 *(__m64 *)&byte_5D4594[3804476]),
               *(__m64 *)&byte_5D4594[3804404])),
           _m_psrlw(
             _m_paddw(
               _m_psllwi(v6, 8u),
               _m_pmullw(
                 _m_psubw(
                   _m_psllw(
                     _m_pand((__m64)v1->m64_u64, *(__m64 *)&byte_5D4594[3804412]),
                     *(__m64 *)&byte_5D4594[3804460]),
                   v6),
                 v3)),
             *(__m64 *)&byte_5D4594[3804484]));
    v8 = v0 < 4;
    v0 -= 4;
    if ( v8 )
      break;
    v2->m64_u64 = (unsigned __int64)v7;
    ++v1;
    ++v2;
    if ( v8 )
      goto LABEL_8;
  }
  v11 = v7;
  result = v11.m64_i16[0];
  LOWORD(v2->m64_i32[0]) = v11.m64_i16[0];
  v1 = (__m64 *)((char *)v1 + 2);
  v2 = (__m64 *)((char *)v2 + 2);
  v10 = v0 + 3;
  if ( v10 )
  {
    result = v11.m64_i16[1];
    LOWORD(v2->m64_i32[0]) = v11.m64_i16[1];
    v1 = (__m64 *)((char *)v1 + 2);
    v2 = (__m64 *)((char *)v2 + 2);
    if ( v10 != 1 )
    {
      result = v11.m64_i16[2];
      LOWORD(v2->m64_i32[0]) = v11.m64_i16[2];
      v1 = (__m64 *)((char *)v1 + 2);
      v2 = (__m64 *)((char *)v2 + 2);
    }
  }
LABEL_8:
  *(_DWORD *)&byte_5D4594[3799444] = v1;
  *(_DWORD *)&byte_5D4594[3799540] = v2;
  return result;
}
#endif

//----- (004C8410) --------------------------------------------------------
void sub_4C8410()
{
  int result; // eax
  _WORD *v1; // esi
  int v2; // [esp+0h] [ebp-1Ch]
  unsigned __int8 v3; // [esp+Ch] [ebp-10h]
  unsigned __int8 v4; // [esp+14h] [ebp-8h]

  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = *(_WORD **)&byte_5D4594[3799540];
    v2 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v3 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & *v1) >> byte_5D4594[3804380];
      v4 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & *v1) >> byte_5D4594[3804376];
      *v1 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                     + 2
                     * (unsigned __int8)(v4
                                       + (((unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & **(_WORD **)&byte_5D4594[3799444]) >> byte_5D4594[3804376])
                                         - v4) >> 1))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656]
                                                                  + 2
                                                                  * (unsigned __int8)(v3
                                                                                    + (((unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & **(_WORD **)&byte_5D4594[3799444]) >> byte_5D4594[3804380])
                                                                                      - v3) >> 1))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + (((unsigned __int8)(((unsigned __int8)**(_WORD **)&byte_5D4594[3799444] & byte_5D4594[3804372]) << byte_5D4594[3804384]) - (unsigned __int8)((*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 1)));
      v1 = (_WORD *)(*(_DWORD *)&byte_5D4594[3799540] + 2);
      result = v2 - 1;
      *(_DWORD *)&byte_5D4594[3799444] += 2;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      v2 = result;
    }
    while ( result );
  }
}

__int16 sub_4C8570()
{
	DebugBreak();
	return 0;
}

#if 0
//----- (004C8570) --------------------------------------------------------
__int16 sub_4C8570()
{
  int v0; // ecx
  __m64 *v1; // esi
  __m64 *v2; // edi
  __m64 v3; // mm0
  __m64 v4; // mm1
  __m64 v5; // mm2
  __m64 v6; // mm0
  bool v7; // cc
  __int16 result; // ax
  int v9; // ecx
  __m64 v10; // [esp+Ch] [ebp-8h]

  v0 = *(_DWORD *)&byte_5D4594[3799456];
  v1 = *(__m64 **)&byte_5D4594[3799444];
  v2 = *(__m64 **)&byte_5D4594[3799540];
  while ( 1 )
  {
    v3 = _m_psrlw(_m_pand((__m64)v2->m64_u64, *(__m64 *)&byte_5D4594[3804396]), *(__m64 *)&byte_5D4594[3804444]);
    v4 = _m_psrlw(_m_pand((__m64)v2->m64_u64, *(__m64 *)&byte_5D4594[3804404]), *(__m64 *)&byte_5D4594[3804452]);
    v5 = _m_psllw(_m_pand((__m64)v2->m64_u64, *(__m64 *)&byte_5D4594[3804412]), *(__m64 *)&byte_5D4594[3804460]);
    v6 = _m_por(
           _m_por(
             _m_pand(
               _m_psllw(
                 _m_paddw(
                   v3,
                   _m_psrlwi(
                     _m_psubw(
                       _m_psrlw(
                         _m_pand((__m64)v1->m64_u64, *(__m64 *)&byte_5D4594[3804396]),
                         *(__m64 *)&byte_5D4594[3804444]),
                       v3),
                     1u)),
                 *(__m64 *)&byte_5D4594[3804444]),
               *(__m64 *)&byte_5D4594[3804396]),
             _m_pand(
               _m_psllw(
                 _m_paddw(
                   v4,
                   _m_psrlwi(
                     _m_psubw(
                       _m_psrlw(
                         _m_pand((__m64)v1->m64_u64, *(__m64 *)&byte_5D4594[3804404]),
                         *(__m64 *)&byte_5D4594[3804452]),
                       v4),
                     1u)),
                 *(__m64 *)&byte_5D4594[3804452]),
               *(__m64 *)&byte_5D4594[3804404])),
           _m_psrlw(
             _m_paddw(
               v5,
               _m_psrlwi(
                 _m_psubw(
                   _m_psllw(
                     _m_pand((__m64)v1->m64_u64, *(__m64 *)&byte_5D4594[3804412]),
                     *(__m64 *)&byte_5D4594[3804460]),
                   v5),
                 1u)),
             *(__m64 *)&byte_5D4594[3804460]));
    v7 = v0 < 4;
    v0 -= 4;
    if ( v7 )
      break;
    v2->m64_u64 = (unsigned __int64)v6;
    ++v1;
    ++v2;
    if ( v7 )
      goto LABEL_8;
  }
  v10 = v6;
  result = v10.m64_i16[0];
  LOWORD(v2->m64_i32[0]) = v10.m64_i16[0];
  v1 = (__m64 *)((char *)v1 + 2);
  v2 = (__m64 *)((char *)v2 + 2);
  v9 = v0 + 3;
  if ( v9 )
  {
    result = v10.m64_i16[1];
    LOWORD(v2->m64_i32[0]) = v10.m64_i16[1];
    v1 = (__m64 *)((char *)v1 + 2);
    v2 = (__m64 *)((char *)v2 + 2);
    if ( v9 != 1 )
    {
      result = v10.m64_i16[2];
      LOWORD(v2->m64_i32[0]) = v10.m64_i16[2];
      v1 = (__m64 *)((char *)v1 + 2);
      v2 = (__m64 *)((char *)v2 + 2);
    }
  }
LABEL_8:
  *(_DWORD *)&byte_5D4594[3799444] = v1;
  *(_DWORD *)&byte_5D4594[3799540] = v2;
  return result;
}
#endif

//----- (004C86B0) --------------------------------------------------------
void sub_4C86B0()
{
  __int16 *v0; // esi
  _WORD *v1; // edi
  __int16 v2; // ax
  int result; // eax
  int v5; // [esp-4h] [ebp-10h]

  v0 = *(__int16 **)&byte_5D4594[3799444];
  v1 = *(_WORD **)&byte_5D4594[3799540];
  v5 = *(_DWORD *)&byte_5D4594[3799456];
  do
  {
    v2 = *v0;
    ++v0;
    result = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3804672]
                       + 2
                       * ((unsigned int)(*(_DWORD *)&byte_5D4594[3800812]
                                       * ((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & v2) >> byte_5D4594[3804376])) >> 8)) | *(_DWORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * ((unsigned int)(*(_DWORD *)&byte_5D4594[3800816] * ((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & v2) >> byte_5D4594[3804380])) >> 8)) | *(_DWORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * ((unsigned int)(*(_DWORD *)&byte_5D4594[3800820] * ((unsigned __int16)(*(_WORD *)&byte_5D4594[3804372] & v2) << byte_5D4594[3804384])) >> 8));
    *v1 = result;
    ++v1;
  }
  while ( (*(_DWORD *)&byte_5D4594[3799456])-- > 1 );
  *(_DWORD *)&byte_5D4594[3799456] = v5;
  *(_DWORD *)&byte_5D4594[3799444] = v0;
  *(_DWORD *)&byte_5D4594[3799540] = v1;
}

__int32 sub_4C8760()
{
	DebugBreak();
	return 0;
}

#if 0
//----- (004C8760) --------------------------------------------------------
__int32 sub_4C8760()
{
  __m64 v0; // mm6
  __m64 v1; // mm5
  __m64 v2; // mm4
  __m64 v3; // mm3
  __m64 *v4; // edi
  __m64 *v5; // esi
  int v6; // ecx
  bool v7; // cc
  __m64 v8; // mm0
  __int32 result; // eax
  int v10; // ecx
  __m64 v11; // [esp+Ch] [ebp-8h]

  v0 = *(__m64 *)&byte_5D4594[3804404];
  v1 = *(__m64 *)&byte_5D4594[3804396];
  v2 = *(__m64 *)&byte_5D4594[3804452];
  v3 = *(__m64 *)&byte_5D4594[3804444];
  v4 = *(__m64 **)&byte_5D4594[3799540];
  v5 = *(__m64 **)&byte_5D4594[3799444];
  v6 = *(_DWORD *)&byte_5D4594[3799456];
  while ( 1 )
  {
    v7 = v6 < 4;
    v6 -= 4;
    v8 = _m_por(
           _m_por(
             _m_pand(
               _m_psrlw(
                 _m_pmullw(_m_psrlw(_m_pand((__m64)v5->m64_u64, v1), v3), *(__m64 *)&byte_5D4594[3800788]),
                 *(__m64 *)&byte_5D4594[3804468]),
               v1),
             _m_psrlw(
               _m_pmullw(
                 _m_psllw(_m_pand((__m64)v5->m64_u64, *(__m64 *)&byte_5D4594[3804412]), *(__m64 *)&byte_5D4594[3804460]),
                 *(__m64 *)&byte_5D4594[3800804]),
               *(__m64 *)&byte_5D4594[3804484])),
           _m_pand(
             _m_psrlw(
               _m_pmullw(_m_psrlw(_m_pand((__m64)v5->m64_u64, v0), v2), *(__m64 *)&byte_5D4594[3800796]),
               *(__m64 *)&byte_5D4594[3804476]),
             v0));
    if ( v7 )
      break;
    ++v5;
    v4->m64_u64 = (unsigned __int64)v8;
    ++v4;
    if ( v7 )
      goto LABEL_8;
  }
  v11 = v8;
  result = v11.m64_i32[0];
  LOWORD(v4->m64_i32[0]) = v11.m64_i16[0];
  v5 = (__m64 *)((char *)v5 + 2);
  v4 = (__m64 *)((char *)v4 + 2);
  v10 = v6 + 3;
  if ( v10 )
  {
    result = *(__int32 *)((char *)v11.m64_i32 + 2);
    LOWORD(v4->m64_i32[0]) = v11.m64_i16[1];
    v5 = (__m64 *)((char *)v5 + 2);
    v4 = (__m64 *)((char *)v4 + 2);
    if ( v10 != 1 )
    {
      result = v11.m64_i32[1];
      v5 = (__m64 *)((char *)v5 + 2);
      LOWORD(v4->m64_i32[0]) = v11.m64_i16[2];
      v4 = (__m64 *)((char *)v4 + 2);
    }
  }
LABEL_8:
  *(_DWORD *)&byte_5D4594[3799444] = v5;
  *(_DWORD *)&byte_5D4594[3799540] = v4;
  return result;
}
#endif

//----- (004C8850) --------------------------------------------------------
void sub_4C8850()
{
  int result; // eax
  _WORD *v1; // edi
  unsigned __int8 v2; // al
  bool v3; // zf
  int v4; // [esp+0h] [ebp-28h]
  unsigned __int8 v5; // [esp+4h] [ebp-24h]
  unsigned __int8 v6; // [esp+8h] [ebp-20h]
  unsigned __int8 v7; // [esp+Ch] [ebp-1Ch]
  int v8; // [esp+14h] [ebp-14h]
  unsigned __int8 v9; // [esp+18h] [ebp-10h]
  int v10; // [esp+20h] [ebp-8h]

  v7 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
  v6 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 96);
  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v10 = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799572] + 104);
    v8 = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799572] + 100);
    v1 = *(_WORD **)&byte_5D4594[3799540];
    v4 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v5 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & *v1) >> byte_5D4594[3804376];
      v2 = (*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384];
      v9 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & *v1) >> byte_5D4594[3804380];
      *v1 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                     + 2
                     * (unsigned __int8)(v2
                                       + ((unsigned __int16)(v7
                                                           * (((v10
                                                              * (unsigned __int8)(((unsigned __int8)**(_WORD **)&byte_5D4594[3799444] & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 8)
                                                            - v2)) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656]
                                                                                      + 2
                                                                                      * (unsigned __int8)(v9 + ((unsigned __int16)(v7 * (((v8 * (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & **(_WORD **)&byte_5D4594[3799444]) >> byte_5D4594[3804380])) >> 8) - v9)) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(v5 + ((unsigned __int16)(v7 * (((v6 * (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & **(_WORD **)&byte_5D4594[3799444]) >> byte_5D4594[3804376])) >> 8) - v5)) >> 8)));
      *(_DWORD *)&byte_5D4594[3799444] += 2;
      v1 = (_WORD *)(*(_DWORD *)&byte_5D4594[3799540] + 2);
      result = v4 - 1;
      v3 = v4 == 1;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      --v4;
    }
    while ( !v3 );
  }
}

//----- (004C8A30) --------------------------------------------------------
void sub_4C8A30()
{
  WORD *v1; // esi
  int v5; // [esp+0h] [ebp-28h]
  unsigned __int8 v6; // [esp+4h] [ebp-24h]
  unsigned __int8 v7; // [esp+8h] [ebp-20h]
  __int16 v8; // [esp+Ch] [ebp-1Ch]

  unsigned int rshift = *(DWORD*)&byte_5D4594[3804384];
  unsigned int gshift = *(DWORD*)&byte_5D4594[3804380];
  unsigned int bshift = *(DWORD*)&byte_5D4594[3804376];

  unsigned int rmask = *(DWORD*)&byte_5D4594[3804372];
  unsigned int gmask = *(DWORD*)&byte_5D4594[3804368];
  unsigned int bmask = *(DWORD*)&byte_5D4594[3804364];

  WORD *add1 = *(_DWORD *)&byte_5D4594[3804672];
  WORD *add2 = *(_DWORD *)&byte_5D4594[3804664];
  WORD *add3 = *(_DWORD *)&byte_5D4594[3804656];

  WORD *px = *(_WORD **)&byte_5D4594[3799444];

  v7 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 104);
  v6 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 100);
  v8 = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799572] + 96);
  v1 = *(WORD **)&byte_5D4594[3799540];
  for (v5 = *(_DWORD *)&byte_5D4594[3799456]; v5 > 0; --v5)
  {
      BYTE v3; // eax
      BYTE v9; // [esp+18h] [ebp-10h]
      BYTE v10; // [esp+20h] [ebp-8h]
      WORD v2 = *v1; // old color
      WORD x = *px; // color to draw

      // XXX This code is incorrect in the original Nox binary, but is correct
      //     in the MMX version of this function. The color multiply (v8,v6,v7)
      //     is supposed to be applied to the new color, not to the old color.
      //     The old color already had it applied earlier.
      v3 = (v7 * ((rmask & x) << rshift)) >> 8;
      v9 = (v6 * ((gmask & x) >> gshift)) >> 8;
      v10 = (v8 * ((bmask & x) >> bshift)) >> 8;
      *v1 = add1[v10 + (((bmask & v2) >> bshift) - v10) / 2] | add3[v9 + (((gmask & v2) >> gshift) - v9) / 2] | add2[v3 + (((rmask & v2) << rshift) - v3) / 2];
      v1++;
      px++;
  }
  *(WORD **)&byte_5D4594[3799444] = px;
  *(WORD **)&byte_5D4594[3799540] = v1;
}

__int16 sub_4C8C00()
{
	DebugBreak();
	return 0;
}

#if 0
//----- (004C8C00) --------------------------------------------------------
__int16 sub_4C8C00()
{
  int v0; // ecx
  __m64 v1; // mm5
  __m64 v2; // mm6
  __m64 v3; // mm7
  __m64 *v4; // esi
  __m64 *v5; // edi
  bool v6; // cc
  __m64 v7; // mm0
  __m64 v8; // mm1
  __m64 v9; // mm2
  __m64 v10; // mm0
  __int16 result; // ax
  int v12; // ecx
  __m64 v13; // [esp+Ch] [ebp-8h]

  v0 = *(_DWORD *)&byte_5D4594[3799456];
  v1 = *(__m64 *)(*(_DWORD *)&byte_5D4594[3799572] + 72);
  v2 = *(__m64 *)(*(_DWORD *)&byte_5D4594[3799572] + 80);
  v3 = *(__m64 *)(*(_DWORD *)&byte_5D4594[3799572] + 88);
  v4 = *(__m64 **)&byte_5D4594[3799444];
  v5 = *(__m64 **)&byte_5D4594[3799540];
  while ( 1 )
  {
    v6 = v0 < 4;
    v0 -= 4;
    v7 = _m_psrlw(_m_pand((__m64)v5->m64_u64, *(__m64 *)&byte_5D4594[3804396]), *(__m64 *)&byte_5D4594[3804444]);
    v8 = _m_psrlw(_m_pand((__m64)v5->m64_u64, *(__m64 *)&byte_5D4594[3804404]), *(__m64 *)&byte_5D4594[3804452]);
    v9 = _m_psllw(_m_pand((__m64)v5->m64_u64, *(__m64 *)&byte_5D4594[3804412]), *(__m64 *)&byte_5D4594[3804460]);
    v10 = _m_por(
            _m_por(
              _m_pand(
                _m_psllw(
                  _m_paddw(
                    v7,
                    _m_psrlwi(
                      _m_psubw(
                        _m_psrlwi(
                          _m_pmullw(
                            _m_psrlw(
                              _m_pand((__m64)v4->m64_u64, *(__m64 *)&byte_5D4594[3804396]),
                              *(__m64 *)&byte_5D4594[3804444]),
                            v1),
                          8u),
                        v7),
                      1u)),
                  *(__m64 *)&byte_5D4594[3804444]),
                *(__m64 *)&byte_5D4594[3804396]),
              _m_pand(
                _m_psllw(
                  _m_paddw(
                    v8,
                    _m_psrlwi(
                      _m_psubw(
                        _m_psrlwi(
                          _m_pmullw(
                            _m_psrlw(
                              _m_pand((__m64)v4->m64_u64, *(__m64 *)&byte_5D4594[3804404]),
                              *(__m64 *)&byte_5D4594[3804452]),
                            v2),
                          8u),
                        v8),
                      1u)),
                  *(__m64 *)&byte_5D4594[3804452]),
                *(__m64 *)&byte_5D4594[3804404])),
            _m_pand(
              _m_psrlw(
                _m_paddw(
                  v9,
                  _m_psrlwi(
                    _m_psubw(
                      _m_psrlwi(
                        _m_pmullw(
                          _m_psllw(
                            _m_pand((__m64)v4->m64_u64, *(__m64 *)&byte_5D4594[3804412]),
                            *(__m64 *)&byte_5D4594[3804460]),
                          v3),
                        8u),
                      v9),
                    1u)),
                *(__m64 *)&byte_5D4594[3804460]),
              *(__m64 *)&byte_5D4594[3804412]));
    if ( v6 )
      break;
    v5->m64_u64 = (unsigned __int64)v10;
    ++v4;
    ++v5;
    if ( v6 )
      goto LABEL_8;
  }
  v13 = v10;
  result = v13.m64_i16[0];
  LOWORD(v5->m64_i32[0]) = v13.m64_i16[0];
  v4 = (__m64 *)((char *)v4 + 2);
  v5 = (__m64 *)((char *)v5 + 2);
  v12 = v0 + 3;
  if ( v12 )
  {
    result = v13.m64_i16[1];
    LOWORD(v5->m64_i32[0]) = v13.m64_i16[1];
    v4 = (__m64 *)((char *)v4 + 2);
    v5 = (__m64 *)((char *)v5 + 2);
    if ( v12 != 1 )
    {
      result = v13.m64_i16[2];
      v4 = (__m64 *)((char *)v4 + 2);
      LOWORD(v5->m64_i32[0]) = v13.m64_i16[2];
      v5 = (__m64 *)((char *)v5 + 2);
    }
  }
LABEL_8:
  *(_DWORD *)&byte_5D4594[3799444] = v4;
  *(_DWORD *)&byte_5D4594[3799540] = v5;
  return result;
}
#endif

//----- (004C8D60) --------------------------------------------------------
void sub_4C8D60()
{
  unsigned __int16 *v0; // esi
  _WORD *v1; // edi
  unsigned __int16 v2; // ax
  int v3; // eax
  int result; // eax
  int v6; // [esp-4h] [ebp-10h]

  v0 = *(unsigned __int16 **)&byte_5D4594[3799444];
  v1 = *(_WORD **)&byte_5D4594[3799540];
  v6 = *(_DWORD *)&byte_5D4594[3799456];
  do
  {
    v2 = *v0;
    ++v0;
    v3 = (unsigned __int8)*(_DWORD *)(*(_DWORD *)&byte_5D4594[3804668] + v2);
    result = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3804672]
                       + 2 * ((unsigned int)(*(_DWORD *)&byte_5D4594[3800812] * v3) >> 8)) | *(_DWORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * ((unsigned int)(*(_DWORD *)&byte_5D4594[3800816] * v3) >> 8)) | *(_DWORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * ((unsigned int)(*(_DWORD *)&byte_5D4594[3800820] * v3) >> 8));
    *v1 = result;
    ++v1;
  }
  while ( (*(_DWORD *)&byte_5D4594[3799456])-- > 1 );
  *(_DWORD *)&byte_5D4594[3799456] = v6;
  *(_DWORD *)&byte_5D4594[3799444] = v0;
  *(_DWORD *)&byte_5D4594[3799540] = v1;
}

//----- (004C8DF0) --------------------------------------------------------
void sub_4C8DF0()
{
  int result; // eax
  int v1; // ecx
  int v2; // esi
  int v3; // edi
  bool v4; // zf
  int v5; // [esp+8h] [ebp-30h]
  unsigned __int8 v6; // [esp+Ch] [ebp-2Ch]
  char v7[40]; // [esp+10h] [ebp-28h]

  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  qmemcpy(
    v7,
    (const void *)(48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + *(_DWORD *)&byte_5D4594[3799572] + 264),
    sizeof(v7));
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = *(_DWORD *)&v7[32];
    v2 = *(_DWORD *)&v7[28];
    v3 = *(_DWORD *)&v7[24];
    v5 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v6 = **(_BYTE **)&byte_5D4594[3799444];
      ++*(_DWORD *)&byte_5D4594[3799444];
      **(_WORD **)&byte_5D4594[3799540] = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                                                   + 2 * ((v3 * (unsigned int)v6) >> 8)) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * ((v2 * (unsigned int)v6) >> 8)) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * ((v1 * (unsigned int)v6) >> 8));
      result = v5 - 1;
      v4 = v5 == 1;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      --v5;
    }
    while ( !v4 );
  }
}

//----- (004C8EC0) --------------------------------------------------------
void sub_4C8EC0()
{
  int result; // eax
  _WORD *v1; // esi
  __int16 v2; // di
  unsigned __int8 v3; // [esp+8h] [ebp-3Ch]
  int v4; // [esp+8h] [ebp-3Ch]
  unsigned __int8 v5; // [esp+Ch] [ebp-38h]
  unsigned __int8 v6; // [esp+14h] [ebp-30h]
  char v7[40]; // [esp+1Ch] [ebp-28h]

  v3 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
  qmemcpy(
    v7,
    (const void *)(48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + *(_DWORD *)&byte_5D4594[3799572] + 264),
    sizeof(v7));
  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = *(_WORD **)&byte_5D4594[3799540];
    v2 = v3;
    v4 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v5 = **(_BYTE **)&byte_5D4594[3799444];
      ++*(_DWORD *)&byte_5D4594[3799444];
      v6 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & *v1) >> byte_5D4594[3804380];
      **(_WORD **)&byte_5D4594[3799540] = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                                                   + 2
                                                   * (unsigned __int8)(((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & *v1) >> byte_5D4594[3804376])
                                                                     + ((unsigned __int16)(v2
                                                                                         * ((unsigned __int8)((unsigned __int16)(*(_WORD *)&v7[24] * v5) >> 8)
                                                                                          - (unsigned __int8)((unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & *v1) >> byte_5D4594[3804376]))) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(v6 + ((unsigned __int16)(v2 * ((unsigned __int8)((unsigned __int16)(*(_WORD *)&v7[28] * v5) >> 8) - v6)) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((unsigned __int16)(v2 * ((unsigned __int8)((unsigned __int16)(*(_WORD *)&v7[32] * v5) >> 8) - (unsigned __int8)((*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384]))) >> 8)));
      v1 = (_WORD *)(*(_DWORD *)&byte_5D4594[3799540] + 2);
      result = v4 - 1;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      v4 = result;
    }
    while ( result );
  }
}

//----- (004C9050) --------------------------------------------------------
void sub_4C9050()
{
  int result; // eax
  _WORD *v1; // edi
  unsigned __int8 v2; // cl
  unsigned int v3; // edx
  int v4; // [esp+8h] [ebp-3Ch]
  char v5[40]; // [esp+1Ch] [ebp-28h]

  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  qmemcpy(
    v5,
    (const void *)(48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + *(_DWORD *)&byte_5D4594[3799572] + 264),
    sizeof(v5));
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = *(_WORD **)&byte_5D4594[3799540];
    v4 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v2 = **(_BYTE **)&byte_5D4594[3799444];
      ++*(_DWORD *)&byte_5D4594[3799444];
      v3 = (unsigned __int16)*v1;
      *v1 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                     + 2
                     * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v3) >> byte_5D4594[3804376])
                                       + ((int)((((*(_DWORD *)&v5[24] * (unsigned int)v2) >> 8) & 0xFF)
                                              - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v3) >> byte_5D4594[3804376])) >> 1))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v3) >> byte_5D4594[3804380]) + ((int)((((*(_DWORD *)&v5[28] * (unsigned int)v2) >> 8) & 0xFF) - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v3) >> byte_5D4594[3804380])) >> 1))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (unsigned __int8)(((*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((int)((((*(_DWORD *)&v5[32] * (unsigned int)v2) >> 8) & 0xFF) - (unsigned __int8)((*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 1)));
      v1 = (_WORD *)(*(_DWORD *)&byte_5D4594[3799540] + 2);
      result = v4 - 1;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      v4 = result;
    }
    while ( result );
  }
}

//----- (004C91C0) --------------------------------------------------------
void sub_4C91C0()
{
  int result; // eax
  int v1; // ecx
  int v2; // edi
  bool v3; // zf
  unsigned __int8 v4; // [esp+8h] [ebp-34h]
  int v5; // [esp+8h] [ebp-34h]
  unsigned __int8 v6; // [esp+Ch] [ebp-30h]
  unsigned __int8 v7; // [esp+10h] [ebp-2Ch]
  unsigned __int8 v8; // [esp+10h] [ebp-2Ch]
  char v9[40]; // [esp+14h] [ebp-28h]

  v7 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 96);
  v6 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 100);
  v4 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 104);
  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  qmemcpy(
    v9,
    (const void *)(48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + *(_DWORD *)&byte_5D4594[3799572] + 264),
    sizeof(v9));
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = v4;
    v2 = v7;
    v5 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v8 = **(_BYTE **)&byte_5D4594[3799444];
      ++*(_DWORD *)&byte_5D4594[3799444];
      **(_WORD **)&byte_5D4594[3799540] = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                                                   + 2
                                                   * (((int)(v1 * (((*(_DWORD *)&v9[32] * (unsigned int)v8) >> 8) & 0xFF)) >> 8) & 0xFF)) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (((int)(v6 * (((*(_DWORD *)&v9[28] * (unsigned int)v8) >> 8) & 0xFF)) >> 8) & 0xFF)) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (((int)(v2 * (((*(_DWORD *)&v9[24] * (unsigned int)v8) >> 8) & 0xFF)) >> 8) & 0xFF));
      result = v5 - 1;
      v3 = v5 == 1;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      --v5;
    }
    while ( !v3 );
  }
}

//----- (004C92F0) --------------------------------------------------------
void sub_4C92F0()
{
  int result; // eax
  _WORD *v1; // esi
  unsigned __int8 v2; // dl
  int v3; // eax
  bool v4; // zf
  unsigned __int8 v5; // [esp+8h] [ebp-48h]
  int v6; // [esp+8h] [ebp-48h]
  unsigned __int8 v7; // [esp+Ch] [ebp-44h]
  unsigned __int8 v8; // [esp+10h] [ebp-40h]
  unsigned __int8 v9; // [esp+14h] [ebp-3Ch]
  unsigned __int8 v10; // [esp+1Ch] [ebp-34h]
  int v11; // [esp+20h] [ebp-30h]
  char v12[40]; // [esp+28h] [ebp-28h]

  v9 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
  v8 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 96);
  v7 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 100);
  v5 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 104);
  qmemcpy(
    v12,
    (const void *)(48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + *(_DWORD *)&byte_5D4594[3799572] + 264),
    sizeof(v12));
  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = *(_WORD **)&byte_5D4594[3799540];
    v11 = v5;
    v6 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v2 = **(_BYTE **)&byte_5D4594[3799444];
      ++*(_DWORD *)&byte_5D4594[3799444];
      v3 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & *v1) >> byte_5D4594[3804376];
      v10 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & *v1) >> byte_5D4594[3804380];
      **(_WORD **)&byte_5D4594[3799540] = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                                                   + 2
                                                   * (unsigned __int8)(((*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                                                     + ((unsigned __int16)(v9
                                                                                         * (((int)(v11
                                                                                                 * (((*(_DWORD *)&v12[32] * (unsigned int)v2) >> 8) & 0xFF)) >> 8)
                                                                                          - (unsigned __int8)((*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384]))) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(v10 + ((unsigned __int16)(v9 * (((int)(v7 * (((*(_DWORD *)&v12[28] * (unsigned int)v2) >> 8) & 0xFF)) >> 8) - v10)) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(v3 + ((unsigned __int16)(v9 * (((int)(v8 * (((*(_DWORD *)&v12[24] * (unsigned int)v2) >> 8) & 0xFF)) >> 8) - (unsigned __int8)v3)) >> 8)));
      v1 = (_WORD *)(*(_DWORD *)&byte_5D4594[3799540] + 2);
      result = v6 - 1;
      v4 = v6 == 1;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      --v6;
    }
    while ( !v4 );
  }
}

//----- (004C94D0) --------------------------------------------------------
void sub_4C94D0()
{
  unsigned __int8 v0; // dl
  int result; // eax
  _WORD *v2; // edi
  int v3; // eax
  int v4; // [esp+8h] [ebp-48h]
  unsigned __int8 v5; // [esp+Ch] [ebp-44h]
  unsigned __int8 v6; // [esp+10h] [ebp-40h]
  int v7; // [esp+14h] [ebp-3Ch]
  int v8; // [esp+1Ch] [ebp-34h]
  char v9[40]; // [esp+28h] [ebp-28h]

  v0 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 96);
  qmemcpy(
    v9,
    (const void *)(48 * (*(_DWORD *)&byte_5D4594[3799428] >> 4) + *(_DWORD *)&byte_5D4594[3799572] + 264),
    sizeof(v9));
  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v2 = *(_WORD **)&byte_5D4594[3799540];
    v8 = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799572] + 104);
    v7 = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799572] + 100);
    v4 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      v6 = **(_BYTE **)&byte_5D4594[3799444];
      ++*(_DWORD *)&byte_5D4594[3799444];
      v3 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & *v2) >> byte_5D4594[3804376];
      v5 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & *v2) >> byte_5D4594[3804380];
      *v2 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672]
                     + 2
                     * (((v0
                        * (unsigned __int8)(v3
                                          + ((int)((((*(_DWORD *)&v9[24] * (unsigned int)v6) >> 8) & 0xFF)
                                                 - (unsigned __int8)v3) >> 1))) >> 8) & 0xFF)) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * (((v8 * (unsigned __int8)(((*(_BYTE *)v2 & byte_5D4594[3804372]) << byte_5D4594[3804384]) + ((int)((((*(_DWORD *)&v9[32] * (unsigned int)v6) >> 8) & 0xFF) - (unsigned __int8)((*(_BYTE *)v2 & byte_5D4594[3804372]) << byte_5D4594[3804384])) >> 1))) >> 8) & 0xFF)) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (((v7 * (unsigned __int8)(v5 + ((int)((((*(_DWORD *)&v9[28] * (unsigned int)v6) >> 8) & 0xFF) - v5) >> 1))) >> 8) & 0xFF));
      v2 = (_WORD *)(*(_DWORD *)&byte_5D4594[3799540] + 2);
      result = v4 - 1;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      v4 = result;
    }
    while ( result );
  }
}

//----- (004C96A0) --------------------------------------------------------
void sub_4C96A0()
{
  unsigned int result; // eax
  _WORD *v1; // edi
  __int16 v2; // si
  unsigned __int8 v3; // [esp+0h] [ebp-14h]
  unsigned int v4; // [esp+8h] [ebp-Ch]
  unsigned __int8 v5; // [esp+10h] [ebp-4h]

  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    HIWORD(result) = *(_WORD *)&byte_5D4594[3799458];
    v1 = *(_WORD **)&byte_5D4594[3799540];
    v4 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      LOWORD(result) = **(_WORD **)&byte_5D4594[3799444];
      v2 = (unsigned __int8)(16 * **(_WORD **)&byte_5D4594[3799444]);
      v5 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & *v1) >> byte_5D4594[3804376];
      v3 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & *v1) >> byte_5D4594[3804380];
      *v1 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                     + 2
                     * (unsigned __int8)(((*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                       + ((unsigned __int16)(v2
                                                           * ((**(_WORD **)&byte_5D4594[3799444] & 0xF0)
                                                            - (unsigned __int8)((*(_BYTE *)v1 & byte_5D4594[3804372]) << byte_5D4594[3804384]))) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(v5 + ((unsigned __int16)(v2 * (((**(_WORD **)&byte_5D4594[3799444] >> 8) & 0xF0) - v5)) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(v3 + ((unsigned __int16)(v2 * (((result >> 4) & 0xF0) - v3)) >> 8)));
      v1 = (_WORD *)(*(_DWORD *)&byte_5D4594[3799540] + 2);
      result = v4 - 1;
      *(_DWORD *)&byte_5D4594[3799444] += 2;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      v4 = result;
    }
    while ( result );
  }
}

//----- (004C97F0) --------------------------------------------------------
void sub_4C97F0()
{
  int result; // eax
  int v1; // ecx
  _WORD *v2; // edi
  unsigned int v3; // eax
  unsigned int v4; // ebx
  int v5; // edx
  unsigned __int8 v6; // [esp+8h] [ebp-10h]
  int v7; // [esp+8h] [ebp-10h]
  int v8; // [esp+Ch] [ebp-Ch]

  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  v6 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 1036);
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = v6;
    v2 = *(_WORD **)&byte_5D4594[3799540];
    v8 = v6;
    v7 = *(_DWORD *)&byte_5D4594[3799456];
    while ( 1 )
    {
      HIWORD(v3) = *(_WORD *)&byte_5D4594[3799446];
      v4 = (unsigned __int16)*v2;
      LOWORD(v3) = **(_WORD **)&byte_5D4594[3799444];
      v5 = v1 * 16 * (**(_WORD **)&byte_5D4594[3799444] & 0xF);
      *v2 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                     + 2
                     * (unsigned __int8)(((*(_BYTE *)v2 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                       + ((unsigned __int16)(BYTE1(v5)
                                                           * ((**(_WORD **)&byte_5D4594[3799444] & 0xF0)
                                                            - (unsigned __int8)((*(_BYTE *)v2 & byte_5D4594[3804372]) << byte_5D4594[3804384]))) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804364] & v4) >> byte_5D4594[3804376]) + ((unsigned __int16)(BYTE1(v5) * (((**(_WORD **)&byte_5D4594[3799444] >> 8) & 0xF0) - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804364] & v4) >> byte_5D4594[3804376]))) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(((*(_DWORD *)&byte_5D4594[3804368] & v4) >> byte_5D4594[3804380]) + ((unsigned __int16)(BYTE1(v5) * (((v3 >> 4) & 0xF0) - (unsigned __int8)((*(_DWORD *)&byte_5D4594[3804368] & v4) >> byte_5D4594[3804380]))) >> 8)));
      v2 = (_WORD *)(*(_DWORD *)&byte_5D4594[3799540] + 2);
      result = v7 - 1;
      *(_DWORD *)&byte_5D4594[3799444] += 2;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      v7 = result;
      if ( !result )
        break;
      v1 = v8;
    }
  }
}

//----- (004C9970) --------------------------------------------------------
void sub_4C9970()
{
  unsigned int result; // eax
  int v1; // ebp
  _WORD *v2; // edi
  __int16 v3; // si
  unsigned __int8 v4; // [esp+0h] [ebp-1Ch]
  unsigned __int8 v5; // [esp+4h] [ebp-18h]
  unsigned int v6; // [esp+8h] [ebp-14h]
  unsigned __int8 v7; // [esp+14h] [ebp-8h]
  int v8; // [esp+18h] [ebp-4h]

  v5 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[3799572] + 96);
  result = *(_DWORD *)&byte_5D4594[3799456] - 1;
  if ( *(_DWORD *)&byte_5D4594[3799456] )
  {
    v1 = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799572] + 100);
    HIWORD(result) = *(_WORD *)&byte_5D4594[3799458];
    v2 = *(_WORD **)&byte_5D4594[3799540];
    v8 = *(unsigned __int8 *)(*(_DWORD *)&byte_5D4594[3799572] + 104);
    v6 = *(_DWORD *)&byte_5D4594[3799456];
    do
    {
      LOWORD(result) = **(_WORD **)&byte_5D4594[3799444];
      v7 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & *v2) >> byte_5D4594[3804376];
      v3 = (unsigned __int8)(16 * **(_WORD **)&byte_5D4594[3799444]);
      v4 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804368] & *v2) >> byte_5D4594[3804380];
      *v2 = *(_WORD *)(*(_DWORD *)&byte_5D4594[3804664]
                     + 2
                     * (unsigned __int8)(((*(_BYTE *)v2 & byte_5D4594[3804372]) << byte_5D4594[3804384])
                                       + ((unsigned __int16)(v3
                                                           * (((v8 * (**(_WORD **)&byte_5D4594[3799444] & 0xF0)) >> 8)
                                                            - (unsigned __int8)((*(_BYTE *)v2 & byte_5D4594[3804372]) << byte_5D4594[3804384]))) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804656] + 2 * (unsigned __int8)(v4 + ((unsigned __int16)(v3 * (((int)(v1 * ((result >> 4) & 0xF0)) >> 8) - v4)) >> 8))) | *(_WORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * (unsigned __int8)(v7 + ((unsigned __int16)(v3 * (((v5 * ((**(_WORD **)&byte_5D4594[3799444] >> 8) & 0xF0)) >> 8) - v7)) >> 8)));
      v2 = (_WORD *)(*(_DWORD *)&byte_5D4594[3799540] + 2);
      result = v6 - 1;
      *(_DWORD *)&byte_5D4594[3799444] += 2;
      *(_DWORD *)&byte_5D4594[3799540] += 2;
      v6 = result;
    }
    while ( result );
  }
}

//----- (004C9B20) --------------------------------------------------------
void sub_4C9B20()
{
  unsigned __int16 *v0; // esi
  _WORD *v1; // edi
  unsigned int v2; // edx
  int v3; // eax
  unsigned int v4; // ebx
  int v5; // edx
  unsigned __int16 v6; // cx
  int result; // eax
  int v9; // [esp-4h] [ebp-10h]

  v0 = *(unsigned __int16 **)&byte_5D4594[3799444];
  v1 = *(_WORD **)&byte_5D4594[3799540];
  v9 = *(_DWORD *)&byte_5D4594[3799456];
  do
  {
    v2 = (unsigned __int16)*v1;
    v3 = (unsigned __int16)(*(_WORD *)&byte_5D4594[3804364] & *v1) >> byte_5D4594[3804376];
    v4 = (*(_DWORD *)&byte_5D4594[3804368] & v2) >> byte_5D4594[3804380];
    v5 = (*(_DWORD *)&byte_5D4594[3804372] & v2) << byte_5D4594[3804384];
    v6 = *v0;
    ++v0;
    LOBYTE(v3) = SADD8(HIBYTE(v6) & 0xF8 | 7, (_BYTE)v3);
    LOBYTE(v5) = SADD8((8 * v6) & 0xF8 | 7, (_BYTE)v5);
    LOBYTE(v4) = SADD8((v6 >> 3) & 0xFC | 3, (_BYTE)v4);
    result = *(_DWORD *)(*(_DWORD *)&byte_5D4594[3804664] + 2 * v5) | *(_DWORD *)(*(_DWORD *)&byte_5D4594[3804656]
                                                                                + 2 * v4) | *(_DWORD *)(*(_DWORD *)&byte_5D4594[3804672] + 2 * v3);
    *v1 = result;
    ++v1;
  }
  while ( (*(_DWORD *)&byte_5D4594[3799456])-- > 1 );
  *(_DWORD *)&byte_5D4594[3799456] = v9;
  *(_DWORD *)&byte_5D4594[3799444] = v0;
  *(_DWORD *)&byte_5D4594[3799540] = v1;
}

//----- (004C9BF0) --------------------------------------------------------
int __cdecl sub_4C9BF0(int a1)
{
  int result; // eax
  wchar_t *v2; // eax
  wchar_t *v3; // eax
  wchar_t *v4; // eax
  wchar_t *v5; // eax
  wchar_t *v6; // eax
  char *v7; // eax
  wchar_t *v8; // eax
  wchar_t *v9; // eax
  wchar_t *v10; // eax
  wchar_t *v11; // eax
  wchar_t *v12; // eax
  char *v13; // eax
  wchar_t *v14; // eax
  char *v15; // eax
  wchar_t *v16; // eax
  wchar_t *v17; // eax
  char *v18; // edi
  wchar_t *v19; // eax
  char *v20; // edi
  wchar_t *v21; // eax
  char *v22; // edi
  wchar_t *v23; // eax
  char *v24; // eax
  wchar_t *v25; // eax
  char *v26; // eax
  wchar_t *v27; // eax
  wchar_t *v28; // eax
  wchar_t *v29; // eax
  char *v30; // edi
  char *v31; // eax
  wchar_t *v32; // eax
  wchar_t *v33; // eax
  char *v34; // edi
  char *v35; // eax
  wchar_t *v36; // eax
  wchar_t *v37; // eax
  char *v38; // edi
  char *v39; // eax
  wchar_t *v40; // eax
  wchar_t *v41; // eax
  unsigned int v42; // kr04_4
  wchar_t *v43; // eax
  wchar_t *v44; // eax
  wchar_t *v45; // [esp-10h] [ebp-418h]
  int v46; // [esp-8h] [ebp-410h]
  wchar_t *v47; // [esp-8h] [ebp-410h]
  int v48; // [esp-4h] [ebp-40Ch]
  wchar_t *v49; // [esp-4h] [ebp-40Ch]
  int v50; // [esp-4h] [ebp-40Ch]
  int v51; // [esp-4h] [ebp-40Ch]
  int v52; // [esp-4h] [ebp-40Ch]
  wchar_t *v53; // [esp-4h] [ebp-40Ch]
  wchar_t *v54; // [esp-4h] [ebp-40Ch]
  wchar_t *v55; // [esp-4h] [ebp-40Ch]
  wchar_t *v56; // [esp-4h] [ebp-40Ch]
  int v57; // [esp-4h] [ebp-40Ch]
  int v58; // [esp-4h] [ebp-40Ch]
  int v59; // [esp-4h] [ebp-40Ch]
  char *v60; // [esp-4h] [ebp-40Ch]
  char *v61; // [esp-4h] [ebp-40Ch]
  wchar_t v62[256]; // [esp+8h] [ebp-400h]
  wchar_t v63[256]; // [esp+208h] [ebp-200h]

  result = 0;
  switch ( *(unsigned __int8 *)(a1 + 1) )
  {
    case 0u:
      sub_4FB0B0(*(_DWORD *)(a1 + 2));
      return 6;
    case 1u:
      v50 = sub_424930(*(_DWORD *)(a1 + 2));
      v10 = sub_40F1D0((char *)&byte_587000[186124], 0, (const char *)&byte_587000[186084], 117);
      nox_swprintf(v62, v10, v50);
      sub_445490(v62);
      return 6;
    case 2u:
      sub_4FB960(*(_DWORD *)(a1 + 2));
      return 6;
    case 3u:
      v13 = sub_417040(*(_DWORD *)(a1 + 2));
      if ( !v13 )
        return 6;
      v51 = (int)(v13 + 4704);
      v14 = sub_40F1D0((char *)&byte_587000[186320], 0, (const char *)&byte_587000[186280], 147);
      nox_swprintf(v62, v14, v51);
      sub_445490(v62);
      return 6;
    case 4u:
      v15 = sub_417040(*(_DWORD *)(a1 + 2));
      if ( !v15 )
        return 6;
      v52 = (int)(v15 + 4704);
      v16 = sub_40F1D0((char *)&byte_587000[186384], 0, (const char *)&byte_587000[186344], 164);
      nox_swprintf(v62, v16, v52);
      goto LABEL_22;
    case 5u:
      v18 = sub_417040(*(_DWORD *)(a1 + 2));
      if ( !v18 )
        return 10;
      v54 = sub_418C20(*(_DWORD *)(a1 + 6));
      v19 = sub_40F1D0((char *)&byte_587000[186524], 0, (const char *)&byte_587000[186484], 196);
      nox_swprintf(v62, v19, v18 + 4704, v54);
      sub_445490(v62);
      sub_452D80(306, 100);
      return 10;
    case 6u:
      v20 = sub_417040(*(_DWORD *)(a1 + 2));
      if ( !v20 )
        return 10;
      v55 = sub_418C20(*(_DWORD *)(a1 + 6));
      v21 = sub_40F1D0((char *)&byte_587000[186592], 0, (const char *)&byte_587000[186552], 213);
      nox_swprintf(v62, v21, v20 + 4704, v55);
      sub_445490(v62);
      sub_452D80(303, 100);
      return 10;
    case 7u:
      v22 = sub_417040(*(_DWORD *)(a1 + 2));
      if ( v22 )
      {
        v56 = sub_418C20(*(_DWORD *)(a1 + 6));
        v23 = sub_40F1D0((char *)&byte_587000[186660], 0, (const char *)&byte_587000[186620], 230);
        nox_swprintf(v62, v23, v22 + 4704, v56);
        sub_445490(v62);
        sub_452D80(304, 100);
      }
      return 10;
    case 8u:
      v53 = sub_418C20(*(_DWORD *)(a1 + 2));
      v17 = sub_40F1D0((char *)&byte_587000[186456], 0, (const char *)&byte_587000[186416], 179);
      nox_swprintf(v62, v17, v53);
LABEL_22:
      sub_445490(v62);
      sub_452D80(305, 100);
      return 6;
    case 9u:
      v38 = sub_418AB0(*(_DWORD *)(a1 + 6));
      v39 = sub_417040(*(_DWORD *)(a1 + 2));
      if ( !v39 )
      {
        if ( v38 )
        {
          v41 = sub_40F1D0((char *)&byte_587000[187308], 0, (const char *)&byte_587000[187268], 374);
          nox_swprintf(v62, v41, v38);
          sub_445490(v62);
        }
        return 10;
      }
      if ( !v38 )
        return 10;
      v46 = (int)(v39 + 4704);
      v40 = sub_40F1D0((char *)&byte_587000[187240], 0, (const char *)&byte_587000[187200], 365);
      nox_swprintf(v62, v40, v46, v38);
      sub_445490(v62);
      return 10;
    case 0xAu:
      v34 = sub_417040(*(_DWORD *)(a1 + 2));
      v35 = sub_418AB0(*(_DWORD *)(a1 + 6));
      if ( v35 )
      {
        if ( !v34 )
          return 10;
        v61 = v35;
        v36 = sub_40F1D0((char *)&byte_587000[187108], 0, (const char *)&byte_587000[187068], 334);
        nox_swprintf(v62, v36, v34 + 4704, v61);
        sub_445490(v62);
        result = 10;
      }
      else
      {
        if ( !v34 )
          return 10;
        v37 = sub_40F1D0((char *)&byte_587000[187176], 0, (const char *)&byte_587000[187136], 343);
        nox_swprintf(v62, v37, v34 + 4704);
        sub_445490(v62);
        result = 10;
      }
      return result;
    case 0xBu:
      v30 = sub_417040(*(_DWORD *)(a1 + 2));
      v31 = sub_418AB0(*(_DWORD *)(a1 + 6));
      if ( v31 )
      {
        if ( v30 )
        {
          v60 = v31;
          v32 = sub_40F1D0((char *)&byte_587000[186984], 0, (const char *)&byte_587000[186944], 303);
          nox_swprintf(v62, v32, v30 + 4704, v60);
          sub_445490(v62);
          return 10;
        }
      }
      else if ( v30 )
      {
        v33 = sub_40F1D0((char *)&byte_587000[187048], 0, (const char *)&byte_587000[187008], 312);
        nox_swprintf(v62, v33, v30 + 4704);
        sub_445490(v62);
        return 10;
      }
      return 10;
    case 0xCu:
      v11 = sub_40F1D0((char *)&byte_587000[186192], 0, (const char *)&byte_587000[186152], 128);
      sub_445490(v11);
      if ( !*(_DWORD *)(a1 + 2) )
        return 6;
      v12 = sub_40F1D0((char *)&byte_587000[186260], 0, (const char *)&byte_587000[186220], 132);
      sub_445490(v12);
      return 6;
    case 0xDu:
      switch ( *(_DWORD *)(a1 + 2) )
      {
        case 0:
          v2 = sub_40F1D0((char *)&byte_587000[185600], 0, (const char *)&byte_587000[185560], 27);
          sub_445490(v2);
          result = 6;
          break;
        case 1:
          v3 = sub_40F1D0((char *)&byte_587000[185668], 0, (const char *)&byte_587000[185628], 31);
          sub_445490(v3);
          result = 6;
          break;
        case 2:
          v4 = sub_40F1D0((char *)&byte_587000[185736], 0, (const char *)&byte_587000[185696], 35);
          sub_445490(v4);
          result = 6;
          break;
        case 3:
          v5 = sub_40F1D0((char *)&byte_587000[185804], 0, (const char *)&byte_587000[185764], 39);
          sub_445490(v5);
          result = 6;
          break;
        default:
          return 6;
      }
      return result;
    case 0xEu:
      sub_495210(a1);
      return 11;
    case 0xFu:
      v42 = strlen((const char *)(a1 + 3)) + 1;
      if ( sub_4356B0() != 3 )
        goto LABEL_57;
      if ( *(_BYTE *)(a1 + 2) )
      {
        v47 = sub_40F1D0((char *)(a1 + 3), 0, (const char *)&byte_587000[187340], 397);
        v43 = sub_40F1D0((char *)&byte_587000[187420], 0, (const char *)&byte_587000[187380], 396);
        nox_swprintf(v63, v43, v47);
        sub_445490(v63);
        result = v42 + 3;
      }
      else
      {
        v44 = sub_40F1D0((char *)(a1 + 3), 0, (const char *)&byte_587000[187436], 402);
        sub_445490(v44);
LABEL_57:
        result = v42 + 3;
      }
      return result;
    case 0x10u:
      v49 = sub_418C20(*(_DWORD *)(a1 + 2));
      v9 = sub_40F1D0((char *)&byte_587000[186064], 0, (const char *)&byte_587000[186024], 105);
      nox_swprintf(v62, v9, v49);
      sub_445490(v62);
      return 6;
    case 0x11u:
      v45 = sub_40F1D0((char *)&byte_587000[185864], 0, (const char *)&byte_587000[185824], 51);
      v6 = sub_40F1D0((char *)&byte_587000[185932], 0, (const char *)&byte_587000[185892], 50);
      sub_449A10(0, (int)v6, (int)v45, 33, 0, 0);
      return 2;
    case 0x12u:
      v24 = sub_417040(*(_DWORD *)(a1 + 2));
      if ( !v24 )
        return 6;
      v57 = (int)(v24 + 4704);
      v25 = sub_40F1D0((char *)&byte_587000[186724], 0, (const char *)&byte_587000[186684], 247);
      nox_swprintf(v62, v25, v57);
      sub_445490(v62);
      return 6;
    case 0x13u:
      v26 = sub_417040(*(_DWORD *)(a1 + 2));
      if ( v26 )
      {
        v58 = (int)(v26 + 4704);
        v27 = sub_40F1D0((char *)&byte_587000[186788], 0, (const char *)&byte_587000[186748], 265);
        nox_swprintf(v62, v27, v58);
        sub_445490(v62);
      }
      return 6;
    case 0x14u:
      v7 = sub_417040(*(_DWORD *)(a1 + 2));
      if ( !v7 )
        return 6;
      v48 = (int)(v7 + 4704);
      v8 = sub_40F1D0((char *)&byte_587000[185992], 0, (const char *)&byte_587000[185952], 90);
      nox_swprintf(v62, v8, v48);
      sub_445490(v62);
      return 6;
    case 0x15u:
      v59 = *(_DWORD *)(a1 + 2);
      v28 = sub_40F1D0((char *)&byte_587000[186856], 0, (const char *)&byte_587000[186816], 281);
      nox_swprintf(v62, v28, v59);
      v29 = sub_40F1D0((char *)&byte_587000[186928], 0, (const char *)&byte_587000[186888], 282);
      nox_swprintf(v63, v29, v62);
      sub_445490(v63);
      return 6;
    default:
      return result;
  }
}

//----- (004CA540) --------------------------------------------------------
int __cdecl sub_4CA540(_DWORD *a1, int a2)
{
  _DWORD *v2; // esi
  double v3; // st7
  double v4; // st6
  double v5; // st5
  double v6; // st4
  int v7; // eax
  int v8; // edi
  int v9; // eax
  float v11; // [esp+0h] [ebp-14h]
  float v12; // [esp+0h] [ebp-14h]
  float v13; // [esp+10h] [ebp-4h]
  float v14; // [esp+1Ch] [ebp+8h]

  v2 = (_DWORD *)a2;
  v3 = 0.0;
  v4 = *(float *)(a2 + 468);
  v5 = *(float *)(a2 + 472);
  v6 = 0.0;
  v7 = *(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(a2 + 316) + 1;
  do
  {
    --v7;
    v13 = -(v5 * *(float *)(a2 + 476));
    v4 = v4 - v4 * *(float *)(a2 + 476);
    v5 = v5 + v13;
    v3 = v3 + v4;
    v6 = v6 + v5;
  }
  while ( v7 );
  v14 = v6;
  v11 = (double)(int)v2[81] + v3;
  v8 = sub_419A70(v11);
  v12 = (double)(int)v2[82] + v14;
  v9 = sub_419A70(v12);
  if ( v8 > 0 && v9 > 0 && v8 < 5888 && v9 < 5888 )
  {
    sub_49AA90(v2, v8, v9);
    if ( sub_4992B0(*a1 + v2[3] - a1[4], v2[4] + a1[1] - a1[5]) )
      return 1;
  }
  sub_45A4E0((int)v2);
  return 0;
}

//----- (004CA650) --------------------------------------------------------
int __cdecl sub_4CA650(int a1, int a2)
{
  int v2; // esi
  int v3; // eax
  int v4; // ebx
  int v5; // edi
  int v6; // eax
  int v7; // ecx
  int v8; // eax
  int v9; // ebp
  int v10; // eax
  int v11; // edi
  unsigned __int16 v12; // dx
  int v13; // ebp
  int v14; // eax
  int result; // eax
  int v16; // [esp+10h] [ebp-10h]
  int v17; // [esp+28h] [ebp+8h]

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 16);
  v4 = *(unsigned __int16 *)(a2 + 434) - v3;
  v5 = *(unsigned __int16 *)(a2 + 432) - *(_DWORD *)(a2 + 12);
  v6 = sub_48C6B0(v5, v4);
  v7 = v6;
  v8 = *(unsigned __int8 *)(a2 + 443);
  v17 = v8;
  ++v7;
  v9 = *(_DWORD *)(v2 + 12);
  v10 = v5 * v8 / v7;
  v11 = *(_DWORD *)(v2 + 16);
  v16 = v9 + v10;
  v12 = *(_WORD *)(v2 + 432);
  v13 = v9 - v12;
  v14 = v11 + v4 * v17 / v7;
  if ( v7 <= 10
    || v13 * (v16 - v12) + (v11 - *(unsigned __int16 *)(v2 + 434)) * (v14 - *(unsigned __int16 *)(v2 + 434)) < 0 )
  {
    sub_45A4E0(v2);
    result = 0;
  }
  else
  {
    sub_49AA90((_DWORD *)v2, v16, v14);
    result = 1;
  }
  return result;
}
// 4CA67E: variable 'v6' is possibly undefined

//----- (004CA720) --------------------------------------------------------
int __cdecl sub_4CA720(int a1, int a2)
{
  int v2; // ebx
  int v3; // ebp
  int v4; // ecx
  int v5; // edx
  int v6; // ebx
  int v7; // kr00_4
  int v8; // ebx
  int result; // eax

  v2 = *(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(a2 + 316);
  if ( v2 >= 60
    || (v3 = *(unsigned __int16 *)(a2 + 432), abs32(*(_DWORD *)(a2 + 12) - (unsigned __int16)v3) < 10)
    && abs32(*(_DWORD *)(a2 + 16) - *(unsigned __int16 *)(a2 + 434)) < 10 )
  {
    sub_45A4E0(a2);
    result = 0;
  }
  else
  {
    v4 = *(__int16 *)(a2 + 440) - v2 * *(__int16 *)(a2 + 440) / 60;
    v5 = (v2 << 8) / 120;
    if ( *(_BYTE *)(a2 + 443) )
      v6 = v5 + *(unsigned __int8 *)(a2 + 442);
    else
      v6 = *(unsigned __int8 *)(a2 + 442) - v5;
    if ( v6 < 0 )
      v6 += (unsigned int)(255 - v6) >> 8 << 8;
    if ( v6 >= 256 )
      v6 += -256 * ((unsigned int)v6 >> 8);
    v7 = v4 * *(int *)&byte_587000[8 * v6 + 192088];
    v8 = *(unsigned __int16 *)(a2 + 434) + v4 * *(_DWORD *)&byte_587000[8 * v6 + 192092] / 16;
    sub_49AA90((_DWORD *)a2, v3 + v7 / 16, v8);
    *(_DWORD *)(a2 + 32) = v3 + v7 / 16;
    *(_DWORD *)(a2 + 36) = v8;
    result = 1;
  }
  return result;
}

//----- (004CA860) --------------------------------------------------------
int sub_4CA860()
{
  unsigned __int8 *v0; // esi
  __int64 v1; // rax
  int v3; // [esp+4h] [ebp-4h]

  v3 = 0;
  v0 = &byte_5D4594[1322584];
  do
  {
    v1 = (__int64)(atan2((double)v3 * *(double *)&byte_581450[9960], 1.0) * *(double *)&byte_581450[9952]
                 + *(double *)&byte_581450[9544]);
    *(_WORD *)v0 = v1;
    v0 += 2;
    ++v3;
  }
  while ( (int)v0 < (int)&byte_5D4594[1522584] );
  return v1;
}

//----- (004CA8B0) --------------------------------------------------------
int __cdecl sub_4CA8B0(int a1, int a2)
{
  int v2; // ecx
  int result; // eax
  int v4; // eax
  int v5; // eax
  char v6; // [esp+4h] [ebp+4h]

  v2 = a2;
  if ( !a2 )
    return a1 <= 0 ? 56250 : 18750;
  v4 = a1;
  if ( a2 >= 0 )
  {
    if ( a1 >= 0 )
    {
      v6 = 1;
    }
    else
    {
      v6 = 4;
      v4 = -v4;
    }
  }
  else
  {
    if ( a1 >= 0 )
    {
      v6 = 2;
    }
    else
    {
      v4 = -a1;
      v6 = 3;
    }
    v2 = -a2;
  }
  v5 = 1000 * v4 / v2;
  if ( v5 >= 100000 )
    v5 = 99999;
  result = *(__int16 *)&byte_5D4594[2 * v5 + 1322584];
  switch ( v6 )
  {
    case 2:
      return 37500 - result;
    case 3:
      result += 37500;
      break;
    case 4:
      result = 75000 - result;
      break;
  }
  return result;
}

//----- (004CA960) --------------------------------------------------------
void __cdecl sub_4CA960(_DWORD *a1, char a2, float4 *a3, float2 *a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // [esp-8h] [ebp-10h]
  int2 a1a; // [esp+0h] [ebp-8h]

  v4 = a1[1];
  a1a.field_0 = 23 * *a1;
  a1a.field_4 = 23 * v4;
  switch ( a2 )
  {
    case 1:
      v6 = sub_419A70(11.5);
      sub_4CAA90(&a1a, a3, a4, v6, 23);
      break;
    case 2:
      v5 = sub_419A70(11.5);
      sub_4CAC30(&a1a, a3, a4, 0, v5);
      break;
    case 4:
      v8 = sub_419A70(11.5);
      sub_4CAC30(&a1a, a3, a4, v8, 23);
      break;
    case 6:
      sub_4CAC30(&a1a, a3, a4, 0, 23);
      break;
    case 8:
      v7 = sub_419A70(11.5);
      sub_4CAA90(&a1a, a3, a4, 0, v7);
      break;
    case 9:
      sub_4CAA90(&a1a, a3, a4, 0, 23);
      break;
    default:
      return;
  }
}

//----- (004CAA90) --------------------------------------------------------
void __cdecl sub_4CAA90(int2 *a1, float4 *a2, float2 *a3, int a4, int a5)
{
  int v5; // eax
  int v6; // edx
  double v7; // st6
  int v8; // eax
  double v9; // st7
  double v11; // st7
  double v13; // st7
  double v14; // st5
  double v15; // st7
  double v16; // st7
  double v17; // st7
  float v18; // [esp+8h] [ebp-24h]
  float v19; // [esp+Ch] [ebp-20h]
  float v20; // [esp+10h] [ebp-1Ch]
  double v21; // [esp+14h] [ebp-18h]
  float v22; // [esp+1Ch] [ebp-10h]
  float v23; // [esp+24h] [ebp-8h]

  v5 = a5 + a1->field_0;
  v6 = a1->field_4 - a5 + 22;
  v22 = (double)(a1->field_0 + a4);
  v7 = (double)v5;
  v23 = v7;
  v18 = v7 + (double)v6;
  v8 = sub_419A70(v18);
  if ( a2->field_8 == a2->field_0 )
  {
    v9 = a2->field_8;
    a3->field_0 = a2->field_8;
    a3->field_4 = (double)v8 - v9;
  }
  else
  {
    v11 = a2->field_C;
    if ( v11 == a2->field_4 )
    {
      a3->field_4 = a2->field_C;
      a3->field_0 = (double)v8 - v11;
    }
    else
    {
      v13 = (v11 - a2->field_4) / (a2->field_8 - a2->field_0);
      if ( v13 == -1.0 )
        v13 = -0.99000001;
      v14 = (double)v8;
      v20 = v14;
      v15 = sub_419AF0((v14 - (a2->field_4 - v13 * a2->field_0)) / (v13 + *(double *)&byte_581450[9512]));
      v16 = modf(v15, &v21);
      v19 = sub_419AF0(v16);
      v17 = sub_419AF0(v21);
      a3->field_0 = v17;
      if ( v19 <= *(double *)&byte_581450[9544] )
      {
        if ( v19 < *(double *)&byte_581450[9968] )
          a3->field_0 = v17 - 1.0;
      }
      else
      {
        a3->field_0 = v17 + 1.0;
      }
      if ( a3->field_0 >= (double)v22 )
      {
        if ( a3->field_0 > (double)v23 )
          a3->field_0 = v23;
        a3->field_4 = v20 - a3->field_0;
      }
      else
      {
        a3->field_0 = v22;
        a3->field_4 = v20 - a3->field_0;
      }
    }
  }
}

//----- (004CAC30) --------------------------------------------------------
void __cdecl sub_4CAC30(int2 *a1, float4 *a2, float2 *a3, int a4, int a5)
{
  int v5; // ecx
  int v6; // eax
  int v7; // eax
  double v8; // st7
  double v9; // st5
  double v10; // st7
  double v11; // st7
  double v12; // st7
  float v13; // [esp+8h] [ebp-2Ch]
  float v14; // [esp+14h] [ebp-20h]
  float v15; // [esp+18h] [ebp-1Ch]
  double v16; // [esp+1Ch] [ebp-18h]
  float v17; // [esp+24h] [ebp-10h]
  float v18; // [esp+2Ch] [ebp-8h]

  v5 = a4 + a1->field_4;
  v6 = a5 + a1->field_0;
  v17 = (double)(a1->field_0 + a4);
  v18 = (double)v6;
  v13 = (double)v5 - v17;
  v7 = sub_419A70(v13);
  if ( a2->field_8 == a2->field_0 )
  {
    a3->field_0 = a2->field_8;
    a3->field_4 = (double)v7 + a2->field_8;
  }
  else if ( a2->field_C == a2->field_4 )
  {
    a3->field_0 = a2->field_C - (double)v7;
    a3->field_4 = a2->field_C;
  }
  else
  {
    v8 = (a2->field_C - a2->field_4) / (a2->field_8 - a2->field_0);
    if ( v8 == 1.0 )
      v8 = 0.99000001;
    v9 = (double)v7;
    v15 = v9;
    v10 = sub_419AF0((v9 - (a2->field_4 - v8 * a2->field_0)) / (v8 - *(double *)&byte_581450[9512]));
    v11 = modf(v10, &v16);
    v14 = sub_419AF0(v11);
    v12 = sub_419AF0(v16);
    a3->field_0 = v12;
    if ( v14 <= *(double *)&byte_581450[9544] )
    {
      if ( v14 < *(double *)&byte_581450[9968] )
        a3->field_0 = v12 - 1.0;
    }
    else
    {
      a3->field_0 = v12 + 1.0;
    }
    if ( a3->field_0 >= (double)v17 )
    {
      if ( a3->field_0 > (double)v18 )
        a3->field_0 = v18;
      a3->field_4 = v15 + a3->field_0;
    }
    else
    {
      a3->field_0 = v17;
      a3->field_4 = v15 + a3->field_0;
    }
  }
}

//----- (004CADD0) --------------------------------------------------------
int sub_4CADD0()
{
  int result; // eax
  int v1; // esi
  _DWORD *v2; // eax

  result = *(_DWORD *)&byte_5D4594[1522584];
  if ( !*(_DWORD *)&byte_5D4594[1522584] )
  {
    v1 = 0;
    do
    {
      v2 = calloc(1u, 0x3Cu);
      if ( !v2 )
        exit(-1);
      ++v1;
      v2[4] = *(_DWORD *)&byte_5D4594[1522584];
      *(_DWORD *)&byte_5D4594[1522584] = v2;
      v2[2] = *(_DWORD *)&byte_5D4594[1522592];
      *(_DWORD *)&byte_5D4594[1522592] = v2;
    }
    while ( v1 < 10 );
    *(_DWORD *)&byte_5D4594[1522588] += 10;
    result = *(_DWORD *)&byte_5D4594[1522584];
  }
  *(_DWORD *)&byte_5D4594[1522584] = *(_DWORD *)(result + 16);
  return result;
}

//----- (004CAE40) --------------------------------------------------------
int __cdecl sub_4CAE40(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)(a1 + 16) = *(_DWORD *)&byte_5D4594[1522584];
  *(_DWORD *)&byte_5D4594[1522584] = a1;
  return result;
}

//----- (004CAE60) --------------------------------------------------------
int sub_4CAE60()
{
  int result; // eax
  int v1; // ecx

  result = *(_DWORD *)&byte_5D4594[1522592];
  v1 = 0;
  for ( *(_DWORD *)&byte_5D4594[1522584] = 0; result; result = *(_DWORD *)(result + 8) )
  {
    *(_DWORD *)(result + 16) = v1;
    v1 = result;
    *(_DWORD *)&byte_5D4594[1522584] = result;
  }
  return result;
}

//----- (004CAE90) --------------------------------------------------------
int __cdecl sub_4CAE90(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)(a1 + 12) = *(_DWORD *)&byte_5D4594[1522596];
  *(_DWORD *)&byte_5D4594[1522596] = a1;
  return result;
}

//----- (004CAEB0) --------------------------------------------------------
int sub_4CAEB0()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1522596];
  if ( *(_DWORD *)&byte_5D4594[1522596] )
    *(_DWORD *)&byte_5D4594[1522596] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1522596] + 12);
  return result;
}

//----- (004CAED0) --------------------------------------------------------
int __cdecl sub_4CAED0(int a1)
{
  int result; // eax

  result = sub_4CADD0();
  *(_DWORD *)(result + 24) = *(_DWORD *)(a1 + 24);
  *(_DWORD *)(result + 28) = *(_DWORD *)(a1 + 28);
  *(_DWORD *)(result + 32) = *(_DWORD *)(a1 + 32);
  *(_BYTE *)(result + 36) = *(_BYTE *)(a1 + 36);
  *(_DWORD *)(result + 40) = *(_DWORD *)(a1 + 40);
  *(_DWORD *)(result + 44) = *(_DWORD *)(a1 + 44);
  *(_BYTE *)(result + 48) = *(_BYTE *)(a1 + 48);
  *(_BYTE *)(result + 56) = *(_BYTE *)(a1 + 56);
  *(_DWORD *)(result + 20) = *(_DWORD *)(a1 + 20);
  return result;
}

//----- (004CAF10) --------------------------------------------------------
_DWORD *__cdecl sub_4CAF10(int a1, int a2, int a3, int a4, int a5, int a6, _DWORD *a7)
{
  int v7; // eax
  _DWORD *v8; // esi

  v7 = a7[2];
  if ( !(v7 & 0x1000) )
    return 0;
  v8 = sub_46C3E0(a1, a2 & 0xFFFFFFF7, a3, a4, a5, a6, sub_4CAF80);
  sub_4CAFB0((int)v8);
  if ( v8 )
  {
    if ( !a7[4] )
      a7[4] = v8;
    sub_46AF80((int)v8, a7);
  }
  return v8;
}

//----- (004CAF80) --------------------------------------------------------
int __cdecl sub_4CAF80(int a1, int a2, int a3, int a4)
{
  if ( a2 == 16416 && a3 >= 0 && a3 <= 100 )
    *(_DWORD *)(a1 + 32) = a3;
  return 0;
}

//----- (004CAFB0) --------------------------------------------------------
int __cdecl sub_4CAFB0(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
  {
    if ( (signed char)*(_BYTE *)(a1 + 4) >= 0 )
      result = sub_46B430((_DWORD *)a1, 0, sub_4CAFF0, 0);
    else
      result = sub_46B430((_DWORD *)a1, 0, sub_4CB1A0, 0);
  }
  return result;
}

//----- (004CAFF0) --------------------------------------------------------
int __cdecl sub_4CAFF0(_DWORD *a1, _DWORD *a2)
{
  int v2; // ecx
  int v3; // ebp
  int v4; // edi
  int v5; // edi
  int v6; // edi
  int v7; // ebp
  int xLeft; // [esp+10h] [ebp-98h]
  int yTop; // [esp+14h] [ebp-94h]
  int v11; // [esp+18h] [ebp-90h]
  int v12; // [esp+1Ch] [ebp-8Ch]
  int v13; // [esp+20h] [ebp-88h]
  int v14; // [esp+24h] [ebp-84h]
  wchar_t v15[64]; // [esp+28h] [ebp-80h]

  v2 = a2[17];
  v3 = a2[9];
  v14 = a2[7];
  v4 = a2[5];
  v11 = v2;
  sub_46AA60(a1, &xLeft, &yTop);
  if ( v4 != 0x80000000 )
  {
    sub_434460(v4);
    sub_49CE30(xLeft, yTop, a1[2], a1[3]);
  }
  if ( v3 != 0x80000000 )
  {
    v5 = a1[2] * a1[8] / 100;
    sub_434460(v3);
    sub_49CE30(xLeft, yTop, v5, a1[3]);
  }
  if ( v11 != 0x80000000 )
  {
    if ( (a1[1] & 0x2000) == 0x2000 )
      sub_43F670(1);
    nox_swprintf(v15, (const wchar_t *)&byte_587000[187476], a1[8]);
    sub_43F840(a2[50], v15, &v13, &v12, 64);
    v6 = xLeft + a1[2] / 2 - v13 / 2;
    v7 = a1[3] / 2 - v12 / 2 + yTop + 1;
    sub_434390(v11);
    sub_43FAF0(a2[50], v15, v6, v7, a1[2], 0);
    sub_43F670(0);
  }
  if ( v14 != 0x80000000 )
  {
    sub_434460(v14);
    sub_49CC70(xLeft, yTop, a1[2], a1[3]);
  }
  return 1;
}

//----- (004CB1A0) --------------------------------------------------------
int __cdecl sub_4CB1A0(_DWORD *a1, int a2)
{
  int v2; // ebx
  _DWORD *v3; // esi
  int v4; // edi
  int xLeft; // [esp+Ch] [ebp-8h]
  int yTop; // [esp+10h] [ebp-4h]

  v2 = *(_DWORD *)(a2 + 24);
  v3 = a1;
  sub_46AA60(a1, &xLeft, &yTop);
  sub_49F7F0();
  v4 = v3[2] * v3[8] / 100;
  sub_49F6F0(xLeft, yTop, v4, v3[3]);
  if ( v2 && v4 > 0 )
    sub_47D2C0(v2, xLeft, yTop);
  sub_49F860();
  return 1;
}

//----- (004CB230) --------------------------------------------------------
BOOL __cdecl sub_4CB230(const char *a1, char *lpFileName)
{
  char *v3; // eax
  struct _stat v4; // [esp+10h] [ebp-24h]

  strcpy(lpFileName, "movies\\");
  strcat(lpFileName, a1);
  if ( !_stat(lpFileName, (int)&v4) )
    return 1;
  v3 = sub_413890();
  if ( !v3 )
    return 0;
  strcpy(lpFileName, v3);
  strcat(lpFileName, "movies\\");
  strcat(lpFileName, a1);
  return _stat(lpFileName, (int)&v4) == 0;
}

//----- (004CB330) --------------------------------------------------------
_DWORD *sub_4CB330()
{
  _DWORD *v0; // eax
  int v1; // ecx
  unsigned int v2; // ecx
  _DWORD *v3; // eax
  int v4; // ecx
  unsigned int v5; // ecx
  _DWORD *v6; // eax
  int v7; // ecx
  unsigned int v8; // ecx
  _DWORD *v9; // eax
  int v10; // ecx
  unsigned int v11; // ecx
  _DWORD *v12; // eax
  int v13; // ecx
  unsigned int v14; // ecx
  _DWORD *v15; // eax
  int v16; // ecx
  unsigned int v17; // ecx
  _DWORD *v18; // eax
  int v19; // ecx
  unsigned int v20; // ecx
  _DWORD *v21; // eax
  int v22; // ecx
  unsigned int v23; // ecx
  _DWORD *v24; // eax
  int v25; // ecx
  unsigned int v26; // ecx
  _DWORD *v27; // eax
  int v28; // ecx
  unsigned int v29; // ecx
  _DWORD *v30; // eax
  int v31; // ecx
  unsigned int v32; // ecx
  _DWORD *v33; // eax
  int v34; // ecx
  unsigned int v35; // ecx
  _DWORD *v36; // eax
  int v37; // ecx
  unsigned int v38; // ecx
  _DWORD *result; // eax
  int v40; // ecx

  v0 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2010);
  v1 = v0[9];
  if ( *(_DWORD *)&byte_5D4594[805868] )
    v2 = v1 | 4;
  else
    v2 = v1 & 0xFFFFFFFB;
  v0[9] = v2;
  v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2012);
  v4 = v3[9];
  if ( byte_5D4594[2650637] & 4 )
    v5 = v4 | 4;
  else
    v5 = v4 & 0xFFFFFFFB;
  v3[9] = v5;
  v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2020);
  v7 = v6[9];
  if ( *(_DWORD *)&byte_587000[80812] )
    v8 = v7 | 4;
  else
    v8 = v7 & 0xFFFFFFFB;
  v6[9] = v8;
  v9 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2021);
  v10 = v9[9];
  if ( *(_DWORD *)&byte_5D4594[805844] )
    v11 = v10 | 4;
  else
    v11 = v10 & 0xFFFFFFFB;
  v9[9] = v11;
  v12 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2022);
  v13 = v12[9];
  if ( *(_DWORD *)&byte_587000[80820] )
    v14 = v13 | 4;
  else
    v14 = v13 & 0xFFFFFFFB;
  v12[9] = v14;
  v15 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2031);
  v16 = v15[9];
  if ( *(_DWORD *)&byte_587000[154952] )
    v17 = v16 | 4;
  else
    v17 = v16 & 0xFFFFFFFB;
  v15[9] = v17;
  v18 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2032);
  v19 = v18[9];
  if ( *(_DWORD *)&byte_5D4594[1193152] )
    v20 = v19 | 4;
  else
    v20 = v19 & 0xFFFFFFFB;
  v18[9] = v20;
  v21 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2014);
  v22 = v21[9];
  if ( *(_DWORD *)&byte_587000[80824] )
    v23 = v22 | 4;
  else
    v23 = v22 & 0xFFFFFFFB;
  v21[9] = v23;
  v24 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2015);
  v25 = v24[9];
  if ( *(_DWORD *)&byte_5D4594[805852] )
    v26 = v25 | 4;
  else
    v26 = v25 & 0xFFFFFFFB;
  v24[9] = v26;
  v27 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2040);
  v28 = v27[9];
  if ( *(_DWORD *)&byte_587000[80828] )
    v29 = v28 | 4;
  else
    v29 = v28 & 0xFFFFFFFB;
  v27[9] = v29;
  v30 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2016);
  v31 = v30[9];
  if ( *(_DWORD *)&byte_587000[80836] )
    v32 = v31 | 4;
  else
    v32 = v31 & 0xFFFFFFFB;
  v30[9] = v32;
  v33 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2017);
  v34 = v33[9];
  if ( *(_DWORD *)&byte_587000[80840] )
    v35 = v34 | 4;
  else
    v35 = v34 & 0xFFFFFFFB;
  v33[9] = v35;
  v36 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2041);
  v37 = v36[9];
  if ( *(_DWORD *)&byte_587000[80844] )
    v38 = v37 | 4;
  else
    v38 = v37 & 0xFFFFFFFB;
  v36[9] = v38;
  result = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522600], 2033);
  v40 = result[9];
  if ( *(_DWORD *)&byte_587000[154960] )
    result[9] = v40 | 4;
  else
    result[9] = v40 & 0xFFFFFFFB;
  return result;
}

//----- (004CB590) --------------------------------------------------------
int __cdecl sub_4CB590(int a1)
{
  *(_DWORD *)&byte_5D4594[1522600] = sub_4A0AD0((const char *)&byte_587000[187504], sub_4CB5D0);
  sub_46B120(*(_DWORD **)&byte_5D4594[1522600], a1);
  sub_46A8A0();
  sub_4CB330();
  return 1;
}

//----- (004CB5D0) --------------------------------------------------------
int __cdecl sub_4CB5D0(int a1, int a2, int *a3, int a4)
{
  int v3; // esi
  int v4; // eax
  int result; // eax
  int v6; // ecx
  unsigned int v7; // ecx
  int v8; // eax

  if ( a2 == 16389 )
  {
    sub_452D80(920, 100);
    result = 1;
  }
  else if ( a2 == 16391 )
  {
    v3 = sub_46B0A0(a3);
    sub_452D80(766, 100);
    switch ( v3 )
    {
      case 2010:
        *(_DWORD *)&byte_5D4594[805868] = sub_48A1D0(1 - *(_DWORD *)&byte_5D4594[805868]);
        v6 = *(_DWORD *)(a1 + 36);
        if ( *(_DWORD *)&byte_5D4594[805868] )
          v7 = v6 | 4;
        else
          v7 = v6 & 0xFFFFFFFB;
        *(_DWORD *)(a1 + 36) = v7;
        result = 0;
        break;
      case 2012:
        *(_DWORD *)&byte_5D4594[2650636] ^= 0x400u;
        result = 0;
        break;
      case 2014:
        *(_DWORD *)&byte_587000[80824] = 1 - *(_DWORD *)&byte_587000[80824];
        result = 0;
        break;
      case 2015:
        result = 0;
        *(_DWORD *)&byte_5D4594[805852] = 1 - *(_DWORD *)&byte_5D4594[805852];
        break;
      case 2016:
        result = 0;
        *(_DWORD *)&byte_587000[80836] = 1 - *(_DWORD *)&byte_587000[80836];
        break;
      case 2017:
        *(_DWORD *)&byte_587000[80840] = 1 - *(_DWORD *)&byte_587000[80840];
        result = 0;
        break;
      case 2020:
        *(_DWORD *)&byte_587000[80812] = 1 - *(_DWORD *)&byte_587000[80812];
        sub_49B3C0();
        result = 0;
        break;
      case 2021:
        result = 0;
        *(_DWORD *)&byte_5D4594[805844] = 1 - *(_DWORD *)&byte_5D4594[805844];
        break;
      case 2022:
        *(_DWORD *)&byte_587000[80820] = 1 - *(_DWORD *)&byte_587000[80820];
        result = 0;
        break;
      case 2031:
        result = 0;
        *(_DWORD *)&byte_587000[154952] = 1 - *(_DWORD *)&byte_587000[154952];
        break;
      case 2032:
        result = 0;
        *(_DWORD *)&byte_5D4594[1193152] = 1 - *(_DWORD *)&byte_5D4594[1193152];
        break;
      case 2033:
        *(_DWORD *)&byte_587000[154960] = 1 - *(_DWORD *)&byte_587000[154960];
        *(_DWORD *)&byte_587000[154956] = *(_DWORD *)&byte_587000[154960];
        sub_481420();
        *(_DWORD *)&byte_5D4594[1193156] = 0;
        result = 0;
        break;
      case 2040:
        v8 = 1 - *(_DWORD *)&byte_587000[80828];
        *(_DWORD *)&byte_587000[80828] = v8;
        *(_DWORD *)&byte_587000[80832] = v8;
        result = 0;
        break;
      case 2041:
        *(_DWORD *)&byte_587000[80844] = 1 - *(_DWORD *)&byte_587000[80844];
        goto LABEL_23;
      case 2099:
        sub_4445C0();
        sub_4CB330();
        v4 = *(_DWORD *)(a1 + 396);
        if ( !v4 )
          goto LABEL_23;
        sub_46B490(v4, 16391, (int)a3, 0);
        result = 0;
        break;
      default:
        goto LABEL_23;
    }
  }
  else
  {
LABEL_23:
    result = 0;
  }
  return result;
}

//----- (004CB880) --------------------------------------------------------
int sub_4CB880()
{
  int result; // eax
  _DWORD **v1; // eax
  _DWORD *v2; // esi
  _DWORD *v3; // esi
  int v4; // esi
  int v5; // edi
  _DWORD *v6; // eax
  int v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // eax

  sub_43BDD0(900);
  result = sub_4A0AD0((const char *)&byte_587000[187520], sub_4CBE70);
  *(_DWORD *)&byte_5D4594[1522604] = result;
  if ( result )
  {
    sub_46B300(result, sub_4A18E0);
    result = sub_43C5B0(*(_DWORD **)&byte_5D4594[1522604], 0, 0, 0, -480, 0, 20, 0, -40);
    *(_DWORD *)&byte_5D4594[1522608] = result;
    if ( result )
    {
      *(_DWORD *)result = 900;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1522608] + 48) = sub_4CBB70;
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1522608] + 56) = sub_4CBBB0;
      *(_DWORD *)&byte_5D4594[1522616] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], 910);
      *(_DWORD *)&byte_5D4594[1522620] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], 911);
      *(_DWORD *)&byte_5D4594[1522624] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], 912);
      *(_DWORD *)&byte_5D4594[1522628] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], 913);
      result = *(_DWORD *)&byte_5D4594[1522616];
      if ( *(_DWORD *)&byte_5D4594[1522616] )
      {
        v1 = *(_DWORD ***)(*(_DWORD *)&byte_5D4594[1522616] + 32);
        *v1[7] = 921;
        *v1[8] = 922;
        *v1[9] = 920;
        sub_46B2C0(*(int *)&byte_5D4594[1522616], sub_4CBF60);
        sub_46B120(*(_DWORD **)&byte_5D4594[1522620], *(int *)&byte_5D4594[1522616]);
        sub_46B120(*(_DWORD **)&byte_5D4594[1522624], *(int *)&byte_5D4594[1522616]);
        sub_46B120(*(_DWORD **)&byte_5D4594[1522628], *(int *)&byte_5D4594[1522616]);
        sub_46B300(*(int *)&byte_5D4594[1522624], sub_4CC140);
        sub_46B300(*(int *)&byte_5D4594[1522628], sub_4CC140);
        v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], 921);
        sub_46B490(*(int *)&byte_5D4594[1522620], 16408, (int)v2, 0);
        sub_46B490(*(int *)&byte_5D4594[1522624], 16408, (int)v2, 0);
        sub_46B490(*(int *)&byte_5D4594[1522628], 16408, (int)v2, 0);
        v3 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], 922);
        sub_46B490(*(int *)&byte_5D4594[1522620], 16409, (int)v3, 0);
        sub_46B490(*(int *)&byte_5D4594[1522624], 16409, (int)v3, 0);
        sub_46B490(*(int *)&byte_5D4594[1522628], 16409, (int)v3, 0);
        sub_4CBBF0();
        v4 = 971;
        v5 = sub_47DBC0() + 971;
        if ( v5 > 971 )
        {
          do
          {
            v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], v4);
            sub_46ABB0((int)v6, 1);
            ++v4;
          }
          while ( v4 < v5 );
        }
        v7 = sub_430AF0();
        v8 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], v7 + 971);
        sub_46B490((int)v8, 16392, 1, 0);
        *(_DWORD *)&byte_5D4594[1522612] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], 980);
        sub_46B120(*(_DWORD **)&byte_5D4594[1522612], 0);
        sub_46B2C0(*(int *)&byte_5D4594[1522612], sub_4CBE70);
        sub_46B300(*(int *)&byte_5D4594[1522612], sub_4CC170);
        sub_46AC00(*(int *)&byte_5D4594[1522612], 1);
        v9 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522612], 981);
        sub_46AEE0((int)v9, (int)&byte_5D4594[1522636]);
        result = 1;
      }
    }
  }
  return result;
}
// 4A18E0: using guessed type int __cdecl sub_4A18E0(int, int, int, int);

//----- (004CBB70) --------------------------------------------------------
int sub_4CBB70()
{
  sub_4CBD30();
  sub_433290((char *)&byte_587000[187536]);
  *(_BYTE *)(*(_DWORD *)&byte_5D4594[1522608] + 64) = 2;
  sub_43BE40(2);
  sub_452D80(923, 100);
  return 1;
}

//----- (004CBBB0) --------------------------------------------------------
int sub_4CBBB0()
{
  void (*v0)(void); // esi

  v0 = *(void (**)(void))(*(_DWORD *)&byte_5D4594[1522608] + 52);
  sub_43C570(*(LPVOID *)&byte_5D4594[1522608]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1522604]);
  sub_46C4E0(*(_DWORD **)&byte_5D4594[1522612]);
  v0();
  return 1;
}

//----- (004CBBF0) --------------------------------------------------------
char *sub_4CBBF0()
{
  char *result; // eax
  int *v1; // esi
  char *v2; // edi
  char *v3; // ebx

  sub_46B490(*(int *)&byte_5D4594[1522616], 16399, 0, 0);
  sub_46B490(*(int *)&byte_5D4594[1522620], 16399, 0, 0);
  sub_46B490(*(int *)&byte_5D4594[1522624], 16399, 0, 0);
  sub_46B490(*(int *)&byte_5D4594[1522628], 16399, 0, 0);
  result = *(char **)&byte_587000[75892];
  if ( *(_DWORD *)&byte_587000[75892] )
  {
    v1 = (int *)&byte_587000[75896];
    do
    {
      if ( *v1 != 44 )
      {
        sub_46B490(*(int *)&byte_5D4594[1522620], 16397, v1[1], -1);
        sub_46B490(*(int *)&byte_5D4594[1522616], 16397, (int)&byte_587000[187544], -1);
        v2 = sub_42E8E0(*v1, 1);
        v3 = sub_42E8E0(*v1, 2);
        if ( v2 && *(_WORD *)v2 )
          sub_46B490(*(int *)&byte_5D4594[1522624], 16397, (int)v2, -1);
        else
          sub_46B490(*(int *)&byte_5D4594[1522624], 16397, (int)&byte_587000[187548], -1);
        if ( v3 && *(_WORD *)v3 && v2 != v3 )
          sub_46B490(*(int *)&byte_5D4594[1522628], 16397, (int)v3, -1);
        else
          sub_46B490(*(int *)&byte_5D4594[1522628], 16397, (int)&byte_587000[187552], -1);
      }
      result = (char *)v1[2];
      v1 += 3;
    }
    while ( result );
  }
  return result;
}

//----- (004CBD30) --------------------------------------------------------
char *sub_4CBD30()
{
  int v0; // ebp
  int i; // esi
  wchar_t *v2; // eax
  int v3; // edi
  wchar_t *v4; // eax
  char *v5; // ebx
  wchar_t *v6; // eax
  char *v7; // eax
  wchar_t *v8; // eax
  int v9; // esi
  wchar_t *v10; // eax
  char *result; // eax
  char v12[256]; // [esp+8h] [ebp-100h]

  v0 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1522620] + 32);
  sub_42CD90();
  for ( i = 0; i < *(__int16 *)(v0 + 44); ++i )
  {
    v2 = (wchar_t *)sub_46B490(*(int *)&byte_5D4594[1522620], 16406, i, 0);
    v3 = sub_42EA40(v2);
    v4 = (wchar_t *)sub_46B490(*(int *)&byte_5D4594[1522624], 16406, i, 0);
    v5 = sub_42E960(v4);
    v6 = (wchar_t *)sub_46B490(*(int *)&byte_5D4594[1522628], 16406, i, 0);
    v7 = sub_42E960(v6);
    if ( v7 )
    {
      nox_sprintf(v12, (const char *)&byte_587000[187556], v7, v3);
      sub_42CF50(v12);
    }
    if ( v5 )
    {
      nox_sprintf(v12, (const char *)&byte_587000[187564], v5, v3);
      sub_42CF50(v12);
    }
  }
  v8 = sub_40F1D0((char *)&byte_587000[187620], 0, (const char *)&byte_587000[187572], 192);
  v9 = sub_42EA40(v8);
  v10 = sub_40F1D0((char *)&byte_587000[187696], 0, (const char *)&byte_587000[187648], 193);
  result = sub_42E960(v10);
  if ( result )
  {
    nox_sprintf(v12, (const char *)&byte_587000[187708], result, v9);
    result = (char *)sub_42CF50(v12);
  }
  return result;
}

//----- (004CBE70) --------------------------------------------------------
int __cdecl sub_4CBE70(int a1, int a2, int *a3, int a4)
{
  int v3; // esi
  int result; // eax

  if ( a2 == 23 )
    return 1;
  if ( a2 != 16391 )
    return 0;
  v3 = sub_46B0A0(a3);
  sub_452D80(921, 100);
  switch ( v3 )
  {
    case 931:
      sub_42CD90();
      sub_4317B0((char *)&byte_587000[187716], 1);
      sub_4CBBF0();
      result = 0;
      break;
    case 932:
      sub_4CBD30();
      result = 0;
      break;
    case 933:
      sub_4CBF40();
      result = 0;
      break;
    case 971:
    case 972:
    case 973:
      sub_430AA0(v3 - 971);
      return 0;
    default:
      return 0;
  }
  return result;
}

//----- (004CBF40) --------------------------------------------------------
char *sub_4CBF40()
{
  sub_42CD90();
  sub_4317B0((char *)&byte_587000[187724], 1);
  return sub_4CBBF0();
}

//----- (004CBF60) --------------------------------------------------------
int __cdecl sub_4CBF60(int a1, unsigned int a2, int a3, int a4)
{
  int v5; // eax
  wchar_t *v6; // eax
  int v7; // esi
  int v8; // esi
  int v9; // [esp-4h] [ebp-10h]

  if ( a2 > 0x4007 )
  {
    if ( a2 == 16393 )
    {
      v7 = *(_DWORD *)(a1 + 32);
      sub_4A30D0(a1, 0x4009u, (wchar_t *)a3, a4);
      v8 = sub_4A4800(v7);
      sub_46B490(*(int *)&byte_5D4594[1522620], 16412, v8, 0);
      sub_46B490(*(int *)&byte_5D4594[1522624], 16412, v8, 0);
      sub_46B490(*(int *)&byte_5D4594[1522628], 16412, v8, 0);
    }
    else if ( a2 == 16400 )
    {
      v5 = *(_DWORD *)(a3 + 32);
      if ( (int)*(_DWORD *)(v5 + 48) >= 0 )
      {
        *(_DWORD *)&byte_5D4594[1522632] = a3;
        v9 = sub_46B490(*(int *)&byte_5D4594[1522620], 16406, *(_DWORD *)(v5 + 48), 0);
        v6 = sub_40F1D0((char *)&byte_587000[187784], 0, (const char *)&byte_587000[187736], 424);
        nox_swprintf((wchar_t *)&byte_5D4594[1522636], (const wchar_t *)&byte_587000[187808], v6, v9);
        sub_46A8C0(*(int *)&byte_5D4594[1522612]);
        sub_46B500(*(int *)&byte_5D4594[1522612]);
        sub_46C690(*(int *)&byte_5D4594[1522612]);
        return sub_4A30D0(a1, 0x4010u, (wchar_t *)a3, a4);
      }
    }
  }
  else
  {
    if ( a2 != 16391 )
    {
      if ( a2 == 23 )
        return 1;
      if ( a2 != 0x4000 )
        return sub_4A30D0(a1, a2, (wchar_t *)a3, a4);
    }
    if ( (_DWORD *)a3 == sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], 921)
      || (_DWORD *)a3 == sub_46B0C0(*(_DWORD **)&byte_5D4594[1522604], 922) )
    {
      sub_46B490(*(int *)&byte_5D4594[1522620], a2, a3, 0);
      sub_46B490(*(int *)&byte_5D4594[1522624], a2, a3, 0);
      sub_46B490(*(int *)&byte_5D4594[1522628], a2, a3, 0);
      return sub_4A30D0(a1, a2, (wchar_t *)a3, a4);
    }
  }
  return sub_4A30D0(a1, a2, (wchar_t *)a3, a4);
}

//----- (004CC140) --------------------------------------------------------
int __cdecl sub_4CC140(_DWORD *a1, unsigned int a2, unsigned int a3, int a4)
{
  int result; // eax

  if ( a2 < 0x13 || a2 > 0x14 )
    result = sub_4A28E0(a1, a2, a3, a4);
  else
    result = 0;
  return result;
}

//----- (004CC170) --------------------------------------------------------
int __cdecl sub_4CC170(int a1, int a2, char *a3, int a4)
{
  int result; // eax

  switch ( a2 )
  {
    case 6:
    case 7:
      goto LABEL_10;
    case 10:
    case 11:
      sub_4CC3C0((char *)0x10002);
      goto LABEL_15;
    case 14:
    case 15:
      sub_4CC3C0((char *)0x10001);
      goto LABEL_15;
    case 19:
      sub_4CC3C0((char *)0x10003);
      goto LABEL_15;
    case 20:
      sub_4CC3C0((char *)0x10004);
      goto LABEL_15;
    case 21:
      if ( a3 == (char *)1 )
      {
        if ( a4 == 2 )
        {
          sub_46B500(0);
          sub_46C6E0(*(int *)&byte_5D4594[1522612]);
          sub_46AC00(*(int *)&byte_5D4594[1522612], 1);
          if ( *(_DWORD *)&byte_5D4594[1522632] )
            sub_46B490(*(int *)&byte_5D4594[1522632], 16403, -1, 0);
        }
        result = 1;
      }
      else if ( a4 == 1 && sub_4CC280(a3) )
      {
LABEL_10:
        sub_4CC3C0((char *)0x10000);
LABEL_15:
        sub_46B500(0);
        sub_46C6E0(*(int *)&byte_5D4594[1522612]);
        sub_46AC00(*(int *)&byte_5D4594[1522612], 1);
        result = 1;
      }
      else
      {
LABEL_5:
        result = 0;
      }
      return result;
    default:
      goto LABEL_5;
  }
}

//----- (004CC280) --------------------------------------------------------
int __cdecl sub_4CC280(char *a1)
{
  int v1; // ecx
  unsigned __int8 *v2; // eax
  int v3; // esi
  int v4; // ecx
  const wchar_t *v6; // edi
  int v7; // esi
  int v8; // ebx
  const wchar_t *v9; // eax
  int v10; // esi
  int v11; // ebx
  const wchar_t *v12; // eax

  v1 = 0;
  if ( *(_DWORD *)&byte_587000[73672] )
  {
    v2 = &byte_587000[73672];
    do
    {
      if ( *((char **)v2 + 1) == a1 )
        break;
      v3 = *((_DWORD *)v2 + 4);
      v2 += 16;
      ++v1;
    }
    while ( v3 );
  }
  v4 = 16 * v1;
  if ( !*(_DWORD *)&byte_587000[v4 + 73672] )
    return 0;
  v6 = *(const wchar_t **)&byte_587000[v4 + 73684];
  if ( *(_DWORD *)&byte_5D4594[1522632] )
  {
    v7 = 0;
    v8 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1522624] + 32);
    if ( *(_WORD *)(v8 + 44) > 0 )
    {
      do
      {
        v9 = (const wchar_t *)sub_46B490(*(int *)&byte_5D4594[1522624], 16406, v7, 0);
        if ( !nox_wcscmp(v9, v6) )
          sub_46B490(*(int *)&byte_5D4594[1522624], 16407, (int)&byte_587000[187824], v7);
        ++v7;
      }
      while ( v7 < *(__int16 *)(v8 + 44) );
    }
    v10 = 0;
    v11 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1522628] + 32);
    if ( *(_WORD *)(v11 + 44) > 0 )
    {
      do
      {
        v12 = (const wchar_t *)sub_46B490(*(int *)&byte_5D4594[1522628], 16406, v10, 0);
        if ( !nox_wcscmp(v12, v6) )
          sub_46B490(*(int *)&byte_5D4594[1522628], 16407, (int)&byte_587000[187828], v10);
        ++v10;
      }
      while ( v10 < *(__int16 *)(v11 + 44) );
    }
    sub_46B490(
      *(int *)&byte_5D4594[1522632],
      16407,
      (int)v6,
      *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1522632] + 32) + 48));
    sub_46B490(*(int *)&byte_5D4594[1522632], 16403, -1, 0);
    *(_DWORD *)&byte_5D4594[1522632] = 0;
  }
  return 1;
}

//----- (004CC3C0) --------------------------------------------------------
int __cdecl sub_4CC3C0(char *a1)
{
  char *v1; // edi
  int v2; // esi
  int v3; // ebx
  const wchar_t *v4; // eax
  int v5; // esi
  int v6; // ebx
  const wchar_t *v7; // eax

  v1 = sub_42EA00(a1);
  if ( !*(_DWORD *)&byte_5D4594[1522632] )
    return 1;
  v2 = 0;
  v3 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1522624] + 32);
  if ( *(_WORD *)(v3 + 44) > 0 )
  {
    do
    {
      v4 = (const wchar_t *)sub_46B490(*(int *)&byte_5D4594[1522624], 16406, v2, 0);
      if ( !nox_wcscmp(v4, (const wchar_t *)v1) )
        sub_46B490(*(int *)&byte_5D4594[1522624], 16407, (int)&byte_587000[187832], v2);
      ++v2;
    }
    while ( v2 < *(__int16 *)(v3 + 44) );
  }
  v5 = 0;
  v6 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1522628] + 32);
  if ( *(_WORD *)(v6 + 44) > 0 )
  {
    do
    {
      v7 = (const wchar_t *)sub_46B490(*(int *)&byte_5D4594[1522628], 16406, v5, 0);
      if ( !nox_wcscmp(v7, (const wchar_t *)v1) )
        sub_46B490(*(int *)&byte_5D4594[1522628], 16407, (int)&byte_587000[187836], v5);
      ++v5;
    }
    while ( v5 < *(__int16 *)(v6 + 44) );
  }
  sub_46B490(
    *(int *)&byte_5D4594[1522632],
    16407,
    (int)v1,
    *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1522632] + 32) + 48));
  sub_46B490(*(int *)&byte_5D4594[1522632], 16403, -1, 0);
  *(_DWORD *)&byte_5D4594[1522632] = 0;
  return 1;
}

//----- (004CC4E0) --------------------------------------------------------
int sub_4CC4E0()
{
  _DWORD *v0; // esi
  int v1; // eax
  _DWORD *v2; // esi
  wchar_t *v3; // eax
  _DWORD *v4; // esi
  _DWORD *v5; // eax
  _DWORD *v6; // eax
  unsigned __int16 *v8; // [esp-10h] [ebp-28h]
  int v9; // [esp+4h] [ebp-14h]
  char v10[16]; // [esp+8h] [ebp-10h]

  *(_DWORD *)&byte_5D4594[1522892] = sub_4A0AD0((const char *)&byte_587000[187840], sub_4CC6A0);
  sub_46B430(*(_DWORD **)&byte_5D4594[1522892], sub_4CC660, 0, 0);
  sub_46A8C0(*(int *)&byte_5D4594[1522892]);
  v0 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522892], 9980);
  v8 = (unsigned __int16 *)sub_46AF00((int)v0);
  v1 = sub_46AF40((int)v0);
  sub_43F840(v1, v8, 0, &v9, 640);
  sub_46A9B0(v0, 0, 477 - v9);
  v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522892], 9999);
  v3 = sub_401020();
  sub_46B490((int)v2, 16385, (int)v3, 0);
  v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522892], 9998);
  if ( !sub_4145F0(v10) )
    v10[0] = 0;
  nox_swprintf((wchar_t *)&byte_5D4594[1522896], (const wchar_t *)&byte_587000[187852], v10);
  sub_46B490((int)v4, 16385, (int)&byte_5D4594[1522896], 0);
  v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522892], 9970);
  sub_46B340((int)v5, sub_4CC6F0);
  *(_WORD *)&byte_5D4594[1522928] = 300;
  sub_46A8A0();
  if ( sub_40A5C0(0x2000000) )
  {
    v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522892], 9901);
    sub_46B490(*(int *)&byte_5D4594[1522892], 16391, (int)v6, 0);
  }
  sub_43D9B0(14, 100);
  return 1;
}

//----- (004CC660) --------------------------------------------------------
int __cdecl sub_4CC660(_DWORD *a1, int a2, int a3, int a4)
{
  if ( *(_WORD *)&byte_5D4594[1522928] <= 270 )
  {
    if ( a2 != 21 )
      return 0;
    if ( a4 == 2 )
    {
      sub_46C4E0(a1);
      sub_4A1C00();
    }
  }
  return 1;
}

//----- (004CC6A0) --------------------------------------------------------
int __cdecl sub_4CC6A0(_DWORD *a1, int a2, int *a3, int a4)
{
  if ( *(_WORD *)&byte_5D4594[1522928] <= 270 )
  {
    if ( a2 != 16391 )
      return 0;
    if ( sub_46B0A0(a3) == 9901 )
    {
      sub_46C4E0(a1);
      sub_4A1C00();
    }
  }
  return 1;
}

//----- (004CC6F0) --------------------------------------------------------
int sub_4CC6F0(int a1, int a2)
{
  _DWORD *v0; // eax

  if ( --*(short *)&byte_5D4594[1522928] < 0 )
  {
    sub_46C4E0(*(_DWORD **)&byte_5D4594[1522892]);
    sub_4A1C00();
  }
  if ( *(short *)&byte_5D4594[1522928] < 270 )
  {
    v0 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522892], 9910);
    sub_46AC00((int)v0, 0);
  }
  sub_4343B0(150, 150, 150);
  sub_43F6E0(0, (__int16 *)&byte_587000[187860], 500, 150);
  return 1;
}

//----- (004CC770) --------------------------------------------------------
int sub_4CC770()
{
  int v0; // ecx
  int v1; // eax
  int v3; // [esp+0h] [ebp-14h]
  int v4; // [esp+4h] [ebp-10h]
  int v5; // [esp+8h] [ebp-Ch]
  int v6; // [esp+Ch] [ebp-8h]
  int v7; // [esp+10h] [ebp-4h]

  *(_DWORD *)&byte_5D4594[1522932] = sub_4A0AD0((const char *)&byte_587000[187868], sub_4CC890);
  sub_46B430(*(_DWORD **)&byte_5D4594[1522932], sub_4CC830, 0, 0);
  sub_43BEB0(&v3, &v4, &v7);
  sub_430C50(&v5, &v6);
  v0 = v3;
  if ( v3 > v5 )
  {
    v0 = v5;
    v3 = v5;
  }
  v1 = v4;
  if ( v4 > v6 )
  {
    v1 = v6;
    v4 = v6;
  }
  sub_46A9B0(*(_DWORD **)&byte_5D4594[1522932], (v0 - 1024) / 2, (v1 - 768) / 2);
  sub_46A8C0(*(int *)&byte_5D4594[1522932]);
  sub_46A8A0();
  return 1;
}

//----- (004CC830) --------------------------------------------------------
int __cdecl sub_4CC830(int a1, int a2, int a3, int a4)
{
  if ( a2 != 21 )
    return 0;
  if ( a3 != 1 )
    return 0;
  if ( a4 == 2 )
  {
    sub_452D80(231, 100);
    sub_4CC930();
    sub_409D70((char *)&byte_5D4594[1522936]);
    sub_4ABA90();
    sub_4AB560(0);
    sub_4AB570(0);
    sub_40A540(9437184);
  }
  return 1;
}

//----- (004CC890) --------------------------------------------------------
int __cdecl sub_4CC890(int a1, int a2, int *a3, int a4)
{
  int v3; // esi

  if ( a2 != 16391 )
    return 0;
  v3 = sub_46B0A0(a3);
  sub_452D80(766, 100);
  if ( v3 != 1601 )
    return 0;
  sub_4CC930();
  sub_4ABA90();
  sub_409D70((char *)&byte_5D4594[1522940]);
  sub_4AB560(0);
  sub_4AB570(0);
  sub_40A540(9437184);
  return 1;
}

//----- (004CC900) --------------------------------------------------------
int __cdecl sub_4CC900(unsigned __int8 a1)
{
  _DWORD *v1; // eax

  v1 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1522932], 1603);
  return sub_46B490((int)v1, 16416, a1, 0);
}

//----- (004CC930) --------------------------------------------------------
int sub_4CC930()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1522932];
  if ( *(_DWORD *)&byte_5D4594[1522932] )
    result = sub_46C4E0(*(_DWORD **)&byte_5D4594[1522932]);
  *(_DWORD *)&byte_5D4594[1522932] = 0;
  return result;
}

//----- (004CC950) --------------------------------------------------------
int __cdecl sub_4CC950(int a1, int a2)
{
  int v2; // ebp
  int v3; // esi
  int v4; // eax
  char v5; // bl
  int v6; // eax
  int v7; // esi
  int v9; // [esp+0h] [ebp-4h]

  if ( !*(_DWORD *)&byte_5D4594[1522952] )
  {
    *(_DWORD *)&byte_5D4594[1522952] = sub_44CFC0((CHAR *)&byte_587000[187880]);
    *(_DWORD *)&byte_5D4594[1522944] = sub_4344A0(200, 200, 200);
    *(_DWORD *)&byte_5D4594[1522948] = sub_4344A0(255, 255, 255);
  }
  v2 = *(_DWORD *)&byte_5D4594[1522944];
  v3 = *(_DWORD *)&byte_5D4594[1522952];
  v9 = *(_DWORD *)&byte_5D4594[1522948];
  v4 = sub_415FF0(0, 255, (const char *)&byte_587000[187896], 54);
  v5 = v4;
  v6 = sub_45A360(
         v3,
         *(_DWORD *)(a2 + 12) + 50 * *(int *)&byte_587000[8 * v4 + 192088] / 16,
         *(_DWORD *)(a2 + 16) + 50 * *(int *)&byte_587000[8 * v4 + 192092] / 16);
  v7 = v6;
  if ( v6 )
  {
    *(_BYTE *)(v6 + 448) = v5;
    *(_WORD *)(a2 + 104) = 0;
    *(_BYTE *)(v6 + 449) = sub_415FF0(2, 3, (const char *)&byte_587000[187948], 74);
    if ( sub_415FF0(0, 100, (const char *)&byte_587000[188000], 75) > 50 )
      *(_BYTE *)(v7 + 449) = -*(_BYTE *)(v7 + 449);
    *(_BYTE *)(v7 + 451) = 1;
    *(_BYTE *)(v7 + 450) = 50;
    *(_DWORD *)(v7 + 440) = *(_DWORD *)(a2 + 12);
    *(_DWORD *)(v7 + 444) = *(_DWORD *)(a2 + 16);
    *(_DWORD *)(v7 + 432) = v2;
    *(_DWORD *)(v7 + 436) = v9;
    sub_45A110((_DWORD *)v7);
    sub_49BAB0((_DWORD *)v7);
  }
  return 1;
}

//----- (004CCAC0) --------------------------------------------------------
int __cdecl sub_4CCAC0(int a1, _DWORD *a2)
{
  unsigned int v2; // ebx
  _DWORD *v3; // ebp
  int v4; // edi
  int v5; // esi
  int v6; // eax
  int v7; // eax
  int v8; // esi
  __int16 v9; // cx
  unsigned int v10; // edi
  unsigned __int8 *v11; // esi
  __int16 v12; // cx
  float v14; // [esp+0h] [ebp-20h]
  int i; // [esp+14h] [ebp-Ch]
  __int16 v16; // [esp+18h] [ebp-8h]
  __int16 v17; // [esp+1Ah] [ebp-6h]
  unsigned int v18; // [esp+1Ch] [ebp-4h]
  int v19; // [esp+28h] [ebp+8h]

  v14 = sub_419D40(&byte_587000[188052]);
  v2 = sub_419A70(v14);
  if ( !*(_DWORD *)&byte_5D4594[1522956] )
  {
    *(_DWORD *)&byte_5D4594[1522956] = sub_44CFC0((CHAR *)&byte_587000[188072]);
    *(_DWORD *)&byte_5D4594[1522960] = sub_44CFC0((CHAR *)&byte_587000[188084]);
  }
  v3 = a2;
  v19 = 20;
  v4 = v2 >> 2;
  v18 = v2 >> 4;
  for ( i = v2 >> 2; ; v4 = i )
  {
    v5 = v4 + sub_415FF0(0, v2, (const char *)&byte_587000[188096], 63);
    if ( v5 > (int)v2 )
      v5 = v2;
    v6 = sub_415FF0(0, 255, (const char *)&byte_587000[188148], 68);
    v7 = sub_45A360(
           *(int *)&byte_5D4594[1522960],
           v3[3] + v5 * *(int *)&byte_587000[8 * v6 + 192088] / 16,
           v3[4] + v5 * *(int *)&byte_587000[8 * v6 + 192092] / 16);
    v8 = v7;
    if ( v7 )
    {
      *(_DWORD *)(v7 + 432) = *(_DWORD *)(v7 + 12) << 12;
      *(_DWORD *)(v7 + 436) = *(_DWORD *)(v7 + 16) << 12;
      *(_BYTE *)(v7 + 299) = 0;
      *(_DWORD *)(v7 + 440) = 0;
      *(_DWORD *)(v7 + 448) = *(_DWORD *)&byte_5D4594[2598000]
                            + sub_415FF0(10, 30, (const char *)&byte_587000[188200], 88);
      *(_DWORD *)(v8 + 444) = *(_DWORD *)&byte_5D4594[2598000];
      *(_WORD *)(v8 + 104) = 0;
      *(_BYTE *)(v8 + 296) = sub_415FF0(2, 8, (const char *)&byte_587000[188252], 94);
      sub_45A110((_DWORD *)v8);
    }
    if ( !--v19 )
      break;
  }
  if ( byte_5D4594[2598000] & 1 )
  {
    if ( (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - v3[80]) < 0xA )
    {
      v9 = *((_WORD *)v3 + 8);
      LOWORD(i) = *((_WORD *)v3 + 6);
      HIWORD(i) = v9;
      v10 = *(_DWORD *)&byte_5D4594[2598000] % 0x33u;
      if ( (int)(*(_DWORD *)&byte_5D4594[2598000] % 0x33u) < 256 )
      {
        v11 = &byte_587000[8 * v10 + 192092];
        do
        {
          v12 = v18 * *(_WORD *)v11;
          v16 = i + v18 * *((_WORD *)v11 - 2);
          v17 = HIWORD(i) + v12;
          sub_499520(*(int *)&byte_5D4594[1522956], (unsigned __int16 *)&i, v10, 0, 0);
          sub_499520(*(int *)&byte_5D4594[1522956], (unsigned __int16 *)&i, v10, 1, 0);
          v11 += 408;
          LOWORD(v10) = v10 + 51;
        }
        while ( (int)v11 < (int)&byte_587000[194140] );
      }
    }
  }
  return 1;
}

//----- (004CCCF0) --------------------------------------------------------
int sub_4CCCF0()
{
  return 1;
}

//----- (004CCD00) --------------------------------------------------------
int __cdecl sub_4CCD00(int a1, int a2)
{
  unsigned int i; // ecx

  for ( i = *(_DWORD *)(a2 + 432); i < *(int *)&byte_5D4594[2598000]; ++i )
  {
    if ( *(float *)(a2 + 436) > 0.0 )
    {
      *(float *)(a2 + 436) = *(float *)(a2 + 440) + *(float *)(a2 + 436);
      *(float *)(a2 + 440) = *(float *)(a2 + 440) - 1.0;
    }
    if ( *(float *)(a2 + 436) <= 0.0 )
    {
      *(_DWORD *)(a2 + 436) = 0;
      *(_DWORD *)(a2 + 440) = 0;
    }
  }
  *(_WORD *)(a2 + 104) = (__int64)*(float *)(a2 + 436);
  *(_BYTE *)(a2 + 296) = (__int64)*(float *)(a2 + 440);
  *(_DWORD *)(a2 + 432) = *(_DWORD *)&byte_5D4594[2598000];
  return 1;
}

//----- (004CCDB0) --------------------------------------------------------
int __cdecl sub_4CCDB0(int a1, int a2)
{
  unsigned int i; // edx
  double v3; // st7
  double v4; // st7
  double v5; // st7

  for ( i = *(_DWORD *)(a2 + 432); i < *(int *)&byte_5D4594[2598000]; ++i )
  {
    v3 = *(float *)(a2 + 436) + *(float *)(a2 + 440);
    *(float *)(a2 + 436) = v3;
    if ( v3 >= 0.0 )
    {
      *(float *)(a2 + 440) = *(float *)(a2 + 440) - 0.5;
    }
    else
    {
      v4 = -*(float *)(a2 + 440) * *(float *)(a2 + 444);
      *(_DWORD *)(a2 + 436) = 0;
      v5 = v4 * 0.1;
      *(float *)(a2 + 440) = v5;
      if ( v5 < 2.0 )
      {
        *(_DWORD *)(a2 + 436) = 0;
        *(_DWORD *)(a2 + 440) = 0;
      }
    }
  }
  *(_WORD *)(a2 + 104) = (__int64)*(float *)(a2 + 436);
  *(_BYTE *)(a2 + 296) = (__int64)*(float *)(a2 + 440);
  *(_DWORD *)(a2 + 432) = *(_DWORD *)&byte_5D4594[2598000];
  return 1;
}

//----- (004CCE70) --------------------------------------------------------
int __cdecl sub_4CCE70(int a1, _DWORD *a2)
{
  if ( !a2[120] && !sub_413A50() )
    sub_4CCEA0(a2, 5);
  return 1;
}

//----- (004CCEA0) --------------------------------------------------------
void __cdecl sub_4CCEA0(_DWORD *a1, int a2)
{
  _DWORD *v2; // ebp
  int v3; // ebx
  int v4; // esi
  int v5; // eax
  int v6; // ecx
  int v8; // eax
  int v9; // edi
  int v11; // ebx
  int v12; // esi
  int v13; // ebx
  int v14; // ebx
  int v15; // [esp+0h] [ebp-14h]
  int v16; // [esp+4h] [ebp-10h]
  float2 v17; // [esp+Ch] [ebp-8h]
  int v18; // [esp+18h] [ebp+4h]

  if ( !*(_DWORD *)&byte_5D4594[1522964] )
    *(_DWORD *)&byte_5D4594[1522964] = sub_44CFC0((CHAR *)&byte_587000[188304]);
  v2 = a1;
  v3 = a1[4] - a1[9];
  v4 = a1[3] - a1[8];
  v5 = a1[4] - a1[9];
  v18 = v4;
  v15 = v3;
  v6 = abs32(v4) + abs32(v5);
  if ( v6 / 7 > 0 )
  {
    v16 = v6 / 7;
    while ( 1 )
    {
      v8 = sub_415FF0(0, 100, (const char *)&byte_587000[188312], 46);
      v9 = v2[8] + v4 * v8 / 100;
      v11 = v2[9] + (v3 * v8) / 100;
      v12 = sub_45A360(*(int *)&byte_5D4594[1522964], v9, v11);
      if ( v12 )
      {
        *(_DWORD *)(v12 + 432) = v9 << 12;
        *(_DWORD *)(v12 + 436) = v11 << 12;
        v17.field_0 = (double)-v18;
        v17.field_4 = (double)-v15;
        v13 = sub_415FF0(-25, 25, (const char *)&byte_587000[188364], 63);
        v14 = sub_509ED0(&v17) + v13;
        if ( v14 < 0 )
          v14 += (unsigned int)(255 - v14) >> 8 << 8;
        *(_BYTE *)(v12 + 299) = v14;
        *(_DWORD *)(v12 + 440) = a2 * sub_415FF0(100, 300, (const char *)&byte_587000[188416], 74);
        *(_DWORD *)(v12 + 448) = *(_DWORD *)&byte_5D4594[2598000]
                               + sub_415FF0(30, 45, (const char *)&byte_587000[188468], 77);
        *(_DWORD *)(v12 + 444) = *(_DWORD *)&byte_5D4594[2598000];
        *(_WORD *)(v12 + 104) = 28;
        *(_WORD *)(v12 + 106) = 0;
        *(_BYTE *)(v12 + 296) = sub_415FF0(-2, 4, (const char *)&byte_587000[188520], 84);
        sub_45A110((_DWORD *)v12);
      }
      --v16;
      if ( !v16 )
        break;
      v3 = v15;
      v4 = v18;
    }
  }
}

//----- (004CD090) --------------------------------------------------------
int __cdecl sub_4CD090(int a1, _DWORD *a2)
{
  if ( !a2[120] && !sub_413A50() )
    sub_4CCEA0(a2, 4);
  return 1;
}

//----- (004CD0C0) --------------------------------------------------------
int __cdecl sub_4CD0C0(int a1, _DWORD *a2)
{
  if ( !a2[120] && !sub_413A50() )
    sub_4CCEA0(a2, 3);
  return 1;
}

//----- (004CD0F0) --------------------------------------------------------
int __cdecl sub_4CD0F0(int a1, _DWORD *a2)
{
  if ( !a2[120] && !sub_413A50() )
    sub_4CCEA0(a2, 2);
  return 1;
}

//----- (004CD120) --------------------------------------------------------
int __cdecl sub_4CD120(int a1, _DWORD *a2)
{
  if ( !a2[120] && !sub_413A50() )
    sub_4CCEA0(a2, 1);
  return 1;
}

//----- (004CD150) --------------------------------------------------------
void __cdecl sub_4CD150(int a1, _DWORD *a2, int a3, int a4)
{
  int v4; // eax
  int v5; // esi
  int v6; // eax
  int v7; // ebx
  int v8; // eax
  int v9; // ecx
  int v10; // eax
  int v11; // eax
  _DWORD *v12; // eax
  int v13; // eax
  _DWORD *v14; // ebp
  int v15; // eax
  int v16; // eax
  int v17; // edi
  int v18; // eax
  int v19; // eax
  int v20; // edx
  int v21; // ecx
  int v22; // esi
  char v23; // al
  int v25; // [esp+14h] [ebp-4h]
  int v26; // [esp+24h] [ebp+Ch]
  int v27; // [esp+28h] [ebp+10h]

  v4 = sub_415FF0(0, 100, (const char *)&byte_587000[188572], 16);
  if ( v4 >= 50 )
    return;
  LOBYTE(v4) = *(_BYTE *)(a3 + 432);
  if ( !(_BYTE)v4 )
  {
    if ( a3 == -432 )
      return;
    if ( a4 )
    {
      v5 = *(unsigned __int16 *)(a3 + 441) + sub_415FF0(-20, 20, (const char *)&byte_587000[188620], 28);
      v6 = sub_415FF0(-20, 20, (const char *)&byte_587000[188668], 29);
      LOWORD(v7) = *(_WORD *)(a3 + 437);
      v8 = *(unsigned __int16 *)(a3 + 443) + v6;
      LOWORD(v9) = *(_WORD *)(a3 + 439);
    }
    else
    {
      v5 = *(unsigned __int16 *)(a3 + 437) + sub_415FF0(-20, 20, (const char *)&byte_587000[188716], 36);
      v10 = sub_415FF0(-20, 20, (const char *)&byte_587000[188764], 37);
      LOWORD(v7) = *(_WORD *)(a3 + 441);
      v8 = *(unsigned __int16 *)(a3 + 439) + v10;
      LOWORD(v9) = *(_WORD *)(a3 + 443);
    }
    goto LABEL_19;
  }
  if ( a3 == -432 )
    return;
  if ( sub_578B70(*(_DWORD *)(a3 + 437)) )
  {
    v11 = sub_578B30(*(_DWORD *)(a3 + 437));
    v12 = sub_45A720(v11);
  }
  else
  {
    v13 = sub_578B30(*(_DWORD *)(a3 + 437));
    v12 = sub_45A6F0(v13);
  }
  v14 = v12;
  if ( sub_578B70(*(_DWORD *)(a3 + 441)) )
  {
    v15 = sub_578B30(*(_DWORD *)(a3 + 441));
    v4 = sub_45A720(v15);
  }
  else
  {
    v16 = sub_578B30(*(_DWORD *)(a3 + 441));
    v4 = sub_45A6F0(v16);
  }
  v17 = v4;
  if ( !v14 || !v4 )
    return;
  if ( !a4 )
  {
    v5 = v14[3] + sub_415FF0(-20, 20, (const char *)&byte_587000[188908], 80);
    v19 = sub_415FF0(-20, 20, (const char *)&byte_587000[188956], 81);
    v7 = *(_DWORD *)(v17 + 12);
    v8 = v14[4] + v19;
    v9 = *(_DWORD *)(v17 + 16);
LABEL_19:
    LOWORD(v25) = v9;
    goto LABEL_20;
  }
  v5 = *(_DWORD *)(v4 + 12) + sub_415FF0(-20, 20, (const char *)&byte_587000[188812], 70);
  v18 = sub_415FF0(-20, 20, (const char *)&byte_587000[188860], 71);
  v7 = v14[3];
  v8 = *(_DWORD *)(v17 + 16) + v18;
  v25 = v14[4];
LABEL_20:
  v20 = v5 + *a2 - a2[4];
  v27 = *(__int16 *)(a3 + 104);
  v26 = a2[5];
  v21 = v8 + a2[1] - v26 - v27;
  if ( v20 < 0 )
    v5 = a2[4] + *a2 + 1;
  if ( v21 < 0 )
    v8 = a2[1] + v26 - v27 + 1;
  if ( v20 >= a2[8] )
    v5 = a2[2] + a2[4] - 1;
  if ( v21 >= a2[9] )
    v8 = a2[3] - v27 + v26 - 1;
  v4 = sub_45A360(a1, v5, v8);
  v22 = v4;
  if ( v4 )
  {
    v23 = sub_415FF0(6, 12, (const char *)&byte_587000[189004], 112);
    *(_WORD *)(v22 + 432) = v7;
    *(_WORD *)(v22 + 434) = v25;
    *(_BYTE *)(v22 + 443) = v23;
    LOBYTE(v4) = sub_415FF0(3, 10, (const char *)&byte_587000[189052], 119);
    *(_BYTE *)(v22 + 444) = v4;
  }
  return;
}
// 4CD249: variable 'v11' is possibly undefined
// 4CD25A: variable 'v13' is possibly undefined
// 4CD27E: variable 'v15' is possibly undefined
// 4CD28F: variable 'v16' is possibly undefined

//----- (004CD400) --------------------------------------------------------
int __cdecl sub_4CD400(_DWORD *a1, int a2)
{
  int v2; // eax

  v2 = *(_DWORD *)&byte_5D4594[1522968];
  if ( !*(_DWORD *)&byte_5D4594[1522968] )
  {
    v2 = sub_44CFC0((CHAR *)&byte_587000[189100]);
    *(_DWORD *)&byte_5D4594[1522968] = v2;
  }
  sub_4CD150(v2, a1, a2, 1);
  sub_4CD150(*(int *)&byte_5D4594[1522968], a1, a2, 0);
  return 1;
}

//----- (004CD450) --------------------------------------------------------
int __cdecl sub_4CD450(_DWORD *a1, int a2)
{
  int v2; // esi
  int v3; // eax
  int v4; // ecx
  int v5; // eax
  _DWORD *v6; // eax
  int v7; // eax
  _DWORD *v8; // ebx
  int v9; // eax
  _DWORD *v10; // eax
  int v11; // eax
  _DWORD *v12; // edi
  _DWORD *v13; // edi
  int v14; // ebx
  int v15; // edx
  int v16; // ebp
  int v17; // edx
  int v18; // ecx
  int v19; // esi
  char v20; // al
  int v22; // [esp+0h] [ebp-8h]
  __int16 v23; // [esp+4h] [ebp-4h]
  int v24; // [esp+Ch] [ebp+4h]

  if ( !*(_DWORD *)&byte_5D4594[1522972] )
    *(_DWORD *)&byte_5D4594[1522972] = sub_44CFC0((CHAR *)&byte_587000[189112]);
  if ( sub_415FF0(0, 100, (const char *)&byte_587000[189120], 20) < 50 )
  {
    if ( *(_BYTE *)(a2 + 432) )
    {
      if ( a2 == -432 )
        return 1;
      if ( sub_578B70(*(_DWORD *)(a2 + 437)) )
      {
        v5 = sub_578B30(*(_DWORD *)(a2 + 437));
        v6 = sub_45A720(v5);
      }
      else
      {
        v7 = sub_578B30(*(_DWORD *)(a2 + 437));
        v6 = sub_45A6F0(v7);
      }
      v8 = v6;
      if ( sub_578B70(*(_DWORD *)(a2 + 441)) )
      {
        v9 = sub_578B30(*(_DWORD *)(a2 + 441));
        v10 = sub_45A720(v9);
      }
      else
      {
        v11 = sub_578B30(*(_DWORD *)(a2 + 441));
        v10 = sub_45A6F0(v11);
      }
      v12 = v10;
      if ( !v8 || !v10 )
        return 1;
      v2 = v10[3] + sub_415FF0(-20, 20, (const char *)&byte_587000[189264], 61);
      v3 = v12[4] + sub_415FF0(-20, 20, (const char *)&byte_587000[189312], 62);
      v4 = v8[4];
      v22 = v8[3];
    }
    else
    {
      if ( a2 == -432 )
        return 1;
      v2 = *(unsigned __int16 *)(a2 + 441) + sub_415FF0(-20, 20, (const char *)&byte_587000[189168], 31);
      v3 = *(unsigned __int16 *)(a2 + 443) + sub_415FF0(-20, 20, (const char *)&byte_587000[189216], 32);
      LOWORD(v22) = *(_WORD *)(a2 + 437);
      LOWORD(v4) = *(_WORD *)(a2 + 439);
    }
    v13 = a1;
    v23 = v4;
    v14 = *a1;
    v15 = *a1 - a1[4];
    v16 = a1[5];
    v24 = *(__int16 *)(a2 + 104);
    v17 = v2 + v15;
    v18 = v3 + v13[1] - v16 - v24;
    if ( v17 < 0 )
      v2 = v13[4] + v14 + 1;
    if ( v18 < 0 )
      v3 = v16 - v24 + v13[1] + 1;
    if ( v17 >= v13[8] )
      v2 = v13[2] + v13[4] - 1;
    if ( v18 >= v13[9] )
      v3 = v13[3] - v24 + v16 - 1;
    v19 = sub_45A360(*(int *)&byte_5D4594[1522972], v2, v3);
    if ( v19 )
    {
      v20 = sub_415FF0(6, 12, (const char *)&byte_587000[189360], 92);
      *(_WORD *)(v19 + 432) = v22;
      *(_WORD *)(v19 + 434) = v23;
      *(_BYTE *)(v19 + 443) = v20;
      *(_BYTE *)(v19 + 444) = sub_415FF0(3, 10, (const char *)&byte_587000[189408], 99);
    }
  }
  return 1;
}
// 4CD516: variable 'v5' is possibly undefined
// 4CD527: variable 'v7' is possibly undefined
// 4CD54B: variable 'v9' is possibly undefined
// 4CD55C: variable 'v11' is possibly undefined

//----- (004CD690) --------------------------------------------------------
int __cdecl sub_4CD690(_DWORD *a1, int a2)
{
  int v2; // esi
  int v3; // eax
  int v4; // ecx
  int v5; // eax
  _DWORD *v6; // eax
  int v7; // eax
  _DWORD *v8; // ebx
  int v9; // eax
  _DWORD *v10; // eax
  int v11; // eax
  _DWORD *v12; // edi
  _DWORD *v13; // edi
  int v14; // ebx
  int v15; // edx
  int v16; // ebp
  int v17; // edx
  int v18; // ecx
  int v19; // esi
  char v20; // al
  int v22; // [esp+0h] [ebp-8h]
  __int16 v23; // [esp+4h] [ebp-4h]
  int v24; // [esp+Ch] [ebp+4h]

  if ( !*(_DWORD *)&byte_5D4594[1522976] )
    *(_DWORD *)&byte_5D4594[1522976] = sub_44CFC0((CHAR *)&byte_587000[189456]);
  if ( sub_415FF0(0, 100, (const char *)&byte_587000[189472], 20) < 50 )
  {
    if ( *(_BYTE *)(a2 + 432) )
    {
      if ( a2 == -432 )
        return 1;
      if ( sub_578B70(*(_DWORD *)(a2 + 437)) )
      {
        v5 = sub_578B30(*(_DWORD *)(a2 + 437));
        v6 = sub_45A720(v5);
      }
      else
      {
        v7 = sub_578B30(*(_DWORD *)(a2 + 437));
        v6 = sub_45A6F0(v7);
      }
      v8 = v6;
      if ( sub_578B70(*(_DWORD *)(a2 + 441)) )
      {
        v9 = sub_578B30(*(_DWORD *)(a2 + 441));
        v10 = sub_45A720(v9);
      }
      else
      {
        v11 = sub_578B30(*(_DWORD *)(a2 + 441));
        v10 = sub_45A6F0(v11);
      }
      v12 = v10;
      if ( !v8 || !v10 )
        return 1;
      v2 = v10[3] + sub_415FF0(-20, 20, (const char *)&byte_587000[189616], 61);
      v3 = v12[4] + sub_415FF0(-20, 20, (const char *)&byte_587000[189664], 62);
      v4 = v8[4];
      v22 = v8[3];
    }
    else
    {
      if ( a2 == -432 )
        return 1;
      v2 = *(unsigned __int16 *)(a2 + 441) + sub_415FF0(-20, 20, (const char *)&byte_587000[189520], 31);
      v3 = *(unsigned __int16 *)(a2 + 443) + sub_415FF0(-20, 20, (const char *)&byte_587000[189568], 32);
      LOWORD(v22) = *(_WORD *)(a2 + 437);
      LOWORD(v4) = *(_WORD *)(a2 + 439);
    }
    v13 = a1;
    v23 = v4;
    v14 = *a1;
    v15 = *a1 - a1[4];
    v16 = a1[5];
    v24 = *(__int16 *)(a2 + 104);
    v17 = v2 + v15;
    v18 = v3 + v13[1] - v16 - v24;
    if ( v17 < 0 )
      v2 = v13[4] + v14 + 1;
    if ( v18 < 0 )
      v3 = v16 - v24 + v13[1] + 1;
    if ( v17 >= v13[8] )
      v2 = v13[2] + v13[4] - 1;
    if ( v18 >= v13[9] )
      v3 = v13[3] - v24 + v16 - 1;
    v19 = sub_45A360(*(int *)&byte_5D4594[1522976], v2, v3);
    if ( v19 )
    {
      v20 = sub_415FF0(6, 12, (const char *)&byte_587000[189712], 93);
      *(_WORD *)(v19 + 432) = v22;
      *(_WORD *)(v19 + 434) = v23;
      *(_BYTE *)(v19 + 443) = v20;
      *(_BYTE *)(v19 + 444) = sub_415FF0(3, 10, (const char *)&byte_587000[189760], 100);
    }
  }
  return 1;
}
// 4CD756: variable 'v5' is possibly undefined
// 4CD767: variable 'v7' is possibly undefined
// 4CD78B: variable 'v9' is possibly undefined
// 4CD79C: variable 'v11' is possibly undefined

//----- (004CD8D0) --------------------------------------------------------
int __cdecl sub_4CD8D0(int a1, int a2)
{
  int v2; // esi
  int v3; // eax
  int v4; // eax
  int v5; // esi

  if ( !*(_DWORD *)&byte_5D4594[1522980] )
    *(_DWORD *)&byte_5D4594[1522980] = sub_44CFC0((CHAR *)&byte_587000[189808]);
  v2 = *(_DWORD *)(a2 + 12) + sub_415FF0(-5, 5, (const char *)&byte_587000[189820], 32);
  v3 = sub_415FF0(-5, 5, (const char *)&byte_587000[189868], 33);
  v4 = sub_45A360(*(int *)&byte_5D4594[1522980], v2, *(_DWORD *)(a2 + 16) + v3);
  v5 = v4;
  if ( v4 )
  {
    *(_DWORD *)(v4 + 432) = *(_DWORD *)(v4 + 12) << 12;
    *(_DWORD *)(v4 + 436) = *(_DWORD *)(v4 + 16) << 12;
    *(_BYTE *)(v4 + 299) = sub_415FF0(0, 255, (const char *)&byte_587000[189916], 43);
    *(_DWORD *)(v5 + 440) = sub_415FF0(1, 100, (const char *)&byte_587000[189964], 46);
    *(_DWORD *)(v5 + 448) = *(_DWORD *)&byte_5D4594[2598000]
                          + sub_415FF0(10, 32, (const char *)&byte_587000[190012], 49);
    *(_DWORD *)(v5 + 444) = *(_DWORD *)&byte_5D4594[2598000];
    *(_WORD *)(v5 + 104) = 0;
    *(_BYTE *)(v5 + 296) = sub_415FF0(3, 8, (const char *)&byte_587000[190060], 55);
    sub_45A110((_DWORD *)v5);
  }
  return 1;
}

//----- (004CD9E0) --------------------------------------------------------
int __cdecl sub_4CD9E0(int a1, _DWORD *a2)
{
  _DWORD *v2; // ebp
  int v3; // esi
  int v4; // edi
  int v5; // ebx
  int v6; // edi
  unsigned int v7; // edx
  int v8; // ebx
  int v9; // eax
  int v10; // esi
  int v11; // edx
  _DWORD *v12; // esi
  int v14; // [esp+8h] [ebp-8h]
  int v15; // [esp+Ch] [ebp-4h]
  int v16; // [esp+18h] [ebp+8h]

  v2 = a2;
  if ( !*(_DWORD *)&byte_5D4594[1522984] )
  {
    *(_DWORD *)&byte_5D4594[1522984] = sub_44CFC0((CHAR *)&byte_587000[190112]);
    *(_DWORD *)&byte_5D4594[1522988] = sub_44CFC0((CHAR *)&byte_587000[190120]);
    *(_DWORD *)&byte_5D4594[1522992] = sub_44CFC0((CHAR *)&byte_587000[190128]);
  }
  v3 = a2[3] - a2[8];
  v15 = a2[4] - a2[9];
  v14 = a2[3] - a2[8];
  v16 = 0;
  if ( *(_DWORD *)&byte_587000[190108] > 0 )
  {
    while ( 1 )
    {
      v4 = v2[8];
      v5 = v2[9];
      v6 = v3 * sub_415FF0(0, 100, (const char *)&byte_587000[190152], 40) / 100 + v4;
      v8 = (v15 * sub_415FF0(0, 100, (const char *)&byte_587000[190200], 41)) / 100 + v5;
      v9 = sub_45A360(*(int *)&byte_5D4594[1522984], v6, v8);
      v10 = v9;
      if ( v9 )
      {
        *(_DWORD *)(v9 + 432) = v6 << 12;
        *(_DWORD *)(v9 + 436) = v8 << 12;
        *(_BYTE *)(v9 + 299) = sub_415FF0(0, 255, (const char *)&byte_587000[190248], 52);
        *(_DWORD *)(v10 + 440) = 0;
        *(_DWORD *)(v10 + 448) = *(_DWORD *)&byte_5D4594[2598000]
                               + sub_415FF0(3, 10, (const char *)&byte_587000[190296], 59);
        *(_DWORD *)(v10 + 444) = *(_DWORD *)&byte_5D4594[2598000];
        *(_WORD *)(v10 + 104) = 20;
        *(_BYTE *)(v10 + 296) = sub_415FF0(0, 6, (const char *)&byte_587000[190344], 65);
        sub_45A110((_DWORD *)v10);
      }
      if ( ++v16 >= *(int *)&byte_587000[190108] )
        break;
      v3 = v14;
    }
  }
  v11 = v2[108];
  if ( (v2[3] - v11) * (v2[3] - v11) + (v2[4] - v2[109]) * (v2[4] - v2[109]) > 200 )
  {
    v12 = (_DWORD *)sub_45A360(*(int *)&byte_5D4594[1522992], v11, v2[109]);
    v12[108] = v2[3];
    v12[109] = v2[4];
    sub_45A110(v12);
    v2[108] = v2[3];
    v2[109] = v2[4];
    sub_49B950(v12, *(_DWORD *)&byte_5D4594[2649704] / 3u);
  }
  return 1;
}

//----- (004CDBF0) --------------------------------------------------------
int __cdecl sub_4CDBF0(int a1, _DWORD *a2)
{
  _DWORD *v2; // ebx
  int v3; // edi
  int v4; // ebp
  int v5; // esi
  bool v6; // zf
  int v8; // [esp+10h] [ebp-10h]
  int v9; // [esp+14h] [ebp-Ch]
  int v10; // [esp+18h] [ebp-8h]
  int v11; // [esp+1Ch] [ebp-4h]
  int v12; // [esp+28h] [ebp+8h]

  v2 = a2;
  v10 = a2[3] - a2[8];
  v11 = a2[4] - a2[9];
  if ( !*(_DWORD *)&byte_5D4594[1522996] )
    *(_DWORD *)&byte_5D4594[1522996] = sub_44CFC0((CHAR *)&byte_587000[190392]);
  v8 = 0;
  v12 = 0;
  v9 = 5;
  do
  {
    v3 = v2[8] + v12 / 5 + sub_415FF0(-3, 3, (const char *)&byte_587000[190404], 28);
    v4 = v2[9]
       + sub_415FF0(-3, 3, (const char *)&byte_587000[190456], 29)
       + v8 / 5;
    v5 = sub_45A360(*(int *)&byte_5D4594[1522996], v3, v4);
    if ( v5 )
    {
      *(_DWORD *)(v5 + 300) = sub_4B6FE0;
      sub_484BE0((_DWORD *)(v5 + 136), 255, 200, 75);
      *(_DWORD *)(v5 + 432) = v3 << 12;
      *(_DWORD *)(v5 + 436) = v4 << 12;
      *(_BYTE *)(v5 + 299) = 0;
      *(_DWORD *)(v5 + 440) = 0;
      *(_DWORD *)(v5 + 448) = *(_DWORD *)&byte_5D4594[2598000]
                            + sub_415FF0(2, 10, (const char *)&byte_587000[190508], 51);
      *(_DWORD *)(v5 + 444) = *(_DWORD *)&byte_5D4594[2598000];
      *(_WORD *)(v5 + 104) = *((_WORD *)v2 + 52);
      *(_WORD *)(v5 + 106) = *((_WORD *)v2 + 53);
      *(_BYTE *)(v5 + 296) = 0;
      sub_45A110((_DWORD *)v5);
    }
    v12 += v10;
    v6 = v9 == 1;
    v8 += v11;
    --v9;
  }
  while ( !v6 );
  return 1;
}

//----- (004CDD80) --------------------------------------------------------
void __cdecl sub_4CDD80(int a1, _DWORD *a2)
{
  _DWORD *v2; // edi
  int v3; // eax
  int v4; // eax
  _DWORD *v5; // esi
  int v6; // ebx
  int v7; // ebp
  int v8; // esi
  int v9; // eax
  int v10; // eax
  int v11; // esi
  int v13; // [esp+10h] [ebp-8h]
  int v14; // [esp+14h] [ebp-4h]
  int v15; // [esp+20h] [ebp+8h]

  v2 = a2;
  v3 = a2[3] - a2[108];
  if ( v3 * v3 + (a2[4] - a2[109]) * (a2[4] - a2[109]) > 200 )
  {
    v4 = *(_DWORD *)&byte_5D4594[1523000];
    if ( !*(_DWORD *)&byte_5D4594[1523000] )
    {
      v4 = sub_44CFC0((CHAR *)&byte_587000[190560]);
      *(_DWORD *)&byte_5D4594[1523000] = v4;
    }
    v5 = (_DWORD *)sub_45A360(v4, a2[108], a2[109]);
    v5[108] = a2[3];
    v5[109] = a2[4];
    sub_45A110(v5);
    a2[108] = a2[3];
    a2[109] = a2[4];
    sub_49B950(v5, *(int *)&byte_5D4594[2649704]);
  }
  v13 = a2[3] - a2[8];
  v14 = a2[4] - a2[9];
  if ( !*(_DWORD *)&byte_5D4594[1523004] )
    *(_DWORD *)&byte_5D4594[1523004] = sub_44CFC0((CHAR *)&byte_587000[190576]);
  v6 = 0;
  v7 = 0;
  v15 = 4;
  do
  {
    v8 = v2[8] + v7 / 4 + sub_415FF0(-8, 8, (const char *)&byte_587000[190588], 66);
    v9 = sub_415FF0(-8, 8, (const char *)&byte_587000[190636], 68);
    v10 = sub_45A360(*(int *)&byte_5D4594[1523004], v8, v2[9] + v6 / 4 + v9);
    v11 = v10;
    if ( v10 )
    {
      *(_DWORD *)(v10 + 300) = sub_4B6B00;
      sub_484BE0((_DWORD *)(v10 + 136), 128, 128, 255);
      *(_DWORD *)(v11 + 432) = v2[3] << 12;
      *(_DWORD *)(v11 + 436) = v2[4] << 12;
      *(_BYTE *)(v11 + 299) = 0;
      *(_DWORD *)(v11 + 440) = 0;
      *(_DWORD *)(v11 + 448) = *(_DWORD *)&byte_5D4594[2598000]
                             + sub_415FF0(10, 20, (const char *)&byte_587000[190684], 90);
      *(_DWORD *)(v11 + 444) = *(_DWORD *)&byte_5D4594[2598000];
      *(_WORD *)(v11 + 104) = *((_WORD *)v2 + 52);
      *(_WORD *)(v11 + 106) = *((_WORD *)v2 + 53);
      *(_BYTE *)(v11 + 296) = 0;
      sub_45A110((_DWORD *)v11);
    }
    v7 += v13;
    v6 += v14;
    v15--;
  }
  while ( v15 );
}

//----- (004CDF80) --------------------------------------------------------
int __cdecl sub_4CDF80(int a1, int a2)
{
  sub_4CDFA0(a2, (_DWORD *)3);
  return 1;
}

//----- (004CDFA0) --------------------------------------------------------
_DWORD *__cdecl sub_4CDFA0(int a1, _DWORD *a2)
{
  _DWORD *result; // eax
  _DWORD *v3; // ebp
  _DWORD *v4; // esi

  if ( !*(_DWORD *)&byte_5D4594[1523008] )
    *(_DWORD *)&byte_5D4594[1523008] = sub_44CFC0((CHAR *)&byte_587000[190732]);
  result = a2;
  if ( (int)a2 > 0 )
  {
    v3 = a2;
    do
    {
      result = (_DWORD *)sub_45A360(*(int *)&byte_5D4594[1523008], *(_DWORD *)(a1 + 12), *(_DWORD *)(a1 + 16));
      v4 = result;
      if ( result )
      {
        result[108] = *(_DWORD *)(a1 + 12) << 12;
        result[109] = *(_DWORD *)(a1 + 16) << 12;
        *((_BYTE *)result + 299) = sub_415FF0(0, 255, (const char *)&byte_587000[190748], 37);
        v4[110] = sub_415FF0(1000, 3000, (const char *)&byte_587000[190796], 40);
        v4[112] = *(_DWORD *)&byte_5D4594[2598000] + sub_415FF0(10, 40, (const char *)&byte_587000[190844], 43);
        v4[111] = *(_DWORD *)&byte_5D4594[2598000];
        *((_WORD *)v4 + 52) = 22;
        *((_BYTE *)v4 + 296) = sub_415FF0(0, 4, (const char *)&byte_587000[190892], 49);
        result = sub_45A110(v4);
      }
      v3 = (_DWORD *)((char *)v3 - 1);
    }
    while ( v3 );
  }
  return result;
}

//----- (004CE0A0) --------------------------------------------------------
int __cdecl sub_4CE0A0(int a1, int a2)
{
  sub_4CDFA0(a2, (_DWORD *)1);
  return 1;
}

//----- (004CE0C0) --------------------------------------------------------
int __cdecl sub_4CE0C0(int a1, int a2)
{
  int v2; // ebx
  __int16 v3; // cx
  int v4; // esi
  __int16 v5; // ax
  __int16 v6; // cx
  int v7; // eax
  int v9; // [esp-18h] [ebp-20h]
  char v10; // [esp-14h] [ebp-1Ch]
  __int16 v11[4]; // [esp+0h] [ebp-8h]

  if ( !*(_DWORD *)&byte_5D4594[1523012] )
    *(_DWORD *)&byte_5D4594[1523012] = sub_44CFC0((CHAR *)&byte_587000[190940]);
  v2 = 10;
  v3 = *(_WORD *)(a2 + 16);
  v11[0] = *(_WORD *)(a2 + 12);
  v11[1] = v3;
  do
  {
    v4 = sub_415FF0(0, 255, (const char *)&byte_587000[190952], 102);
    v5 = sub_415FF0(2, 8, (const char *)&byte_587000[191000], 105);
    v6 = *(_WORD *)(a2 + 16) + v5 * *(short *)&byte_587000[8 * v4 + 192092];
    v11[2] = *(_WORD *)(a2 + 12) + v5 * *(short *)&byte_587000[8 * v4 + 192088];
    v11[3] = v6;
    if ( sub_415FF0(0, 100, (const char *)&byte_587000[191048], 112) < 50 )
    {
      v10 = sub_415FF0(6, 10, (const char *)&byte_587000[191096], 116);
      v9 = sub_415FF0(-20, 20, (const char *)&byte_587000[191144], 115);
      v7 = sub_415FF0(-20, 20, (const char *)&byte_587000[191192], 114);
      sub_499490(*(int *)&byte_5D4594[1523012], v11, v7, v9, v10, 0);
    }
    --v2;
  }
  while ( v2 );
  return 1;
}

//----- (004CE1D0) --------------------------------------------------------
int __cdecl sub_4CE1D0(int a1, int a2)
{
  if ( byte_5D4594[2598000] & 1 )
    sub_4CE200(a1, a2, 1, 75);
  return 1;
}

//----- (004CE200) --------------------------------------------------------
int __cdecl sub_4CE200(int a1, int a2, int a3, int a4)
{
  int result; // eax
  int v5; // edi
  int v6; // eax
  int v7; // esi
  int v8; // edi
  bool v9; // cc
  int v10; // eax
  int v11; // eax
  int v12; // esi
  int v13; // eax

  if ( !*(_DWORD *)&byte_5D4594[1523016] )
  {
    *(_DWORD *)&byte_5D4594[1523016] = sub_44CFC0((CHAR *)&byte_587000[191240]);
    *(_DWORD *)&byte_5D4594[1523020] = sub_44CFC0((CHAR *)&byte_587000[191252]);
  }
  result = a3;
  if ( a3 > 0 )
  {
    do
    {
      v5 = sub_415FF0(0, 255, (const char *)&byte_587000[191264], 40);
      v6 = sub_415FF0(0, a4, (const char *)&byte_587000[191312], 41);
      v7 = *(_DWORD *)(a2 + 12) + v6 * *(int *)&byte_587000[8 * v5 + 192088] / 16;
      v8 = *(_DWORD *)(a2 + 16) + v6 * *(int *)&byte_587000[8 * v5 + 192092] / 16;
      v9 = sub_415FF0(0, 10, (const char *)&byte_587000[191360], 46) < 3;
      v10 = *(_DWORD *)&byte_5D4594[1523020];
      if ( !v9 )
        v10 = *(_DWORD *)&byte_5D4594[1523016];
      v11 = sub_45A360(v10, v7, v8);
      v12 = v11;
      if ( v11 )
      {
        *(_WORD *)(v11 + 104) = 0;
        sub_45A110((_DWORD *)v11);
        *(_BYTE *)(v12 + 432) = sub_415FF0(1, 3, (const char *)&byte_587000[191408], 57);
        *(_DWORD *)(v12 + 460) = sub_4CE340;
        v13 = sub_415FF0(10, 32, (const char *)&byte_587000[191456], 61);
        sub_49B950((_DWORD *)v12, v13);
        sub_49BC80((_DWORD *)v12);
        sub_49BAB0((_DWORD *)v12);
      }
      result = --a3;
    }
    while ( a3 );
  }
  return result;
}

//----- (004CE340) --------------------------------------------------------
int __cdecl sub_4CE340(int a1, int a2)
{
  *(_WORD *)(a2 + 104) += *(unsigned __int8 *)(a2 + 432);
  return 1;
}

//----- (004CE360) --------------------------------------------------------
int __cdecl sub_4CE360(int a1, int a2)
{
  if ( byte_5D4594[2598000] & 1 )
    sub_4CE200(a1, a2, 1, 35);
  return 1;
}

//----- (004CE390) --------------------------------------------------------
int __cdecl sub_4CE390(_DWORD *a1, int a2)
{
  int result; // eax
  int v3; // edx
  int v4; // ecx
  int v5; // ecx
  int v6; // edx

  if ( *(_BYTE *)(a2 + 432) || *(_BYTE *)(a2 + 433) || *(_BYTE *)(a2 + 434) )
  {
    v3 = *(_DWORD *)(a2 + 12);
    v4 = a1[4];
    if ( v3 >= v4 - 100 && v3 <= a1[8] + v4 + 100 )
    {
      v5 = a1[5];
      v6 = *(_DWORD *)(a2 + 16);
      if ( v6 >= v5 - 100 && v6 <= a1[9] + v5 + 100 && !sub_40A5C0(0x200000) )
      {
        sub_4CE440(a2);
        sub_4CE610(a2);
        sub_4CE760(a2);
        sub_4CE960(a2);
        sub_4CE8C0(a2);
      }
    }
    result = 1;
  }
  else
  {
    sub_49BCD0((_DWORD *)a2);
    result = 1;
  }
  return result;
}

//----- (004CE440) --------------------------------------------------------
void __cdecl sub_4CE440(int a1)
{
  int v1; // esi
  char v2; // bl
  double v3; // st7
  __int64 v4; // rax
  double v5; // st7
  double v6; // st7
  char v7; // bl
  char v8; // bl
  int v9; // eax
  double v10; // st7
  int v11; // ecx
  char v12; // [esp+Fh] [ebp-15h]
  float v13; // [esp+10h] [ebp-14h]
  int v14; // [esp+18h] [ebp-Ch]
  char v15; // [esp+28h] [ebp+4h]

  v1 = a1;
  v2 = *(_BYTE *)(a1 + 432);
  v12 = *(_BYTE *)(a1 + 432);
  if ( v2 > 1 && *(_WORD *)(a1 + 258) )
  {
    v3 = (double)*(unsigned int *)&byte_5D4594[2598000] / (double)(*(unsigned __int16 *)(a1 + 258) * v2);
    v4 = (__int64)v3;
    v5 = v3 - (double)(int)(__int64)v3;
    if ( *(_BYTE *)(a1 + 176) & 1 )
    {
      v6 = v5 * (double)v2;
      v15 = (__int64)v6;
      v7 = v15 + 1;
      if ( (char)(v15 + 1) >= v12 )
        v7 = 0;
    }
    else
    {
      v6 = v5 * (double)v2;
      if ( v4 & 1 )
      {
        v8 = v2 - (unsigned __int64)(__int64)v6 - 1;
        v15 = v8;
        v7 = v8 - 1;
        if ( v7 < 0 )
          v7 = 0;
      }
      else
      {
        v15 = (__int64)v6;
        v7 = v15 + 1;
        if ( (char)(v15 + 1) >= v12 )
          v7 = v12 - 1;
      }
    }
    v13 = (double)*(unsigned __int16 *)(v1 + 258);
    v9 = v7;
    v10 = (double)(unsigned __int8)(__int64)((v6 - (double)(int)(__int64)v6) * v13);
    v11 = v1 + 2 * v15 + v15;
    v14 = *(unsigned __int8 *)(v15 + v1 + 2 * v15 + 120 + 60);
    sub_484BE0(
      (_DWORD *)(v1 + 136),
      (__int64)((double)(*(unsigned __int8 *)(v9 + v1 + 2 * v9 + 178) - *(unsigned __int8 *)(v11 + 178)) / v13 * v10
              + (double)*(unsigned __int8 *)(v11 + 178)),
      (__int64)((double)(*(unsigned __int8 *)(v9 + v1 + 2 * v9 + 179) - *(unsigned __int8 *)(v11 + 179)) / v13 * v10
              + (double)*(unsigned __int8 *)(v11 + 179)),
      (__int64)((double)(*(unsigned __int8 *)(v9 + v1 + 2 * v9 + 120 + 60) - v14) / v13 * v10 + (double)v14));
  }
}

//----- (004CE610) --------------------------------------------------------
void __cdecl sub_4CE610(int a1)
{
  int v1; // esi
  double v2; // st7
  __int64 v3; // rax
  double v4; // st7
  double v5; // st7
  __int64 v6; // rax
  char v7; // bl
  float v8; // [esp+0h] [ebp-20h]
  char v9; // [esp+24h] [ebp+4h]
  float v10; // [esp+24h] [ebp+4h]

  v1 = a1;
  v9 = *(_BYTE *)(a1 + 433);
  if ( v9 > 1 && *(_WORD *)(v1 + 260) )
  {
    v2 = (double)*(unsigned int *)&byte_5D4594[2598000] / (double)(*(unsigned __int16 *)(v1 + 260) * v9);
    v3 = (__int64)v2;
    v4 = v2 - (double)(int)(__int64)v2;
    if ( *(_BYTE *)(v1 + 176) & 4 )
    {
      v5 = v4 * (double)v9;
      v6 = (__int64)v5;
      v7 = (unsigned __int64)(__int64)v5 + 1;
      if ( v7 >= v9 )
        v7 = 0;
    }
    else
    {
      v5 = v4 * (double)v9;
      if ( v3 & 1 )
      {
        LOBYTE(v6) = v9 - (unsigned __int64)(__int64)v5 - 1;
        v7 = v9 - (unsigned __int64)(__int64)v5 - 2;
        if ( v7 < 0 )
          v7 = 0;
      }
      else
      {
        v6 = (__int64)v5;
        v7 = (unsigned __int64)(__int64)v5 + 1;
        if ( v7 >= v9 )
          v7 = v9 - 1;
      }
    }
    v10 = (double)*(unsigned __int16 *)(v1 + 260);
    v8 = (double)(unsigned __int8)(__int64)((v5 - (double)(int)(__int64)v5) * v10)
       * ((double)(*(unsigned __int8 *)(v7 + v1 + 226) - *(unsigned __int8 *)((char)v6 + v1 + 226))
        / v10)
       + (double)*(unsigned __int8 *)((char)v6 + v1 + 226);
    sub_484D70(v1 + 136, v8);
  }
}

//----- (004CE760) --------------------------------------------------------
int __cdecl sub_4CE760(int a1)
{
  int v1; // esi
  int result; // eax
  char v3; // bl
  double v4; // st7
  __int64 v5; // rax
  double v6; // st7
  double v7; // st7
  __int64 v8; // rax
  char v9; // bl
  char v10; // bl
  char v11; // [esp+20h] [ebp+4h]
  float v12; // [esp+20h] [ebp+4h]

  v1 = a1;
  result = *(_DWORD *)(a1 + 168);
  v3 = *(_BYTE *)(a1 + 434);
  v11 = *(_BYTE *)(a1 + 434);
  if ( !result && *(_WORD *)(v1 + 262) > 0u && v3 > 1 )
  {
    v4 = (double)*(unsigned int *)&byte_5D4594[2598000] / (double)(*(unsigned __int16 *)(v1 + 262) * v3);
    v5 = (__int64)v4;
    v6 = v4 - (double)(int)(__int64)v4;
    if ( *(_BYTE *)(v1 + 176) & 0x10 )
    {
      v7 = v6 * (double)v3;
      v8 = (__int64)v7;
      v9 = (unsigned __int64)(__int64)v7 + 1;
      if ( v9 >= v11 )
        v9 = 0;
    }
    else
    {
      v7 = v6 * (double)v3;
      if ( v5 & 1 )
      {
        v10 = v3 - (unsigned __int64)(__int64)v7 - 1;
        LOBYTE(v8) = v10;
        v9 = v10 - 1;
        if ( v9 < 0 )
          v9 = 0;
      }
      else
      {
        v8 = (__int64)v7;
        v9 = (unsigned __int64)(__int64)v7 + 1;
        if ( v9 >= v11 )
          v9 = v11 - 1;
      }
    }
    v12 = (double)*(unsigned __int16 *)(v1 + 262);
    result = sub_484C30(
               v1 + 136,
               (__int64)((double)(unsigned __int8)(__int64)((v7 - (double)(int)(__int64)v7) * v12)
                       * ((double)(*(unsigned __int8 *)(v9 + v1 + 242) - *(unsigned __int8 *)((char)v8 + v1 + 242))
                        / v12)
                       + (double)*(unsigned __int8 *)((char)v8 + v1 + 242)));
  }
  return result;
}

//----- (004CE8C0) --------------------------------------------------------
void __cdecl sub_4CE8C0(int a1)
{
  _DWORD *v1; // eax
  int v2; // esi
  double v3; // st7
  int v4; // [esp+10h] [ebp-8h]

  if ( *(_BYTE *)(a1 + 176) & 0x40 )
  {
    v1 = sub_45A720(*(_DWORD *)(a1 + 264));
    if ( v1 )
    {
      v2 = v1[4] - *(_DWORD *)(a1 + 16);
      v4 = v1[3] - *(_DWORD *)(a1 + 12);
      v3 = sub_419AF0(acos((double)v4 / sqrt((double)(v4 * v4 + v2 * v2)))) * 57.295776;
      if ( v2 < 0 )
        v3 = 360.0 - v3;
      sub_484C00(a1 + 136, (__int64)v3);
    }
  }
}

//----- (004CE960) --------------------------------------------------------
__int16 __cdecl sub_4CE960(int a1)
{
  int v1; // eax
  __int16 v2; // cx
  double v3; // st7
  double v4; // st6
  double v5; // st5
  __int64 v6; // rax

  v1 = *(_DWORD *)(a1 + 168);
  if ( !v1 )
  {
    v2 = *(_WORD *)(a1 + 176);
    if ( (v2 & 0x80u) != 0 )
    {
      LOWORD(v1) = *(_WORD *)(a1 + 270);
      if ( (_WORD)v1 )
      {
        if ( (v2 & 0x100) == 256 )
          v5 = (double)(*(unsigned __int16 *)(a1 + 272) - *(unsigned __int16 *)(a1 + 268));
        else
          v5 = 360.0;
        v4 = (double)*(unsigned int *)&byte_5D4594[2649704];
        v3 = (double)(__int16)v1;
        v6 = (__int64)(((double)*(unsigned int *)&byte_5D4594[2598000] / (v5 / v3 * v4)
                      - (double)(int)(__int64)((double)*(unsigned int *)&byte_5D4594[2598000] / (v5 / v3 * v4)))
                     * (v5
                      / v3
                      * v4)
                     * (v3
                      / v4)
                     + (double)*(unsigned __int16 *)(a1 + 268));
        if ( (int)v6 >= 0 )
        {
          if ( (int)v6 >= 360 )
            LODWORD(v6) = v6 - 360;
        }
        else
        {
          LODWORD(v6) = v6 + 360;
        }
        LOWORD(v1) = sub_484C00(a1 + 136, v6);
      }
    }
  }
  return v1;
}

//----- (004CEA90) --------------------------------------------------------
int __cdecl sub_4CEA90(float *a1, int2 *a2, int a3)
{
  int v3; // ebx
  int v4; // ebp
  int v5; // esi
  int v7; // [esp+10h] [ebp-18h]
  int v8; // [esp+14h] [ebp-14h]
  int v9; // [esp+18h] [ebp-10h]
  int v10; // [esp+1Ch] [ebp-Ch]
  int v11; // [esp+20h] [ebp-8h]

  v3 = a2->field_0 + sub_419A70(*a1);
  v4 = a2->field_4 + sub_419A70(a1[1]);
  v9 = a2->field_0 + sub_419A70(a1[2]);
  v10 = a2->field_4 + sub_419A70(a1[3]);
  v7 = a2->field_0 + sub_419A70(a1[4]);
  v8 = a2->field_4 + sub_419A70(a1[5]);
  v11 = a2->field_0 + sub_419A70(a1[6]);
  v5 = a2->field_4 + sub_419A70(a1[7]);
  sub_434460(a3);
  sub_49F500(v3, v4);
  sub_49F500(v7, v8);
  sub_49E4B0();
  sub_49F500(v11, v5);
  sub_49F500(v7, v8);
  sub_49E4B0();
  sub_49F500(v3, v4);
  sub_49F500(v9, v10);
  sub_49E4B0();
  sub_49F500(v11, v5);
  sub_49F500(v9, v10);
  return sub_49E4B0();
}

//----- (004CEBA0) --------------------------------------------------------
int __cdecl sub_4CEBA0(int a1, char *a2)
{
  _DWORD *v2; // eax
  _DWORD *v3; // edi
  char *v4; // ebx
  _DWORD *v5; // esi
  _DWORD *v6; // ebp
  _DWORD *v8; // [esp+10h] [ebp-4h]
  char *v9; // [esp+18h] [ebp+4h]

  *(_DWORD *)&byte_5D4594[1523024] = sub_4A0AD0((const char *)&byte_587000[191504], sub_4CF060);
  *(_DWORD *)&byte_5D4594[1523028] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], 10170);
  *(_DWORD *)&byte_5D4594[1523032] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], 10171);
  *(_DWORD *)&byte_5D4594[1523036] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], 10172);
  *(_DWORD *)&byte_5D4594[1523040] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], 10173);
  *(_DWORD *)&byte_5D4594[1523044] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], 10174);
  *(_DWORD *)&byte_5D4594[1523048] = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], 10175);
  v2 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], 10176);
  sub_46B340((int)v2, sub_4CEED0);
  sub_46B120(*(_DWORD **)&byte_5D4594[1523024], a1);
  v3 = *(_DWORD **)(*(_DWORD *)&byte_5D4594[1523028] + 32);
  v9 = sub_42F970((const char *)&byte_587000[191520]);
  v4 = sub_42F970((const char *)&byte_587000[191532]);
  v5 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], 10179);
  v6 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], 10177);
  v8 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], 10178);
  *(_DWORD *)(v5[100] + 8) = 16;
  *(_DWORD *)(v5[100] + 12) = 10;
  sub_4B5700((int)v5, 0, 0, (int)v9, (int)v4, (int)v4);
  sub_46B280((int)v5, *(int *)&byte_5D4594[1523028]);
  sub_46B280((int)v6, *(int *)&byte_5D4594[1523028]);
  sub_46B280((int)v8, *(int *)&byte_5D4594[1523028]);
  v3[9] = v5;
  v3[7] = v6;
  v3[8] = v8;
  sub_4CED40(a2);
  return *(_DWORD *)&byte_5D4594[1523024];
}

//----- (004CED40) --------------------------------------------------------
HANDLE __cdecl sub_4CED40(char *a1)
{
  HANDLE result; // eax
  HANDLE v2; // ebp
  struct _WIN32_FIND_DATAA FindFileData; // [esp+8h] [ebp-248h]
  CHAR FileName[64]; // [esp+148h] [ebp-108h]
  wchar_t v5[100]; // [esp+188h] [ebp-C8h]

  sub_46B490(*(int *)&byte_5D4594[1523028], 16399, 0, 0);
  nox_sprintf(FileName, (const char *)&byte_587000[191544], a1);
  result = FindFirstFileA(FileName, &FindFileData);
  v2 = result;
  if ( result != (HANDLE)-1 )
  {
    FindFileData.cFileName[strlen(FindFileData.cAlternateFileName) + 256] = 0;
    if ( _strcmpi(a1, FindFileData.cAlternateFileName)
      && _strcmpi((const char *)&byte_587000[191560], FindFileData.cAlternateFileName) )
    {
      nox_swprintf(v5, (const wchar_t *)&byte_587000[191568], FindFileData.cAlternateFileName);
      sub_46B490(*(int *)&byte_5D4594[1523028], 16397, (int)v5, -1);
    }
    while ( FindNextFileA(v2, &FindFileData) )
    {
      FindFileData.cFileName[strlen(FindFileData.cAlternateFileName) + 256] = 0;
      if ( _strcmpi(a1, FindFileData.cAlternateFileName) )
      {
        if ( _strcmpi((const char *)&byte_587000[191576], FindFileData.cAlternateFileName) )
        {
          nox_swprintf(v5, (const wchar_t *)&byte_587000[191584], FindFileData.cAlternateFileName);
          sub_46B490(*(int *)&byte_5D4594[1523028], 16397, (int)v5, -1);
        }
      }
    }
    result = (HANDLE)FindClose(v2);
  }
  return result;
}

//----- (004CEED0) --------------------------------------------------------
int __cdecl sub_4CEED0(int a1, int a2)
{
  int v2; // eax
  char v3; // cl
  _WORD *v4; // esi
  _DWORD *v5; // eax
  int xLeft; // [esp+8h] [ebp-8h]
  int yTop; // [esp+Ch] [ebp-4h]

  sub_46AA60((_DWORD *)a1, &xLeft, &yTop);
  if ( (signed char)*(_BYTE *)(a1 + 4) >= 0 )
  {
    if ( *(_DWORD *)(a2 + 20) != 0x80000000 )
      sub_49CE30(xLeft, yTop, *(_DWORD *)(a1 + 8), *(_DWORD *)(a1 + 12));
  }
  else
  {
    sub_47D2C0(*(_DWORD *)(a2 + 24), xLeft, yTop);
  }
  v2 = sub_46B490(*(int *)&byte_5D4594[1523028], 16404, 0, 0);
  v3 = *(_BYTE *)(*(_DWORD *)&byte_5D4594[1523040] + 4);
  if ( v2 < 0 )
  {
    if ( v3 & 8 )
      sub_46ABB0(*(int *)&byte_5D4594[1523040], 0);
    if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1523044] + 4) & 8 )
      sub_46ABB0(*(int *)&byte_5D4594[1523044], 0);
    if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1523048] + 4) & 8 )
      sub_46ABB0(*(int *)&byte_5D4594[1523048], 0);
  }
  else
  {
    if ( !(v3 & 8) )
      sub_46ABB0(*(int *)&byte_5D4594[1523040], 1);
    if ( !(*(_BYTE *)(*(_DWORD *)&byte_5D4594[1523044] + 4) & 8) && !sub_40A5C0(49152) )
      sub_46ABB0(*(int *)&byte_5D4594[1523044], 1);
    if ( !(*(_BYTE *)(*(_DWORD *)&byte_5D4594[1523048] + 4) & 8) )
      sub_46ABB0(*(int *)&byte_5D4594[1523048], 1);
  }
  v4 = (_WORD *)sub_46B490(*(int *)&byte_5D4594[1523032], 16413, 0, 0);
  v5 = (_DWORD *)sub_46B4F0();
  if ( v5 && *v5 == 10171 )
  {
    if ( v4 && *v4 )
    {
      if ( !(*(_BYTE *)(*(_DWORD *)&byte_5D4594[1523036] + 4) & 8) )
      {
        sub_46ABB0(*(int *)&byte_5D4594[1523036], 1);
        return 1;
      }
    }
    else if ( *(_BYTE *)(*(_DWORD *)&byte_5D4594[1523036] + 4) & 8 )
    {
      sub_46ABB0(*(int *)&byte_5D4594[1523036], 0);
    }
  }
  return 1;
}

//----- (004CF060) --------------------------------------------------------
int __cdecl sub_4CF060(int a1, unsigned int a2, int *a3, int a4)
{
  _DWORD *v4; // esi
  const char *v6; // eax
  const char *v7; // esi
  char *v8; // eax
  int v9; // esi
  int v10; // eax
  int v11; // eax
  char *v12; // eax
  char *v13; // eax
  char *v14; // esi
  int v15; // eax
  int v16; // eax
  char *v17; // eax
  char *v18; // edi
  int v19; // eax
  int v20; // esi
  int v21; // eax
  const wchar_t *v22; // edi
  char *v23; // eax
  char *v24; // eax
  int v25; // esi
  int v26; // ebx
  const wchar_t *v27; // eax
  char v28[16]; // [esp+Ch] [ebp-10h]

  if ( a2 > 0x4007 )
  {
    if ( a2 == 16400 )
      sub_46B0A0(a3);
    return 1;
  }
  if ( a2 != 16391 )
  {
    if ( a2 != 23 && a2 == 16387 )
    {
      v4 = sub_46B0C0(*(_DWORD **)&byte_5D4594[1523024], a4);
      sub_416630();
      sub_416640();
      if ( !v4 )
        return 0;
      if ( (unsigned __int16)a3 == 1 )
        return 0;
      v6 = (const char *)sub_46B490((int)v4, 16413, 0, 0);
      v7 = v6;
      if ( v6 )
      {
        if ( *v6 )
        {
          atoi(v6);
          if ( a4 == 10171 )
          {
            v8 = sub_4165B0();
            if ( !_strcmpi(v7, v8) || !_strcmpi(v7, (const char *)&byte_587000[191656]) )
            {
              sub_46ABB0(*(int *)&byte_5D4594[1523036], 0);
              return 1;
            }
          }
        }
      }
    }
    return 1;
  }
  v9 = sub_46B0A0(a3);
  sub_452D80(766, 100);
  switch ( v9 )
  {
    case 10172:
      sub_416580();
      v22 = (const wchar_t *)sub_46B490(*(int *)&byte_5D4594[1523032], 16413, 0, 0);
      nox_sprintf(v28, (const char *)&byte_587000[191648], v22, &byte_587000[191640]);
      v23 = sub_4165B0();
      sub_459AA0((int)v23);
      v24 = sub_4165B0();
      sub_57AAA0(v28, v24, 0);
      v25 = 0;
      v26 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1523028] + 32);
      if ( *(short *)(v26 + 44) <= 0 )
        goto LABEL_22;
      break;
    case 10173:
      sub_416580();
      v10 = sub_46B490(*(int *)&byte_5D4594[1523028], 16404, 0, 0);
      v11 = sub_46B490(*(int *)&byte_5D4594[1523028], 16406, v10, 0);
      nox_sprintf(v28, (const char *)&byte_587000[191600], v11, &byte_587000[191592]);
      v12 = sub_4165B0();
      sub_459AA0((int)v12);
      v13 = sub_4165B0();
      sub_57AAA0(v28, v13, 0);
      sub_46B490(*(int *)&byte_5D4594[1523028], 16403, -1, 0);
      return 1;
    case 10174:
      sub_416580();
      v14 = sub_4165B0();
      v15 = sub_46B490(*(int *)&byte_5D4594[1523028], 16404, 0, 0);
      v16 = sub_46B490(*(int *)&byte_5D4594[1523028], 16406, v15, 0);
      nox_sprintf(v28, (const char *)&byte_587000[191616], v16, &byte_587000[191608]);
      sub_57A1E0((int *)v14, v28, 0, 7, *((_WORD *)v14 + 26));
      sub_453F70(v14 + 24);
      sub_4535E0((int *)v14 + 11);
      sub_4535F0(*((_DWORD *)v14 + 12));
      v17 = sub_4165B0();
      sub_459880((int)v17);
      sub_46B490(*(int *)&byte_5D4594[1523028], 16403, -1, 0);
      sub_459D50(1);
      return 1;
    case 10175:
      v18 = sub_4165B0();
      v19 = sub_46B490(*(int *)&byte_5D4594[1523028], 16404, 0, 0);
      v20 = v19;
      v21 = sub_46B490(*(int *)&byte_5D4594[1523028], 16406, v19, 0);
      nox_sprintf(v28, (const char *)&byte_587000[191632], v21, &byte_587000[191624]);
      sub_57A9F0(v18, v28);
      sub_46B490(*(int *)&byte_5D4594[1523028], 16398, v20, 0);
      return 1;
    default:
      return 1;
  }
  while ( 1 )
  {
    v27 = (const wchar_t *)sub_46B490(*(int *)&byte_5D4594[1523028], 16406, v25, 0);
    if ( !_nox_wcsicmp(v22, v27) )
      break;
    if ( ++v25 >= *(__int16 *)(v26 + 44) )
    {
LABEL_22:
      sub_46B490(*(int *)&byte_5D4594[1523028], 16397, (int)v22, -1);
      sub_46B490(*(int *)&byte_5D4594[1523032], 16414, (int)&byte_5D4594[1523056], 0);
      sub_46ABB0(*(int *)&byte_5D4594[1523036], 0);
      return 1;
    }
  }
  sub_46B490(*(int *)&byte_5D4594[1523032], 16414, (int)&byte_5D4594[1523052], 0);
  return 1;
}

//----- (004CF460) --------------------------------------------------------
void sub_4CF460()
{
  srand(0x7D2u);
}

//----- (004CF470) --------------------------------------------------------
int __cdecl sub_4CF470(char *a1, int a2)
{
  int v2; // ebx
  int v4; // [esp+8h] [ebp-408h]
  int v5; // [esp+Ch] [ebp-404h]
  CHAR FileName[1024]; // [esp+10h] [ebp-400h]

  v2 = 0;
  if ( !a2 )
    return 6;
  if ( a1 )
  {
    if ( strchr(a1, 92) )
    {
      strcpy(FileName, a1);
    }
    else
    {
      strcpy(FileName, "maps\\");
      strncat(FileName, a1, strlen(a1) - 4);
      *(_WORD *)&FileName[strlen(FileName)] = *(_WORD *)&byte_587000[191672];
      strcat(FileName, a1);
    }
    if ( _access(FileName, 0) != -1 )
    {
      v4 = 0;
      if ( _access(FileName, 2) == -1 )
        v2 = 1;
      if ( sub_426910(FileName, 1, 19) )
      {
        v2 |= 2u;
        sub_426AC0(&v5, 4u);
        if ( v5 != -86065425 && v5 == -86050098 )
        {
          sub_426C20(&v4, 4u);
          if ( v4 == a2 )
            v2 |= 4u;
        }
        sub_4269F0();
      }
    }
  }
  return v2;
}

//----- (004CF5F0) --------------------------------------------------------
int __cdecl sub_4CF5F0(char *a1, int a2)
{
  char *v2; // ebx
  char *v3; // eax
  char *v4; // eax
  int result; // eax
  char *v6; // eax
  int v7; // esi
  char *v8; // eax
  int v9; // eax
  int v10; // [esp+Ch] [ebp-65Ch]
  int v11; // [esp+10h] [ebp-658h]
  char v12[20]; // [esp+14h] [ebp-654h]
  char v13[64]; // [esp+28h] [ebp-640h]
  CHAR FileName[1024]; // [esp+68h] [ebp-600h]
  CHAR v15[256]; // [esp+468h] [ebp-200h]
  char v16[256]; // [esp+568h] [ebp-100h]

  sub_481410();
  sub_4DAC00();
  sub_5799C0();
  v2 = a1;
  if ( !a1 )
    return 0;
  if ( _strcmpi((const char *)&byte_587000[191676], a1) )
  {
    if ( *a1 == 35 )
    {
      v3 = sub_409E10();
      sub_4D39F0(v3);
      strcpy(v13, a1 + 1);
      v4 = strchr(v13, 46);
      if ( v4 )
        *v4 = 0;
      sub_4D42E0(v13);
      nox_sprintf(v12, (const char *)&byte_587000[191684], v13);
      sub_409D70(v12);
      if ( !sub_4D4320() )
      {
        sub_4D12E0(1);
        return 0;
      }
      sub_4D3C30();
      v2 = v12;
    }
  }
  else
  {
    v2 = (char *)&byte_5D4594[1523080];
  }
  if ( strchr(v2, 92) )
  {
    strcpy(FileName, v2);
  }
  else
  {
    strcpy(FileName, "maps\\");
    strncat(FileName, v2, strlen(v2) - 4);
    *(_WORD *)&FileName[strlen(FileName)] = *(_WORD *)&byte_587000[191700];
    strcat(FileName, v2);
  }
  if ( _access(FileName, 0) == -1 )
  {
    v6 = strchr(FileName, 46);
    if ( v6 )
    {
      v7 = v6 - FileName;
      strncpy(v16, FileName, v6 - FileName);
      v16[v7] = 0;
      nox_sprintf(v15, (const char *)&byte_587000[191712], v16, &byte_587000[191704]);
      if ( _access(v15, 0) == -1 )
        return 0;
      if ( !sub_57BC50(v15, FileName) )
        return 0;
    }
  }
  v8 = sub_409B40();
  sub_4CFE10(v8);
  if ( a2 )
    v9 = sub_426910(FileName, 1, -1);
  else
    v9 = sub_426910(FileName, 1, 19);
  if ( !v9 )
    return 0;
  sub_426AC0(&v10, 4u);
  if ( v10 == -86065425 )
  {
    sub_409B10(0);
  }
  else
  {
    if ( v10 != -86050098 )
    {
      sub_4269F0();
      return 0;
    }
    sub_426C20(&v11, 4u);
    sub_409B10(v11);
  }
  if ( !sub_4CFCE0() )
    return 0;
  sub_507290();
  sub_4269F0();
  if ( !sub_40A5C0(0x200000) )
  {
    sub_4CF990();
    nullsub_21();
    if ( sub_43AF70() == 1 )
      sub_416690();
    sub_40A540(0x4000000);
    sub_470680();
    sub_4D0550(FileName);
    sub_4161E0();
    if ( !sub_40A5C0(128) )
      sub_4165F0(0, 1);
  }
  result = 1;
  strcpy((char *)&byte_5D4594[1523080], v2);
  return result;
}
// 4CF980: using guessed type void nullsub_21(void);
// 4CF5F0: using guessed type char var_100[256];

//----- (004CF990) --------------------------------------------------------
char sub_4CF990()
{
  char *v0; // esi
  char *v1; // eax
  unsigned __int16 v2; // ax
  int v3; // eax
  BOOL v4; // esi
  __int16 v5; // ax

  v0 = sub_4165B0();
  if ( sub_40A5C0(1024) && (*(int *)&byte_5D4594[3803228] < 0 || !(v0[53] & 4)) )
    sub_40A5E0(0);
  sub_455C10();
  sub_456050();
  if ( sub_40A5C0(4096) && *(int *)&byte_5D4594[3803228] < 0 )
  {
    sub_4D6B10(1);
    sub_419030(1);
  }
  v1 = sub_409B40();
  if ( sub_4CFE10(v1) )
  {
    v2 = sub_4CFFA0((int)&byte_5D4594[3801836]);
    if ( byte_5D4594[3803228] & 1 )
    {
      sub_40A540(6128);
      sub_417E10();
      LOBYTE(v3) = sub_40A4D0(2048);
    }
    else if ( byte_5D4594[3803228] & 2 )
    {
      v4 = sub_40A5C0(128);
      sub_40A540(6128);
      LOBYTE(v3) = sub_40A4D0(4096);
      if ( v4 )
        LOBYTE(v3) = sub_4D6C70();
    }
    else if ( (int)*(_DWORD *)&byte_5D4594[3803228] >= 0 )
    {
      if ( !(*((_WORD *)v0 + 26) & v2) )
        *((_WORD *)v0 + 26) = sub_4CFC90((int)&byte_5D4594[3801836]) | *((_WORD *)v0 + 26) & 0xE80F;
      if ( !(v0[52] & 0x10) )
        sub_4CFC30();
      v5 = *((_WORD *)v0 + 26);
      if ( v5 & 0x20 )
      {
        v3 = sub_417EA0();
        if ( v3 )
        {
          sub_40A540(6128);
          LOBYTE(v3) = sub_40A4D0(32);
        }
      }
      else if ( v5 & 0x40 )
      {
        LOBYTE(v3) = sub_417F30();
        if ( v3 )
        {
          sub_40A540(6128);
          sub_40A4D0(64);
          LOBYTE(v3) = sub_424BB0(132);
        }
      }
      else if ( v5 & 0x10 )
      {
        v3 = sub_4180D0();
        if ( v3 )
        {
          sub_40A540(6128);
          LOBYTE(v3) = sub_40A4D0(16);
        }
      }
      else if ( v5 & 0x400 )
      {
        if ( !sub_40A5C0(1024) )
          sub_40A5E0(1);
        sub_40A540(6128);
        LOBYTE(v3) = sub_40A4D0(1024);
      }
      else
      {
        sub_40A540(6128);
        LOBYTE(v3) = sub_40A4D0(256);
      }
    }
    else
    {
      sub_40A1F0(0);
      sub_40A540(6128);
      sub_40A4D0(128);
      LOBYTE(v3) = sub_417DD0();
      if ( (_BYTE)v3 )
      {
        sub_418640();
        v3 = sub_417DA0(2);
        if ( !v3 )
        {
          v3 = sub_40A5C0(0x8000);
          if ( !v3 )
            LOBYTE(v3) = (unsigned int)sub_418690(1);
        }
      }
    }
  }
  else
  {
    v3 = sub_40A5C0(512);
    if ( !v3 )
    {
      sub_40A540(6128);
      sub_40A4D0(256);
      LOBYTE(v3) = sub_4D0D90(1);
    }
  }
  return v3;
}
// 4CFAF1: variable 'v2' is possibly undefined
// 4CFB53: variable 'v3' is possibly undefined

//----- (004CFC30) --------------------------------------------------------
void sub_4CFC30()
{
  int v0; // esi
  int v1; // edi

  if ( !*(_DWORD *)&byte_5D4594[1523076] )
    *(_DWORD *)&byte_5D4594[1523076] = sub_4E3AA0((CHAR *)&byte_587000[191720]);
  v0 = sub_4DA790();
  if ( v0 )
  {
    do
    {
      v1 = sub_4DA7A0(v0);
      if ( *(unsigned __int16 *)(v0 + 4) == *(_DWORD *)&byte_5D4594[1523076] )
      {
        sub_4E5CC0(v0);
        sub_4EC6A0(v0);
      }
      v0 = v1;
    }
    while ( v1 );
  }
}

//----- (004CFC90) --------------------------------------------------------
int __cdecl sub_4CFC90(int a1)
{
  int v1; // eax

  v1 = *(_DWORD *)(a1 + 1392);
  if ( v1 & 4 )
    return 256;
  if ( v1 & 0x20 )
    return 1024;
  if ( v1 & 8 )
    return 32;
  if ( v1 & 0x10 )
    return 16;
  if ( v1 & 0x40 )
    return 64;
  return (v1 & 2) != 0 ? 4096 : 128;
}

//----- (004CFCE0) --------------------------------------------------------
int sub_4CFCE0()
{
  _DWORD *v0; // eax
  int v1; // esi
  int v3; // [esp+4h] [ebp-114h]
  int v4; // [esp+8h] [ebp-110h]
  int v5[2];
  int v7; // [esp+14h] [ebp-104h]
  char v8[256]; // [esp+18h] [ebp-100h]

  sub_426AC0(&v5[0], 4u);
  sub_426AC0(&v5[1], 4u);
  sub_426A80(&v5);
  while ( 1 )
  {
    LOBYTE(v3) = 0;
    sub_426AC0(&v3, 1u);
    if ( !(_BYTE)v3 )
      break;
    sub_426AC0(v8, (unsigned __int8)v3);
    sub_426C20(&v7, 4u);
    if ( !sub_426EA0(0, v8, &v4) )
    {
      if ( v4 == 1 )
        return 0;
      v0 = sub_4E3810(v8);
      v1 = (int)v0;
      if ( !v0 || !((int (__cdecl *)(_DWORD *, _DWORD))v0[176])(v0, 0) )
        goto LABEL_9;
      sub_4F3F50(v1, 0, 0);
    }
  }
  if ( !sub_579CA0() )
  {
LABEL_9:
    sub_4269F0();
    return 0;
  }
  sub_4DAF10();
  if ( sub_40A5C0(1) )
  {
    sub_5799C0();
    sub_4DAC00();
  }
  sub_4DB090();
  return 1;
}

//----- (004CFDF0) --------------------------------------------------------
int __cdecl sub_4CFDF0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1523072] = a1;
  return result;
}

//----- (004CFE00) --------------------------------------------------------
int sub_4CFE00()
{
  return *(_DWORD *)&byte_5D4594[1523072];
}

//----- (004CFE10) --------------------------------------------------------
int __cdecl sub_4CFE10(const char *a1)
{
  char *v1; // edi
  unsigned __int8 v2; // cl
  int result; // eax
  int v4; // [esp+10h] [ebp-108h]
  int v5; // [esp+14h] [ebp-104h]
  char v6[256]; // [esp+18h] [ebp-100h]

  strcpy(v6, "maps\\");
  strcat(v6, a1);
  *(_WORD *)&v6[strlen(v6)] = *(_WORD *)&byte_587000[191736];
  strcat(v6, a1);
  v1 = &v6[strlen(v6) + 1];
  v2 = byte_587000[191744];
  *(_DWORD *)--v1 = *(_DWORD *)&byte_587000[191740];
  v1[4] = v2;
  result = sub_426910(v6, 1, 19);
  if ( result )
  {
    sub_426AC0(&v4, 4u);
    if ( v4 != -86065425 )
    {
      if ( v4 != -86050098 )
      {
        sub_4269F0();
        return 0;
      }
      sub_426C20(&v5, 4u);
    }
    sub_426AC0(v6, 0x20u);
    if ( sub_42A6E0() )
    {
      sub_4269F0();
      result = 1;
    }
    else
    {
      sub_4269F0();
      result = 0;
    }
  }
  return result;
}

//----- (004CFF50) --------------------------------------------------------
int __cdecl sub_4CFF50(int a1)
{
  int result; // eax

  result = 0;
  if ( a1 & 1 )
    result = 512;
  if ( a1 & 2 )
    BYTE1(result) |= 0x10u;
  if ( a1 & 4 )
    BYTE1(result) |= 1u;
  if ( a1 & 0x20 )
    BYTE1(result) |= 4u;
  if ( a1 & 8 )
    LOBYTE(result) = result | 0x20;
  if ( a1 & 0x10 )
    LOBYTE(result) = result | 0x10;
  if ( a1 & 0x40 )
    LOBYTE(result) = result | 0x40;
  if ( a1 < 0 )
    LOBYTE(result) = result | 0x80;
  return result;
}

//----- (004CFFA0) --------------------------------------------------------
int __cdecl sub_4CFFA0(int a1)
{
  return sub_4CFF50(*(_DWORD *)(a1 + 1392));
}

//----- (004CFFC0) --------------------------------------------------------
int __cdecl sub_4CFFC0(int a1)
{
  return sub_4CFF50(*(_DWORD *)(a1 + 28));
}

//----- (004CFFE0) --------------------------------------------------------
int __cdecl sub_4CFFE0(int a1)
{
  int result; // eax

  result = sub_4DA870();
  if ( !result )
    return 0;
  while ( *(_DWORD *)(result + 44) != a1 )
  {
    result = sub_4DA880(result);
    if ( !result )
      return 0;
  }
  return result;
}

//----- (004D0010) --------------------------------------------------------
int __cdecl sub_4D0010(_DWORD *a1, int a2)
{
  int i; // eax
  _DWORD *v3; // edi
  CHAR *v4; // eax
  int (__cdecl *v5)(int); // eax
  int v6; // esi
  int v7; // eax
  int v8; // ecx
  int v9; // eax
  int v10; // ecx
  int v11; // esi
  int v12; // eax
  int v13; // ecx
  int v14; // esi
  char *v15; // eax
  int v16; // ecx
  int v17; // esi
  char *v18; // eax
  int v19; // esi
  _DWORD *v20; // eax
  int v21; // eax
  int v22; // esi
  char *v23; // eax

  for ( i = sub_4DA870(); i; i = sub_4DA880(i) )
  {
    *(_DWORD *)(i + 44) = *(_DWORD *)(i + 40);
    *(_DWORD *)(i + 40) = a2++;
  }
  v3 = (_DWORD *)sub_4DA870();
  if ( v3 )
  {
    while ( 1 )
    {
      v4 = (CHAR *)sub_4E39D0((int)v3);
      v5 = *(int (__cdecl **)(int))(sub_4E3B60(v4) + 212);
      if ( v5 != sub_4F53D0 )
        break;
      v6 = v3[187];
      v7 = sub_4CFFE0(*(_DWORD *)(v6 + 8));
      if ( !v7 )
        goto LABEL_7;
      v8 = *(_DWORD *)(v7 + 40);
      *(_DWORD *)(v6 + 4) = v7;
      *(_DWORD *)(v6 + 8) = v8;
LABEL_28:
      v3 = (_DWORD *)sub_4DA880((int)v3);
      if ( !v3 )
        return a2;
    }
    if ( v5 != sub_4F54A0 )
    {
      if ( v5 == sub_4F5300 )
      {
        v11 = v3[187];
        v12 = sub_4CFFE0(*(_DWORD *)(v11 + 16));
        if ( v12 )
        {
          v13 = *(_DWORD *)(v12 + 40);
          *(_DWORD *)(v11 + 12) = v12;
          *(_DWORD *)(v11 + 16) = v13;
        }
        else
        {
          *(_DWORD *)(v11 + 16) = 0;
          *(_DWORD *)(v11 + 12) = 0;
        }
      }
      else if ( v5 == sub_4F51D0 )
      {
        v14 = v3[175];
        v15 = sub_426A70();
        v16 = *(_DWORD *)(v14 + 12);
        *(_DWORD *)(v14 + 8) += *a1 - 23 * *(_DWORD *)v15;
        *(_DWORD *)(v14 + 12) = a1[1] - 23 * *((_DWORD *)v15 + 1) + v16;
      }
      else if ( v5 == sub_4F4B90 )
      {
        v17 = v3[175];
        v18 = sub_426A70();
        *(float *)(v17 + 80) = (double)(int)(*a1 - 23 * *(_DWORD *)v18) + *(float *)(v17 + 80);
        *(float *)(v17 + 84) = (double)(int)(a1[1] - 23 * *((_DWORD *)v18 + 1)) + *(float *)(v17 + 84);
      }
      else if ( v5 == sub_4F5730 )
      {
        v19 = v3[187];
        v20 = (_DWORD *)sub_579C60(*(_DWORD *)(v19 + 8));
        if ( v20 )
          *(_DWORD *)(v19 + 8) = *v20;
        else
          *(_DWORD *)(v19 + 8) = 0;
        v21 = sub_4CFFE0(*(_DWORD *)(v19 + 32));
        if ( v21 )
          *(_DWORD *)(v19 + 32) = *(_DWORD *)(v21 + 40);
        else
          *(_DWORD *)(v19 + 32) = 0;
      }
      else if ( v5 == sub_4F5890 )
      {
        v22 = v3[173];
        v23 = sub_426A70();
        *(float *)(v22 + 28) = (double)(int)(*a1 - 23 * *(_DWORD *)v23) + *(float *)(v22 + 28);
        *(float *)(v22 + 32) = (double)(int)(a1[1] - 23 * *((_DWORD *)v23 + 1)) + *(float *)(v22 + 32);
      }
      goto LABEL_28;
    }
    v6 = v3[187];
    v9 = sub_4CFFE0(*(_DWORD *)(v6 + 8));
    if ( v9 )
    {
      v10 = *(_DWORD *)(v9 + 40);
      *(_DWORD *)(v6 + 4) = v9;
      *(_DWORD *)(v6 + 8) = v10;
      goto LABEL_28;
    }
LABEL_7:
    *(_DWORD *)(v6 + 8) = 0;
    *(_DWORD *)(v6 + 4) = 0;
    goto LABEL_28;
  }
  return a2;
}

//----- (004D0250) --------------------------------------------------------
int __cdecl sub_4D0250(char *a1, char *a2, int a3, int a4)
{
  int result; // eax
  FILE *v5; // esi
  _DWORD *v6; // edi
  int v7; // ebp
  _DWORD *v8; // esi
  int i; // eax
  int j; // eax
  int v11; // esi
  int k; // eax
  int l; // eax
  int v14; // [esp+10h] [ebp-148h]
  int v15; // [esp+14h] [ebp-144h]
  int v16; // [esp+18h] [ebp-140h]
  int v17[2]; // [esp+1Ch] [ebp-13Ch]
  int v19; // [esp+24h] [ebp-134h]
  int v20; // [esp+28h] [ebp-130h]
  int v21; // [esp+2Ch] [ebp-12Ch]
  int v22; // [esp+30h] [ebp-128h]
  int v23; // [esp+34h] [ebp-124h]
  int v24; // [esp+38h] [ebp-120h]
  int v25; // [esp+3Ch] [ebp-11Ch]
  int v26; // [esp+40h] [ebp-118h]
  int v27; // [esp+44h] [ebp-114h]
  int4 v28; // [esp+48h] [ebp-110h]
  char v29[256]; // [esp+58h] [ebp-100h]

  if ( a3 <= 0 )
    return 0;
  result = sub_426910(a1, 1, -1);
  if ( result )
  {
    v5 = sub_426A60();
    fread(&v16, 4u, 1u, v5);
    if ( v16 == a4 )
    {
      fread(&v17[0], 4u, 1u, v5);
      fread(&v17[1], 4u, 1u, v5);
      sub_426A80(v17);
      fread(&v19, 4u, 1u, v5);
      fread(&v20, 4u, 1u, v5);
      fread(&v25, 4u, 1u, v5);
      fread(&v26, 4u, 1u, v5);
      fread(&v21, 4u, 1u, v5);
      fread(&v22, 4u, 1u, v5);
      fread(&v23, 4u, 1u, v5);
      fread(&v24, 4u, 1u, v5);
      v6 = a2;
      if ( !a2 )
        v6 = &v19;
      sub_428170(v6, &v28);
      v7 = sub_426A30();
      sub_426A20(5);
      sub_426A50(1);
      while ( 1 )
      {
        sub_426AC0(&v15, 1u);
        if ( !(_BYTE)v15 )
          break;
        sub_426AC0(v29, (unsigned __int8)v15);
        sub_426AC0(&v27, 4u);
        if ( !sub_426EA0((int)v6, v29, &v14) )
        {
          if ( v14 == 1 )
            goto LABEL_20;
          v8 = sub_4E3810(v29);
          if ( !v8 )
          {
            sub_426A50(0);
            return 0;
          }
          if ( !((int (__cdecl *)(_DWORD *, int4 *))v8[176])(v8, &v28) )
          {
            sub_426A20(v7);
            sub_4E38A0((int)v8);
            sub_4269F0();
            return 0;
          }
          sub_4F3F50((int)v8, 0, &v28.field_0);
        }
      }
      for ( i = sub_4DA870(); i; i = sub_4DA880(i) )
        *(_DWORD *)(i + 16) |= 0x80000000;
      sub_426A50(0);
      sub_426A20(v7);
      sub_4269F0();
      if ( !sub_579D20() )
      {
LABEL_20:
        sub_426A20(v7);
        sub_4269F0();
        return 0;
      }
      for ( j = sub_579890(); j; j = sub_5798A0(j) )
        *(_DWORD *)(j + 480) |= 0x80000000;
      v11 = sub_4D0010(&v28, a3);
      for ( k = sub_579890(); k; k = sub_5798A0(k) )
        *(_DWORD *)(k + 4) = 0;
      for ( l = sub_4DA870(); l; l = sub_4DA880(l) )
        *(_DWORD *)(l + 44) = 0;
      sub_5799C0();
      sub_4DB030();
      result = v11;
    }
    else
    {
      result = 0;
    }
  }
  return result;
}

//----- (004D0550) --------------------------------------------------------
int __cdecl sub_4D0550(char *a1)
{
  int result; // eax
  unsigned int v2; // kr08_4
  char v3; // cl
  int v4; // edx
  unsigned __int8 v5; // al
  char *v6; // edi
  char *v7; // edi
  unsigned __int8 v8; // cl
  unsigned __int8 v9; // [esp+4h] [ebp-104h]
  char v10[256]; // [esp+8h] [ebp-100h]

  result = 0;
  if ( a1 )
  {
    v10[0] = 0;
    strncat(v10, a1, strlen(a1));
    v2 = strlen(v10) + 1;
    v3 = v2 - 1;
    v9 = v2 - 1;
    if ( (_BYTE)v2 != 1 )
    {
      while ( v10[v9] != 92 )
      {
        v9 = --v3;
        if ( !v3 )
          goto LABEL_7;
      }
      v10[v9 + 1] = 0;
    }
LABEL_7:
    v4 = *(_DWORD *)&byte_587000[191752];
    v5 = byte_587000[191756];
    v6 = &v10[strlen(v10)];
    *(_DWORD *)v6 = *(_DWORD *)&byte_587000[191748];
    *((_DWORD *)v6 + 1) = v4;
    v6[8] = v5;
    if ( !sub_4D0670(v10) )
    {
      v10[0] = 0;
      strncat(v10, a1, strlen(a1) - 4);
      v7 = &v10[strlen(v10) + 1];
      v8 = byte_587000[191764];
      *(_DWORD *)--v7 = *(_DWORD *)&byte_587000[191760];
      v7[4] = v8;
      sub_4D0670(v10);
    }
    if ( sub_43AF70() == 1 )
      sub_4D0670((char *)&byte_587000[191768]);
    result = 1;
  }
  return result;
}

//----- (004D0670) --------------------------------------------------------
int __cdecl sub_4D0670(char *a1)
{
  int v1; // ebp
  FILE *v2; // eax
  FILE *v3; // esi
  char *v4; // eax
  int v5; // eax
  char v7[255]; // [esp+Ch] [ebp-300h]
  wchar_t v8[256]; // [esp+10Ch] [ebp-200h]

  v1 = 6128;
  v2 = fopen(a1, "r");
  v3 = v2;
  if ( !v2 )
    return 0;
  if ( !feof(v3) )
  {
    do
    {
      memset(v7, 0, 0xFCu);
      *(_WORD *)&v7[252] = 0;
      v7[254] = 0;
      fgets(v7, 255, v3);
      v4 = strchr(v7, 10);
      if ( v4 )
        *v4 = 0;
      if ( v7[0] )
      {
        nox_swprintf(v8, (const wchar_t *)&byte_587000[191788], v7);
        v5 = sub_57AE30(v7);
        if ( v5 )
        {
          v1 = v5;
        }
        else if ( sub_40A5C0(v1) )
        {
          sub_443C80(v8, 1);
        }
      }
    }
    while ( !feof(v3) );
  }
  fclose(v3);
  return 1;
}

//----- (004D0760) --------------------------------------------------------
_DWORD *__cdecl sub_4D0760(int a1)
{
  int *v1; // edi

  v1 = sub_425890((int *)&byte_5D4594[1523060]);
  if ( !v1 )
    return sub_4258E0((int)&byte_5D4594[1523060], (_DWORD *)a1);
  while ( strcmp((const char *)(a1 + 12), (const char *)v1 + 12) > 0 )
  {
    v1 = sub_4258A0(v1);
    if ( !v1 )
      return sub_4258E0((int)&byte_5D4594[1523060], (_DWORD *)a1);
  }
  return sub_4258E0((int)v1, (_DWORD *)a1);
}

//----- (004D07F0) --------------------------------------------------------
HANDLE sub_4D07F0()
{
  HANDLE result; // eax
  HANDLE v1; // ebp
  char *v2; // ebp
  HANDLE v3; // [esp+4h] [ebp-150h]
  char v4[12]; // [esp+8h] [ebp-14Ch]
  struct _WIN32_FIND_DATAA FindFileData; // [esp+14h] [ebp-140h]

  sub_425760(&byte_5D4594[1523060]);
  result = FindFirstFileA((LPCSTR)&byte_587000[191796], &FindFileData);
  v1 = result;
  v3 = result;
  if ( result != (HANDLE)-1 )
  {
    do
    {
      if ( FindFileData.dwFileAttributes & 0x10
        && (_strnicmp(FindFileData.cFileName, (const char *)&byte_587000[191808], 3u)
         && _strnicmp(FindFileData.cFileName, (const char *)&byte_587000[191812], 3u)
         && _strnicmp(FindFileData.cFileName, (const char *)&byte_587000[191816], 3u)
         || FindFileData.cFileName[3] < 48
         || FindFileData.cFileName[3] > 57)
        && strcmp(FindFileData.cFileName, (const char *)&byte_587000[191820])
        && strcmp(FindFileData.cFileName, (const char *)&byte_587000[191824]) )
      {
        strncpy(v4, FindFileData.cFileName, 8u);
        v4[8] = 0;
        if ( sub_4CFE10(v4) )
        {
          v2 = (char *)malloc(0x24u);
          sub_425770(v2);
          strcpy(v2 + 12, v4);
          *((_DWORD *)v2 + 6) = 1;
          *((_DWORD *)v2 + 7) = *(_DWORD *)&byte_5D4594[3803228];
          v2[33] = byte_5D4594[3803233];
          v2[32] = byte_5D4594[3803232];
          sub_4D0760((int)v2);
          v1 = v3;
        }
      }
    }
    while ( FindNextFileA(v1, &FindFileData) );
    result = (HANDLE)FindClose(v1);
  }
  return result;
}

//----- (004D0970) --------------------------------------------------------
int *sub_4D0970()
{
  int *result; // eax
  int *v1; // esi
  int *v2; // edi

  result = sub_425890((int *)&byte_5D4594[1523060]);
  v1 = result;
  if ( result )
  {
    do
    {
      v2 = sub_4258A0(v1);
      sub_425920((_DWORD **)v1);
      free(v1);
      v1 = v2;
    }
    while ( v2 );
  }
  return result;
}

//----- (004D09B0) --------------------------------------------------------
int *sub_4D09B0()
{
  return sub_425890((int *)&byte_5D4594[1523060]);
}

//----- (004D09C0) --------------------------------------------------------
int *__cdecl sub_4D09C0(int *a1)
{
  return sub_4258A0(a1);
}

//----- (004D09D0) --------------------------------------------------------
int *__cdecl sub_4D09D0(char *a1)
{
  int *v1; // esi

  v1 = sub_4D09B0();
  if ( !v1 )
    return 0;
  while ( _strcmpi(a1, (const char *)v1 + 12) || !v1[6] )
  {
    v1 = sub_4D09C0(v1);
    if ( !v1 )
      return 0;
  }
  return v1;
}

//----- (004D0A20) --------------------------------------------------------
void sub_4D0A20()
{
  srand(0x7D3u);
}

//----- (004D0A30) --------------------------------------------------------
FILE *sub_4D0A30()
{
  int v0; // ebp
  char *v1; // edi
  int v2; // edx
  int v3; // eax
  unsigned __int8 *v4; // edi
  __int16 v5; // cx
  FILE *result; // eax
  FILE *v7; // ebx
  int v8; // eax
  int v9; // edx
  int v10; // eax
  int v11; // ebx
  char *v12; // eax
  int v13; // eax
  int v14; // ebx
  FILE *v15; // [esp+10h] [ebp-108h]
  char v16[128]; // [esp+18h] [ebp-100h]
  char v17[128]; // [esp+98h] [ebp-80h]

  v0 = 1;
  memset(&byte_5D4594[1548428], 0, 0x18u);
  strcpy((char *)&byte_5D4594[1524108], sub_409E10());
  strcat((char *)&byte_5D4594[1524108], "\\mapcycle.txt");
  result = fopen((const char *)&byte_5D4594[1524108], "r");
  v7 = result;
  v15 = result;
  if ( 0 )
  {
    if ( /*fgets(v16, 127, result)*/ 0 )
    {
      sub_4D0CC0(v16);
      v8 = sub_4D0C80(v16);
      if ( v8 < 0 )
      {
        v9 = *(_DWORD *)&byte_5D4594[1548432];
        strcpy((char *)&byte_5D4594[128 * *(_DWORD *)&byte_5D4594[1548432] + 1532428], v16);
        *(_DWORD *)&byte_5D4594[1548432] = v9 + 1;
      }
      else
      {
        v0 = v8;
      }
    }
    while ( !feof(v7) )
    {
      if ( fgets(v16, 127, v7) )
      {
        sub_4D0CC0(v16);
        v10 = sub_4D0C80(v16);
        if ( v10 < 0 )
        {
          if ( *(int *)&byte_5D4594[4 * v0 + 1548428] < 25 && v16[0] )
          {
            v11 = sub_4D0C70(v0);
            strcpy(v17, v16);
            v12 = strtok(v17, (const char *)&byte_587000[191996]);
            if ( sub_4CFE10(v12) )
            {
              v13 = sub_4CFFA0((int)&byte_5D4594[3801836]);
              if ( v13 & v11 )
              {
                v14 = *(_DWORD *)&byte_5D4594[4 * v0 + 1548428];
                strcpy((char *)&byte_5D4594[128 * (v14 + 20 * v0 + 5 * v0) + 1529228], v16);
                *(_DWORD *)&byte_5D4594[4 * v0 + 1548428] = v14 + 1;
              }
            }
            v7 = v15;
          }
        }
        else
        {
          v0 = v10;
        }
      }
    }
    result = (FILE *)fclose(v7);
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1548484] = 0;
  }
  return result;
}
// 4D0BF1: variable 'v13' is possibly undefined

//----- (004D0C70) --------------------------------------------------------
int __cdecl sub_4D0C70(int a1)
{
  return *(_DWORD *)&byte_587000[8 * a1 + 191836];
}

//----- (004D0C80) --------------------------------------------------------
int __cdecl sub_4D0C80(char *a1)
{
  int v1; // edi
  const char **v2; // esi

  v1 = 0;
  v2 = (const char **)&byte_587000[191832];
  while ( _strcmpi(*v2, a1) )
  {
    v2 += 2;
    ++v1;
    if ( (int)v2 >= (int)&byte_587000[191880] )
      return -1;
  }
  return v1;
}

//----- (004D0CC0) --------------------------------------------------------
void __cdecl sub_4D0CC0(char *a1)
{
  char *v1; // eax
  char *v2; // eax

  if ( a1 )
  {
    v1 = strchr(a1, 13);
    if ( v1 )
      *v1 = 0;
    v2 = strchr(a1, 10);
    if ( v2 )
      *v2 = 0;
  }
}

//----- (004D0CF0) --------------------------------------------------------
char *sub_4D0CF0()
{
  int v0; // eax
  int v1; // eax
  int v2; // edi
  int v4; // esi

  v0 = sub_40A5B0();
  v1 = sub_4D0D50(v0);
  v2 = *(_DWORD *)&byte_5D4594[4 * v1 + 1548428];
  if ( !v2 )
    return 0;
  v4 = *(_DWORD *)&byte_5D4594[4 * v1 + 1548452];
  if ( v4 > v2 )
  {
    *(_DWORD *)&byte_5D4594[4 * v1 + 1548452] = 0;
    v4 = 0;
  }
  *(_DWORD *)&byte_5D4594[4 * v1 + 1548452] = (*(_DWORD *)&byte_5D4594[4 * v1 + 1548452] + 1) % v2;
  return (char *)&byte_5D4594[128 * (v4 + 20 * v1 + 5 * v1) + 1529228];
}

//----- (004D0D50) --------------------------------------------------------
int __cdecl sub_4D0D50(int a1)
{
  int result; // eax
  unsigned __int8 *v2; // ecx

  result = 0;
  v2 = &byte_587000[191836];
  while ( !(a1 & *(_DWORD *)v2) )
  {
    v2 += 8;
    ++result;
    if ( (int)v2 >= (int)&byte_587000[191884] )
      return 0;
  }
  return result;
}

//----- (004D0D70) --------------------------------------------------------
BOOL sub_4D0D70()
{
  return *(_DWORD *)&byte_5D4594[1548484] || *(_DWORD *)&byte_5D4594[2650636] & 0x40000;
}

//----- (004D0D90) --------------------------------------------------------
int __cdecl sub_4D0D90(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1548484] = a1;
  return result;
}

//----- (004D0DA0) --------------------------------------------------------
int sub_4D0DA0()
{
  int result; // eax

  result = 0;
  memset(&byte_5D4594[1548452], 0, 0x18u);
  memset(&byte_5D4594[1548428], 0, 0x18u);
  return result;
}

//----- (004D0DC0) --------------------------------------------------------
int __cdecl sub_4D0DC0(int a1, int a2)
{
  int result; // eax

  result = sub_4D0D50(a1);
  *(_DWORD *)&byte_5D4594[4 * result + 1548452] = a2;
  return result;
}

//----- (004D0DE0) --------------------------------------------------------
int __cdecl sub_4D0DE0(int a1)
{
  return *(_DWORD *)&byte_5D4594[4 * sub_4D0D50(a1) + 1548452];
}

//----- (004D0E00) --------------------------------------------------------
int sub_4D0E00()
{
  unsigned int v0; // eax
  int *i; // ebp
  char v2; // ah
  int v3; // edx
  unsigned __int8 v4; // al
  unsigned __int8 *v5; // edi
  int v6; // eax
  int result; // eax
  int v8; // ecx
  int v9; // ebp
  unsigned __int8 *v10; // ebx
  int v11; // edi
  int v12; // esi
  int v13; // [esp+10h] [ebp-4h]

  v0 = time(0);
  srand(v0);
  *(_DWORD *)&byte_5D4594[1548476] = 0;
  for ( i = sub_4D09B0(); i; i = sub_4D09C0(i) )
  {
    if ( i[6] )
    {
      if ( sub_4CFFC0((int)i) & 0x1000 )
      {
        if ( *(int *)&byte_5D4594[1548476] < 128 )
        {
          v3 = 32 * *(_DWORD *)&byte_5D4594[1548476];
          strcpy((char *)&byte_5D4594[32 * *(_DWORD *)&byte_5D4594[1548476] + 1525136], (const char *)i + 12);
          v4 = byte_587000[192004];
          v5 = &byte_5D4594[v3 + 1525136 + strlen((const char *)&byte_5D4594[v3 + 1525136])];
          *(_DWORD *)v5 = *(_DWORD *)&byte_587000[192000];
          v5[4] = v4;
          v6 = *(_DWORD *)&byte_5D4594[1548476] + 1;
          *(_DWORD *)&byte_5D4594[v3 + 1525132] = 0;
          *(_DWORD *)&byte_5D4594[1548476] = v6;
        }
      }
    }
  }
  result = *(_DWORD *)&byte_5D4594[1548476];
  v8 = 1;
  if ( *(_DWORD *)&byte_5D4594[1548476] > 0 )
  {
    v9 = 1;
    v10 = &byte_5D4594[1525132];
    do
    {
      if ( !*(_DWORD *)v10 )
      {
        *(_DWORD *)v10 = v8++;
        v13 = v8;
        v11 = v9;
        if ( v9 < result )
        {
          v12 = (int)(v10 + 32);
          do
          {
            if ( !_strnicmp((const char *)v10 + 4, (const char *)(v12 + 4), 6u) )
              *(_DWORD *)v12 = *(_DWORD *)v10;
            result = *(_DWORD *)&byte_5D4594[1548476];
            ++v11;
            v12 += 32;
          }
          while ( v11 < *(int *)&byte_5D4594[1548476] );
          v8 = v13;
        }
      }
      ++v9;
      v10 += 32;
    }
    while ( v9 - 1 < result );
  }
  return result;
}
// 4D0E3E: variable 'v2' is possibly undefined

//----- (004D0F30) --------------------------------------------------------
void sub_4D0F30()
{
  int v0; // ecx
  unsigned __int8 *v1; // eax

  v0 = *(_DWORD *)&byte_5D4594[1548476];
  *(_DWORD *)&byte_5D4594[1548480] = 1000;
  if ( *(_DWORD *)&byte_5D4594[1548476] > 0 )
  {
    v1 = &byte_5D4594[1525160];
    do
    {
      *((_DWORD *)v1 - 1) = 0;
      *(_DWORD *)v1 = 0;
      v1 += 32;
      --v0;
    }
    while ( v0 );
  }
}

//----- (004D0F60) --------------------------------------------------------
char *sub_4D0F60()
{
  int v1; // esi
  unsigned __int8 *v2; // ecx
  int v3; // edx
  int v4; // ebx
  unsigned __int8 *v5; // esi
  int v6; // ebp
  unsigned __int8 *v7; // eax
  int v8; // ecx
  int v9; // edx
  int v10; // ecx
  unsigned __int8 *v11; // eax
  int v12; // eax
  int v13; // edi
  int v14; // edx
  unsigned __int8 *i; // ecx
  int v16; // [esp+4h] [ebp-8h]

  if ( !*(_DWORD *)&byte_5D4594[1548476] )
    return 0;
  if ( *(_DWORD *)&byte_5D4594[1548476] == 1 )
    return (char *)&byte_5D4594[1525136];
  v1 = 0;
  v16 = 0;
  if ( *(int *)&byte_5D4594[1548476] <= 0 )
    return (char *)&byte_5D4594[32 * sub_415FA0(0, *(_DWORD *)&byte_5D4594[1548476] - 1) + 1525136];
  v2 = &byte_5D4594[1525156];
  v3 = *(_DWORD *)&byte_5D4594[1548476];
  do
  {
    if ( *(_DWORD *)v2 > v1 )
    {
      v16 = *(_DWORD *)v2;
      v1 = *(_DWORD *)v2;
    }
    v2 += 32;
    --v3;
  }
  while ( v3 );
  if ( !v1 )
    return (char *)&byte_5D4594[32 * sub_415FA0(0, *(_DWORD *)&byte_5D4594[1548476] - 1) + 1525136];
  v4 = 1;
  v5 = &byte_5D4594[1525156];
  v6 = *(_DWORD *)&byte_5D4594[1548476];
  do
  {
    if ( *(_DWORD *)&byte_5D4594[1548476] > 1 )
    {
      v7 = &byte_5D4594[1525188];
      v8 = *(_DWORD *)&byte_5D4594[1548476] - 1;
      do
      {
        if ( *(_DWORD *)v5 != *(_DWORD *)v7 )
          v4 = 0;
        v7 += 32;
        --v8;
      }
      while ( v8 );
    }
    v5 += 32;
    --v6;
  }
  while ( v6 );
  if ( v4 == 1 )
    ++v16;
  v9 = 0;
  v10 = 0;
  v11 = &byte_5D4594[1525132];
  do
  {
    if ( *((_DWORD *)v11 + 6) < v16
      && v10 != *(_DWORD *)&byte_587000[191880]
      && *(_DWORD *)v11 != *(_DWORD *)&byte_5D4594[32 * *(_DWORD *)&byte_587000[191880] + 1525132]
      && *(_DWORD *)&byte_5D4594[1548480] - *((_DWORD *)v11 + 7) > 4 )
    {
      ++v9;
    }
    ++v10;
    v11 += 32;
  }
  while ( v10 < *(int *)&byte_5D4594[1548476] );
  v12 = sub_415FA0(0, v9 - 1);
  v13 = 0;
  v14 = 0;
  if ( *(int *)&byte_5D4594[1548476] <= 0 )
    return (char *)&byte_5D4594[32 * v12 + 1525136];
  for ( i = &byte_5D4594[1525132]; ; i += 32 )
  {
    if ( *((_DWORD *)i + 6) >= v16
      || v14 == *(_DWORD *)&byte_587000[191880]
      || *(_DWORD *)i == *(_DWORD *)&byte_5D4594[32 * *(_DWORD *)&byte_587000[191880] + 1525132]
      || *(_DWORD *)&byte_5D4594[1548480] - *((_DWORD *)i + 7) <= 4 )
    {
      goto LABEL_36;
    }
    if ( v13 == v12 )
      break;
    ++v13;
LABEL_36:
    if ( ++v14 >= *(int *)&byte_5D4594[1548476] )
      return (char *)&byte_5D4594[32 * v12 + 1525136];
  }
  return (char *)&byte_5D4594[32 * v14 + 1525136];
}

//----- (004D10F0) --------------------------------------------------------
void __cdecl sub_4D10F0(char *a1)
{
  int v1; // esi
  const char *i; // edi
  int v3; // edi
  int v4; // eax
  int v5; // ebx
  int v6; // edx
  unsigned __int8 *v7; // ecx

  if ( a1 )
  {
    v1 = 0;
    if ( *(_DWORD *)&byte_5D4594[1548476] > 0 )
    {
      for ( i = (const char *)&byte_5D4594[1525136]; _strcmpi(i, a1); i += 32 )
      {
        if ( ++v1 >= *(int *)&byte_5D4594[1548476] )
          return;
      }
      v3 = *(_DWORD *)&byte_5D4594[1548476];
      v4 = 32 * v1;
      v5 = *(_DWORD *)&byte_5D4594[1548480];
      *(_DWORD *)&byte_587000[191880] = v1;
      *(_DWORD *)&byte_5D4594[v4 + 1525156] = *(_DWORD *)&byte_5D4594[32 * v1 + 1525156] + 1;
      v6 = 0;
      *(_DWORD *)&byte_5D4594[v4 + 1525160] = v5;
      if ( v3 > 0 )
      {
        v7 = &byte_5D4594[1525156];
        do
        {
          if ( *((_DWORD *)v7 - 6) == *(_DWORD *)&byte_5D4594[32 * v1 + 1525132] && v1 != v6 )
          {
            ++*(_DWORD *)v7;
            *((_DWORD *)v7 + 1) = v5;
          }
          ++v6;
          v7 += 32;
        }
        while ( v6 < v3 );
      }
      *(_DWORD *)&byte_5D4594[1548480] = v5 + 1;
    }
  }
}

//----- (004D11A0) --------------------------------------------------------
_DWORD *sub_4D11A0()
{
  _DWORD *result; // eax

  result = *(_DWORD **)&byte_5D4594[1548504];
  if ( !*(_DWORD *)&byte_5D4594[1548504] )
  {
    result = sub_425760(&byte_5D4594[1548492]);
    *(_DWORD *)&byte_5D4594[1548504] = 1;
  }
  return result;
}

//----- (004D11D0) --------------------------------------------------------
int *sub_4D11D0()
{
  int *result; // eax
  int *v1; // esi
  int *v2; // edi

  result = sub_425890((int *)&byte_5D4594[1548492]);
  v1 = result;
  if ( result )
  {
    do
    {
      v2 = sub_4258A0(v1);
      sub_425920((_DWORD **)v1);
      free(v1);
      v1 = v2;
    }
    while ( v2 );
  }
  return result;
}

//----- (004D1210) --------------------------------------------------------
void *__cdecl sub_4D1210(int a1)
{
  void *result; // eax
  void *v2; // esi
  _DWORD *v3; // eax

  result = (void *)sub_4D12A0(a1);
  if ( !result )
  {
    result = sub_417090(a1);
    v2 = result;
    if ( result )
    {
      v3 = malloc(0x10u);
      v3[3] = v2;
      result = sub_4258E0((int)&byte_5D4594[1548492], v3);
    }
  }
  return result;
}

//----- (004D1250) --------------------------------------------------------
int *__cdecl sub_4D1250(int a1)
{
  int *result; // eax
  int *v2; // esi

  result = sub_425890((int *)&byte_5D4594[1548492]);
  v2 = result;
  if ( result )
  {
    while ( *(unsigned __int8 *)(v2[3] + 2064) != a1 )
    {
      result = sub_4258A0(v2);
      v2 = result;
      if ( !result )
        return result;
    }
    sub_425920((_DWORD **)v2);
    free(v2);
  }
  return result;
}

//----- (004D12A0) --------------------------------------------------------
int __cdecl sub_4D12A0(int a1)
{
  int *v1; // eax

  v1 = sub_425890((int *)&byte_5D4594[1548492]);
  if ( !v1 )
    return 0;
  while ( *(unsigned __int8 *)(v1[3] + 2064) != a1 )
  {
    v1 = sub_4258A0(v1);
    if ( !v1 )
      return 0;
  }
  return 1;
}

//----- (004D12E0) --------------------------------------------------------
int __cdecl sub_4D12E0(int a1)
{
  int v1; // edi
  int v2; // esi
  int v3; // edi
  _DWORD *v4; // eax
  int v5; // esi
  _DWORD *v6; // eax
  int i; // esi
  int j; // edi
  int k; // esi
  int v11[3]; // [esp+0h] [ebp-Ch]

  v11[0] = 25;
  v11[1] = 25;
  v11[2] = 25;
  sub_40A4D0(0x80000);
  sub_516F30();
  sub_421B10();
  sub_469B90(v11);
  if ( sub_40A5C0(2) )
    sub_4349C0(v11);
  sub_511E60();
  if ( sub_40A5C0(2048) )
  {
    v1 = a1;
    sub_4FCEB0(a1);
  }
  else
  {
    sub_4FCEB0(0);
    v1 = a1;
  }
  sub_4FF790();
  v2 = sub_4DA7C0();
  if ( v2 )
  {
    do
    {
      v3 = *(_DWORD *)(v2 + 748);
      sub_4F7950(v2);
      *(_DWORD *)(v3 + 296) = 0;
      sub_4E7A60(v2, 1);
      v4 = *(_DWORD **)(v3 + 280);
      *(_WORD *)(v3 + 160) = 0;
      if ( v4 )
        sub_510DC0(v4);
      *(_DWORD *)(v3 + 280) = 0;
      if ( *(int (__cdecl **)(_DWORD *))(v2 + 744) == sub_4FAB20 )
        sub_4FA700(v2);
      v2 = sub_4DA7F0(v2);
    }
    while ( v2 );
    v1 = a1;
  }
  do
  {
    sub_4DAC00();
    sub_4E5BF0(v1);
    sub_4FEEF0();
    sub_4E5EC0();
  }
  while ( sub_4DA870() );
  v5 = sub_4DA790();
  if ( v5 )
  {
    do
    {
      *(_DWORD *)(v5 + 520) = 0;
      if ( sub_4E5B50(v5) && *(_BYTE *)(v5 + 8) & 2 )
      {
        v6 = *(_DWORD **)(v5 + 748);
        v6[309] = -1;
        v6[307] = -1;
        v6[317] = -1;
        v6[311] = -1;
        v6[313] = -1;
        v6[315] = -1;
        v6[319] = -1;
        v6[321] = -1;
        v6[323] = -1;
        v6[325] = -1;
        v6[98] = 0;
        v6[101] = 0;
      }
      v5 = sub_4DA7A0(v5);
    }
    while ( v5 );
    v1 = a1;
  }
  sub_50D1C0();
  for ( i = sub_4DA840(); i; i = sub_4DA850(i) )
  {
    if ( sub_4E5B80(i) )
      sub_4E81D0(i);
  }
  sub_4ECFE0();
  sub_511E20();
  sub_410160();
  if ( v1 )
    sub_4FCAC0(v1, 1);
  else
    sub_4FCAC0(0, 0);
  for ( j = 0; j < 5632; j += 44 )
  {
    for ( k = 0; k < 512; k += 4 )
    {
      *(_BYTE *)(*(_DWORD *)(k + *(_DWORD *)&byte_5D4594[2650668]) + j) = 0;
      *(_DWORD *)(*(_DWORD *)(k + *(_DWORD *)&byte_5D4594[2650668]) + j + 4) = 255;
      *(_DWORD *)(*(_DWORD *)(k + *(_DWORD *)&byte_5D4594[2650668]) + j + 24) = 255;
      sub_422200(*(_DWORD *)(k + *(_DWORD *)&byte_5D4594[2650668]) + j + 4);
      sub_422200(*(_DWORD *)(k + *(_DWORD *)&byte_5D4594[2650668]) + j + 24);
    }
  }
  sub_410730();
  sub_410810();
  sub_579DD0();
  sub_511840();
  sub_5117B0();
  sub_5112F0();
  sub_57C440();
  sub_57C000();
  sub_510E50();
  sub_4D1610();
  sub_4EC5B0();
  sub_50E360();
  sub_50D7E0();
  sub_4E4F80();
  return sub_40A540(0x80000);
}
// 511840: using guessed type int sub_511840(void);

//----- (004D15B0) --------------------------------------------------------
void sub_4D15B0()
{
  *(_DWORD *)&byte_5D4594[1548508] = 1;
}

//----- (004D15C0) --------------------------------------------------------
void sub_4D15C0()
{
  *(_DWORD *)&byte_5D4594[1548508] = 0;
}

//----- (004D15D0) --------------------------------------------------------
int sub_4D15D0()
{
  return *(_DWORD *)&byte_5D4594[1548508];
}

//----- (004D15E0) --------------------------------------------------------
void sub_4D15E0()
{
  srand(0x141Eu);
}

//----- (004D15F0) --------------------------------------------------------
void sub_4D15F0()
{
  *(_DWORD *)&byte_5D4594[1548520] = 1;
}

//----- (004D1600) --------------------------------------------------------
int sub_4D1600()
{
  return *(_DWORD *)&byte_5D4594[1548528];
}

//----- (004D1610) --------------------------------------------------------
void sub_4D1610()
{
  *(_DWORD *)&byte_5D4594[1548528] = 0;
}

//----- (004D1620) --------------------------------------------------------
int sub_4D1620()
{
  int result; // eax

  if ( *(_DWORD *)&byte_5D4594[1548532] )
    result = *(_DWORD *)&byte_5D4594[1548532] + 56;
  else
    result = 0;
  return result;
}

//----- (004D1630) --------------------------------------------------------
int sub_4D1630()
{
  int result; // eax

  result = sub_419B30();
  if ( result )
  {
    sub_424DF0();
    sub_57B200();
    result = sub_517010() != 0;
  }
  return result;
}

//----- (004D1650) --------------------------------------------------------
// Microsoft VisualC 2-14/net runtime
_DWORD *sub_4D1650()
{
  sub_419DB0();
  return sub_5174F0();
}

//----- (004D1660) --------------------------------------------------------
int sub_4D1660()
{
  int result; // eax
  int v1; // eax

  sub_4D15C0();
  *(_DWORD *)&byte_5D4594[2649712] = 2147483648;
  *(_DWORD *)&byte_5D4594[3843628] = 0;
  sub_4D7B40();
  sub_41E4B0(0);
  sub_4E3C70();
  sub_56F1C0();
  sub_416E30();
  sub_40EE60();
  sub_4E4EF0();
  sub_4E4ED0();
  result = sub_501860();
  if ( result )
  {
    result = sub_4E2B60((char *)&byte_587000[196440]);
    if ( result )
    {
      sub_4463E0(1);
      sub_417C60();
      sub_4259C0();
      sub_4D7C60();
      sub_4E3320();
      result = sub_518770();
      if ( result )
      {
        sub_40A5C0(0x200000);
        result = sub_4E3360(0x1388u);
        if ( result )
        {
          result = sub_517AE0();
          if ( result )
          {
            result = sub_50AB90();
            if ( result )
            {
              result = sub_4FC9B0();
              if ( result )
              {
                result = sub_5112C0();
                if ( result )
                {
                  result = sub_57C410();
                  if ( result )
                  {
                    result = sub_57BFB0();
                    if ( result )
                    {
                      result = sub_4ECA60();
                      if ( result )
                      {
                        result = sub_50E2A0();
                        if ( result )
                        {
                          result = sub_50D780();
                          if ( result )
                          {
                            result = sub_5066D0();
                            if ( result )
                            {
                              result = sub_4FF730();
                              if ( result )
                              {
                                result = sub_517520();
                                if ( result )
                                {
                                  sub_416920();
                                  if ( !sub_40A5C0(2048) )
                                  {
                                    v1 = sub_40A430();
                                    *(_DWORD *)&byte_5D4594[1548516] = sub_4DEBC0(v1);
                                    if ( !sub_40A5C0(0x2000000) )
                                      sub_413CC0();
                                  }
                                  sub_4FB990();
                                  result = sub_516EE0();
                                  if ( result )
                                  {
                                    sub_421B10();
                                    sub_4DB0A0();
                                    sub_4D0F30();
                                    result = 1;
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return result;
}

//----- (004D17F0) --------------------------------------------------------
int sub_4D17F0()
{
  int result; // eax

  sub_4E79B0(0);
  if ( !memcmp(sub_409B30(), &byte_5D4594[1548720], 1u) )
    sub_409D70((char *)&byte_587000[196452]);
  sub_519870();
  result = sub_4D1860();
  if ( result )
  {
    sub_43DDF0(sub_4D2580);
    sub_40EE90(1);
    sub_40A4D0(0x20000);
    sub_4DEF00();
    sub_40A690();
    result = 1;
  }
  return result;
}

//----- (004D1860) --------------------------------------------------------
int sub_4D1860()
{
  int v0; // esi
  int v1; // edi
  char *v2; // eax
  int i; // eax
  int j; // eax
  char *v5; // eax
  int v6; // esi
  char *v7; // ebx
  int *v8; // eax
  int *v9; // eax
  char *v10; // eax
  int v11; // eax
  __int16 v12; // ax
  int v13; // eax
  int *v14; // eax
  int k; // esi
  char *v17; // eax
  int v18; // eax
  int v19; // esi
  int v20; // edi
  int v21; // ebx
  int v22; // eax
  int v23; // ecx
  wchar_t *v24; // eax
  int v25; // ecx
  int l; // ebx
  char *v27; // eax
  int v28; // eax
  int v29; // esi
  char *v30; // eax
  int v31; // eax
  int v32; // eax
  char *v33; // eax
  int v34; // eax
  int v35; // eax
  float *v36; // esi
  char *v37; // eax
  double v38; // st7
  char *v39; // eax
  double v40; // st7
  char *v41; // eax
  int v42; // eax
  const char *v43; // edi
  int v44; // esi
  float2 *v45; // edi
  int m; // ebx
  int n; // esi
  int v48; // edi
  int *v49; // eax
  int ii; // eax
  int jj; // eax
  int v52; // eax
  int v53; // eax
  int v54; // eax
  char *v55; // eax
  unsigned int v56; // esi
  char v57; // al
  int *v58; // [esp-1Ch] [ebp-68h]
  __int16 v59; // [esp-14h] [ebp-60h]
  __int16 v60; // [esp-14h] [ebp-60h]
  float2 v61; // [esp+0h] [ebp-4Ch]
  __int64 v62; // [esp+8h] [ebp-44h]
  int v63[15]; // [esp+10h] [ebp-3Ch]

  if ( sub_40A5C0(2) )
    sub_477610(10);
  sub_4D22B0();
  sub_4D9800(0, 1);
  v0 = 0;
  if ( *(_DWORD *)&byte_5D4594[1599640] > 0 )
  {
    v1 = 0;
    do
    {
      if ( !strncmp((const char *)&byte_587000[196468], *(const char **)(v1 + *(_DWORD *)&byte_5D4594[1599636]), 7u) )
        sub_507310(v0, 0, 0);
      ++v0;
      v1 += 48;
    }
    while ( v0 < *(int *)&byte_5D4594[1599640] );
  }
  v2 = sub_409B40();
  sub_500510(v2);
  sub_4D12E0(1);
  for ( i = sub_4DA790(); i; i = sub_4DA7A0(i) )
    *(_DWORD *)(i + 16) |= 0x80000000;
  for ( j = sub_4DA840(); j; j = sub_4DA850(j) )
    *(_DWORD *)(j + 16) |= 0x80000000;
  if ( sub_40A5C0(2048) )
  {
    sub_424BD0();
    sub_4537F0();
  }
  if ( sub_4DB240() )
  {
    v5 = sub_4DB260();
    v6 = sub_4CF5F0(v5, 0);
  }
  else
  {
    v7 = sub_4165B0();
    if ( sub_40A5C0(0x2000) )
    {
      if ( !v7[57] )
      {
        strcpy((char *)v63, v7);
        v59 = *((_WORD *)v7 + 26);
        v8 = (int *)sub_459870();
        sub_57A1E0(v63, (const char *)&byte_587000[196476], v8, 3, v59);
        v9 = (int *)sub_459870();
        sub_57AAA0((const char *)&byte_587000[196488], v7, v9);
      }
      sub_424BD0();
      sub_4537F0();
    }
    v10 = sub_409B30();
    v6 = sub_4CF5F0(v10, 0);
    if ( sub_40A5C0(0x2000) && !sub_40A5C0(128) )
    {
      v11 = sub_40A8A0();
      v13 = 0;
      if ( v11 )
      {
        v12 = sub_40A5B0();
        if ( sub_40A180(v12) )
          v13 = 1;
      }
      sub_40A1F0(v13);
      sub_40A250();
      v60 = sub_40A5B0();
      v58 = (int *)sub_459870();
      v14 = (int *)sub_416590(0);
      sub_57A1E0(v14, (const char *)&byte_587000[196500], v58, 3, v60);
      sub_4D2230();
    }
  }
  if ( !v6 )
  {
    sub_4D15F0();
    return 0;
  }
  if ( !sub_40A5C0(2048) )
    sub_519EB0();
  sub_4DAC00();
  for ( k = sub_4DA7C0(); k; k = sub_4DA7F0(k) )
  {
    sub_4EF660(k);
    sub_4F7AB0(&v61, k);
    if ( sub_40A5C0(128) )
    {
      if ( sub_417DD0() )
      {
        if ( !sub_417DA0(2) && !sub_40A5C0(0x8000) )
        {
          v17 = sub_418AB0(*(unsigned __int8 *)(k + 52));
          if ( v17 )
            sub_4ED970(50.0, (float2 *)(*((_DWORD *)v17 + 18) + 56), &v61);
        }
      }
    }
    sub_4E7010(k, &v61);
    if ( !sub_40A5C0(512) )
    {
      v18 = *(_DWORD *)(k + 748);
      *(_DWORD *)(*(_DWORD *)(v18 + 276) + 2136) = 0;
      *(_DWORD *)(*(_DWORD *)(v18 + 276) + 2140) = 0;
      *(_DWORD *)(*(_DWORD *)(v18 + 276) + 2144) = *(_DWORD *)&byte_5D4594[2598000];
      sub_4D8EF0(k);
    }
  }
  sub_50AFA0();
  sub_50B520();
  v19 = 0;
  v20 = 0;
  v21 = 0;
  *(_DWORD *)&byte_5D4594[1548528] = 0;
  *(_DWORD *)&byte_5D4594[1548532] = 0;
  if ( !*(_DWORD *)&byte_5D4594[1548708] )
    *(_DWORD *)&byte_5D4594[1548708] = sub_4E3AA0((CHAR *)&byte_587000[196512]);
  if ( !*(_DWORD *)&byte_5D4594[1548712] )
    *(_DWORD *)&byte_5D4594[1548712] = sub_4E3AA0((CHAR *)&byte_587000[196524]);
  v22 = sub_4DA790();
  if ( !v22 )
    goto LABEL_120;
  do
  {
    if ( *(_DWORD *)(v22 + 8) & 0x10000000 )
    {
      *(_DWORD *)(v22 + 136) = 0;
      *(_DWORD *)&byte_5D4594[1548532] = v22;
      ++v19;
    }
    v23 = *(unsigned __int16 *)(v22 + 4);
    if ( (unsigned __int16)v23 == *(_DWORD *)&byte_5D4594[1548712] )
      ++v21;
    if ( v23 == *(_DWORD *)&byte_5D4594[1548708] )
      ++v20;
    v22 = sub_4DA7A0(v22);
  }
  while ( v22 );
  if ( !v20 )
  {
LABEL_120:
    v24 = sub_40F1D0((char *)&byte_587000[196580], 0, (const char *)&byte_587000[196540], 792);
LABEL_61:
    sub_4D9FD0(0, v24);
    return 0;
  }
  if ( sub_40A5C0(96) && v19 < 2 )
  {
    v24 = sub_40F1D0((char *)&byte_587000[196644], 0, (const char *)&byte_587000[196604], 799);
    goto LABEL_61;
  }
  if ( sub_40A5C0(64) && v21 < 1 )
  {
    v24 = sub_40F1D0((char *)&byte_587000[196700], 0, (const char *)&byte_587000[196660], 806);
    goto LABEL_61;
  }
  if ( sub_417DA0(4) || sub_40A5C0(0x8000) )
    sub_417D00();
  for ( l = sub_57C3E0(); l; l = sub_57C3F0(l) )
  {
    if ( !strcmp((const char *)l, (const char *)&byte_587000[196720]) )
    {
      v27 = strtok((char *)(l + 80), (const char *)&byte_587000[196728]);
      v28 = atoi(v27);
      v29 = sub_4ED020(v28);
      v30 = strtok(0, (const char *)&byte_587000[196732]);
      v31 = atoi(v30);
      v32 = sub_4ED020(v31);
      if ( v29 && v32 )
        sub_511590(v29, v32);
    }
    else if ( !strcmp((const char *)l, (const char *)&byte_587000[196736]) )
    {
      v33 = strtok((char *)(l + 80), (const char *)&byte_587000[196748]);
      v34 = atoi(v33);
      v35 = sub_4ED020(v34);
      if ( v35 )
      {
        v36 = *(float **)(v35 + 748);
        v37 = strtok(0, (const char *)&byte_587000[196752]);
        v38 = atof(v37) * *(double *)&byte_581450[10008];
        v36[1] = v38;
        *v36 = v38;
        v39 = strtok(0, (const char *)&byte_587000[196756]);
        v40 = atof(v39);
        v62 = *(unsigned int *)&byte_5D4594[2649704];
        v36[2] = v40 * *(double *)&byte_581450[10000] / (double)*(unsigned int *)&byte_5D4594[2649704];
      }
    }
  }
  *(_DWORD *)&byte_5D4594[1548524] = 0;
  v41 = sub_409B40();
  sub_500510(v41);
  if ( !sub_4DB240() )
    sub_4FC570(1);
  sub_40A4D0(0x8000000);
  sub_43F140(500);
  v42 = sub_4DB240();
  sub_4DBA30(v42);
  sub_43F1A0();
  sub_40A540(0x8000000);
  sub_4FC580(1);
  if ( *(_DWORD *)&byte_5D4594[1548664] )
  {
    v43 = sub_579E30((const char *)&byte_5D4594[1548536]);
    if ( v43 )
    {
      v44 = sub_4DA7C0();
      if ( v44 )
      {
        v45 = (float2 *)(v43 + 8);
        do
        {
          sub_4E7010(v44, v45);
          v44 = sub_4DA7F0(v44);
        }
        while ( v44 );
      }
    }
  }
  *(_DWORD *)&byte_5D4594[1548664] = 0;
  if ( sub_4DCC00() == 1 )
  {
    for ( m = sub_4DA7C0(); m; m = sub_4DA7F0(m) )
    {
      for ( n = *(_DWORD *)(m + 516); n; n = *(_DWORD *)(n + 512) )
      {
        if ( sub_4E5B50(n) )
        {
          v48 = *(_DWORD *)(n + 748);
          sub_4ED970(50.0, (float2 *)(m + 56), &v61);
          sub_4E7010(n, &v61);
          *(_DWORD *)(v48 + 388) = 0;
          sub_50A3A0(n);
          *(_DWORD *)(n + 520) = 0;
          *(_DWORD *)(v48 + 1196) = 0;
          *(_DWORD *)(v48 + 1216) = 0;
          *(_BYTE *)(v48 + 1129) = 0;
          *(_DWORD *)v48 = -559023410;
          v49 = sub_50A260(n, 3);
          if ( v49 )
          {
            v49[1] = *(_DWORD *)(m + 56);
            v49[2] = *(_DWORD *)(m + 60);
            v49[3] = m;
          }
          if ( *(_BYTE *)(n + 8) & 2 && *(_BYTE *)(n + 12) & 0x30 )
            sub_4E4A90(n, 0, *(_DWORD *)(n + 748) + 2076);
        }
        else if ( *(_BYTE *)(m + 8) & 1 && sub_4E5B80(m) )
        {
          sub_4E81D0(m);
        }
      }
    }
    sub_4DCBF0(0);
  }
  for ( ii = sub_4DA790(); ii; ii = sub_4DA7A0(ii) )
    *(_DWORD *)(ii + 16) &= 0x7FFFFFFFu;
  for ( jj = sub_4DA840(); jj; jj = sub_4DA850(jj) )
    *(_DWORD *)(jj + 16) &= 0x7FFFFFFFu;
  if ( sub_40A5C0(16) && sub_417DA0(4) )
    sub_4D2160();
  if ( sub_40A5C0(4096) )
  {
    sub_51A930();
    v52 = sub_415FA0(0, 2);
    sub_51A920(v52);
    v53 = sub_4E3CC0();
    sub_4E3CD0(v53 + 1);
    v54 = sub_51A930();
    sub_51A1F0(v54);
    sub_4E3D50();
    sub_4E3DD0();
    sub_4F1F20();
    v55 = sub_409B30();
    sub_4D10F0(v55);
    sub_4D7520(1);
    v56 = (__int64)sub_419D40(&byte_587000[196800]);
    if ( sub_4E3CC0() >= v56 )
      sub_4D7520(0);
  }
  if ( sub_40A5C0(2048) && !sub_4DCC80() )
  {
    sub_4DB130((const char *)&byte_587000[196820]);
    sub_4DB170(1, 0, 30);
  }
  sub_4DCC70(0);
  if ( sub_40A5C0(2048) )
    sub_413980(30);
  if ( sub_40A5C0(4096) )
    sub_4D7140(*(_DWORD *)&byte_5D4594[2598000] + *(_DWORD *)&byte_5D4594[2649704]);
  else
    sub_4D7140(0);
  sub_416D40();
  sub_40A970();
  *(_DWORD *)&byte_5D4594[1548704] = 0;
  if ( sub_40A5C0(4096) )
  {
    sub_4D71E0(0);
    if ( sub_4D72C0() == 1 )
    {
      sub_4D72B0(0);
      v57 = sub_4D72C0();
      sub_4D7280(255, v57);
    }
  }
  sub_413850();
  return 1;
}
// 4D1A17: variable 'v11' is possibly undefined
// 4D1CBA: variable 'v25' is possibly undefined

//----- (004D2160) --------------------------------------------------------
char *sub_4D2160()
{
  char *result; // eax
  char *i; // ebp
  int v2; // edi
  char *j; // esi
  int v4; // eax
  int v5; // [esp+4h] [ebp-4h]

  v5 = sub_416F40();
  result = sub_418B10();
  for ( i = result; result; i = result )
  {
    if ( !*(_DWORD *)(*((_DWORD *)i + 19) + 492) && sub_418BC0((int)i) )
    {
      do
      {
        v2 = sub_415FA0(0, v5 - 1);
        for ( j = sub_416EA0(); j; j = sub_416EE0((int)j) )
        {
          if ( !v2 )
            break;
          --v2;
        }
        v4 = *((_DWORD *)j + 514);
      }
      while ( !v4 || !sub_419180(v4 + 48, i[57]) );
      sub_4F3400(*((_DWORD *)j + 514), *((_DWORD *)i + 19), 1);
    }
    result = sub_418B60((int)i);
  }
  return result;
}

//----- (004D2230) --------------------------------------------------------
void sub_4D2230()
{
  __int16 v0; // ax
  __int16 v1; // ax
  __int16 v2; // ax

  if ( sub_40A5C0(49152) )
  {
    v0 = sub_40A5B0();
    if ( !sub_40A020(v0) )
    {
      v1 = sub_40A5B0();
      if ( !sub_40A180(v1) )
      {
        v2 = sub_40A5B0();
        sub_409FB0(v2, 0xFu);
      }
    }
  }
  else if ( sub_40A5C0(1024) && !sub_40A020(1024) )
  {
    sub_409FB0(1024, 0xFu);
  }
}

//----- (004D22B0) --------------------------------------------------------
char *sub_4D22B0()
{
  char *result; // eax
  int i; // esi
  int v2; // eax
  int v3; // edi
  int v4; // ecx
  int v5; // eax
  int v6; // [esp-8h] [ebp-10h]

  result = sub_416EA0();
  for ( i = (int)result; result; i = (int)result )
  {
    v2 = *(_DWORD *)(i + 2056);
    if ( v2 )
    {
      v3 = *(_DWORD *)(v2 + 748);
      if ( *(_DWORD *)(v3 + 280) )
        sub_510DC0(*(_DWORD **)(v3 + 280));
      *(_DWORD *)(v3 + 280) = 0;
      sub_51AC30(*(unsigned __int8 *)(i + 2064));
      if ( sub_40A5C0(4096) )
      {
        v4 = *(_DWORD *)(i + 4676);
        *(_DWORD *)(i + 4676) = 0;
        *(_DWORD *)(i + 4680) = v4;
      }
      if ( !sub_4FA020(*(_DWORD **)(i + 2056), 13) || !sub_40A5C0(512) )
      {
        *(_DWORD *)(i + 4700) = 0;
        v6 = ((unsigned int)sub_4CFE00() >> 1) & 1;
        v5 = sub_4DB240();
        sub_4EF7D0(*(_DWORD *)(i + 2056), v5 == 0, v6);
      }
      if ( *(_BYTE *)(i + 3680) & 0x20 )
      {
        sub_4E6AA0(i);
        sub_4E6040(*(_DWORD *)(i + 2056));
      }
      *(_DWORD *)(*(_DWORD *)(i + 2056) + 136) = *(_DWORD *)&byte_5D4594[2598000];
    }
    result = sub_416EE0(i);
  }
  return result;
}

//----- (004D23C0) --------------------------------------------------------
int sub_4D23C0()
{
  char *i; // esi
  int v2; // [esp-Ch] [ebp-14h]

  for ( i = sub_416EA0(); i; i = sub_416EE0((int)i) )
  {
    if ( *((_DWORD *)i + 514) )
    {
      *(_DWORD *)&byte_5D4594[2649712] &= ~(1 << i[2064]);
      v2 = *((_DWORD *)i + 514);
      i[3676] = 2;
      sub_4EF7D0(v2, 1, 0);
      *((_DWORD *)i + 535) = 0;
      *((_DWORD *)i + 534) = 0;
    }
  }
  sub_51A100();
  sub_40A540(0x20000);
  sub_4DEF00();
  sub_40A690();
  return 1;
}

//----- (004D2450) --------------------------------------------------------
char *__cdecl sub_4D2450(char *a1)
{
  char *v1; // eax
  char v3[1024]; // [esp+4h] [ebp-DB8h]
  char v4[1024]; // [esp+404h] [ebp-9B8h]
  char v5[1464]; // [esp+804h] [ebp-5B8h]

  qmemcpy(v5, &byte_5D4594[3801836], sizeof(v5));
  strncpy(v4, a1, strlen(a1) - 4);
  v4[strlen(a1)-4] = 0;
  sub_4CFE10(v4);
  sub_4CFDF0(*(int *)&byte_5D4594[3803228]);
  qmemcpy(&byte_5D4594[3801836], v5, 0x5B8u);
  *(_DWORD *)&byte_5D4594[1548524] = 1;
  strcpy(v3, a1);
  v1 = strchr(v3, 58);
  if ( v1 )
  {
    *v1 = 0;
    strcpy((char *)&byte_5D4594[1548536], v1 + 1);
    *(_DWORD *)&byte_5D4594[1548664] = 1;
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1548664] = 0;
  }
  if ( sub_51A130() )
    sub_5198B0(0);
  return sub_409D70(v3);
}

//----- (004D2580) --------------------------------------------------------
int sub_4D2580()
{
  __int64 v0; // rax
  unsigned int v1; // edi
  int v2; // ebx
  unsigned int v3; // ebp
  unsigned int v4; // esi
  void *v5; // ecx
  _DWORD *i; // esi
  char *v7; // ebp
  char *v8; // edi
  unsigned __int8 v9; // dl
  char *v10; // edi
  char *v11; // esi
  char *v12; // eax
  int v13; // esi
  wchar_t *v14; // eax
  wchar_t *v15; // eax
  char *v17; // eax
  int v18; // eax
  void *v19; // ecx
  char *v20; // eax
  char *v21; // esi
  int v22; // ebx
  int v23; // ebp
  int v24; // edi
  int v25; // esi
  unsigned __int8 *v26; // eax
  wchar_t *v27; // eax
  int v28; // eax
  int v29; // esi
  char *v30; // ebp
  const char *v31; // edi
  char *v33; // eax
  int v34; // eax
  wchar_t *v35; // [esp-10h] [ebp-50h]
  wchar_t *v36; // [esp-8h] [ebp-48h]
  char *v37; // [esp-4h] [ebp-44h]
  char v38[16]; // [esp+10h] [ebp-30h]
  char v39[32]; // [esp+20h] [ebp-20h]

  v0 = sub_416BB0();
  v1 = v0;
  v2 = 0;
  v3 = HIDWORD(v0);
  if ( !*(_DWORD *)&byte_5D4594[2650652] )
    goto LABEL_115;
  v4 = sub_40A6C0();
  if ( sub_416650() && sub_41E2F0() == 8 )
    v2 = 1;
  if ( v4 == 1 || sub_40A5C0(8) || *(_DWORD *)&byte_5D4594[2598000] % v4 == 1 )
LABEL_115:
    sub_40EE90(1);
  sub_502100();
  sub_5524C0();
  sub_552460();
  if ( *(_DWORD *)&byte_5D4594[2650636] & 0x400000 )
    sub_4D3580(1);
  if ( *(_DWORD *)&byte_5D4594[2650636] & 0x20000000 )
  {
    *(_DWORD *)&v38[4] = (__PAIR64__(v3, v1) - *(_QWORD *)&byte_5D4594[1548684]) >> 32;
    if ( __PAIR64__(v3, v1) - *(_QWORD *)&byte_5D4594[1548684] > 0x3E8 )
    {
      sub_4D3130();
      *(_DWORD *)&byte_5D4594[1548684] = v1;
      *(_DWORD *)&byte_5D4594[1548688] = v3;
    }
  }
  if ( !sub_40A5C0(2048) )
    sub_578FC0();
  if ( sub_40A5C0(8) )
  {
    if ( !*(_QWORD *)&byte_5D4594[1548676] )
    {
      *(_QWORD *)&byte_5D4594[1548676] = sub_416BB0() + 10000;
      sub_4597E0(0);
      if ( sub_43AF70() == 1 )
      {
        if ( !sub_40A5C0(128) )
        {
          sub_4263C0();
          sub_40DF90();
          sub_4264D0();
        }
        if ( !sub_4165B0()[57] )
          sub_41D650();
      }
      sub_413D30((char *)&byte_587000[196872]);
      sub_46DCB0();
    }
    sub_4DEB30();
    sub_4DEB50();
    if ( (unsigned __int64)sub_416BB0() > *(_QWORD *)&byte_5D4594[1548676] && !v2 )
    {
      *(_DWORD *)&byte_5D4594[1548676] = 0;
      *(_DWORD *)&byte_5D4594[1548680] = 0;
      *(_DWORD *)&byte_5D4594[1548524] = 1;
      sub_416170(12);
      sub_40A540(8);
      for ( i = (_DWORD *)sub_4DA7C0(); i; i = (_DWORD *)sub_4DA7F0((int)i) )
      {
        sub_4EDA40(i);
        sub_4EF7D0((int)i, 1, 0);
      }
      sub_4DAC00();
      if ( !sub_40A5C0(512) )
      {
        v7 = sub_416590(0);
        if ( v7[57] )
        {
          v38[0] = 0;
          *(_DWORD *)&v38[1] = 0;
          *(_DWORD *)&v38[5] = 0;
          *(_DWORD *)&v38[9] = 0;
          v8 = sub_409B80();
          v9 = byte_587000[196884];
          strcpy(v38, v8);
          v10 = &v38[strlen(v38)];
          *(_DWORD *)v10 = *(_DWORD *)&byte_587000[196880];
          v10[4] = v9;
          sub_409D70(v38);
          v7[57] = 0;
        }
        else if ( sub_4D0D70() )
        {
          sub_4D0A30();
          v11 = sub_4D0CF0();
          if ( v11 )
          {
            v12 = sub_409B30();
            if ( !_strcmpi(v11, v12) )
              v11 = sub_4D0CF0();
            if ( v11 )
              sub_409D70(v11);
          }
        }
      }
    }
    goto LABEL_72;
  }
  if ( *(_DWORD *)&byte_5D4594[1548524] )
  {
    if ( !sub_43AF70() || !v2 )
    {
      sub_4EDD70();
      sub_417160();
      sub_4573B0();
      if ( sub_417DA0(2) && !sub_40A5C0(49152) && sub_417DA0(4) && !sub_40A5C0(128) )
        sub_4181F0(1);
      if ( sub_40A5C0(4096) && sub_43AF70() == 1 && !sub_40A5C0(128) )
        sub_4264D0();
      sub_40A4D0(0x8000000);
      sub_43F140(500);
      v13 = sub_4D1860();
      sub_43F1A0();
      sub_40A540(0x8000000);
      if ( !v13 )
      {
        v37 = sub_409B40();
        v14 = sub_40F1D0((char *)&byte_587000[196928], 0, (const char *)&byte_587000[196888], 1702);
        sub_4D9FD0(0, v14, v37);
        v36 = sub_40F1D0((char *)&byte_587000[196984], 0, (const char *)&byte_587000[196944], 1703);
        v15 = sub_40F1D0((char *)&byte_587000[197032], 0, (const char *)&byte_587000[196992], 1703);
        nullsub_4(0, v15, v36, 1);
        sub_43DDD0(0);
        return 0;
      }
      v17 = sub_409B40();
      nox_sprintf(v39, (const char *)&byte_587000[197044], v17);
      v18 = sub_409B00();
      sub_4DEE00(v39, v18);
      if ( sub_43AF70() == 1 )
      {
        sub_416690();
        if ( sub_40A5C0(128) )
        {
          if ( sub_40A5C0(0x8000) )
            sub_419030(1);
          sub_40A540(49152);
          sub_4597E0(0);
          goto LABEL_72;
        }
        sub_426060();
        sub_41D6C0();
        sub_4160D0(15);
      }
      sub_4597E0(0);
    }
LABEL_72:
    if ( *(_DWORD *)&byte_5D4594[2650636] & 0x600000 )
      sub_4E76C0();
    if ( sub_4DB1B0() )
    {
      v20 = sub_417090(31);
      v21 = v20;
      if ( v20 )
      {
        if ( *((_DWORD *)v20 + 514) && sub_4DCC10(*((_DWORD *)v20 + 514)) == 1 )
        {
          v22 = *((_DWORD *)v21 + 514);
          v23 = 0;
          v24 = (*(_DWORD *)(v22 + 16) >> 15) & 1;
          if ( !v24 )
          {
            if ( *(_DWORD *)&byte_5D4594[1599640] > 0 )
            {
              v25 = 0;
              do
              {
                if ( !strncmp(
                        (const char *)&byte_587000[197052],
                        *(const char **)(v25 + *(_DWORD *)&byte_5D4594[1599636]),
                        0xBu) )
                  sub_507310(v23, 0, 0);
                ++v23;
                v25 += 48;
              }
              while ( v23 < *(int *)&byte_5D4594[1599640] );
            }
            sub_40A4D0(0x8000000);
            v26 = sub_4DB160();
            v23 = sub_4DB370((const char *)v26);
            sub_40A540(0x8000000);
            if ( !v23 && sub_40A5C0(2) )
            {
              v35 = sub_40F1D0((char *)&byte_587000[197104], 0, (const char *)&byte_587000[197064], 1931);
              v27 = sub_40F1D0((char *)&byte_587000[197172], 0, (const char *)&byte_587000[197132], 1930);
              sub_449A10(0, (int)v27, (int)v35, 33, 0, 0);
            }
          }
          v28 = sub_4DB1C0();
          v29 = v28;
          if ( v24 || v23 != 1 )
          {
            if ( v28 && !v23 )
              sub_4E7010(v22, (float2 *)(*(_DWORD *)(v28 + 700) + 80));
          }
          else if ( v28 )
          {
            v30 = *(char **)(v28 + 700);
            v31 = (const char *)sub_4DB2A0(*(const char **)(v28 + 700));
            if ( v31 )
            {
              sub_4DB220(1);
              sub_4DB230(1);
              sub_4DB270(v31);
            }
            sub_4D2450(v30);
          }
          sub_4DB170(0, v29, 0);
        }
      }
    }
    sub_4139C0();
    if ( sub_446180() )
      sub_446190();
    if ( sub_446030()
      && *(_DWORD *)&byte_5D4594[2598000] > (unsigned int)(5 * *(_DWORD *)&byte_5D4594[2649704] + sub_446040()) )
    {
      sub_446380();
    }
    if ( !sub_413A50() )
      ++*(_DWORD *)&byte_5D4594[2598000];
    sub_56F5C0();
    sub_4FC6D0();
    sub_4FC590();
    sub_4FC600();
    sub_4FC680();
    v33 = sub_417090(31);
    if ( v33 )
    {
      v34 = *((_DWORD *)v33 + 514);
      if ( v34 )
        sub_5003B0(v34);
    }
    if ( sub_57AF20() && sub_57B140() )
      sub_57B0A0();
    if ( sub_4D6F50() )
    {
      sub_4D6FD0();
      sub_4DCF20();
    }
    return 1;
  }
  sub_4D2DA0(__SPAIR64__(v3, v1));
  sub_4DEB30();
  sub_4DEB50();
  if ( !sub_43DEA0() )
  {
    if ( !(byte_5D4594[2598000] & 1) )
      sub_519990();
    sub_40B970();
    sub_40B790();
    if ( !sub_413A50() )
    {
      sub_51B100();
      sub_4EC720();
      if ( sub_40A5C0(4096) )
      {
        sub_50D890();
        sub_4E4170();
      }
      sub_4FCB70();
      sub_4FBEE0();
      sub_51ADF0();
      sub_506F30();
      sub_4E5E20();
    }
    sub_4DEC80();
    sub_4DAC00();
    if ( sub_4160F0(0x10u, 10 * *(_DWORD *)&byte_5D4594[2649704]) )
    {
      sub_4E3C20();
      sub_4160D0(16);
    }
    if ( sub_40A5C0(0x2000)
      && sub_43AF70() == 1
      && !sub_40A5C0(128)
      && sub_4160F0(0xFu, 60 * *(_DWORD *)&byte_5D4594[2649704]) )
    {
      sub_4263C0();
      sub_4160D0(15);
    }
    goto LABEL_72;
  }
  return 1;
}
// 4D26F3: variable 'v5' is possibly undefined
// 4D2A52: variable 'v19' is possibly undefined
// 4D2CEB: variable 'v32' is possibly undefined
// 4514E0: using guessed type void __cdecl nullsub_4(_DWORD, _DWORD, _DWORD, _DWORD);
// 46DCB0: using guessed type int sub_46DCB0(void);

//----- (004D2DA0) --------------------------------------------------------
int __cdecl sub_4D2DA0(__int64 a1)
{
  int result; // eax
  char *v2; // eax
  int v3; // ebx
  char *v4; // esi
  double v5; // st7
  int v6; // esi
  int v7; // eax
  char *v8; // eax
  float v9; // [esp+0h] [ebp-10h]
  unsigned __int8 *v10; // [esp+4h] [ebp-Ch]

  if ( *(_DWORD *)&byte_5D4594[528252] == 1 && *(_DWORD *)&byte_5D4594[2598000] == *(_DWORD *)&byte_5D4594[528260] )
    sub_41E390();
  sub_5096F0();
  result = sub_40A5C0(8);
  if ( !result )
  {
    if ( sub_40A5C0(0x2000) )
    {
      sub_416720();
      if ( !sub_40A5C0(128) )
      {
        if ( sub_409F40(0x2000) )
          sub_4D7CC0();
      }
    }
    if ( !sub_40A5C0(1024) )
      goto LABEL_31;
    if ( sub_40AA00() )
    {
      if ( !*(_DWORD *)&byte_5D4594[1548704] )
        sub_4D2FF0();
    }
    else
    {
      *(_DWORD *)&byte_5D4594[1548704] = 0;
    }
    if ( sub_40A5C0(0x4000000) )
      goto LABEL_31;
    if ( sub_40A300() )
      goto LABEL_31;
    v2 = sub_416EA0();
    if ( !v2 )
      goto LABEL_31;
    while ( *((int *)v2 + 535) <= 0 )
    {
      v2 = sub_416EE0((int)v2);
      if ( !v2 )
        goto LABEL_31;
    }
    if ( !sub_40AA00() )
      goto LABEL_31;
    if ( sub_417DA0(4) )
    {
      v3 = sub_417DD0();
      if ( v3 >= sub_40AA40() )
        goto LABEL_31;
      v4 = sub_418B10();
      if ( !v4 )
        goto LABEL_31;
      while ( sub_40A830((int)v4) != 1 )
      {
        v4 = sub_418B60((int)v4);
        if ( !v4 )
          goto LABEL_31;
      }
      v10 = &byte_587000[197200];
      v5 = sub_419D40(&byte_587000[197232]);
    }
    else
    {
      v6 = sub_40A770();
      if ( v6 >= sub_40AA40() )
      {
LABEL_31:
        if ( sub_40A6B0() )
        {
          v8 = sub_416640();
          sub_4D9700(*(_DWORD *)(v8 + 66));
          sub_40A6A0(0);
        }
        if ( (unsigned __int64)(a1 - *(_QWORD *)&byte_5D4594[1548692]) > 0x1F4 )
        {
          sub_4D3050();
          *(_QWORD *)&byte_5D4594[1548692] = a1;
        }
        if ( sub_40A5C0(128) && !sub_40A740() && sub_417DD0() && !sub_417DA0(2) )
          sub_4183C0();
        result = sub_40A5C0(4096);
        if ( result )
        {
          sub_4D7150();
          sub_4D71F0();
          sub_4D7600();
          sub_4DCE00();
          result = sub_4D7A80();
        }
        return result;
      }
      v10 = &byte_587000[197256];
      v5 = sub_419D40(&byte_587000[197288]);
    }
    v9 = v5;
    v7 = sub_419A70(v9);
    sub_40A2A0(v7, (const char *)v10);
    goto LABEL_31;
  }
  return result;
}

//----- (004D2FF0) --------------------------------------------------------
char *sub_4D2FF0()
{
  char *result; // eax
  int v1; // esi

  result = (char *)sub_40AA70(0);
  if ( result || (result = sub_416EA0(), (v1 = (int)result) == 0) )
  {
    *(_DWORD *)&byte_5D4594[1548704] = 1;
  }
  else
  {
    do
    {
      if ( *(_BYTE *)(v1 + 3680) & 1 )
        sub_4174F0(v1, 256);
      result = sub_416EE0(v1);
      v1 = (int)result;
    }
    while ( result );
    *(_DWORD *)&byte_5D4594[1548704] = 1;
  }
  return result;
}

//----- (004D3050) --------------------------------------------------------
char *sub_4D3050()
{
  char *result; // eax
  bool v1; // zf
  int i; // esi
  char v3[5]; // [esp+0h] [ebp-8h]

  v3[0] = -41;
  if ( !*(_DWORD *)&byte_5D4594[1548700]
    || (result = sub_416EE0(*(int *)&byte_5D4594[1548700]), (*(_DWORD *)&byte_5D4594[1548700] = result) == 0) )
  {
    result = sub_416EA0();
    *(_DWORD *)&byte_5D4594[1548700] = result;
  }
  if ( result )
  {
    while ( result[2064] != 31 )
    {
      v1 = sub_554240((unsigned __int8)result[2064]) == 0;
      result = *(char **)&byte_5D4594[1548700];
      if ( !v1 )
        break;
      result = sub_416EE0(*(int *)&byte_5D4594[1548700]);
      *(_DWORD *)&byte_5D4594[1548700] = result;
      if ( !result )
      {
        result = sub_416EA0();
        *(_DWORD *)&byte_5D4594[1548700] = result;
      }
    }
    if ( result )
    {
      *(_WORD *)&v3[1] = *((_WORD *)result + 1030);
      *(_WORD *)&v3[3] = sub_554240((unsigned __int8)result[2064]);
      result = sub_416EA0();
      for ( i = (int)result; result; i = (int)result )
      {
        sub_40EBC0(*(unsigned __int8 *)(i + 2064), 1, v3, 5);
        result = sub_416EE0(i);
      }
    }
  }
  return result;
}

//----- (004D3130) --------------------------------------------------------
char *sub_4D3130()
{
  char *result; // eax
  int i; // esi
  int v2; // [esp-14h] [ebp-24h]
  int v3; // [esp-14h] [ebp-24h]
  int v4; // [esp-10h] [ebp-20h]
  int v5; // [esp-Ch] [ebp-1Ch]
  int v6; // [esp-8h] [ebp-18h]
  int v7; // [esp-4h] [ebp-14h]
  int v8; // [esp+4h] [ebp-Ch]
  int v9; // [esp+8h] [ebp-8h]
  int v10; // [esp+Ch] [ebp-4h]

  sub_413C80((char *)&byte_587000[197312]);
  result = sub_416EA0();
  for ( i = (int)result; result; i = (int)result )
  {
    sub_4E5630(*(_BYTE *)(i + 2064), &v10, &v9, &v8);
    v7 = v8;
    v6 = v9;
    v5 = v10;
    v4 = *(_DWORD *)&byte_5D4594[2598000];
    if ( *(_BYTE *)(i + 2064) == 31 )
    {
      v2 = sub_553ED0(0);
      sub_413C80((char *)&byte_587000[197316], i + 4704, v2, v4, v5, v6, v7);
    }
    else
    {
      v3 = sub_553ED0(*(unsigned __int8 *)(i + 2064) + 1);
      sub_413C80((char *)&byte_587000[197340], i + 4704, v3, v4, v5, v6, v7);
    }
    result = sub_416EE0(i);
  }
  return result;
}

//----- (004D3200) --------------------------------------------------------
BOOL sub_4D3200()
{
  char *v0; // eax
  CHAR FileName[1024]; // [esp+0h] [ebp-400h]

  sub_50D1E0();
  sub_4DB100();
  sub_421B10();
  sub_516F10();
  sub_4FF770();
  sub_4D33B0();
  sub_4D3530();
  sub_416E30();
  sub_446490((void *)1);
  sub_4259F0();
  sub_4D12E0(0);
  sub_40A380();
  sub_4E4DE0();
  sub_57C460();
  sub_57C030();
  sub_511310();
  sub_4FCA80();
  sub_50ABF0();
  sub_517B30();
  sub_5018D0();
  sub_4ECA90();
  sub_506720();
  sub_50D820();
  sub_50E300();
  sub_416950();
  sub_4E3420();
  sub_4E2A20();
  if ( !sub_40A5C0(2048) )
  {
    sub_4DEC60(*(unsigned int *)&byte_5D4594[1548516]);
    if ( !sub_40A5C0(0x2000000) )
      sub_413D00();
  }
  sub_56F3B0();
  nullsub_23();
  sub_40EE60();
  v0 = sub_409E10();
  nox_sprintf(FileName, (const char *)&byte_587000[197364], v0);
  return DeleteFileA(FileName);
}
// 4E3440: using guessed type void nullsub_23(void);

//----- (004D3310) --------------------------------------------------------
int __cdecl sub_4D3310(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1548716] = a1;
  return result;
}

//----- (004D3320) --------------------------------------------------------
int sub_4D3320()
{
  return *(_DWORD *)&byte_5D4594[1548716];
}

//----- (004D3330) --------------------------------------------------------
int sub_4D3330()
{
  int result; // eax

  result = sub_40A5C0(0x2000000);
  if ( result )
  {
    sub_413D30((char *)&byte_587000[197384]);
    sub_43DDD0(0);
    result = sub_43DE60();
  }
  return result;
}

//----- (004D3360) --------------------------------------------------------
void sub_4D3360()
{
  srand(0x141Fu);
}

//----- (004D3370) --------------------------------------------------------
int __cdecl sub_4D3370(char *a1)
{
  *(_DWORD *)&byte_587000[197424] = _open(a1, 33537, 384);
  if ( *(int *)&byte_587000[197424] == -1 )
    return 0;
  *(_DWORD *)&byte_5D4594[2650636] |= 0x200000u;
  return 1;
}

//----- (004D33B0) --------------------------------------------------------
unsigned int sub_4D33B0()
{
  unsigned int result; // eax

  if ( *(int *)&byte_587000[197424] != -1 )
    _close(*(int *)&byte_587000[197424]);
  *(_DWORD *)&byte_587000[197424] = -1;
  result = *(_DWORD *)&byte_5D4594[2650636] & 0xFFDFFFFF;
  *(_DWORD *)&byte_5D4594[2650636] &= 0xFFDFFFFF;
  return result;
}

//----- (004D33E0) --------------------------------------------------------
int __cdecl sub_4D33E0(void *a1, int a2)
{
  int result; // eax

  result = *(_DWORD *)&byte_587000[197424];
  if ( *(int *)&byte_587000[197424] != -1 && a1 && a2 >= 1 )
  {
    _write(*(int *)&byte_587000[197424], &byte_5D4594[2598000], 4u);
    _write(*(int *)&byte_587000[197424], &byte_587000[197432], 1u);
    _write(*(int *)&byte_587000[197424], &a2, 4u);
    result = _write(*(int *)&byte_587000[197424], a1, 2 * a2);
  }
  return result;
}

//----- (004D3450) --------------------------------------------------------
int __cdecl sub_4D3450(int a1, void *a2, unsigned int a3)
{
  int result; // eax

  result = *(_DWORD *)&byte_587000[197424];
  if ( *(int *)&byte_587000[197424] != -1 )
  {
    _write(*(int *)&byte_587000[197424], &byte_5D4594[2598000], 4u);
    _write(*(int *)&byte_587000[197424], &byte_587000[197433], 1u);
    _write(*(int *)&byte_587000[197424], (const void *)(a1 + 2064), 1u);
    _write(*(int *)&byte_587000[197424], &a3, 4u);
    result = _write(*(int *)&byte_587000[197424], a2, a3);
  }
  return result;
}

//----- (004D34C0) --------------------------------------------------------
int __cdecl sub_4D34C0(char *a1)
{
  char *v2; // eax

  *(_DWORD *)&byte_587000[197428] = _open(a1, 0x8000);
  if ( *(int *)&byte_587000[197428] == -1 )
    return 0;
  *(_DWORD *)&byte_5D4594[1548732] = 0;
  *(_DWORD *)&byte_5D4594[1548736] = 0;
  *(_DWORD *)&byte_5D4594[1548728] = 0;
  byte_5D4594[1548724] = 0;
  *(_DWORD *)&byte_5D4594[2650636] |= 0x400000u;
  v2 = sub_417040(255);
  sub_4E6860((int)v2, 0, 1);
  return 1;
}

//----- (004D3530) --------------------------------------------------------
void sub_4D3530()
{
  char *v0; // eax

  if ( *(int *)&byte_587000[197428] != -1 )
    _close(*(int *)&byte_587000[197428]);
  *(_DWORD *)&byte_587000[197428] = -1;
  *(_DWORD *)&byte_5D4594[1548732] = 0;
  *(_DWORD *)&byte_5D4594[1548736] = 0;
  *(_DWORD *)&byte_5D4594[2650636] &= 0xFFBFFFFF;
  v0 = sub_417040(255);
  sub_4E6AA0((int)v0);
}

//----- (004D3580) --------------------------------------------------------
int __cdecl sub_4D3580(int a1)
{
  int v1; // esi
  wchar_t *v2; // esi
  wchar_t *v3; // eax
  int result; // eax
  unsigned int v5; // [esp+8h] [ebp-264h]
  int v6; // [esp+Ch] [ebp-260h]
  int v7; // [esp+10h] [ebp-25Ch]
  int v8; // [esp+14h] [ebp-258h]
  int v9; // [esp+18h] [ebp-254h]
  char v10[80]; // [esp+1Ch] [ebp-250h]
  char v11[512]; // [esp+6Ch] [ebp-200h]

  v1 = 0;
  if ( *(int *)&byte_587000[197428] == -1 )
  {
    v1 = 1;
LABEL_30:
    sub_4D3530();
    sub_43DDD0(0);
    sub_43DE60();
    return v1;
  }
  if ( !*(_DWORD *)&byte_5D4594[1548732] )
  {
    if ( _read(*(int *)&byte_587000[197428], &byte_5D4594[1548728], 4u) )
      *(_DWORD *)&byte_5D4594[1548732] = 1;
    else
      v1 = 1;
  }
  if ( !*(_DWORD *)&byte_5D4594[1548736] )
  {
    if ( !_read(*(int *)&byte_587000[197428], &byte_5D4594[1548724], 1u) )
    {
      v1 = 1;
      goto LABEL_30;
    }
    *(_DWORD *)&byte_5D4594[1548736] = 1;
  }
  if ( v1 )
    goto LABEL_30;
  while ( *(_DWORD *)&byte_5D4594[2598000] == *(_DWORD *)&byte_5D4594[1548728] )
  {
    switch ( byte_5D4594[1548724] )
    {
      case 1u:
        if ( a1 == 1 )
          return v1;
        _read(*(int *)&byte_587000[197428], &v9, 1u);
        _read(*(int *)&byte_587000[197428], &v5, 4u);
        _read(*(int *)&byte_587000[197428], &byte_5D4594[1548740], v5);
        sub_51BAD0((unsigned __int8)v9, &byte_5D4594[1548740], v5);
        break;
      case 2u:
        if ( a1 == 1 )
          return v1;
        _read(*(int *)&byte_587000[197428], &v6, 1u);
        _read(*(int *)&byte_587000[197428], v10, (unsigned __int8)v6);
        sub_409D70(v10);
        _read(*(int *)&byte_587000[197428], &v7, 4u);
        if ( (v7 & 0xFF0000) != 0x10000 )
        {
          v2 = sub_40F1D0((char *)&byte_587000[197480], 0, (const char *)&byte_587000[197436], 355);
          v3 = sub_40F1D0((char *)&byte_587000[197540], 0, (const char *)&byte_587000[197496], 356);
          nullsub_4(0, v2, v3, 1);
          sub_43DDD0(0);
          sub_43DE60();
          v1 = 1;
        }
        break;
      case 3u:
        if ( a1 == 1 )
        {
          _read(*(int *)&byte_587000[197428], &v8, 4u);
          _read(*(int *)&byte_587000[197428], v11, 2 * v8);
          sub_443C80((wchar_t *)v11, 0);
        }
        break;
      case 4u:
        if ( a1 == 1 )
          return v1;
        sub_43DDD0(0);
        sub_43DE60();
        break;
      default:
        break;
    }
    if ( !_read(*(int *)&byte_587000[197428], &byte_5D4594[1548728], 4u) )
    {
      result = v1;
      *(_DWORD *)&byte_5D4594[1548732] = 0;
      return result;
    }
    if ( !_read(*(int *)&byte_587000[197428], &byte_5D4594[1548724], 1u) )
    {
      result = v1;
      *(_DWORD *)&byte_5D4594[1548736] = 0;
      return result;
    }
    if ( v1 )
      goto LABEL_30;
  }
  return v1;
}
// 4514E0: using guessed type void __cdecl nullsub_4(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (004D3860) --------------------------------------------------------
void __cdecl sub_4D3860(void *a1)
{
  if ( *(_DWORD *)&byte_5D4594[2650636] & 0x200000
    && (*(_DWORD *)&byte_587000[197424], *(int *)&byte_587000[197424] != -1) )
  {
    sub_415F30(*(int *)&byte_587000[197424]);
    _write(*(int *)&byte_587000[197424], a1, 0x99u);
  }
  else if ( *(_DWORD *)&byte_5D4594[2650636] & 0x400000 )
  {
    if ( *(int *)&byte_587000[197428] != -1 )
    {
      sub_415F50(*(int *)&byte_587000[197428]);
      _read(*(int *)&byte_587000[197428], a1, 0x99u);
    }
  }
}

//----- (004D38D0) --------------------------------------------------------
int sub_4D38D0()
{
  int result; // eax
  int v2; // [esp+0h] [ebp-4h]

  if ( *(_DWORD *)&byte_5D4594[2650636] & 0x200000 && *(int *)&byte_587000[197424] != -1 )
  {
    _write(*(int *)&byte_587000[197424], &byte_5D4594[2598000], 4u);
    _write(*(int *)&byte_587000[197424], &byte_587000[197434], 1u);
    *(_DWORD *)&byte_5D4594[1549764] = sub_409B30();
    byte_5D4594[1548725] = strlen(*(const char **)&byte_5D4594[1549764]) + 1;
    _write(*(int *)&byte_587000[197424], &byte_5D4594[1548725], 1u);
    _write(*(int *)&byte_587000[197424], *(const void **)&byte_5D4594[1549764], byte_5D4594[1548725]);
    v2 = 66458;
    _write(*(int *)&byte_587000[197424], &v2, 4u);
    result = 0;
  }
  else if ( *(_DWORD *)&byte_5D4594[2650636] & 0x400000 && *(int *)&byte_587000[197428] != -1 )
  {
    result = sub_4D3580(0);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004D39B0) --------------------------------------------------------
void sub_4D39B0()
{
  if ( *(_DWORD *)&byte_5D4594[2650636] & 0x200000 )
  {
    if ( *(int *)&byte_587000[197424] != -1 )
    {
      _write(*(int *)&byte_587000[197424], &byte_5D4594[2598000], 4u);
      _write(*(int *)&byte_587000[197424], &byte_587000[197435], 1u);
    }
  }
}

//----- (004D39F0) --------------------------------------------------------
int __cdecl sub_4D39F0(const char *a3)
{
  unsigned int v1; // ecx
  char v2; // dl
  unsigned __int8 *v3; // edi
  const char *v4; // esi
  int v5; // edx
  int v6; // eax
  unsigned __int8 *v7; // edi
  unsigned int v8; // ecx
  unsigned __int8 *v9; // edi
  const char *v10; // esi
  unsigned __int8 *v11; // edi
  int v12; // ecx
  int v13; // edx
  int v14; // eax
  char *v15; // edi
  unsigned __int8 v16; // cl
  int result; // eax
  char v18[2048]; // [esp+10h] [ebp-800h]

  *(_QWORD *)&byte_5D4594[1549772] = sub_416BB0();
  memset(&byte_5D4594[3835340], 0, 0x48u);
  *(_DWORD *)&byte_5D4594[3835340] = 0;
  *(_DWORD *)&byte_5D4594[3835344] = 0;
  *(_DWORD *)&byte_5D4594[3835348] = 0;
  *(_DWORD *)&byte_5D4594[3835356] = 255;
  *(_DWORD *)&byte_5D4594[3835352] = 0;
  *(_DWORD *)&byte_5D4594[3835360] = 0;
  *(_DWORD *)&byte_5D4594[3835364] = 1;
  *(_DWORD *)&byte_5D4594[3835368] = 1;
  *(_DWORD *)&byte_5D4594[3835372] = 1;
  *(_DWORD *)&byte_5D4594[3835376] = 0;
  *(_DWORD *)&byte_5D4594[3835380] = 0;
  *(_DWORD *)&byte_5D4594[3835384] = 0;
  *(_DWORD *)&byte_5D4594[3835388] = 0;
  *(_DWORD *)&byte_5D4594[3835392] = 1;
  *(_DWORD *)&byte_5D4594[3835396] = -1;
  byte_5D4594[3835400] = 2;
  *(_DWORD *)&byte_5D4594[3835404] = 0;
  *(_DWORD *)&byte_5D4594[3835408] = 0;
  sub_51D0E0();
  if ( a3 )
  {
    v1 = strlen(a3) + 1;
    v2 = v1;
    v1 >>= 2;
    qmemcpy(&byte_5D4594[3841580], a3, 4 * v1);
    v4 = &a3[4 * v1];
    v3 = &byte_5D4594[4 * v1 + 3841580];
    LOBYTE(v1) = v2;
    v5 = *(_DWORD *)&byte_587000[197560];
    qmemcpy(v3, v4, v1 & 3);
    strcpy((char *)&byte_5D4594[3835436], a3);
    v6 = *(_DWORD *)&byte_587000[197564];
    v7 = &byte_5D4594[strlen((const char *)&byte_5D4594[3835436]) + 3835436];
    *(_DWORD *)v7 = *(_DWORD *)&byte_587000[197556];
    *((_DWORD *)v7 + 1) = v5;
    *((_DWORD *)v7 + 2) = v6;
    v8 = strlen(a3) + 1;
    LOBYTE(v5) = v8;
    v8 >>= 2;
    qmemcpy(&byte_5D4594[3837484], a3, 4 * v8);
    v10 = &a3[4 * v8];
    v9 = &byte_5D4594[4 * v8 + 3837484];
    LOBYTE(v8) = v5;
    LOWORD(v5) = *(_WORD *)&byte_587000[197576];
    qmemcpy(v9, v10, v8 & 3);
    v11 = &byte_5D4594[strlen((const char *)&byte_5D4594[3837484]) + 3837485];
    v12 = *(_DWORD *)&byte_587000[197572];
    *(_DWORD *)--v11 = *(_DWORD *)&byte_587000[197568];
    LOBYTE(v6) = byte_587000[197578];
    *((_DWORD *)v11 + 1) = v12;
    *((_WORD *)v11 + 4) = v5;
    v11[10] = v6;
    DeleteFileA((LPCSTR)&byte_5D4594[3835436]);
    DeleteFileA((LPCSTR)&byte_5D4594[3837484]);
  }
  else
  {
    byte_5D4594[3841580] = byte_5D4594[1549780];
    byte_5D4594[3839532] = byte_5D4594[1549784];
    byte_5D4594[3835436] = byte_5D4594[1549788];
    byte_5D4594[3837484] = byte_5D4594[1549792];
  }
  sub_5028E0();
  v13 = *(_DWORD *)&byte_587000[197584];
  strcpy(v18, a3);
  v14 = *(_DWORD *)&byte_587000[197588];
  v15 = &v18[strlen(v18)];
  *(_DWORD *)v15 = *(_DWORD *)&byte_587000[197580];
  v16 = byte_587000[197592];
  *((_DWORD *)v15 + 1) = v13;
  *((_DWORD *)v15 + 2) = v14;
  v15[12] = v16;
  sub_502A50(v18);
  sub_502AB0(v18);
  result = sub_502B10();
  *(_DWORD *)&byte_5D4594[3835312] = 0;
  *(_DWORD *)&byte_5D4594[3835308] = 0;
  *(_DWORD *)&byte_5D4594[1599580] = 0;
  return result;
}
// 4D39F0: using guessed type char var_800[2048];

//----- (004D3C30) --------------------------------------------------------
__int64 sub_4D3C30()
{
  sub_503F40();
  sub_51D0E0();
  sub_502DF0();
  return sub_416BB0();
}

//----- (004D3C50) --------------------------------------------------------
void __cdecl sub_4D3C50(const void *a1)
{
  qmemcpy(&byte_5D4594[3835340], a1, 0x48u);
}

//----- (004D3C70) --------------------------------------------------------
unsigned __int8 *sub_4D3C70()
{
  return &byte_5D4594[3835340];
}

//----- (004D3C80) --------------------------------------------------------
_DWORD *__cdecl sub_4D3C80(_DWORD *a1)
{
  _DWORD *result; // eax
  int v2; // ebp
  int v3; // ecx
  int v4; // edi
  int v5; // esi
  int v6; // edx
  int v7; // ebx
  int v8; // ecx
  int v9; // esi
  int v10; // [esp+10h] [ebp-10h]
  int v11; // [esp+14h] [ebp-Ch]
  int v12; // [esp+1Ch] [ebp-4h]

  result = a1;
  v2 = a1[3];
  v10 = *a1;
  v3 = a1[1];
  v11 = a1[1];
  if ( v2 < v3 )
  {
    v3 = a1[3];
    v10 = a1[2];
    v11 = a1[3];
  }
  if ( a1[5] < v3 )
  {
    v10 = a1[4];
    v3 = a1[5];
    v11 = a1[5];
  }
  if ( a1[7] < v3 )
  {
    v10 = a1[6];
    v11 = a1[7];
  }
  v4 = a1[2];
  v12 = a1[3];
  if ( *a1 < v4 )
  {
    v4 = *a1;
    v12 = a1[1];
  }
  if ( a1[4] < v4 )
  {
    v4 = a1[4];
    v12 = a1[5];
  }
  v5 = a1[6];
  if ( v5 < v4 )
  {
    v4 = a1[6];
    v12 = a1[7];
  }
  v6 = a1[4];
  v7 = a1[5];
  if ( *a1 > v6 )
  {
    v6 = *a1;
    v7 = a1[1];
  }
  if ( a1[2] > v6 )
  {
    v7 = a1[3];
    v6 = a1[2];
  }
  if ( v5 > v6 )
  {
    v6 = a1[6];
    v7 = a1[7];
  }
  v8 = a1[7];
  v9 = a1[6];
  if ( a1[1] > v8 )
  {
    v9 = *a1;
    v8 = a1[1];
  }
  if ( v2 > v8 )
  {
    v9 = a1[2];
    v8 = a1[3];
  }
  if ( a1[5] > v8 )
  {
    v9 = a1[4];
    v8 = a1[5];
  }
  a1[6] = v9;
  *a1 = v10;
  a1[2] = v4;
  a1[7] = v8;
  a1[1] = v11;
  a1[4] = v6;
  a1[5] = v7;
  a1[3] = v12;
  return result;
}

//----- (004D3D90) --------------------------------------------------------
int __cdecl sub_4D3D90(float2 *a1, float2 *a2)
{
  if ( !a1 || !a2 )
    return 0;
  a2->field_0 = (a1->field_4 + a1->field_0) * 0.70710677 + 2957.0;
  a2->field_4 = (a1->field_4 - a1->field_0) * 0.70710677 + 2956.0;
  if ( a2->field_0 <= 80.5 )
    a2->field_0 = 82.5;
  if ( a2->field_4 <= 80.5 )
    a2->field_4 = 81.5;
  if ( a2->field_0 >= 5853.5 )
    a2->field_0 = 5851.5;
  if ( a2->field_4 >= 5853.5 )
    a2->field_4 = 5852.5;
  return 1;
}

//----- (004D3E30) --------------------------------------------------------
int __cdecl sub_4D3E30(float2 *a1, float2 *a2)
{
  int result; // eax

  if ( !a1 || !a2 )
    return 0;
  if ( a1->field_0 <= 80.5 )
    a1->field_0 = 82.5;
  if ( a1->field_4 <= 80.5 )
    a1->field_4 = 81.5;
  if ( a1->field_0 >= 5853.5 )
    a1->field_0 = 5851.5;
  if ( a1->field_4 >= 5853.5 )
    a1->field_4 = 5852.5;
  result = 1;
  a2->field_0 = (a1->field_0 - 1.0 - a1->field_4) * 0.70710677;
  a2->field_4 = (a1->field_4 + a1->field_0 - 5912.0) * 0.70710677;
  return result;
}

//----- (004D3ED0) --------------------------------------------------------
BOOL __cdecl sub_4D3ED0(float2 *a1)
{
  BOOL result; // eax
  float v2; // [esp+0h] [ebp-8h]
  float v3; // [esp+4h] [ebp-4h]

  result = 0;
  if ( a1 )
  {
    v2 = (a1->field_4 + a1->field_0) * 0.70710677 + 2957.0;
    v3 = (a1->field_4 - a1->field_0) * 0.70710677 + 2956.0;
    if ( v2 > 80.5 && v3 > 80.5 && v2 < 5853.5 && v3 < 5853.5 )
      result = 1;
  }
  return result;
}

//----- (004D3F60) --------------------------------------------------------
int __cdecl sub_4D3F60(int a1)
{
  if ( a1 != 1 && a1 )
    return 0;
  *(_DWORD *)&byte_5D4594[3835408] = 1;
  return 1;
}

//----- (004D3F80) --------------------------------------------------------
int __cdecl sub_4D3F80(int a1)
{
  int result; // eax

  switch ( a1 )
  {
    case 0:
      result = 1;
      break;
    case 1:
      result = 2;
      break;
    case 2:
      result = 5;
      break;
    case 3:
      result = 0;
      break;
    case 5:
      result = 8;
      break;
    case 6:
      result = 3;
      break;
    case 7:
      result = 6;
      break;
    case 8:
      result = 7;
      break;
    default:
      result = -1;
      break;
  }
  return result;
}

//----- (004D3FF0) --------------------------------------------------------
int __cdecl sub_4D3FF0(int a1)
{
  int result; // eax

  switch ( a1 )
  {
    case 0:
      result = 3;
      break;
    case 1:
      result = 0;
      break;
    case 2:
      result = 1;
      break;
    case 3:
      result = 6;
      break;
    case 5:
      result = 2;
      break;
    case 6:
      result = 7;
      break;
    case 7:
      result = 8;
      break;
    case 8:
      result = 5;
      break;
    default:
      result = -1;
      break;
  }
  return result;
}

//----- (004D4060) --------------------------------------------------------
float2 *__cdecl sub_4D4060(float2 *a1, float2 *a2, int a3)
{
  double v3; // st7
  double v4; // st6
  int v5; // esi
  int v6; // edx
  int v7; // ecx
  double v8; // st7
  float2 *result; // eax
  double v10; // st7
  int v11; // [esp+Ch] [ebp-8h]
  float v12; // [esp+10h] [ebp-4h]
  float2 *v13; // [esp+18h] [ebp+4h]

  v3 = a1->field_0 + 11.5;
  v4 = a1->field_4 + 11.5;
  v13 = (float2 *)(__int64)(v3 * 0.021739131);
  v12 = v4;
  v11 = (__int64)(v4 * 0.021739131);
  v5 = (int)(__int64)v3 % 46;
  v6 = (__int64)v12 % 46;
  v7 = 2 * a3;
  if ( v5 <= v6 )
  {
    if ( v7 - v5 <= v6 )
    {
      result = a2;
      a2->field_0 = (double)(int)v13 * 46.0 + 11.0;
      v10 = (double)v11;
      goto LABEL_8;
    }
    v8 = (double)(int)((unsigned __int64)(__int64)(v3 * 0.021739131) - 1) * 46.0;
LABEL_6:
    result = a2;
    a2->field_0 = v8 + 34.0;
    a2->field_4 = (double)v11 * 46.0 + 11.0;
    return result;
  }
  v8 = (double)(int)v13 * 46.0;
  if ( v7 - v5 <= v6 )
    goto LABEL_6;
  result = a2;
  a2->field_0 = v8 + 11.0;
  v10 = (double)(int)((unsigned __int64)(__int64)(v4 * 0.021739131) - 1);
LABEL_8:
  result->field_4 = v10 * 46.0 + 34.0;
  return result;
}

//----- (004D4160) --------------------------------------------------------
int sub_4D4160()
{
  int v0; // edi
  int v1; // esi
  int v2; // eax
  int v3; // eax
  int v4; // eax
  char *v5; // eax
  char *v6; // eax
  float2 v8; // [esp+8h] [ebp-808h]
  CHAR FileName[1024]; // [esp+10h] [ebp-800h]
  CHAR ExistingFileName[1024]; // [esp+410h] [ebp-400h]

  sub_40A4D0(0x400000);
  sub_51D4D0((char *)&byte_587000[197596]);
  v8.field_4 = 0.0;
  v8.field_0 = 0.0;
  v0 = 20;
  do
  {
    v1 = 20;
    do
    {
      sub_51D5E0(&v8);
      --v1;
      v8.field_0 = v8.field_0 + 32.526913;
    }
    while ( v1 );
    --v0;
    v8.field_0 = 0.0;
    v8.field_4 = v8.field_4 + 32.526913;
  }
  while ( v0 );
  v8.field_4 = 0.0;
  v8.field_0 = 0.0;
  v2 = sub_5029A0((char *)&byte_587000[197608]);
  sub_503830(v2);
  sub_503B30(&v8);
  v8.field_4 = 65.053825;
  v8.field_0 = 65.053825;
  v3 = sub_5029A0((char *)&byte_587000[197620]);
  sub_503830(v3);
  sub_503B30(&v8);
  v8.field_4 = 195.16147;
  v8.field_0 = 195.16147;
  v4 = sub_5029A0((char *)&byte_587000[197632]);
  sub_503830(v4);
  sub_503B30(&v8);
  v5 = sub_409E10();
  nox_sprintf(FileName, (const char *)&byte_587000[197648], v5);
  v6 = sub_409E10();
  nox_sprintf(ExistingFileName, (const char *)&byte_587000[197660], v6);
  DeleteFileA(FileName);
  MoveFileA(ExistingFileName, FileName);
  return sub_40A540(0x400000);
}

//----- (004D42C0) --------------------------------------------------------
int sub_4D42C0()
{
  return *(_DWORD *)&byte_5D4594[1550916];
}

//----- (004D42D0) --------------------------------------------------------
int __cdecl sub_4D42D0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1550916] = a1;
  return result;
}

//----- (004D42E0) --------------------------------------------------------
unsigned int __cdecl sub_4D42E0(const char *a1)
{
  unsigned int result; // eax

  result = strlen(a1) + 1;
  qmemcpy(&byte_587000[197860], a1, result);
  return result;
}

//----- (004D4310) --------------------------------------------------------
char *sub_4D4310()
{
  return (char *)&byte_587000[197860];
}

//----- (004D4320) --------------------------------------------------------
BOOL sub_4D4320()
{
  int v0; // esi
  int v1; // eax
  char *v2; // eax
  char *v3; // eax
  BOOL result; // eax
  int i; // eax
  char *v6; // eax
  char *v7; // eax
  char *v8; // [esp-8h] [ebp-C10h]
  char *v9; // [esp-4h] [ebp-C0Ch]
  char *v10; // [esp-4h] [ebp-C0Ch]
  CHAR PathName[1024]; // [esp+8h] [ebp-C00h]
  CHAR FileName[1024]; // [esp+408h] [ebp-800h]
  CHAR ExistingFileName[1024]; // [esp+808h] [ebp-400h]

  v0 = 100;
  sub_4D12E0(1);
  sub_40A4D0(0x400000);
  sub_4DA3C0(&byte_5D4594[1550924]);
  memset(&byte_5D4594[3801836], 0, 0x5B8u);
  while ( 1 )
  {
    v1 = sub_4D44E0();
    if ( v1 == 1 )
      break;
    if ( v1 )
    {
      if ( --v0 )
        continue;
    }
    return 0;
  }
  v2 = sub_409E10();
  nox_sprintf(FileName, (const char *)&byte_587000[198192], v2);
  v3 = sub_409E10();
  nox_sprintf(ExistingFileName, (const char *)&byte_587000[198204], v3);
  if ( _access(FileName, 0) == -1 || (result = DeleteFileA(FileName)) )
  {
    if ( _access(ExistingFileName, 0) == -1 || (result = MoveFileA(ExistingFileName, FileName)) )
    {
      for ( i = sub_4DA790(); i; i = sub_4DA7A0(i) )
        *(_DWORD *)(i + 44) = 0;
      sub_4D5DB0((int)&byte_5D4594[3801836]);
      v9 = sub_4D4310();
      v6 = sub_409E10();
      nox_sprintf(PathName, (const char *)&byte_587000[198220], v6, v9);
      _mkdir(PathName);
      v10 = sub_4D4310();
      v8 = sub_4D4310();
      v7 = sub_409E10();
      nox_sprintf(PathName, (const char *)&byte_587000[198232], v7, v8, v10);
      if ( !sub_51E010(PathName, 1) )
        return 0;
      sub_4D12E0(1);
      sub_4DA3E0(*(int *)&byte_5D4594[1550924]);
      *(_DWORD *)&byte_5D4594[1550924] = 0;
      sub_40A540(0x400000);
      result = 1;
    }
  }
  return result;
}

//----- (004D44E0) --------------------------------------------------------
int sub_4D44E0()
{
  const char *v0; // eax
  int result; // eax
  int v2; // esi
  int v3; // esi
  float *v4; // edi
  double v5; // st7
  char *i; // esi
  int *j; // esi
  int *k; // esi
  float2 a2; // [esp+4h] [ebp-8h]

  *(_DWORD *)&byte_5D4594[1550916] = 0;
  v0 = (const char *)sub_57C490((const char *)&byte_587000[198252]);
  if ( v0 )
    sub_4D42E0(v0);
  sub_526C40(0);
  sub_51D100(0);
  result = sub_51E260((int *)&byte_5D4594[1549796], (int)&byte_587000[197860]);
  if ( result )
  {
    *(_DWORD *)&byte_5D4594[1549864] = (__int64)(*(float *)&byte_5D4594[1549860] * 0.030743772);
    sub_526AB0(*(unsigned int *)&byte_5D4594[1549872]);
    sub_526950();
    result = sub_5213E0();
    if ( result )
    {
      result = sub_520EA0((int)&byte_5D4594[1549796]);
      if ( result )
      {
        sub_4D4F40(&byte_5D4594[1549796]);
        if ( sub_525D20((int)&byte_5D4594[1549796]) )
        {
          sub_4D52F0();
          if ( sub_5266F0((int)&byte_5D4594[1549796]) )
          {
            if ( !sub_526830((int)&byte_5D4594[1549796]) )
            {
              v2 = 0;
LABEL_25:
              sub_521A40();
              sub_521400();
              sub_520F80();
              sub_520D50(&byte_5D4594[1549796]);
              return v2;
            }
            sub_5259F0(*(int *)&byte_5D4594[1550916], 0, 0.0);
            sub_525AF0(*(int *)&byte_5D4594[1550916]);
            if ( *(_DWORD *)&byte_5D4594[1549980] )
            {
              v3 = (__int64)(*(float *)&byte_5D4594[1549860] * 0.030743772);
              v4 = sub_521940(2 * v3 + 1, 2 * v3 + 1);
              v5 = (double)-v3 * 32.526913;
              a2.field_0 = v5;
              a2.field_4 = v5;
              sub_521880(v4, &a2);
              for ( i = (char *)sub_521710(); i; i = (char *)sub_521720((int)i) )
                sub_521BC0((int)v4, (float2 *)(i + 20), *((float *)i + 7), *((float *)i + 8));
              sub_524070((int)&byte_5D4594[1549796], (int)v4);
              sub_524E00((int)&byte_5D4594[1549796], (int)v4);
              sub_522340((int)&byte_5D4594[1549796], (int)v4);
              sub_521A10(v4);
            }
            if ( sub_524310((int)&byte_5D4594[1549796]) )
            {
              for ( j = (int *)sub_521710(); j; j = (int *)sub_521720((int)j) )
              {
                if ( sub_5238F0(j) )
                {
                  sub_5235F0(156);
                  sub_524E00((int)&byte_5D4594[1549796], (int)j);
                }
              }
              for ( k = (int *)sub_521710(); k; k = (int *)sub_521720((int)k) )
              {
                if ( !sub_5238F0(k) )
                {
                  sub_5235F0(156);
                  sub_524E00((int)&byte_5D4594[1549796], (int)k);
                }
              }
              sub_522D30((int)&byte_5D4594[1549796]);
              sub_4D4790();
              sub_522F40(&byte_5D4594[1549796]);
              sub_521710();
              sub_5228B0((int)&byte_5D4594[1549796]);
              v2 = 1;
              goto LABEL_25;
            }
          }
        }
        v2 = 2;
        goto LABEL_25;
      }
    }
  }
  return result;
}

//----- (004D4790) --------------------------------------------------------
float *sub_4D4790()
{
  float *result; // eax
  float *v1; // edi
  int *v2; // esi
  int v3; // ebx
  int v4; // ebp
  int v5; // eax
  int *v6; // ebp
  int v7; // eax
  float *v8; // eax
  double v9; // st7
  double v10; // st7
  float *v11; // eax
  double v12; // st7
  double v13; // st7
  double v14; // st7
  double v15; // st7
  int v16; // eax
  int v17; // eax
  int *v18; // ebp
  int v19; // ecx
  float *v20; // eax
  double v21; // st7
  double v22; // st7
  double v23; // st7
  float *v24; // eax
  double v25; // st7
  double v26; // st7
  double v27; // st7
  int v28; // eax
  int v29; // [esp+8h] [ebp-40h]
  int v30; // [esp+Ch] [ebp-3Ch]
  int v31; // [esp+Ch] [ebp-3Ch]
  int v32; // [esp+10h] [ebp-38h]
  int v33; // [esp+14h] [ebp-34h]
  float2 v34; // [esp+18h] [ebp-30h]
  float2 a2; // [esp+20h] [ebp-28h]
  float v36; // [esp+28h] [ebp-20h]
  float v37; // [esp+2Ch] [ebp-1Ch]
  float2 v38; // [esp+30h] [ebp-18h]
  float2 v39; // [esp+38h] [ebp-10h]
  int2 a1; // [esp+40h] [ebp-8h]

  result = (float *)sub_521710();
  v1 = result;
  v2 = 0;
  if ( !result )
    return result;
  v3 = v33;
  do
  {
    if ( *(_DWORD *)v1 != 1 )
      goto LABEL_117;
    sub_5235F0(156);
    v4 = 0;
    v32 = 0;
    while ( 1 )
    {
      if ( !*((_BYTE *)v1 + v4 + 216) && sub_526AC0(1, 100) <= *(int *)&byte_5D4594[1549848] )
      {
        switch ( v4 )
        {
          case 0:
          case 1:
            a1.field_0 = (int)v1[1];
            if ( v4 == 1 )
              a1.field_4 = *((_DWORD *)v1 + 2) + *((_DWORD *)v1 + 4);
            else
              a1.field_4 = *((_DWORD *)v1 + 2) - 1;
            v31 = 0;
            if ( *((int *)v1 + 3) <= 0 )
              goto LABEL_115;
            while ( 1 )
            {
              v17 = sub_521290(&a1);
              v18 = (int *)v17;
              if ( v17 )
              {
                if ( (int *)v17 != v2 )
                  goto LABEL_72;
                if ( *(_BYTE *)(v17 + 52) & 2 )
                  ++v29;
              }
              if ( (int *)v17 != v2 || (v19 = v31, v31 == *((_DWORD *)v1 + 3) - 1) )
              {
LABEL_72:
                if ( v2 && v29 >= 3 )
                {
                  v34.field_0 = (double)((v3 + v31) / 2) * 32.526913 + v1[9];
                  if ( v32 == 1 )
                    v34.field_4 = v1[12];
                  else
                    v34.field_4 = v1[10];
                  sub_527030(&v34);
                  v34.field_0 = v34.field_0 - 16.263456;
                  if ( v29 < 4 )
                    sub_527940((char *)&byte_587000[198320]);
                  else
                    sub_527940((char *)&byte_587000[198304]);
                  v20 = sub_5279B0(&v34.field_0);
                  if ( v20 )
                    sub_527C60((int)v20, 5);
                  a2.field_0 = v34.field_0;
                  if ( v32 == 1 )
                    a2.field_4 = v34.field_4 - 32.526913;
                  else
                    a2.field_4 = v34.field_4;
                  sub_521BC0((int)v1, &a2, 32.526913, 32.526913);
                  if ( sub_5238F0(v2) )
                  {
                    v21 = a2.field_4;
                    if ( v32 == 1 )
                      v22 = v21 + 32.526913;
                    else
                      v22 = v21 - 32.526913;
                    a2.field_4 = v22;
                    sub_521BC0((int)v2, &a2, 32.526913, 32.526913);
                  }
                  v23 = v34.field_0 + 16.263456;
                  if ( v29 < 4 )
                  {
                    v37 = v34.field_4;
                  }
                  else
                  {
                    v34.field_0 = v23 + 32.526913;
                    sub_527030(&v34);
                    v34.field_0 = v34.field_0 + 16.263456;
                    sub_527940((char *)&byte_587000[198332]);
                    v24 = sub_5279B0(&v34.field_0);
                    if ( v24 )
                      sub_527C60((int)v24, 3);
                    v25 = v34.field_0 - 32.526913;
                    v37 = v34.field_4;
                    v36 = v25;
                    a2.field_0 = v25;
                    if ( v32 == 1 )
                      a2.field_4 = v34.field_4 - 32.526913;
                    else
                      a2.field_4 = v34.field_4;
                    sub_521BC0((int)v1, &a2, 32.526913, 32.526913);
                    if ( sub_5238F0(v2) )
                    {
                      v26 = a2.field_4;
                      if ( v32 == 1 )
                        v27 = v26 + 32.526913;
                      else
                        v27 = v26 - 32.526913;
                      a2.field_4 = v27;
                      sub_521BC0((int)v2, &a2, 32.526913, 32.526913);
                    }
                    v23 = v36;
                  }
                  v39.field_0 = v23;
                  v39.field_4 = v37 - 32.526913;
                  v38.field_0 = v23;
                  v38.field_4 = v37 + 32.526913;
                  sub_522C80(&v39.field_0);
                  sub_522C80(&v38.field_0);
                  sub_51D3F0(&v39, &v38);
                  sub_51D3F0(&v38, &v39);
                  if ( v32 == 1 )
                  {
                    sub_522CA0((int)v1, &v39.field_0);
                    if ( *v2 == 1 )
                      sub_522CA0((int)v2, &v38.field_0);
                  }
                  else
                  {
                    sub_522CA0((int)v1, &v38.field_0);
                    if ( *v2 == 1 )
                      sub_522CA0((int)v2, &v39.field_0);
                  }
                  sub_521900((int)v1, (int)v2, v32);
                  v28 = sub_523960(v32);
                  sub_521900((int)v2, (int)v1, v28);
                }
                v19 = v31;
                v3 = v31;
                v29 = 1;
                v2 = v18;
                if ( v18 && *v18 == 1 && v32 == 1 )
                  v2 = 0;
              }
              ++a1.field_0;
              v31 = v19 + 1;
              if ( v19 + 1 >= *((_DWORD *)v1 + 3) )
                goto LABEL_114;
            }
          case 2:
          case 3:
            if ( v4 == 2 )
              a1.field_0 = *((_DWORD *)v1 + 1) + *((_DWORD *)v1 + 3);
            else
              a1.field_0 = *((_DWORD *)v1 + 1) - 1;
            v30 = 0;
            a1.field_4 = (int)v1[2];
            if ( *((int *)v1 + 4) <= 0 )
              goto LABEL_115;
            break;
          default:
            goto LABEL_115;
        }
        while ( 1 )
        {
          v5 = sub_521290(&a1);
          v6 = (int *)v5;
          if ( v5 )
          {
            if ( (int *)v5 != v2 )
              goto LABEL_19;
            if ( *(_BYTE *)(v5 + 52) & 2 )
              ++v29;
          }
          if ( (int *)v5 != v2 || (v7 = v30, v30 == *((_DWORD *)v1 + 4) - 1) )
          {
LABEL_19:
            if ( v2 && v29 >= 3 )
            {
              if ( v32 == 2 )
                v34.field_0 = v1[11];
              else
                v34.field_0 = v1[9];
              v34.field_4 = (double)((v3 + v30) / 2) * 32.526913 + v1[10];
              sub_527030(&v34);
              v34.field_4 = v34.field_4 - 16.263456;
              if ( v29 < 4 )
                sub_527940((char *)&byte_587000[198276]);
              else
                sub_527940((char *)&byte_587000[198260]);
              v8 = sub_5279B0(&v34.field_0);
              if ( v8 )
                sub_527C60((int)v8, 7);
              if ( v32 == 2 )
                a2.field_0 = v34.field_0 - 32.526913;
              else
                a2.field_0 = v34.field_0;
              a2.field_4 = v34.field_4;
              sub_521BC0((int)v1, &a2, 32.526913, 32.526913);
              if ( sub_5238F0(v2) )
              {
                v9 = a2.field_0;
                if ( v32 == 2 )
                  v10 = v9 + 32.526913;
                else
                  v10 = v9 - 32.526913;
                a2.field_0 = v10;
                sub_521BC0((int)v2, &a2, 32.526913, 32.526913);
              }
              if ( v29 < 4 )
              {
                v15 = v34.field_4 + 16.263456;
                v36 = v34.field_0;
              }
              else
              {
                v34.field_4 = v34.field_4 + 16.263456 + 32.526913;
                sub_527030(&v34);
                v34.field_4 = v34.field_4 + 16.263456;
                sub_527940((char *)&byte_587000[198288]);
                v11 = sub_5279B0(&v34.field_0);
                if ( v11 )
                  sub_527C60((int)v11, 1);
                v12 = v34.field_4 - 32.526913;
                v36 = v34.field_0;
                v37 = v12;
                if ( v32 == 2 )
                  a2.field_0 = v34.field_0 - 32.526913;
                else
                  a2.field_0 = v34.field_0;
                a2.field_4 = v12;
                sub_521BC0((int)v1, &a2, 32.526913, 32.526913);
                if ( sub_5238F0(v2) )
                {
                  v13 = a2.field_0;
                  if ( v32 == 2 )
                    v14 = v13 + 32.526913;
                  else
                    v14 = v13 - 32.526913;
                  a2.field_0 = v14;
                  sub_521BC0((int)v2, &a2, 32.526913, 32.526913);
                }
                v15 = v37;
              }
              v39.field_0 = v36 - 32.526913;
              v39.field_4 = v15;
              v38.field_0 = v36 + 32.526913;
              v38.field_4 = v15;
              sub_522C80(&v39.field_0);
              sub_522C80(&v38.field_0);
              sub_51D3F0(&v39, &v38);
              sub_51D3F0(&v38, &v39);
              if ( v32 == 2 )
              {
                sub_522CA0((int)v1, &v39.field_0);
                if ( *v2 == 1 )
                  sub_522CA0((int)v2, &v38.field_0);
              }
              else
              {
                sub_522CA0((int)v1, &v38.field_0);
                if ( *v2 == 1 )
                  sub_522CA0((int)v2, &v39.field_0);
              }
              sub_521900((int)v1, (int)v2, v32);
              v16 = sub_523960(v32);
              sub_521900((int)v2, (int)v1, v16);
            }
            v7 = v30;
            v29 = 1;
            v3 = v30;
            v2 = v6;
            if ( v6 && *v6 == 1 && v32 == 3 )
              v2 = 0;
          }
          ++a1.field_4;
          v30 = v7 + 1;
          if ( v7 + 1 >= *((_DWORD *)v1 + 4) )
          {
LABEL_114:
            v4 = v32;
            break;
          }
        }
      }
LABEL_115:
      v32 = ++v4;
      if ( v4 >= 4 )
        break;
      v2 = 0;
    }
    v2 = 0;
LABEL_117:
    result = (float *)sub_521720((int)v1);
    v1 = result;
  }
  while ( result );
  return result;
}
// 4D47A7: variable 'v33' is possibly undefined
// 4D4853: variable 'v29' is possibly undefined

//----- (004D4F40) --------------------------------------------------------
float *__cdecl sub_4D4F40(_DWORD *a1)
{
  float *v1; // edi
  float *result; // eax
  double v3; // st7
  int v4; // ebp
  int *v5; // ebx
  float *v6; // esi
  int v7; // eax
  double v8; // st7
  int v9; // esi
  int v10; // edi
  int v11; // ecx
  int v12; // esi
  int *v13; // ebp
  int v14; // edi
  int v15; // ebx
  float *v16; // esi
  int v17; // esi
  int v18; // ebx
  int v19; // edi
  signed int v20; // esi
  int v21; // eax
  float2 v22; // [esp+10h] [ebp-220h]
  int v24; // [esp+18h] [ebp-218h]
  int *v25; // [esp+1Ch] [ebp-214h]
  float *v26; // [esp+20h] [ebp-210h]
  int v27; // [esp+24h] [ebp-20Ch]
  float2 v28; // [esp+28h] [ebp-208h]
  int v30[128]; // [esp+30h] [ebp-200h]

  v1 = 0;
  *(_DWORD *)&byte_5D4594[1550912] = 0;
  if ( *a1 == 1 )
  {
    v26 = 0;
    v24 = 0;
    v22.field_0 = 0.0;
    v22.field_4 = 0.0;
    v25 = (int *)&byte_587000[197924];
LABEL_5:
    v4 = 0;
    v5 = &v30[v24];
    v27 = *v25;
    while ( 1 )
    {
      result = (float *)calloc(1u, 0x178u);
      v6 = result;
      *v5 = (int)result;
      if ( !result )
        break;
      v7 = v27;
      *(_DWORD *)v6 = v27;
      switch ( v7 )
      {
        case 2:
          v22.field_4 = v22.field_4 - 162.63457;
          *((_DWORD *)v6 + 3) = 4;
          *((_DWORD *)v6 + 4) = 5;
          sub_521900((int)v6, (int)v1, 1);
          sub_521900((int)v1, (int)v6, 0);
          break;
        case 3:
          if ( *(_DWORD *)v1 == 4 )
          {
            v22.field_0 = v22.field_0 + 32.526913;
            v8 = v22.field_4 + 130.10765;
          }
          else
          {
            v8 = v22.field_4 + 162.63457;
          }
          v22.field_4 = v8;
          *((_DWORD *)v6 + 3) = 4;
          *((_DWORD *)v6 + 4) = 5;
          sub_521900((int)v6, (int)v1, 0);
          sub_521900((int)v1, (int)v6, 1);
          break;
        case 4:
          if ( v1 )
          {
            v22.field_0 = v22.field_0 + 162.63457;
            sub_521900((int)v6, (int)v1, 3);
            sub_521900((int)v1, (int)v6, 2);
          }
          *((_DWORD *)v6 + 3) = 5;
          *((_DWORD *)v6 + 4) = 4;
          break;
        case 5:
          if ( *(_DWORD *)v1 == 3 )
            v22.field_4 = v22.field_4 + 32.526913;
          v22.field_0 = v22.field_0 - 162.63457;
          *((_DWORD *)v6 + 3) = 5;
          *((_DWORD *)v6 + 4) = 4;
          sub_521900((int)v6, (int)v1, 2);
          sub_521900((int)v1, (int)v6, 3);
          if ( v4 == 5 )
            v26 = v6;
          break;
        default:
          break;
      }
      v28.field_0 = v22.field_0 - 878.22662;
      v28.field_4 = v22.field_4 - 878.22662;
      v6[7] = (double)*((int *)v6 + 3) * 32.526913;
      v6[8] = (double)*((int *)v6 + 4) * 32.526913;
      sub_521880(v6, &v28);
      sub_521730(v6);
      v1 = v6;
      v9 = v24 + 1;
      ++v5;
      ++v4;
      ++v24;
      if ( v4 >= 10 )
      {
        ++v25;
        if ( (int)v25 < (int)&byte_587000[197940] )
          goto LABEL_5;
        v10 = v30[0];
        v11 = v9;
        v12 = v30[v9 - 1];
        v13 = &v30[v11];
        sub_521900(v12, v30[0], 2);
        sub_521900(v10, v12, 3);
        v14 = (int)v26;
        v15 = 0;
        v22.field_0 = v26[5];
        v22.field_4 = v26[8] + v26[6];
        while ( 1 )
        {
          result = (float *)calloc(1u, 0x178u);
          v16 = result;
          *v13 = (int)result;
          if ( !result )
            break;
          *(_DWORD *)result = 3;
          *((_DWORD *)result + 3) = 4;
          *((_DWORD *)result + 4) = 5;
          sub_521900((int)result, v14, 0);
          sub_521900(v14, (int)v16, 1);
          v16[7] = (double)*((int *)v16 + 3) * 32.526913;
          v16[8] = (double)*((int *)v16 + 4) * 32.526913;
          sub_521880(v16, &v22);
          sub_521730(v16);
          v14 = (int)v16;
          v17 = v24 + 1;
          ++v13;
          ++v15;
          v22.field_4 = v22.field_4 + 162.63457;
          ++v24;
          if ( v15 >= 8 )
          {
            v18 = v17;
            v19 = v17 / 5;
            if ( v17 / 5 < 1 )
              v19 = 1;
            v20 = sub_526AC0(0, v19);
            do
            {
              v21 = v30[v20];
              *(_DWORD *)(v21 + 84) = *(_DWORD *)&byte_5D4594[1550912];
              *(_DWORD *)&byte_5D4594[1550912] = v21;
              v20 += sub_526AC0(1, v19);
            }
            while ( v20 < v18 );
            result = (float *)v30[v18 - 1];
            *(_DWORD *)&byte_5D4594[1550916] = v30[v18 - 1];
            return result;
          }
        }
        return result;
      }
    }
  }
  else
  {
    result = sub_521990((int)a1);
    *(_DWORD *)&byte_5D4594[1550916] = result;
    if ( result )
    {
      v3 = (double)(int)a1[17];
      v22.field_0 = 0.0;
      v22.field_4 = v3 * 32.526913 - result[8] + 97.580734;
      sub_521880(result, &v22);
      sub_521730(*(_DWORD **)&byte_5D4594[1550916]);
      result = *(float **)&byte_5D4594[1550916];
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1550916] + 84) = *(_DWORD *)&byte_5D4594[1550912];
      *(_DWORD *)&byte_5D4594[1550912] = *(_DWORD *)&byte_5D4594[1550916];
    }
  }
  return result;
}
// 4D4F40: using guessed type int var_200[128];

//----- (004D52F0) --------------------------------------------------------
void sub_4D52F0()
{
  _DWORD *v0; // esi

  v0 = *(_DWORD **)&byte_5D4594[1550912];
  if ( *(_DWORD *)&byte_5D4594[1550912] )
  {
    do
    {
      switch ( *v0 )
      {
        case 1:
          sub_4D5350(v0, 0, 0, 0, 0);
          break;
        case 2:
        case 3:
          sub_4D5350(v0, 0, 0, v0[3], 0);
          break;
        case 4:
        case 5:
          sub_4D5350(v0, 0, 0, v0[4], 0);
          break;
        default:
          break;
      }
      v0 = (_DWORD *)v0[21];
    }
    while ( v0 );
  }
}

//----- (004D5350) --------------------------------------------------------
int __cdecl sub_4D5350(_DWORD *a1, int a2, int a3, int a4, int a5)
{
  int v5; // esi
  int result; // eax

  v5 = a2 + 1;
  if ( a2 + 1 >= *(int *)&byte_5D4594[1549868] )
    return 0;
  sub_5235F0(155);
  if ( *a1 == 1 )
    result = sub_4D53B0((int)a1, v5, a3, a4, a5);
  else
    result = sub_4D5630((int)a1, v5, a3, a4, a5);
  return result;
}

//----- (004D53B0) --------------------------------------------------------
int __cdecl sub_4D53B0(int a1, int a2, int a3, int a4, int a5)
{
  float *v5; // ebx
  int v6; // eax
  int v7; // esi
  int v8; // eax
  int v9; // edi
  int v10; // eax
  int v11; // ebp
  int v12; // eax
  int v13; // eax
  signed int v14; // eax
  int v15; // eax
  int v16; // esi
  int v17; // ebp
  float *v18; // esi
  double v19; // st7
  double v20; // st7
  int v21; // eax
  int v22; // eax
  int *v23; // eax
  int v24; // edi
  int v25; // eax
  int v26; // eax
  int v28; // [esp+10h] [ebp-1Ch]
  float2 a2a; // [esp+14h] [ebp-18h]
  int v30; // [esp+1Ch] [ebp-10h]
  int v31; // [esp+20h] [ebp-Ch]
  int v32; // [esp+24h] [ebp-8h]
  int v33; // [esp+28h] [ebp-4h]
  int v34; // [esp+30h] [ebp+4h]

  v5 = (float *)a1;
  v6 = sub_5218B0(a1, 0);
  v7 = v6 != 0 ? 0 : 2;
  v30 = v6 != 0 ? 0 : 2;
  v8 = sub_5218B0(a1, 1);
  v9 = v8 != 0 ? 0 : 3;
  v31 = v8 != 0 ? 0 : 3;
  v10 = sub_5218B0(a1, 2);
  v11 = v10 != 0 ? 0 : 4;
  v32 = v10 != 0 ? 0 : 4;
  v12 = -(sub_5218B0(a1, 3) != 0);
  LOBYTE(v12) = v12 & 0xFB;
  v13 = v12 + 5;
  v33 = v13;
  if ( v7 || v9 || v11 || v13 )
  {
    v14 = sub_526AC0(0, 3);
    v34 = 0;
    while ( 1 )
    {
      v15 = (v14 + 1) % 4;
      v16 = *(&v30 + v15);
      v28 = v15;
      if ( !v16 )
        goto LABEL_6;
      v17 = sub_526AC0(
              *(_DWORD *)&byte_5D4594[1549808] - *(_DWORD *)&byte_5D4594[1549812],
              *(_DWORD *)&byte_5D4594[1549812] + *(_DWORD *)&byte_5D4594[1549808]);
      v18 = sub_523EC0((int)&byte_5D4594[1549796], v16, v17);
      if ( !v18 )
        return 0;
      switch ( *(_DWORD *)v18 )
      {
        case 2:
          a2a.field_0 = sub_521B00((int)v5, (int)v18);
          v19 = v5[6] - v18[8];
          goto LABEL_15;
        case 3:
          a2a.field_0 = sub_521B00((int)v5, (int)v18);
          v19 = v5[8] + v5[6];
          goto LABEL_15;
        case 4:
          v20 = v5[7] + v5[5];
          goto LABEL_14;
        case 5:
          v20 = v5[5] - v18[7];
LABEL_14:
          a2a.field_0 = v20;
          v19 = sub_521B30((int)v5, (int)v18);
LABEL_15:
          a2a.field_4 = v19;
          break;
        default:
          break;
      }
      sub_521880(v18, &a2a);
      if ( !sub_5217A0((int)&byte_5D4594[1549796], (int)v18) )
      {
LABEL_17:
        sub_521A10(v18);
        goto LABEL_26;
      }
      v21 = sub_523920(*(_DWORD *)v18);
      v22 = sub_523960(v21);
      sub_521900((int)v18, (int)v5, v22);
      v23 = (int *)sub_521200((int)v18);
      v24 = (int)v23;
      if ( v23 )
        break;
      sub_521730(v18);
      if ( sub_4D5350(v18, a2, 1, v17, (int)v5) )
        goto LABEL_25;
      sub_521760((int)v18);
      sub_521A10(v18);
LABEL_26:
      if ( ++v34 >= 8 )
        return 1;
LABEL_6:
      v14 = v28;
    }
    if ( sub_5238F0(v23)
      || *(_BYTE *)(v24 + 52) & 2
      || v24 == a5
      || sub_526AC0(1, 100) > *(int *)&byte_5D4594[1549844]
      || !sub_523A10((int)v18, (float *)v24) )
    {
      goto LABEL_17;
    }
    sub_521730(v18);
    v25 = sub_523920(*(_DWORD *)v18);
    sub_521A70((int)v18, v24, v25);
LABEL_25:
    v26 = sub_523920(*(_DWORD *)v18);
    sub_521900((int)v5, (int)v18, v26);
    goto LABEL_26;
  }
  return 1;
}

//----- (004D5630) --------------------------------------------------------
int __cdecl sub_4D5630(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // esi
  int v6; // eax
  int v7; // ebp
  float *v8; // edi
  double v9; // st7
  double v10; // st7
  int v11; // eax
  float *v13; // eax
  float *v14; // edi
  double v15; // st7
  double v16; // st7
  int v17; // eax
  float *v18; // ebp
  int v19; // ebx
  int v20; // eax
  int v21; // eax
  float *v22; // edi
  double v23; // st7
  double v24; // st7
  double v25; // st7
  int v26; // eax
  float *v27; // ebp
  int v28; // ebx
  int v29; // eax
  int v30; // eax
  float *v31; // eax
  int *v32; // edi
  double v33; // st7
  double v34; // st7
  double v35; // st7
  double v36; // st7
  int v37; // eax
  int v38; // eax
  float *v39; // ebp
  int v40; // ebx
  int v41; // eax
  int v42; // eax
  BOOL v43; // [esp+10h] [ebp-14h]
  BOOL v44; // [esp+14h] [ebp-10h]
  int v45; // [esp+18h] [ebp-Ch]
  float2 a2a; // [esp+1Ch] [ebp-8h]
  int v47; // [esp+28h] [ebp+4h]
  int v48; // [esp+28h] [ebp+4h]
  int v49; // [esp+28h] [ebp+4h]

  v5 = a1;
  v43 = 0;
  v44 = 0;
  if ( a3 >= *(int *)&byte_5D4594[1549816] || (v6 = sub_4D5D20((_DWORD *)a1), v45 = v6, v6 == 1) )
  {
    v7 = 0;
    while ( 1 )
    {
      v8 = sub_521990((int)&byte_5D4594[1549796]);
      if ( !v8 )
        return 0;
      switch ( *(_DWORD *)a1 )
      {
        case 2:
          a2a.field_0 = sub_521B60((int)v8, a1);
          v9 = *(float *)(a1 + 24) - v8[8];
          goto LABEL_11;
        case 3:
          a2a.field_0 = sub_521B60((int)v8, a1);
          v9 = *(float *)(a1 + 32) + *(float *)(a1 + 24);
          goto LABEL_11;
        case 4:
          v10 = *(float *)(a1 + 28) + *(float *)(a1 + 20);
          goto LABEL_10;
        case 5:
          v10 = *(float *)(a1 + 20) - v8[7];
LABEL_10:
          a2a.field_0 = v10;
          v9 = sub_521B90((int)v8, a1);
LABEL_11:
          a2a.field_4 = v9;
          break;
        default:
          break;
      }
      sub_521880(v8, &a2a);
      if ( !sub_521820((int)&byte_5D4594[1549796], (int)v8) )
      {
        sub_521A10(v8);
        if ( ++v7 < 10 )
          continue;
      }
      if ( v7 == 10 )
        return 0;
      sub_521730(v8);
      v11 = sub_523920(*(_DWORD *)a1);
      sub_521A70(a1, (int)v8, v11);
      sub_4D5350(v8, a2, 0, 0, (int)v8);
      return 1;
    }
  }
  if ( v6 != 2 && v6 != 8 && v6 != 32 && v6 != 64 )
    goto LABEL_43;
  v13 = sub_523EC0((int)&byte_5D4594[1549796], *(_DWORD *)&byte_587000[4 * *(_DWORD *)a1 + 197812], a4);
  v14 = v13;
  if ( !v13 )
    return 0;
  switch ( *(_DWORD *)a1 )
  {
    case 2:
      v15 = *(float *)(a1 + 20) - v13[7];
      a2a.field_4 = *(float *)(a1 + 24);
      a2a.field_0 = v15;
      break;
    case 3:
      a2a.field_0 = *(float *)(a1 + 28) + *(float *)(a1 + 20);
      v16 = *(float *)(a1 + 32) + *(float *)(a1 + 24) - v13[8];
      goto LABEL_26;
    case 4:
      a2a.field_0 = *(float *)(a1 + 28) + *(float *)(a1 + 20) - v13[7];
      v16 = *(float *)(a1 + 24) - v13[8];
      goto LABEL_26;
    case 5:
      v16 = *(float *)(a1 + 32) + *(float *)(a1 + 24);
      a2a.field_0 = *(float *)(a1 + 20);
LABEL_26:
      a2a.field_4 = v16;
      break;
    default:
      break;
  }
  sub_521880(v13, &a2a);
  v47 = sub_5239B0(*(_DWORD *)a1);
  sub_521900((int)v14, v5, v47);
  if ( !sub_5217A0((int)&byte_5D4594[1549796], (int)v14) )
    goto LABEL_100;
  v17 = sub_521200((int)v14);
  v18 = (float *)v17;
  if ( !v17 )
  {
    v43 = 1;
    v19 = 0;
    goto LABEL_34;
  }
  if ( *(_DWORD *)v17 != 1
    || *(_BYTE *)(v17 + 52) & 2
    || v17 == a5
    || sub_526AC0(1, 100) > *(int *)&byte_5D4594[1549844] )
  {
LABEL_100:
    v43 = 0;
    goto LABEL_41;
  }
  v43 = sub_523A10((int)v14, v18);
  v19 = 1;
  if ( !v43 )
    goto LABEL_41;
LABEL_34:
  sub_521730(v14);
  if ( !v19 )
  {
    if ( sub_4D5350(v14, a2, a3 + 1, a4, a5) )
      goto LABEL_39;
    sub_521760((int)v14);
    v43 = 0;
LABEL_41:
    sub_521A10(v14);
    if ( v45 == 2 || v45 == 8 )
      return 0;
    goto LABEL_43;
  }
  v20 = sub_523920(*(_DWORD *)v14);
  sub_521A70((int)v14, (int)v18, v20);
LABEL_39:
  v21 = sub_523960(v47);
  sub_521900(v5, (int)v14, v21);
LABEL_43:
  if ( v45 != 4 && v45 != 16 && v45 != 32 && v45 != 64 )
    goto LABEL_71;
  v22 = sub_523EC0((int)&byte_5D4594[1549796], *(_DWORD *)&byte_587000[4 * *(_DWORD *)v5 + 197836], a4);
  if ( !v22 )
    return 0;
  switch ( *(_DWORD *)v5 )
  {
    case 2:
      v23 = *(float *)(v5 + 28) + *(float *)(v5 + 20);
      a2a.field_4 = *(float *)(v5 + 24);
      a2a.field_0 = v23;
      break;
    case 3:
      a2a.field_0 = *(float *)(v5 + 20) - v22[7];
      v24 = *(float *)(v5 + 32) + *(float *)(v5 + 24);
      goto LABEL_53;
    case 4:
      a2a.field_0 = *(float *)(v5 + 28) + *(float *)(v5 + 20) - v22[7];
      v25 = *(float *)(v5 + 32) + *(float *)(v5 + 24);
      goto LABEL_54;
    case 5:
      v24 = *(float *)(v5 + 24);
      a2a.field_0 = *(float *)(v5 + 20);
LABEL_53:
      v25 = v24 - v22[8];
LABEL_54:
      a2a.field_4 = v25;
      break;
    default:
      break;
  }
  sub_521880(v22, &a2a);
  v48 = sub_523970(*(_DWORD *)v5);
  sub_521900((int)v22, v5, v48);
  if ( !sub_5217A0((int)&byte_5D4594[1549796], (int)v22) )
    goto LABEL_101;
  v26 = sub_521200((int)v22);
  v27 = (float *)v26;
  if ( !v26 )
  {
    v44 = 1;
    v28 = 0;
    goto LABEL_62;
  }
  if ( *(_DWORD *)v26 != 1
    || *(_BYTE *)(v26 + 52) & 2
    || v26 == a5
    || sub_526AC0(1, 100) > *(int *)&byte_5D4594[1549844] )
  {
LABEL_101:
    v44 = 0;
    goto LABEL_69;
  }
  v44 = sub_523A10((int)v22, v27);
  v28 = 1;
  if ( !v44 )
    goto LABEL_69;
LABEL_62:
  sub_521730(v22);
  if ( !v28 )
  {
    if ( sub_4D5350(v22, a2, a3 + 1, a4, a5) )
      goto LABEL_67;
    sub_521760((int)v22);
    v44 = 0;
LABEL_69:
    sub_521A10(v22);
    if ( v45 == 4 || v45 == 16 )
      return 0;
    goto LABEL_71;
  }
  v29 = sub_523920(*(_DWORD *)v22);
  sub_521A70((int)v22, (int)v27, v29);
LABEL_67:
  v30 = sub_523960(v48);
  sub_521900(v5, (int)v22, v30);
LABEL_71:
  if ( v43 || v44 )
  {
    if ( v45 != 32 && v45 != 8 && v45 != 16 )
      return 1;
    v31 = sub_523EC0((int)&byte_5D4594[1549796], *(_DWORD *)v5, a4);
    v32 = (int *)v31;
    if ( v31 )
    {
      switch ( *(_DWORD *)v5 )
      {
        case 2:
          v33 = *(float *)(v5 + 24);
          a2a.field_0 = *(float *)(v5 + 20);
          a2a.field_4 = v33 - v31[8];
          break;
        case 3:
          v34 = *(float *)(v5 + 32) + *(float *)(v5 + 24);
          a2a.field_0 = *(float *)(v5 + 20);
          a2a.field_4 = v34;
          break;
        case 4:
          v35 = *(float *)(v5 + 28) + *(float *)(v5 + 20);
          a2a.field_4 = *(float *)(v5 + 24);
          a2a.field_0 = v35;
          break;
        case 5:
          v36 = *(float *)(v5 + 20) - v31[7];
          a2a.field_4 = *(float *)(v5 + 24);
          a2a.field_0 = v36;
          break;
        default:
          break;
      }
      sub_521880(v31, &a2a);
      v37 = sub_523920(*(_DWORD *)v5);
      v49 = sub_523960(v37);
      sub_521900((int)v32, v5, v49);
      if ( sub_5217A0((int)&byte_5D4594[1549796], (int)v32) )
      {
        v38 = sub_521200((int)v32);
        v39 = (float *)v38;
        if ( !v38 )
        {
          v40 = 0;
LABEL_89:
          sub_521730(v32);
          if ( v40 )
          {
            v41 = sub_523920(*v32);
            sub_521A70((int)v32, (int)v39, v41);
LABEL_96:
            v42 = sub_523960(v49);
            sub_521900(v5, (int)v32, v42);
            return 1;
          }
          if ( sub_4D5350(v32, a2, a3 + 1, a4, a5) )
            goto LABEL_96;
          sub_521760((int)v32);
          goto LABEL_94;
        }
        if ( *(_DWORD *)v38 == 1
          && !(*(_BYTE *)(v38 + 52) & 2)
          && v38 != a5
          && sub_526AC0(1, 100) <= *(int *)&byte_5D4594[1549844] )
        {
          v40 = 1;
          if ( sub_523A10((int)v32, v39) )
            goto LABEL_89;
        }
      }
LABEL_94:
      sub_521A10(v32);
      return 1;
    }
  }
  return 0;
}

//----- (004D5D20) --------------------------------------------------------
int __cdecl sub_4D5D20(_DWORD *a1)
{
  int result; // eax

  if ( *a1 == 2 || *a1 == 3 )
  {
    if ( a1[3] >= a1[4] )
      return 1;
  }
  else if ( a1[4] >= a1[3] )
  {
    return 1;
  }
  if ( sub_526AC0(1, 100) > *(int *)&byte_5D4594[1549820] )
  {
    if ( sub_526AC0(1, 100) > *(int *)&byte_5D4594[1549824] )
      result = sub_526AC0(1, 100) >= 50 ? 4 : 2;
    else
      result = 1;
  }
  else
  {
    sub_526AC0(1, 100);
    result = 32;
  }
  return result;
}

//----- (004D5DB0) --------------------------------------------------------
unsigned int __cdecl sub_4D5DB0(int a1)
{
  unsigned int result; // eax
  struct _SYSTEMTIME SystemTime; // [esp+Ch] [ebp-410h]
  CHAR DateStr[1024]; // [esp+1Ch] [ebp-400h]

  strcpy((char *)a1, "Generated Map");
  strcpy((char *)(a1 + 64), "Generated Map");
  *(_WORD *)(a1 + 576) = *(_WORD *)&byte_587000[198380];
  *(_DWORD *)(a1 + 592) = *(_DWORD *)&byte_587000[198384];
  strcpy((char *)(a1 + 656), "http://www.westwood.com");
  strcpy((char *)(a1 + 720), "http://www.westwood.com");
  strcpy((char *)(a1 + 848), "http://www.westwood.com");
  strcpy((char *)(a1 + 976), "Generated Map");
  strcpy((char *)(a1 + 1232), "Westwood Studios");
  GetLocalTime(&SystemTime);
  GetDateFormatA(0x800u, 0, &SystemTime, (LPCSTR)&byte_587000[198496], DateStr, 1024);
  result = strlen(DateStr) + 1;
  qmemcpy((void *)(a1 + 1360), DateStr, result);
  *(_DWORD *)(a1 + 1392) = 3;
  return result;
}

//----- (004D5F30) --------------------------------------------------------
BOOL sub_4D5F30()
{
  int v0; // esi
  int v1; // eax
  char *v2; // eax
  char *v3; // eax
  BOOL result; // eax
  CHAR FileName[1024]; // [esp+8h] [ebp-800h]
  CHAR ExistingFileName[1024]; // [esp+408h] [ebp-400h]

  v0 = 100;
  sub_40A4D0(0x400000);
  memset(&byte_5D4594[3801836], 0, 0x5B8u);
  while ( 1 )
  {
    v1 = sub_4D44E0();
    if ( v1 == 1 )
      break;
    if ( v1 )
    {
      if ( --v0 )
        continue;
    }
    return 0;
  }
  v2 = sub_409E10();
  nox_sprintf(FileName, (const char *)&byte_587000[198516], v2);
  v3 = sub_409E10();
  nox_sprintf(ExistingFileName, (const char *)&byte_587000[198528], v3);
  result = DeleteFileA(FileName);
  if ( !result )
    return result;
  if ( !MoveFileA(ExistingFileName, FileName) )
    return 0;
  sub_4D5DB0((int)&byte_5D4594[3801836]);
  sub_40A540(0x400000);
  return 1;
}

//----- (004D6000) --------------------------------------------------------
int __cdecl sub_4D6000(int a1)
{
  int result; // eax
  int v2; // esi

  result = 0;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4652) = 0;
    *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4656) = 0;
    *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4660) = 0;
    *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4664) = 0;
    *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4668) = 0;
    *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4672) = 0;
    *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4676) = 0;
    *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4680) = 0;
    *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4684) = 0;
    *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4688) = sub_4E3CC0();
    result = *(_DWORD *)(v2 + 276);
    *(_DWORD *)(result + 4692) = 63;
  }
  return result;
}

//----- (004D60B0) --------------------------------------------------------
int sub_4D60B0()
{
  int result; // eax
  int i; // esi

  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_4D6000(i);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004D60E0) --------------------------------------------------------
_DWORD *__cdecl sub_4D60E0(int a1)
{
  _DWORD *result; // eax
  int v2; // ecx

  result = (_DWORD *)a1;
  if ( (*(_BYTE *)(a1 + 16) & 0x20) != 32 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    result = *(_DWORD **)(v2 + 276);
    if ( result[1198] == 1 )
    {
      ++result[1163];
      result = *(_DWORD **)(v2 + 276);
      result[1173] |= 1u;
    }
  }
  return result;
}

//----- (004D6130) --------------------------------------------------------
int __cdecl sub_4D6130(int a1)
{
  int result; // eax
  int v2; // eax

  result = a1;
  if ( a1 )
  {
    if ( (*(_BYTE *)(a1 + 16) & 0x20) != 32 )
    {
      v2 = *(_DWORD *)(a1 + 748);
      ++*(_DWORD *)(*(_DWORD *)(v2 + 276) + 4660);
      result = *(_DWORD *)(v2 + 276);
      *(_DWORD *)(result + 4692) |= 2u;
    }
  }
  return result;
}

//----- (004D6170) --------------------------------------------------------
int __cdecl sub_4D6170(int a1)
{
  int result; // eax
  int v2; // eax

  result = a1;
  if ( a1 )
  {
    if ( (*(_BYTE *)(a1 + 16) & 0x20) != 32 )
    {
      v2 = *(_DWORD *)(a1 + 748);
      ++*(_DWORD *)(*(_DWORD *)(v2 + 276) + 4664);
      result = *(_DWORD *)(v2 + 276);
      *(_DWORD *)(result + 4692) |= 4u;
    }
  }
  return result;
}

//----- (004D61B0) --------------------------------------------------------
int __cdecl sub_4D61B0(int a1)
{
  int result; // eax
  int v2; // eax

  result = a1;
  if ( a1 )
  {
    if ( (*(_BYTE *)(a1 + 16) & 0x20) != 32 )
    {
      v2 = *(_DWORD *)(a1 + 748);
      ++*(_DWORD *)(*(_DWORD *)(v2 + 276) + 4668);
      result = *(_DWORD *)(v2 + 276);
      *(_DWORD *)(result + 4692) |= 8u;
    }
  }
  return result;
}

//----- (004D61F0) --------------------------------------------------------
int __cdecl sub_4D61F0(int a1)
{
  int result; // eax
  int v2; // eax

  result = a1;
  if ( a1 )
  {
    if ( (*(_BYTE *)(a1 + 16) & 0x20) != 32 )
    {
      v2 = *(_DWORD *)(a1 + 748);
      ++*(_DWORD *)(*(_DWORD *)(v2 + 276) + 4672);
      ++*(_DWORD *)(*(_DWORD *)(v2 + 276) + 4676);
      result = *(_DWORD *)(v2 + 276);
      *(_DWORD *)(result + 4692) |= 0x10u;
    }
  }
  return result;
}

//----- (004D6240) --------------------------------------------------------
int __cdecl sub_4D6240(int a1, int a2)
{
  int result; // eax
  int v3; // eax

  result = a1;
  if ( a1 )
  {
    if ( (*(_BYTE *)(a1 + 16) & 0x20) != 32 )
    {
      v3 = *(_DWORD *)(a1 + 748);
      *(_DWORD *)(*(_DWORD *)(v3 + 276) + 4684) += a2;
      result = *(_DWORD *)(v3 + 276);
      *(_DWORD *)(result + 4692) |= 0x20u;
    }
  }
  return result;
}

//----- (004D6290) --------------------------------------------------------
int __cdecl sub_4D6290(int a1)
{
  int result; // eax
  int v2; // eax
  char v3[16]; // [esp+0h] [ebp-10h]

  result = a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    v3[0] = -16;
    v3[1] = 11;
    *(_WORD *)&v3[2] = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4652);
    *(_WORD *)&v3[4] = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4656);
    *(_WORD *)&v3[6] = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4660);
    *(_WORD *)&v3[8] = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4664);
    *(_WORD *)&v3[10] = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4668);
    *(_WORD *)&v3[12] = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4672);
    *(_WORD *)&v3[14] = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4684);
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), v3, 16, 0, 1);
  }
  return result;
}

//----- (004D6360) --------------------------------------------------------
int __cdecl sub_4D6360(int a1)
{
  int result; // eax
  int v2; // eax

  result = a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    LOWORD(a1) = 1520;
    HIWORD(a1) = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4652);
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), &a1, 4, 0, 1);
  }
  return result;
}

//----- (004D63B0) --------------------------------------------------------
int __cdecl sub_4D63B0(int a1)
{
  int result; // eax
  int v2; // eax

  result = a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    LOWORD(a1) = 1776;
    HIWORD(a1) = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4660);
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), &a1, 4, 0, 1);
  }
  return result;
}

//----- (004D6400) --------------------------------------------------------
int __cdecl sub_4D6400(int a1)
{
  int result; // eax
  int v2; // eax

  result = a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    LOWORD(a1) = 2032;
    HIWORD(a1) = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4664);
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), &a1, 4, 0, 1);
  }
  return result;
}

//----- (004D6450) --------------------------------------------------------
int __cdecl sub_4D6450(int a1)
{
  int result; // eax
  int v2; // eax

  result = a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    LOWORD(a1) = 2288;
    HIWORD(a1) = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4668);
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), &a1, 4, 0, 1);
  }
  return result;
}

//----- (004D64A0) --------------------------------------------------------
int __cdecl sub_4D64A0(int a1)
{
  int result; // eax
  int v2; // eax

  result = a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    LOWORD(a1) = 2544;
    HIWORD(a1) = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4672);
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), &a1, 4, 0, 1);
  }
  return result;
}

//----- (004D64F0) --------------------------------------------------------
int __cdecl sub_4D64F0(int a1)
{
  int result; // eax
  int v2; // eax

  result = a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    LOWORD(a1) = 2800;
    HIWORD(a1) = *(_WORD *)(*(_DWORD *)(v2 + 276) + 4684);
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), &a1, 4, 0, 1);
  }
  return result;
}

//----- (004D6540) --------------------------------------------------------
unsigned int __cdecl sub_4D6540(int a1)
{
  int v1; // edi
  unsigned int *v2; // eax
  unsigned int *v3; // ebx
  unsigned int result; // eax
  unsigned int v5; // ebp
  int i; // edi
  unsigned int *v7; // esi
  unsigned int v8; // eax
  int v9; // eax
  float v10; // [esp+0h] [ebp-28h]
  unsigned int v11; // [esp+14h] [ebp-14h]
  unsigned int v12; // [esp+18h] [ebp-10h]
  float v13; // [esp+20h] [ebp-8h]
  unsigned int v14; // [esp+2Ch] [ebp+4h]

  v1 = sub_4E3CE0();
  v2 = (unsigned int *)sub_417090(a1);
  v3 = v2;
  if ( !v2 || !v2[1198] )
    return 0;
  if ( v1 == 1 )
  {
    result = sub_4D66E0(v2[1167], v2[1168], v2[1166], v2[1172]);
  }
  else
  {
    v5 = 0;
    v11 = 0;
    v14 = 0;
    v12 = 1;
    v13 = 1.0;
    for ( i = sub_4DA7C0(); i; i = sub_4DA7F0(i) )
    {
      v7 = *(unsigned int **)(*(_DWORD *)(i + 748) + 276);
      if ( v3[1198] )
      {
        v8 = sub_4D66E0(v7[1167], v7[1168], 0, v7[1172]);
        if ( v8 > v5 )
          v5 = v8;
        v11 += v7[1167];
        v12 = v7[1172];
        v14 += v7[1168];
      }
    }
    v9 = sub_4D66E0(v11, v14, 0, v12);
    if ( v5 > 0 )
      v13 = (double)(unsigned int)v9 / (double)v5;
    v10 = (double)(unsigned int)sub_4D66E0(v3[1167], v3[1168], v3[1166], v3[1172]) * v13;
    result = sub_419A70(v10);
  }
  if ( result > 0x3B9AC9FF )
    result = 999999999;
  return result;
}

//----- (004D66E0) --------------------------------------------------------
int __cdecl sub_4D66E0(unsigned int a1, unsigned int a2, unsigned int a3, unsigned int a4)
{
  float v5; // [esp+4h] [ebp-10h]

  v5 = sub_419AF0(pow((double)a4, *(long double *)&byte_581450[10088]))
     * ((double)a1 * 10.0 + (double)a2 * 35.0 + (double)a3 * 0.1);
  return sub_419A70(v5);
}

//----- (004D6770) --------------------------------------------------------
int __cdecl sub_4D6770(int a1)
{
  char *v1; // ebp
  int v2; // ebx
  int v3; // edi
  char *v4; // esi
  int v5; // eax
  char v7[90]; // [esp+Ch] [ebp-5Ch]

  v1 = sub_417090(a1);
  memset(v7, 0, 0x58u);
  *(_WORD *)&v7[88] = 0;
  v7[0] = -16;
  v7[1] = 12;
  *(_WORD *)&v7[2] = sub_4D7300();
  v2 = 0;
  v3 = sub_4DA7C0();
  if ( v3 )
  {
    v4 = &v7[8];
    do
    {
      v5 = *(_DWORD *)(v3 + 748);
      if ( *(_DWORD *)(*(_DWORD *)(v5 + 276) + 4792) == 1 && v2 < 6 )
      {
        *((_WORD *)v4 - 1) = *(_WORD *)(v3 + 36);
        *(_WORD *)v4 = *(_WORD *)(*(_DWORD *)(v5 + 276) + 4668);
        *((_WORD *)v4 + 3) = *(_WORD *)(*(_DWORD *)(v5 + 276) + 4664);
        *((_WORD *)v4 + 1) = *(_WORD *)(*(_DWORD *)(v5 + 276) + 4672);
        *((_WORD *)v4 + 2) = *(_WORD *)(*(_DWORD *)(v5 + 276) + 4680);
        *((_DWORD *)v4 + 2) = sub_4D6540(*(unsigned __int8 *)(*(_DWORD *)(v5 + 276) + 2064));
        ++v2;
        v4 += 14;
        *(_WORD *)&v7[4] = *((_WORD *)v1 + 2344);
      }
      v3 = sub_4DA7F0(v3);
    }
    while ( v3 );
  }
  return sub_4E5390(a1, (int)v7, 90, 0, 1);
}

//----- (004D6880) --------------------------------------------------------
int __cdecl sub_4D6880(int a1, int a2)
{
  char v3[69]; // [esp+8h] [ebp-48h]

  memset(v3, 0, 0x44u);
  v3[68] = 0;
  v3[0] = -16;
  v3[1] = 13;
  if ( a2 )
    v3[4] |= 1u;
  if ( sub_51A950() )
    v3[4] |= 2u;
  *(_WORD *)&v3[2] = sub_4E3CC0();
  sub_409B30();
  strcpy(&v3[5], sub_4D6940());
  sub_409B30();
  strcpy(&v3[37], sub_4D6950());
  return sub_4E5390(a1, (int)v3, 69, 0, 1);
}

//----- (004D6940) --------------------------------------------------------
char *sub_4D6940()
{
  return (char *)&byte_5D4594[3803266];
}

//----- (004D6950) --------------------------------------------------------
char *sub_4D6950()
{
  return (char *)&byte_5D4594[3803234];
}

//----- (004D6960) --------------------------------------------------------
int __cdecl sub_4D6960(int a1)
{
  char v2[69]; // [esp+8h] [ebp-48h]

  memset(v2, 0, 0x44u);
  v2[68] = 0;
  v2[0] = -16;
  v2[1] = 14;
  v2[4] = 0;
  if ( sub_51A950() )
    v2[4] |= 2u;
  *(_WORD *)&v2[2] = sub_4E3CC0();
  sub_409B30();
  strcpy(&v2[5], sub_4D6940());
  sub_409B30();
  strcpy(&v2[37], sub_4D6950());
  return sub_4E5390(a1, (int)v2, 69, 0, 1);
}

//----- (004D6A20) --------------------------------------------------------
int __cdecl sub_4D6A20(int a1, int a2)
{
  __int16 v3; // cx
  int v5; // [esp+0h] [ebp-4h]

  v3 = *(_WORD *)(a2 + 40);
  LOWORD(v5) = 4080;
  HIWORD(v5) = v3;
  return sub_4E5420(a1, &v5, 4, 0, 1);
}

//----- (004D6A60) --------------------------------------------------------
int sub_4D6A60()
{
  int result; // eax
  int i; // esi

  *(_DWORD *)&byte_587000[312784] = 1077936128;
  *(_DWORD *)&byte_587000[312788] = 1065353216;
  *(_DWORD *)&byte_587000[312792] = 1065353216;
  *(_DWORD *)&byte_587000[312796] = 1065353216;
  *(_DWORD *)&byte_587000[312800] = 1077936128;
  *(_DWORD *)&byte_587000[312804] = 1077936128;
  *(_DWORD *)&byte_587000[312808] = 1065353216;
  *(_DWORD *)&byte_587000[312812] = 1065353216;
  *(_DWORD *)&byte_587000[312816] = 1077936128;
  *(_DWORD *)&byte_587000[312820] = 1077936128;
  *(_DWORD *)&byte_587000[312824] = 1065353216;
  *(_DWORD *)&byte_587000[312828] = 1065353216;
  sub_57B200();
  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_4EEDC0(i, 0);
    sub_4D9C20(i);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004D6B10) --------------------------------------------------------
int __cdecl sub_4D6B10(int a1)
{
  int result; // eax
  int i; // esi

  *(_DWORD *)&byte_587000[312784] = *(_DWORD *)&byte_5D4594[1556076];
  *(_DWORD *)&byte_587000[312788] = *(_DWORD *)&byte_5D4594[1556084];
  *(_DWORD *)&byte_587000[312792] = *(_DWORD *)&byte_5D4594[1556064];
  *(_DWORD *)&byte_587000[312796] = *(_DWORD *)&byte_5D4594[1556072];
  *(_DWORD *)&byte_587000[312800] = *(_DWORD *)&byte_5D4594[1556060];
  *(_DWORD *)&byte_587000[312804] = *(_DWORD *)&byte_5D4594[1556096];
  *(_DWORD *)&byte_587000[312808] = *(_DWORD *)&byte_5D4594[1550932];
  *(_DWORD *)&byte_587000[312812] = *(_DWORD *)&byte_5D4594[1556080];
  *(_DWORD *)&byte_587000[312816] = *(_DWORD *)&byte_5D4594[1556088];
  *(_DWORD *)&byte_587000[312820] = *(_DWORD *)&byte_5D4594[1556068];
  *(_DWORD *)&byte_587000[312824] = *(_DWORD *)&byte_5D4594[1556100];
  *(_DWORD *)&byte_587000[312828] = *(_DWORD *)&byte_5D4594[1556092];
  sub_57B200();
  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_4EEDC0(i, 0);
    if ( a1 )
      sub_4D9C20(i);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004D6BE0) --------------------------------------------------------
int sub_4D6BE0()
{
  int result; // eax

  *(_DWORD *)&byte_5D4594[1556076] = *(_DWORD *)&byte_587000[312784];
  *(_DWORD *)&byte_5D4594[1556084] = *(_DWORD *)&byte_587000[312788];
  *(_DWORD *)&byte_5D4594[1556064] = *(_DWORD *)&byte_587000[312792];
  *(_DWORD *)&byte_5D4594[1556072] = *(_DWORD *)&byte_587000[312796];
  *(_DWORD *)&byte_5D4594[1556060] = *(_DWORD *)&byte_587000[312800];
  *(_DWORD *)&byte_5D4594[1556096] = *(_DWORD *)&byte_587000[312804];
  *(_DWORD *)&byte_5D4594[1550932] = *(_DWORD *)&byte_587000[312808];
  result = *(_DWORD *)&byte_587000[312820];
  *(_DWORD *)&byte_5D4594[1556080] = *(_DWORD *)&byte_587000[312812];
  *(_DWORD *)&byte_5D4594[1556088] = *(_DWORD *)&byte_587000[312816];
  *(_DWORD *)&byte_5D4594[1556068] = *(_DWORD *)&byte_587000[312820];
  *(_DWORD *)&byte_5D4594[1556100] = *(_DWORD *)&byte_587000[312824];
  *(_DWORD *)&byte_5D4594[1556092] = *(_DWORD *)&byte_587000[312828];
  return result;
}

//----- (004D6C70) --------------------------------------------------------
int sub_4D6C70()
{
  int *v0; // ebp
  int v1; // eax
  int i; // eax
  int v3; // edi
  int v4; // ebx
  int v5; // eax
  int v6; // esi
  int v7; // eax
  int v8; // eax
  char v9; // al
  _DWORD *v10; // esi
  int v11; // eax
  int v12; // eax
  char *v13; // eax
  char *v14; // edi
  wchar_t *v15; // eax
  int j; // esi
  unsigned __int8 v18[20]; // [esp+10h] [ebp-14h]

  sub_40A540(6128);
  sub_40A4D0(4096);
  v0 = 0;
  if ( !sub_4D6F30() )
    sub_4E3CD0(0);
  sub_4D0F30();
  v1 = *(_DWORD *)&byte_5D4594[2650636];
  LOBYTE(v1) = byte_5D4594[2650636] & 0xEF;
  *(_DWORD *)&byte_5D4594[2650636] = v1;
  sub_40A540(0x10000);
  sub_4D9CF0(255);
  for ( i = sub_4DA7C0(); i; i = sub_4DA7F0(i) )
    *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(i + 748) + 276) + 4792) = 0;
  v3 = sub_4DA7C0();
  if ( v3 )
  {
    while ( 1 )
    {
      sub_4D6000(v3);
      v4 = *(_DWORD *)(v3 + 748);
      if ( sub_40A5C0(1)
        && *(_DWORD *)&byte_5D4594[2650636] & 0x40000
        && (v5 = *(_DWORD *)(v4 + 276), *(_BYTE *)(v5 + 2064) == 31) )
      {
        *(_DWORD *)(v5 + 4792) = v0;
      }
      else
      {
        *(_DWORD *)(*(_DWORD *)(v4 + 276) + 4792) = sub_4E4100();
      }
      if ( *(_DWORD *)(*(_DWORD *)(v4 + 276) + 4792) == 1 )
        sub_4D9D20(255, v3);
      sub_4EFE80(v3);
      sub_4FA5D0(v3, *(_DWORD *)(*(_DWORD *)(v4 + 276) + 2164));
      v6 = *(_DWORD *)(v3 + 504);
      if ( (int *)v6 != v0 )
        break;
LABEL_21:
      v9 = *(_BYTE *)(*(_DWORD *)(v4 + 276) + 2251);
      if ( v9 )
      {
        if ( v9 == 1 )
        {
          v10 = sub_4EF750(v3, (CHAR *)&byte_587000[198552], v0, 1, 1);
          *(_DWORD *)v18 = v0;
          *(_DWORD *)&v18[4] = v0;
          v11 = sub_413290((const char *)&byte_587000[198572]);
          *(_DWORD *)&v18[8] = sub_413330(v11);
          *(_DWORD *)&v18[12] = v0;
          *(_WORD *)&v18[16] = (_WORD)v0;
          *(_WORD *)&v18[18] = (_WORD)v0;
          sub_4E4990((int)v10, (int *)v18);
        }
        else if ( v9 == 2 )
        {
          sub_4EF750(v3, (CHAR *)&byte_587000[198588], v0, 1, 1);
        }
      }
      else
      {
        sub_4EF750(v3, (CHAR *)&byte_587000[198544], v0, 1, 1);
      }
      v12 = *(_DWORD *)(v4 + 276);
      if ( *(int **)(v12 + 4792) == v0 )
        sub_4E6860(v12, (char)v0, (int)v0);
      v3 = sub_4DA7F0(v3);
      if ( (int *)v3 == v0 )
        goto LABEL_30;
    }
    while ( 1 )
    {
      v7 = *(_DWORD *)(v6 + 8);
      v0 = *(int **)(v6 + 496);
      if ( !(v7 & 0x1000000) )
        break;
      v8 = *(_DWORD *)(v6 + 12);
      if ( v8 & 0x8200 )
        goto LABEL_19;
LABEL_20:
      v6 = (int)v0;
      if ( !v0 )
        goto LABEL_21;
    }
    if ( !(v7 & 0x2000000) || sub_415D10((char *)*(unsigned __int16 *)(v6 + 4)) & 0x405 )
      goto LABEL_20;
LABEL_19:
    sub_4E5CC0(v6);
    goto LABEL_20;
  }
LABEL_30:
  sub_417D50(4);
  sub_419030(1);
  v13 = sub_4186D0((char)v0);
  v14 = v13;
  v13[56] = 9;
  v15 = sub_418C20(9);
  if ( v15 != (wchar_t *)v0 )
    sub_418800((wchar_t *)v14, v15, 1);
  sub_4184D0((wchar_t *)v14);
  for ( j = sub_4DA7C0(); (int *)j != v0; j = sub_4DA7F0(j) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(j + 748) + 276) + 4792) == 1 )
      sub_4191D0(v14[57], j + 48, 1, *(_DWORD *)(j + 36), (int)v0);
  }
  sub_4D6BE0();
  return sub_4D6A60();
}

//----- (004D6F30) --------------------------------------------------------
int sub_4D6F30()
{
  return *(_DWORD *)&byte_5D4594[1556156];
}

//----- (004D6F40) --------------------------------------------------------
int __cdecl sub_4D6F40(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556156] = a1;
  return result;
}

//----- (004D6F50) --------------------------------------------------------
int sub_4D6F50()
{
  return *(_DWORD *)&byte_5D4594[1556160];
}

//----- (004D6F60) --------------------------------------------------------
int __cdecl sub_4D6F60(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556160] = a1;
  return result;
}

//----- (004D6F70) --------------------------------------------------------
int sub_4D6F70()
{
  return *(_DWORD *)&byte_5D4594[1556164];
}

//----- (004D6F80) --------------------------------------------------------
int __cdecl sub_4D6F80(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556164] = a1;
  return result;
}

//----- (004D6F90) --------------------------------------------------------
int __cdecl sub_4D6F90(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556104] = a1;
  return result;
}

//----- (004D6FA0) --------------------------------------------------------
int sub_4D6FA0()
{
  return *(_DWORD *)&byte_5D4594[1556104];
}

//----- (004D6FB0) --------------------------------------------------------
int __cdecl sub_4D6FB0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556148] = a1;
  return result;
}

//----- (004D6FC0) --------------------------------------------------------
int sub_4D6FC0()
{
  return *(_DWORD *)&byte_5D4594[1556148];
}

//----- (004D6FD0) --------------------------------------------------------
char *sub_4D6FD0()
{
  char *result; // eax
  unsigned __int8 *v1; // esi
  unsigned __int8 v2; // dl
  char *v3; // edi
  char *v4; // eax
  char v5[64]; // [esp+0h] [ebp-40h]

  result = *(char **)&byte_5D4594[1556148];
  if ( *(_DWORD *)&byte_5D4594[1556148] )
  {
    result = (char *)(*(_DWORD *)&byte_5D4594[1556148] - 1);
    *(_DWORD *)&byte_5D4594[1556148] = result;
    if ( !result )
    {
      v1 = sub_4DCED0();
      sub_4D6C70();
      if ( v1 && strlen((const char *)v1) )
      {
        v2 = byte_587000[198596];
        strcpy(v5, (const char *)v1);
        v3 = &v5[strlen(v5)];
        v4 = v5;
        *(_DWORD *)v3 = *(_DWORD *)&byte_587000[198592];
        v3[4] = v2;
      }
      else
      {
        v4 = sub_4D0F60();
      }
      sub_4D2450(v4);
      sub_4DCE80(0);
      sub_4E3CD0(0);
      result = sub_4169F0();
    }
  }
  return result;
}
// 4D6FD0: using guessed type char var_40[64];

//----- (004D7080) --------------------------------------------------------
int sub_4D7080()
{
  *(_DWORD *)&byte_5D4594[1556112] = 1;
  sub_44E0B0(1);
  *(_DWORD *)&byte_5D4594[1556152] = sub_416A00();
  sub_4169E0();
  return sub_4D6FB0(30);
}

//----- (004D70B0) --------------------------------------------------------
char *sub_4D70B0()
{
  char *result; // eax

  result = *(char **)&byte_5D4594[1556152];
  if ( !*(_DWORD *)&byte_5D4594[1556152] )
    result = sub_4169F0();
  return result;
}

//----- (004D70C0) --------------------------------------------------------
BOOL __cdecl sub_4D70C0(int a1)
{
  return sub_40A5C0(4096) || a1 != 37 && a1 != 38 && a1 != 40 && a1 != 39;
}

//----- (004D7100) --------------------------------------------------------
BOOL __cdecl sub_4D7100(int a1)
{
  return sub_40A5C0(4096) || a1 != 111 && a1 != 112 && a1 != 114 && a1 != 113;
}

//----- (004D7140) --------------------------------------------------------
int __cdecl sub_4D7140(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556144] = a1;
  return result;
}

//----- (004D7150) --------------------------------------------------------
int sub_4D7150()
{
  int result; // eax
  int i; // edi
  int *v2; // esi
  int v3; // eax

  result = *(_DWORD *)&byte_5D4594[1556144];
  if ( *(_DWORD *)&byte_5D4594[1556144] )
  {
    if ( *(_DWORD *)&byte_5D4594[2598000] > *(int *)&byte_5D4594[1556144] )
    {
      result = sub_4DA7C0();
      for ( i = result; result; i = result )
      {
        v2 = *(int **)(i + 748);
        v3 = v2[69];
        if ( (*(_BYTE *)(v3 + 3680) & 1) == 1
          && *(_DWORD *)(v3 + 4792) == 1
          && !v2[78]
          && !v2[79]
          && (*(_DWORD *)(v3 + 3680) & 0x10) == 16 )
        {
          sub_4DF3C0(v2[69]);
          sub_4E6AA0(v2[69]);
          sub_4E6040(i);
        }
        result = sub_4DA7F0(i);
      }
    }
  }
  return result;
}

//----- (004D71E0) --------------------------------------------------------
int __cdecl sub_4D71E0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556136] = a1;
  return result;
}

//----- (004D71F0) --------------------------------------------------------
unsigned int sub_4D71F0()
{
  unsigned int result; // eax
  int v1; // esi
  char v2; // al

  result = *(_DWORD *)&byte_5D4594[1556136];
  if ( *(_DWORD *)&byte_5D4594[1556136] )
  {
    if ( (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)&byte_5D4594[1556136]) >= 0x2328 )
    {
      v1 = 0;
      result = sub_4DA7C0();
      if ( result )
      {
        do
        {
          if ( *(_DWORD *)(*(_DWORD *)(result + 748) + 308) )
            v1 = 1;
          result = sub_4DA7F0(result);
        }
        while ( result );
        if ( v1 )
        {
          result = sub_4E3CE0();
          if ( result > 1 )
          {
            sub_4D71E0(0);
            result = sub_4D72C0();
            if ( !result )
            {
              sub_4D72B0(1);
              v2 = sub_4D72C0();
              result = sub_4D7280(255, v2);
            }
          }
        }
      }
    }
  }
  return result;
}

//----- (004D7280) --------------------------------------------------------
int __cdecl sub_4D7280(int a1, char a2)
{
  int v2; // ecx
  char v4[3]; // [esp+0h] [ebp-4h]
  char v5; // [esp+3h] [ebp-1h]

  v5 = HIBYTE(v2);
  v4[0] = -16;
  v4[1] = 24;
  v4[2] = a2;
  return sub_4E5390(a1, (int)v4, 3, 0, 1);
}

//----- (004D72B0) --------------------------------------------------------
int __cdecl sub_4D72B0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556140] = a1;
  return result;
}

//----- (004D72C0) --------------------------------------------------------
int sub_4D72C0()
{
  return *(_DWORD *)&byte_5D4594[1556140];
}

//----- (004D72D0) --------------------------------------------------------
int __cdecl sub_4D72D0(int a1)
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1556128];
  *(_DWORD *)&byte_5D4594[1556132] = *(_DWORD *)&byte_5D4594[1556128];
  *(_DWORD *)&byte_5D4594[1556128] = a1;
  return result;
}

//----- (004D72F0) --------------------------------------------------------
int sub_4D72F0()
{
  return *(_DWORD *)&byte_5D4594[1556128];
}

//----- (004D7300) --------------------------------------------------------
int sub_4D7300()
{
  return *(_DWORD *)&byte_5D4594[1556132];
}

//----- (004D7310) --------------------------------------------------------
int sub_4D7310()
{
  int v0; // ebx
  int v1; // ebp
  int v2; // esi
  int v3; // edi
  int i; // eax

  v0 = 0;
  v1 = 99999;
  v2 = sub_4DA7C0();
  if ( !v2 )
    return 0;
  do
  {
    if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v2 + 748) + 276) + 4792) == 1 )
    {
      v3 = 0;
      for ( i = sub_4E7980(v2); i; i = sub_4E7990(i) )
      {
        if ( *(_BYTE *)(i + 8) & 0x40 )
          ++v3;
      }
      if ( v3 <= v1 )
      {
        v1 = v3;
        v0 = v2;
      }
    }
    v2 = sub_4DA7F0(v2);
  }
  while ( v2 );
  return v0;
}

//----- (004D7390) --------------------------------------------------------
void __cdecl sub_4D7390(int a1)
{
  int v1; // esi
  int v2; // ebx
  int v3; // edi

  if ( a1 )
  {
    if ( sub_4E3CE0() )
    {
      v1 = sub_4E7980(a1);
      if ( v1 )
      {
        do
        {
          v2 = sub_4E7990(v1);
          if ( *(_BYTE *)(v1 + 8) & 0x40 )
          {
            v3 = sub_4D7310();
            if ( v3 )
            {
              sub_4ED0C0(a1, (int *)v1);
              sub_4F3070(v3, v1, 1);
              sub_4DA2C0(v3, (const char *)&byte_587000[198600], 0);
              sub_501960(820, v3, 0, 0);
            }
          }
          v1 = v2;
        }
        while ( v2 );
      }
      sub_4EDD00(a1, 64);
    }
    else
    {
      sub_4EDD00(a1, 64);
    }
  }
}

//----- (004D7430) --------------------------------------------------------
int sub_4D7430()
{
  return *(_DWORD *)&byte_5D4594[1556116];
}

//----- (004D7440) --------------------------------------------------------
int __cdecl sub_4D7440(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556116] = a1;
  return result;
}

//----- (004D7450) --------------------------------------------------------
int __cdecl sub_4D7450(int a1, __int16 a2)
{
  char v3[4]; // [esp+0h] [ebp-4h]

  v3[0] = -16;
  v3[1] = 29;
  *(_WORD *)&v3[2] = a2;
  return sub_4E5420(a1, v3, 4, 0, 1);
}

//----- (004D7480) --------------------------------------------------------
void __cdecl sub_4D7480(int a1)
{
  int v1; // edi
  int v2; // eax
  float2 *v3; // ebx

  if ( a1 && *(_BYTE *)(a1 + 8) & 4 )
  {
    v1 = *(_DWORD *)(a1 + 748);
    v2 = *(_DWORD *)(v1 + 316);
    if ( v2 )
    {
      v3 = *(float2 **)(v2 + 700);
      sub_4E6AA0(*(_DWORD *)(v1 + 276));
      sub_4E6040(a1);
      *(_DWORD *)(v1 + 316) = 0;
      sub_4E7010(a1, v3 + 10);
      sub_501960(312, a1, 2, *(_DWORD *)(a1 + 36));
      sub_522FF0(129, v3 + 10);
    }
  }
}

//----- (004D74F0) --------------------------------------------------------
int __cdecl sub_4D74F0(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 <= 4 )
    return 5;
  if ( a1 <= 9 )
    return 10;
  if ( a1 <= 14 )
    return 15;
  if ( a1 <= 19 )
    result = 20;
  return result;
}

//----- (004D7520) --------------------------------------------------------
char __cdecl sub_4D7520(int a1)
{
  int v1; // eax
  int i; // esi
  int v3; // eax
  int v4; // esi
  int v5; // edi

  LOBYTE(v1) = byte_5D4594[1556120];
  if ( *(_DWORD *)&byte_5D4594[1556120] == 1 )
  {
    if ( a1 )
      goto LABEL_19;
    for ( i = sub_4DA7C0(); i; i = sub_4DA7F0(i) )
    {
      v3 = *(_DWORD *)(i + 748);
      if ( *(_DWORD *)(*(_DWORD *)(v3 + 276) + 4792) && *(_DWORD *)(v3 + 316) )
        sub_4D7480(i);
    }
    v1 = sub_4DA790();
    v4 = v1;
    if ( !v1 )
    {
LABEL_19:
      *(_DWORD *)&byte_5D4594[1556120] = a1;
    }
    else
    {
      do
      {
        v5 = sub_4DA7A0(v4);
        LOBYTE(v1) = *(_BYTE *)(v4 + 8);
        if ( v1 & 0x20 && *(_BYTE *)(v4 + 12) & 2 )
          LOBYTE(v1) = sub_4E7600(v4);
        v4 = v5;
      }
      while ( v5 );
      *(_DWORD *)&byte_5D4594[1556120] = 0;
    }
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1556120] = a1;
  }
  return v1;
}

//----- (004D75E0) --------------------------------------------------------
int sub_4D75E0()
{
  return *(_DWORD *)&byte_5D4594[1556120];
}

//----- (004D75F0) --------------------------------------------------------
int __cdecl sub_4D75F0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556108] = a1;
  return result;
}

//----- (004D7600) --------------------------------------------------------
int sub_4D7600()
{
  int v0; // edi
  int v1; // esi
  int result; // eax
  int v3; // ecx
  int i; // esi
  int v5; // eax

  v0 = sub_4E3CE0();
  v1 = 0;
  result = *(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)&byte_5D4594[1556108];
  if ( (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)&byte_5D4594[1556108]) >= 0x1E && v0 )
  {
    for ( result = sub_4DA7C0(); result; result = sub_4DA7F0(result) )
    {
      v3 = *(_DWORD *)(result + 748);
      if ( *(_DWORD *)(*(_DWORD *)(v3 + 276) + 4792) && *(_DWORD *)(v3 + 316) )
        ++v1;
    }
    if ( v0 == v1 )
    {
      result = sub_4E8F60();
      if ( !result )
      {
        result = sub_4DA7C0();
        for ( i = result; result; i = result )
        {
          v5 = *(_DWORD *)(i + 748);
          if ( *(_DWORD *)(*(_DWORD *)(v5 + 276) + 4792) && *(_DWORD *)(v5 + 316) )
          {
            sub_4D7480(i);
            if ( v0 <= 1 )
              sub_4DA2C0(i, (const char *)&byte_587000[198656], 0);
            else
              sub_4DA2C0(i, (const char *)&byte_587000[198624], 0);
          }
          result = sub_4DA7F0(i);
        }
      }
    }
  }
  return result;
}

//----- (004D76E0) --------------------------------------------------------
int __cdecl sub_4D76E0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556124] = a1;
  return result;
}

//----- (004D76F0) --------------------------------------------------------
int sub_4D76F0()
{
  return *(_DWORD *)&byte_5D4594[1556124];
}

//----- (004D7700) --------------------------------------------------------
bool sub_4D7700()
{
  HKEY phkResult; // [esp+8h] [ebp-90h]
  BYTE Data[4]; // [esp+Ch] [ebp-8Ch]
  DWORD cbData; // [esp+10h] [ebp-88h]
  DWORD Type; // [esp+14h] [ebp-84h]
  CHAR SubKey[128]; // [esp+18h] [ebp-80h]

  strcpy(SubKey, "SOFTWARE\\Westwood\\Nox");
  *(_DWORD *)Data = -1;
  cbData = 4;
  if ( !RegOpenKeyExA(HKEY_LOCAL_MACHINE, SubKey, 0, 0xF003Fu, &phkResult) )
  {
    RegQueryValueExA(phkResult, (LPCSTR)&byte_587000[198712], 0, &Type, Data, &cbData);
    RegCloseKey(phkResult);
  }
  return *(_DWORD *)Data >= 9472;
}

//----- (004D7790) --------------------------------------------------------
BOOL sub_4D7790()
{
  char *v0; // eax
  CHAR FileName[1024]; // [esp+0h] [ebp-400h]

  v0 = sub_409E10();
  nox_sprintf(FileName, (const char *)&byte_587000[198716], v0);
  return _access(FileName, 0) == 0;
}

//----- (004D77D0) --------------------------------------------------------
LSTATUS __cdecl sub_4D77D0(int a1)
{
  LSTATUS result; // eax
  BYTE Data[4]; // [esp+0h] [ebp-88h]
  HKEY phkResult; // [esp+4h] [ebp-84h]
  CHAR SubKey[128]; // [esp+8h] [ebp-80h]

  result = a1 - 4096;
  switch ( a1 )
  {
    case 4096:
      *(_DWORD *)Data = 9472;
      goto LABEL_8;
    case 4098:
      *(_DWORD *)Data = 9474;
      goto LABEL_8;
    case 4099:
      *(_DWORD *)Data = 9475;
      goto LABEL_8;
    case 4101:
      *(_DWORD *)Data = 9477;
      goto LABEL_8;
    case 4102:
      *(_DWORD *)Data = 9478;
      goto LABEL_8;
    case 4105:
      *(_DWORD *)Data = 9481;
LABEL_8:
      strcpy(SubKey, "SOFTWARE\\Westwood\\Nox");
      result = RegOpenKeyExA(HKEY_LOCAL_MACHINE, SubKey, 0, 0xF003Fu, &phkResult);
      if ( !result )
      {
        RegSetValueExA(phkResult, (LPCSTR)&byte_587000[198756], 0, 4u, Data, 4u);
        result = RegCloseKey(phkResult);
      }
      break;
    default:
      return result;
  }
  return result;
}

//----- (004D78C0) --------------------------------------------------------
LSTATUS sub_4D78C0()
{
  LSTATUS result; // eax
  BYTE Data[4]; // [esp+8h] [ebp-90h]
  HKEY phkResult; // [esp+Ch] [ebp-8Ch]
  DWORD cbData; // [esp+10h] [ebp-88h]
  DWORD Type; // [esp+14h] [ebp-84h]
  CHAR SubKey[128]; // [esp+18h] [ebp-80h]

  strcpy(SubKey, "SOFTWARE\\Westwood\\Nox");
  *(_DWORD *)Data = -1;
  cbData = 4;
  result = RegOpenKeyExA(HKEY_LOCAL_MACHINE, SubKey, 0, 0xF003Fu, &phkResult);
  if ( !result )
  {
    RegQueryValueExA(phkResult, (LPCSTR)&byte_587000[198784], 0, &Type, Data, &cbData);
    result = RegCloseKey(phkResult);
  }
  if ( *(int *)Data < 9472 )
  {
    result = sub_4D7790();
    if ( result == 1 )
      result = sub_4D77D0(*(int *)Data);
  }
  return result;
}

//----- (004D7960) --------------------------------------------------------
int __cdecl sub_4D7960(char a1)
{
  int result; // eax

  result = 1 << a1;
  *(_DWORD *)&byte_5D4594[1556300] |= 1 << a1;
  return result;
}

//----- (004D7980) --------------------------------------------------------
BOOL __cdecl sub_4D7980(char a1)
{
  return (*(_DWORD *)&byte_5D4594[1556300] & (1 << a1)) != 0;
}

//----- (004D79A0) --------------------------------------------------------
int __cdecl sub_4D79A0(char a1)
{
  int result; // eax

  result = ~(1 << a1);
  *(_DWORD *)&byte_5D4594[1556300] &= result;
  return result;
}

//----- (004D79C0) --------------------------------------------------------
int __cdecl sub_4D79C0(int a1)
{
  int v1; // esi
  int result; // eax
  int v3; // ecx

  v1 = *(_DWORD *)(a1 + 748);
  sub_4D9D20(255, a1);
  sub_4D6000(a1);
  for ( result = sub_4DA7C0(); result; result = sub_4DA7F0(result) )
  {
    v3 = *(_DWORD *)(result + 748);
    *(_BYTE *)(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064) + v3 + 452) = 0;
    *(_DWORD *)(v3 + 4 * *(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064) + 324) = 0;
    *(_BYTE *)(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064) + v3 + 484) = 0;
    *(_BYTE *)(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064) + v3 + 516) = 0;
  }
  return result;
}

//----- (004D7A60) --------------------------------------------------------
int __cdecl sub_4D7A60(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[4 * a1 + 1556172] = *(_DWORD *)&byte_5D4594[2598000];
  return result;
}

//----- (004D7A80) --------------------------------------------------------
int sub_4D7A80()
{
  unsigned __int8 *v0; // ebp
  int v1; // edi
  int v2; // esi
  char *v3; // eax
  int v4; // eax
  int v5; // edi
  int v6; // ecx
  int result; // eax

  v0 = &byte_5D4594[1556172];
  v1 = 324 - (_DWORD)&byte_5D4594[1556172];
  v2 = 484;
  do
  {
    v3 = sub_417090(v2 - 484);
    if ( v3 && *((_DWORD *)v3 + 523) && *((_DWORD *)v3 + 514) && *((_DWORD *)v3 + 1198) == 1 )
      goto LABEL_12;
    if ( *(_DWORD *)v0
      && *(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)v0 > (unsigned int)(30 * *(_DWORD *)&byte_5D4594[2649704]) )
    {
      v4 = sub_4DA7C0();
      if ( v4 )
      {
        v5 = (int)&v0[v1];
        do
        {
          v6 = *(_DWORD *)(v4 + 748);
          *(_BYTE *)(v2 + v6 - 32) = 0;
          *(_DWORD *)(v5 + v6) = 0;
          *(_BYTE *)(v2 + v6) = 0;
          *(_BYTE *)(v2 + v6 + 32) = 0;
          v4 = sub_4DA7F0(v4);
        }
        while ( v4 );
        v1 = 324 - (_DWORD)&byte_5D4594[1556172];
      }
LABEL_12:
      *(_DWORD *)v0 = 0;
    }
    ++v2;
    v0 += 4;
    result = v2 - 484;
  }
  while ( v2 - 484 < 32 );
  return result;
}

//----- (004D7B40) --------------------------------------------------------
int sub_4D7B40()
{
  int result; // eax

  result = 0;
  memset(&byte_5D4594[1556172], 0, 0x80u);
  return result;
}

//----- (004D7B60) --------------------------------------------------------
int __cdecl sub_4D7B60(int a1)
{
  int result; // eax
  int i; // esi
  char v3[7]; // [esp+4h] [ebp-8h]

  v3[0] = -46;
  *(_WORD *)&v3[1] = sub_578AC0((_DWORD *)a1);
  *(_WORD *)&v3[3] = *(_WORD *)(a1 + 4);
  v3[5] = 1;
  v3[6] = 2;
  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(i + 748) + 276) + 2064), v3, 7, 0, 1);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004D7BE0) --------------------------------------------------------
int __cdecl sub_4D7BE0(int a1)
{
  int result; // eax
  int i; // esi
  char v3[7]; // [esp+4h] [ebp-8h]

  v3[0] = -46;
  *(_WORD *)&v3[1] = sub_578AC0((_DWORD *)a1);
  *(_WORD *)&v3[3] = *(_WORD *)(a1 + 4);
  v3[5] = 2;
  v3[6] = 2;
  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(i + 748) + 276) + 2064), v3, 7, 0, 1);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004D7C60) --------------------------------------------------------
int sub_4D7C60()
{
  int result; // eax
  float v1; // [esp+0h] [ebp-4h]
  float v2; // [esp+0h] [ebp-4h]

  *(_DWORD *)&byte_5D4594[1556316] = 0;
  *(float *)&byte_5D4594[1556308] = sub_419D40(&byte_587000[198788]);
  v1 = sub_419D40(&byte_587000[198804]);
  *(_DWORD *)&byte_5D4594[1556312] = sub_419A70(v1);
  v2 = sub_419D40(&byte_587000[198820]);
  result = sub_419A70(v2);
  *(_DWORD *)&byte_5D4594[1556304] = result;
  return result;
}

//----- (004D7CC0) --------------------------------------------------------
int sub_4D7CC0()
{
  int result; // eax
  int i; // ecx
  int v2; // edx
  double v3; // st7
  double v4; // st6
  int j; // esi
  _DWORD *v6; // edi
  int v7; // eax

  sub_416BB0();
  result = sub_409F40(0x2000);
  if ( result )
  {
    if ( (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)&byte_5D4594[1556316]) > *(int *)&byte_5D4594[1556312] )
    {
      for ( i = sub_4DA7C0(); i; i = sub_4DA7F0(i) )
      {
        if ( !(*(_DWORD *)(i + 16) & 0x8020) )
        {
          v2 = *(_DWORD *)(i + 748);
          if ( !(*(_BYTE *)(*(_DWORD *)(v2 + 276) + 3680) & 1) )
          {
            v3 = *(float *)(i + 60) - *(float *)(v2 + 252);
            v4 = *(float *)(i + 56) - *(float *)(v2 + 248);
            if ( v4 * v4 + v3 * v3 < *(float *)&byte_5D4594[1556308] )
              *(_DWORD *)(v2 + 256) = *(_DWORD *)&byte_5D4594[2598000];
            *(_DWORD *)(v2 + 248) = *(_DWORD *)(i + 56);
            *(_DWORD *)(v2 + 252) = *(_DWORD *)(i + 60);
          }
        }
      }
      *(_DWORD *)&byte_5D4594[1556316] = *(_DWORD *)&byte_5D4594[2598000];
    }
    result = sub_4DA7C0();
    for ( j = result; result; j = result )
    {
      if ( !(*(_DWORD *)(j + 16) & 0x8020) )
      {
        v6 = *(_DWORD **)(j + 748);
        if ( !(*(_BYTE *)(v6[69] + 3680) & 1) )
        {
          v7 = v6[65];
          if ( (unsigned int)(*(_DWORD *)&byte_5D4594[1556316] - v6[64]) > *(int *)&byte_5D4594[1556304] )
          {
            if ( v7 )
            {
              sub_4D7BE0(j);
              v6[65] = 0;
            }
          }
          else if ( !v7 )
          {
            if ( !sub_40A5C0(32) || *(_BYTE *)(v6[69] + 4) & 1 )
              sub_501960(774, j, 0, 0);
            sub_4D7B60(j);
            v6[65] = 1;
          }
        }
      }
      result = sub_4DA7F0(j);
    }
  }
  return result;
}

//----- (004D7E50) --------------------------------------------------------
int __cdecl sub_4D7E50(int a1)
{
  int result; // eax
  _DWORD *v2; // esi

  result = a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    v2 = *(_DWORD **)(a1 + 748);
    v2[62] = 0;
    v2[63] = 0;
    v2[64] = *(_DWORD *)&byte_5D4594[2598000];
    if ( v2[65] )
      result = sub_4D7BE0(a1);
    v2[65] = 0;
  }
  return result;
}

//----- (004D7EA0) --------------------------------------------------------
int sub_4D7EA0()
{
  int result; // eax
  int i; // esi

  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_4D7E50(i);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004D7ED0) --------------------------------------------------------
void sub_4D7ED0()
{
  srand(0x2310u);
}

//----- (004D7EE0) --------------------------------------------------------
int __cdecl sub_4D7EE0(int a1, char a2)
{
  char v3[2]; // [esp+0h] [ebp-2h]

  v3[0] = -19;
  v3[1] = a2;
  return sub_4E5390(a1, (int)v3, 2, 0, 1);
}

//----- (004D7F10) --------------------------------------------------------
int __cdecl sub_4D7F10(int a1)
{
  char v2[2]; // [esp+0h] [ebp-2h]

  v2[0] = -20;
  v2[1] = sub_40A6C0();
  return sub_4E5390(a1, (int)v2, 2, 0, 1);
}

//----- (004D7F40) --------------------------------------------------------
int __cdecl sub_4D7F40(int a1, _DWORD *a2, char a3)
{
  int v3; // esi

  v3 = *(_DWORD *)(a1 + 748);
  LOBYTE(a1) = -38;
  *(_WORD *)((char *)&a1 + 1) = sub_578AC0(a2);
  HIBYTE(a1) = a3;
  return sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064), &a1, 4, 0, 1);
}

//----- (004D7F90) --------------------------------------------------------
int __cdecl sub_4D7F90(int a1, int a2, char a3, int a4)
{
  int result; // eax
  int v5; // eax

  result = a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    v5 = *(_DWORD *)(a1 + 748);
    LOBYTE(a1) = 111;
    BYTE1(a1) = a2;
    BYTE2(a1) = *(_BYTE *)(*(_DWORD *)(v5 + 276) + 4 * a2 + 3696);
    HIBYTE(a1) = a3;
    if ( a4 )
      HIBYTE(a1) = a3 | 0x80;
    result = sub_4E5390(*(unsigned __int8 *)(*(_DWORD *)(v5 + 276) + 2064), (int)&a1, 4, 0, 1);
  }
  return result;
}

//----- (004D8000) --------------------------------------------------------
int __cdecl sub_4D8000(int a1, char a2, char a3, int a4)
{
  int result; // eax
  int v5; // ecx

  result = a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    v5 = *(_DWORD *)(a1 + 748);
    BYTE1(a1) = a2;
    LOBYTE(a1) = -47;
    BYTE2(a1) = a3;
    if ( a4 )
      BYTE2(a1) = a3 | 0x80;
    result = sub_4E5390(*(unsigned __int8 *)(*(_DWORD *)(v5 + 276) + 2064), (int)&a1, 3, 0, 1);
  }
  return result;
}

//----- (004D8060) --------------------------------------------------------
int __cdecl sub_4D8060(int a1, int a2, int a3)
{
  int result; // eax
  int v4; // eax

  result = a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    v4 = *(_DWORD *)(a1 + 748);
    LOBYTE(a1) = -51;
    BYTE1(a1) = a2;
    BYTE2(a1) = *(_BYTE *)(*(_DWORD *)(v4 + 276) + 4 * a2 + 3696);
    if ( a3 )
      BYTE2(a1) |= 0x80u;
    result = sub_4E5390(*(unsigned __int8 *)(*(_DWORD *)(v4 + 276) + 2064), (int)&a1, 3, 0, 1);
  }
  return result;
}

//----- (004D80C0) --------------------------------------------------------
int __cdecl sub_4D80C0(int a1, char a2)
{
  int result; // eax
  int v3; // eax

  result = a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    v3 = *(_DWORD *)(a1 + 748);
    LOBYTE(a1) = -21;
    BYTE1(a1) = a2;
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064), &a1, 2, 0, 1);
  }
  return result;
}

//----- (004D8100) --------------------------------------------------------
int __cdecl sub_4D8100(int a1, char a2, char a3)
{
  int result; // eax
  int v4; // edx

  result = a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    BYTE2(a1) = a3;
    v4 = *(_DWORD *)(result + 748);
    BYTE1(a1) = a2;
    LOBYTE(a1) = -50;
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v4 + 276) + 2064), &a1, 3, 0, 1);
  }
  return result;
}

//----- (004D8150) --------------------------------------------------------
int __cdecl sub_4D8150(int a1, char a2, char a3)
{
  int result; // eax
  int v4; // edx

  result = a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    BYTE2(a1) = a3;
    v4 = *(_DWORD *)(result + 748);
    BYTE1(a1) = a2;
    LOBYTE(a1) = -49;
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v4 + 276) + 2064), &a1, 3, 0, 1);
  }
  return result;
}

//----- (004D81A0) --------------------------------------------------------
void __cdecl sub_4D81A0(int a1)
{
  double v1; // st7
  int v2; // ecx
  char v3[5]; // [esp+4h] [ebp-8h]

  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    v1 = *(float *)(a1 + 28);
    v3[0] = 110;
    v2 = *(_DWORD *)(a1 + 748);
    *(_DWORD *)&v3[1] = (__int64)v1;
    sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), v3, 5, 0, 1);
  }
}

//----- (004D81F0) --------------------------------------------------------
int __cdecl sub_4D81F0(int a1, _DWORD *a2)
{
  char v3[7]; // [esp+4h] [ebp-8h]

  v3[0] = 107;
  *(_WORD *)&v3[1] = sub_578AC0(a2);
  *(_DWORD *)&v3[3] = a2[33];
  return sub_4E5420(a1, v3, 7, 0, 1);
}

//----- (004D8230) --------------------------------------------------------
int __cdecl sub_4D8230(int a1, _DWORD *a2)
{
  char v3[7]; // [esp+4h] [ebp-8h]

  v3[0] = 101;
  *(_WORD *)&v3[1] = sub_578AC0(a2);
  *(_DWORD *)&v3[3] = a2[5];
  return sub_4E5420(a1, v3, 7, 0, 1);
}

//----- (004D8270) --------------------------------------------------------
int __cdecl sub_4D8270(int a1)
{
  int v1; // ecx
  int v2; // eax
  char v4[5]; // [esp+0h] [ebp-8h]

  v1 = *(_DWORD *)(a1 + 16);
  v2 = *(_DWORD *)(a1 + 748);
  v4[0] = 102;
  *(_DWORD *)&v4[1] = v1;
  return sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), v4, 5, 0, 1);
}

//----- (004D82B0) --------------------------------------------------------
int __cdecl sub_4D82B0(int a1, _DWORD *a2, char a3, char a4)
{
  char v5[5]; // [esp+0h] [ebp-8h]

  v5[0] = 100;
  *(_WORD *)&v5[1] = sub_578AC0(a2);
  v5[3] = a3;
  v5[4] = a4;
  return sub_4E5390(a1, (int)v5, 5, 0, 0);
}

//----- (004D82F0) --------------------------------------------------------
_DWORD *__cdecl sub_4D82F0(int a1, _DWORD *a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  int v4; // edi
  int v5; // esi
  int v6; // edx
  _DWORD *v7; // ecx
  int v8; // ecx
  int v9; // eax
  int v10; // edx
  int v11; // ecx
  int v12; // esi
  int v13; // edx
  _DWORD *v14; // ecx
  int v15; // ecx
  int v16; // eax
  int v17; // edx
  int v18; // ecx
  char v19[11]; // [esp+8h] [ebp-Ch]

  result = a2;
  v3 = a2[2];
  v4 = 0;
  if ( v3 & 0x11001000 )
  {
    v5 = a2[173];
    v6 = 4;
    v7 = (_DWORD *)a2[173];
    do
    {
      if ( *v7 )
        v4 = 1;
      ++v7;
      --v6;
    }
    while ( v6 );
    if ( v4 )
    {
      v8 = a2[123];
      v19[0] = 81;
      *(_WORD *)&v19[1] = *(_WORD *)(v8 + 36);
      if ( *(_BYTE *)(v8 + 8) & 4 )
        v19[2] |= 0x80u;
      *(_DWORD *)&v19[3] = sub_415820((int)a2);
      v9 = 0;
      v10 = v5;
      do
      {
        if ( *(_DWORD *)v10 )
          v19[v9 + 7] = *(_BYTE *)(*(_DWORD *)v10 + 4);
        else
          v19[v9 + 7] = -1;
        ++v9;
        v10 += 4;
      }
      while ( v9 < 4 );
      result = (_DWORD *)sub_4E5390(a1, (int)v19, 11, 0, 0);
    }
    else
    {
      v11 = a2[123];
      v19[0] = 80;
      *(_WORD *)&v19[1] = *(_WORD *)(v11 + 36);
      if ( *(_BYTE *)(v11 + 8) & 4 )
        v19[2] |= 0x80u;
      *(_DWORD *)&v19[3] = sub_415820((int)a2);
      result = (_DWORD *)sub_4E5390(a1, (int)v19, 7, 0, 0);
    }
  }
  else if ( v3 & 0x2000000 )
  {
    v12 = a2[173];
    v13 = 4;
    v14 = (_DWORD *)a2[173];
    do
    {
      if ( *v14 )
        v4 = 1;
      ++v14;
      --v13;
    }
    while ( v13 );
    if ( v4 )
    {
      v15 = a2[123];
      v19[0] = 82;
      *(_WORD *)&v19[1] = *(_WORD *)(v15 + 36);
      if ( *(_BYTE *)(v15 + 8) & 4 )
        v19[2] |= 0x80u;
      *(_DWORD *)&v19[3] = sub_415C70((int)a2);
      v16 = 0;
      v17 = v12;
      do
      {
        if ( *(_DWORD *)v17 )
          v19[v16 + 7] = *(_BYTE *)(*(_DWORD *)v17 + 4);
        else
          v19[v16 + 7] = -1;
        ++v16;
        v17 += 4;
      }
      while ( v16 < 4 );
      result = (_DWORD *)sub_4E5390(a1, (int)v19, 11, 0, 0);
    }
    else
    {
      v18 = a2[123];
      v19[0] = 79;
      *(_WORD *)&v19[1] = *(_WORD *)(v18 + 36);
      if ( *(_BYTE *)(v18 + 8) & 4 )
        v19[2] |= 0x80u;
      *(_DWORD *)&v19[3] = sub_415C70((int)a2);
      result = (_DWORD *)sub_4E5390(a1, (int)v19, 7, 0, 0);
    }
  }
  return result;
}

//----- (004D84C0) --------------------------------------------------------
int __cdecl sub_4D84C0(int a1, int a2)
{
  int result; // eax
  int v3; // ecx
  int v4; // ecx
  int v5; // eax
  int v6; // ecx
  char v7[7]; // [esp+0h] [ebp-8h]

  result = a2;
  v3 = *(_DWORD *)(a2 + 8);
  if ( v3 & 0x11001000 )
  {
    v4 = *(_DWORD *)(a2 + 492);
    v7[0] = 84;
    *(_WORD *)&v7[1] = *(_WORD *)(v4 + 36);
    v5 = sub_415820(a2);
  }
  else
  {
    if ( !(v3 & 0x2000000) )
      return result;
    v6 = *(_DWORD *)(a2 + 492);
    v7[0] = 83;
    *(_WORD *)&v7[1] = *(_WORD *)(v6 + 36);
    v5 = sub_415C70(a2);
  }
  *(_DWORD *)&v7[3] = v5;
  return sub_4E5390(a1, (int)v7, 7, 0, 0);
}

//----- (004D8540) --------------------------------------------------------
_DWORD *__cdecl sub_4D8540(int a1, _DWORD *a2, int a3)
{
  _DWORD *result; // eax
  char v4[3]; // [esp+4h] [ebp-4h]

  v4[0] = 96;
  *(_WORD *)&v4[1] = sub_578AC0(a2);
  sub_4E5390(a1, (int)v4, 3, 0, 0);
  result = (_DWORD *)a3;
  if ( a3 )
    result = sub_4D82F0(255, a2);
  return result;
}

//----- (004D8590) --------------------------------------------------------
int __cdecl sub_4D8590(int a1, _DWORD *a2)
{
  int v2; // ecx
  char v4[3]; // [esp+0h] [ebp-4h]
  char v5; // [esp+3h] [ebp-1h]

  v5 = HIBYTE(v2);
  v4[0] = 97;
  *(_WORD *)&v4[1] = sub_578AC0(a2);
  return sub_4E5390(a1, (int)v4, 3, 0, 0);
}

//----- (004D85C0) --------------------------------------------------------
int __cdecl sub_4D85C0(int a1, _DWORD *a2)
{
  int result; // eax
  _WORD *v3; // eax
  char v4[7]; // [esp+4h] [ebp-8h]

  result = a2[139];
  if ( result )
  {
    v4[0] = -35;
    *(_WORD *)&v4[1] = sub_578AC0(a2);
    v3 = (_WORD *)a2[139];
    *(_WORD *)&v4[3] = *v3;
    *(_WORD *)&v4[5] = v3[2];
    result = sub_4E5390(a1, (int)v4, 7, 0, 1);
  }
  return result;
}

//----- (004D8620) --------------------------------------------------------
int __cdecl sub_4D8620(int a1, _DWORD *a2)
{
  _DWORD *v2; // esi
  int result; // eax
  unsigned int v4; // ecx
  _DWORD *v5; // [esp-4h] [ebp-8h]

  v2 = a2;
  result = a2[139];
  if ( result )
  {
    v5 = a2;
    LOBYTE(a2) = 65;
    *(_WORD *)((char *)&a2 + 1) = sub_578AC0(v5);
    LOWORD(v4) = *(_WORD *)v2[139];
    HIBYTE(a2) = v4 >> 1;
    result = sub_4E5390(a1, (int)&a2, 4, 0, 1);
  }
  return result;
}
// 4D8656: variable 'v4' is possibly undefined

//----- (004D8670) --------------------------------------------------------
int __cdecl sub_4D8670(int a1, _DWORD *a2)
{
  int result; // eax
  __int16 v3; // ax
  unsigned __int16 *v4; // ecx
  char v5[5]; // [esp+4h] [ebp-8h]

  result = a2[139];
  if ( result )
  {
    v5[0] = -60;
    v5[1] = 12;
    v3 = sub_578AC0(a2);
    v4 = (unsigned __int16 *)a2[139];
    *(_WORD *)&v5[2] = v3;
    v5[4] = 100 * *v4 / v4[2];
    result = sub_4E5390(a1, (int)v5, 5, 0, 1);
  }
  return result;
}

//----- (004D86E0) --------------------------------------------------------
char *__cdecl sub_4D86E0(int a1)
{
  int v1; // edi
  char *result; // eax
  char *v3; // esi

  v1 = a1;
  result = sub_417090(a1);
  v3 = result;
  if ( result )
  {
    result = (char *)*((_DWORD *)result + 514);
    if ( result )
    {
      if ( *((_DWORD *)result + 139) )
      {
        LOBYTE(a1) = 67;
        *(_WORD *)((char *)&a1 + 1) = **(_WORD **)(*((_DWORD *)v3 + 514) + 556);
        sub_4E5390(v1, (int)&a1, 3, 0, 1);
        result = (char *)sub_40A5C0(4096);
        if ( result )
          result = (char *)sub_4D8670(v1 | 0x80, *((_DWORD **)v3 + 514));
      }
    }
  }
  return result;
}

//----- (004D8760) --------------------------------------------------------
__int16 __cdecl sub_4D8760(int a1, __int16 a2, __int16 a3)
{
  __int16 result; // ax
  char v4[5]; // [esp+0h] [ebp-8h]

  result = a3;
  if ( a3 < 0 )
  {
    *(_WORD *)&v4[3] = a3;
    v4[0] = 66;
    *(_WORD *)&v4[1] = a2;
    result = sub_4E5420(a1, v4, 5, 0, 1);
  }
  return result;
}

//----- (004D87A0) --------------------------------------------------------
int __cdecl sub_4D87A0(int a1, _DWORD *a2)
{
  int result; // eax
  _WORD *v3; // eax
  char v4[7]; // [esp+4h] [ebp-8h]

  result = a2[139];
  if ( result )
  {
    if ( *(_WORD *)(result + 4) )
    {
      v4[0] = 68;
      *(_WORD *)&v4[1] = sub_578AC0(a2);
      v3 = (_WORD *)a2[139];
      *(_WORD *)&v4[3] = *v3;
      *(_WORD *)&v4[5] = v3[2];
      result = sub_4E5390(a1, (int)v4, 7, 0, 0);
    }
  }
  return result;
}

//----- (004D8800) --------------------------------------------------------
int __cdecl sub_4D8800(int a1, int a2)
{
  int result; // eax
  int v3; // eax

  result = a2;
  if ( *(_BYTE *)(a2 + 8) & 4 )
  {
    v3 = *(_DWORD *)(a2 + 748);
    LOBYTE(a2) = 71;
    BYTE1(a2) = *(_BYTE *)(v3 + 91);
    result = sub_4E5390(a1, (int)&a2, 2, 0, 1);
  }
  return result;
}

//----- (004D8840) --------------------------------------------------------
int __cdecl sub_4D8840(int a1, int a2)
{
  char v3; // cl
  __int16 v5; // [esp+0h] [ebp-2h]

  v3 = *(_BYTE *)(a2 + 440);
  LOBYTE(v5) = 91;
  HIBYTE(v5) = v3;
  return sub_4E5420(a1, &v5, 2, 0, 1);
}

//----- (004D8870) --------------------------------------------------------
int __cdecl sub_4D8870(int a1, int a2)
{
  int result; // eax
  int v3; // eax
  char v4[5]; // [esp+0h] [ebp-8h]

  result = a2;
  if ( *(_BYTE *)(a2 + 8) & 4 )
  {
    v3 = *(_DWORD *)(a2 + 748);
    v4[0] = 74;
    *(_DWORD *)&v4[1] = *(_DWORD *)(*(_DWORD *)(v3 + 276) + 2164);
    result = sub_4E5420(a1, v4, 5, 0, 1);
  }
  return result;
}

//----- (004D88C0) --------------------------------------------------------
int __cdecl sub_4D88C0(int a1, int a2)
{
  int result; // eax
  int v3; // esi
  char v4[7]; // [esp+4h] [ebp-8h]

  result = a2;
  v3 = *(_DWORD *)(a2 + 748);
  if ( *(_BYTE *)(a2 + 8) & 4 && (!v3 || *(_BYTE *)(*(_DWORD *)(v3 + 276) + 2251)) )
  {
    v4[0] = -34;
    *(_WORD *)&v4[1] = sub_578AC0((_DWORD *)a2);
    *(_WORD *)&v4[3] = *(_WORD *)(v3 + 4);
    *(_WORD *)&v4[5] = *(_WORD *)(v3 + 8);
    result = sub_4E5450(a1, v4, 7, 0, 1);
  }
  return result;
}

//----- (004D8930) --------------------------------------------------------
int __cdecl sub_4D8930(int a1, int a2)
{
  int result; // eax
  int v3; // esi
  char v4[5]; // [esp+4h] [ebp-8h]

  result = a2;
  v3 = *(_DWORD *)(a2 + 748);
  if ( *(_BYTE *)(a2 + 8) & 4 && (!v3 || *(_BYTE *)(*(_DWORD *)(v3 + 276) + 2251)) )
  {
    v4[0] = 69;
    *(_WORD *)&v4[1] = sub_578AC0((_DWORD *)a2);
    *(_WORD *)&v4[3] = *(_WORD *)(v3 + 4);
    result = sub_4E5450(a1, v4, 5, 0, 1);
  }
  return result;
}

//----- (004D8990) --------------------------------------------------------
char __cdecl sub_4D8990(int a1, int a2, char a3)
{
  char result; // al
  int v4; // edi
  __int16 v5; // ax
  int v6; // ecx
  __int16 v7; // ax
  char v8[14]; // [esp+8h] [ebp-10h]

  result = *(_BYTE *)(a2 + 8);
  v4 = *(_DWORD *)(a2 + 748);
  if ( result & 4 )
  {
    v8[0] = 72;
    v5 = sub_578AC0((_DWORD *)a2);
    v6 = *(_DWORD *)(a2 + 556);
    *(_WORD *)&v8[1] = v5;
    *(_WORD *)&v8[5] = *(_WORD *)(v4 + 8);
    v7 = *(_WORD *)(a2 + 490);
    *(_WORD *)&v8[3] = *(_WORD *)(v6 + 4);
    *(_WORD *)&v8[7] = v7;
    *(_WORD *)&v8[9] = *(_WORD *)(*(_DWORD *)(v4 + 276) + 2235);
    *(_WORD *)&v8[11] = *(_WORD *)(*(_DWORD *)(v4 + 276) + 2239);
    v8[13] = a3;
    result = sub_4E5420(a1, v8, 14, 0, 1);
  }
  return result;
}

//----- (004D8A30) --------------------------------------------------------
int __cdecl sub_4D8A30(int a1, int a2)
{
  char v3[5]; // [esp+0h] [ebp-8h]

  v3[0] = 73;
  *(_DWORD *)&v3[1] = a2;
  return sub_4E5420(a1, v3, 5, 0, 1);
}

//----- (004D8A60) --------------------------------------------------------
int __cdecl sub_4D8A60(int a1, int a2)
{
  __int16 v3; // ax
  __int16 v4; // cx
  char v5[5]; // [esp+4h] [ebp-8h]

  if ( *(_DWORD *)(a2 + 8) & 0x13001000 )
    return sub_4D8AD0(a1, a2);
  v5[0] = 75;
  v3 = sub_578AC0((_DWORD *)a2);
  v4 = *(_WORD *)(a2 + 4);
  *(_WORD *)&v5[1] = v3;
  *(_WORD *)&v5[3] = v4;
  sub_4E5390(a1, (int)v5, 5, 0, 0);
  return sub_4D87A0(a1, (_DWORD *)a2);
}

//----- (004D8AD0) --------------------------------------------------------
int __cdecl sub_4D8AD0(int a1, int a2)
{
  int v2; // esi
  int v3; // eax
  int v4; // edx
  char v6[9]; // [esp+8h] [ebp-Ch]

  v6[0] = 76;
  v2 = *(_DWORD *)(a2 + 692);
  *(_WORD *)&v6[1] = sub_578AC0((_DWORD *)a2);
  *(_WORD *)&v6[3] = *(_WORD *)(a2 + 4);
  v3 = 0;
  v4 = v2;
  do
  {
    if ( *(_DWORD *)v4 )
      v6[v3 + 5] = *(_BYTE *)(*(_DWORD *)v4 + 4);
    else
      v6[v3 + 5] = -1;
    ++v3;
    v4 += 4;
  }
  while ( v3 < 4 );
  sub_4E5390(a1, (int)v6, 9, 0, 0);
  return sub_4D87A0(a1, (_DWORD *)a2);
}

//----- (004D8B50) --------------------------------------------------------
int __cdecl sub_4D8B50(int a1, int a2)
{
  char v3[5]; // [esp+4h] [ebp-8h]

  v3[0] = 77;
  *(_WORD *)&v3[1] = sub_578AC0((_DWORD *)a2);
  *(_WORD *)&v3[3] = *(_WORD *)(a2 + 4);
  return sub_4E5390(a1, (int)v3, 5, 0, 0);
}

//----- (004D8B90) --------------------------------------------------------
int __cdecl sub_4D8B90(int a1, char a2)
{
  int result; // eax
  char v3[8]; // [esp+0h] [ebp-8h]

  result = a1;
  if ( a1 )
  {
    if ( !(*(_BYTE *)(a1 + 8) & 4) )
      return result;
    v3[0] = 88;
    *(_WORD *)&v3[1] = sub_578AC0((_DWORD *)a1);
  }
  else
  {
    v3[0] = 88;
    *(_WORD *)&v3[1] = 0;
  }
  v3[3] = a2;
  *(_DWORD *)&v3[4] = *(_DWORD *)&byte_5D4594[2598000];
  return sub_4E5390(255, (int)v3, 8, 0, 1);
}

//----- (004D8BF0) --------------------------------------------------------
int __cdecl sub_4D8BF0(int a1, char a2)
{
  char v3[8]; // [esp+0h] [ebp-8h]

  v3[0] = 89;
  if ( a1 )
    *(_WORD *)&v3[1] = *(unsigned __int8 *)(a1 + 57);
  else
    *(_WORD *)&v3[1] = 0;
  v3[3] = a2;
  *(_DWORD *)&v3[4] = *(_DWORD *)&byte_5D4594[2598000];
  return sub_4E5390(255, (int)v3, 8, 0, 1);
}

//----- (004D8C40) --------------------------------------------------------
int __cdecl sub_4D8C40(int a1)
{
  __int16 v1; // cx
  char v3[8]; // [esp+0h] [ebp-8h]

  v1 = *(unsigned __int8 *)(a1 + 57);
  v3[0] = 86;
  *(_WORD *)&v3[1] = v1;
  v3[3] = 0;
  *(_DWORD *)&v3[4] = *(_DWORD *)&byte_5D4594[2598000];
  return sub_4E5390(255, (int)v3, 8, 0, 1);
}

//----- (004D8C80) --------------------------------------------------------
int __cdecl sub_4D8C80(int a1, char a2)
{
  char v3[8]; // [esp+0h] [ebp-8h]

  v3[0] = 87;
  if ( a1 )
    *(_WORD *)&v3[1] = *(unsigned __int8 *)(a1 + 57);
  else
    *(_WORD *)&v3[1] = -1;
  v3[3] = a2;
  *(_DWORD *)&v3[4] = *(_DWORD *)&byte_5D4594[2598000];
  return sub_4E5390(255, (int)v3, 8, 0, 1);
}

//----- (004D8CD0) --------------------------------------------------------
int __cdecl sub_4D8CD0(int a1)
{
  int result; // eax
  int v2; // esi
  char v3[7]; // [esp+4h] [ebp-8h]

  result = a1;
  v2 = *(_DWORD *)(a1 + 748);
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    v3[0] = 85;
    *(_WORD *)&v3[1] = sub_578AC0((_DWORD *)a1);
    *(_WORD *)&v3[3] = *(_WORD *)(*(_DWORD *)(v2 + 276) + 2152);
    *(_WORD *)&v3[5] = *(_WORD *)(*(_DWORD *)(v2 + 276) + 2156);
    result = sub_4E5420(255, v3, 7, 0, 1);
  }
  return result;
}

//----- (004D8D40) --------------------------------------------------------
char *__cdecl sub_4D8D40(int a1)
{
  char *result; // eax
  char *i; // esi
  char *v3; // esi
  double v4; // st7
  int v5; // esi
  int v6; // eax
  float v7; // [esp+0h] [ebp-Ch]
  unsigned __int8 *v8; // [esp+4h] [ebp-8h]
  int v9; // [esp+10h] [ebp+4h]

  result = (char *)a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    ++*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 2140);
    result = (char *)sub_40A5C0(1024);
    if ( result )
    {
      if ( sub_40AA00() && !sub_40AA20() )
      {
        for ( i = sub_416EA0(); i; i = sub_416EE0((int)i) )
        {
          if ( i[3680] & 1 )
            sub_4174F0((int)i, 256);
        }
        sub_40AA30(1);
      }
      result = (char *)sub_40A5C0(0x4000000);
      if ( !result )
      {
        result = (char *)sub_40A300();
        if ( !result )
        {
          result = (char *)sub_40AA00();
          if ( result )
          {
            if ( !sub_417DA0(4) )
            {
              v5 = sub_40A770();
              result = (char *)sub_40AA40();
              if ( v5 >= (int)result )
                return result;
              v8 = &byte_587000[198928];
              v4 = sub_419D40(&byte_587000[198960]);
              goto LABEL_22;
            }
            v9 = sub_417DD0();
            result = (char *)sub_40AA40();
            if ( v9 < (int)result )
            {
              result = sub_418B10();
              v3 = result;
              if ( result )
              {
                while ( sub_40A830((int)v3) != 1 )
                {
                  result = sub_418B60((int)v3);
                  v3 = result;
                  if ( !result )
                    return result;
                }
                v8 = &byte_587000[198872];
                v4 = sub_419D40(&byte_587000[198904]);
LABEL_22:
                v7 = v4;
                v6 = sub_419A70(v7);
                return (char *)sub_40A2A0(v6, (const char *)v8);
              }
            }
          }
        }
      }
    }
  }
  return result;
}

//----- (004D8E90) --------------------------------------------------------
int __cdecl sub_4D8E90(int a1, int a2)
{
  int result; // eax

  result = a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    result = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 276);
    *(_DWORD *)(result + 2136) += a2;
  }
  return result;
}

//----- (004D8EC0) --------------------------------------------------------
int __cdecl sub_4D8EC0(int a1, int a2)
{
  int result; // eax

  result = a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    result = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 276);
    *(_DWORD *)(result + 2136) -= a2;
  }
  return result;
}

//----- (004D8EF0) --------------------------------------------------------
int __cdecl sub_4D8EF0(int a1)
{
  int v1; // eax
  char v3[11]; // [esp+0h] [ebp-Ch]

  v3[0] = 78;
  v1 = *(_DWORD *)(a1 + 748);
  *(_WORD *)&v3[1] = *(_WORD *)(a1 + 36);
  *(_DWORD *)&v3[3] = *(_DWORD *)(*(_DWORD *)(v1 + 276) + 2136);
  *(_DWORD *)&v3[7] = *(_DWORD *)(*(_DWORD *)(v1 + 276) + 2140);
  return sub_4E5390(255, (int)v3, 11, 0, 1);
}

//----- (004D8F50) --------------------------------------------------------
int __cdecl sub_4D8F50(int a1, int a2)
{
  char v3[13]; // [esp+0h] [ebp-10h]

  v3[0] = -45;
  *(_DWORD *)&v3[1] = a2;
  *(_DWORD *)&v3[5] = sub_40A230();
  *(_DWORD *)&v3[9] = *(_DWORD *)&byte_5D4594[2598000];
  return sub_4E5390(a1, (int)v3, 13, 0, 1);
}

//----- (004D8F90) --------------------------------------------------------
int __cdecl sub_4D8F90(int a1, _DWORD *a2)
{
  char v3[7]; // [esp+4h] [ebp-8h]

  v3[0] = 90;
  *(_WORD *)&v3[1] = sub_578AC0(a2);
  *(_DWORD *)&v3[3] = a2[85];
  return sub_4E5390(a1, (int)v3, 7, 0, 1);
}

//----- (004D8FD0) --------------------------------------------------------
void __cdecl sub_4D8FD0(int a1, _DWORD *a2)
{
  _DWORD *v2; // esi

  v2 = a2;
  if ( (unsigned int)0x800000 & a2[2] )
  {
    *(_WORD *)((char *)&a2 + 1) = sub_578AC0(a2);
    LOBYTE(a2) = 56 - ((v2[4] & 0x1000000) != 0);
    sub_4E5420(a1, &a2, 3, 0, 1);
  }
}

//----- (004D9020) --------------------------------------------------------
int __cdecl sub_4D9020(int a1, int a2)
{
  int v2; // esi
  __int16 v3; // ax
  double v4; // st7
  __int64 v5; // rax
  double v6; // st7
  __int64 v7; // rax
  double v8; // st7
  int result; // eax
  __int16 v10; // ax
  double v11; // st7
  __int16 v12; // ax
  double v13; // st7
  _DWORD *v14; // [esp-4h] [ebp-10h]
  char v15[6]; // [esp+4h] [ebp-8h]

  v2 = a2;
  if ( *(_BYTE *)(a2 + 20) & 0x20 )
  {
    v3 = *(_WORD *)(a2 + 36);
    v15[0] = -97;
    v4 = *(float *)(a2 + 104);
    *(_WORD *)&v15[1] = v3;
    v5 = (__int64)v4;
    v6 = *(float *)(a2 + 108);
    v15[3] = v5;
    v7 = (__int64)v6;
    v8 = *(float *)(a2 + 116);
    v15[4] = v7;
    v15[5] = (__int64)v8;
    result = sub_40EBC0(a1, 1, v15, 6);
  }
  else
  {
    v14 = (_DWORD *)a2;
    if ( *(float *)(a2 + 104) < 0.0 )
    {
      LOBYTE(a2) = 95;
      v12 = sub_578AC0(v14);
      v13 = *(float *)(v2 + 104);
      *(_WORD *)((char *)&a2 + 1) = v12;
      v11 = -v13;
    }
    else
    {
      LOBYTE(a2) = 94;
      v10 = sub_578AC0(v14);
      v11 = *(float *)(v2 + 104);
      *(_WORD *)((char *)&a2 + 1) = v10;
    }
    HIBYTE(a2) = (__int64)v11;
    result = sub_40EBC0(a1, 1, &a2, 4);
  }
  return result;
}

//----- (004D90E0) --------------------------------------------------------
int __cdecl sub_4D90E0(int a1, char a2)
{
  char v3[2]; // [esp+0h] [ebp-2h]

  v3[0] = -105;
  v3[1] = a2;
  return sub_40EBC0(a1, 1, v3, 2);
}

//----- (004D9110) --------------------------------------------------------
int __cdecl sub_4D9110(float *a1, int a2)
{
  int result; // eax
  int i; // edi
  int v4; // esi
  double v5; // st7
  double v6; // st6
  double v7; // st5

  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    v4 = *(_DWORD *)(*(_DWORD *)(i + 748) + 276);
    v5 = *a1 - *(float *)(v4 + 3632);
    v6 = a1[1] - *(float *)(v4 + 3636);
    v7 = v6 * v6 + v5 * v5;
    if ( v7 < 90000.0 )
      sub_4D90E0(*(unsigned __int8 *)(v4 + 2064), (__int64)((1.0 - v7 * 0.000011111111) * (double)a2));
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004D91A0) --------------------------------------------------------
int __cdecl sub_4D91A0(int a1, int a2)
{
  char v3[5]; // [esp+8h] [ebp-8h]

  v3[0] = 108;
  *(_WORD *)&v3[1] = sub_578AC0((_DWORD *)a2);
  *(_WORD *)&v3[3] = *(_WORD *)(a2 + 4);
  if ( sub_40A5C0(0x8000000) )
    v3[4] |= 0x80u;
  sub_4E5390(a1, (int)v3, 5, 0, 1);
  return sub_4D85C0(a1, (_DWORD *)a2);
}

//----- (004D9200) --------------------------------------------------------
int __cdecl sub_4D9200(int a1, int a2)
{
  int v4; // [esp+0h] [ebp-4h]

  LOBYTE(v4) = 109;
  *(_WORD *)((char *)&v4 + 1) = *(_WORD *)(a2 + 36);
  if ( sub_40A5C0(0x8000000) )
    BYTE2(v4) |= 0x80u;
  return sub_4E5390(a1, (int)&v4, 3, 0, 1);
}

//----- (004D9250) --------------------------------------------------------
int __cdecl sub_4D9250(int a1, int a2)
{
  char v3[5]; // [esp+8h] [ebp-8h]

  v3[0] = -37;
  *(_WORD *)&v3[1] = sub_578AC0((_DWORD *)a2);
  *(_WORD *)&v3[3] = *(_WORD *)(a2 + 4);
  sub_4E5390(a1, (int)v3, 5, 0, 1);
  return sub_4D85C0(a1, (_DWORD *)a2);
}

//----- (004D92A0) --------------------------------------------------------
int __cdecl sub_4D92A0(int a1, _DWORD *a2)
{
  int v2; // ecx
  char v4[3]; // [esp+0h] [ebp-4h]
  char v5; // [esp+3h] [ebp-1h]

  v5 = HIBYTE(v2);
  v4[0] = -36;
  *(_WORD *)&v4[1] = sub_578AC0(a2);
  return sub_4E5390(a1, (int)v4, 3, 0, 1);
}

//----- (004D92D0) --------------------------------------------------------
int __cdecl sub_4D92D0(int a1, int a2)
{
  int result; // eax
  int v3; // edi
  int v4; // eax
  int v5; // edx
  char v6[7]; // [esp+8h] [ebp-8h]

  result = *(_DWORD *)&byte_5D4594[1556320];
  v3 = *(_DWORD *)(a2 + 692);
  if ( !*(_DWORD *)&byte_5D4594[1556320] )
  {
    result = sub_4E3AA0((CHAR *)&byte_587000[198984]);
    *(_DWORD *)&byte_5D4594[1556320] = result;
  }
  if ( *(_DWORD *)(a2 + 8) & 0x13001000 || *(unsigned __int16 *)(a2 + 4) == result )
  {
    v6[0] = 103;
    *(_WORD *)&v6[1] = sub_578AC0((_DWORD *)a2);
    v4 = 0;
    v5 = v3;
    do
    {
      if ( *(_DWORD *)v5 )
        v6[v4 + 3] = *(_BYTE *)(*(_DWORD *)v5 + 4);
      else
        v6[v4 + 3] = -1;
      ++v4;
      v5 += 4;
    }
    while ( v4 < 4 );
    result = sub_4E5420(a1, v6, 7, 0, 1);
  }
  return result;
}

//----- (004D9360) --------------------------------------------------------
int __cdecl sub_4D9360(int a1, _DWORD *a2, char a3, int a4)
{
  char v5[8]; // [esp+0h] [ebp-8h]

  v5[0] = 104;
  *(_WORD *)&v5[1] = sub_578AC0(a2);
  v5[7] = a3;
  *(_DWORD *)&v5[3] = a4;
  return sub_4E5420(a1, v5, 8, 0, 1);
}

//----- (004D93A0) --------------------------------------------------------
_DWORD *__cdecl sub_4D93A0(int a1, int a2)
{
  int v2; // eax
  char *v3; // ecx
  int v4; // eax
  int v5; // esi
  int v6; // edx
  char *v7; // ebx
  _DWORD *result; // eax
  _DWORD *i; // esi
  char v10[21]; // [esp+10h] [ebp-18h]

  v10[0] = 105;
  v2 = *(_DWORD *)(a2 + 748);
  *(_WORD *)&v10[1] = *(_WORD *)(a2 + 36);
  if ( *(_BYTE *)(a2 + 540) )
    v10[2] |= 0x80u;
  v3 = &v10[3];
  v4 = v2 + 2076;
  v5 = 6;
  do
  {
    v6 = v4;
    v7 = v3;
    v4 += 3;
    v3 += 3;
    --v5;
    *(_WORD *)v7 = *(_WORD *)v6;
    v7[2] = *(_BYTE *)(v6 + 2);
  }
  while ( v5 );
  result = (_DWORD *)sub_4E5390(a1, (int)v10, 21, 0, 1);
  for ( i = *(_DWORD **)(a2 + 504); i; i = (_DWORD *)i[124] )
  {
    if ( i[4] & 0x100 )
      result = sub_4D82F0(a1, i);
  }
  return result;
}

//----- (004D9440) --------------------------------------------------------
int __cdecl sub_4D9440(int a1, int a2)
{
  char v3[68]; // [esp+Ch] [ebp-44h]

  v3[0] = -43;
  v3[1] = 1;
  strcpy(&v3[2], (const char *)a2);
  *(_WORD *)&v3[66] = *(_WORD *)(a2 + 72);
  return sub_4E5420(a1, v3, 68, 0, 1);
}

//----- (004D94A0) --------------------------------------------------------
int __cdecl sub_4D94A0(int a1, const char *a2)
{
  char v3[68]; // [esp+8h] [ebp-44h]

  v3[0] = -43;
  v3[1] = 2;
  strcpy(&v3[2], a2);
  return sub_4E5420(a1, v3, 68, 0, 1);
}

//----- (004D9500) --------------------------------------------------------
int __cdecl sub_4D9500(int a1, int a2)
{
  char v3[68]; // [esp+Ch] [ebp-44h]

  v3[0] = -43;
  v3[1] = 3;
  strcpy(&v3[2], (const char *)a2);
  *(_WORD *)&v3[66] = *(_WORD *)(a2 + 72);
  return sub_4E5420(a1, v3, 68, 0, 1);
}

//----- (004D9560) --------------------------------------------------------
int __cdecl sub_4D9560(int a1, char a2, int a3)
{
  int v3; // ecx
  char v5[3]; // [esp+0h] [ebp-4h]
  char v6; // [esp+3h] [ebp-1h]

  v6 = HIBYTE(v3);
  v5[1] = a2;
  v5[0] = -42;
  v5[2] = a3 == 1;
  return sub_4E5420(a1, v5, 3, 0, 1);
}

//----- (004D95A0) --------------------------------------------------------
int __cdecl sub_4D95A0(int a1, char a2, char a3, char a4, __int16 a5)
{
  char v6[6]; // [esp+0h] [ebp-8h]

  v6[1] = a3;
  v6[3] = a4;
  v6[2] = a2;
  v6[0] = -40;
  *(_WORD *)&v6[4] = a5;
  return sub_4E5390(a1, (int)v6, 6, 0, 1);
}

//----- (004D95F0) --------------------------------------------------------
int __cdecl sub_4D95F0(int a1, char a2, __int16 a3)
{
  char v4[4]; // [esp+0h] [ebp-4h]

  v4[1] = a2;
  v4[0] = -39;
  *(_WORD *)&v4[2] = a3;
  return sub_4E5390(a1, (int)v4, 4, 0, 1);
}

//----- (004D9630) --------------------------------------------------------
int __cdecl sub_4D9630(int a1, int a2, char a3)
{
  char v4[6]; // [esp+0h] [ebp-8h]

  *(_DWORD *)&v4[1] = a2;
  v4[0] = -33;
  v4[5] = a3;
  return sub_4E5420(a1, v4, 6, 0, 1);
}

//----- (004D9670) --------------------------------------------------------
int __cdecl sub_4D9670(int a1, _DWORD *a2, char a3)
{
  char v4[4]; // [esp+0h] [ebp-4h]

  v4[0] = -32;
  *(_WORD *)&v4[1] = sub_578AC0(a2);
  v4[3] = a3;
  return sub_4E5390(a1, (int)v4, 4, 0, 0);
}

//----- (004D96B0) --------------------------------------------------------
int __cdecl sub_4D96B0(int a1, _DWORD *a2)
{
  int v2; // ecx
  char v4[3]; // [esp+0h] [ebp-4h]
  char v5; // [esp+3h] [ebp-1h]

  v5 = HIBYTE(v2);
  v4[0] = -31;
  *(_WORD *)&v4[1] = sub_578AC0(a2);
  return sub_4E5390(a1, (int)v4, 3, 0, 0);
}

//----- (004D96E0) --------------------------------------------------------
int __cdecl sub_4D96E0(int a1)
{
  char v2[1]; // [esp+1h] [ebp-1h]

  v2[0] = 113;
  return sub_4E5390(a1, (int)v2, 1, 0, 0);
}

//----- (004D9700) --------------------------------------------------------
int __cdecl sub_4D9700(int a1)
{
  int result; // eax

  result = a1;
  switch ( a1 )
  {
    case 0:
      result = sub_4DA390((const char *)&byte_587000[198996]);
      break;
    case 1:
      result = sub_4DA390((const char *)&byte_587000[199012]);
      break;
    case 2:
      result = sub_4DA390((const char *)&byte_587000[199032]);
      break;
    case 3:
      result = sub_4DA390((const char *)&byte_587000[199052]);
      break;
    default:
      return result;
  }
  return result;
}

//----- (004D9760) --------------------------------------------------------
int __cdecl sub_4D9760(int a1)
{
  int result; // eax
  int v2; // edx

  result = a1;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    LOBYTE(a1) = -53;
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), &a1, 1, 0, 1);
  }
  return result;
}

//----- (004D97A0) --------------------------------------------------------
int __cdecl sub_4D97A0(int a1, _DWORD *a2, int a3)
{
  LOBYTE(a3) = (a3 != 1) + 52;
  *(_WORD *)((char *)&a3 + 1) = sub_578AC0(a2);
  return sub_4E5390(a1, (int)&a3, 3, 0, 1);
}

//----- (004D97E0) --------------------------------------------------------
int __cdecl sub_4D97E0(int a1)
{
  char v2[1]; // [esp+1h] [ebp-1h]

  v2[0] = 54;
  return sub_4E5390(a1, (int)v2, 1, 0, 1);
}

//----- (004D9800) --------------------------------------------------------
int __cdecl sub_4D9800(int a1, int a2)
{
  int v2; // ecx
  char v4[3]; // [esp+0h] [ebp-4h]
  char v5; // [esp+3h] [ebp-1h]

  v5 = HIBYTE(v2);
  v4[0] = -28;
  v4[1] = a1 != 0;
  v4[2] = a2 != 0;
  return sub_4E5390(255, (int)v4, 3, 0, 1);
}

//----- (004D9840) --------------------------------------------------------
int __cdecl sub_4D9840(_DWORD *a1, _DWORD *a2)
{
  char v3[7]; // [esp+4h] [ebp-8h]

  if ( a1 && a2 )
  {
    v3[0] = -98;
    v3[1] = 7;
    v3[2] = 0;
    *(_WORD *)&v3[3] = sub_578AC0(a1);
    *(_WORD *)&v3[5] = sub_578AC0(a2);
  }
  return sub_4E5390(255, (int)v3, 7, 0, 1);
}

//----- (004D98A0) --------------------------------------------------------
int __cdecl sub_4D98A0(_DWORD *a1, _DWORD *a2)
{
  char v3[7]; // [esp+4h] [ebp-8h]

  if ( a1 && a2 )
  {
    v3[0] = -98;
    v3[1] = 14;
    v3[2] = 0;
    *(_WORD *)&v3[3] = sub_578AC0(a1);
    *(_WORD *)&v3[5] = sub_578AC0(a2);
  }
  return sub_4E5390(255, (int)v3, 7, 0, 1);
}

//----- (004D9900) --------------------------------------------------------
void __cdecl sub_4D9900(int a1)
{
  int v1; // ebp
  int v2; // esi
  _WORD *v3; // edi
  int v4; // eax
  int v5; // eax
  int i; // edi
  char *v7; // eax
  int j; // edi
  int v9; // ebx
  int v10; // eax
  int k; // edi
  int v12; // ebx
  int v13; // eax
  int v14; // eax
  _WORD *v15; // [esp+Ch] [ebp-4h]
  int v16; // [esp+14h] [ebp+4h]

  v1 = a1;
  if ( a1 && *(_BYTE *)(a1 + 8) & 4 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    v3 = *(_WORD **)(a1 + 556);
    v15 = *(_WORD **)(a1 + 556);
    v16 = *(int *)(v2 + 228);
    if ( *(float *)(v2 + 232) != *(float *)&v16 )
    {
      sub_4D8A30(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), v16);
      *(_DWORD *)(v2 + 232) = *(_DWORD *)(v2 + 228);
    }
    v4 = *(_DWORD *)(v2 + 276);
    if ( *(_DWORD *)(v4 + 2168) != *(_DWORD *)(v4 + 2164) )
    {
      sub_4D8870(*(unsigned __int8 *)(v4 + 2064), v1);
      *(_DWORD *)(*(_DWORD *)(v2 + 276) + 2168) = *(_DWORD *)(*(_DWORD *)(v2 + 276) + 2164);
    }
    v5 = *(_DWORD *)(v2 + 276);
    if ( *(_BYTE *)(v5 + 2172) != *(_BYTE *)(v1 + 440) )
    {
      sub_4D8840(*(unsigned __int8 *)(v5 + 2064), v1);
      *(_BYTE *)(*(_DWORD *)(v2 + 276) + 2172) = *(_BYTE *)(v1 + 440);
    }
    if ( sub_40A5C0(4096) )
    {
      for ( i = 0; i < 32; ++i )
      {
        v7 = sub_417090(i);
        if ( v7 && *((_DWORD *)v7 + 514) && *(_DWORD *)(v2 + 320) != *(unsigned __int8 *)(i + v2 + 452) )
        {
          sub_4D9D60(i, v1);
          *(_BYTE *)(i + v2 + 452) = *(_BYTE *)(v2 + 320);
        }
      }
      for ( j = 0; j < 32; ++j )
      {
        v9 = 0;
        if ( !*(_DWORD *)&byte_5D4594[1556324] )
          *(_DWORD *)&byte_5D4594[1556324] = sub_4E3AA0((CHAR *)&byte_587000[199072]);
        if ( sub_417090(j) )
        {
          v10 = sub_4E7980(v1);
          if ( v10 )
          {
            while ( *(unsigned __int16 *)(v10 + 4) != *(_DWORD *)&byte_5D4594[1556324] )
            {
              v10 = sub_4E7990(v10);
              if ( !v10 )
                goto LABEL_25;
            }
            v9 = 1;
          }
LABEL_25:
          if ( v9 != *(unsigned __int8 *)(j + v2 + 484) )
          {
            sub_4D9DF0(j, v1, v9);
            *(_BYTE *)(j + v2 + 484) = v9;
          }
        }
      }
      for ( k = 0; k < 32; ++k )
      {
        v12 = 0;
        if ( !*(_DWORD *)&byte_5D4594[1556328] )
          *(_DWORD *)&byte_5D4594[1556328] = sub_4E3AA0((CHAR *)&byte_587000[199084]);
        if ( sub_417090(k) )
        {
          v13 = sub_4E7980(v1);
          if ( v13 )
          {
            while ( *(unsigned __int16 *)(v13 + 4) != *(_DWORD *)&byte_5D4594[1556328] )
            {
              v13 = sub_4E7990(v13);
              if ( !v13 )
                goto LABEL_37;
            }
            v12 = 1;
          }
LABEL_37:
          if ( v12 != *(unsigned __int8 *)(k + v2 + 516) )
          {
            sub_4D9E30(k, v1, v12);
            *(_BYTE *)(k + v2 + 516) = v12;
          }
        }
      }
      v3 = v15;
    }
    v14 = *(_DWORD *)(v2 + 276);
    if ( *(_BYTE *)(v14 + 2184) )
    {
      sub_4D85C0(*(unsigned __int8 *)(v14 + 2064), (_DWORD *)v1);
      sub_4D88C0(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), v1);
      sub_4D8990(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), v1, *(_BYTE *)(*(_DWORD *)(v2 + 276) + 3684));
      *(_BYTE *)(*(_DWORD *)(v2 + 276) + 2184) = 0;
    }
    if ( sub_43AF70() == 1 )
    {
      sub_528030(v1);
    }
    else
    {
      if ( v3 && *v3 != *(_WORD *)(v2 + 10) )
      {
        sub_4D86E0(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064));
        *(_WORD *)(v2 + 10) = *v3;
      }
      if ( *(_WORD *)(v2 + 4) != *(_WORD *)(v2 + 6) )
      {
        sub_4D8930(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), v1);
        *(_WORD *)(v2 + 6) = *(_WORD *)(v2 + 4);
      }
    }
  }
}

//----- (004D9C20) --------------------------------------------------------
int __cdecl sub_4D9C20(int a1)
{
  int result; // eax
  int v2; // ecx
  int v3; // edx
  char v4[17]; // [esp+0h] [ebp-14h]

  result = a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    v4[0] = -17;
    if ( *(_BYTE *)(*(_DWORD *)(v2 + 276) + 2251) )
    {
      if ( *(_BYTE *)(*(_DWORD *)(v2 + 276) + 2251) == 1 )
      {
        *(_DWORD *)&v4[1] = *(_DWORD *)&byte_587000[312816];
        *(_DWORD *)&v4[5] = *(_DWORD *)&byte_587000[312820];
        v3 = *(_DWORD *)&byte_587000[312828];
        *(_DWORD *)&v4[9] = *(_DWORD *)&byte_587000[312824];
      }
      else
      {
        result = *(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2251) - 2;
        if ( *(_BYTE *)(*(_DWORD *)(v2 + 276) + 2251) != 2 )
          return result;
        *(_DWORD *)&v4[1] = *(_DWORD *)&byte_587000[312800];
        *(_DWORD *)&v4[5] = *(_DWORD *)&byte_587000[312804];
        v3 = *(_DWORD *)&byte_587000[312812];
        *(_DWORD *)&v4[9] = *(_DWORD *)&byte_587000[312808];
      }
    }
    else
    {
      *(_DWORD *)&v4[1] = *(_DWORD *)&byte_587000[312784];
      *(_DWORD *)&v4[5] = *(_DWORD *)&byte_587000[312788];
      v3 = *(_DWORD *)&byte_587000[312796];
      *(_DWORD *)&v4[9] = *(_DWORD *)&byte_587000[312792];
    }
    *(_DWORD *)&v4[13] = v3;
    result = sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), v4, 17, 0, 1);
  }
  return result;
}

//----- (004D9CF0) --------------------------------------------------------
int __cdecl sub_4D9CF0(int a1)
{
  char v2[2]; // [esp+0h] [ebp-2h]

  v2[0] = -16;
  v2[1] = 0;
  return sub_4E5390(a1, (int)v2, 2, 0, 1);
}

//----- (004D9D20) --------------------------------------------------------
int __cdecl sub_4D9D20(int a1, int a2)
{
  __int16 v3; // cx
  char v5[4]; // [esp+0h] [ebp-4h]

  v3 = *(_WORD *)(a2 + 36);
  *(_WORD *)v5 = 496;
  *(_WORD *)&v5[2] = v3;
  return sub_4E5390(a1, (int)v5, 4, 0, 1);
}

//----- (004D9D60) --------------------------------------------------------
int __cdecl sub_4D9D60(int a1, int a2)
{
  int v2; // edx
  char v4[5]; // [esp+0h] [ebp-8h]

  v4[0] = -16;
  v4[1] = 4;
  v2 = *(_DWORD *)(a2 + 748);
  *(_WORD *)&v4[3] = *(_WORD *)(a2 + 36);
  v4[2] = *(_BYTE *)(v2 + 320);
  return sub_4E5420(a1, v4, 5, 0, 1);
}

//----- (004D9DB0) --------------------------------------------------------
int __cdecl sub_4D9DB0(int a1, int a2, int a3)
{
  char v4[8]; // [esp+0h] [ebp-8h]

  *(_WORD *)&v4[6] = *(_WORD *)(a2 + 36);
  v4[0] = -16;
  v4[1] = 21;
  *(_DWORD *)&v4[2] = a3;
  return sub_4E5420(a1, v4, 8, 0, 1);
}

//----- (004D9DF0) --------------------------------------------------------
int __cdecl sub_4D9DF0(int a1, int a2, char a3)
{
  char v4[5]; // [esp+0h] [ebp-8h]

  *(_WORD *)&v4[3] = *(_WORD *)(a2 + 36);
  v4[0] = -16;
  v4[1] = 22;
  v4[2] = a3;
  return sub_4E5420(a1, v4, 5, 0, 1);
}

//----- (004D9E30) --------------------------------------------------------
int __cdecl sub_4D9E30(int a1, int a2, char a3)
{
  char v4[5]; // [esp+0h] [ebp-8h]

  *(_WORD *)&v4[3] = *(_WORD *)(a2 + 36);
  v4[0] = -16;
  v4[1] = 23;
  v4[2] = a3;
  return sub_4E5420(a1, v4, 5, 0, 1);
}

//----- (004D9E70) --------------------------------------------------------
int __cdecl sub_4D9E70(int a1)
{
  char v2[2]; // [esp+0h] [ebp-2h]

  v2[0] = -16;
  v2[1] = 20;
  return sub_4E5420(a1, v2, 2, 0, 1);
}

//----- (004D9EA0) --------------------------------------------------------
void sub_4D9EA0()
{
  srand(0x2311u);
}

//----- (004D9EB0) --------------------------------------------------------
int sub_4D9EB0(int a1, wchar_t *a2, ...)
{
  int result; // eax
  int v3; // esi
  char v4; // al
  int v5; // eax
  wchar_t v6[516]; // [esp+4h] [ebp-408h]
  va_list va; // [esp+418h] [ebp+Ch]

  va_start(va, a2);
  result = a1;
  if ( a1 && *(_BYTE *)(a1 + 8) & 4 )
  {
    v3 = *(_DWORD *)(a1 + 748);
    nox_vswprintf(&v6[260], a2, va);
    LOBYTE(v6[0]) = -88;
    *(wchar_t *)((char *)v6 + 1) = 0;
    HIBYTE(v6[1]) = 0;
    if ( sub_4100F0((__int16 *)&v6[260]) )
      v4 = HIBYTE(v6[1]) | 2;
    else
      v4 = HIBYTE(v6[1]) | 4;
    HIBYTE(v6[1]) = v4;
    v6[2] = 0;
    v6[3] = 0;
    LOBYTE(v6[5]) = 0;
    v6[4] = (unsigned __int8)(nox_wcslen(&v6[260]) + 1);
    if ( v6[1] & 0x400 )
    {
      nox_wcscpy((wchar_t *)((char *)&v6[5] + 1), &v6[260]);
      v5 = 2;
    }
    else
    {
      nox_sprintf((char *)&v6[5] + 1, (const char *)&byte_587000[199092], &v6[260]);
      v5 = 1;
    }
    result = sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064), 1, v6, v5 * LOBYTE(v6[4]) + 11);
  }
  return result;
}

//----- (004D9FD0) --------------------------------------------------------
int sub_4D9FD0(char a1, wchar_t *a2, ...)
{
  char v2; // al
  int v3; // edi
  int result; // eax
  int i; // esi
  wchar_t v6[516]; // [esp+Ch] [ebp-408h]
  va_list va; // [esp+420h] [ebp+Ch]

  va_start(va, a2);
  nox_vswprintf(&v6[260], a2, va);
  LOBYTE(v6[0]) = -88;
  *(wchar_t *)((char *)v6 + 1) = 0;
  HIBYTE(v6[1]) = a1;
  if ( sub_4100F0((__int16 *)&v6[260]) )
    v2 = HIBYTE(v6[1]) | 2;
  else
    v2 = HIBYTE(v6[1]) | 4;
  HIBYTE(v6[1]) = v2;
  v6[2] = 0;
  v6[3] = 0;
  LOBYTE(v6[5]) = 0;
  v6[4] = (unsigned __int8)(nox_wcslen(&v6[260]) + 1);
  if ( v6[1] & 0x400 )
  {
    nox_wcscpy((wchar_t *)((char *)&v6[5] + 1), &v6[260]);
    v3 = 2;
  }
  else
  {
    nox_sprintf((char *)&v6[5] + 1, (const char *)&byte_587000[199096], &v6[260]);
    v3 = 1;
  }
  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(i + 748) + 276) + 2064), 1, v6, v3 * LOBYTE(v6[4]) + 11);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004DA0F0) --------------------------------------------------------
int __cdecl sub_4DA0F0(int a1, int a2, int *a3)
{
  int result; // eax
  int v4; // edx
  char v5[6]; // [esp+0h] [ebp-8h]

  result = a2;
  switch ( a2 )
  {
    case 0:
    case 1:
    case 2:
    case 12:
    case 13:
    case 16:
    case 20:
    case 21:
      v5[1] = a2;
      v4 = *a3;
      v5[0] = -87;
      *(_DWORD *)&v5[2] = v4;
      result = sub_40EBC0(a1, 1, v5, 6);
      break;
    case 17:
      LOWORD(a2) = 4521;
      result = sub_40EBC0(a1, 1, &a2, 2);
      break;
    default:
      return result;
  }
  return result;
}

//----- (004DA180) --------------------------------------------------------
int __cdecl sub_4DA180(int a1, _BYTE *a2)
{
  int result; // eax
  int i; // esi
  int j; // esi
  int k; // esi
  char v6[6]; // [esp+8h] [ebp-8h]

  result = a1;
  switch ( a1 )
  {
    case 3:
    case 4:
    case 8:
    case 18:
    case 19:
    case 21:
      v6[1] = a1;
      v6[0] = -87;
      *(_DWORD *)&v6[2] = *(_DWORD *)a2;
      result = sub_4DA7C0();
      for ( i = result; result; i = result )
      {
        sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(i + 748) + 276) + 2064), 1, v6, 6);
        result = sub_4DA7F0(i);
      }
      break;
    case 5:
    case 6:
    case 7:
    case 9:
    case 10:
    case 11:
      *a2 = -87;
      a2[1] = a1;
      result = sub_4DA7C0();
      for ( j = result; result; j = result )
      {
        sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(j + 748) + 276) + 2064), 1, a2, 10);
        result = sub_4DA7F0(j);
      }
      break;
    case 14:
      *a2 = -87;
      a2[1] = a1;
      result = sub_4DA7C0();
      for ( k = result; result; k = result )
      {
        sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(k + 748) + 276) + 2064), 1, a2, 11);
        result = sub_4DA7F0(k);
      }
      break;
    default:
      return result;
  }
  return result;
}

//----- (004DA2C0) --------------------------------------------------------
void __cdecl sub_4DA2C0(int a1, const char *a2, char a3)
{
  int v3; // edx
  char v4[52]; // [esp+Ch] [ebp-34h]

  if ( a1 && *(_BYTE *)(a1 + 8) & 4 && a2 && !sub_419E60(a1) && strlen(a2) && strlen(a2) <= 0x30 )
  {
    v4[2] = a3;
    v4[0] = -87;
    v4[1] = 15;
    v3 = *(_DWORD *)(a1 + 748);
    strcpy(&v4[3], a2);
    sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064), 1, v4, strlen(a2) + 4);
  }
}

//----- (004DA390) --------------------------------------------------------
int __cdecl sub_4DA390(const char *a1)
{
  int result; // eax
  int i; // esi

  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_4DA2C0(i, a1, 0);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004DA3C0) --------------------------------------------------------
int __cdecl sub_4DA3C0(_DWORD *a1)
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1556844];
  *a1 = *(_DWORD *)&byte_5D4594[1556844];
  *(_DWORD *)&byte_5D4594[1556844] = 0;
  return result;
}

//----- (004DA3E0) --------------------------------------------------------
int __cdecl sub_4DA3E0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1556844] = a1;
  return result;
}

//----- (004DA3F0) --------------------------------------------------------
BOOL __cdecl sub_4DA3F0(const char *a1, const char *a2)
{
  char *v2; // eax
  const char *v3; // edi
  const char *v4; // ebx
  char *v5; // eax
  const char *v6; // ecx
  const char *v7; // esi
  BOOL result; // eax

  strcpy((char *)&byte_5D4594[1556332], a1);
  strcpy((char *)&byte_5D4594[1556588], a2);
  v2 = strchr((const char *)&byte_5D4594[1556332], 58);
  if ( v2 )
  {
    v3 = (const char *)&byte_5D4594[1556332];
    *v2 = 0;
    v4 = v2 + 1;
  }
  else
  {
    v3 = 0;
    v4 = (const char *)&byte_5D4594[1556332];
  }
  v5 = strchr((const char *)&byte_5D4594[1556588], 58);
  if ( v5 )
  {
    v6 = (const char *)&byte_5D4594[1556588];
    *v5 = 0;
    v7 = v5 + 1;
  }
  else
  {
    v6 = 0;
    v7 = (const char *)&byte_5D4594[1556588];
  }
  if ( v3 && v6 && _strcmpi(v3, v6) )
    result = 0;
  else
    result = strcmp(v4, v7) == 0;
  return result;
}

//----- (004DA4F0) --------------------------------------------------------
int __cdecl sub_4DA4F0(char *a1)
{
  int i; // esi
  int result; // eax
  int v3; // esi
  int v4; // esi
  int v5; // esi

  if ( strchr(a1, 58) )
  {
    for ( i = sub_4DA790(); i; i = sub_4DA7A0(i) )
    {
      result = sub_4DA5C0(i, a1);
      if ( result )
        return result;
    }
    v3 = sub_4DA870();
    if ( v3 )
    {
      do
      {
        result = sub_4DA5C0(v3, a1);
        if ( result )
          break;
        result = sub_4DA880(v3);
        v3 = result;
      }
      while ( result );
      return result;
    }
    return 0;
  }
  v4 = sub_4DA790();
  if ( v4 )
  {
    while ( 1 )
    {
      result = sub_4DA660(v4, a1);
      if ( result )
        break;
      v4 = sub_4DA7A0(v4);
      if ( !v4 )
        goto LABEL_12;
    }
  }
  else
  {
LABEL_12:
    v5 = sub_4DA870();
    if ( !v5 )
      return 0;
    while ( 1 )
    {
      result = sub_4DA660(v5, a1);
      if ( result )
        break;
      v5 = sub_4DA880(v5);
      if ( !v5 )
        return 0;
    }
  }
  return result;
}

//----- (004DA5C0) --------------------------------------------------------
int __cdecl sub_4DA5C0(int a1, const char *a2)
{
  int v2; // edi

  v2 = a1;
  if ( *(_DWORD *)a1 && !strcmp(*(const char **)a1, a2) )
    return v2;
  v2 = *(_DWORD *)(a1 + 504);
  if ( v2 )
  {
    while ( !*(_DWORD *)v2 || strcmp(*(const char **)v2, a2) )
    {
      v2 = *(_DWORD *)(v2 + 496);
      if ( !v2 )
        return 0;
    }
    return v2;
  }
  return 0;
}

//----- (004DA660) --------------------------------------------------------
int __cdecl sub_4DA660(int a1, const char *a2)
{
  int i; // edi
  char *v3; // eax
  const char *v4; // esi
  const char *v5; // eax
  bool v6; // cf
  unsigned __int8 v7; // dl
  unsigned __int8 v8; // bl
  int v9; // eax
  const char *v10; // eax
  unsigned __int8 v11; // dl
  unsigned __int8 v12; // bl
  char *v14; // eax

  i = a1;
  if ( *(_DWORD *)a1 )
  {
    v3 = strchr(*(const char **)a1, 58);
    v4 = a2;
    if ( v3 )
    {
      v5 = v3 + 1;
      while ( 1 )
      {
        v6 = *v5 < (unsigned int)*v4;
        if ( *v5 != *v4 )
          break;
        if ( *v5 )
        {
          v7 = v5[1];
          v8 = v4[1];
          v6 = v7 < v8;
          if ( v7 != v8 )
            break;
          v5 += 2;
          v4 += 2;
          if ( v7 )
            continue;
        }
        v9 = 0;
        goto LABEL_16;
      }
    }
    else
    {
      v10 = *(const char **)a1;
      while ( 1 )
      {
        v6 = *v10 < (unsigned int)*v4;
        if ( *v10 != *v4 )
          break;
        if ( *v10 )
        {
          v11 = v10[1];
          v12 = v4[1];
          v6 = v11 < v12;
          if ( v11 != v12 )
            break;
          v10 += 2;
          v4 += 2;
          if ( v11 )
            continue;
        }
        v9 = 0;
        goto LABEL_16;
      }
    }
    v9 = -v6 - (v6 - 1);
LABEL_16:
    if ( !v9 )
      return i;
  }
  for ( i = *(_DWORD *)(a1 + 504); i; i = *(_DWORD *)(i + 496) )
  {
    if ( *(_DWORD *)i )
    {
      v14 = strchr(*(const char **)i, 58);
      if ( v14 )
      {
        if ( !strcmp(v14 + 1, a2) )
          return i;
      }
      else if ( !strcmp(*(const char **)i, a2) )
      {
        return i;
      }
    }
  }
  return 0;
}

//----- (004DA790) --------------------------------------------------------
int sub_4DA790()
{
  return *(_DWORD *)&byte_5D4594[1556844];
}

//----- (004DA7A0) --------------------------------------------------------
int __cdecl sub_4DA7A0(int a1)
{
  int result; // eax

  if ( a1 )
    result = *(_DWORD *)(a1 + 444);
  else
    result = 0;
  return result;
}

//----- (004DA7C0) --------------------------------------------------------
int sub_4DA7C0()
{
  char *v0; // eax

  v0 = sub_416EA0();
  if ( !v0 )
    return 0;
  while ( !*((_DWORD *)v0 + 514) )
  {
    v0 = sub_416EE0((int)v0);
    if ( !v0 )
      return 0;
  }
  return *((_DWORD *)v0 + 514);
}

//----- (004DA7F0) --------------------------------------------------------
int __cdecl sub_4DA7F0(int a1)
{
  char *v1; // eax

  if ( !a1 )
    return 0;
  if ( !(*(_BYTE *)(a1 + 8) & 4) )
    return 0;
  v1 = sub_416EE0(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276));
  if ( !v1 )
    return 0;
  while ( !*((_DWORD *)v1 + 514) )
  {
    v1 = sub_416EE0((int)v1);
    if ( !v1 )
      return 0;
  }
  return *((_DWORD *)v1 + 514);
}

//----- (004DA840) --------------------------------------------------------
int sub_4DA840()
{
  return *(_DWORD *)&byte_5D4594[1556848];
}

//----- (004DA850) --------------------------------------------------------
int __cdecl sub_4DA850(int a1)
{
  int result; // eax

  if ( a1 )
    result = *(_DWORD *)(a1 + 444);
  else
    result = 0;
  return result;
}

//----- (004DA870) --------------------------------------------------------
int sub_4DA870()
{
  return *(_DWORD *)&byte_5D4594[1556860];
}

//----- (004DA880) --------------------------------------------------------
int __cdecl sub_4DA880(int a1)
{
  int result; // eax

  if ( a1 )
    result = *(_DWORD *)(a1 + 444);
  else
    result = 0;
  return result;
}

//----- (004DA8A0) --------------------------------------------------------
int sub_4DA8A0()
{
  return *(_DWORD *)&byte_5D4594[1556852];
}

//----- (004DA8B0) --------------------------------------------------------
int __cdecl sub_4DA8B0(int a1)
{
  int result; // eax

  if ( a1 )
    result = *(_DWORD *)(a1 + 476);
  else
    result = 0;
  return result;
}

//----- (004DA8D0) --------------------------------------------------------
int __cdecl sub_4DA8D0(int a1)
{
  int result; // eax

  result = a1;
  if ( !*(_DWORD *)(a1 + 484) && !(*(_BYTE *)(a1 + 8) & 1) )
  {
    *(_DWORD *)(a1 + 480) = 0;
    *(_DWORD *)(a1 + 476) = *(_DWORD *)&byte_5D4594[1556852];
    if ( *(_DWORD *)&byte_5D4594[1556852] )
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1556852] + 480) = a1;
    *(_DWORD *)&byte_5D4594[1556852] = a1;
    *(_DWORD *)(a1 + 484) = 1;
    *(_DWORD *)(a1 + 520) = 0;
  }
  return result;
}

//----- (004DA920) --------------------------------------------------------
_DWORD *__cdecl sub_4DA920(_DWORD *a1)
{
  _DWORD *result; // eax
  int v2; // ecx
  int v3; // ecx
  int v4; // ecx

  result = a1;
  if ( a1[121] )
  {
    v2 = a1[120];
    if ( v2 )
    {
      *(_DWORD *)(v2 + 476) = a1[119];
      v3 = a1[119];
      if ( v3 )
      {
        *(_DWORD *)(v3 + 480) = a1[120];
        a1[121] = 0;
        a1[130] = 0;
        return result;
      }
    }
    else
    {
      *(_DWORD *)&byte_5D4594[1556852] = a1[119];
      v4 = a1[119];
      if ( v4 )
        *(_DWORD *)(v4 + 480) = 0;
    }
    a1[121] = 0;
    a1[130] = 0;
  }
  return result;
}

//----- (004DA9A0) --------------------------------------------------------
_DWORD *__cdecl sub_4DA9A0(_DWORD *a1)
{
  _DWORD *result; // eax
  int v2; // ecx

  result = a1;
  v2 = a1[4];
  if ( !(v2 & 0x410000) )
  {
    a1[118] = 0;
    a1[4] = v2 | 0x10000;
    a1[117] = *(_DWORD *)&byte_5D4594[1556856];
    if ( *(_DWORD *)&byte_5D4594[1556856] )
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1556856] + 472) = a1;
    *(_DWORD *)&byte_5D4594[1556856] = a1;
  }
  return result;
}

//----- (004DA9F0) --------------------------------------------------------
_DWORD *__cdecl sub_4DA9F0(_DWORD *a1)
{
  _DWORD *result; // eax
  int v2; // ecx
  int v3; // ecx
  int v4; // ecx

  result = a1;
  v2 = a1[4];
  if ( v2 & 0x10000 )
  {
    a1[4] = v2 & 0xFFFEFFFF;
    v3 = a1[118];
    if ( v3 )
      *(_DWORD *)(v3 + 468) = a1[117];
    else
      *(_DWORD *)&byte_5D4594[1556856] = a1[117];
    v4 = a1[117];
    if ( v4 )
      *(_DWORD *)(v4 + 472) = a1[118];
  }
  return result;
}

//----- (004DAA50) --------------------------------------------------------
char __cdecl sub_4DAA50(int a1, int a2, float a3, float a4)
{
  int v4; // eax
  int v5; // eax
  int v6; // ecx
  int v7; // eax

  if ( !*(_DWORD *)&byte_5D4594[1556864] )
  {
    *(_DWORD *)&byte_5D4594[1556864] = sub_4E3AA0((CHAR *)&byte_587000[199100]);
    *(_DWORD *)&byte_5D4594[1556868] = sub_4E3AA0((CHAR *)&byte_587000[199108]);
    *(_DWORD *)&byte_5D4594[1556872] = sub_4E3AA0((CHAR *)&byte_587000[199124]);
  }
  v4 = *(_DWORD *)(a1 + 16);
  if ( !(v4 & 0x24) )
  {
    *(_DWORD *)(a1 + 16) = v4 & 0x35E9FEDB;
    *(float *)(a1 + 72) = a3;
    *(float *)(a1 + 56) = a3;
    *(float *)(a1 + 64) = a3;
    *(float *)(a1 + 76) = a4;
    *(float *)(a1 + 60) = a4;
    v5 = *(_DWORD *)(a1 + 56);
    *(float *)(a1 + 68) = a4;
    *(_DWORD *)(a1 + 156) = v5;
    *(float *)(a1 + 160) = a4;
    sub_4E7290(a1);
    if ( *(_BYTE *)(a1 + 8) & 6 )
      sub_4E7F10(a1);
    if ( a2 )
      sub_4EC290(a2, a1);
    v6 = *(_DWORD *)(a1 + 16);
    *(_DWORD *)(a1 + 80) = 0;
    *(_DWORD *)(a1 + 84) = 0;
    *(_DWORD *)(a1 + 88) = 0;
    *(_DWORD *)(a1 + 92) = 0;
    *(_DWORD *)(a1 + 16) = v6 | 4;
    *(_DWORD *)(a1 + 136) = *(_DWORD *)&byte_5D4594[2598000];
    *(_DWORD *)(a1 + 128) = *(_DWORD *)&byte_5D4594[2598000];
    if ( sub_40A5C0(0x2000)
      && !sub_40A5C0(4096)
      && (*(unsigned __int16 *)(a1 + 4) == *(_DWORD *)&byte_5D4594[1556864] || *(_DWORD *)(a1 + 8) & 0x3001110)
      && !(*(_BYTE *)(a1 + 8) & 1) )
    {
      v7 = *(_DWORD *)(a1 + 16);
      LOBYTE(v7) = v7 | 0x40;
      *(_DWORD *)(a1 + 16) = v7;
    }
    *(_DWORD *)(a1 + 448) = 0;
    *(_DWORD *)(a1 + 444) = *(_DWORD *)&byte_5D4594[1556860];
    if ( *(_DWORD *)&byte_5D4594[1556860] )
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1556860] + 448) = a1;
    *(_DWORD *)&byte_5D4594[1556860] = a1;
    LOBYTE(v4) = *(_BYTE *)(a1 + 52);
    *(_DWORD *)(a1 + 16) |= 0x2000000u;
    if ( (_BYTE)v4 && (!(*(_DWORD *)(a1 + 8) & 0x10000000) || (int)*(_DWORD *)&byte_5D4594[3803228] >= 0) )
    {
      if ( sub_40A5C0(2048) || (v4 = sub_417DA0(4)) != 0 )
        LOBYTE(v4) = (unsigned int)sub_4191D0(*(_BYTE *)(a1 + 52), a1 + 48, 0, *(_DWORD *)(a1 + 36), 0);
    }
  }
  return v4;
}

//----- (004DAC00) --------------------------------------------------------
void sub_4DAC00()
{
  int v0; // esi
  int v1; // eax
  int i; // ebp
  int v3; // eax
  void (__cdecl *v4)(int, _DWORD); // eax
  unsigned int v5; // ecx
  int v6; // eax

  v0 = *(_DWORD *)&byte_5D4594[1556860];
  if ( *(_DWORD *)&byte_5D4594[1556860] )
  {
    do
    {
      v1 = *(_DWORD *)(v0 + 508);
      for ( i = *(_DWORD *)(v0 + 444); v1; v1 = *(_DWORD *)(v0 + 508) )
      {
        if ( !(*(_BYTE *)(v1 + 16) & 0x20) )
          break;
        sub_4EC290(*(_DWORD *)(v1 + 508), v0);
      }
      if ( *(_BYTE *)(v0 + 8) & 1 )
      {
        *(_DWORD *)(v0 + 448) = 0;
        *(_DWORD *)(v0 + 444) = *(_DWORD *)&byte_5D4594[1556848];
        if ( *(_DWORD *)&byte_5D4594[1556848] )
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[1556848] + 448) = v0;
        *(_DWORD *)&byte_5D4594[1556848] = v0;
      }
      else
      {
        v3 = *(_DWORD *)(v0 + 16);
        if ( v3 & 0x10000 )
        {
          *(_DWORD *)(v0 + 16) = v3 & 0xFFFEFFFF;
          sub_4DA9A0((_DWORD *)v0);
        }
        if ( *(_DWORD *)(v0 + 16) & 0x80000 && !sub_40A5C0(4096) )
          sub_4EC5E0(v0);
        if ( (*(_DWORD *)(v0 + 744) || *(float *)(v0 + 80) != 0.0 || *(float *)(v0 + 84) != 0.0)
          && (signed char)*(_BYTE *)(v0 + 8) >= 0 )
        {
          sub_4DA8D0(v0);
        }
        *(_DWORD *)(v0 + 448) = 0;
        *(_DWORD *)(v0 + 444) = *(_DWORD *)&byte_5D4594[1556844];
        if ( *(_DWORD *)&byte_5D4594[1556844] )
          *(_DWORD *)(*(_DWORD *)&byte_5D4594[1556844] + 448) = v0;
        *(_DWORD *)&byte_5D4594[1556844] = v0;
      }
      sub_517640(v0);
      if ( *(_DWORD *)(v0 + 696) )
        sub_5117F0(v0);
      v4 = *(void (__cdecl **)(int, _DWORD))(v0 + 688);
      if ( v4 )
        v4(v0, 0);
      v5 = *(_DWORD *)(v0 + 8);
      if ( v5 & 0x400000 )
      {
        if ( *(_DWORD *)(v0 + 12) & 0x18 )
          v6 = 0;
        else
          v6 = (unsigned __int8)~*(_BYTE *)(v0 + 12) >> 7;
      }
      else
      {
        v6 = (v5 >> 29) & 1;
      }
      if ( 0x800000 & v5 || !v6 )
      {
        sub_4E44F0(v0);
        if ( !(*(_DWORD *)(v0 + 8) & 0x20400000) )
          *(_DWORD *)(v0 + 148) = 0;
      }
      else
      {
        sub_4E44E0(v0);
        sub_527E00(v0);
        *(_DWORD *)(v0 + 148) = -1;
      }
      *(_DWORD *)(v0 + 16) &= 0xFDFFFFFF;
      v0 = i;
    }
    while ( i );
    *(_DWORD *)&byte_5D4594[1556860] = 0;
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1556860] = 0;
  }
}

//----- (004DADE0) --------------------------------------------------------
char __cdecl sub_4DADE0(int a1)
{
  int v1; // eax

  v1 = *(_DWORD *)(a1 + 16);
  if ( v1 & 4 )
  {
    LOBYTE(v1) = v1 & 0xFB;
    *(_DWORD *)(a1 + 16) = v1;
    sub_4E60A0(a1);
    if ( !sub_40A5C0(0x80000) )
      sub_5289D0(a1);
    sub_511810(a1);
    sub_4EC300(a1);
    sub_4EC470(a1);
    sub_517870(a1);
    sub_4DAE50(a1);
    sub_4ECFA0(a1);
    sub_511DE0(a1);
    LOBYTE(v1) = *(_BYTE *)(a1 + 8);
    if ( v1 & 6 )
      LOBYTE(v1) = sub_528990(a1);
  }
  return v1;
}

//----- (004DAE50) --------------------------------------------------------
int __cdecl sub_4DAE50(int a1)
{
  int v1; // eax
  int result; // eax
  int v3; // esi
  int v4; // eax
  int v5; // esi

  sub_4DA9F0((_DWORD *)a1);
  if ( *(_BYTE *)(a1 + 8) & 1 )
  {
    v1 = *(_DWORD *)(a1 + 448);
    if ( v1 )
    {
      *(_DWORD *)(v1 + 444) = *(_DWORD *)(a1 + 444);
      result = *(_DWORD *)(a1 + 444);
      if ( result )
        *(_DWORD *)(result + 448) = *(_DWORD *)(a1 + 448);
    }
    else
    {
      result = *(_DWORD *)(a1 + 444);
      *(_DWORD *)&byte_5D4594[1556848] = *(_DWORD *)(a1 + 444);
      v3 = *(_DWORD *)(a1 + 444);
      if ( v3 )
        *(_DWORD *)(v3 + 448) = 0;
    }
  }
  else
  {
    sub_4DA920((_DWORD *)a1);
    v4 = *(_DWORD *)(a1 + 448);
    if ( v4 )
    {
      *(_DWORD *)(v4 + 444) = *(_DWORD *)(a1 + 444);
      result = *(_DWORD *)(a1 + 444);
      if ( result )
        *(_DWORD *)(result + 448) = *(_DWORD *)(a1 + 448);
    }
    else
    {
      result = *(_DWORD *)(a1 + 444);
      *(_DWORD *)&byte_5D4594[1556844] = *(_DWORD *)(a1 + 444);
      v5 = *(_DWORD *)(a1 + 444);
      if ( v5 )
        *(_DWORD *)(v5 + 448) = 0;
    }
  }
  return result;
}

//----- (004DAF10) --------------------------------------------------------
void sub_4DAF10()
{
  _DWORD *v0; // edi
  _DWORD *v1; // esi
  int v2; // eax
  int v3; // ecx
  _DWORD *v4; // eax
  int v5; // edx
  int v6; // edx
  int v7; // ecx
  int v8; // edx
  _DWORD *v9; // eax

  v0 = *(_DWORD **)&byte_5D4594[1556860];
  v1 = *(_DWORD **)&byte_5D4594[1556860];
  if ( *(_DWORD *)&byte_5D4594[1556860] )
  {
    do
    {
      v2 = v1[2];
      if ( v2 & 0x4000 )
      {
        v3 = v1[187];
        v4 = v0;
        if ( v0 )
        {
          while ( 1 )
          {
            v5 = v4[2];
            if ( (v5 & 0x8000) != 0 )
            {
              v6 = v4[187];
              if ( *(_DWORD *)(v3 + 8) == v4[10] )
                break;
            }
            v4 = (_DWORD *)v4[111];
            if ( !v4 )
              goto LABEL_9;
          }
          *(_DWORD *)(v3 + 4) = v4;
          *(_DWORD *)(v6 + 4) = v1;
          v0 = *(_DWORD **)&byte_5D4594[1556860];
        }
      }
LABEL_9:
      if ( v1[2] & 0x400 )
      {
        v7 = v1[187];
        v8 = *(_DWORD *)(v7 + 16);
        *(_DWORD *)(v7 + 12) = 0;
        v0 = *(_DWORD **)&byte_5D4594[1556860];
        if ( v8 )
        {
          v9 = *(_DWORD **)&byte_5D4594[1556860];
          if ( *(_DWORD *)&byte_5D4594[1556860] )
          {
            while ( !(v9[2] & 0x400) || v8 != v9[10] )
            {
              v9 = (_DWORD *)v9[111];
              if ( !v9 )
                goto LABEL_17;
            }
            *(_DWORD *)(v7 + 12) = v9;
            v0 = *(_DWORD **)&byte_5D4594[1556860];
          }
        }
      }
LABEL_17:
      v1 = (_DWORD *)v1[111];
    }
    while ( v1 );
  }
}

//----- (004DAFD0) --------------------------------------------------------
_DWORD *__cdecl sub_4DAFD0(_DWORD *a1)
{
  _DWORD *result; // eax
  int v2; // ecx
  int v3; // ecx
  int v4; // ecx

  result = a1;
  v2 = a1[4];
  if ( v2 & 4 )
  {
    a1[4] = v2 & 0xFFFFFFFB;
    v3 = a1[112];
    if ( v3 )
    {
      *(_DWORD *)(v3 + 444) = a1[111];
      v4 = a1[111];
      if ( v4 )
      {
        result = (_DWORD *)a1[112];
        *(_DWORD *)(v4 + 448) = result;
      }
    }
    else
    {
      *(_DWORD *)&byte_5D4594[1556844] = a1[111];
      result = (_DWORD *)a1[111];
      if ( result )
        result[112] = 0;
    }
  }
  return result;
}

//----- (004DB030) --------------------------------------------------------
_DWORD *sub_4DB030()
{
  _DWORD *result; // eax
  _DWORD *v1; // ecx
  int v2; // edx

  result = *(_DWORD **)&byte_5D4594[1556860];
  if ( *(_DWORD *)&byte_5D4594[1556860] )
  {
    do
    {
      v1 = (_DWORD *)result[111];
      result[4] &= 0xFDFFFFFF;
      v2 = *(_DWORD *)&byte_5D4594[1556844];
      if ( *(_DWORD *)&byte_5D4594[1556844] )
      {
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1556844] + 448) = result;
        v2 = *(_DWORD *)&byte_5D4594[1556844];
      }
      result[111] = v2;
      result[112] = 0;
      *(_DWORD *)&byte_5D4594[1556844] = result;
      result = v1;
    }
    while ( v1 );
  }
  *(_DWORD *)&byte_5D4594[1556860] = 0;
  return result;
}

//----- (004DB090) --------------------------------------------------------
int sub_4DB090()
{
  return *(_DWORD *)&byte_587000[201376];
}

//----- (004DB0A0) --------------------------------------------------------
int sub_4DB0A0()
{
  byte_5D4594[1560984] = byte_5D4594[1563136];
  *(_DWORD *)&byte_5D4594[1563080] = 0;
  *(_DWORD *)&byte_5D4594[1563084] = 0;
  *(_DWORD *)&byte_5D4594[1563096] = 0;
  *(_DWORD *)&byte_5D4594[1563064] = 0;
  *(_DWORD *)&byte_5D4594[1563092] = 0;
  *(_DWORD *)&byte_5D4594[1563088] = 0;
  *(_DWORD *)&byte_5D4594[1563044] = 0;
  *(_DWORD *)&byte_5D4594[1563048] = 0;
  *(_DWORD *)&byte_5D4594[1563052] = 0;
  *(_DWORD *)&byte_5D4594[1563100] = 0;
  byte_5D4594[1563104] = byte_5D4594[1563140];
  return 1;
}

//----- (004DB100) --------------------------------------------------------
int sub_4DB100()
{
  int result; // eax

  result = 0;
  *(_DWORD *)&byte_5D4594[1563080] = 0;
  *(_DWORD *)&byte_5D4594[1563084] = 0;
  *(_DWORD *)&byte_5D4594[1563096] = 0;
  *(_DWORD *)&byte_5D4594[1563064] = 0;
  *(_DWORD *)&byte_5D4594[1563092] = 0;
  *(_DWORD *)&byte_5D4594[1563088] = 0;
  *(_DWORD *)&byte_5D4594[1563072] = 0;
  *(_DWORD *)&byte_5D4594[1563068] = 0;
  return result;
}

//----- (004DB130) --------------------------------------------------------
unsigned int __cdecl sub_4DB130(const char *a1)
{
  unsigned int result; // eax

  result = strlen(a1) + 1;
  qmemcpy(&byte_5D4594[1557900], a1, result);
  return result;
}

//----- (004DB160) --------------------------------------------------------
unsigned __int8 *sub_4DB160()
{
  return &byte_5D4594[1557900];
}

//----- (004DB170) --------------------------------------------------------
int __cdecl sub_4DB170(int a1, int a2, int a3)
{
  int result; // eax

  *(_DWORD *)&byte_5D4594[1563092] = a3;
  *(_DWORD *)&byte_5D4594[1563088] = *(_DWORD *)&byte_5D4594[2598000];
  result = a1;
  *(_DWORD *)&byte_5D4594[1563084] = a2;
  *(_DWORD *)&byte_5D4594[1563080] = a1;
  *(_DWORD *)&byte_5D4594[1563096] = a2 != 0;
  if ( !a1 )
    result = sub_4DCBD0(0);
  return result;
}

//----- (004DB1B0) --------------------------------------------------------
int sub_4DB1B0()
{
  return *(_DWORD *)&byte_5D4594[1563080];
}

//----- (004DB1C0) --------------------------------------------------------
int sub_4DB1C0()
{
  return *(_DWORD *)&byte_5D4594[1563084];
}

//----- (004DB1D0) --------------------------------------------------------
BOOL sub_4DB1D0()
{
  char *v0; // eax
  CHAR PathName[1024]; // [esp+0h] [ebp-400h]

  v0 = sub_409E10();
  nox_sprintf(PathName, (const char *)&byte_587000[199140], v0);
  return _mkdir(PathName) != -1 || errno != 2;
}

//----- (004DB220) --------------------------------------------------------
int __cdecl sub_4DB220(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1563056] = a1;
  return result;
}

//----- (004DB230) --------------------------------------------------------
int __cdecl sub_4DB230(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1563060] = a1;
  return result;
}

//----- (004DB240) --------------------------------------------------------
int sub_4DB240()
{
  return *(_DWORD *)&byte_5D4594[1563056];
}

//----- (004DB250) --------------------------------------------------------
int sub_4DB250()
{
  return *(_DWORD *)&byte_5D4594[1563060];
}

//----- (004DB260) --------------------------------------------------------
char *sub_4DB260()
{
  return (char *)&byte_5D4594[1559960];
}

//----- (004DB270) --------------------------------------------------------
unsigned int __cdecl sub_4DB270(const char *a1)
{
  unsigned int result; // eax

  result = strlen(a1) + 1;
  qmemcpy(&byte_5D4594[1559960], a1, result);
  return result;
}

//----- (004DB2A0) --------------------------------------------------------
unsigned int __cdecl sub_4DB2A0(const char *a1)
{
  char *v1; // eax
  char *v2; // eax
  char v4[24]; // [esp+4h] [ebp-418h]
  char v5[1024]; // [esp+1Ch] [ebp-400h]

  strcpy(v5, a1);
  v1 = strrchr(v5, 58);
  if ( v1 )
    *v1 = 0;
  strcpy(&v4[4], v5);
  v4[strlen(v5)] = 0;
  v2 = sub_409E10();
  nox_sprintf((char *)&byte_5D4594[1558936], (const char *)&byte_587000[199156], v2, &byte_587000[199148], &v4[4], v5);
  return _access((LPCSTR)&byte_5D4594[1558936], 0) != -1 ? (unsigned int)&byte_5D4594[1558936] : 0;
}

//----- (004DB370) --------------------------------------------------------
int __cdecl sub_4DB370(const char *a1)
{
  char *v1; // eax
  char *v2; // esi
  int v3; // eax
  int v4; // ecx
  char *v5; // eax
  char *v6; // eax
  char *v7; // eax
  unsigned int v8; // ecx
  unsigned int v9; // eax
  wchar_t *v10; // eax
  char *v12; // [esp-8h] [ebp-810h]
  char *v13; // [esp-4h] [ebp-80Ch]
  char v14[1024]; // [esp+8h] [ebp-800h]
  char v15[1024]; // [esp+408h] [ebp-400h]

  sub_478000();
  sub_4606B0();
  v1 = sub_417090(31);
  v2 = v1;
  if ( !v1 )
    return 0;
  v3 = *((_DWORD *)v1 + 514);
  if ( !v3 )
    return 0;
  if ( !a1 )
    return 0;
  v4 = *(_DWORD *)(v3 + 16);
  if ( (v4 & 0x8000) != 0 )
    return 0;
  if ( !sub_4DB1D0() )
    return 0;
  if ( !sub_4DB540((int)&byte_587000[199176]) )
    return 0;
  v5 = sub_409B40();
  if ( !sub_4DB5A0((int)&byte_587000[199184], (int)v5) )
    return 0;
  if ( !sub_4DB600(*(int *)&byte_5D4594[1563084]) )
    return 0;
  v13 = sub_409B40();
  v12 = sub_409B40();
  v6 = sub_409E10();
  nox_sprintf(v15, (const char *)&byte_587000[199200], v6, &byte_587000[199192], v12, v13);
  if ( !sub_51E010(v15, 0) )
    return 0;
  sub_4DB6A0();
  v7 = sub_409E10();
  nox_sprintf(v14, (const char *)&byte_587000[199232], v7, &byte_587000[199224]);
  v8 = *(_DWORD *)&byte_5D4594[2660684] & 0xFFFFFFF7;
  *(_DWORD *)&byte_5D4594[2660684] &= 0xFFFFFFF7;
  if ( *(_DWORD *)&byte_5D4594[1563076] )
  {
    v9 = v8;
    LOBYTE(v9) = v8 | 8;
    *(_DWORD *)&byte_5D4594[2660684] = v9;
  }
  byte_5D4594[2661961] = sub_450750();
  if ( !sub_41A140(v14, (unsigned __int8)v2[2064]) )
    return 0;
  if ( !sub_41A230(v14) )
    return 0;
  if ( strcmp(a1, (const char *)&byte_587000[199256]) )
  {
    v10 = sub_40F1D0((char *)&byte_587000[199312], 0, (const char *)&byte_587000[199264], 661);
    sub_4D9FD0(0, v10);
    if ( !sub_4DC100((int)&byte_587000[199332], (int)a1) )
      return 0;
  }
  *(_DWORD *)&byte_5D4594[1563092] = 0;
  *(_DWORD *)&byte_5D4594[1563088] = 0;
  return 1;
}

//----- (004DB540) --------------------------------------------------------
BOOL __cdecl sub_4DB540(int a1)
{
  char *v1; // eax
  char PathName[1024]; // [esp+0h] [ebp-400h]

  v1 = sub_409E10();
  nox_sprintf(PathName, (const char *)&byte_587000[199340], v1, a1);
  return _mkdir(PathName) != -1 || errno != 2;
}

//----- (004DB5A0) --------------------------------------------------------
BOOL __cdecl sub_4DB5A0(int a1, int a2)
{
  char *v2; // eax
  char PathName[1024]; // [esp+0h] [ebp-400h]

  v2 = sub_409E10();
  nox_sprintf(PathName, (const char *)&byte_587000[199352], v2, a1, a2);
  return _mkdir(PathName) != -1 || errno != 2;
}

//----- (004DB600) --------------------------------------------------------
int __cdecl sub_4DB600(int a1)
{
  char *v1; // eax
  float *v2; // esi
  _DWORD *v3; // edi
  float v4; // eax
  float v5; // ecx
  int v6; // ecx
  int v7; // eax
  int v8; // esi

  v1 = sub_417090(31);
  if ( !v1 )
    return 0;
  v2 = (float *)*((_DWORD *)v1 + 514);
  if ( !v2 )
    return 0;
  v3 = sub_4E3810((CHAR *)&byte_587000[199368]);
  if ( !v3 )
    return 0;
  v4 = v2[14];
  v5 = v2[15];
  if ( a1 )
  {
    v6 = *(_DWORD *)(a1 + 700);
    v4 = *(float *)(v6 + 80);
    v5 = *(float *)(v6 + 84);
  }
  sub_4DAA50((int)v3, 0, v4, v5);
  sub_4DAC00();
  v3[11] = *((_DWORD *)v2 + 11);
  v7 = *((_DWORD *)v2 + 129);
  if ( v7 )
  {
    do
    {
      v8 = *(_DWORD *)(v7 + 512);
      if ( *(_BYTE *)(v7 + 16) & 4 )
        sub_4EC290((int)v3, v7);
      v7 = v8;
    }
    while ( v8 );
  }
  return 1;
}

//----- (004DB6A0) --------------------------------------------------------
void sub_4DB6A0()
{
  char *v0; // eax
  char *v1; // edi
  int v2; // ebx
  int v3; // esi
  int v4; // ebp
  int v5; // eax

  v0 = sub_417090(31);
  v1 = v0;
  if ( v0 && *((_DWORD *)v0 + 514) )
  {
    if ( !*(_DWORD *)&byte_5D4594[1563124] )
      *(_DWORD *)&byte_5D4594[1563124] = sub_4E3AA0((CHAR *)&byte_587000[199388]);
    v2 = sub_4DA790();
    if ( v2 )
    {
      while ( *(unsigned __int16 *)(v2 + 4) != *(_DWORD *)&byte_5D4594[1563124] )
      {
        v2 = sub_4DA7A0(v2);
        if ( !v2 )
          return;
      }
      v3 = *(_DWORD *)(v2 + 516);
      if ( v3 )
      {
        do
        {
          v4 = *(_DWORD *)(v3 + 512);
          sub_4EC290(*((_DWORD *)v1 + 514), v3);
          if ( *(_BYTE *)(v3 + 8) & 2 )
          {
            if ( *(_BYTE *)(*(_DWORD *)(v3 + 748) + 1440) & 0x80 )
            {
              v5 = *(_DWORD *)(v3 + 12);
              LOBYTE(v5) = v5 | 0x80;
              *(_DWORD *)(v3 + 12) = v5;
              sub_4D91A0((unsigned __int8)v1[2064], v3);
              sub_417190((unsigned __int8)v1[2064], v3, 1);
            }
          }
          v3 = v4;
        }
        while ( v4 );
      }
      *(_DWORD *)(v2 + 44) = 0;
      sub_4E5CC0(v2);
    }
  }
}

//----- (004DB790) --------------------------------------------------------
char *__cdecl sub_4DB790(const char *a1)
{
  char *v1; // esi
  char *result; // eax

  sub_4DCC70(1);
  sub_40A4D0(0x8000000);
  sub_43F140(500);
  v1 = sub_4DB7E0(a1);
  sub_43F1A0();
  sub_40A540(0x8000000);
  result = v1;
  *(_DWORD *)&byte_5D4594[1563068] = *(_DWORD *)&byte_5D4594[2598000];
  return result;
}

//----- (004DB7E0) --------------------------------------------------------
char *__cdecl sub_4DB7E0(const char *a1)
{
  char *v1; // ebp
  char *result; // eax
  char *v3; // eax
  wchar_t *v4; // eax
  int v5; // eax
  char *v6; // eax
  wchar_t *v7; // eax
  char v8[20]; // [esp+Ch] [ebp-414h]
  char FileName[1024]; // [esp+20h] [ebp-400h]

  v1 = sub_417090(31);
  if ( !a1 )
    return 0;
  if ( !sub_40A5C0(2) || (result = (char *)sub_4738D0()) != 0 )
  {
    sub_4DB9C0();
    if ( !strcmp(a1, (const char *)&byte_587000[199408])
      || (result = (char *)sub_4DC100((int)a1, (int)&byte_587000[199416])) != 0 )
    {
      v3 = sub_409E10();
      nox_sprintf(FileName, (const char *)&byte_587000[199432], v3, &byte_587000[199424]);
      if ( _access(FileName, 0) == -1 )
      {
        v4 = sub_40F1D0((char *)&byte_587000[199504], 0, (const char *)&byte_587000[199456], 755);
        sub_4D9FD0(0, v4);
        result = 0;
      }
      else
      {
        v5 = sub_41D090(FileName);
        sub_4E3C60(v5);
        sub_4E3C70();
        sub_4DB220(1);
        sub_4DB230(1);
        result = sub_41A2E0(FileName, 31);
        if ( result )
        {
          sub_460E60();
          sub_4721D0();
          nox_sprintf(v8, (const char *)&byte_587000[199524], v1 + 4760);
          sub_409D70(v8);
          v6 = sub_409E10();
          nox_sprintf(
            (char *)&byte_5D4594[1559960],
            (const char *)&byte_587000[199540],
            v6,
            &byte_587000[199532],
            v1 + 4760,
            v1 + 4760);
          sub_4D2450(v8);
          sub_44E0B0(0);
          result = (char *)sub_41A480(FileName);
          if ( result )
          {
            sub_450B70();
            sub_445450();
            sub_528D60();
            v7 = sub_40F1D0((char *)&byte_587000[199612], 0, (const char *)&byte_587000[199564], 824);
            sub_4D9FD0(0, v7);
            result = (char *)1;
          }
        }
      }
    }
  }
  return result;
}

//----- (004DB9C0) --------------------------------------------------------
void sub_4DB9C0()
{
  int v0; // esi
  int v1; // edi
  int v2; // esi
  int v3; // edi

  v0 = sub_4DA790();
  if ( v0 )
  {
    do
    {
      v1 = sub_4DA7A0(v0);
      if ( sub_4E5B50(v0) )
        sub_4E5CC0(v0);
      v0 = v1;
    }
    while ( v1 );
  }
  v2 = sub_4DA840();
  if ( v2 )
  {
    do
    {
      v3 = sub_4DA850(v2);
      if ( sub_4E5B80(v2) )
        sub_4E5CC0(v2);
      v2 = v3;
    }
    while ( v3 );
  }
}

//----- (004DBA30) --------------------------------------------------------
char *__cdecl sub_4DBA30(int a1)
{
  char *result; // eax
  char *v2; // ebx
  int v3; // ebp
  int v4; // esi
  int v5; // edi
  int v6; // eax
  int v7; // esi
  int v8; // ebx
  int *v9; // ebp
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // ebx
  int *v14; // edi
  int v15; // eax
  int v16; // ebx
  int v17; // eax
  int v18; // esi
  int v19; // edi
  int v20; // esi
  int v21; // edi
  int i; // esi
  int v23; // eax
  char *v24; // [esp+Ch] [ebp-8h]
  int v25; // [esp+10h] [ebp-4h]
  int v26; // [esp+18h] [ebp+4h]

  result = sub_417090(31);
  v2 = result;
  v3 = 0;
  v24 = result;
  if ( result )
  {
    v4 = *((_DWORD *)result + 514);
    v25 = *((_DWORD *)result + 514);
    if ( v4 )
    {
      if ( !*(_DWORD *)&byte_5D4594[1563128] )
      {
        *(_DWORD *)&byte_5D4594[1563128] = sub_4E3AA0((CHAR *)&byte_587000[199624]);
        *(_DWORD *)&byte_5D4594[1563132] = sub_4E3AA0((CHAR *)&byte_587000[199644]);
      }
      if ( a1 == 1 )
      {
        v5 = sub_4DA790();
        if ( v5 )
        {
          do
          {
            v26 = sub_4DA7A0(v5);
            if ( *(unsigned __int16 *)(v5 + 4) == *(_DWORD *)&byte_5D4594[1563128] )
            {
              sub_4E7010(*((_DWORD *)v2 + 514), (float2 *)(v5 + 56));
              *(_DWORD *)(*((_DWORD *)v2 + 514) + 44) = *(_DWORD *)(v5 + 44);
              *(_DWORD *)(v5 + 44) = 0;
              sub_4E5CC0(v5);
            }
            else
            {
              v6 = *(_DWORD *)(v5 + 8);
              if ( v6 & 2 )
              {
                v7 = *(_DWORD *)(v5 + 748);
                v8 = 0;
                if ( *(_BYTE *)(v7 + 1129) )
                {
                  v9 = (int *)(v7 + 1132);
                  do
                  {
                    v10 = sub_4ECF10(*v9);
                    *v9 = v10;
                    if ( !v10 )
                      *(_BYTE *)(v7 + 1129) = 0;
                    ++v8;
                    ++v9;
                  }
                  while ( v8 < *(unsigned __int8 *)(v7 + 1129) );
                  v3 = 0;
                }
                *(_DWORD *)(v7 + 1196) = sub_4ECF10(*(_DWORD *)(v7 + 1196));
                if ( (int)*(_DWORD *)(v5 + 16) >= 0 )
                  sub_52BAF0(v5);
                v11 = sub_4ECF10(*(_DWORD *)(v7 + 392));
                if ( v11 )
                  *(_DWORD *)(v7 + 392) = *(_DWORD *)(v11 + 36);
                else
                  *(_DWORD *)(v7 + 392) = 0;
                v12 = sub_4ECF10(*(_DWORD *)(v7 + 1200));
                if ( v12 )
                  *(_DWORD *)(v7 + 1200) = *(_DWORD *)(v12 + 36);
                else
                  *(_DWORD *)(v7 + 1200) = 0;
                *(_DWORD *)(v7 + 1216) = sub_4ECF10(*(_DWORD *)(v7 + 1216));
                v13 = 0;
                if ( *(_BYTE *)(v7 + 2172) )
                {
                  v14 = (int *)(v7 + 2140);
                  do
                  {
                    v15 = sub_4ECF10(*v14);
                    if ( v15 )
                      *v14 = *(_DWORD *)(v15 + 36);
                    else
                      *(_BYTE *)(v7 + 2172) = 0;
                    ++v13;
                    ++v14;
                  }
                  while ( v13 < *(unsigned __int8 *)(v7 + 2172) );
                }
                v2 = v24;
              }
              else if ( v6 & 0x4000 )
              {
                if ( *(_DWORD *)(*(_DWORD *)(v5 + 748) + 16) )
                  sub_4E44F0(v5);
              }
              else if ( (v6 & 0x8000) == 0 )
              {
                if ( (v6 & 0x80u) != 0
                  && *(_DWORD *)(*(_DWORD *)(v5 + 748) + 12) != *(_DWORD *)(*(_DWORD *)(v5 + 748) + 4) )
                {
                  sub_4DA8D0(v5);
                }
              }
              else
              {
                v23 = *(_DWORD *)(*(_DWORD *)(v5 + 748) + 4);
                if ( v23 && *(_DWORD *)(*(_DWORD *)(v23 + 748) + 16) )
                  sub_4E44F0(v5);
              }
            }
            v5 = v26;
          }
          while ( v26 );
        }
        sub_51B0C0();
        sub_516FC0();
        if ( *(_DWORD *)&byte_5D4594[1563096] )
        {
          v16 = sub_4DA790();
          if ( v16 )
          {
            do
            {
              v3 = sub_4DA7A0(v16);
              if ( (int)*(_DWORD *)(v16 + 16) >= 0 && sub_4E5B50(v16) )
              {
                if ( *(_BYTE *)(v16 + 8) & 2 )
                {
                  v17 = *(_DWORD *)(v16 + 12);
                  if ( v17 & 0x2000 )
                  {
                    v18 = sub_4E7980(v16);
                    if ( v18 )
                    {
                      do
                      {
                        v19 = sub_4E7990(v18);
                        if ( *(unsigned __int16 *)(v18 + 4) == *(_DWORD *)&byte_5D4594[1563132] )
                          sub_4E5CC0(v18);
                        v18 = v19;
                      }
                      while ( v19 );
                    }
                  }
                }
                sub_4E5CC0(v16);
              }
              v16 = v3;
            }
            while ( v3 );
          }
          v20 = sub_4DA840();
          if ( v20 != v3 )
          {
            do
            {
              v21 = sub_4DA850(v20);
              if ( (int)*(_DWORD *)(v20 + 16) >= 0 )
              {
                if ( sub_4E5B80(v20) )
                  sub_4E5CC0(v20);
              }
              v20 = v21;
            }
            while ( v21 != v3 );
          }
          v2 = v24;
        }
        sub_4DB090();
        v4 = v25;
      }
      for ( i = *(_DWORD *)(v4 + 516); i != v3; i = *(_DWORD *)(i + 512) )
      {
        if ( *(_BYTE *)(i + 8) & 2 )
        {
          if ( *(_BYTE *)(*(_DWORD *)(i + 748) + 1440) & 0x80 )
          {
            sub_4D91A0((unsigned __int8)v2[2064], i);
LABEL_67:
            sub_417190((unsigned __int8)v2[2064], i, 1);
            continue;
          }
          if ( (*(_BYTE *)(i + 12) & 0x80) )
          {
            sub_4D9250((unsigned __int8)v2[2064], i);
            goto LABEL_67;
          }
        }
      }
      sub_4DB220(v3);
      *(_DWORD *)&byte_5D4594[1563096] = v3;
      result = (char *)sub_416D40();
    }
  }
  return result;
}

//----- (004DBE10) --------------------------------------------------------
int __cdecl sub_4DBE10(int a1, int a2)
{
  int result; // eax
  char *v3; // eax
  int v4; // ebx
  HANDLE v5; // ebp
  char *v6; // ebp
  char *v7; // edx
  char *v8; // esi
  int v9; // ebp
  HANDLE v10; // ebx
  char *v11; // ebx
  char *v12; // edx
  char *v13; // esi
  bool v14; // zf
  char *v15; // eax
  HANDLE hFindFile; // [esp+0h] [ebp-2494Ch]
  HANDLE hFindFilea; // [esp+0h] [ebp-2494Ch]
  char *v18; // [esp+4h] [ebp-24948h]
  int v19; // [esp+8h] [ebp-24944h]
  struct _WIN32_FIND_DATAA FindFileData; // [esp+Ch] [ebp-24940h]
  CHAR PathName[1024]; // [esp+14Ch] [ebp-24800h]
  CHAR FileName[1024]; // [esp+54Ch] [ebp-24400h]
  char v23[16384]; // [esp+94Ch] [ebp-24000h]
  char v24[131072]; // [esp+494Ch] [ebp-20000h]

  result = a1;
  if ( a1 )
  {
    v3 = sub_409E10();
    nox_sprintf(&PathName, (const char *)&byte_587000[199652], v3, a1);
    result = _access(&PathName, 0);
    if ( result != -1 )
    {
      nox_sprintf(&FileName, (const char *)&byte_587000[199664], &PathName);
      DeleteFileA(&FileName);
      SetCurrentDirectoryA(&PathName);
      v4 = 0;
      v5 = FindFirstFileA((LPCSTR)&byte_587000[199680], &FindFileData);
      hFindFile = v5;
      if ( v5 != (HANDLE)-1 )
      {
        if ( FindFileData.dwFileAttributes & 0x10
          && strcmp(FindFileData.cFileName, (const char *)&byte_587000[199684])
          && strcmp(FindFileData.cFileName, (const char *)&byte_587000[199688]) )
        {
          v4 = 1;
          strcpy(v24, FindFileData.cFileName);
        }
        if ( FindNextFileA(v5, &FindFileData) )
        {
          v6 = &v24[1024 * v4];
          do
          {
            if ( FindFileData.dwFileAttributes & 0x10
              && strcmp(FindFileData.cFileName, (const char *)&byte_587000[199692])
              && strcmp(FindFileData.cFileName, (const char *)&byte_587000[199696]) )
            {
              v7 = v6;
              ++v4;
              v6 += 1024;
              strcpy(v7, FindFileData.cFileName);
            }
          }
          while ( FindNextFileA(hFindFile, &FindFileData) );
          v5 = hFindFile;
        }
        FindClose(v5);
      }
      if ( v4 > 0 )
      {
        v8 = v24;
        v19 = v4;
        v18 = v24;
        do
        {
          SetCurrentDirectoryA(v8);
          v9 = 0;
          v10 = FindFirstFileA((LPCSTR)&byte_587000[199700], &FindFileData);
          hFindFilea = v10;
          if ( v10 != (HANDLE)-1 )
          {
            if ( !(FindFileData.dwFileAttributes & 0x10) )
            {
              v9 = 1;
              strcpy(v23, FindFileData.cFileName);
            }
            if ( FindNextFileA(v10, &FindFileData) )
            {
              v11 = &v23[1024 * v9];
              do
              {
                if ( !(FindFileData.dwFileAttributes & 0x10) )
                {
                  v12 = v11;
                  ++v9;
                  v11 += 1024;
                  strcpy(v12, FindFileData.cFileName);
                }
              }
              while ( FindNextFileA(hFindFilea, &FindFileData) );
              v10 = hFindFilea;
            }
            FindClose(v10);
            if ( v9 > 0 )
            {
              v13 = v23;
              do
              {
                DeleteFileA(v13);
                v13 += 1024;
                --v9;
              }
              while ( v9 );
            }
            v8 = v18;
          }
          SetCurrentDirectoryA((LPCSTR)&byte_587000[199704]);
          RemoveDirectoryA(v8);
          v8 += 1024;
          v14 = v19 == 1;
          v18 = v8;
          --v19;
        }
        while ( !v14 );
      }
      v15 = sub_409E10();
      SetCurrentDirectoryA(v15);
      result = a2;
      if ( a2 )
        result = RemoveDirectoryA(&PathName);
    }
  }
  return result;
}
// 4DBE10: using guessed type CHAR var_20000[131072];
// 4DBE10: using guessed type CHAR var_24000[16384];

//----- (004DC100) --------------------------------------------------------
int __cdecl sub_4DC100(int a1, int a2)
{
  char *v2; // eax
  char *v3; // eax
  int result; // eax
  int v5; // ebp
  HANDLE v6; // ebx
  char *v7; // ebx
  char *v8; // edx
  int v9; // esi
  char *v10; // edi
  char *v11; // edi
  int v12; // ebp
  HANDLE v13; // ebx
  char *v14; // ebx
  char *v15; // edx
  char *v16; // esi
  bool v17; // cc
  char *v18; // eax
  HANDLE hFindFile; // [esp+10h] [ebp-25154h]
  HANDLE hFindFilea; // [esp+10h] [ebp-25154h]
  int v21; // [esp+14h] [ebp-25150h]
  char *v22; // [esp+18h] [ebp-2514Ch]
  int v23; // [esp+1Ch] [ebp-25148h]
  int v24; // [esp+20h] [ebp-25144h]
  struct _WIN32_FIND_DATAA FindFileData; // [esp+24h] [ebp-25140h]
  CHAR PathName[1024]; // [esp+164h] [ebp-25000h]
  CHAR NewFileName[1024]; // [esp+564h] [ebp-24C00h]
  CHAR ExistingFileName[1024]; // [esp+964h] [ebp-24800h]
  CHAR v29[1024]; // [esp+D64h] [ebp-24400h]
  char v30[16384]; // [esp+1164h] [ebp-24000h]
  char v31[131072]; // [esp+5164h] [ebp-20000h]

  v24 = 1;
  v2 = sub_409E10();
  nox_sprintf(&PathName, (const char *)&byte_587000[199708], v2, a1);
  v3 = sub_409E10();
  nox_sprintf(&v29, (const char *)&byte_587000[199720], v3, a2);
  if ( !sub_4DB540(a2) )
    return 0;
  sub_4DBE10(a2, 0);
  nox_sprintf(&ExistingFileName, (const char *)&byte_587000[199732], &PathName);
  nox_sprintf(&NewFileName, (const char *)&byte_587000[199748], &v29);
  result = CopyFileA(&ExistingFileName, &NewFileName, 0);
  if ( result )
  {
    result = SetCurrentDirectoryA(&PathName);
    if ( result )
    {
      v5 = 0;
      v21 = 0;
      v6 = FindFirstFileA((LPCSTR)&byte_587000[199764], &FindFileData);
      hFindFile = v6;
      if ( v6 == (HANDLE)-1 )
        goto LABEL_48;
      if ( FindFileData.dwFileAttributes & 0x10
        && strcmp(FindFileData.cFileName, (const char *)&byte_587000[199768])
        && strcmp(FindFileData.cFileName, (const char *)&byte_587000[199772]) )
      {
        v21 = 1;
        strcpy(v31, FindFileData.cFileName);
        v5 = 1;
      }
      if ( FindNextFileA(v6, &FindFileData) )
      {
        v7 = &v31[1024 * v5];
        do
        {
          if ( FindFileData.dwFileAttributes & 0x10
            && strcmp(FindFileData.cFileName, (const char *)&byte_587000[199776])
            && strcmp(FindFileData.cFileName, (const char *)&byte_587000[199780]) )
          {
            v8 = v7;
            ++v5;
            v7 += 1024;
            strcpy(v8, FindFileData.cFileName);
          }
        }
        while ( FindNextFileA(hFindFile, &FindFileData) );
        v6 = hFindFile;
        v21 = v5;
      }
      result = FindClose(v6);
      if ( result )
      {
LABEL_48:
        result = SetCurrentDirectoryA(&v29);
        if ( result )
        {
          v9 = 0;
          if ( v5 > 0 )
          {
            v10 = v31;
            while ( CreateDirectoryA(v10, 0) )
            {
              ++v9;
              v10 += 1024;
              if ( v9 >= v5 )
                goto LABEL_24;
            }
            return 0;
          }
LABEL_24:
          result = SetCurrentDirectoryA(&PathName);
          if ( result )
          {
            v23 = 0;
            if ( v5 > 0 )
            {
              v11 = v31;
              v22 = v31;
              while ( SetCurrentDirectoryA(v11) )
              {
                v12 = 0;
                v13 = FindFirstFileA((LPCSTR)&byte_587000[199784], &FindFileData);
                hFindFilea = v13;
                if ( v13 != (HANDLE)-1 )
                {
                  if ( !(FindFileData.dwFileAttributes & 0x10) )
                  {
                    v12 = 1;
                    strcpy(v30, FindFileData.cFileName);
                    v11 = v22;
                  }
                  if ( FindNextFileA(v13, &FindFileData) )
                  {
                    v14 = &v30[1024 * v12];
                    do
                    {
                      if ( !(FindFileData.dwFileAttributes & 0x10) )
                      {
                        v15 = v14;
                        ++v12;
                        v14 += 1024;
                        strcpy(v15, FindFileData.cFileName);
                      }
                    }
                    while ( FindNextFileA(hFindFilea, &FindFileData) );
                    v13 = hFindFilea;
                    v11 = v22;
                  }
                  if ( !FindClose(v13) )
                    return 0;
                  if ( v12 > 0 )
                  {
                    v16 = v30;
                    do
                    {
                      nox_sprintf(&ExistingFileName, (const char *)&byte_587000[199788], &PathName, v11, v16);
                      nox_sprintf(&NewFileName, (const char *)&byte_587000[199800], &v29, v11, v16);
                      if ( !CopyFileA(&ExistingFileName, &NewFileName, 0) )
                        v24 = 0;
                      v16 += 1024;
                      --v12;
                    }
                    while ( v12 );
                  }
                }
                if ( !SetCurrentDirectoryA((LPCSTR)&byte_587000[199812]) )
                  return 0;
                v11 += 1024;
                v17 = ++v23 < v21;
                v22 = v11;
                if ( !v17 )
                  goto LABEL_45;
              }
              return 0;
            }
LABEL_45:
            v18 = sub_409E10();
            result = SetCurrentDirectoryA(v18) ? v24 : 0;
          }
        }
      }
    }
  }
#ifdef __EMSCRIPTEN__
  EM_ASM(FS.syncfs(false,function (err) {}));
#endif
  return result;
}
// 4DC100: using guessed type CHAR var_20000[131072];
// 4DC100: using guessed type char var_24000[16384];

//----- (004DC550) --------------------------------------------------------
int sub_4DC550()
{
  int v0; // ebx
  char *v1; // edi
  char *v5; // eax
  int v6; // esi
  char *v7; // eax
  char PathName[1024]; // [esp+Ch] [ebp-400h]

  v0 = 0;
  v1 = sub_409E10();
  strcpy(PathName, v1);
  strcat(PathName, "\\Save\\");
  CreateDirectoryA(PathName, 0);
  v5 = sub_409E10();
  nox_sprintf(PathName, "%s\\Save\\AUTOSAVE\\Player.plr", v5);
  if ( _access(PathName, 0) != -1 )
    v0 = 1;
  v6 = 13;
  do
  {
    v7 = sub_409E10();
    nox_sprintf(PathName, "%s\\Save\\SAVE%04d\\Player.plr", v7, v0);
    if ( _access(PathName, 0) != -1 )
      ++v0;
    --v6;
  }
  while ( v6 );
  return v0;
}
// 4DC550: using guessed type CHAR PathName[1024];

//----- (004DC630) --------------------------------------------------------
int sub_4DC630()
{
  int v0; // ebp
  char *v1; // edi
  HANDLE v5; // esi
  char *v6; // eax
  struct _WIN32_FIND_DATAA FindFileData; // [esp+10h] [ebp-E40h]
  char PathName[1024]; // [esp+150h] [ebp-D00h]
  char v10[1280]; // [esp+550h] [ebp-900h]
  char v11[1024]; // [esp+A50h] [ebp-400h]

  v0 = 0;
  v1 = sub_409E10();
  strcpy(PathName, v1);
  strcat(PathName, "\\Save\\");
  strcpy(v11, PathName);
  CreateDirectoryA(PathName, 0);
  SetCurrentDirectoryA(PathName);
  v5 = FindFirstFileA("*.plr", &FindFileData);
  if ( v5 != (HANDLE)-1 )
  {
    if ( !(FindFileData.dwFileAttributes & 0x10) )
    {
      nox_sprintf(PathName, "%s%s", v11, FindFileData.cFileName);
      sub_41A000(PathName, v10);
      if ( v10[0] & 2 )
        v0 = 1;
    }
    while ( FindNextFileA(v5, &FindFileData) )
    {
      if ( !(FindFileData.dwFileAttributes & 0x10) )
      {
        nox_sprintf(PathName, "%s%s", v11, FindFileData.cFileName);
        sub_41A000(PathName, v10);
        if ( v10[0] & 2 )
          ++v0;
      }
    }
    FindClose(v5);
  }
  v6 = sub_409E10();
  SetCurrentDirectoryA(v6);
  return v0;
}
// 4DC630: using guessed type CHAR PathName[1024];

//----- (004DC7D0) --------------------------------------------------------
int sub_4DC7D0()
{
  int v0; // ebp
  char *v1; // edi
  HANDLE v5; // esi
  char *v6; // eax
  struct _WIN32_FIND_DATAA FindFileData; // [esp+10h] [ebp-E40h]
  char PathName[1024]; // [esp+150h] [ebp-D00h]
  char v10[1280]; // [esp+550h] [ebp-900h]
  char v11[1024]; // [esp+A50h] [ebp-400h]

  v0 = 0;
  v1 = sub_409E10();
  strcpy(PathName, v1);
  strcat(PathName, "\\Save\\");
  strcpy(v11, PathName);
  CreateDirectoryA(PathName, 0);
  SetCurrentDirectoryA(PathName);
  v5 = FindFirstFileA((LPCSTR)&byte_587000[199920], &FindFileData);
  if ( v5 != (HANDLE)-1 )
  {
    if ( !(FindFileData.dwFileAttributes & 0x10) )
    {
      nox_sprintf(PathName, (const char *)&byte_587000[199928], v11, FindFileData.cFileName);
      sub_41A000(PathName, v10);
      if ( v10[0] & 4 )
        v0 = 1;
    }
    while ( FindNextFileA(v5, &FindFileData) )
    {
      if ( !(FindFileData.dwFileAttributes & 0x10) )
      {
        nox_sprintf(PathName, (const char *)&byte_587000[199936], v11, FindFileData.cFileName);
        sub_41A000(PathName, v10);
        if ( v10[0] & 4 )
          ++v0;
      }
    }
    FindClose(v5);
  }
  v6 = sub_409E10();
  SetCurrentDirectoryA(v6);
  return v0;
}
// 4DC7D0: using guessed type CHAR PathName[1024];

//----- (004DC970) --------------------------------------------------------
char *__cdecl sub_4DC970(char *a1, char *a2)
{
  char *result; // eax

  result = a1;
  if ( a1 && a2 )
  {
    result = strrchr(a1, 92);
    if ( result )
    {
      result = strncpy(a2, result - 8, 8u);
      a2[8] = 0;
    }
  }
  return result;
}

//----- (004DC9B0) --------------------------------------------------------
char *__cdecl sub_4DC9B0(char *a1)
{
  char *result; // eax
  char v2[12]; // [esp+0h] [ebp-Ch]

  if ( !a1 )
    return (char *)-1;
  result = strrchr(a1, 92);
  if ( result )
  {
    strncpy(v2, result - 4, 4u);
    v2[4] = 0;
    result = (char *)atoi(v2);
  }
  return result;
}

//----- (004DCA00) --------------------------------------------------------
char *sub_4DCA00()
{
  unsigned int v0; // ebp
  char *v1; // eax
  HANDLE v2; // ebx
  char *v3; // eax
  char *v4; // eax
  struct _WIN32_FIND_DATAA FindFileData; // [esp+8h] [ebp-D40h]
  CHAR FileName[1024]; // [esp+148h] [ebp-C00h]
  CHAR PathName[1024]; // [esp+548h] [ebp-800h]
  CHAR Buffer[1024]; // [esp+948h] [ebp-400h]

  v0 = 2;
  GetCurrentDirectoryA(0x400u, Buffer);
  v1 = sub_409E10();
  nox_sprintf(PathName, "%s\\Save\\", v1);
  SetCurrentDirectoryA(PathName);
  v2 = FindFirstFileA("*", &FindFileData);
  if ( v2 != (HANDLE)-1 )
  {
    if ( FindFileData.dwFileAttributes & 0x10 )
    {
      if ( strcmp(FindFileData.cFileName, "..") )
      {
        if ( strcmp(FindFileData.cFileName, ".") )
        {
          nox_sprintf(FileName, "%s%s\\Player.plr", PathName, FindFileData.cFileName);
          if ( _access(FileName, 0) != -1 )
          {
            v3 = sub_4DC9B0(FileName);
            if ( (unsigned int)v3 >= 2 )
              v0 = (unsigned int)(v3 + 1);
          }
        }
      }
    }
    while ( FindNextFileA(v2, &FindFileData) )
    {
      if ( FindFileData.dwFileAttributes & 0x10 )
      {
        if ( strcmp(FindFileData.cFileName, "..") )
        {
          if ( strcmp(FindFileData.cFileName, ".") )
          {
            nox_sprintf(FileName, "%s%s\\Player.plr", PathName, FindFileData.cFileName);
            if ( _access(FileName, 0) != -1 )
            {
              v4 = sub_4DC9B0(FileName);
              if ( (unsigned int)v4 >= v0 )
                v0 = (unsigned int)(v4 + 1);
            }
          }
        }
      }
    }
    FindClose(v2);
  }
  SetCurrentDirectoryA(Buffer);
  if ( v0 > 0x270F )
    return 0;
  nox_sprintf((char *)&byte_5D4594[1563032], (const char *)&byte_587000[200008], v0);
  return (char *)&byte_5D4594[1563032];
}

//----- (004DCBD0) --------------------------------------------------------
int __cdecl sub_4DCBD0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1563076] = a1;
  return result;
}

//----- (004DCBE0) --------------------------------------------------------
int sub_4DCBE0()
{
  return *(_DWORD *)&byte_5D4594[1563076];
}

//----- (004DCBF0) --------------------------------------------------------
int __cdecl sub_4DCBF0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1563064] = a1;
  return result;
}

//----- (004DCC00) --------------------------------------------------------
int sub_4DCC00()
{
  return *(_DWORD *)&byte_5D4594[1563064];
}

//----- (004DCC10) --------------------------------------------------------
int __cdecl sub_4DCC10(int a1)
{
  int v1; // esi
  int v2; // eax
  int result; // eax

  v1 = 1;
  if ( *(_DWORD *)&byte_5D4594[1563092]
    && (unsigned int)(*(_DWORD *)&byte_5D4594[1563092] + *(_DWORD *)&byte_5D4594[1563088]) > *(int *)&byte_5D4594[2598000] )
  {
    v1 = 0;
  }
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 748) + 284) )
    v1 = 0;
  v2 = *(_DWORD *)(a1 + 16);
  if ( v2 & 2 )
    v1 = 0;
  if ( (v2 & 0x8000) != 0 )
    v1 = 0;
  if ( sub_45D9B0() == 1 )
    result = 0;
  else
    result = v1;
  return result;
}

//----- (004DCC70) --------------------------------------------------------
int __cdecl sub_4DCC70(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1563072] = a1;
  return result;
}

//----- (004DCC80) --------------------------------------------------------
int sub_4DCC80()
{
  return *(_DWORD *)&byte_5D4594[1563072];
}

//----- (004DCC90) --------------------------------------------------------
BOOL sub_4DCC90()
{
  BOOL result; // eax

  result = 1;
  if ( *(_DWORD *)&byte_5D4594[1563080] != 1 )
    result = *(_DWORD *)&byte_5D4594[1563092] != 0;
  return result;
}

//----- (004DCCB0) --------------------------------------------------------
BOOL sub_4DCCB0()
{
  BOOL result; // eax
  char *v1; // eax
  int v2; // esi
  int v3; // eax

  if ( !sub_40A5C0(2048) )
    return 1;
  v1 = sub_417090(31);
  if ( !v1
    || (v2 = *((_DWORD *)v1 + 514)) == 0
    || sub_4DCC90()
    || sub_4139B0()
    || (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)&byte_5D4594[1563068]) < 0x1E
    || sub_477600()
    || (v3 = *(_DWORD *)(v2 + 16), BYTE1(v3) & 0x40) )
  {
    result = 0;
  }
  else
  {
    result = sub_4DCC10(v2) != 0;
  }
  return result;
}

//----- (004DCD40) --------------------------------------------------------
int sub_4DCD40()
{
  char *v0; // eax
  int result; // eax
  int i; // esi
  int v3; // eax
  int v4; // edi
  CHAR FileName[1024]; // [esp+4h] [ebp-400h]

  *(_DWORD *)&byte_5D4594[1563048] = sub_416A00();
  sub_4169E0();
  *(_DWORD *)&byte_5D4594[1563044] = 1;
  v0 = sub_409E10();
  nox_sprintf(FileName, (const char *)&byte_587000[200020], v0);
  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    v3 = *(_DWORD *)(i + 748);
    v4 = *(_DWORD *)(v3 + 276);
    if ( *(_DWORD *)(v4 + 4792) && *(_DWORD *)(v3 + 552) != 1 )
    {
      if ( sub_41A140(FileName, *(unsigned __int8 *)(v4 + 2064)) )
        sub_41CFA0(FileName, *(unsigned __int8 *)(v4 + 2064));
      DeleteFileA(FileName);
    }
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004DCE00) --------------------------------------------------------
int sub_4DCE00()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1563044];
  if ( *(_DWORD *)&byte_5D4594[1563044] )
  {
    result = sub_419F00();
    if ( !result )
    {
      result = sub_4DCE30();
      *(_DWORD *)&byte_5D4594[1563044] = 0;
    }
  }
  return result;
}

//----- (004DCE30) --------------------------------------------------------
int sub_4DCE30()
{
  if ( !*(_DWORD *)&byte_5D4594[1563048] )
    sub_4169F0();
  return sub_446140();
}

//----- (004DCE60) --------------------------------------------------------
int __cdecl sub_4DCE60(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1563100] = a1;
  return result;
}

//----- (004DCE70) --------------------------------------------------------
int sub_4DCE70()
{
  return *(_DWORD *)&byte_5D4594[1563100];
}

//----- (004DCE80) --------------------------------------------------------
int __cdecl sub_4DCE80(const char *a1)
{
  int result; // eax

  result = 0;
  if ( a1 )
  {
    strcpy((char *)&byte_5D4594[1563104], a1);
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1563104] = 0;
    *(_DWORD *)&byte_5D4594[1563108] = 0;
    *(_DWORD *)&byte_5D4594[1563112] = 0;
    *(_DWORD *)&byte_5D4594[1563116] = 0;
    *(_DWORD *)&byte_5D4594[1563120] = 0;
  }
  return result;
}

//----- (004DCED0) --------------------------------------------------------
unsigned __int8 *sub_4DCED0()
{
  return &byte_5D4594[1563104];
}

//----- (004DCEE0) --------------------------------------------------------
void __cdecl sub_4DCEE0(const char *a1)
{
  if ( a1 )
  {
    strcpy((char *)&byte_5D4594[1560984], a1);
    *(_DWORD *)&byte_5D4594[1563052] = 1;
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1563052] = 0;
  }
}

//----- (004DCF20) --------------------------------------------------------
int sub_4DCF20()
{
  char *v0; // esi
  int result; // eax

  v0 = sub_417090(31);
  result = *(_DWORD *)&byte_5D4594[1563052];
  if ( *(_DWORD *)&byte_5D4594[1563052] )
  {
    result = sub_4D6FC0();
    if ( !result )
    {
      if ( v0 )
      {
        if ( v0[3680] & 0x10 )
        {
          sub_41A2E0((char *)&byte_5D4594[1560984], 31);
          *(_DWORD *)&byte_5D4594[1563052] = 0;
          result = DeleteFileA((LPCSTR)&byte_5D4594[1560984]);
        }
      }
    }
  }
  return result;
}

//----- (004DCF80) --------------------------------------------------------
int __cdecl sub_4DCF80(int a1, char a2)
{
  int v2; // ecx
  char v4[3]; // [esp+0h] [ebp-4h]
  char v5; // [esp+3h] [ebp-1h]

  v5 = HIBYTE(v2);
  v4[0] = -16;
  v4[1] = 28;
  v4[2] = a2;
  return sub_4E5390(a1, (int)v4, 3, 0, 0);
}

//----- (004DCFB0) --------------------------------------------------------
char __cdecl sub_4DCFB0(int a1)
{
  char result; // al
  int v2; // edi
  int v3; // esi
  int v4; // ecx
  char *v5; // eax
  CHAR FileName[1024]; // [esp+8h] [ebp-400h]

  result = a1;
  v2 = 1;
  if ( a1 )
  {
    v3 = *(_DWORD *)(a1 + 748);
    v4 = *(_DWORD *)(v3 + 276);
    result = *(_BYTE *)(v4 + 2064);
    if ( result != 31 )
    {
      if ( *(_DWORD *)(v4 + 4792) && *(_DWORD *)(v3 + 552) != 1 )
      {
        if ( sub_419EE0(*(_BYTE *)(v4 + 2064)) )
          goto LABEL_13;
        v5 = sub_409E10();
        nox_sprintf(FileName, (const char *)&byte_587000[200040], v5);
        if ( sub_41A140(FileName, *(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064)) )
          v2 = sub_41CFA0(FileName, *(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064));
        result = DeleteFileA(FileName);
        if ( v2 )
LABEL_13:
          result = sub_4D7960(*(_BYTE *)(*(_DWORD *)(v3 + 276) + 2064));
      }
      else
      {
        result = (unsigned int)sub_4DEAB0(*(unsigned __int8 *)(v4 + 2064), 4);
      }
    }
  }
  return result;
}

//----- (004DD0B0) --------------------------------------------------------
char *__cdecl sub_4DD0B0(int a1)
{
  char *result; // eax
  int v2; // esi

  result = (char *)a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 748);
    if ( sub_4D7980(*(_BYTE *)(*(_DWORD *)(v2 + 276) + 2064)) )
    {
      result = sub_4DEAB0(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), 4);
    }
    else
    {
      sub_419EB0(*(_BYTE *)(*(_DWORD *)(v2 + 276) + 2064), 0);
      result = (char *)sub_4DCF80(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), 0);
    }
  }
  return result;
}

//----- (004DD130) --------------------------------------------------------
void sub_4DD130()
{
  srand(0x49C3B96u);
}

//----- (004DD140) --------------------------------------------------------
LPVOID __cdecl sub_4DD140(int a1)
{
  LPVOID result; // eax
  int v3; // [esp+0h] [ebp-4h]

  result = sub_4464D0(1, &v3);
  if ( result )
    result = (LPVOID)sub_40BC60(a1, 1, (const char *)&byte_587000[200060], (int)result, v3, 1);
  return result;
}

//----- (004DD180) --------------------------------------------------------
char *__cdecl sub_4DD180(int a1)
{
  char *result; // eax
  char *v2; // edi
  int v3; // eax
  int i; // esi
  int v5; // eax

  result = sub_417090(a1);
  v2 = result;
  if ( result )
  {
    sub_4174F0((int)result, 16);
    if ( sub_40A5C0(0x2000) && !sub_40A5C0(128) )
    {
      v3 = *((_DWORD *)v2 + 514);
      if ( v3 )
      {
        sub_4FF5B0(v3, 23);
        sub_4FF380(*((_DWORD *)v2 + 514), 23, 5 * *(_WORD *)&byte_5D4594[2649704], 5);
      }
      for ( i = sub_4DA790(); i; i = sub_4DA7A0(i) )
      {
        if ( *(_DWORD *)(i + 8) & 0x10000000 )
          sub_417190(a1, i, 1);
      }
    }
    if ( (v2[3680] & 1) == 1 )
    {
      v5 = *((_DWORD *)v2 + 514);
      *((_DWORD *)v2 + 908) = *(_DWORD *)(v5 + 56);
      *((_DWORD *)v2 + 909) = *(_DWORD *)(v5 + 60);
      if ( sub_40A5C0(512) )
        sub_4E6AA0((int)v2);
    }
    sub_4DF1E0(a1);
    if ( sub_40A5C0(4096) && sub_40A300() == 1 )
      sub_4D9E70(a1);
    if ( a1 == 31 && sub_40A5C0(128) )
    {
      if ( !*(_DWORD *)&byte_5D4594[3596] && sub_43AF70() == 1 )
      {
        sub_49C820();
        return (char *)sub_4D9C20(*((_DWORD *)v2 + 514));
      }
      if ( *(_DWORD *)&byte_587000[54276] == 1 )
      {
        sub_49C560();
        return (char *)sub_4D9C20(*((_DWORD *)v2 + 514));
      }
      sub_457500();
    }
    result = (char *)sub_4D9C20(*((_DWORD *)v2 + 514));
  }
  return result;
}

//----- (004DD310) --------------------------------------------------------
void sub_4DD310()
{
  *(_DWORD *)&byte_5D4594[1563280] = 1;
}

//----- (004DD320) --------------------------------------------------------
_DWORD *__cdecl sub_4DD320(int a1, int a2)
{
  unsigned __int8 v2; // si
  int v3; // esi
  _DWORD *result; // eax
  char *v5; // esi
  unsigned __int8 *v6; // eax
  char v7; // al
  char *v8; // ebp
  unsigned int v9; // ecx
  int v10; // eax
  int v11; // eax
  void *v12; // eax
  int v13; // esi
  int v14; // edx
  int v15; // edi
  int v16; // eax
  int v17; // ecx
  int v18; // eax
  int v19; // edx
  size_t v20; // eax
  int v21; // eax
  int v22; // eax
  int v23; // ecx
  char *v24; // eax
  int v25; // [esp-1Ch] [ebp-F4h]
  int v26; // [esp-8h] [ebp-E0h]
  int v27; // [esp+Ch] [ebp-CCh]
  float2 v28; // [esp+10h] [ebp-C8h]
  char v29[60]; // [esp+18h] [ebp-C0h]
  char v30[132]; // [esp+54h] [ebp-84h]

  v2 = *(_BYTE *)(a2 + 152);
  *(_BYTE *)(a2 + 152) = v2 & 0x7F;
  v3 = v2 >> 7;
  if ( a1 != 31 )
  {
    result = (_DWORD *)sub_40A5C0(4096);
    if ( !result && v3 == 1 )
      return result;
    if ( sub_40A5C0(4096) && !v3 )
      return 0;
  }
  v5 = sub_416640();
  sub_40ED10(a1, 1);
  sub_4E4F40(a1);
  sub_4E4F30(a1);
  if ( *(_BYTE *)(a2 + 67) )
  {
    v6 = &byte_587000[200088];
  }
  else if ( *(_DWORD *)&byte_5D4594[1563280] )
  {
    v6 = &byte_587000[200068];
  }
  else
  {
    v6 = &byte_587000[200076];
  }
  result = sub_4E3810((CHAR *)v6);
  v27 = (int)result;
  if ( result )
  {
    if ( a1 != 31 )
    {
      v7 = v5[100];
      if ( v7 )
      {
        if ( (unsigned __int8)(1 << *(_BYTE *)(a2 + 66)) & (unsigned __int8)v7 )
          return 0;
      }
    }
    v8 = sub_417000(a1);
    v8[2064] = a1;
    if ( (int)v5[102] >= 0 )
    {
      *((_WORD *)v8 + 5) = *(_DWORD *)(a2 + 97) >> 1;
      v10 = *(_DWORD *)(a2 + 101) >> 1;
    }
    else
    {
      v9 = *(_DWORD *)(a2 + 97);
      if ( *(_DWORD *)&byte_5D4594[3805496] >= (int)v9 )
      {
        *((_WORD *)v8 + 5) = v9 >> 1;
        *((_WORD *)v8 + 6) = *(_DWORD *)(a2 + 101) >> 1;
LABEL_23:
        strcpy(v8 + 2112, (const char *)(a2 + 105));
        v8[2135] = *(_BYTE *)(a2 + 152);
        nox_swprintf((wchar_t *)v8 + 1036, (const wchar_t *)&byte_587000[200104], a2 + 142);
        strcpy(v8 + 2096, (const char *)(a2 + 128));
        v11 = *(_DWORD *)(a2 + 138);
        *((_DWORD *)v8 + 517) = v11;
        if ( v11 )
        {
          v12 = sub_425A70(v11);
          if ( !v12 )
            v12 = sub_425AD0(*((_DWORD *)v8 + 517), (wchar_t *)v8 + 1036);
          sub_425B30((int)v12, a1);
        }
        *((_DWORD *)v8 + 899) = *(_DWORD *)&byte_5D4594[2598000];
        v8[3676] = 2;
        *((_DWORD *)v8 + 920) = 0;
        qmemcpy(v8 + 2185, (const void *)a2, 0x61u);
        nox_wcscpy((wchar_t *)v8 + 2352, (const wchar_t *)(v8 + 2185));
        *((_WORD *)v8 + 1137) = 0;
        sub_4DDA00((int)v8);
        sub_461460((int)v8);
        v13 = v27;
        *((_DWORD *)v8 + 514) = v27;
        v14 = *(_DWORD *)(v13 + 36);
        *((_DWORD *)v8 + 538) = 0;
        *((_DWORD *)v8 + 515) = v14;
        *((_DWORD *)v8 + 539) = sub_4D1600();
        v15 = *(_DWORD *)(v13 + 748);
        *(_DWORD *)(v15 + 276) = v8;
        *((_DWORD *)v8 + 1146) = sub_56F400(**(unsigned __int16 **)(v13 + 556));
        *((_DWORD *)v8 + 1148) = sub_56F400(*(unsigned __int16 *)(*(_DWORD *)(v13 + 556) + 4));
        *((_DWORD *)v8 + 1149) = sub_56F400(*(unsigned __int16 *)(v15 + 4));
        *((_DWORD *)v8 + 1150) = sub_56F400(*(unsigned __int16 *)(v15 + 8));
        *((_DWORD *)v8 + 1151) = sub_56F440(*(_DWORD *)(v13 + 28));
        *((_DWORD *)v8 + 1152) = sub_56F440(*(_DWORD *)(v13 + 120));
        *((_DWORD *)v8 + 1153) = sub_56F400(*(_DWORD *)(v13 + 340));
        v16 = sub_56F400((unsigned __int8)v8[2251]);
        v17 = *(_DWORD *)(v8 + 2235);
        *((_DWORD *)v8 + 1154) = v16;
        v18 = sub_56F400(v17);
        v19 = *(_DWORD *)(v8 + 2239);
        *((_DWORD *)v8 + 1155) = v18;
        *((_DWORD *)v8 + 1156) = sub_56F400(v19);
        v20 = nox_wcslen((const wchar_t *)(v8 + 2185));
        v21 = sub_56FAE0((int *)(v8 + 2185), 2 * v20);
        *((_DWORD *)v8 + 1157) = sub_56F400(v21);
        *((_DWORD *)v8 + 1158) = sub_56F400(0);
        *((_DWORD *)v8 + 1159) = sub_56F400(0);
        *((_DWORD *)v8 + 1147) = sub_56F400(*((_DWORD *)v8 + 541));
        v22 = sub_56F400(0);
        v25 = v8[3684];
        *((_DWORD *)v8 + 1160) = v22;
        *((_DWORD *)v8 + 1161) = sub_56F400(v25);
        *((_DWORD *)v8 + 1162) = -1;
        *((_DWORD *)v8 + 1175) = 1;
        if ( *(_DWORD *)&byte_5D4594[2650652] )
          sub_41D670((int)(v8 + 2096));
        sub_4D7F10(a1);
        if ( sub_40A5C0(4096) )
        {
          sub_4E6860((int)v8, 0, 1);
        }
        else if ( sub_40A5C0(512) )
        {
          sub_417630((int)v8);
        }
        else if ( v8[2064] == 31 && *(_DWORD *)&byte_5D4594[2650636] & 0x40000 )
        {
          sub_4E6860((int)v8, 0, 1);
        }
        else if ( sub_40A5C0(128) )
        {
          if ( sub_40A740() )
          {
            if ( !sub_40AA70((int)v8) )
              sub_4E6860((int)v8, 0, 1);
          }
          else if ( sub_417DA0(4) )
          {
            sub_4DF3C0((int)v8);
          }
        }
        else if ( !sub_40A5C0(2048) )
        {
          sub_4E6860((int)v8, 1, 1);
        }
        sub_4DDB40((_DWORD *)v13);
        if ( v8[2064] == 31 )
          *(_DWORD *)&byte_5D4594[3843628] = v13;
        sub_4DDA90((int)v30, (int)v8);
        v23 = a1;
        LOBYTE(v23) = a1 | 0x80;
        sub_4E5420(v23, v30, 129, 0, 0);
        v8[3676] = 2;
        if ( sub_43AF70() == 1 && !sub_40A5C0(128) )
          sub_425F10((int)v8);
        sub_4DAA50(v13, 0, 2944.0, 2944.0);
        sub_4DAC00();
        if ( sub_40A5C0(4096) )
        {
          if ( !sub_4E8210(v13, (int)&v28) )
            sub_4F7AB0(&v28, v13);
        }
        else
        {
          sub_4F7AB0(&v28, v13);
        }
        sub_4E7010(v13, &v28);
        sub_422140((int)v8);
        if ( a1 != 31 )
        {
          if ( sub_459D70() == 2 )
          {
            v26 = (unsigned __int8)v8[2064];
            v24 = sub_416590(1);
            sub_4DD9B0(1, v24, v26);
          }
          else
          {
            sub_459AA0((int)v29);
            sub_4DD9B0(1, v29, (unsigned __int8)v8[2064]);
          }
        }
        if ( sub_40A5C0(49152) )
        {
          if ( !(v8[3680] & 1) )
            sub_509C30((int)v8);
        }
        if ( !sub_40A5C0(2048) )
        {
          if ( sub_40A5C0(4096) )
          {
            sub_4D6960(a1);
            return *(_DWORD **)(v13 + 36);
          }
          LOWORD(v27) = 484;
          BYTE2(v27) = 1;
          sub_4E5420(a1, &v27, 3, 0, 0);
        }
        return *(_DWORD **)(v13 + 36);
      }
      *((_WORD *)v8 + 5) = *(_DWORD *)&byte_5D4594[3805496] / 2;
      v10 = *(_DWORD *)&byte_5D4594[3807120] / 2;
    }
    *((_WORD *)v8 + 6) = v10;
    goto LABEL_23;
  }
  return result;
}

//----- (004DD9B0) --------------------------------------------------------
int __cdecl sub_4DD9B0(char a1, const void *a2, int a3)
{
  char v4[60]; // [esp+8h] [ebp-3Ch]

  v4[0] = -79;
  v4[1] = a1;
  qmemcpy(&v4[2], a2, 0x3Au);
  return sub_4E5390(a3, (int)v4, 60, 0, 0);
}

//----- (004DDA00) --------------------------------------------------------
char *__cdecl sub_4DDA00(int a1)
{
  int i; // ebx
  char *result; // eax
  int v3; // esi

  for ( i = 2; ; ++i )
  {
    result = sub_416EA0();
    v3 = (int)result;
    if ( !result )
      break;
    while ( *(_BYTE *)(a1 + 2064) == *(_BYTE *)(v3 + 2064)
         || nox_wcscmp((const wchar_t *)(a1 + 4704), (const wchar_t *)(v3 + 4704)) )
    {
      result = sub_416EE0(v3);
      v3 = (int)result;
      if ( !result )
        return result;
    }
    nox_swprintf((wchar_t *)(a1 + 2274), (const wchar_t *)&byte_587000[200112], i);
    nox_swprintf((wchar_t *)(a1 + 4704), (const wchar_t *)&byte_587000[200120], a1 + 2185, a1 + 2274);
  }
  return result;
}

//----- (004DDA90) --------------------------------------------------------
unsigned int __cdecl sub_4DDA90(int a1, int a2)
{
  unsigned int result; // eax

  *(_BYTE *)a1 = 45;
  *(_WORD *)(a1 + 1) = *(_WORD *)(a2 + 2060);
  *(_WORD *)(a1 + 100) = *(_WORD *)(a2 + 2136);
  *(_WORD *)(a1 + 102) = *(_WORD *)(a2 + 2140);
  *(_DWORD *)(a1 + 104) = *(_DWORD *)a2;
  *(_DWORD *)(a1 + 108) = *(_DWORD *)(a2 + 4);
  *(_BYTE *)(a1 + 116) = *(_BYTE *)(a2 + 2152);
  *(_BYTE *)(a1 + 117) = *(_BYTE *)(a2 + 2156);
  *(_BYTE *)(a1 + 118) = *(_BYTE *)(a2 + 3676) == 3;
  *(_DWORD *)(a1 + 112) = *(_DWORD *)(a2 + 3680) & 0x423;
  result = strlen((const char *)(a2 + 2096)) + 1;
  qmemcpy((void *)(a1 + 119), (const void *)(a2 + 2096), result);
  qmemcpy((void *)(a1 + 3), (const void *)(a2 + 2185), 0x61u);
  return result;
}

//----- (004DDB40) --------------------------------------------------------
_DWORD *__cdecl sub_4DDB40(_DWORD *a1)
{
  int v1; // ebx
  int v2; // eax
  char *v3; // ebp
  char v5[256]; // [esp+10h] [ebp-100h]

  *(_DWORD *)&v5[1] = *(_DWORD *)&byte_5D4594[2598000];
  v1 = a1[187];
  v5[0] = 40;
  sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064), 1, v5, 5);
  v5[0] = 44;
  *(_WORD *)&v5[1] = sub_578AC0(a1);
  v2 = *(_DWORD *)(v1 + 276);
  *(_DWORD *)&v5[3] = *(_DWORD *)(v2 + 2068);
  sub_40EBC0(*(unsigned __int8 *)(v2 + 2064), 1, v5, 7);
  sub_4161E0();
  v3 = sub_416590(0);
  v5[8] = -81;
  *(_DWORD *)&v5[9] = *(_DWORD *)&byte_5D4594[2598000];
  *(_DWORD *)&v5[17] = sub_40A5B0() & 0x7FFF0;
  *(_DWORD *)&v5[21] = sub_409E60();
  *(_DWORD *)&v5[13] = 66458;
  v5[25] = sub_409FA0();
  v5[26] = sub_40A020(*((_WORD *)v3 + 26));
  v5[27] = sub_40A180(*((_WORD *)v3 + 26));
  sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064), 1, &v5[8], 20);
  v5[28] = -80;
  strcpy(&v5[29], sub_40A4C0());
  qmemcpy(&v5[45], v3 + 24, 0x1Cu);
  if ( sub_40A220() && (sub_40A300() || sub_40A180(*((_WORD *)v3 + 26))) )
    *(_DWORD *)&v5[73] = sub_40A230();
  else
    *(_DWORD *)&v5[73] = 0;
  sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064), 1, &v5[28], 49);
  sub_4DDA90((int)&v5[124], *(_DWORD *)(v1 + 276));
  sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064), 1, &v5[124], 129);
  sub_4DDDC0(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064));
  v5[80] = 43;
  strcpy(&v5[81], sub_409B30());
  *(_DWORD *)&v5[113] = sub_409B00();
  *(_DWORD *)&v5[117] = *(_DWORD *)&byte_5D4594[2598000];
  sub_552640(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064) + 1, &v5[80], 41, 3);
  return sub_4DDE10(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064), *(_DWORD *)(v1 + 276));
}

//----- (004DDDC0) --------------------------------------------------------
FILE *__cdecl sub_4DDDC0(int a1)
{
  FILE *result; // eax
  int v2; // esi
  unsigned __int8 *v3; // eax

  result = (FILE *)sub_40A5C0(2);
  v2 = a1;
  if ( !result || a1 != 31 )
  {
    v3 = sub_40ED60(a1, 1u, &a1);
    if ( v3 )
      sub_552640(v2 + 1, v3, a1, 3);
    result = sub_40ED10(v2, 1);
  }
  return result;
}

//----- (004DDE10) --------------------------------------------------------
_DWORD *__cdecl sub_4DDE10(int a1, int a2)
{
  _DWORD *result; // eax
  int i; // esi
  int v4; // eax

  result = *(_DWORD **)(a2 + 2056);
  if ( result )
  {
    if ( !*(_DWORD *)&byte_5D4594[1563276] )
      *(_DWORD *)&byte_5D4594[1563276] = sub_4E3AA0((CHAR *)&byte_587000[200132]);
    result = *(_DWORD **)(a2 + 2056);
    for ( i = result[126]; i; i = *(_DWORD *)(i + 496) )
    {
      v4 = *(_DWORD *)(i + 16);
      if ( !(v4 & 0x100) )
      {
        result = *(_DWORD **)&byte_5D4594[1563276];
        if ( *(unsigned __int16 *)(i + 4) != *(_DWORD *)&byte_5D4594[1563276] )
          continue;
      }
      result = sub_4D82F0(a1, (_DWORD *)i);
    }
  }
  return result;
}

//----- (004DDE80) --------------------------------------------------------
int __cdecl sub_4DDE80(int a1, int a2)
{
  int v2; // edi
  int result; // eax

  v2 = *(_DWORD *)(a1 + 748);
  if ( *(_BYTE *)(*(_DWORD *)(v2 + 276) + 3680) & 1 )
    sub_4E6AA0(*(_DWORD *)(v2 + 276));
  if ( *(_BYTE *)(*(_DWORD *)(v2 + 276) + 3680) & 2 )
    sub_4DDEF0(a1);
  sub_4174F0(*(_DWORD *)(v2 + 276), 2);
  sub_4E6040(a1);
  result = sub_4E6060(a1, a2);
  *(_DWORD *)(a1 + 744) = sub_4E62F0;
  return result;
}

//----- (004DDEF0) --------------------------------------------------------
int __cdecl sub_4DDEF0(int a1)
{
  int result; // eax

  result = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 276);
  if ( *(_BYTE *)(result + 3680) & 2 )
  {
    sub_417530(result, 2);
    result = sub_4E6040(a1);
    *(_DWORD *)(a1 + 744) = sub_4F8100;
  }
  return result;
}

//----- (004DDF30) --------------------------------------------------------
int __cdecl sub_4DDF30(int a1)
{
  int v1; // eax
  int result; // eax

  v1 = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 276);
  if ( *(_BYTE *)(v1 + 3680) & 2 )
    result = *(_DWORD *)(v1 + 3628);
  else
    result = 0;
  return result;
}

//----- (004DDF60) --------------------------------------------------------
int __cdecl sub_4DDF60(int a1)
{
  int v1; // ebx
  char *v2; // esi
  int v3; // eax
  int v4; // edi
  int v5; // ebp
  char *i; // edi
  int v7; // eax
  char *v8; // eax
  char *j; // edi
  unsigned __int8 *v10; // eax
  int k; // esi
  int v13; // [esp+Ch] [ebp+4h]

  sub_416640();
  v1 = a1;
  v2 = sub_417090(a1);
  if ( sub_40A5C0(4096) )
  {
    if ( a1 != 31 )
    {
      if ( v2 )
      {
        v3 = *((_DWORD *)v2 + 514);
        if ( v3 )
          *(_DWORD *)(*(_DWORD *)(v3 + 748) + 552) = 1;
      }
    }
    sub_4D9CF0(a1);
    if ( v2 && *((_DWORD *)v2 + 514) )
      sub_4D6000(*((_DWORD *)v2 + 514));
  }
  sub_57B920(v2 + 16);
  v13 = *((_DWORD *)v2 + 514);
  *(_DWORD *)&byte_5D4594[2649712] |= 1 << v1;
  v4 = *(_DWORD *)(v13 + 56);
  v5 = *(_DWORD *)(v13 + 60);
  sub_4DE300(v1);
  *((_DWORD *)v2 + 1175) = 0;
  (*(void (__cdecl **)(int, _DWORD))(v13 + 688))(v13, 0);
  v2[3676] = 3;
  if ( !sub_40A5C0(512) )
  {
    *((_DWORD *)v2 + 908) = v4;
    *((_DWORD *)v2 + 909) = v5;
  }
  if ( *(_DWORD *)&byte_587000[108752] && sub_40A5C0(0x2000) && !sub_40A5C0(4096) )
    sub_4DD140(v1);
  for ( i = sub_416EA0(); i; i = sub_416EE0((int)i) )
  {
    v7 = *((_DWORD *)i + 514);
    if ( v7 )
    {
      if ( i != v2 )
      {
        sub_417190(v1, v7, 1);
        sub_417190((unsigned __int8)i[2064], *((_DWORD *)v2 + 514), 1);
        sub_4DF360((unsigned __int8)i[2064], *((_DWORD *)v2 + 514));
        if ( sub_40A5C0(4096) )
        {
          sub_4D8670((unsigned __int8)i[2064], *((_DWORD **)v2 + 514));
          sub_4D8670(v1, *((_DWORD **)i + 514));
        }
      }
    }
  }
  sub_4DE380(v1);
  sub_4DF2E0(v1);
  if ( sub_40A5C0(1024) && !sub_40AA70((int)v2) )
    sub_4174F0((int)v2, 256);
  if ( sub_43AF70() == 1 )
  {
    sub_4161E0();
    sub_416690();
  }
  sub_4E8110(v1);
  if ( sub_40A5C0(64) )
  {
    v8 = sub_4E8310();
    sub_4D95F0(v1, *v8, *((_WORD *)v8 + 1));
  }
  else if ( sub_40A5C0(32) )
  {
    for ( j = sub_418B10(); j; j = sub_418B60((int)j) )
    {
      v10 = sub_4E8320(j[57]);
      sub_4D95A0(v1, *v10, v10[2], v10[1], *((_WORD *)v10 + 2));
    }
  }
  sub_4175C0((int)v2);
  if ( sub_409F40(0x2000) )
    sub_4DE270((int)v2);
  if ( sub_40A5C0(4096) )
  {
    for ( k = sub_4DA7C0(); k; k = sub_4DA7F0(k) )
    {
      if ( *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(k + 748) + 276) + 4792) == 1 )
        sub_4D9D20(v1, k);
    }
  }
  if ( sub_40A5C0(4096) )
    sub_4D7A60(v1);
  return *(_DWORD *)(v13 + 36);
}

//----- (004DE270) --------------------------------------------------------
int __cdecl sub_4DE270(int a1)
{
  int result; // eax
  int i; // esi
  int v3; // [esp-1Ch] [ebp-28h]
  char v4[7]; // [esp+4h] [ebp-8h]

  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    if ( *(_DWORD *)(i + 36) != *(_DWORD *)(a1 + 2060) )
    {
      if ( *(_DWORD *)(*(_DWORD *)(i + 748) + 260) )
      {
        v4[0] = -46;
        *(_WORD *)&v4[1] = sub_578AC0((_DWORD *)i);
        v3 = *(unsigned __int8 *)(a1 + 2064);
        *(_WORD *)&v4[3] = *(_WORD *)(i + 4);
        v4[5] = 1;
        v4[6] = 2;
        sub_4E5420(v3, v4, 7, 0, 1);
      }
    }
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004DE300) --------------------------------------------------------
char *__cdecl sub_4DE300(int a1)
{
  char *result; // eax
  int i; // esi
  char v3[132]; // [esp+4h] [ebp-84h]

  result = sub_416EA0();
  for ( i = (int)result; result; i = (int)result )
  {
    if ( *(unsigned __int8 *)(i + 2064) != a1
      && (*(_BYTE *)(i + 2064) != 31 || !(*(_DWORD *)&byte_5D4594[2650636] & 0x40000)) )
    {
      sub_4DDA90((int)v3, i);
      sub_4E5390(a1, (int)v3, 129, 0, 0);
      sub_4DDE10(a1, i);
    }
    result = sub_416EE0(i);
  }
  return result;
}

//----- (004DE380) --------------------------------------------------------
int __cdecl sub_4DE380(int a1)
{
  int result; // eax
  int i; // esi
  int v3; // eax

  if ( !*(_DWORD *)&byte_5D4594[1563284] )
    *(_DWORD *)&byte_5D4594[1563284] = sub_4E3AA0((CHAR *)&byte_587000[200140]);
  if ( !*(_DWORD *)&byte_5D4594[1563272] )
    *(_DWORD *)&byte_5D4594[1563272] = sub_4E3AA0((CHAR *)&byte_587000[200152]);
  result = sub_4DA790();
  for ( i = result; result; i = result )
  {
    if ( *(_BYTE *)(i + 16) & 4 )
    {
      v3 = *(unsigned __int16 *)(i + 4);
      if ( (unsigned __int16)v3 == *(_DWORD *)&byte_5D4594[1563284] || v3 == *(_DWORD *)&byte_5D4594[1563272] )
        sub_417190(a1, i, 1);
    }
    result = sub_4DA7A0(i);
  }
  return result;
}

//----- (004DE410) --------------------------------------------------------
_DWORD *__cdecl sub_4DE410(int a1)
{
  int v1; // ebp
  int v2; // edi
  _DWORD *result; // eax
  _DWORD *i; // esi
  int v5; // ecx
  int v6; // ebx
  unsigned int v7; // edi
  int v8; // [esp+10h] [ebp+4h]

  v1 = a1;
  v2 = 1 << a1;
  v8 = 1 << a1;
  result = (_DWORD *)sub_4DA790();
  for ( i = result; result; i = result )
  {
    v5 = i[2];
    i[38] |= v2;
    if ( !(v5 & 0x20400000) )
      i[37] &= ~v2;
    i[v1 + 140] &= 0xFFFu;
    if ( i[2] & 0x20400000 )
    {
      v6 = 0x10000;
      v7 = 1;
      do
      {
        if ( sub_4E4C90((int)i, v7) )
          i[v1 + 140] |= v6;
        v7 *= 2;
        v6 *= 2;
      }
      while ( v7 < 0x10000 );
      v2 = v8;
    }
    result = (_DWORD *)sub_4DA7A0((int)i);
  }
  return result;
}

//----- (004DE4D0) --------------------------------------------------------
int __cdecl sub_4DE4D0(char a1)
{
  int v1; // esi
  int result; // eax
  char v3; // cl

  v1 = 1 << a1;
  for ( result = sub_4DA790(); result; result = sub_4DA7A0(result) )
  {
    v3 = *(_BYTE *)(result + 16);
    *(_DWORD *)(result + 152) |= v1;
    if ( !(v3 & 0x20) && !(*(_DWORD *)(result + 8) & 0x20400006) )
      *(_DWORD *)(result + 148) &= ~v1;
  }
  return result;
}

//----- (004DE530) --------------------------------------------------------
char __cdecl sub_4DE530(int a1, char a2)
{
  int v2; // ebp
  char *v3; // eax
  int v4; // esi
  char *v5; // edi
  char *i; // edi
  int v7; // eax
  int j; // eax
  int v9; // edx
  char result; // al
  int v11; // eax
  char v12[3]; // [esp+10h] [ebp-8h]
  int v13; // [esp+14h] [ebp-4h]

  v2 = a1;
  v13 = 1 << a1;
  sub_4D79A0(a1);
  sub_419EB0(v2, 0);
  sub_4E80C0(v2);
  v3 = sub_417090(v2);
  v4 = (int)v3;
  if ( v3 )
  {
    if ( *((_DWORD *)v3 + 514) )
      sub_506740(*((_DWORD *)v3 + 514));
    if ( *(_DWORD *)(v4 + 4792) && *(_DWORD *)(v4 + 2056) && sub_40A5C0(4096) )
    {
      sub_501960(1011, *(_DWORD *)(v4 + 2056), 0, 0);
      *(_DWORD *)(v4 + 4792) = 0;
      if ( !sub_4E3CE0() )
      {
        v5 = sub_4D0F60();
        sub_4E3CD0(0);
        sub_4D2450(v5);
      }
      sub_4D7390(*(_DWORD *)(v4 + 2056));
      sub_4DE790(*(_DWORD *)(v4 + 2056));
    }
  }
  if ( sub_43AF70() == 1 && !sub_40A5C0(128) )
    sub_425E90(v4, a2);
  for ( i = sub_416EA0(); i; i = sub_416EE0((int)i) )
  {
    v7 = *((_DWORD *)i + 514);
    if ( v7 && i != (char *)v4 )
    {
      sub_417300(v2, v7, 3);
      sub_417300((unsigned __int8)i[2064], *(_DWORD *)(v4 + 2056), 3);
    }
  }
  if ( *(_DWORD *)(v4 + 2056) )
  {
    for ( j = sub_4DA790(); j; j = sub_4DA7A0(j) )
    {
      if ( (*(_BYTE *)(j + 8) & 0x80) && *(_DWORD *)(j + 508) == *(_DWORD *)(v4 + 2056) )
        *(_DWORD *)(j + 508) = 0;
    }
  }
  sub_40C0E0(v2 + 1);
  sub_4DE410(v2);
  if ( v4 )
  {
    v12[0] = -82;
    v9 = v2;
    LOBYTE(v9) = v2 | 0x80;
    *(_WORD *)&v12[1] = *(_WORD *)(*(_DWORD *)(v4 + 2056) + 36);
    sub_4E5420(v9, v12, 3, 0, 0);
  }
  if ( a2 == 4 )
  {
    LOBYTE(a1) = -59;
    sub_552640(v2 + 1, &a1, 1, 3);
  }
  result = sub_4E55F0(v2);
  if ( v4 )
  {
    sub_4E5AD0(*(_DWORD *)(v4 + 2056));
    if ( sub_40A5C0(4096) )
      sub_4DE790(*(_DWORD *)(v4 + 2056));
    else
      sub_4EDA40(*(_DWORD **)(v4 + 2056));
    v11 = v13;
    *(_DWORD *)(v4 + 2140) = 0;
    *(_DWORD *)(v4 + 2136) = 0;
    *(_DWORD *)&byte_5D4594[2649712] &= ~v11;
    *(_BYTE *)(v4 + 3676) = 2;
    result = sub_417530(v4, 16);
  }
  return result;
}

//----- (004DE790) --------------------------------------------------------
void __cdecl sub_4DE790(int a1)
{
  int v1; // esi
  int v2; // edi

  v1 = sub_4E7980(a1);
  if ( v1 )
  {
    do
    {
      v2 = sub_4E7990(v1);
      sub_4E5CC0(v1);
      v1 = v2;
    }
    while ( v2 );
  }
}

//----- (004DE7C0) --------------------------------------------------------
char *__cdecl sub_4DE7C0(int a1)
{
  int v1; // edi
  char *v2; // esi
  int *v3; // eax
  int v4; // ebp
  int v5; // eax
  int i; // eax
  int v7; // ecx
  int v8; // eax
  char *result; // eax
  unsigned __int8 *v11; // eax
  int v12; // eax
  int v13; // eax
  unsigned __int8 *v14; // eax

  v1 = a1;
  v2 = sub_417090(a1);
  if ( sub_4D12A0(v1) )
    sub_4D1250(v1);
  if ( *((_DWORD *)v2 + 517) )
  {
    v3 = sub_425A70(*((_DWORD *)v2 + 517));
    if ( v3 )
      sub_425B60(v3, v1);
  }
  v4 = *(_DWORD *)(*((_DWORD *)v2 + 514) + 748);
  if ( *(_DWORD *)(v4 + 280) )
    sub_510DC0(*(_DWORD **)(v4 + 280));
  *(_DWORD *)(v4 + 280) = 0;
  sub_510E20((unsigned __int8)v2[2064]);
  sub_4FF990(1 << v2[2064]);
  if ( !sub_40A5C0(2) )
    *((_DWORD *)v2 + 523) = 0;
  sub_56F4F0((int *)v2 + 1146);
  sub_56F4F0((int *)v2 + 1148);
  sub_56F4F0((int *)v2 + 1149);
  sub_56F4F0((int *)v2 + 1150);
  sub_56F4F0((int *)v2 + 1151);
  sub_56F4F0((int *)v2 + 1152);
  sub_56F4F0((int *)v2 + 1153);
  sub_56F4F0((int *)v2 + 1154);
  sub_56F4F0((int *)v2 + 1155);
  sub_56F4F0((int *)v2 + 1156);
  sub_56F4F0((int *)v2 + 1157);
  sub_56F4F0((int *)v2 + 1158);
  sub_56F4F0((int *)v2 + 1159);
  sub_56F4F0((int *)v2 + 1147);
  sub_56F4F0((int *)v2 + 1160);
  sub_56F4F0((int *)v2 + 1161);
  LOBYTE(a1) = 46;
  *(_WORD *)((char *)&a1 + 1) = sub_578AC0(*((_DWORD **)v2 + 514));
  v5 = v1;
  LOBYTE(v5) = v1 | 0x80;
  sub_4E5420(v5, &a1, 3, 0, 0);
  sub_4E5CC0(*((_DWORD *)v2 + 514));
  *((_DWORD *)v2 + 514) = 0;
  for ( i = sub_4DA7C0(); i; i = sub_4DA7F0(i) )
  {
    v7 = *(_DWORD *)(i + 748);
    *(_BYTE *)(v1 + v7 + 452) = 0;
    *(_DWORD *)(v7 + 4 * v1 + 324) = 0;
    *(_BYTE *)(v1 + v7 + 484) = 0;
    *(_BYTE *)(v1 + v7 + 516) = 0;
  }
  v8 = sub_40A8A0();
  if ( v8 )
  {
    if ( sub_40A5C0(1024) && !sub_446180() && sub_40A770() == 1 )
      sub_5095E0();
  }
  else
  {
    sub_40A1F0(0);
    sub_416E50(1);
    sub_417D00();
    sub_40A970();
  }
  sub_4E55F0(v1);
  sub_4E4F40(v1);
  sub_4E4F30(v1);
  if ( sub_43AF70() == 1 )
  {
    sub_4161E0();
    sub_416690();
  }
  result = (char *)sub_40A5C0(4096);
  if ( result )
  {
    if ( sub_4E9010() == 1 )
    {
      v11 = sub_4E8E50();
      result = sub_4D2450((char *)v11);
    }
    else if ( sub_4E8F60() )
    {
      sub_4D60B0();
      sub_4D76E0(1);
      v12 = sub_4E3CC0();
      v13 = sub_4D74F0(v12);
      sub_4E3CD0(v13 - 1);
      v14 = sub_4E8E50();
      result = sub_4D2450((char *)v14);
    }
    else
    {
      result = (char *)sub_4DA7C0();
      if ( result )
      {
        while ( !*(_DWORD *)(*((_DWORD *)result + 187) + 312) )
        {
          result = (char *)sub_4DA7F0((int)result);
          if ( !result )
            return result;
        }
        result = (char *)sub_4E8E60();
      }
    }
  }
  return result;
}
// 4DE9A4: variable 'v8' is possibly undefined
// 4DE9E1: variable 'v9' is possibly undefined

//----- (004DEAB0) --------------------------------------------------------
char *__cdecl sub_4DEAB0(int a1, char a2)
{
  char *result; // eax
  char *v3; // esi

  result = sub_417090(a1);
  v3 = result;
  if ( result )
  {
    sub_4DE530((unsigned __int8)result[2064], a2);
    sub_4DE7C0((unsigned __int8)v3[2064]);
    result = (char *)sub_4DEC50((unsigned __int8)v3[2064]);
  }
  return result;
}

//----- (004DEB00) --------------------------------------------------------
char *__cdecl sub_4DEB00(int a1)
{
  char *result; // eax

  result = sub_417090(a1);
  if ( result )
    result = sub_4DEAB0((unsigned __int8)result[2064], 4);
  return result;
}

//----- (004DEB30) --------------------------------------------------------
void sub_4DEB30()
{
  if ( !(*(_DWORD *)&byte_5D4594[2650636] & 0x400000) )
    sub_552A80(*(unsigned int *)&byte_5D4594[1563148], 1);
}

//----- (004DEB50) --------------------------------------------------------
void sub_4DEB50()
{
  unsigned __int8 *v2; // eax
  void *v3; // [esp+0h] [ebp-4h]

  if ( sub_40A5C0(2) )
  {
    if ( *(_DWORD *)&byte_5D4594[2650636] & 0x400000 )
    {
      sub_4D3580(0);
      sub_40ED10(31, 0);
    }
    else
    {
      v2 = sub_40ED60(31, 0, &v3);
      if ( v2 )
        sub_51BAD0(31, v2, (signed int)v3);
      sub_40ED10(31, 0);
    }
  }
}

//----- (004DEBC0) --------------------------------------------------------
int __cdecl sub_4DEBC0(int a1)
{
  int result; // eax
  char v2[40]; // [esp+4h] [ebp-28h]

  memset(v2, 0, sizeof(v2));
  *(_DWORD *)&v2[16] = sub_409FA0();
  *(_DWORD *)&v2[20] = 2048;
  *(_DWORD *)&v2[8] = a1;
  *(_DWORD *)&v2[12] = 0;
  sub_5520B0(200, 1024);
  *(_DWORD *)&v2[36] = sub_4DEC30;
  *(_DWORD *)&v2[32] = sub_4DF630;
  result = sub_554380((size_t *)v2);
  *(_DWORD *)&byte_5D4594[1563148] = result;
  return result;
}

//----- (004DEC30) --------------------------------------------------------
int __cdecl sub_4DEC30(int a1, unsigned __int8 *a2, signed int a3)
{
  sub_51BAD0(a1 - 1, a2, a3);
  return 1;
}

//----- (004DEC50) --------------------------------------------------------
int __cdecl sub_4DEC50(int a1)
{
  return sub_5545B0(a1 + 1);
}

//----- (004DEC60) --------------------------------------------------------
int __cdecl sub_4DEC60(unsigned int a1)
{
  sub_5545B0(a1);
  sub_5546A0(a1);
  return sub_552450();
}

//----- (004DEC80) --------------------------------------------------------
char *sub_4DEC80()
{
  char *result; // eax
  int i; // esi
  int v2; // eax
  unsigned int v3; // [esp-18h] [ebp-28h]
  int v4; // [esp-10h] [ebp-20h]
  char v5[1]; // [esp+7h] [ebp-9h]
  char v6[3]; // [esp+8h] [ebp-8h]
  int v7; // [esp+Ch] [ebp-4h]

  result = sub_416EA0();
  for ( i = (int)result; result; i = (int)result )
  {
    if ( *(_DWORD *)(i + 2056) )
    {
      v2 = -((*(_DWORD *)(i + 3680) & 0x10) != 0);
      LOBYTE(v2) = v2 & 0xC4;
      if ( *(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(i + 3596) > (unsigned int)((v2 + 90)
                                                                                   * *(_DWORD *)&byte_5D4594[2649704]) )
      {
        v7 = *(_DWORD *)(i + 2060);
        sub_4DA180(3, &v7);
        v3 = *(unsigned __int8 *)(i + 2064) + 1;
        v5[0] = -58;
        sub_552640(v3, v5, 1, 3);
        sub_4DEAB0(*(unsigned __int8 *)(i + 2064), 3);
      }
      if ( (*(_BYTE *)(i + 3680) & 0x80) )
        sub_4DEAB0(*(unsigned __int8 *)(i + 2064), 4);
      if ( *(_BYTE *)(i + 3676) != 3 || (*(_BYTE *)(i + 3680) & 0x10) != 16 )
      {
        v4 = *(unsigned __int8 *)(i + 2064);
        v6[0] = 39;
        *(_WORD *)&v6[1] = *(_WORD *)&byte_5D4594[2598000];
        sub_40EBC0(v4, 1, v6, 3);
      }
      else
      {
        sub_518EE0(*(_DWORD **)(i + 2056));
      }
      if ( *(_DWORD *)(i + 2056) == *(_DWORD *)&byte_5D4594[3843628] )
      {
        sub_4E5770(*(_BYTE *)(i + 2064), 1);
      }
      else if ( !*(_DWORD *)&byte_5D4594[2650652]
             || !(*(_DWORD *)&byte_5D4594[2598000] % (unsigned int)sub_40A6C0())
             || sub_40A5C0(8) )
      {
        sub_5528B0(*(unsigned __int8 *)(i + 2064) + 1, 0);
      }
    }
    result = sub_416EE0(i);
  }
  return result;
}

//----- (004DEE00) --------------------------------------------------------
_DWORD *__cdecl sub_4DEE00(const char *a1, int a2)
{
  int v2; // edx
  _DWORD *result; // eax
  _DWORD *i; // esi
  int v5; // edi
  unsigned __int8 *v6; // eax
  char v7[41]; // [esp+8h] [ebp-2Ch]

  v7[0] = 43;
  v2 = *(_DWORD *)&byte_5D4594[2598000];
  strcpy(&v7[1], a1);
  *(_DWORD *)&v7[37] = v2;
  *(_DWORD *)&v7[33] = a2;
  result = (_DWORD *)sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    v5 = i[187];
    sub_40EBC0(*(unsigned __int8 *)(*(_DWORD *)(v5 + 276) + 2064), 1, v7, 41);
    sub_518C30((int)i, i, 0, 0);
    if ( !sub_40A5C0(2) || *(_BYTE *)(*(_DWORD *)(v5 + 276) + 2064) != 31 )
    {
      v6 = sub_40ED60(*(unsigned __int8 *)(*(_DWORD *)(v5 + 276) + 2064), 1u, &a1);
      if ( v6 )
        sub_552640(*(unsigned __int8 *)(*(_DWORD *)(v5 + 276) + 2064) + 1, v6, (signed int)a1, 3);
    }
    result = (_DWORD *)sub_4DA7F0((int)i);
  }
  return result;
}

//----- (004DEF00) --------------------------------------------------------
int sub_4DEF00()
{
  char *v0; // ebx
  char v2[20]; // [esp+Ch] [ebp-48h]
  char v3[49]; // [esp+20h] [ebp-34h]

  v0 = sub_416590(0);
  v2[0] = -81;
  *(_DWORD *)&v2[1] = *(_DWORD *)&byte_5D4594[2598000];
  *(_DWORD *)&v2[9] = sub_40A5B0() & 0x7FFF0;
  *(_DWORD *)&v2[13] = sub_409E60();
  *(_DWORD *)&v2[5] = 66458;
  v2[17] = sub_409FA0();
  v2[18] = sub_40A020(*((_WORD *)v0 + 26));
  v2[19] = sub_40A180(*((_WORD *)v0 + 26));
  v3[0] = -80;
  strcpy(&v3[1], sub_40A4C0());
  qmemcpy(&v3[17], v0 + 24, 0x1Cu);
  if ( sub_40A220() && (sub_40A300() || sub_40A180(*((_WORD *)v0 + 26))) )
    *(_DWORD *)&v3[45] = sub_40A230();
  else
    *(_DWORD *)&v3[45] = 0;
  sub_4E5390(159, (int)v2, 20, 0, 0);
  return sub_4E5390(159, (int)v3, 49, 0, 0);
}

//----- (004DF020) --------------------------------------------------------
char *sub_4DF020()
{
  char *result; // eax
  int v1; // ecx
  unsigned __int8 *v2; // edi
  char *v3; // esi
  bool v4; // zf
  char *i; // esi
  char v6[60]; // [esp+8h] [ebp-3Ch]

  result = sub_459AA0((int)v6);
  v1 = 29;
  v2 = &byte_5D4594[1563214];
  v3 = v6;
  v4 = 1;
  do
  {
    if ( !v1 )
      break;
    v4 = *(_WORD *)v3 == *(_WORD *)v2;
    v3 += 2;
    v2 += 2;
    --v1;
  }
  while ( v4 );
  if ( !v4 )
  {
    result = sub_416EA0();
    for ( i = result; result; i = result )
    {
      if ( i[2064] != 31 )
        sub_4DD9B0(1, v6, (unsigned __int8)i[2064]);
      result = sub_416EE0((int)i);
    }
    qmemcpy(&byte_5D4594[1563214], v6, 0x38u);
    *(_WORD *)&byte_5D4594[1563270] = *(_WORD *)&v6[56];
  }
  return result;
}

//----- (004DF0A0) --------------------------------------------------------
int __cdecl sub_4DF0A0(int a1, int a2)
{
  int result; // eax
  int i; // esi
  char v4[3]; // [esp+4h] [ebp-4h]

  v4[0] = 58;
  *(_WORD *)&v4[1] = *(_WORD *)(a1 + 10);
  if ( a2 != 32 )
    return sub_4E5420(a2, v4, 3, 0, 1);
  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(i + 748) + 276) + 2064), v4, 3, 0, 1);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004DF120) --------------------------------------------------------
int __cdecl sub_4DF120(int a1)
{
  int result; // eax
  int i; // esi
  char v3[3]; // [esp+4h] [ebp-4h]

  v3[0] = 59;
  *(_WORD *)&v3[1] = *(_WORD *)(a1 + 10);
  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(i + 748) + 276) + 2064), v3, 3, 0, 1);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004DF180) --------------------------------------------------------
int __cdecl sub_4DF180(int a1)
{
  int result; // eax
  int i; // esi
  char v3[3]; // [esp+4h] [ebp-4h]

  v3[0] = 60;
  *(_WORD *)&v3[1] = *(_WORD *)(a1 + 10);
  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    sub_4E5420(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(i + 748) + 276) + 2064), v3, 3, 0, 1);
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004DF1E0) --------------------------------------------------------
int __cdecl sub_4DF1E0(int a1)
{
  int *i; // esi
  int v2; // eax
  int result; // eax
  int j; // esi
  char v5; // al

  for ( i = (int *)sub_410870(); i; i = (int *)sub_410880(i) )
  {
    v2 = i[1];
    if ( *(_BYTE *)(v2 + 4) & 0x20 )
      sub_4DF0A0(v2, a1);
  }
  sub_4DF2A0(a1);
  if ( sub_5071C0() )
    sub_507190(a1, 1);
  result = sub_40A5C0(4096);
  if ( result )
  {
    for ( j = sub_4DA790(); j; j = sub_4DA7A0(j) )
    {
      if ( (*(_BYTE *)(j + 8) & 0x80) && *(_BYTE *)(*(_DWORD *)(j + 748) + 48) )
        sub_4D6A20(a1, j);
    }
    result = sub_4D72C0();
    if ( result == 1 )
    {
      v5 = sub_4D72C0();
      result = sub_4D7280(a1, v5);
    }
  }
  return result;
}

//----- (004DF2A0) --------------------------------------------------------
int *__cdecl sub_4DF2A0(char a1)
{
  int v1; // esi
  int *result; // eax

  v1 = 1 << a1;
  for ( result = (int *)sub_410780(); result; result = (int *)sub_410790(result) )
  {
    if ( result[5] & 8 )
      result[7] |= v1;
    else
      result[7] &= ~v1;
  }
  return result;
}

//----- (004DF2E0) --------------------------------------------------------
void __cdecl sub_4DF2E0(int a1)
{
  char *i; // ebx
  int j; // esi

  if ( a1 != 31 )
  {
    for ( i = sub_418B10(); i; i = sub_418B60((int)i) )
    {
      sub_4197C0((wchar_t *)i, a1);
      for ( j = sub_4DA7C0(); j; j = sub_4DA7F0(j) )
      {
        if ( sub_419180(j + 48, i[57]) )
          sub_4198A0(j + 48, a1, *(_DWORD *)(j + 36));
      }
    }
  }
}

//----- (004DF360) --------------------------------------------------------
int __cdecl sub_4DF360(int a1, int a2)
{
  __int16 v2; // ax
  float v3; // ecx
  __int16 v4; // ax
  float v5; // edx
  char v7[9]; // [esp+4h] [ebp-Ch]

  v7[0] = 47;
  *(_WORD *)&v7[3] = *(_WORD *)(a2 + 4);
  v2 = sub_578AC0((_DWORD *)a2);
  v3 = *(float *)(a2 + 56);
  *(_WORD *)&v7[1] = v2;
  v4 = sub_419A70(v3);
  v5 = *(float *)(a2 + 60);
  *(_WORD *)&v7[5] = v4;
  *(_WORD *)&v7[7] = sub_419A70(v5);
  return sub_4E5390(a1, (int)v7, 9, 0, 1);
}

//----- (004DF3C0) --------------------------------------------------------
char __cdecl sub_4DF3C0(int a1)
{
  int v1; // edi
  char *v2; // eax
  char *v3; // ebx
  char *v4; // ebx
  char *v5; // esi
  int v6; // ebx
  BOOL v7; // eax
  int v8; // esi
  int v9; // ebx

  v1 = *(_DWORD *)(a1 + 2056);
  v2 = sub_416640();
  v3 = v2;
  if ( !v1 )
    return (char)v2;
  if ( !sub_40A740() && !sub_40A5C0(0x8000) )
  {
    LOBYTE(v2) = sub_417DD0();
    if ( (_BYTE)v2 )
    {
      v2 = sub_4189D0();
      v4 = v2;
      if ( v2 )
      {
        v2 = (char *)sub_419130(v1 + 48);
        if ( !v2 )
          LOBYTE(v2) = (unsigned int)sub_4191D0(v4[57], v1 + 48, 1, *(_DWORD *)(v1 + 36), 1);
      }
    }
    return (char)v2;
  }
  v2 = *(char **)(a1 + 2068);
  if ( !v2 )
    return (char)v2;
  v5 = sub_418AE0(*(_DWORD *)(a1 + 2068));
  if ( v5 )
  {
    v6 = v1 + 48;
    v7 = sub_419130(v1 + 48);
    goto LABEL_11;
  }
  v8 = (unsigned __int8)v3[52];
  if ( (sub_40A5C0(96) || sub_40A5C0(16) && sub_417DA0(4)) && v8 > 2 )
    v8 = 2;
  v2 = (char *)(unsigned __int8)sub_417DE0();
  if ( (int)v2 < v8 )
  {
    if ( !sub_40A5C0(96) || (v9 = (unsigned __int8)sub_417DE0(), v2 = (char *)sub_417DC0(), v9 < (int)v2) )
    {
      v2 = sub_418A10();
      v5 = v2;
      if ( v2 )
      {
        sub_418800((wchar_t *)v2, (wchar_t *)(a1 + 2072), 0);
        sub_418830((int)v5, *(_DWORD *)(a1 + 2068));
        sub_4184D0((wchar_t *)v5);
        v6 = v1 + 48;
        v7 = sub_419130(v1 + 48);
LABEL_11:
        if ( v7 )
          LOBYTE(v2) = sub_4196D0(v6, (int)v5, *(_DWORD *)(v1 + 36), 0);
        else
          LOBYTE(v2) = (unsigned int)sub_4191D0(v5[57], v6, 1, *(_DWORD *)(v1 + 36), 0);
        return (char)v2;
      }
    }
  }
  return (char)v2;
}

//----- (004DF550) --------------------------------------------------------
int sub_4DF550()
{
  return *(_DWORD *)&byte_5D4594[1563148];
}

//----- (004DF560) --------------------------------------------------------
void sub_4DF560()
{
  srand(0x49C3B97u);
}

//----- (004DF570) --------------------------------------------------------
void sub_4DF570()
{
  srand(0x22FEu);
}

//----- (004DF580) --------------------------------------------------------
int __cdecl sub_4DF580(int a1, _DWORD *a2)
{
  int v2; // eax
  int v3; // ecx
  int v4; // ebx
  int v5; // ecx
  int v6; // eax
  int v7; // ecx

  v2 = *(unsigned __int16 *)(a1 + 5);
  if ( (unsigned __int16)v2 - (int)*a2 >= 0 )
    v3 = (unsigned __int16)v2 - *a2;
  else
    v3 = *a2 - v2;
  v4 = a2[2];
  if ( v3 >= v4 )
    return 0;
  v5 = a2[1];
  v6 = *(unsigned __int16 *)(a1 + 7);
  v7 = (unsigned __int16)v6 - v5 >= 0 ? (unsigned __int16)v6 - v5 : v5 - v6;
  if ( v7 >= v4 )
    return 0;
  *(_DWORD *)&byte_5D4594[1563300] = a1;
  return 1;
}

//----- (004DF5E0) --------------------------------------------------------
int __cdecl sub_4DF5E0(int a1, int a2)
{
  int v3[3]; // [esp+0h] [ebp-Ch]

  v3[0] = *(_DWORD *)&byte_5D4594[1563292];
  v3[1] = *(_DWORD *)&byte_5D4594[1563296];
  v3[2] = a2;
  *(_DWORD *)&byte_5D4594[1563300] = 0;
  sub_40F0F0(a1, (int (__cdecl *)(_DWORD, int))sub_4DF580, (int)v3);
  return *(_DWORD *)&byte_5D4594[1563300];
}

//----- (004DF630) --------------------------------------------------------
int __cdecl sub_4DF630(int a1, char *a2, unsigned int a3)
{
  char *v3; // edi
  int v4; // ebx
  char *v5; // ebp
  char *v6; // eax
  int **v7; // esi
  unsigned int v8; // eax
  int **v9; // eax
  char *v10; // edi
  int v11; // eax
  char *v13; // edi
  _BYTE *v14; // eax
  int **i; // esi
  signed int v16; // eax
  int **j; // eax
  signed int v18; // eax

  v3 = a2;
  v4 = a1 - 1;
  v5 = &a2[a3];
  v6 = sub_417090(a1 - 1);
  *(_DWORD *)&byte_5D4594[1563308] = 0;
  *(_DWORD *)&byte_5D4594[1563312] = 0;
  *(_DWORD *)&byte_5D4594[1563304] = v6 + 16;
  v7 = sub_40F080(a1 - 1, &a3);
  if ( sub_4DF7F0(v7) )
  {
    v8 = a3;
    qmemcpy(a2, v7, a3);
    v3 = &a2[v8];
    v9 = sub_40F080(v4, &a3);
    if ( v9 )
    {
      *v3 = -92;
      v10 = v3 + 1;
      v11 = sub_4DF810(v10, (int)v5, (int)v9);
      if ( !v11 )
        return v10 - a2 - 1;
      v13 = &v10[v11];
      do
      {
        v14 = sub_4DF8F0(v4, v13, (int)v5);
        v13 = &v13[(_DWORD)v14];
      }
      while ( v14 );
      v3 = &v13[sub_4DF8C0(v13, (int)v5)];
    }
  }
  for ( i = sub_40EEB0(v4, 1, &a3); i; i = sub_40EEB0(v4, 1, &a3) )
  {
    if ( *(char *)i != -107
      || *(int *)&byte_5D4594[2650652] != 1
      || !(*(_DWORD *)&byte_5D4594[2598000] % (unsigned int)sub_40A6C0()) )
    {
      v16 = sub_4DFAF0(v3, (int)v5, i, a3);
      if ( !v16 )
        return v3 - a2;
      v3 += v16;
    }
  }
  *(_DWORD *)&byte_5D4594[1563312] = v3 - a2;
  if ( !*(_DWORD *)&byte_5D4594[2650652]
    || !(*(_DWORD *)&byte_5D4594[2598000] % (unsigned int)sub_40A6C0())
    || sub_40A5C0(8) )
  {
    sub_4E5770(v4, 1);
    for ( j = sub_40EEB0(v4, 1, &a3); j; j = sub_40EEB0(v4, 1, &a3) )
    {
      v18 = sub_4DFAF0(v3, (int)v5, j, a3);
      if ( !v18 )
        break;
      v3 += v18;
    }
  }
  return v3 - a2;
}

//----- (004DF7F0) --------------------------------------------------------
BOOL __cdecl sub_4DF7F0(_BYTE *a1)
{
  return a1 && (*a1 == 39 || *a1 == 40);
}

//----- (004DF810) --------------------------------------------------------
int __cdecl sub_4DF810(char *a1, int a2, int a3)
{
  char v4; // al
  bool v5; // zf
  char *v6; // eax
  char v7; // cl
  _BYTE *v8; // eax
  _BYTE *v9; // eax

  if ( *(char *)a3 != -61 )
    return 0;
  if ( a2 - (int)a1 < 16 )
    return 0;
  *(_WORD *)(a3 + 5) &= 0xFFFEu;
  *(_WORD *)(a3 + 7) &= 0xFFFEu;
  v4 = sub_57B930(
         *(int *)&byte_5D4594[1563304],
         *(unsigned __int16 *)(a3 + 1),
         *(unsigned __int16 *)(a3 + 3),
         *(unsigned int *)&byte_5D4594[2598000]);
  v5 = v4 == -1;
  *a1 = v4;
  v6 = a1 + 1;
  if ( v5 )
  {
    *(_DWORD *)v6 = *(_DWORD *)(a3 + 1);
    v6 = a1 + 5;
  }
  *(_DWORD *)v6 = *(_DWORD *)(a3 + 5);
  v7 = *(_BYTE *)(a3 + 9);
  v8 = v6 + 4;
  *v8 = v7;
  if ( *(char *)(a3 + 10) != -1 )
  {
    *v8++ = v7 | 0x80;
    *v8 = *(_BYTE *)(a3 + 10);
  }
  v9 = v8 + 1;
  *v9 = *(_BYTE *)(a3 + 11);
  *(_DWORD *)&byte_5D4594[1563292] = *(unsigned __int16 *)(a3 + 5);
  *(_DWORD *)&byte_5D4594[1563296] = *(unsigned __int16 *)(a3 + 7);
  return (char *)v9 - a1 + 1;
}

//----- (004DF8C0) --------------------------------------------------------
int __cdecl sub_4DF8C0(_BYTE *a1, int a2)
{
  if ( a2 - (int)a1 < 3 )
    return 0;
  *a1 = 0;
  a1[1] = 0;
  a1[2] = 0;
  return 3;
}

//----- (004DF8F0) --------------------------------------------------------
_BYTE *__cdecl sub_4DF8F0(int a1, _BYTE *a2, int a3)
{
  _BYTE *v3; // ebp
  int v4; // edi
  int v6; // esi
  int v7; // eax
  int v8; // edi

  v3 = a2;
  v4 = 127;
  if ( !sub_40F0B0(a1) )
    return 0;
  v6 = sub_4DF5E0(a1, 127);
  if ( !v6 )
  {
    while ( 1 )
    {
      v4 += 127;
      if ( v4 > 4064 )
        return 0;
      v6 = sub_4DF5E0(a1, v4);
      if ( v6 )
      {
        if ( v4 <= 127 )
          break;
        *a2 = 0;
        v7 = 1;
        v3 = a2 + 1;
        goto LABEL_9;
      }
    }
  }
  v7 = 0;
LABEL_9:
  v8 = sub_4DF9B0((int)v3, a3, v6, v7);
  if ( v8 == -1 )
    return (_BYTE *)(v3 - a2);
  sub_40F000(a1, v6);
  return &v3[v8 - (_DWORD)a2];
}

//----- (004DF9B0) --------------------------------------------------------
int __cdecl sub_4DF9B0(int a1, int a2, int a3, int a4)
{
  char v4; // al
  unsigned __int16 *v5; // esi
  unsigned __int16 v6; // ax
  _WORD *v7; // esi
  _BYTE *v8; // esi
  _BYTE *v10; // esi
  char v11; // al
  float v12; // [esp+0h] [ebp-14h]
  float v13; // [esp+0h] [ebp-14h]

  if ( a2 - a1 < 8 || a4 && a2 - a1 < 10 )
    return -1;
  v4 = sub_57B930(
         *(int *)&byte_5D4594[1563304],
         *(unsigned __int16 *)(a3 + 1),
         *(unsigned __int16 *)(a3 + 3),
         *(unsigned int *)&byte_5D4594[2598000]);
  *(_BYTE *)a1 = v4;
  v5 = (unsigned __int16 *)(a1 + 1);
  if ( v4 == -1 )
  {
    *v5 = *(_WORD *)(a3 + 1);
    *(_WORD *)(a1 + 3) = *(_WORD *)(a3 + 3);
    v5 = (unsigned __int16 *)(a1 + 5);
  }
  if ( a4 )
  {
    v6 = *(_WORD *)(a3 + 5);
    if ( v6 > 0x1770u || *(_WORD *)(a3 + 7) > 0x1770u )
      return 0;
    *v5 = v6;
    v7 = v5 + 1;
    *v7 = *(_WORD *)(a3 + 7);
    v8 = v7 + 1;
  }
  else
  {
    v12 = (double)*(unsigned __int16 *)(a3 + 5);
    *(_BYTE *)v5 = sub_419A70(v12) - byte_5D4594[1563292];
    v10 = (char *)v5 + 1;
    v13 = (double)*(unsigned __int16 *)(a3 + 7);
    *v10 = sub_419A70(v13) - byte_5D4594[1563296];
    v8 = v10 + 1;
  }
  *(_DWORD *)&byte_5D4594[1563292] = *(unsigned __int16 *)(a3 + 5);
  *(_DWORD *)&byte_5D4594[1563296] = *(unsigned __int16 *)(a3 + 7);
  if ( *(char *)a3 == 48 || *(char *)a3 == -61 )
  {
    v11 = *(_BYTE *)(a3 + 9);
    *v8 = v11;
    if ( *(char *)(a3 + 10) != -1 )
    {
      *v8++ = v11 | 0x80;
      *v8 = *(_BYTE *)(a3 + 10);
    }
    if ( *(char *)a3 == -61 )
      *++v8 = *(_BYTE *)(a3 + 11);
    ++v8;
  }
  return (int)&v8[-a1];
}

//----- (004DFAF0) --------------------------------------------------------
signed int __cdecl sub_4DFAF0(void *a1, int a2, const void *a3, signed int a4)
{
  signed int result; // eax

  result = a4;
  if ( a2 - (int)a1 < a4 )
    return 0;
  qmemcpy(a1, a3, a4);
  return result;
}

//----- (004DFB20) --------------------------------------------------------
int sub_4DFB20()
{
  return *(_DWORD *)&byte_5D4594[1563312];
}

//----- (004DFB30) --------------------------------------------------------
void sub_4DFB30()
{
  srand(0x22FFu);
}

//----- (004DFB40) --------------------------------------------------------
void sub_4DFB40()
{
  srand(0x2274u);
}

//----- (004DFB50) --------------------------------------------------------
_DWORD *__cdecl sub_4DFB50(int a1, int a2)
{
  *(_BYTE *)(a2 + 440) |= 8u;
  return sub_501960(75, a2, 0, 0);
}

//----- (004DFB80) --------------------------------------------------------
_DWORD *__cdecl sub_4DFB80(int a1, int a2)
{
  if ( !sub_4DFBB0(a2, 8) )
    *(_BYTE *)(a2 + 440) &= 0xF7u;
  return sub_501960(76, a2, 0, 0);
}

//----- (004DFBB0) --------------------------------------------------------
int __cdecl sub_4DFBB0(int a1, char a2)
{
  _DWORD *v2; // ebp
  int v3; // eax
  int v4; // edi
  int v5; // esi
  unsigned __int8 *v6; // eax

  if ( !a1 )
    return 0;
  if ( !a2 )
    return 0;
  v2 = *(_DWORD **)(a1 + 504);
  if ( !v2 )
    return 0;
  while ( 1 )
  {
    v3 = v2[4];
    if ( v3 & 0x100 )
    {
      if ( v2[2] & 0x13001000 )
        break;
    }
LABEL_13:
    v2 = (_DWORD *)v2[124];
    if ( !v2 )
      return 0;
  }
  v4 = 0;
  v5 = v2[173];
  while ( !*(_DWORD *)v5 )
  {
LABEL_12:
    ++v4;
    v5 += 4;
    if ( v4 >= 4 )
      goto LABEL_13;
  }
  v6 = &byte_587000[200164];
  while ( *(_DWORD *)(*(_DWORD *)v5 + 112) != *((_DWORD *)v6 - 1) || a2 != *v6 )
  {
    v6 += 20;
    if ( (int)v6 >= (int)&byte_587000[200284] )
      goto LABEL_12;
  }
  return 1;
}

//----- (004DFC30) --------------------------------------------------------
void __cdecl sub_4DFC30(int a1, int a2)
{
  int v2; // esi
  int v3; // edx
  int v5; // [esp+Ch] [ebp+8h]

  v2 = a2;
  if ( a2 )
  {
    if ( *(_BYTE *)(a2 + 8) & 4 )
    {
      v3 = *(_DWORD *)(a2 + 748);
      *(_BYTE *)(a2 + 440) |= 0x10u;
      *(float *)&v5 = *(float *)(a1 + 120) + *(float *)(a2 + 552);
      *(float *)(v2 + 552) = *(float *)&v5;
      sub_4D9360(*(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064), (_DWORD *)v2, 0, v5);
      sub_501960(59, v2, 0, 0);
    }
  }
}

//----- (004DFCA0) --------------------------------------------------------
void __cdecl sub_4DFCA0(int a1, int a2)
{
  int v2; // esi
  int v3; // edx
  int v4; // [esp+Ch] [ebp+8h]

  v2 = a2;
  if ( a2 && *(_BYTE *)(a2 + 8) & 4 )
  {
    if ( !sub_4DFBB0(a2, 16) )
      *(_BYTE *)(a2 + 440) &= 0xEFu;
    v3 = *(_DWORD *)(a2 + 748);
    *(float *)&v4 = *(float *)(a2 + 552) - *(float *)(a1 + 120);
    *(float *)(v2 + 552) = *(float *)&v4;
    sub_4D9360(*(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064), (_DWORD *)v2, 0, v4);
    sub_501960(60, v2, 0, 0);
  }
}

//----- (004DFD10) --------------------------------------------------------
_DWORD *__cdecl sub_4DFD10(int a1, int a2)
{
  *(_BYTE *)(a2 + 440) |= 1u;
  return sub_501960(102, a2, 0, 0);
}

//----- (004DFD40) --------------------------------------------------------
void __cdecl sub_4DFD40(int a1, int a2, int a3)
{
  if ( a2 && a3 )
  {
    if ( !sub_4DFBB0(a2, 1) )
      *(_BYTE *)(a2 + 440) &= 0xFEu;
    sub_501960(103, a2, 0, 0);
  }
}

//----- (004DFD80) --------------------------------------------------------
_DWORD *__cdecl sub_4DFD80(int a1, int a2)
{
  *(_BYTE *)(a2 + 440) |= 4u;
  return sub_501960(106, a2, 0, 0);
}

//----- (004DFDB0) --------------------------------------------------------
_DWORD *__cdecl sub_4DFDB0(int a1, int a2)
{
  if ( !sub_4DFBB0(a2, 4) )
    *(_BYTE *)(a2 + 440) &= 0xFBu;
  return sub_501960(107, a2, 0, 0);
}

//----- (004DFDE0) --------------------------------------------------------
_DWORD *__cdecl sub_4DFDE0(int a1, int a2)
{
  *(_BYTE *)(a2 + 440) |= 2u;
  return sub_501960(110, a2, 0, 0);
}

//----- (004DFE10) --------------------------------------------------------
_DWORD *__cdecl sub_4DFE10(int a1, int a2)
{
  if ( !sub_4DFBB0(a2, 2) )
    *(_BYTE *)(a2 + 440) &= 0xFDu;
  return sub_501960(111, a2, 0, 0);
}

//----- (004DFE40) --------------------------------------------------------
double __cdecl sub_4DFE40(_DWORD *a1)
{
  double v1; // st7
  double result; // st7
  _DWORD *v3; // edx
  int v4; // eax
  int *v5; // ecx
  int v6; // esi
  int v7; // eax
  int *v8; // ecx
  int v9; // edx
  int v10; // eax
  unsigned __int8 v11; // al
  float v12; // [esp+4h] [ebp-4h]

  v1 = 0.0;
  v12 = 0.0;
  if ( !a1 )
    return 0.0;
  v3 = (_DWORD *)a1[126];
  if ( v3 )
  {
    do
    {
      v4 = v3[4];
      if ( v4 & 0x100 && v3[2] & 0x13001000 )
      {
        v5 = (int *)v3[173];
        v6 = 4;
        do
        {
          v7 = *v5;
          if ( *v5 && *(_DWORD *(__cdecl **)(int, int))(v7 + 112) == sub_4DFD10 )
            v1 = v1 + *(float *)(v7 + 120);
          ++v5;
          --v6;
        }
        while ( v6 );
      }
      v3 = (_DWORD *)v3[124];
    }
    while ( v3 );
    v12 = v1;
  }
  if ( a1[2] & 0x13001000 )
  {
    v8 = (int *)a1[173];
    v9 = 4;
    do
    {
      v10 = *v8;
      if ( *v8 && *(_DWORD *(__cdecl **)(int, int))(v10 + 112) == sub_4DFD10 )
        v1 = v1 + *(float *)(v10 + 120);
      ++v8;
      --v9;
    }
    while ( v9 );
    v12 = v1;
  }
  if ( v1 > 0.5 )
    v12 = 0.5;
  if ( sub_4FF350((int)a1, 17) )
  {
    v11 = sub_4FF570((int)a1, 17);
    result = sub_419D70(&byte_587000[200656], (unsigned int)v11 - 1) + v12;
  }
  else
  {
    result = v12;
  }
  if ( result > 0.60000002 )
    result = 0.60000002;
  return result;
}

//----- (004DFF40) --------------------------------------------------------
double __cdecl sub_4DFF40(_DWORD *a1)
{
  double v1; // st7
  double result; // st7
  _DWORD *v3; // edx
  int v4; // eax
  int *v5; // ecx
  int v6; // esi
  int v7; // eax
  int *v8; // ecx
  int v9; // edx
  int v10; // eax
  unsigned __int8 v11; // al
  float v12; // [esp+4h] [ebp-4h]

  v1 = 0.0;
  v12 = 0.0;
  if ( !a1 )
    return 0.0;
  v3 = (_DWORD *)a1[126];
  if ( v3 )
  {
    do
    {
      v4 = v3[4];
      if ( v4 & 0x100 && v3[2] & 0x13001000 )
      {
        v5 = (int *)v3[173];
        v6 = 4;
        do
        {
          v7 = *v5;
          if ( *v5 && *(_DWORD *(__cdecl **)(int, int))(v7 + 112) == sub_4DFD80 )
            v1 = v1 + *(float *)(v7 + 120);
          ++v5;
          --v6;
        }
        while ( v6 );
      }
      v3 = (_DWORD *)v3[124];
    }
    while ( v3 );
    v12 = v1;
  }
  if ( a1[2] & 0x13001000 )
  {
    v8 = (int *)a1[173];
    v9 = 4;
    do
    {
      v10 = *v8;
      if ( *v8 && *(_DWORD *(__cdecl **)(int, int))(v10 + 112) == sub_4DFD80 )
        v1 = v1 + *(float *)(v10 + 120);
      ++v8;
      --v9;
    }
    while ( v9 );
    v12 = v1;
  }
  if ( v1 >= 0.5 )
    v12 = 0.5;
  if ( sub_4FF350((int)a1, 20) )
  {
    v11 = sub_4FF570((int)a1, 20);
    result = sub_419D70(&byte_587000[200676], (unsigned int)v11 - 1) + v12;
  }
  else
  {
    result = v12;
  }
  if ( result > 0.60000002 )
    result = 0.60000002;
  return result;
}

//----- (004E0040) --------------------------------------------------------
double __cdecl sub_4E0040(_DWORD *a1)
{
  double v1; // st7
  double result; // st7
  _DWORD *v3; // edx
  int v4; // eax
  int *v5; // ecx
  int v6; // esi
  int v7; // eax
  int *v8; // ecx
  int v9; // edx
  int v10; // eax
  unsigned __int8 v11; // al
  float v12; // [esp+4h] [ebp-4h]

  v1 = 0.0;
  v12 = 0.0;
  if ( !a1 )
    return 0.0;
  v3 = (_DWORD *)a1[126];
  if ( v3 )
  {
    do
    {
      v4 = v3[4];
      if ( v4 & 0x100 && v3[2] & 0x13001000 )
      {
        v5 = (int *)v3[173];
        v6 = 4;
        do
        {
          v7 = *v5;
          if ( *v5 && *(_DWORD *(__cdecl **)(int, int))(v7 + 112) == sub_4DFDE0 )
            v1 = v1 + *(float *)(v7 + 120);
          ++v5;
          --v6;
        }
        while ( v6 );
      }
      v3 = (_DWORD *)v3[124];
    }
    while ( v3 );
    v12 = v1;
  }
  if ( a1[2] & 0x13001000 )
  {
    v8 = (int *)a1[173];
    v9 = 4;
    do
    {
      v10 = *v8;
      if ( *v8 && *(_DWORD *(__cdecl **)(int, int))(v10 + 112) == sub_4DFDE0 )
        v1 = v1 + *(float *)(v10 + 120);
      ++v8;
      --v9;
    }
    while ( v9 );
    v12 = v1;
  }
  if ( v1 > 0.69999999 )
    v12 = 0.69999999;
  if ( sub_4FF350((int)a1, 18) )
  {
    v11 = sub_4FF570((int)a1, 18);
    result = sub_419D70(&byte_587000[200704], (unsigned int)v11 - 1) + v12;
  }
  else
  {
    result = v12;
  }
  if ( result > 0.89999998 )
    result = 0.89999998;
  return result;
}

//----- (004E0140) --------------------------------------------------------
_DWORD *__cdecl sub_4E0140(int a1, int a2)
{
  *(_BYTE *)(a2 + 440) |= 0x20u;
  return sub_501960(123, a2, 0, 0);
}

//----- (004E0170) --------------------------------------------------------
void __cdecl sub_4E0170(int a1, int a2)
{
  if ( a2 && *(_BYTE *)(a2 + 8) & 4 )
  {
    if ( !sub_4DFBB0(a2, 32) )
      *(_BYTE *)(a2 + 440) &= 0xDFu;
    sub_501960(124, a2, 0, 0);
  }
}

//----- (004E01B0) --------------------------------------------------------
void sub_4E01B0()
{
  srand(0x2275u);
}

//----- (004E01C0) --------------------------------------------------------
void sub_4E01C0()
{
  srand(0x227Eu);
}

//----- (004E01D0) --------------------------------------------------------
void __cdecl sub_4E01D0(int a1, int a2)
{
  _DWORD *v2; // esi
  unsigned __int16 v3; // di
  unsigned int v4; // edi
  int v5; // eax

  if ( a2 )
  {
    v2 = *(_DWORD **)(a2 + 492);
    if ( v2 )
    {
      if ( v2[139] )
      {
        if ( (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - v2[134]) >= *(int *)&byte_5D4594[2649704]
          && !(v2[4] & 0x8020) )
        {
          v3 = sub_4EE7A0(*(_DWORD *)(a2 + 492));
          if ( (unsigned __int16)sub_4EE780((int)v2) < v3 )
          {
            v4 = *(_DWORD *)(a1 + 108);
            if ( *(_DWORD *)(a2 + 8) & 0x2000000 )
            {
              v5 = sub_415C70(a2);
              if ( v5 & 0x4000 )
                v4 /= 3u;
            }
            if ( !(*(_DWORD *)&byte_5D4594[2598000]
                 % (v4 * *(_DWORD *)&byte_5D4594[2649704] / (unsigned __int16)sub_4EE7A0((int)v2))) )
              sub_4EE460((int)v2, 1);
          }
        }
      }
    }
  }
}

//----- (004E02C0) --------------------------------------------------------
void __cdecl sub_4E02C0(int a1, _DWORD *a2)
{
  int v2; // eax
  int v3; // ecx
  unsigned __int8 v4; // dl
  unsigned __int8 v5; // al
  int v6; // esi
  int v7; // edx
  int v8; // ecx

  if ( a2 )
  {
    if ( !(*(_DWORD *)&byte_5D4594[2598000] % *(_DWORD *)(a1 + 108)) )
    {
      v2 = a2[2];
      v3 = a2[184];
      if ( v2 & 0x1000 )
      {
        v4 = *(_BYTE *)(v3 + 108);
        v5 = *(_BYTE *)(v3 + 109);
        v6 = v4++;
        *(_BYTE *)(v3 + 108) = v4;
        if ( v4 > v5 )
          *(_BYTE *)(v3 + 108) = v5;
        v7 = *(unsigned __int8 *)(v3 + 108);
        if ( v6 != v7 )
        {
          v8 = a2[123];
          if ( v8 )
          {
            if ( *(_BYTE *)(v8 + 8) & 4 )
              sub_4D82B0(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(v8 + 748) + 276) + 2064), a2, v7, v5);
          }
        }
      }
    }
  }
}

//----- (004E0350) --------------------------------------------------------
void sub_4E0350()
{
  srand(0x227Fu);
}

//----- (004E0360) --------------------------------------------------------
void sub_4E0360()
{
  srand(0x2260u);
}

//----- (004E0370) --------------------------------------------------------
float *__cdecl sub_4E0370(int a1, int a2, int a3, int a4, int a5, float *a6)
{
  float *result; // eax

  result = a6;
  *a6 = *(float *)(a1 + 80) * *a6;
  return result;
}

//----- (004E0380) --------------------------------------------------------
float *__cdecl sub_4E0380(int a1, int a2, int a3, int a4, int a5, float *a6)
{
  float *result; // eax

  result = a6;
  *a6 = (1.0 - *(float *)(a1 + 80) + 1.0) * *a6;
  return result;
}

//----- (004E03D0) --------------------------------------------------------
BOOL __cdecl sub_4E03D0(int a1, int a2, int a3, int a4, int a5, BOOL *a6)
{
  BOOL result; // eax

  result = *(_DWORD *)(a1 + 96) >= 1;
  *a6 = result;
  return result;
}

//----- (004E03F0) --------------------------------------------------------
int __cdecl sub_4E03F0(int a1, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // edi
  _DWORD *v6; // eax
  int v7; // eax
  BOOL (__cdecl *v8)(int, int, int, int, int, BOOL *); // ecx
  bool v9; // cc
  _DWORD *i; // [esp+10h] [ebp-4h]
  int v12; // [esp+20h] [ebp+Ch]

  v4 = a3;
  if ( !a3 || !(*(_DWORD *)(a3 + 8) & 0x3001000) )
    return 0;
  v5 = a4;
  v6 = (_DWORD *)(*(_DWORD *)(a3 + 692) + 8);
  v12 = 2;
  for ( i = v6; ; ++i )
  {
    v7 = *v6;
    if ( v7 )
    {
      v8 = *(BOOL (__cdecl **)(int, int, int, int, int, BOOL *))(v7 + 88);
      if ( v8 == sub_4E0480 )
      {
        v8(v7, v4, a2, v5, a1, &a4);
        if ( !a4 )
          break;
      }
    }
    v6 = i + 1;
    v9 = ++v12 < 4;
    if ( !v9 )
      return 0;
  }
  return 1;
}

//----- (004E0480) --------------------------------------------------------
BOOL __cdecl sub_4E0480(int a1, int a2, int a3, int a4, int a5, BOOL *a6)
{
  BOOL result; // eax

  result = *(_DWORD *)(a1 + 96) < 1;
  *a6 = result;
  return result;
}

//----- (004E04A0) --------------------------------------------------------
void sub_4E04A0()
{
  srand(0x2261u);
}

//----- (004E04B0) --------------------------------------------------------
void sub_4E04B0()
{
  srand(0x226Au);
}

//----- (004E04C0) --------------------------------------------------------
float *__cdecl sub_4E04C0(int a1, int a2, int a3, int a4, float *a5)
{
  float *result; // eax

  result = a5;
  *a5 = *(float *)(a1 + 44) * *a5;
  return result;
}

//----- (004E04D0) --------------------------------------------------------
void __cdecl sub_4E04D0(int a1, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // ecx
  int v6; // eax
  int v8; // eax
  int v9[3]; // [esp+4h] [ebp-Ch]

  v4 = a4;
  if ( *(_BYTE *)(a4 + 8) & 6 )
  {
    v5 = *(_DWORD *)(a4 + 60);
    v9[1] = *(_DWORD *)(a4 + 56);
    v6 = *(_DWORD *)(a1 + 60);
    v9[2] = v5;
    v9[0] = a4;
    sub_52C2C0(74, a3, a3, a3, v9, v6);
    if ( *(_BYTE *)(v4 + 8) & 4 )
    {
      v8 = *(_DWORD *)(v4 + 748);
      a4 = 0;
      sub_4DA0F0(*(unsigned __int8 *)(*(_DWORD *)(v8 + 276) + 2064), 13, &a4);
    }
  }
}

//----- (004E0550) --------------------------------------------------------
_DWORD *__cdecl sub_4E0550(int a1, int a2, int a3, int a4)
{
  _DWORD *result; // eax
  float v5; // [esp+8h] [ebp+4h]

  result = (_DWORD *)a1;
  v5 = *(float *)(a1 + 56);
  if ( a4 )
  {
    (*(void (__cdecl **)(int, int, int, _DWORD, int))(a4 + 716))(a4, a3, a2, (__int64)v5, 7);
    sub_5231B0((float *)(a4 + 56), (__int64)(v5 * 10.0));
    result = sub_501960(224, a4, 0, 0);
  }
  return result;
}

//----- (004E05B0) --------------------------------------------------------
int __cdecl sub_4E05B0(int a1, int a2, int a3)
{
  int result; // eax
  int v4; // edx
  int v5[3]; // [esp+0h] [ebp-Ch]

  result = a3;
  if ( a3 )
  {
    v4 = *(_DWORD *)(a3 + 60);
    v5[1] = *(_DWORD *)(a3 + 56);
    v5[2] = v4;
    v5[0] = 0;
    result = sub_52D5C0(10, a3, a3, a3, (int)v5, *(_DWORD *)(a1 + 48));
  }
  return result;
}

//----- (004E05F0) --------------------------------------------------------
int __cdecl sub_4E05F0(int a1, int a2, int a3)
{
  int result; // eax
  int v4; // edx
  int v5[3]; // [esp+0h] [ebp-Ch]

  result = a3;
  if ( a3 )
  {
    v4 = *(_DWORD *)(a3 + 60);
    v5[1] = *(_DWORD *)(a3 + 56);
    v5[2] = v4;
    v5[0] = 0;
    result = sub_52D5C0(11, a3, a3, a3, (int)v5, *(_DWORD *)(a1 + 48));
  }
  return result;
}

//----- (004E0640) --------------------------------------------------------
void __cdecl sub_4E0640(int a1, int a2, int a3, int a4)
{
  if ( a2 )
  {
    if ( a4 )
      sub_52DF80(a2 + 56, a4, *(float *)(a1 + 56));
  }
}

//----- (004E0670) --------------------------------------------------------
void __cdecl sub_4E0670(int a1, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // ecx
  int v6; // eax
  int v8; // eax
  int v9[3]; // [esp+4h] [ebp-Ch]

  v4 = a4;
  if ( *(_BYTE *)(a4 + 8) & 6 )
  {
    v5 = *(_DWORD *)(a4 + 60);
    v9[1] = *(_DWORD *)(a4 + 56);
    v6 = *(_DWORD *)(a1 + 60);
    v9[2] = v5;
    v9[0] = a4;
    sub_52C1E0(12, a3, a3, a3, v9, v6);
    if ( *(_BYTE *)(v4 + 8) & 4 )
    {
      v8 = *(_DWORD *)(v4 + 748);
      a4 = 1;
      sub_4DA0F0(*(unsigned __int8 *)(*(_DWORD *)(v8 + 276) + 2064), 13, &a4);
    }
  }
}

//----- (004E06F0) --------------------------------------------------------
void __cdecl sub_4E06F0(int a1, int a2, int a3, int a4)
{
  if ( a4 )
  {
    (*(void (__cdecl **)(int, int, int, _DWORD, int))(a4 + 716))(a4, a3, a2, (__int64)*(float *)(a1 + 56), 9);
    sub_522FF0(129, (float2 *)(a4 + 56));
    sub_501960(225, a4, 0, 0);
  }
}

//----- (004E0740) --------------------------------------------------------
void __cdecl sub_4E0740(int a1, int a2, int a3, int a4, int *a5)
{
  int v5; // edi
  unsigned __int16 v6; // ax
  __int16 v7; // si

  if ( a3 && a4 && *(_BYTE *)(a4 + 8) & 6 )
  {
    v5 = (__int64)(*(float *)(a1 + 68) * (double)*a5);
    if ( !v5 )
      v5 = 1;
    v6 = sub_4EEC80(a4);
    v7 = v6;
    if ( v6 < v5 )
    {
      sub_4EEBF0(a4, v6);
      sub_4EEB80(a3, v7);
    }
    else
    {
      sub_4EEBF0(a4, v5);
      sub_4EEB80(a3, v5);
    }
  }
}

//----- (004E07C0) --------------------------------------------------------
void __cdecl sub_4E07C0(int a1, int a2, int a3, int a4, int *a5)
{
  int v5; // eax
  int v6; // esi
  int v7; // eax

  if ( a3 )
  {
    if ( a4 )
    {
      v5 = *(_DWORD *)(a4 + 8);
      if ( v5 & 6 )
      {
        if ( !(v5 & 2) || !(*(_BYTE *)(a4 + 12) & 0x40) )
        {
          v6 = (__int64)((double)*a5 * *(float *)(a1 + 68));
          if ( !v6 )
            v6 = 1;
          v7 = (unsigned __int16)sub_4EE780(a4);
          if ( v7 < v6 )
            sub_4EE460(a3, v7);
          else
            sub_4EE460(a3, v6);
        }
      }
    }
  }
}

//----- (004E0850) --------------------------------------------------------
void __cdecl sub_4E0850(int a1, int a2, int a3, int a4)
{
  int v4; // esi
  int v5; // eax

  v4 = a4;
  if ( (!(*(_BYTE *)(a4 + 8) & 4)
     || *(_BYTE *)(*(_DWORD *)(a4 + 748) + 88) != 16
     || !(sub_4E6E50((float2 *)(a4 + 56), *(__int16 *)(a4 + 124), (float2 *)(a3 + 56)) & 1))
    && *(_BYTE *)(v4 + 8) & 6
    && sub_4EE7E0(v4, 1, *(_DWORD *)(a1 + 72)) )
  {
    if ( *(_BYTE *)(v4 + 8) & 4 )
    {
      v5 = *(_DWORD *)(v4 + 748);
      a4 = 2;
      sub_4DA0F0(*(unsigned __int8 *)(*(_DWORD *)(v5 + 276) + 2064), 13, &a4);
    }
  }
}

//----- (004E08E0) --------------------------------------------------------
void __cdecl sub_4E08E0(int a1, int a2, int a3, int a4, int *a5)
{
  int v5; // edi
  int v6; // esi
  int v7; // eax
  int v8; // [esp-8h] [ebp-Ch]
  int v9; // [esp+10h] [ebp+Ch]
  float v10; // [esp+14h] [ebp+10h]

  v5 = a3;
  if ( a3 && a4 && *(_BYTE *)(a4 + 8) & 6 )
  {
    v8 = a4;
    v10 = *(float *)(a1 + 68);
    v6 = *a5;
    v9 = *a5;
    v7 = (unsigned __int16)sub_4EE780(v8);
    if ( v7 < v6 )
      v9 = v7;
    sub_4EE5E0(v5, (__int64)((double)v9 * v10));
  }
}

//----- (004E0960) --------------------------------------------------------
int __cdecl sub_4E0960(int a1)
{
  int v1; // esi
  int v2; // edx
  int i; // ecx

  v1 = *(_DWORD *)(a1 + 692);
  if ( !a1 || !(*(_DWORD *)(a1 + 8) & 0x13001000) )
    return 0;
  v2 = 2;
  for ( i = v1 + 8; !*(_DWORD *)i || *(int (**)())(*(_DWORD *)i + 40) != nullsub_22; i += 4 )
  {
    if ( ++v2 >= 4 )
      return 0;
  }
  return *(_DWORD *)(*(_DWORD *)(v1 + 4 * v2) + 48);
}
// 4E0950: using guessed type void nullsub_22();

//----- (004E09B0) --------------------------------------------------------
int __cdecl sub_4E09B0(int a1, int a2, int a3, int a4, int a5)
{
  int result; // eax

  result = a5;
  *(float *)(a5 + 544) = *(float *)(a1 + 44) * *(float *)(a5 + 544);
  return result;
}

//----- (004E09E0) --------------------------------------------------------
void sub_4E09E0()
{
  srand(0x226Bu);
}

//----- (004E09F0) --------------------------------------------------------
void sub_4E09F0()
{
  srand(0x7DCu);
}

//----- (004E0A00) --------------------------------------------------------
int __cdecl sub_4E0A00(const char *a1)
{
  int v1; // ebp
  const char **v2; // edi

  v1 = 0;
  v2 = (const char **)&byte_587000[200728];
  do
  {
    if ( !strcmp(a1, *v2) )
      break;
    ++v2;
    ++v1;
  }
  while ( (int)v2 < (int)&byte_587000[200800] );
  return v1;
}

//----- (004E0A70) --------------------------------------------------------
int __cdecl sub_4E0A70(int a1, int a2)
{
  int result; // eax
  double v3; // st7
  double v4; // st6
  __int16 v5; // cx
  double v6; // st5
  double v7; // st6
  int v8; // edx
  float v9; // [esp+0h] [ebp-10h]
  float v10; // [esp+4h] [ebp-Ch]
  float v11; // [esp+8h] [ebp-8h]
  float v12; // [esp+8h] [ebp-8h]
  float v13; // [esp+14h] [ebp+4h]

  result = a1;
  v3 = *(float *)(a1 + 56) - *(float *)(a2 + 56);
  v4 = *(float *)(a1 + 60) - *(float *)(a2 + 60);
  *(_WORD *)(a1 + 124) += 128;
  v5 = *(_WORD *)(a1 + 124);
  v11 = -v4;
  v13 = sqrt(v4 * v4 + v3 * v3) + 0.1;
  v6 = (v4 * *(float *)(result + 84) + v3 * *(float *)(result + 80)) / v13;
  v9 = v6 * v3 / v13;
  v10 = v6 * v4 / v13;
  v7 = (v11 * *(float *)(result + 80) + v3 * *(float *)(result + 84)) / v13;
  v12 = v7 * v11 / v13;
  *(float *)(result + 80) = v12 - v9;
  *(float *)(result + 84) = v3 * v7 / v13 - v10;
  if ( v5 >= 256 )
    *(_WORD *)(result + 124) = v5 - 256;
  v8 = *(_DWORD *)(result + 76);
  *(_DWORD *)(result + 64) = *(_DWORD *)(result + 72);
  *(_DWORD *)(result + 68) = v8;
  return result;
}

//----- (004E0B30) --------------------------------------------------------
int __cdecl sub_4E0B30(int a1, int a2, int a3, int a4, int a5)
{
  int v6; // edi
  int v7; // eax
  int v8; // eax
  int v9; // eax
  int v10; // edi
  int v11; // eax
  int v12; // ebp
  int v13; // eax
  int v14; // eax
  int v15; // ebp
  double v16; // st7
  double v17; // st7
  int v18; // eax
  int v19; // ebx
  int v20; // eax
  int v21; // edx
  int v22; // eax
  char v23; // al
  _DWORD *v24; // eax
  int v25; // edx
  int v26; // ecx
  int v27; // eax
  int v28; // eax
  void (__cdecl *v29)(int, int); // eax
  unsigned __int8 v30; // al
  double v31; // st7
  unsigned __int16 v32; // bp
  int v33; // eax
  float v34; // ecx
  int v35; // eax
  float v36; // edx
  char v37; // al
  int v38; // ebp
  int v39; // eax
  int v40; // eax
  float v41; // [esp+0h] [ebp-28h]
  float v42; // [esp+4h] [ebp-24h]
  float v43; // [esp+4h] [ebp-24h]
  float v44; // [esp+4h] [ebp-24h]
  int v45[4]; // [esp+18h] [ebp-10h]
  float v46; // [esp+30h] [ebp+8h]
  float v47; // [esp+30h] [ebp+8h]

  if ( !a1 )
    return 1;
  if ( sub_4FF350(a1, 23) )
  {
    if ( !(byte_5D4594[2598000] & 3) )
    {
      sub_501960(71, a1, 0, 0);
      return 1;
    }
    return 1;
  }
  v6 = a5;
  if ( *(_BYTE *)(a1 + 8) & 2 )
  {
    v7 = *(_DWORD *)(a1 + 748);
    *(_DWORD *)(v7 + 2188) = 0;
    if ( v6 == 1 || v6 == 12 || v6 == 7 || v6 == 14 || v6 == 6 )
      *(_DWORD *)(v7 + 1440) |= 0x80000u;
  }
  v8 = *(_DWORD *)(a1 + 16);
  if ( (v8 & 0x8000) == 0 )
  {
    v10 = a2;
    if ( !sub_417DA0(1) )
    {
      v11 = sub_4EC580(a2);
      v12 = v11;
      if ( v11 )
      {
        if ( *(_BYTE *)(v11 + 8) & 6 && !sub_5330C0(a1, v11) && (a1 != v12 || sub_40A5C0(4096)) )
          return 1;
      }
    }
    if ( a2 && a3 && !sub_5330C0(a1, a2) && *(_BYTE *)(a1 + 8) & 6 && sub_4E1400(a2, (_DWORD *)a3) && !sub_4E1470(a3)
      || *(_BYTE *)(a1 + 16) & 2 )
    {
      return 1;
    }
    if ( a2 )
    {
      if ( sub_4FF350(a1, 22) )
      {
        if ( *(_BYTE *)(a2 + 8) & 6 )
        {
          if ( a3 )
          {
            if ( sub_4E1400(a2, (_DWORD *)a3) )
            {
              sub_501960(135, a2, 0, 0);
              sub_4FF5B0(a1, 22);
              v41 = sub_419D70(&byte_587000[201116], 4);
              v13 = sub_419A70(v41);
              (*(void (__cdecl **)(int, int, _DWORD, int, int))(a2 + 716))(a2, a1, 0, v13, 9);
              if ( *(_BYTE *)(a2 + 8) & 4 )
                sub_4FA020((_DWORD *)a2, 23);
            }
          }
        }
      }
    }
    if ( *(_BYTE *)(a1 + 8) & 2 )
    {
      v14 = *(_DWORD *)(a1 + 12);
      v15 = a5;
      if ( v14 & 0x200 && a5 == 5 )
        return 1;
      if ( v14 & 0x400 )
      {
        if ( a5 == 1 || a5 == 12 )
          return 1;
        if ( a5 == 7 )
        {
          a4 /= 2;
LABEL_53:
          v16 = sub_4DFE40((_DWORD *)a1);
          if ( v16 != 0.0 && !(byte_5D4594[2598000] & 3) )
            sub_501960(104, a1, 0, 0);
          v46 = v16;
          v42 = (1.0 - v46) * (double)a4;
          a4 = sub_419A70(v42);
          if ( !a4 )
            a4 = 1;
LABEL_58:
          if ( v15 == 9 || v15 == 17 )
          {
            v17 = sub_4DFF40((_DWORD *)a1);
            if ( v17 != 0.0 && !(byte_5D4594[2598000] & 3) )
              sub_501960(108, a1, 0, 0);
            v47 = v17;
            v43 = (1.0 - v47) * (double)a4;
            a4 = sub_419A70(v43);
            if ( !a4 )
              a4 = 1;
            v18 = *(_DWORD *)(a1 + 8);
            if ( v18 & 4 )
            {
              *(_WORD *)(*(_DWORD *)(a1 + 748) + 160) = 2;
            }
            else if ( v18 & 2 && *(_BYTE *)(a1 + 12) & 0x10 )
            {
              *(_BYTE *)(*(_DWORD *)(a1 + 748) + 2094) = 2;
            }
          }
          if ( !v10 )
          {
            *(_DWORD *)(a1 + 528) = 0;
            *(_DWORD *)(a1 + 532) = 0;
            if ( v15 == 12 )
              sub_4FF5B0(a1, 0);
            v19 = a3;
LABEL_87:
            v22 = *(_DWORD *)(a1 + 8);
            if ( v22 & 4 || v22 & 2 && *(_BYTE *)(a1 + 12) & 0x10 )
              sub_4E1320(a1, v10, v19, &a4, v15);
            if ( v19 )
              *(_DWORD *)(a1 + 520) = v19;
            else
              *(_DWORD *)(a1 + 520) = v10;
            v23 = *(_BYTE *)(a1 + 8);
            *(_DWORD *)(a1 + 524) = v15;
            *(_DWORD *)(a1 + 536) = *(_DWORD *)&byte_5D4594[2598000];
            if ( v23 & 2 )
            {
              v24 = *(_DWORD **)(a1 + 748);
              v25 = v24[360];
              v26 = v24[547];
              BYTE1(v25) |= 2u;
              v24[360] = v25;
              if ( !v26 )
              {
                v24[547] = 2;
                v24[546] = v15;
              }
            }
            if ( v19 && *(_DWORD *)(v19 + 8) & 0x1001000 )
              sub_4E13B0(a1, v10, v19, (int)&a4);
            if ( a1 != v19 || !(*(_DWORD *)(a1 + 8) & 0x1001000) )
            {
              if ( !v10
                || !(*(_BYTE *)(v10 + 8) & 2)
                || !*(_DWORD *)(v10 + 748)
                || (v27 = sub_424300(v10)) == 0
                || (v28 = *(_DWORD *)(v27 + 32)) == 0
                || sub_501940(v28) <= 0 )
              {
                v29 = *(void (__cdecl **)(int, int))(a1 + 720);
                if ( v29 )
                {
                  if ( v19 )
                    v29(a1, v19);
                  else
                    v29(a1, v10);
                }
                else if ( v19 )
                {
                  sub_532E20(a1, v19);
                }
                else
                {
                  sub_532E20(a1, v10);
                }
              }
            }
            if ( v10 && *(_BYTE *)(a1 + 8) & 6 && sub_4FF350(v10, 13) )
            {
              sub_501960(163, a3, 0, 0);
              v30 = sub_4FF570(v10, 13);
              v31 = sub_419D70(&byte_587000[201128], (unsigned int)v30 - 1);
              v44 = v31 * (double)a4;
              v32 = sub_419A70(v44);
              if ( v32 < 1u )
                v32 = 1;
              sub_4EE460(v10, v32);
              v45[0] = sub_419A70(*(float *)(v10 + 56));
              v33 = sub_419A70(*(float *)(v10 + 60));
              v34 = *(float *)(a1 + 56);
              v45[1] = v33;
              v35 = sub_419A70(v34);
              v36 = *(float *)(a1 + 60);
              v45[2] = v35;
              v45[3] = sub_419A70(v36);
              sub_523270(162, (__int16 *)v45, v32);
            }
            sub_4E1230(v10, a1, a4);
            if ( *(_BYTE *)(a1 + 8) & 4 )
            {
              if ( a4 >= 20 )
              {
                v37 = *(_BYTE *)(*(_DWORD *)(a1 + 748) + 88);
                if ( v37 != 1 && v37 != 15 )
                  sub_4FA020((_DWORD *)a1, 30);
              }
            }
            if ( sub_40A5C0(6144) )
              sub_4FB050(v10, a1, &a4);
            if ( !v10 )
              goto LABEL_137;
            if ( *(_BYTE *)(v10 + 8) & 2 )
            {
              v38 = v10;
            }
            else
            {
              v39 = *(_DWORD *)(v10 + 508);
              if ( !v39 || !(*(_BYTE *)(v39 + 8) & 2) )
              {
LABEL_137:
                if ( sub_4FF350(a1, 26) && a5 != 5 )
                {
                  v40 = a3;
                  if ( !a3 )
                    v40 = v10;
                  if ( a5 != 15 || v10 != a1 )
                    sub_52F710(a1, &a4, a5, v40);
                  if ( !a4 )
                    return 0;
                }
                sub_4EE5E0(a1, a4);
                return 1;
              }
              v38 = *(_DWORD *)(v10 + 508);
            }
            if ( v38 && sub_5330C0(a1, v38) )
              sub_532880(v38);
            goto LABEL_137;
          }
          v19 = a3;
          if ( a3 )
          {
            if ( *(_DWORD *)(a3 + 8) & 0x1001000 )
            {
              *(_DWORD *)(a1 + 528) = *(_DWORD *)(v10 + 72);
              *(_DWORD *)(a1 + 532) = *(_DWORD *)(v10 + 76);
            }
            else
            {
              *(_DWORD *)(a1 + 528) = *(_DWORD *)(a3 + 72);
              *(_DWORD *)(a1 + 532) = *(_DWORD *)(a3 + 76);
            }
            if ( a3 == v10 || !(*(_BYTE *)(a1 + 8) & 2) )
              goto LABEL_83;
            v20 = *(_DWORD *)(a1 + 748);
            HIWORD(v21) = 0;
            *(_DWORD *)(v20 + 2188) = 1;
            LOWORD(v21) = *(_WORD *)(a3 + 4);
          }
          else
          {
            *(_DWORD *)(a1 + 528) = *(_DWORD *)(v10 + 72);
            *(_DWORD *)(a1 + 532) = *(_DWORD *)(v10 + 76);
            if ( v15 != 10 && v15 != 2 || !(*(_BYTE *)(a1 + 8) & 2) )
              goto LABEL_83;
            v20 = *(_DWORD *)(a1 + 748);
            HIWORD(v21) = 0;
            *(_DWORD *)(v20 + 2188) = 1;
            LOWORD(v21) = *(_WORD *)(v10 + 4);
          }
          *(_DWORD *)(v20 + 2184) = v21;
LABEL_83:
          sub_4FF5B0(a1, 0);
          goto LABEL_87;
        }
      }
      else if ( v14 & 0x800 )
      {
        if ( a5 == 9 )
          return 1;
        if ( a5 == 17 )
          return 1;
      }
    }
    else
    {
      v15 = a5;
    }
    if ( v15 != 1 && v15 != 12 && v15 != 7 )
      goto LABEL_58;
    goto LABEL_53;
  }
  if ( !sub_534A40(a1) )
    return 1;
  v9 = a3;
  if ( !a3 )
    v9 = a2;
  *(_DWORD *)(a1 + 520) = v9;
  *(_DWORD *)(a1 + 524) = v6;
  *(_DWORD *)(a1 + 536) = *(_DWORD *)&byte_5D4594[2598000];
  return 1;
}

//----- (004E1230) --------------------------------------------------------
void __cdecl sub_4E1230(int a1, int a2, int a3)
{
  int v3; // eax
  int v4; // esi
  char *v5; // eax

  if ( *(_BYTE *)(a2 + 8) & 4 && a3 >= 30 )
  {
    v3 = *(_DWORD *)&byte_5D4594[1563316];
    if ( !*(_DWORD *)&byte_5D4594[1563316] )
    {
      v3 = sub_4E3AA0((CHAR *)&byte_587000[201144]);
      *(_DWORD *)&byte_5D4594[1563316] = v3;
    }
    v4 = *(_DWORD *)(a2 + 516);
    if ( v4 )
    {
      while ( *(unsigned __int16 *)(v4 + 4) != v3 )
      {
        v4 = *(_DWORD *)(v4 + 512);
        if ( !v4 )
          return;
      }
      *(_DWORD *)(v4 + 16) &= 0xFFFFFFBF;
      sub_52DF80(a2 + 56, v4, 30.0);
      sub_4EC300(v4);
      sub_4EB9B0(v4, a2);
      if ( sub_419130(v4 + 48) )
      {
        v5 = sub_418AB0(*(unsigned __int8 *)(a1 + 52));
        if ( v5 )
          sub_4196D0(v4 + 48, (int)v5, *(_DWORD *)(v4 + 36), 0);
      }
      else
      {
        sub_4191D0(*(_BYTE *)(a1 + 52), v4 + 48, 1, *(_DWORD *)(v4 + 36), 0);
      }
      sub_501960(926, a2, 0, 0);
    }
  }
}

//----- (004E1320) --------------------------------------------------------
int __cdecl sub_4E1320(int a1, int a2, int a3, int *a4, int a5)
{
  int result; // eax
  _DWORD *v6; // esi
  int v7; // ebp
  int *v8; // ebx
  int v9; // eax
  int2 v10; // [esp+4h] [ebp-8h]
  int v11; // [esp+20h] [ebp+14h]

  result = a1;
  v6 = *(_DWORD **)(a1 + 504);
  if ( v6 )
  {
    v7 = a5;
    do
    {
      result = v6[4];
      if ( result & 0x100 )
      {
        v11 = 2;
        v8 = (int *)(v6[173] + 8);
        do
        {
          v9 = *v8;
          if ( *v8 )
          {
            if ( *(_DWORD *)(v9 + 76) )
            {
              v10.field_0 = *a4;
              v10.field_4 = v7;
              (*(void (__cdecl **)(int, _DWORD *, int, int, int, int2 *))(v9 + 76))(v9, v6, a1, a3, a2, &v10);
              *a4 = v10.field_0;
            }
          }
          ++v8;
          result = --v11;
        }
        while ( v11 );
      }
      v6 = (_DWORD *)v6[124];
    }
    while ( v6 );
  }
  return result;
}

//----- (004E13B0) --------------------------------------------------------
int __cdecl sub_4E13B0(int a1, int a2, int a3, int a4)
{
  int v4; // edi
  int *v5; // esi
  int v6; // eax
  void (__cdecl *v7)(int, int, int, int, int); // ecx
  int result; // eax
  int v9; // [esp+1Ch] [ebp+Ch]

  v4 = a3;
  v9 = 4;
  v5 = *(int **)(v4 + 692);
  do
  {
    v6 = *v5;
    if ( *v5 )
    {
      v7 = *(void (__cdecl **)(int, int, int, int, int))(v6 + 64);
      if ( v7 )
        v7(v6, v4, a2, a1, a4);
    }
    ++v5;
    result = --v9;
  }
  while ( v9 );
  return result;
}

//----- (004E1400) --------------------------------------------------------
int __cdecl sub_4E1400(int a1, _DWORD *a2)
{
  int v2; // eax
  int result; // eax
  int v4; // eax

  if ( a2 )
  {
    v4 = a2[2];
    if ( v4 & 0x1000 )
    {
      if ( !(a2[3] & 0x47F0000) )
        return 1;
      if ( *(_BYTE *)(a2[184] + 96) & 2 )
        return 1;
    }
    else if ( v4 & 0x1000000 && !(a2[3] & 0x47F00FE) )
    {
      return 1;
    }
    result = ((unsigned __int8)v4 >> 1) & 1;
  }
  else
  {
    v2 = *(_DWORD *)(a1 + 8);
    if ( v2 & 4 )
      return 1;
    result = v2 & 2 && *(_BYTE *)(a1 + 12) & 0x10;
  }
  return result;
}

//----- (004E1470) --------------------------------------------------------
BOOL __cdecl sub_4E1470(int a1)
{
  int v1; // ecx
  BOOL result; // eax

  result = 0;
  if ( a1 )
  {
    if ( *(_DWORD *)(a1 + 8) & 0x1000000 )
    {
      v1 = *(_DWORD *)(a1 + 12);
      if ( v1 & 0x4000 )
        result = 1;
    }
  }
  return result;
}

//----- (004E14A0) --------------------------------------------------------
int sub_4E14A0()
{
  return 0;
}

//----- (004E14B0) --------------------------------------------------------
int __cdecl sub_4E14B0(int a1, int a2, int a3, int a4, int a5)
{
  int result; // eax

  if ( a1 && *(_DWORD *)(a1 + 8) & 0x1001000 && (*(_DWORD *)(a1 + 492) || a5 == 12) )
    result = sub_4E0B30(a1, a2, a3, a4, a5);
  else
    result = 0;
  return result;
}

//----- (004E1500) --------------------------------------------------------
int __cdecl sub_4E1500(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // eax
  int result; // eax

  if ( *(_DWORD *)(a1 + 8) & 0x2000000
    && (*(_DWORD *)(a1 + 492) || a5 == 12)
    && (a5 != 2 || !(*(_BYTE *)(a1 + 24) & 0x10) ? (v5 = a4) : (v5 = 2 * a4), v5) )
  {
    result = sub_4E0B30(a1, a2, a3, v5, a5);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004E1560) --------------------------------------------------------
void __cdecl sub_4E1560(int a1, int a2, int a3, int a4, float a5, int a6)
{
  float *v6; // edi
  int v7; // eax
  void (__cdecl *v8)(int, int, int, int, int, float *); // ecx
  int v9; // eax
  unsigned __int16 v10; // di
  unsigned __int16 v11; // ax

  if ( a1 )
  {
    if ( *(_DWORD *)(a1 + 556) )
    {
      v6 = *(float **)(a1 + 748);
      if ( !(*(_DWORD *)(a1 + 8) & 0x1000000) || !(*(_DWORD *)(a1 + 12) & 0x7800000) )
      {
        v7 = *(_DWORD *)(*(_DWORD *)(a1 + 692) + 4);
        if ( v7 )
        {
          v8 = *(void (__cdecl **)(int, int, int, int, int, float *))(v7 + 76);
          if ( v8 )
            v8(v7, a1, a2, a4, a3, &a5);
        }
        a5 = a5 + *v6;
        v9 = sub_419A70(a5);
        *v6 = a5 - (double)v9;
        if ( v9 > 0 )
        {
          v10 = **(_WORD **)(a1 + 556);
          (*(void (__cdecl **)(int, int, int, int, int))(a1 + 716))(a1, a3, a4, v9, a6);
          if ( a2 )
          {
            if ( *(_BYTE *)(a2 + 8) & 4 )
            {
              v11 = **(_WORD **)(a1 + 556);
              if ( v10 != v11 )
                sub_4E1650(
                  *(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(a2 + 748) + 276) + 2064),
                  (_DWORD *)a1,
                  v10,
                  v11);
            }
          }
        }
      }
    }
  }
}

//----- (004E1650) --------------------------------------------------------
int __cdecl sub_4E1650(int a1, _DWORD *a2, unsigned __int16 a3, unsigned __int16 a4)
{
  int result; // eax
  int v5; // edi

  result = a2[139];
  if ( result )
  {
    if ( sub_40A5C0(2048) )
    {
      result = sub_4D87A0(a1, a2);
    }
    else
    {
      v5 = sub_57B190(a3, *(_WORD *)(a2[139] + 4));
      result = sub_57B190(a4, *(_WORD *)(a2[139] + 4));
      if ( v5 != result )
        result = sub_4D87A0(a1, a2);
    }
  }
  return result;
}

//----- (004E16D0) --------------------------------------------------------
void __cdecl sub_4E16D0(int a1, int a2, int a3, int a4, float a5, int a6)
{
  float *v6; // edi
  int v7; // eax
  void (__cdecl *v8)(int, int, int, int, int, float *); // ecx
  int v9; // eax
  unsigned __int16 v10; // di
  unsigned __int16 v11; // ax

  if ( a1 && *(_DWORD *)(a1 + 556) )
  {
    v6 = *(float **)(a1 + 748);
    v7 = *(_DWORD *)(*(_DWORD *)(a1 + 692) + 4);
    if ( v7 )
    {
      v8 = *(void (__cdecl **)(int, int, int, int, int, float *))(v7 + 76);
      if ( v8 )
        v8(v7, a1, a2, a4, a3, &a5);
    }
    a5 = a5 + *v6;
    v9 = sub_419A70(a5);
    *v6 = a5 - (double)v9;
    if ( v9 > 0 )
    {
      v10 = **(_WORD **)(a1 + 556);
      (*(void (__cdecl **)(int, int, int, int, int))(a1 + 716))(a1, a3, a4, v9, a6);
      if ( *(_BYTE *)(a2 + 8) & 4 )
      {
        v11 = **(_WORD **)(a1 + 556);
        if ( v10 != v11 )
          sub_4E1650(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(a2 + 748) + 276) + 2064), (_DWORD *)a1, v10, v11);
      }
    }
  }
}

//----- (004E17B0) --------------------------------------------------------
int __cdecl sub_4E17B0(int a1, int a2, int a3, int a4, float a5)
{
  int v5; // esi
  int v6; // eax
  BOOL v8; // eax
  int v9; // ebx
  int v10; // edx
  int v11; // ecx
  int v12; // edi
  int *v13; // eax
  int v14; // ebp
  float v15; // eax
  float2 *v16; // ebp
  int v17; // ecx
  int v18; // eax
  int v19; // edx
  int v20; // eax
  BOOL v21; // ecx
  int v22; // eax
  int v23; // eax
  int v24; // eax
  int v25; // ebp
  double v26; // st7
  int v27; // ebp
  char v28; // al
  int v29; // eax
  double v30; // st7
  char v31; // al
  double v32; // st7
  int v33; // ebp
  int v34; // eax
  double v35; // st7
  float v36; // edx
  float v37; // eax
  int v38; // eax
  float v39; // ecx
  float v40; // edx
  int v41; // eax
  float v42; // ebx
  int v43; // eax
  int v44; // edi
  int v45; // eax
  float v46; // [esp+0h] [ebp-2Ch]
  float v47; // [esp+0h] [ebp-2Ch]
  float v48; // [esp+0h] [ebp-2Ch]
  float v49; // [esp+4h] [ebp-28h]
  float v50; // [esp+4h] [ebp-28h]
  float v51; // [esp+4h] [ebp-28h]
  float v52; // [esp+4h] [ebp-28h]
  float v53; // [esp+18h] [ebp-14h]
  int v54; // [esp+1Ch] [ebp-10h]
  int v55; // [esp+20h] [ebp-Ch]
  float2 a3a; // [esp+24h] [ebp-8h]

  v5 = a1;
  v6 = *(_DWORD *)(a1 + 16);
  if ( v6 & 2 || (v6 & 0x8000) != 0 )
    return 0;
  if ( sub_4FF350(a1, 23) )
  {
    if ( !(byte_5D4594[2598000] & 3) )
      sub_501960(71, v5, 0, 0);
    return 1;
  }
  v8 = sub_40A5C0(2048);
  v9 = a2;
  if ( v8 )
  {
    if ( sub_4EC580(a2) == v5 && *(_BYTE *)(v5 + 8) & 4 && LODWORD(a5) != 15 )
      return 0;
  }
  if ( a3 )
    v9 = a3;
  v10 = *(_DWORD *)(v5 + 8);
  v11 = *(_DWORD *)(v5 + 8) & 4;
  if ( v11 )
  {
    v12 = *(_DWORD *)(v5 + 748);
    v13 = *(int **)(v12 + 276);
    v14 = v13[1];
    v54 = *v13;
    v15 = *(float *)(v12 + 228);
    v55 = v14;
  }
  else
  {
    if ( !(v10 & 2) || !(*(_BYTE *)(v5 + 12) & 0x10) )
      return 0;
    v12 = *(_DWORD *)(v5 + 748);
    v55 = *(_DWORD *)(v12 + 2056);
    v54 = *(_DWORD *)(v12 + 2060);
    v15 = *(float *)(v12 + 2072);
  }
  v53 = v15;
  if ( v11 )
  {
    if ( *(_BYTE *)(*(_DWORD *)(v12 + 276) + 3680) & 1 )
      return 0;
  }
  if ( v11 )
  {
    *(_DWORD *)(v12 + 304) = 0;
  }
  else if ( v10 & 2 )
  {
    *(_DWORD *)(v12 + 2188) = 0;
  }
  if ( *(_BYTE *)(v5 + 8) & 4 && sub_4DDF30(v5) )
    sub_4DDEF0(v5);
  if ( sub_4FF350(v5, 27) && v9 )
  {
    if ( *(_BYTE *)(v9 + 8) & 1 )
    {
      v16 = (float2 *)(v5 + 56);
      if ( sub_4E6E50((float2 *)(v5 + 56), *(__int16 *)(v5 + 124), (float2 *)(v9 + 56)) & 1 )
      {
        sub_4E0A70(v9, v5);
        if ( !(*(_BYTE *)(v9 + 12) & 0x40) )
        {
          sub_4EC300(v9);
          sub_4EC290(v5, v9);
        }
        if ( *(_BYTE *)(v9 + 8) & 1 && *(_BYTE *)(v9 + 12) & 2 )
          sub_52BE40(v9, v5);
        goto LABEL_36;
      }
    }
    else if ( LODWORD(a5) == 16 || LODWORD(a5) == 17 )
    {
      v16 = (float2 *)(v5 + 56);
      if ( sub_4E6E50((float2 *)(v5 + 56), *(__int16 *)(v5 + 124), (float2 *)(v9 + 56)) & 1 )
      {
LABEL_36:
        if ( LODWORD(a5) == 16 )
          sub_522FF0(132, v16);
        sub_501960(122, v5, 0, 0);
        return 0;
      }
    }
  }
  if ( !a2 )
    goto LABEL_120;
  v17 = *(_DWORD *)&byte_5D4594[1563320];
  if ( !*(_DWORD *)&byte_5D4594[1563320] )
  {
    *(_DWORD *)&byte_5D4594[1563320] = sub_4E3AA0((CHAR *)&byte_587000[201156]);
    *(_DWORD *)&byte_5D4594[1563324] = sub_4E3AA0((CHAR *)&byte_587000[201168]);
    *(_DWORD *)&byte_5D4594[1563328] = sub_4E3AA0((CHAR *)&byte_587000[201180]);
    *(_DWORD *)&byte_5D4594[1563332] = sub_4E3AA0((CHAR *)&byte_587000[201192]);
    *(_DWORD *)&byte_5D4594[1563336] = sub_4E3AA0((CHAR *)&byte_587000[201200]);
    v18 = sub_4E3AA0((CHAR *)&byte_587000[201212]);
    v17 = *(_DWORD *)&byte_5D4594[1563320];
    *(_DWORD *)&byte_5D4594[1563340] = v18;
  }
  v19 = a3;
  if ( a3 )
  {
    a3a = *(float2 *)(a3 + 72);
    v20 = *(unsigned __int16 *)(a3 + 4);
    v21 = (unsigned __int16)v20 != v17
       && v20 != *(_DWORD *)&byte_5D4594[1563324]
       && v20 != *(_DWORD *)&byte_5D4594[1563328]
       && v20 != *(_DWORD *)&byte_5D4594[1563332]
       && v20 != *(_DWORD *)&byte_5D4594[1563336]
       && v20 != *(_DWORD *)&byte_5D4594[1563340];
    if ( a2 != a3 )
    {
      v22 = *(_DWORD *)(v5 + 8);
      if ( v22 & 4 )
      {
LABEL_56:
        *(_DWORD *)(v12 + 304) = 1;
        *(_DWORD *)(v12 + 300) = *(unsigned __int16 *)(v19 + 4);
        goto LABEL_70;
      }
      if ( !(v22 & 2) )
        goto LABEL_70;
LABEL_69:
      *(_DWORD *)(v12 + 2188) = 1;
      *(_DWORD *)(v12 + 2184) = *(unsigned __int16 *)(v19 + 4);
      goto LABEL_70;
    }
  }
  else
  {
    v19 = a2;
    a3a = *(float2 *)(a2 + 72);
    v23 = *(unsigned __int16 *)(a2 + 4);
    v21 = (unsigned __int16)v23 != v17
       && v23 != *(_DWORD *)&byte_5D4594[1563324]
       && v23 != *(_DWORD *)&byte_5D4594[1563328]
       && v23 != *(_DWORD *)&byte_5D4594[1563332];
    if ( LODWORD(a5) == 10 || LODWORD(a5) == 2 )
    {
      v24 = *(_DWORD *)(v5 + 8);
      if ( v24 & 4 )
        goto LABEL_56;
      if ( !(v24 & 2) )
        goto LABEL_70;
      goto LABEL_69;
    }
  }
LABEL_70:
  if ( LODWORD(a5) == 15 || !v21 || !(sub_4E6E50((float2 *)(v5 + 56), *(__int16 *)(v5 + 124), &a3a) & 1) )
    goto LABEL_120;
  if ( *(_BYTE *)(v5 + 8) & 4 )
  {
    if ( *(_BYTE *)(v12 + 88) != 16 )
      goto LABEL_86;
  }
  else if ( sub_50A020(v5) != 21 )
  {
    goto LABEL_86;
  }
  if ( !(v54 & 0x3000000) )
  {
LABEL_86:
    if ( v55 & 0x400 )
    {
      v27 = LODWORD(a5);
      if ( *(_BYTE *)(v9 + 8) & 1 || a5 == 0.0 || LODWORD(a5) == 11 )
      {
        if ( *(_BYTE *)(v5 + 8) & 4 )
        {
          v28 = *(_BYTE *)(v12 + 88);
          if ( v28 != 13 && v28 != 18 && v28 != 19 && v28 != 20 )
            goto LABEL_120;
        }
        else if ( !sub_534340(v5) )
        {
          goto LABEL_120;
        }
        if ( *(_BYTE *)(v9 + 8) & 1 )
        {
          sub_4E0A70(v9, v5);
          if ( *(_BYTE *)(v9 + 8) & 1 )
          {
            if ( !(*(_BYTE *)(v9 + 12) & 2) )
            {
              sub_4EC300(v9);
              sub_4EC290(v5, v9);
            }
          }
        }
        sub_501960(890, v5, 0, 0);
        if ( *(_BYTE *)(v5 + 8) & 4 )
        {
          v29 = sub_415FA0(18, 20);
          sub_4FA020((_DWORD *)v5, v29);
        }
        else
        {
          sub_50A360(v5, 23);
        }
        v30 = sub_419D40(&byte_587000[201308]);
        v47 = v30 * (double)a4;
        sub_4E22A0(v5, a2, a3, 1024, v47, v27);
        return 0;
      }
    }
    else
    {
      v27 = LODWORD(a5);
    }
    if ( !(v55 & 0x7FF8000) || v27 && v27 != 11 || *(_BYTE *)(v9 + 8) & 1 )
      goto LABEL_120;
    if ( *(_BYTE *)(v5 + 8) & 4 )
    {
      v31 = *(_BYTE *)(v12 + 88);
      if ( v31 != 13 && v31 != 21 )
        goto LABEL_120;
    }
    else if ( !sub_534340(v5) )
    {
      goto LABEL_120;
    }
    sub_501960(894, v5, 0, 0);
    if ( *(_BYTE *)(v5 + 8) & 4 )
      sub_4FA020((_DWORD *)v5, 21);
    else
      sub_50A360(v5, 23);
    v32 = sub_419D40(&byte_587000[201340]);
    v48 = v32 * (double)a4;
    sub_4E22A0(v5, a2, a3, 134184960, v48, v27);
    return 0;
  }
  v25 = LODWORD(a5);
  if ( LODWORD(a5) != 9 && LODWORD(a5) != 17 )
  {
    sub_501960(878, v5, 0, 0);
    if ( *(_BYTE *)(v9 + 8) & 1 )
    {
      if ( !(*(_BYTE *)(v9 + 12) & 0x70) )
      {
        sub_4E0A70(v9, v5);
        if ( *(_BYTE *)(v9 + 8) & 1 )
        {
          if ( !(*(_BYTE *)(v9 + 12) & 2) )
          {
            sub_4EC300(v9);
            sub_4EC290(v5, v9);
          }
        }
      }
    }
    v26 = sub_419D40(&byte_587000[201228]);
    v46 = v26 * (double)a4;
    sub_4E2330(v5, a2, a3, 2, v46, v25);
    return 0;
  }
LABEL_120:
  switch ( LODWORD(a5) )
  {
    case 0:
    case 3:
    case 7:
    case 8:
    case 0xA:
    case 0xB:
      v51 = (1.0 - v53) * (double)a4;
      sub_4E20F0(v5, (int)&a1, v51);
      v33 = a4;
      v42 = a5;
      sub_4E2180(v5, a2, a3, a4 - a1, a5);
      v43 = *(_DWORD *)(v5 + 8);
      if ( v43 & 4 )
      {
        if ( !*(_DWORD *)(v12 + 304) )
        {
          *(_DWORD *)(v12 + 304) = 2;
          *(float *)(v12 + 300) = v42;
        }
      }
      else if ( v43 & 2 && !*(_DWORD *)(v12 + 2188) )
      {
        *(_DWORD *)(v12 + 2188) = 2;
        *(float *)(v12 + 2184) = v42;
      }
      break;
    case 1:
    case 0xC:
      v33 = a4;
      a1 = a4;
      sub_4E2180(v5, a2, a3, a4, a5);
      v34 = *(_DWORD *)(v5 + 8);
      if ( !(v34 & 4) )
        goto LABEL_126;
      goto LABEL_124;
    case 2:
      v50 = (1.0 - v53 * 0.5) * (double)a4;
      sub_4E20F0(v5, (int)&a1, v50);
      v33 = a4;
      sub_4E2180(v5, a2, a3, a4 - a1, COERCE_FLOAT(2));
      v41 = *(_DWORD *)(v5 + 8);
      if ( v41 & 4 )
      {
        if ( !*(_DWORD *)(v12 + 304) )
        {
          *(_DWORD *)(v12 + 304) = 2;
          *(_DWORD *)(v12 + 300) = 2;
        }
      }
      else if ( v41 & 2 && !*(_DWORD *)(v12 + 2188) )
      {
        *(_DWORD *)(v12 + 2188) = 2;
        *(_DWORD *)(v12 + 2184) = 2;
      }
      break;
    case 4:
    case 5:
    case 6:
    case 0xE:
    case 0xF:
    case 0x10:
      v38 = *(_DWORD *)(v5 + 8);
      v33 = a4;
      a1 = a4;
      if ( v38 & 4 )
      {
        if ( !*(_DWORD *)(v12 + 304) )
        {
          v39 = a5;
          *(_DWORD *)(v12 + 304) = 2;
          *(float *)(v12 + 300) = v39;
        }
      }
      else if ( v38 & 2 && !*(_DWORD *)(v12 + 2188) )
      {
        v40 = a5;
        *(_DWORD *)(v12 + 2188) = 2;
        *(float *)(v12 + 2184) = v40;
      }
      break;
    case 9:
    case 0x11:
      v35 = sub_4E2220(v5);
      v49 = v35 * (double)a4;
      sub_4E20F0(v5, (int)&a1, v49);
      v33 = a4;
      sub_4E2180(v5, a2, a3, a4, a5);
      v34 = *(_DWORD *)(v5 + 8);
      if ( v34 & 4 )
      {
LABEL_124:
        if ( !*(_DWORD *)(v12 + 304) )
        {
          v36 = a5;
          *(_DWORD *)(v12 + 304) = 2;
          *(float *)(v12 + 300) = v36;
        }
      }
      else
      {
LABEL_126:
        if ( v34 & 2 && !*(_DWORD *)(v12 + 2188) )
        {
          v37 = a5;
          *(_DWORD *)(v12 + 2188) = 2;
          *(float *)(v12 + 2184) = v37;
        }
      }
      break;
    default:
      v33 = a4;
      a1 = a4;
      break;
  }
  if ( v33 > 0 && !a1 )
    a1 = 1;
  if ( byte_5D4594[2650636] & 0x20 && *(_BYTE *)(v5 + 8) & 4 )
    return 1;
  if ( sub_40A5C0(4096) )
  {
    v44 = a1;
    v52 = sub_4E40B0() * (double)a1;
    v45 = sub_419A70(v52);
    a1 = v45;
    if ( v44 > 0 && v45 < 1 )
    {
      v45 = 1;
      a1 = 1;
    }
  }
  else
  {
    v45 = a1;
  }
  return sub_4E0B30(v5, a2, a3, v45, SLODWORD(a5));
}

//----- (004E20F0) --------------------------------------------------------
void __cdecl sub_4E20F0(int a1, int a2, float a3)
{
  int v3; // esi
  int v4; // eax
  double v5; // st7
  int v6; // eax
  int v7; // eax
  int v8; // [esp+Ch] [ebp+4h]

  v3 = a1;
  if ( a1 && a2 )
  {
    v4 = *(_DWORD *)(a1 + 8);
    if ( v4 & 4 )
    {
      v5 = a3 + *(float *)(*(_DWORD *)(a1 + 748) + 84);
    }
    else
    {
      if ( !(v4 & 2) )
        goto LABEL_8;
      v5 = a3 + *(float *)(*(_DWORD *)(a1 + 748) + 4);
    }
    a3 = v5;
LABEL_8:
    v6 = sub_419A70(a3);
    v8 = v6;
    *(_DWORD *)a2 = v6;
    v7 = *(_DWORD *)(v3 + 8);
    if ( v7 & 4 )
    {
      *(float *)(*(_DWORD *)(v3 + 748) + 84) = a3 - (double)v8;
    }
    else if ( v7 & 2 )
    {
      *(float *)(*(_DWORD *)(v3 + 748) + 4) = a3 - (double)v8;
    }
  }
}

//----- (004E2180) --------------------------------------------------------
void __cdecl sub_4E2180(int a1, int a2, int a3, int a4, float a5)
{
  int v5; // edi
  int v6; // eax
  _DWORD *v7; // esi
  int v8; // ebx
  int v9; // eax
  int v10; // [esp+Ch] [ebp+4h]
  float v11; // [esp+1Ch] [ebp+14h]

  v5 = a1;
  v6 = *(_DWORD *)(a1 + 8);
  if ( v6 & 4 )
  {
    v10 = *(int *)(*(_DWORD *)(a1 + 748) + 228);
  }
  else
  {
    if ( !(v6 & 2) || !(*(_BYTE *)(a1 + 12) & 0x10) )
      return;
    v10 = *(int *)(*(_DWORD *)(a1 + 748) + 2072);
  }
  v7 = *(_DWORD **)(v5 + 504);
  if ( v7 )
  {
    v8 = LODWORD(a5);
    do
    {
      if ( v7[2] & 0x2000000 )
      {
        v9 = v7[4];
        if ( v9 & 0x100 )
        {
          v11 = sub_415C00((int)v7) / *(float *)&v10 * (double)a4;
          sub_4E16D0((int)v7, v5, a2, a3, v11, v8);
        }
      }
      v7 = (_DWORD *)v7[124];
    }
    while ( v7 );
  }
}

//----- (004E2220) --------------------------------------------------------
double __cdecl sub_4E2220(int a1)
{
  int v1; // esi
  int v2; // eax
  double v3; // st7
  float v5; // [esp+4h] [ebp-4h]

  v5 = 1.0;
  v1 = *(_DWORD *)(a1 + 504);
  if ( !v1 )
    return 1.0;
  do
  {
    if ( *(_DWORD *)(v1 + 8) & 0x2000000 )
    {
      if ( *(_BYTE *)(v1 + 24) & 0x10 )
      {
        v2 = *(_DWORD *)(v1 + 16);
        if ( v2 & 0x100 )
        {
          if ( !sub_4133D0(v1) )
          {
            if ( *(_DWORD *)(v1 + 12) & 0x2000000 )
              v3 = *(float *)&byte_587000[201108];
            else
              v3 = sub_415BD0(v1);
            v5 = v3 + v5;
          }
        }
      }
    }
    v1 = *(_DWORD *)(v1 + 496);
  }
  while ( v1 );
  return v5;
}

//----- (004E22A0) --------------------------------------------------------
int __cdecl sub_4E22A0(int a1, int a2, int a3, int a4, float a5, int a6)
{
  _DWORD *i; // esi
  int v7; // eax

  for ( i = *(_DWORD **)(a1 + 504); i; i = (_DWORD *)i[124] )
  {
    if ( i[4] & 0x100 && a4 & i[3] )
      break;
  }
  v7 = a3;
  if ( !a3 )
    v7 = a2;
  sub_4E1560((int)i, a1, a2, v7, a5, a6);
  if ( !(i[4] & 0x20) )
    return 0;
  if ( *(_BYTE *)(a1 + 8) & 4 )
    sub_4FA020((_DWORD *)a1, 13);
  else
    sub_50A160(a1);
  return 1;
}

//----- (004E2330) --------------------------------------------------------
int __cdecl sub_4E2330(int a1, int a2, int a3, int a4, float a5, int a6)
{
  _DWORD *i; // esi
  int v7; // eax

  for ( i = *(_DWORD **)(a1 + 504); i; i = (_DWORD *)i[124] )
  {
    if ( i[4] & 0x100 && a4 & i[3] )
      break;
  }
  v7 = a3;
  if ( !a3 )
    v7 = a2;
  sub_4E16D0((int)i, a1, a2, v7, a5, a6);
  if ( !(i[4] & 0x20) )
    return 0;
  if ( *(_BYTE *)(a1 + 8) & 4 )
    sub_4FA020((_DWORD *)a1, 13);
  else
    sub_50A160(a1);
  return 1;
}

//----- (004E23C0) --------------------------------------------------------
int __cdecl sub_4E23C0(int a1, int a2, int a3, int a4, int a5)
{
  int result; // eax
  float v6; // ecx
  float v7; // eax
  int v8; // edi
  float2 a3a; // [esp+10h] [ebp-8h]

  if ( sub_4FF350(a1, 23) )
  {
    if ( !(byte_5D4594[2598000] & 3) )
      sub_501960(71, a1, 0, 0);
    result = 1;
  }
  else if ( a2
         && (!a3 ? (v7 = *(float *)(a2 + 76), a3a.field_0 = *(float *)(a2 + 72), a3a.field_4 = v7) : (v6 = *(float *)(a3 + 76), a3a.field_0 = *(float *)(a3 + 72), a3a.field_4 = v6),
             sub_4E6E50((float2 *)(a1 + 56), *(__int16 *)(a1 + 124), &a3a) & 1
          && (v8 = *(_DWORD *)(a1 + 748), sub_50A020(a1) == 21)
          && *(_BYTE *)(v8 + 481) > (unsigned int)(*(_BYTE *)(v8 + 480) >> 1)) )
  {
    sub_501960(878, a1, 0, 0);
    result = 1;
  }
  else
  {
    result = sub_4E0B30(a1, a2, a3, a4, a5);
  }
  return result;
}

//----- (004E24B0) --------------------------------------------------------
int __cdecl sub_4E24B0(int a1, int a2, int a3, int a4, int a5)
{
  return sub_4E0B30(a1, a2, a3, a4, a5);
}

//----- (004E24E0) --------------------------------------------------------
int __cdecl sub_4E24E0(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // eax

  if ( a5 != 9 && a5 != 17 )
    v5 = a4;
  else
    v5 = 2 * a4;
  return sub_4E0B30(a1, a2, a3, v5, a5);
}

//----- (004E2520) --------------------------------------------------------
int __cdecl sub_4E2520(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // eax

  if ( a5 == 1 || a5 == 12 || (v5 = a4, a5 == 7) )
    v5 = 9999999;
  return sub_4E0B30(a1, a2, a3, v5, a5);
}

//----- (004E2560) --------------------------------------------------------
int __cdecl sub_4E2560(int a1, int a2, int a3, int a4, int a5)
{
  int result; // eax

  if ( a5 != 1 && a5 != 12 && a5 != 2 && a5 )
    result = 0;
  else
    result = sub_4E0B30(a1, a2, a3, 999999, a5);
  return result;
}

//----- (004E25A0) --------------------------------------------------------
int __cdecl sub_4E25A0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_587000[201112] = a1;
  return result;
}

//----- (004E25B0) --------------------------------------------------------
bool __cdecl sub_4E25B0(int a1, float a2, float a3, int a4, int a5, int a6, int a7)
{
  bool result; // al
  float4 a1a; // [esp+0h] [ebp-3Ch]
  int4 v11; // [esp+10h] [ebp-2Ch]
  int a3a[7]; // [esp+20h] [ebp-1Ch]

  a3a[6] = a7;
  a3a[3] = a4;
  a3a[5] = a6;
  a3a[4] = a5;
  a3a[0] = a1;
  *(float *)&a3a[2] = a3;
  if ( a2 >= (double)a3 )
    *(float *)&a3a[1] = a2;
  else
    *(float *)&a3a[1] = a3;
  a1a.field_0 = *(float *)a1 - *(float *)&a3a[1];
  a1a.field_4 = *(float *)(a1 + 4) - *(float *)&a3a[1];
  a1a.field_8 = *(float *)&a3a[1] + *(float *)a1;
  a1a.field_C = *(float *)&a3a[1] + *(float *)(a1 + 4);
  sub_517C10(&a1a, sub_4E2700, (int)a3a);
  v11.field_0 = sub_419A70(a1a.field_0) / 23;
  v11.field_4 = sub_419A70(a1a.field_4) / 23;
  v11.field_8 = sub_419A70(a1a.field_8) / 23;
  v11.field_C = sub_419A70(a1a.field_C) / 23;
  result = sub_534FC0(&v11, a1, a2, a4, a5, a6);
  *(_DWORD *)&byte_587000[201112] = 1;
  return result;
}

//----- (004E2700) --------------------------------------------------------
void __cdecl sub_4E2700(float *a1, int a2)
{
  int v2; // esi
  float *v3; // ecx
  double v4; // st7
  double v5; // st6
  long double v6; // st5
  float v7; // edx
  float v8; // eax
  __int64 v9; // rax
  float4 v10; // [esp+8h] [ebp-10h]
  float v11; // [esp+20h] [ebp+8h]

  v2 = a2;
  if ( (a1 != *(float **)(a2 + 20) || *(_DWORD *)&byte_587000[201112]) && *(float **)(a2 + 24) != a1 )
  {
    v3 = *(float **)a2;
    v4 = a1[14] - **(float **)a2;
    v5 = a1[15] - *(float *)(*(_DWORD *)a2 + 4);
    v6 = sqrt(v5 * v5 + v4 * v4);
    v11 = v6;
    if ( v6 <= *(float *)(v2 + 4) )
    {
      v7 = a1[14];
      v10.field_0 = *v3;
      v8 = a1[15];
      v10.field_4 = v3[1];
      v10.field_8 = v7;
      v10.field_C = v8;
      if ( sub_535250(&v10, 0, 0, 1) )
      {
        if ( v11 >= (double)*(float *)(v2 + 8) )
          v9 = (__int64)((1.0 - (v11 - *(float *)(v2 + 8)) / (*(float *)(v2 + 4) - *(float *)(v2 + 8)))
                       * (double)*(int *)(v2 + 12));
        else
          LODWORD(v9) = *(_DWORD *)(v2 + 12);
        (*((void (__cdecl **)(float *, _DWORD, _DWORD, _DWORD, _DWORD))a1 + 179))(
          a1,
          *(_DWORD *)(v2 + 20),
          0,
          v9,
          *(_DWORD *)(v2 + 16));
      }
    }
  }
}

//----- (004E27D0) --------------------------------------------------------
int __cdecl sub_4E27D0(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // ebp
  int v7; // edi
  int v8; // eax
  unsigned __int16 *v9; // eax
  int v10; // edi
  int v11; // eax
  int v12; // eax
  int v13; // eax
  float v14; // [esp+0h] [ebp-1Ch]
  float v15; // [esp+0h] [ebp-1Ch]
  float2 a1a; // [esp+14h] [ebp-8h]
  int v17; // [esp+28h] [ebp+Ch]

  v5 = *(_DWORD *)(a1 + 748);
  if ( *(_DWORD *)(a1 + 16) & 0x8020 )
    return 0;
  if ( (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(a1 + 536)) > 0x14
    || !(*(_DWORD *)&byte_5D4594[2598000] % 0x1Eu) )
  {
    if ( a3 )
    {
      a1a.field_0 = *(float *)(a3 + 56) - *(float *)(a1 + 56) + 0.0099999998;
      a1a.field_4 = *(float *)(a3 + 60) - *(float *)(a1 + 60) + 0.0099999998;
      sub_509F20(&a1a);
      a1a.field_0 = a1a.field_0 * 22.0 + *(float *)(a1 + 56);
      a1a.field_4 = a1a.field_4 * 22.0 + *(float *)(a1 + 60);
      sub_523150(240, 26, &a1a.field_0);
    }
    else
    {
      sub_523150(240, 26, (float *)(a1 + 56));
    }
    sub_501960(1001, a1, 0, 0);
  }
  v7 = (unsigned __int16)sub_4EE780(a1);
  v17 = sub_4E0B30(a1, a2, a3, a4, a5);
  if ( (unsigned __int16)sub_4EE780(a1) < v7 )
    sub_502490((int *)(v5 + 48), a2, a1);
  v8 = *(_DWORD *)(a1 + 16);
  if ( (v8 & 0x8000) == 0 && !(v8 & 0x20) )
  {
    v9 = *(unsigned __int16 **)(a1 + 556);
    v10 = *v9;
    v14 = (double)v9[2] * 0.333;
    if ( v10 > sub_419A70(v14) )
    {
      v15 = (double)*(unsigned __int16 *)(*(_DWORD *)(a1 + 556) + 4) * 0.66600001;
      if ( v10 <= sub_419A70(v15) )
      {
        v13 = *(_DWORD *)(a1 + 20);
        if ( !(v13 & 0x100) )
          sub_4E4800(a1, (int *)0x100);
      }
    }
    else
    {
      v11 = *(_DWORD *)(a1 + 20);
      if ( v11 & 0x100 )
        sub_4E4780(a1, 256);
      v12 = *(_DWORD *)(a1 + 20);
      if ( !(v12 & 0x200) )
        sub_4E4800(a1, (int *)0x200);
    }
  }
  return v17;
}

//----- (004E29B0) --------------------------------------------------------
void sub_4E29B0()
{
  srand(0x7DDu);
}

//----- (004E29C0) --------------------------------------------------------
void sub_4E29C0()
{
  srand(0x898u);
}

//----- (004E29D0) --------------------------------------------------------
void sub_4E29D0()
{
  int i; // esi
  signed int v1; // eax

  for ( i = 0; i < 108; i += 4 )
  {
    v1 = *(_DWORD *)&byte_5D4594[i + 1563668];
    if ( v1 > 1 )
      qsort(*(void **)&byte_5D4594[i + 1563348], v1, 4u, sub_4E2A00);
  }
}

//----- (004E2A00) --------------------------------------------------------
int __cdecl sub_4E2A00(const void *a1, const void *a2)
{
  return _strcmpi(*(const char **)(*(_DWORD *)a1 + 4), *(const char **)(*(_DWORD *)a2 + 4));
}

//----- (004E2A20) --------------------------------------------------------
int sub_4E2A20()
{
  int v0; // esi
  int v1; // ebp
  int v2; // eax
  void *v3; // eax

  v0 = *(_DWORD *)&byte_5D4594[1563660];
  if ( *(_DWORD *)&byte_5D4594[1563660] )
  {
    do
    {
      v1 = *(_DWORD *)(v0 + 220);
      if ( *(_DWORD *)(v0 + 4) )
        free(*(LPVOID *)(v0 + 4));
      if ( *(_DWORD *)(v0 + 136) )
        free(*(LPVOID *)(v0 + 136));
      if ( *(_DWORD *)(v0 + 144) )
        free(*(LPVOID *)(v0 + 144));
      if ( *(_DWORD *)(v0 + 164) )
        free(*(LPVOID *)(v0 + 164));
      if ( *(_DWORD *)(v0 + 176) )
        free(*(LPVOID *)(v0 + 176));
      v2 = *(_DWORD *)(v0 + 192);
      if ( v2 )
      {
        if ( *(_BYTE *)(v0 + 24) & 2 )
        {
          v3 = *(void **)(v2 + 476);
          if ( v3 )
            free(v3);
        }
        free(*(LPVOID *)(v0 + 192));
      }
      if ( *(_DWORD *)(v0 + 204) )
        free(*(LPVOID *)(v0 + 204));
      free((LPVOID)v0);
      v0 = v1;
    }
    while ( v1 );
  }
  *(_DWORD *)&byte_5D4594[1563660] = 0;
  if ( *(_DWORD *)&byte_5D4594[1563456] )
  {
    free(*(LPVOID *)&byte_5D4594[1563456]);
    *(_DWORD *)&byte_5D4594[1563456] = 0;
  }
  *(_DWORD *)&byte_587000[201384] = 1;
  sub_4E2B30();
  sub_42BF80();
  return 1;
}

//----- (004E2B30) --------------------------------------------------------
LPVOID sub_4E2B30()
{
  LPVOID *v0; // esi
  LPVOID result; // eax

  v0 = (LPVOID *)&byte_5D4594[1563348];
  do
  {
    result = *v0;
    if ( *v0 )
      free(*v0);
    *v0 = 0;
    ++v0;
  }
  while ( (int)v0 < (int)&byte_5D4594[1563456] );
  return result;
}

//----- (004E2B60) --------------------------------------------------------
void *__cdecl sub_4E2B60(char *a1)
{
  void *v1; // eax
  size_t *v2; // ebx
  void *v3; // edi
  void *result; // eax
  void *v5; // ebp
  unsigned __int8 *v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // edx
  double v10; // st7
  const char *v11; // eax
  int v12; // eax
  _DWORD *v13; // eax
  _DWORD *v14; // eax
  void *v15; // eax
  double v16; // st7
  int v17; // ecx
  int v18; // esi
  int v19; // eax
  int i; // [esp+0h] [ebp-8h]
  void *v21; // [esp+4h] [ebp-4h]
  unsigned __int8 v22; // [esp+Ch] [ebp+4h]

  if ( *(_DWORD *)&byte_5D4594[1563660] )
    sub_4E2A20();
  sub_4E3010();
  *(_DWORD *)&byte_5D4594[1563664] = 0;
  v1 = malloc(0x40000u);
  v2 = *(size_t **)&byte_5D4594[260];
  v3 = v1;
  v21 = v1;
  if ( !*(_DWORD *)&byte_5D4594[260] )
  {
    v2 = sub_40ABF0(a1, 7);
    if ( !v2 )
      return 0;
  }
  sub_40AD10(v2, 0, 0);
  while ( sub_40ACC0(&i, 4u, 1, (int)v2) )
  {
    switch ( i )
    {
      case 1397769548:
        sub_415100((int)v2);
        break;
      case 1094863180:
        sub_415320((int)v2);
        break;
      case 1096107040:
        sub_502320((int)v2, v3);
        break;
      case 1096175188:
        sub_502120((int)v2, v3);
        break;
      case 1463897164:
        if ( !sub_414F60(v2, v3) )
          goto LABEL_53;
        break;
      case 1179406162:
        if ( !sub_414DB0((int)v2) )
          goto LABEL_53;
        break;
      case 1162102597:
        if ( !sub_414E70((int)v2, v3) )
          goto LABEL_53;
        break;
      case 1229799751:
        sub_415240((int)v2);
        break;
      case 1414024775:
        v5 = calloc(1u, 0xE0u);
        if ( !v5 )
          goto LABEL_53;
        v6 = (unsigned __int8 *)v2[2];
        v22 = *v6;
        v2[2] = (size_t)(v6 + 1);
        sub_40ACC0(v3, 1u, v22, (int)v2);
        *((_BYTE *)v3 + v22) = 0;
        *((_DWORD *)v5 + 1) = sub_413F90((const char *)v3);
        *((_DWORD *)v5 + 2) = 0;
        *(_WORD *)v5 = *(_WORD *)&byte_587000[201384];
        ++*(_DWORD *)&byte_587000[201384];
        *((_DWORD *)v5 + 14) = 1065353216;
        *((_BYTE *)v5 + 120) = -1;
        *((_DWORD *)v5 + 28) = 0;
        *((_DWORD *)v5 + 29) = 1106247680;
        *((_DWORD *)v5 + 3) = -1;
        *((_WORD *)v5 + 20) = 0x4000;
        *((_DWORD *)v5 + 38) = sub_4E0B30;
        *((_DWORD *)v5 + 39) = sub_532E20;
        *((_DWORD *)v5 + 53) = sub_4F49A0;
        if ( !sub_4E3220((int)v2, (char *)v3, (int)v5) )
        {
LABEL_53:
          sub_40ACA0(v2);
          return 0;
        }
        if ( !*((_DWORD *)v5 + 35) )
        {
          v7 = *((_DWORD *)v5 + 8);
          LOBYTE(v7) = v7 | 0x40;
          *((_DWORD *)v5 + 8) = v7;
        }
        v8 = *((_DWORD *)v5 + 6);
        v9 = *((_DWORD *)v5 + 8) | 0x1000000;
        *((_WORD *)v5 + 10) = *(_WORD *)v5;
        *((_DWORD *)v5 + 8) = v9;
        if ( v8 & 0x400000 )
          *((_DWORD *)v5 + 14) = 1343554297;
        if ( v8 & 1 )
        {
          v10 = *((float *)v5 + 31) + *((float *)v5 + 31);
          *((_DWORD *)v5 + 13) = 1065353216;
          *((float *)v5 + 31) = v10;
          *((float *)v5 + 32) = *((float *)v5 + 32) + *((float *)v5 + 32);
        }
        else
        {
          *((_DWORD *)v5 + 13) = 1056964608;
        }
        v11 = (const char *)*((_DWORD *)v5 + 1);
        if ( !strcmp(*((const char **)v5 + 1), (const char *)&byte_587000[201888])
          || !strcmp(*((const char **)v5 + 1), (const char *)&byte_587000[201896])
          || !strcmp(*((const char **)v5 + 1), (const char *)&byte_587000[201912]) )
        {
          *((_DWORD *)v5 + 13) = 1008981770;
          *((_DWORD *)v5 + 14) = 1120403456;
        }
        if ( !strcmp(v11, (const char *)&byte_587000[201936]) )
          *((_DWORD *)v5 + 14) = 1048576000;
        v12 = *((_DWORD *)v5 + 6);
        if ( v12 & 2 )
        {
          v13 = (_DWORD *)*((_DWORD *)v5 + 48);
          v13[309] = -1;
          v13[307] = -1;
          v13[317] = -1;
        }
        else if ( v12 & 0x200 )
        {
          v14 = (_DWORD *)*((_DWORD *)v5 + 48);
          v14[6] = -1;
          v14[8] = -1;
          v14[4] = -1;
        }
        else if ( v12 & 0x800 )
        {
          *(_DWORD *)(*((_DWORD *)v5 + 36) + 4) = -1;
        }
        if ( *((_DWORD *)v5 + 6) & 0x3000006 )
        {
          if ( !*((_DWORD *)v5 + 34) )
          {
            v15 = calloc(1u, 0x14u);
            *((_DWORD *)v5 + 34) = v15;
            if ( !v15 )
              return 0;
          }
        }
        v16 = *((float *)v5 + 14) * 10.0;
        *((_DWORD *)v5 + 4) = 1;
        *((float *)v5 + 14) = v16;
        *(_DWORD *)&byte_5D4594[1563664] ^= sub_4E31A0((int)v5);
        *((_DWORD *)v5 + 55) = *(_DWORD *)&byte_5D4594[1563660];
        *(_DWORD *)&byte_5D4594[1563660] = v5;
        sub_4E3080(*((CHAR **)v5 + 1));
        v3 = v21;
        break;
    }
  }
  *(_DWORD *)&byte_5D4594[2650664] = 1;
  if ( *(_DWORD *)&byte_5D4594[260] )
  {
    if ( sub_40A5C0(2) && *(_DWORD *)&byte_5D4594[2649708] )
    {
      sub_40ACA0(*(LPVOID *)&byte_5D4594[260]);
      *(_DWORD *)&byte_5D4594[260] = 0;
    }
  }
  else
  {
    sub_40ACA0(v2);
  }
  result = (void *)sub_4E3110();
  if ( result )
  {
    sub_4E3C20();
    result = malloc(4 * *(_DWORD *)&byte_587000[201384]);
    *(_DWORD *)&byte_5D4594[1563456] = result;
    if ( result )
    {
      sub_4E3040();
      v17 = *(_DWORD *)&byte_587000[201384];
      v18 = *(_DWORD *)&byte_5D4594[1563660];
      v19 = 1;
      for ( i = 1; i < *(int *)&byte_587000[201384]; ++i )
      {
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1563456] + 4 * (v17 - v19)) = v18;
        sub_4E30D0(v18);
        v17 = *(_DWORD *)&byte_587000[201384];
        v18 = *(_DWORD *)(v18 + 220);
        v19 = i + 1;
      }
      sub_4E29D0();
      free(v3);
      sub_4131A0();
      sub_415AB0();
      sub_4157C0();
      sub_4F0640();
      result = (void *)(sub_42BF10() != 0);
    }
  }
  return result;
}

//----- (004E3010) --------------------------------------------------------
int sub_4E3010()
{
  int result; // eax

  result = 0;
  memset(&byte_5D4594[1563668], 0, 0x6Cu);
  memset(&byte_5D4594[1563776], 0, 0x6Cu);
  memset(&byte_5D4594[1563348], 0, 0x6Cu);
  return result;
}

//----- (004E3040) --------------------------------------------------------
size_t sub_4E3040()
{
  int i; // esi
  size_t result; // eax

  for ( i = 0; i < 108; i += 4 )
  {
    result = *(_DWORD *)&byte_5D4594[i + 1563668];
    if ( result )
    {
      result = (size_t)calloc(1u, 4 * result);
      *(_DWORD *)&byte_5D4594[i + 1563348] = result;
    }
    else
    {
      *(_DWORD *)&byte_5D4594[i + 1563348] = 0;
    }
    *(_DWORD *)&byte_5D4594[i + 1563776] = 0;
  }
  return result;
}

//----- (004E3080) --------------------------------------------------------
CHAR *__cdecl sub_4E3080(CHAR *a1)
{
  CHAR *result; // eax

  result = a1;
  if ( a1 )
  {
    result = (CHAR *)sub_4E30A0(a1);
    if ( (int)result >= 0 )
      ++*(_DWORD *)&byte_5D4594[4 * (_DWORD)result + 1563668];
  }
  return result;
}

//----- (004E30A0) --------------------------------------------------------
int __cdecl sub_4E30A0(CHAR *a1)
{
  int result; // eax
  int v2; // eax

  if ( !a1 )
    return -1;
  v2 = toupper(*a1);
  if ( v2 < 65 || v2 > 90 )
    result = 26;
  else
    result = v2 - 65;
  return result;
}

//----- (004E30D0) --------------------------------------------------------
void __cdecl sub_4E30D0(int a1)
{
  int v1; // eax
  int v2; // ecx

  if ( a1 )
  {
    v1 = sub_4E30A0(*(CHAR **)(a1 + 4));
    v2 = *(_DWORD *)&byte_5D4594[4 * v1 + 1563348];
    if ( v2 )
    {
      *(_DWORD *)(v2 + 4 * *(_DWORD *)&byte_5D4594[4 * v1 + 1563776]) = a1;
      ++*(_DWORD *)&byte_5D4594[4 * v1 + 1563776];
    }
  }
}

//----- (004E3110) --------------------------------------------------------
int sub_4E3110()
{
  int v0; // edi
  char *i; // esi
  int v2; // eax

  v0 = 1;
  for ( i = (char *)sub_4E3B30(); i; i = (char *)sub_4E3B40((int)i) )
  {
    if ( !(i[32] & 0x40) )
    {
      v2 = *((_DWORD *)i + 15);
      if ( v2 != 2 )
      {
        if ( v2 != 3 )
          continue;
        sub_428270((shape *)(i + 60));
        if ( *((float *)i + 24) - *((float *)i + 22) < 85.0 && *((float *)i + 27) - *((float *)i + 21) < 85.0 )
          continue;
LABEL_9:
        v0 = 0;
        continue;
      }
      if ( *((float *)i + 16) + *((float *)i + 16) >= 85.0 )
        goto LABEL_9;
    }
  }
  return v0;
}

//----- (004E31A0) --------------------------------------------------------
int __cdecl sub_4E31A0(int a1)
{
  int result; // eax
  int v2; // esi
  int v3; // esi

  result = 0;
  if ( a1 )
  {
    LOWORD(result) = *(_WORD *)a1;
    v2 = result ^ *(_DWORD *)(a1 + 16);
    v3 = sub_4E31E0((_DWORD *)(a1 + 20)) ^ v2;
    result = sub_56FAE0(*(int **)(a1 + 4), strlen(*(const char **)(a1 + 4))) ^ v3;
  }
  return result;
}

//----- (004E31E0) --------------------------------------------------------
int __cdecl sub_4E31E0(_DWORD *a1)
{
  unsigned __int16 *v1; // ecx
  int result; // eax

  v1 = (unsigned __int16 *)a1[29];
  result = *(unsigned __int16 *)a1 ^ a1[3] ^ a1[4] ^ a1[9];
  if ( v1 )
    result ^= *v1 ^ v1[2];
  return result;
}

//----- (004E3220) --------------------------------------------------------
int __cdecl sub_4E3220(int a1, char *a2, int a3)
{
  char *v3; // ebx
  unsigned __int8 *v4; // eax
  char *v5; // edi
  unsigned __int8 *v6; // ebp
  int v7; // eax
  char *v8; // eax
  unsigned __int8 v10; // [esp+18h] [ebp+8h]

  v3 = a2;
  while ( 1 )
  {
LABEL_2:
    v4 = *(unsigned __int8 **)(a1 + 8);
    v10 = *v4;
    *(_DWORD *)(a1 + 8) = v4 + 1;
    if ( !v10 )
      return 1;
    sub_40ACC0(v3, 1u, v10, a1);
    v3[v10] = 0;
    v5 = strtok(v3, (const char *)&byte_587000[201944]);
    v6 = &byte_587000[201392];
    if ( *(_DWORD *)&byte_587000[201396] )
    {
      while ( strcmp(v5, *(const char **)v6) )
      {
        v7 = *((_DWORD *)v6 + 3);
        v6 += 8;
        if ( !v7 )
          goto LABEL_2;
      }
      v8 = strtok(0, (const char *)&byte_587000[201952]);
      if ( v8 )
        memmove(v3, v8 + 1, strlen(v8 + 1) + 1);
      if ( !(*((int (__cdecl **)(int, int, char *))v6 + 1))(a3, a1, v3) )
        return 0;
    }
  }
}

//----- (004E3320) --------------------------------------------------------
void sub_4E3320()
{
  _DWORD *v0; // ecx
  int v1; // edx
  int v2; // esi

  v0 = *(_DWORD **)&byte_5D4594[1563660];
  v1 = 0;
  if ( *(_DWORD *)&byte_5D4594[1563660] )
  {
    do
    {
      v2 = v0[37];
      if ( v1 <  v2 + v0[45] + v0[49] + v0[52] )
        v1 = v2 + v0[45] + v0[49] + v0[52];
      v0 = (_DWORD *)v0[55];
    }
    while ( v0 );
  }
}

//----- (004E3360) --------------------------------------------------------
int __cdecl sub_4E3360(unsigned int a1)
{
  _DWORD *v1; // esi
  int v2; // edi
  int result; // eax
  _DWORD *v4; // eax
  _DWORD *v5; // edi
  int v6; // ebx
  _QWORD *v7; // eax

  v1 = 0;
  v2 = 1;
  result = sub_413FE0((const char *)&byte_587000[201956], 772, a1);
  *(_DWORD *)&byte_5D4594[1563344] = result;
  if ( result )
  {
    if ( a1 )
    {
      while ( 1 )
      {
        v4 = sub_4142F0((_DWORD *)result);
        if ( !v4 )
          break;
        v4[9] = v2++;
        v4[111] = v1;
        v1 = v4;
        if ( v2 - 1 >= a1 )
        {
          do
          {
            v5 = v1;
            v1 = (_DWORD *)v1[111];
            v6 = v5[9];
            sub_414330(*(unsigned int **)&byte_5D4594[1563344], v5);
            v5[9] = v6;
          }
          while ( v1 );
          result = *(_DWORD *)&byte_5D4594[1563344];
          goto LABEL_9;
        }
        result = *(_DWORD *)&byte_5D4594[1563344];
      }
      while ( v1 )
      {
        v7 = v1;
        v1 = (_DWORD *)v1[111];
        sub_414330(*(unsigned int **)&byte_5D4594[1563344], v7);
      }
      result = 0;
    }
    else
    {
LABEL_9:
      sub_4144B0(result);
      result = 1;
    }
  }
  return result;
}

//----- (004E3420) --------------------------------------------------------
int sub_4E3420()
{
  sub_414100(*(LPVOID *)&byte_5D4594[1563344]);
  return 1;
}

//----- (004E3450) --------------------------------------------------------
_DWORD *__cdecl sub_4E3450(int a1)
{
  return sub_4E3470(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1563456] + 4 * a1));
}

//----- (004E3470) --------------------------------------------------------
_DWORD *__cdecl sub_4E3470(int a1)
{
  _DWORD *result; // eax
  _DWORD *v2; // ebx
  char v3; // al
  int v4; // edx
  void *v5; // eax
  void (__cdecl *v6)(_DWORD *); // ebp
  int v7; // eax
  int v8; // eax
  int v9; // [esp+10h] [ebp-4h]

  result = (_DWORD *)sub_414190(*(_DWORD **)&byte_5D4594[1563344]);
  v2 = result;
  if ( result )
  {
    v9 = result[9];
    memset(result, 0, 0x304u);
    *((_WORD *)result + 2) = *(_WORD *)(a1 + 20);
    result[2] = *(_DWORD *)(a1 + 24);
    result[3] = *(_DWORD *)(a1 + 28);
    result[4] = *(_DWORD *)(a1 + 32);
    result[5] = *(_DWORD *)(a1 + 36);
    *((_WORD *)result + 12) = *(_WORD *)(a1 + 40);
    result[7] = *(_DWORD *)(a1 + 44);
    result[8] = *(_DWORD *)(a1 + 48);
    v3 = *((_BYTE *)result + 16);
    v2[28] = *(_DWORD *)(a1 + 52);
    v2[30] = *(_DWORD *)(a1 + 56);
    qmemcpy(v2 + 43, (const void *)(a1 + 60), 0x3Cu);
    if ( !(v3 & 0x40) )
      sub_4E7290((int)v2);
    *((_BYTE *)v2 + 488) = *(_BYTE *)(a1 + 120);
    *((_WORD *)v2 + 245) = *(_WORD *)(a1 + 122);
    v2[136] = *(_DWORD *)(a1 + 124);
    v2[137] = *(_DWORD *)(a1 + 128);
    v2[138] = *(_DWORD *)(a1 + 132);
    v2[139] = *(_DWORD *)(a1 + 136);
    v2[38] = -1;
    *((_WORD *)v2 + 2) = *(_WORD *)a1;
    if ( *(_DWORD *)(a1 + 136) )
    {
      result = calloc(1u, 0x14u);
      v2[139] = result;
      if ( !result )
        return result;
      qmemcpy(result, *(const void **)(a1 + 136), 0x14u);
    }
    v2[172] = *(_DWORD *)(a1 + 172);
    if ( *(_DWORD *)(a1 + 180) )
    {
      result = calloc(1u, *(_DWORD *)(a1 + 180));
      v2[173] = result;
      if ( !result )
        return result;
      qmemcpy(result, *(const void **)(a1 + 176), *(_DWORD *)(a1 + 180));
    }
    v2[174] = *(_DWORD *)(a1 + 140);
    if ( *(_DWORD *)(a1 + 148) )
    {
      result = calloc(1u, *(_DWORD *)(a1 + 148));
      v2[175] = result;
      if ( !result )
        return result;
      qmemcpy(result, *(const void **)(a1 + 144), *(_DWORD *)(a1 + 148));
    }
    v2[176] = *(_DWORD *)(a1 + 212);
    v2[183] = *(_DWORD *)(a1 + 200);
    if ( *(_DWORD *)(a1 + 208) )
    {
      result = calloc(1u, *(_DWORD *)(a1 + 208));
      v2[184] = result;
      if ( !result )
        return result;
      qmemcpy(result, *(const void **)(a1 + 204), *(_DWORD *)(a1 + 208));
    }
    v2[186] = *(_DWORD *)(a1 + 188);
    if ( *(_DWORD *)(a1 + 196) )
    {
      result = calloc(1u, *(_DWORD *)(a1 + 196));
      v2[187] = result;
      if ( !result )
        return result;
      qmemcpy(result, *(const void **)(a1 + 192), *(_DWORD *)(a1 + 196));
    }
    v2[177] = *(_DWORD *)(a1 + 184);
    v2[178] = *(_DWORD *)(a1 + 168);
    v2[179] = *(_DWORD *)(a1 + 152);
    v2[180] = *(_DWORD *)(a1 + 156);
    v2[181] = *(_DWORD *)(a1 + 160);
    v4 = *(_DWORD *)(a1 + 164);
    v2[190] = 0;
    v2[182] = v4;
    v2[192] = -1;
    v2[9] = v9;
    if ( sub_40A5C0(6291456)
      && (v2[2] & 0x20A02 || (int (__cdecl *)(int *))v2[176] == sub_4F5AA0 || *((char *)v2 + 488) != -1)
      && (v5 = calloc(1u, 0xA0Cu), (v2[189] = v5) == 0) )
    {
      sub_4E38A0((int)v2);
      result = 0;
    }
    else
    {
      v6 = *(void (__cdecl **)(_DWORD *))(a1 + 216);
      if ( v6 )
        v6(v2);
      if ( !sub_40A5C0(0x200000) )
        v2[11] = (*(_DWORD *)&byte_587000[201376])++;
      v7 = v2[2];
      if ( v7 & 0x100000 )
      {
        ++*(_DWORD *)&byte_5D4594[1563888];
      }
      else if ( v7 & 0x400000 )
      {
        ++*(_DWORD *)&byte_5D4594[1563892];
      }
      v8 = *(_DWORD *)&byte_5D4594[1563900] + 1;
      ++*(_DWORD *)&byte_5D4594[1563884];
      if ( ++*(_DWORD *)&byte_5D4594[1563900] > *(int *)&byte_5D4594[1563896] )
        *(_DWORD *)&byte_5D4594[1563896] = v8;
      result = v2;
    }
  }
  return result;
}

//----- (004E3810) --------------------------------------------------------
_DWORD *__cdecl sub_4E3810(CHAR *a1)
{
  int v1; // eax
  _DWORD *result; // eax

  v1 = sub_4E3830(a1);
  if ( v1 )
    result = sub_4E3470(v1);
  else
    result = 0;
  return result;
}

//----- (004E3830) --------------------------------------------------------
int __cdecl sub_4E3830(CHAR *a1)
{
  int v1; // eax
  signed int v2; // ecx
  const void *v3; // eax
  int *v4; // eax
  int result; // eax

  if ( a1
    && (v1 = sub_4E30A0(a1), v1 >= 0)
    && (v2 = *(_DWORD *)&byte_5D4594[4 * v1 + 1563668], v2 >= 0)
    && (v3 = *(const void **)&byte_5D4594[4 * v1 + 1563348]) != 0
    && (v4 = (int *)bsearch(a1, v3, v2, 4u, sub_4E3880)) != 0 )
  {
    result = *v4;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004E3880) --------------------------------------------------------
int __cdecl sub_4E3880(const void *a1, const void *a2)
{
  return _strcmpi((const char *)a1, *(const char **)(*(_DWORD *)a2 + 4));
}

//----- (004E38A0) --------------------------------------------------------
int __cdecl sub_4E38A0(int a1)
{
  int *v1; // esi
  int v2; // ebp
  int v3; // edi
  int v4; // eax
  int v5; // esi
  int v6; // esi

  if ( *(_DWORD *)(a1 + 8) & 0x20000 )
  {
    v1 = *(int **)(a1 + 748);
    v2 = 3;
    do
    {
      v3 = 4;
      do
      {
        if ( *v1 )
          sub_4E38A0(*v1);
        ++v1;
        --v3;
      }
      while ( v3 );
      --v2;
    }
    while ( v2 );
  }
  if ( !sub_40A5C0(0x200000) )
  {
    v4 = *(_DWORD *)(a1 + 504);
    if ( v4 )
    {
      do
      {
        v5 = *(_DWORD *)(v4 + 496);
        sub_4E38A0(v4);
        v4 = v5;
      }
      while ( v5 );
    }
  }
  if ( *(_DWORD *)a1 )
    free(*(LPVOID *)a1);
  if ( *(_DWORD *)(a1 + 556) )
    free(*(LPVOID *)(a1 + 556));
  if ( *(_DWORD *)(a1 + 760) )
    free(*(LPVOID *)(a1 + 760));
  if ( *(_DWORD *)(a1 + 756) )
    free(*(LPVOID *)(a1 + 756));
  if ( *(_DWORD *)(a1 + 692) )
    free(*(LPVOID *)(a1 + 692));
  if ( *(_DWORD *)(a1 + 700) )
    free(*(LPVOID *)(a1 + 700));
  if ( *(_DWORD *)(a1 + 736) )
    free(*(LPVOID *)(a1 + 736));
  if ( *(_DWORD *)(a1 + 748) )
    free(*(LPVOID *)(a1 + 748));
  v6 = *(_DWORD *)(a1 + 36);
  sub_414400(*(unsigned int **)&byte_5D4594[1563344], (_QWORD *)a1);
  *(_DWORD *)(a1 + 36) = v6;
  return --*(_DWORD *)&byte_5D4594[1563900];
}

//----- (004E39D0) --------------------------------------------------------
int __cdecl sub_4E39D0(int a1)
{
  return *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1563456] + 4 * *(unsigned __int16 *)(a1 + 4)) + 4);
}

//----- (004E39F0) --------------------------------------------------------
wchar_t *__cdecl sub_4E39F0(const char **a1)
{
  const char *v1; // esi
  char *v2; // eax
  const char *v3; // eax
  const char *v4; // edx
  unsigned __int8 v5; // al
  unsigned __int8 *v6; // ecx
  unsigned __int8 *i; // edx

  v1 = *a1;
  if ( !*a1 )
    v1 = (const char *)sub_4E39D0((int)a1);
  v2 = strrchr(v1, 58);
  if ( v2 )
    v3 = v2 + 1;
  else
    v3 = v1;
  v4 = v3;
  strcpy((char *)&byte_5D4594[1563460], "NPC:");
  v5 = *v3;
  v6 = &byte_5D4594[strlen((const char *)&byte_5D4594[1563460]) + 1563460];
  for ( i = (unsigned __int8 *)(v4 + 1); v5; ++i )
  {
    if ( v5 != 95 )
      *v6++ = v5;
    v5 = *i;
  }
  *v6 = 0;
  return sub_40F1D0((char *)&byte_5D4594[1563460], 0, (const char *)&byte_587000[201980], 1577);
}

//----- (004E3A80) --------------------------------------------------------
int __cdecl sub_4E3A80(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
    result = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1563456] + 4 * a1) + 4);
  return result;
}

//----- (004E3AA0) --------------------------------------------------------
int __cdecl sub_4E3AA0(CHAR *a1)
{
  unsigned __int16 *v1; // eax
  int result; // eax

  v1 = (unsigned __int16 *)sub_4E3830(a1);
  if ( v1 )
    result = *v1;
  else
    result = 0;
  return result;
}

//----- (004E3AC0) --------------------------------------------------------
int sub_4E3AC0()
{
  return *(_DWORD *)&byte_587000[201384];
}

//----- (004E3AD0) --------------------------------------------------------
BOOL __cdecl sub_4E3AD0(int a1)
{
  int v1; // ecx
  int v2; // eax
  int v3; // ecx
  BOOL result; // eax

  if ( !*(_DWORD *)&byte_5D4594[1563904] )
    *(_DWORD *)&byte_5D4594[1563904] = sub_4E3AA0((CHAR *)&byte_587000[202016]);
  v1 = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1563456] + 4 * a1);
  v2 = *(_DWORD *)(v1 + 24);
  result = 1;
  if ( !(v2 & 1) )
  {
    if ( v2 & 0x400000 )
    {
      if ( !(0x800000 & v2) )
      {
        v3 = *(_DWORD *)(v1 + 32);
        if ( v3 & 0x40 )
        {
          if ( !(v3 & 0x10000) )
            result = 0;
        }
      }
    }
  }
  return result;
}

//----- (004E3B30) --------------------------------------------------------
LPVOID sub_4E3B30()
{
  return *(LPVOID *)&byte_5D4594[1563660];
}

//----- (004E3B40) --------------------------------------------------------
int __cdecl sub_4E3B40(int a1)
{
  int result; // eax

  if ( a1 )
    result = *(_DWORD *)(a1 + 220);
  else
    result = 0;
  return result;
}

//----- (004E3B60) --------------------------------------------------------
int __cdecl sub_4E3B60(CHAR *a1)
{
  return sub_4E3830(a1);
}

//----- (004E3B70) --------------------------------------------------------
int __cdecl sub_4E3B70(int a1)
{
  return *(_DWORD *)(*(_DWORD *)&byte_5D4594[1563456] + 4 * a1);
}

//----- (004E3B80) --------------------------------------------------------
BOOL __cdecl sub_4E3B80(int a1)
{
  return *(int *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1563456] + 4 * a1) + 12) != -1;
}

//----- (004E3BA0) --------------------------------------------------------
int __cdecl sub_4E3BA0(int a1)
{
  return *(_DWORD *)(*(_DWORD *)(*(_DWORD *)&byte_5D4594[1563456] + 4 * a1) + 16);
}

//----- (004E3BC0) --------------------------------------------------------
int __cdecl sub_4E3BC0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1563664] ^= *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 16) = 0;
  return result;
}

//----- (004E3BF0) --------------------------------------------------------
int __cdecl sub_4E3BF0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1563664] ^= *(_DWORD *)(a1 + 16);
  *(_DWORD *)(a1 + 16) = 1;
  *(_DWORD *)&byte_5D4594[1563664] ^= 1u;
  return result;
}

//----- (004E3C20) --------------------------------------------------------
int sub_4E3C20()
{
  int v0; // edi
  LPVOID i; // esi
  int result; // eax

  v0 = 0;
  for ( i = sub_4E3B30(); i; i = (LPVOID)sub_4E3B40((int)i) )
    v0 ^= sub_4E31A0((int)i);
  result = *(_DWORD *)&byte_5D4594[1563664];
  if ( v0 != *(_DWORD *)&byte_5D4594[1563664] )
    nullsub_31(1);
  return result;
}
// 560840: using guessed type void __cdecl nullsub_31(_DWORD);

//----- (004E3C60) --------------------------------------------------------
int __cdecl sub_4E3C60(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_587000[201380] = a1;
  return result;
}

//----- (004E3C70) --------------------------------------------------------
int sub_4E3C70()
{
  int result; // eax

  result = *(_DWORD *)&byte_587000[201380];
  *(_DWORD *)&byte_587000[201376] = 1000000000;
  if ( *(_DWORD *)&byte_587000[201380] )
    *(_DWORD *)&byte_587000[201376] = *(_DWORD *)&byte_587000[201380];
  return result;
}

//----- (004E3C90) --------------------------------------------------------
void sub_4E3C90()
{
  srand(0x899u);
}

//----- (004E3CA0) --------------------------------------------------------
double sub_4E3CA0()
{
  return *(float *)&byte_587000[202024];
}

//----- (004E3CB0) --------------------------------------------------------
int __cdecl sub_4E3CB0(float a1)
{
  int result; // eax

  result = LODWORD(a1);
  *(float *)&byte_587000[202024] = a1;
  return result;
}

//----- (004E3CC0) --------------------------------------------------------
int sub_4E3CC0()
{
  return *(_DWORD *)&byte_587000[202028];
}

//----- (004E3CD0) --------------------------------------------------------
int __cdecl sub_4E3CD0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_587000[202028] = a1;
  return result;
}

//----- (004E3CE0) --------------------------------------------------------
int sub_4E3CE0()
{
  int v0; // ebp
  int v1; // esi
  int v2; // edi

  v0 = 0;
  v1 = sub_4DA7C0();
  if ( !v1 )
    return 0;
  do
  {
    v2 = *(_DWORD *)(v1 + 748);
    if ( (!sub_40A5C0(1)
       || !(*(_DWORD *)&byte_5D4594[2650636] & 0x40000)
       || *(_BYTE *)(*(_DWORD *)(v2 + 276) + 2064) != 31)
      && *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4792) == 1 )
    {
      ++v0;
    }
    v1 = sub_4DA7F0(v1);
  }
  while ( v1 );
  return v0;
}

//----- (004E3D50) --------------------------------------------------------
int sub_4E3D50()
{
  int v0; // esi
  float v2; // [esp+0h] [ebp-8h]

  if ( !*(_DWORD *)&byte_5D4594[1563928] )
  {
    *(float *)&byte_5D4594[1563912] = sub_419D40(&byte_587000[202040]);
    *(_DWORD *)&byte_5D4594[1563928] = 1;
  }
  v0 = sub_4E3CE0();
  v2 = (double)(unsigned int)sub_4E3CC0() * ((double)(v0 - 1) * *(float *)&byte_5D4594[1563912] + 1.0);
  return sub_4E3CB0(v2);
}

//----- (004E3DD0) --------------------------------------------------------
__int16 sub_4E3DD0()
{
  int v0; // eax
  int v1; // esi
  int v2; // ebx
  int v3; // ecx
  __int16 v4; // cx
  int v5; // edi
  unsigned __int16 v6; // bp
  unsigned __int16 v7; // ax
  __int16 v8; // cx
  int v9; // ebp
  int v10; // ecx
  __int16 v11; // di
  __int16 v12; // ax
  int v13; // ecx
  float v15; // [esp+0h] [ebp-1Ch]
  float v16; // [esp+0h] [ebp-1Ch]
  float v17; // [esp+0h] [ebp-1Ch]
  float v18; // [esp+0h] [ebp-1Ch]
  float v19; // [esp+Ch] [ebp-10h]
  float v20; // [esp+Ch] [ebp-10h]
  float v21; // [esp+10h] [ebp-Ch]
  float v22; // [esp+14h] [ebp-8h]
  unsigned __int16 v23; // [esp+18h] [ebp-4h]

  v21 = sub_419D40(&byte_587000[202064]);
  v23 = sub_419A70(v21);
  if ( !*(_DWORD *)&byte_5D4594[1563932] )
  {
    *(float *)&byte_5D4594[1563908] = sub_419D40(&byte_587000[202084]);
    *(float *)&byte_5D4594[1563916] = sub_419D40(&byte_587000[202108]);
    *(float *)&byte_5D4594[1563920] = sub_419D40(&byte_587000[202132]);
    *(float *)&byte_5D4594[1563924] = sub_419D40(&byte_587000[202156]);
    *(_DWORD *)&byte_5D4594[1563932] = 1;
  }
  v19 = (sub_4E3CA0() - 1.0) * *(float *)&byte_5D4594[1563920] + *(float *)&byte_5D4594[1563908];
  sub_4E4080(v19);
  v20 = (sub_4E3CA0() - 1.0) * *(float *)&byte_5D4594[1563924] + *(float *)&byte_5D4594[1563916];
  sub_4E40C0(v20);
  v0 = sub_4DA790();
  v1 = v0;
  if ( v0 )
  {
    do
    {
      v2 = sub_4DA7A0(v1);
      v0 = *(_DWORD *)(v1 + 8);
      if ( v0 & 0x20000 && (v3 = *(_DWORD *)(v1 + 16), (v3 & 0x8000) == 0) )
      {
        v0 = *(_DWORD *)(v1 + 556);
        v4 = *(_WORD *)(v0 + 4);
        if ( v4 )
        {
          LOWORD(v0) = *(_WORD *)v0;
          if ( (_WORD)v0 )
          {
            if ( (_WORD)v0 == v4 )
            {
              v5 = sub_4E3B70(*(unsigned __int16 *)(v1 + 4));
              v15 = sub_4E40F0() * (double)*(unsigned __int16 *)(*(_DWORD *)(v5 + 136) + 4);
              v6 = sub_419AB0(v15);
              v16 = sub_4E40F0() * (double)**(unsigned __int16 **)(v5 + 136);
              v7 = sub_419AB0(v16);
              if ( !v7 )
                v7 = 1;
              if ( !v6 )
                v6 = 1;
              if ( v7 > v23 )
                v7 = v23;
              if ( v6 > v23 )
                v6 = v23;
              LOWORD(v0) = sub_4E4560(v1, v7);
              *(_WORD *)(*(_DWORD *)(v1 + 556) + 4) = v6;
            }
          }
        }
      }
      else if ( v0 & 2 )
      {
        v0 = *(_DWORD *)(v1 + 16);
        if ( (v0 & 0x8000) == 0 )
        {
          v0 = *(_DWORD *)(v1 + 556);
          v8 = *(_WORD *)(v0 + 4);
          if ( v8 )
          {
            LOWORD(v0) = *(_WORD *)v0;
            if ( (_WORD)v0 )
            {
              if ( (_WORD)v0 == v8 )
              {
                v0 = sub_4E3B70(*(unsigned __int16 *)(v1 + 4));
                v9 = *(_DWORD *)(v1 + 748);
                v10 = *(_DWORD *)(v9 + 484);
                LOWORD(v0) = v10 ? *(_WORD *)(v10 + 72) : *(_WORD *)(*(_DWORD *)(v0 + 136) + 4);
                if ( (signed char)*(_BYTE *)(v9 + 1440) >= 0 )
                {
                  v22 = (double)(unsigned __int16)v0;
                  v17 = sub_4E40F0() * v22;
                  v11 = sub_419AB0(v17);
                  v18 = sub_4E40F0() * v22;
                  v12 = sub_419AB0(v18);
                  if ( !v12 )
                    v12 = 1;
                  if ( !v11 )
                    v11 = 1;
                  sub_4E4560(v1, v12);
                  v0 = v9 + 412;
                  v13 = 32;
                  *(_WORD *)(*(_DWORD *)(v1 + 556) + 4) = v11;
                  do
                  {
                    v0 += 2;
                    --v13;
                    *(_WORD *)(v0 - 2) = **(_WORD **)(v1 + 556);
                  }
                  while ( v13 );
                }
              }
            }
          }
        }
      }
      v1 = v2;
    }
    while ( v2 );
  }
  return v0;
}

//----- (004E4080) --------------------------------------------------------
void __cdecl sub_4E4080(float a1)
{
  double v1; // st7

  v1 = sub_419D40(&byte_587000[202180]);
  if ( a1 <= v1 )
    *(float *)&byte_587000[202032] = a1;
  else
    *(float *)&byte_587000[202032] = v1;
}

//----- (004E40B0) --------------------------------------------------------
double sub_4E40B0()
{
  return *(float *)&byte_587000[202032];
}

//----- (004E40C0) --------------------------------------------------------
void __cdecl sub_4E40C0(float a1)
{
  double v1; // st7

  v1 = sub_419D40(&byte_587000[202196]);
  if ( a1 <= v1 )
    *(float *)&byte_587000[202036] = a1;
  else
    *(float *)&byte_587000[202036] = v1;
}

//----- (004E40F0) --------------------------------------------------------
double sub_4E40F0()
{
  return *(float *)&byte_587000[202036];
}

//----- (004E4100) --------------------------------------------------------
int sub_4E4100()
{
  unsigned int v0; // ebp
  int v1; // esi
  int v2; // edi
  int result; // eax

  v0 = 0;
  v1 = sub_4DA7C0();
  if ( !v1 )
    return 1;
  do
  {
    v2 = *(_DWORD *)(v1 + 748);
    if ( !sub_40A5C0(1)
      || !(*(_DWORD *)&byte_5D4594[2650636] & 0x40000)
      || *(_BYTE *)(*(_DWORD *)(v2 + 276) + 2064) != 31 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4792) )
        ++v0;
    }
    result = sub_4DA7F0(v1);
    v1 = result;
  }
  while ( result );
  if ( v0 < 6 )
    return 1;
  return result;
}

//----- (004E4170) --------------------------------------------------------
void sub_4E4170()
{
  float v0; // [esp+0h] [ebp-4h]

  if ( !(*(_DWORD *)&byte_5D4594[2598000] % (unsigned int)(5 * *(_DWORD *)&byte_5D4594[2649704])) )
  {
    v0 = sub_4E3CA0();
    sub_4E3D50();
    if ( sub_4E3CA0() != v0 )
      sub_4E3DD0();
  }
}

//----- (004E41B0) --------------------------------------------------------
int __cdecl sub_4E41B0(char *a1)
{
  FILE *v1; // edi

  v1 = fopen(a1, "r");
  if ( v1 )
  {
    do
    {
      while ( 1 )
      {
        do
        {
          if ( !fgets((char *)&byte_5D4594[1563936], 1024, v1) )
          {
            fclose(v1);
            return 1;
          }
        }
        while ( !strtok((char *)&byte_5D4594[1563936], (const char *)&byte_587000[202248]) );
        if ( strcmp((const char *)&byte_5D4594[1563936], (const char *)&byte_587000[202212]) )
          break;
        if ( !sub_4E42C0(v1) )
          goto LABEL_11;
      }
    }
    while ( strcmp((const char *)&byte_5D4594[1563936], (const char *)&byte_587000[202228]) || sub_4E4390(v1) );
LABEL_11:
    fclose(v1);
  }
  return 0;
}

//----- (004E42C0) --------------------------------------------------------
int __cdecl sub_4E42C0(FILE *a1)
{
  char *v1; // eax
  char *v2; // eax
  wchar_t v4[26]; // [esp+Ch] [ebp-34h]

  while ( 1 )
  {
    if ( !fgets((char *)&byte_5D4594[1563936], 1024, a1) )
      return 1;
    v1 = strtok((char *)&byte_5D4594[1563936], (const char *)&byte_587000[202252]);
    if ( !v1 )
      return 1;
    nox_swprintf(v4, (const wchar_t *)&byte_587000[202256], v1);
    if ( !fgets((char *)&byte_5D4594[1563936], 1024, a1) )
      return 1;
    v2 = strtok((char *)&byte_5D4594[1563936], (const char *)&byte_587000[202264]);
    if ( !v2 )
      break;
    if ( !strcmp(v2, (const char *)&byte_587000[202268]) )
      sub_416770(0, v4, 0);
    else
      sub_416770(0, v4, v2);
  }
  return 0;
}

//----- (004E4390) --------------------------------------------------------
int __cdecl sub_4E4390(FILE *a1)
{
  char *v1; // eax
  wchar_t v3[26]; // [esp+4h] [ebp-34h]

  while ( fgets((char *)&byte_5D4594[1563936], 1024, a1) )
  {
    v1 = strtok((char *)&byte_5D4594[1563936], (const char *)&byte_587000[202272]);
    if ( !v1 )
      break;
    nox_swprintf(v3, (const wchar_t *)&byte_587000[202276], v1);
    sub_4168A0(v3);
  }
  return 1;
}

//----- (004E43F0) --------------------------------------------------------
FILE *__cdecl sub_4E43F0(char *a1)
{
  FILE *result; // eax
  FILE *v2; // edi
  int *i; // esi
  int *j; // esi

  result = fopen(a1, "w");
  v2 = result;
  if ( result )
  {
    fprintf(result, (const char *)&byte_587000[202288], &byte_587000[202212]);
    for ( i = sub_416900(); i; i = sub_416910(i) )
    {
      if ( !*((_QWORD *)i + 8) )
      {
        fprintf(v2, (const char *)&byte_587000[202292], i + 3);
        if ( *((_BYTE *)i + 72) )
          fprintf(v2, (const char *)&byte_587000[202296], i + 18);
        else
          fprintf(v2, (const char *)&byte_587000[202300]);
      }
    }
    fprintf(v2, (const char *)&byte_587000[202304], &byte_587000[202228]);
    for ( j = sub_4168E0(); j; j = sub_4168F0(j) )
      fprintf(v2, (const char *)&byte_587000[202312], j + 3);
    fclose(v2);
    result = (FILE *)1;
  }
  return result;
}

//----- (004E44D0) --------------------------------------------------------
void sub_4E44D0()
{
  srand(0x1428u);
}

//----- (004E44E0) --------------------------------------------------------
int __cdecl sub_4E44E0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)(a1 + 152) = 0;
  return result;
}

//----- (004E44F0) --------------------------------------------------------
int __cdecl sub_4E44F0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)(a1 + 152) = -1;
  return result;
}

//----- (004E4500) --------------------------------------------------------
int *__cdecl sub_4E4500(int a1, int a2, int a3, int a4)
{
  int v4; // ecx
  int *result; // eax
  int v6; // edx

  v4 = 0;
  result = (int *)(a1 + 560);
  do
  {
    if ( a4 )
      *result |= a3;
    else
      *result &= ~a3;
    v6 = *result;
    if ( (1 << v4) & *(_DWORD *)(a1 + 148) )
    {
      *result = a2 | v6;
    }
    else if ( !(v6 & a3) )
    {
      *result = v6 & ~a2;
    }
    ++v4;
    ++result;
  }
  while ( v4 < 32 );
  return result;
}

//----- (004E4560) --------------------------------------------------------
int __cdecl sub_4E4560(int a1, unsigned __int16 a2)
{
  int result; // eax
  int v3; // eax
  int v4; // eax
  int *v5; // eax
  int v6; // ecx
  int v7; // edx
  int v8; // eax

  result = *(_DWORD *)(a1 + 556);
  if ( result )
  {
    sub_4E44F0(a1);
    v3 = *(_DWORD *)(a1 + 492);
    if ( v3 && *(_BYTE *)(v3 + 8) & 4 )
      sub_56FC50(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v3 + 748) + 276) + 4632), (int *)a1);
    **(_WORD **)(a1 + 556) = a2;
    if ( *(_BYTE *)(a1 + 8) & 4 )
      sub_56F870(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 4584), a2);
    v4 = *(_DWORD *)(a1 + 8);
    if ( v4 & 2 && (*(_BYTE *)(a1 + 12) & 0x80) )
    {
      if ( v4 & 0x20400004 )
      {
        v5 = (int *)(a1 + 560);
        v6 = 32;
        do
        {
          v7 = *v5;
          ++v5;
          --v6;
          *(v5 - 1) = v7 & 0xFFFFF000 | 0x20000;
        }
        while ( v6 );
      }
      else
      {
        sub_4E3B70(*(unsigned __int16 *)(a1 + 4));
        v8 = sub_4E4C90(a1, 2u);
        sub_4E4500(a1, 0x20000, 2, v8);
      }
    }
    result = *(_DWORD *)(a1 + 492);
    if ( result )
    {
      if ( *(_BYTE *)(result + 8) & 4 )
        result = sub_56FBF0(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(result + 748) + 276) + 4632), (int *)a1);
    }
  }
  return result;
}

//----- (004E4670) --------------------------------------------------------
int *__cdecl sub_4E4670(int a1, int a2)
{
  int v2; // eax
  unsigned int v3; // eax
  int *result; // eax
  int v5; // ecx
  int v6; // edx
  int v7; // eax

  sub_4E44F0(a1);
  v2 = *(_DWORD *)(a1 + 16);
  if ( a2 )
    v3 = v2 | 0x1000000;
  else
    v3 = v2 & 0xFEFFFFFF;
  *(_DWORD *)(a1 + 16) = v3;
  if ( *(_DWORD *)(a1 + 8) & 0x20400004 )
  {
    result = (int *)(a1 + 560);
    v5 = 32;
    do
    {
      v6 = *result;
      ++result;
      --v5;
      *(result - 1) = v6 & 0xFFFFF000 | 0x40000;
    }
    while ( v5 );
  }
  else
  {
    sub_4E3B70(*(unsigned __int16 *)(a1 + 4));
    v7 = sub_4E4C90(a1, 4u);
    result = sub_4E4500(a1, 0x40000, 4, v7);
  }
  return result;
}

//----- (004E46F0) --------------------------------------------------------
void __cdecl sub_4E46F0(int a1, float a2)
{
  int *v2; // eax
  int v3; // ecx
  int v4; // edx
  int v5; // eax

  if ( *(float *)(a1 + 104) != a2 )
  {
    sub_4E44F0(a1);
    *(float *)(a1 + 104) = a2;
    if ( *(_DWORD *)(a1 + 8) & 0x20400004 )
    {
      v2 = (int *)(a1 + 560);
      v3 = 32;
      do
      {
        v4 = *v2;
        ++v2;
        --v3;
        *(v2 - 1) = v4 & 0xFFFFF000 | 0x400000;
      }
      while ( v3 );
    }
    else
    {
      sub_4E3B70(*(unsigned __int16 *)(a1 + 4));
      v5 = sub_4E4C90(a1, 0x40u);
      sub_4E4500(a1, 0x400000, 64, v5);
    }
  }
}

//----- (004E4780) --------------------------------------------------------
int *__cdecl sub_4E4780(int a1, int a2)
{
  int *result; // eax
  int v3; // ecx
  int v4; // edx
  int v5; // eax

  result = *(int **)(a1 + 20);
  if ( (unsigned int)result & a2 )
  {
    *(_DWORD *)(a1 + 20) = (unsigned int)result & ~a2;
    if ( a2 != 1 )
    {
      sub_4E44F0(a1);
      if ( *(_DWORD *)(a1 + 8) & 0x20400004 )
      {
        result = (int *)(a1 + 560);
        v3 = 32;
        do
        {
          v4 = *result;
          ++result;
          --v3;
          *(result - 1) = v4 & 0xFFFFF000 | 0x80000;
        }
        while ( v3 );
      }
      else
      {
        sub_4E3B70(*(unsigned __int16 *)(a1 + 4));
        v5 = sub_4E4C90(a1, 8u);
        result = sub_4E4500(a1, 0x80000, 8, v5);
      }
    }
  }
  return result;
}

//----- (004E4800) --------------------------------------------------------
int *__cdecl sub_4E4800(int a1, int *a2)
{
  int *result; // eax
  int v3; // ecx
  int v4; // edx
  int v5; // eax

  result = a2;
  *(_DWORD *)(a1 + 20) |= (unsigned int)a2;
  if ( a2 != (int *)1 )
  {
    sub_4E44F0(a1);
    if ( *(_DWORD *)(a1 + 8) & 0x20400004 )
    {
      result = (int *)(a1 + 560);
      v3 = 32;
      do
      {
        v4 = *result;
        ++result;
        --v3;
        *(result - 1) = v4 & 0xFFFFF000 | 0x80000;
      }
      while ( v3 );
    }
    else
    {
      sub_4E3B70(*(unsigned __int16 *)(a1 + 4));
      v5 = sub_4E4C90(a1, 8u);
      result = sub_4E4500(a1, 0x80000, 8, v5);
    }
  }
  return result;
}

//----- (004E4880) --------------------------------------------------------
int *__cdecl sub_4E4880(int a1, int a2)
{
  int *result; // eax
  int v3; // ecx
  int v4; // edx
  int v5; // eax

  sub_4E44F0(a1);
  *(_DWORD *)(a1 + 132) = a2;
  if ( *(_DWORD *)(a1 + 8) & 0x20400004 )
  {
    result = (int *)(a1 + 560);
    v3 = 32;
    do
    {
      v4 = *result;
      ++result;
      --v3;
      *(result - 1) = v4 & 0xFFFFF000 | 0x10000;
    }
    while ( v3 );
  }
  else
  {
    sub_4E3B70(*(unsigned __int16 *)(a1 + 4));
    v5 = sub_4E4C90(a1, 1u);
    result = sub_4E4500(a1, 0x10000, 1, v5);
  }
  return result;
}

//----- (004E48F0) --------------------------------------------------------
int *__cdecl sub_4E48F0(int a1, int a2)
{
  char v2; // cl
  int *result; // eax
  int v4; // ecx
  int v5; // edx
  int v6; // eax

  sub_4E44F0(a1);
  v2 = *(_BYTE *)(a1 + 8);
  *(_DWORD *)(a1 + 340) = a2;
  if ( v2 & 4 )
    sub_56F7D0(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 4612), a2);
  if ( *(_DWORD *)(a1 + 8) & 0x20400004 )
  {
    result = (int *)(a1 + 560);
    v4 = 32;
    do
    {
      v5 = *result;
      ++result;
      --v4;
      *(result - 1) = 0x800000 | v5 & 0xFFFFF000;
    }
    while ( v4 );
  }
  else
  {
    sub_4E3B70(*(unsigned __int16 *)(a1 + 4));
    v6 = sub_4E4C90(a1, 0x80u);
    result = sub_4E4500(a1, 0x800000, 128, v6);
  }
  return result;
}

//----- (004E4990) --------------------------------------------------------
int *__cdecl sub_4E4990(int a1, int *a2)
{
  int v2; // eax
  int v3; // edx
  int *result; // eax
  int v5; // ecx
  int v6; // ecx
  int v7; // edx
  int v8; // eax

  v2 = *(_DWORD *)(a1 + 8);
  if ( v2 & 0x1000 && *(_DWORD *)(a1 + 12) & 0x47F0000 )
    goto LABEL_19;
  v3 = 0;
  result = a2;
  v5 = 4;
  do
  {
    if ( *result )
      v3 = 1;
    ++result;
    --v5;
  }
  while ( v5 );
  if ( v3 )
  {
LABEL_19:
    result = *(int **)&byte_5D4594[1564960];
    if ( !*(_DWORD *)&byte_5D4594[1564960] )
    {
      result = (int *)sub_4E3AA0((CHAR *)&byte_587000[202316]);
      *(_DWORD *)&byte_5D4594[1564960] = result;
    }
    if ( *(_DWORD *)(a1 + 8) & 0x13001000 || (int *)*(unsigned __int16 *)(a1 + 4) == result )
    {
      sub_4E44F0(a1);
      qmemcpy(*(void **)(a1 + 692), a2, 0x14u);
      if ( *(_DWORD *)(a1 + 8) & 0x20400004 )
      {
        result = (int *)(a1 + 560);
        v6 = 32;
        do
        {
          v7 = *result;
          ++result;
          --v6;
          *(result - 1) = v7 & 0xFFFFF000 | 0x2000000;
        }
        while ( v6 );
      }
      else
      {
        v8 = sub_4E4C90(a1, 0x200u);
        result = sub_4E4500(a1, 0x2000000, 512, v8);
      }
    }
  }
  return result;
}

//----- (004E4A70) --------------------------------------------------------
double __cdecl sub_4E4A70(int a1)
{
  return *(float *)(a1 + 120);
}

//----- (004E4A80) --------------------------------------------------------
int __cdecl sub_4E4A80(int a1)
{
  return *(_DWORD *)(a1 + 340);
}

//----- (004E4A90) --------------------------------------------------------
int *__cdecl sub_4E4A90(int a1, unsigned __int8 a2, int a3)
{
  int v3; // edi
  int v4; // eax
  int *result; // eax
  int v6; // ecx
  int v7; // edx
  int v8; // eax

  v3 = *(_DWORD *)(a1 + 748);
  sub_4E44F0(a1);
  v4 = v3 + 2 * (a2 + 692) + a2 + 692;
  *(_WORD *)v4 = *(_WORD *)a3;
  *(_BYTE *)(v4 + 2) = *(_BYTE *)(a3 + 2);
  if ( *(_DWORD *)(a1 + 8) & 0x20400004 )
  {
    result = (int *)(a1 + 560);
    v6 = 32;
    do
    {
      v7 = *result;
      ++result;
      --v6;
      *(result - 1) = v7 & 0xFFFFF000 | 0x4000000;
    }
    while ( v6 );
  }
  else
  {
    v8 = sub_4E4C90(a1, 0x400u);
    result = sub_4E4500(a1, 0x4000000, 1024, v8);
  }
  return result;
}

//----- (004E4B20) --------------------------------------------------------
int *__cdecl sub_4E4B20(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // ecx
  int v5; // ecx
  int *result; // eax
  int v7; // ecx
  int v8; // edx

  v3 = *(_DWORD *)(a1 + 748);
  sub_4E44F0(a1);
  v4 = *(_DWORD *)(a2 + 8);
  if ( a3 == 1 )
  {
    if ( v4 & 0x1001000 )
    {
      *(_DWORD *)(v3 + 2056) |= sub_415820(a2);
      goto LABEL_9;
    }
    v5 = sub_415C70(a2) | *(_DWORD *)(v3 + 2060);
  }
  else
  {
    if ( v4 & 0x1001000 )
    {
      *(_DWORD *)(v3 + 2056) &= ~sub_415820(a2);
      goto LABEL_9;
    }
    v5 = ~sub_415C70(a2) & *(_DWORD *)(v3 + 2060);
  }
  *(_DWORD *)(v3 + 2060) = v5;
LABEL_9:
  if ( !(*(_DWORD *)(a1 + 8) & 0x20400004) )
    return sub_4E4500(a1, 0x4000000, 1024, 1);
  result = (int *)(a1 + 560);
  v7 = 32;
  do
  {
    v8 = *result;
    ++result;
    --v7;
    *(result - 1) = v8 & 0xFFFFF000 | 0x4000000;
  }
  while ( v7 );
  return result;
}

//----- (004E4C00) --------------------------------------------------------
int __cdecl sub_4E4C00(int a1)
{
  int result; // eax

  if ( a1 )
    result = *(_DWORD *)(a1 + 36);
  else
    result = 0;
  return result;
}

//----- (004E4C10) --------------------------------------------------------
int __cdecl sub_4E4C10(int a1)
{
  int result; // eax

  if ( a1 )
    result = *(unsigned __int16 *)(a1 + 4);
  else
    result = 0;
  return result;
}

//----- (004E4C30) --------------------------------------------------------
int __cdecl sub_4E4C30(int a1)
{
  int result; // eax

  if ( a1 )
    result = *(_DWORD *)(a1 + 692);
  else
    result = 0;
  return result;
}

//----- (004E4C50) --------------------------------------------------------
int __cdecl sub_4E4C50(int a1)
{
  int v1; // eax
  int result; // eax

  if ( a1 && (v1 = sub_4E3B70(*(unsigned __int16 *)(a1 + 4))) != 0 )
    result = *(_DWORD *)(v1 + 180);
  else
    result = 0;
  return result;
}

//----- (004E4C80) --------------------------------------------------------
int __cdecl sub_4E4C80(int *a1)
{
  int result; // eax

  if ( a1 )
    result = *a1;
  else
    result = 0;
  return result;
}

//----- (004E4C90) --------------------------------------------------------
BOOL __cdecl sub_4E4C90(int a1, unsigned int a2)
{
  _DWORD *v2; // eax
  BOOL result; // eax
  _WORD *v4; // esi
  _WORD *v5; // eax

  v2 = (_DWORD *)sub_4E3B70(*(unsigned __int16 *)(a1 + 4));
  if ( a2 > 0x20 )
  {
    if ( a2 > 0x200 )
    {
      if ( a2 == 1024 && *(_BYTE *)(a1 + 8) & 2 && *(_BYTE *)(a1 + 12) & 0x30 )
        return 1;
    }
    else
    {
      switch ( a2 )
      {
        case 0x200u:
          return (*(_DWORD *)(a1 + 8) & 0x13001000) != 0;
        case 0x40u:
          if ( *(float *)(a1 + 104) != 0.0 )
            return 1;
          break;
        case 0x80u:
          return *(_DWORD *)(a1 + 340) != 0;
      }
    }
    return 0;
  }
  if ( a2 == 32 )
    return 0;
  switch ( a2 )
  {
    case 1u:
      result = *(_DWORD *)(a1 + 132) != 0;
      break;
    case 2u:
      v4 = *(_WORD **)(a1 + 556);
      if ( !v4 )
        return 0;
      v5 = (_WORD *)v2[34];
      if ( !v5 )
        return 0;
      result = *v5 != *v4;
      break;
    case 4u:
      result = ((unsigned int)(*(_DWORD *)(a1 + 16) ^ v2[8]) >> 24) & 1;
      break;
    case 8u:
      result = v2[9] != *(_DWORD *)(a1 + 20);
      break;
    default:
      return 0;
  }
  return result;
}

//----- (004E4DC0) --------------------------------------------------------
void sub_4E4DC0()
{
  srand(0x1429u);
}

//----- (004E4DD0) --------------------------------------------------------
void sub_4E4DD0()
{
  srand(0x490u);
}

//----- (004E4DE0) --------------------------------------------------------
int sub_4E4DE0()
{
  int v0; // edi
  unsigned __int8 *v1; // esi
  int result; // eax

  if ( *(_DWORD *)&byte_5D4594[1565508] )
    sub_414100(*(LPVOID *)&byte_5D4594[1565508]);
  *(_DWORD *)&byte_5D4594[1565508] = 0;
  memset(&byte_5D4594[1565524], 0, 0x40u);
  memset(&byte_5D4594[1565124], 0, 0x180u);
  *(_DWORD *)&byte_5D4594[1565512] = 0;
  *(_DWORD *)&byte_5D4594[1565516] = 0;
  v0 = 0;
  v1 = &byte_5D4594[1565124];
  do
  {
    v1[1] = 2;
    *v1 = 1;
    v1[2] = sub_40A6C0();
    result = sub_4E4E50(v0);
    v1 += 12;
    ++v0;
  }
  while ( (int)v1 < (int)&byte_5D4594[1565508] );
  return result;
}

//----- (004E4E50) --------------------------------------------------------
int __cdecl sub_4E4E50(int a1)
{
  unsigned int v1; // esi
  unsigned __int8 v2; // bl
  unsigned __int8 *v3; // ecx
  int result; // eax

  v1 = 1;
  if ( *(_DWORD *)&byte_5D4594[2650652] == 1 )
    v1 = sub_40A6C0();
  v2 = byte_5D4594[12 * a1 + 1565125];
  v3 = &byte_5D4594[12 * a1 + 1565124];
  if ( v2 > 2u )
    *((_DWORD *)v3 + 2) = *v3 * (v2 - 1) * (*(_DWORD *)&byte_5D4594[2649704] / v1);
  else
    *((_DWORD *)v3 + 2) = 0;
  result = v2 * *v3 * (*(_DWORD *)&byte_5D4594[2649704] / v1);
  *((_DWORD *)v3 + 1) = result;
  return result;
}

//----- (004E4ED0) --------------------------------------------------------
int sub_4E4ED0()
{
  int result; // eax

  result = 0;
  memset(&byte_5D4594[1565524], 0, 0x40u);
  return result;
}

//----- (004E4EF0) --------------------------------------------------------
int sub_4E4EF0()
{
  unsigned __int8 *v0; // esi
  int v1; // edi
  int result; // eax

  v0 = &byte_5D4594[1565124];
  memset(&byte_5D4594[1565124], 0, 0x180u);
  v1 = 0;
  do
  {
    v0[1] = 2;
    *v0 = 1;
    v0[2] = sub_40A6C0();
    result = sub_4E4E50(v1);
    v0 += 12;
    ++v1;
  }
  while ( (int)v0 < (int)&byte_5D4594[1565508] );
  return result;
}

//----- (004E4F30) --------------------------------------------------------
int __cdecl sub_4E4F30(int a1)
{
  int result; // eax

  result = a1;
  *(_WORD *)&byte_5D4594[2 * a1 + 1565524] = 0;
  return result;
}

//----- (004E4F40) --------------------------------------------------------
int __cdecl sub_4E4F40(int a1)
{
  int v1; // esi

  v1 = 12 * a1;
  byte_5D4594[v1 + 1565125] = 2;
  byte_5D4594[v1 + 1565124] = 1;
  byte_5D4594[v1 + 1565126] = sub_40A6C0();
  return sub_4E4E50(a1);
}

//----- (004E4F80) --------------------------------------------------------
int sub_4E4F80()
{
  int result; // eax
  unsigned __int8 v1; // cl
  int v2; // esi

  result = *(_DWORD *)&byte_5D4594[1565512];
  if ( *(_DWORD *)&byte_5D4594[1565512] )
  {
    do
    {
      v1 = *(_BYTE *)(result + 251);
      v2 = *(_DWORD *)(result + 408);
      if ( v1 >= 0x31u && v1 <= 0x33u )
        sub_4E4FC0(result);
      result = v2;
    }
    while ( v2 );
  }
  return result;
}

//----- (004E4FC0) --------------------------------------------------------
void __cdecl sub_4E4FC0(int a1)
{
  int v1; // ecx
  int v2; // ecx

  v1 = *(_DWORD *)(a1 + 412);
  if ( v1 )
    *(_DWORD *)(v1 + 408) = *(_DWORD *)(a1 + 408);
  else
    *(_DWORD *)&byte_5D4594[1565512] = *(_DWORD *)(a1 + 408);
  v2 = *(_DWORD *)(a1 + 408);
  if ( v2 )
    *(_DWORD *)(v2 + 412) = *(_DWORD *)(a1 + 412);
  else
    *(_DWORD *)&byte_5D4594[1565516] = *(_DWORD *)(a1 + 412);
  sub_414330(*(unsigned int **)&byte_5D4594[1565508], (_QWORD *)a1);
}

//----- (004E5030) --------------------------------------------------------
int __cdecl sub_4E5030(int a1, const void *a2, signed int a3, int a4, int a5, char a6)
{
  char *v7; // eax
  char *v8; // edx
  _WORD *v9; // esi
  char v10; // cl
  unsigned __int8 *v11; // eax
  unsigned __int8 *v12; // eax
  int v13; // edi
  int v14; // ecx

  if ( a1 == 255 || (a1 & 0x80u) == 0 || *(_DWORD *)&byte_5D4594[2649712] & ~(1 << (a1 & 0x7F)) )
  {
    if ( a3 > 150 )
      return 0;
    v7 = *(char **)&byte_5D4594[1565508];
    if ( !*(_DWORD *)&byte_5D4594[1565508] )
    {
      if ( sub_40A5C0(2048) )
        *(_DWORD *)&byte_5D4594[1565520] = 512;
      else
        *(_DWORD *)&byte_5D4594[1565520] = sub_40A5C0(1) ? 3072 : 256;
      if ( sub_40A5C0(2048) )
        v7 = sub_4140D0((const char *)&byte_587000[202328], 416, *(int *)&byte_5D4594[1565520]);
      else
        v7 = sub_413FE0((const char *)&byte_587000[202344], 416, *(int *)&byte_5D4594[1565520]);
      *(_DWORD *)&byte_5D4594[1565508] = v7;
    }
    v8 = (char *)sub_4142F0(v7);
    if ( !v8 )
    {
      if ( sub_4E52B0() != 1 )
        return 0;
      v8 = (char *)sub_4142F0(*(_DWORD **)&byte_5D4594[1565508]);
      if ( !v8 )
        return 0;
    }
    qmemcpy(v8 + 251, a2, a3);
    v8[401] = a3;
    *((_DWORD *)v8 + 101) = a4;
    v8[250] = a1;
    *((_DWORD *)v8 + 45) = a5;
    v8[184] = a6;
    *((_DWORD *)v8 + 43) = 0;
    *((_DWORD *)v8 + 42) = 0;
    v8[164] = 0;
    *((_DWORD *)v8 + 44) = *(_DWORD *)&byte_5D4594[2649712];
    memset(v8 + 4, 0, 0x80u);
    v9 = v8 + 186;
    *(_DWORD *)v8 = *(_DWORD *)&byte_5D4594[2598000];
    memset(v8 + 186, 0, 0x40u);
    if ( v8[184] )
    {
      if ( a1 == 255 )
      {
        v10 = 0;
        v11 = &byte_5D4594[1565524];
        do
        {
          if ( (1 << v10) & *((_DWORD *)v8 + 44) )
            *v9 = (*(_WORD *)v11)++;
          v11 += 2;
          ++v10;
          ++v9;
        }
        while ( (int)v11 < (int)&byte_5D4594[1565588] );
      }
      else if ( (a1 & 0x80u) == 0 )
      {
        *(_WORD *)&v8[2 * a1 + 186] = (*(_WORD *)&byte_5D4594[2 * a1 + 1565524])++;
      }
      else
      {
        v12 = &byte_5D4594[1565524];
        v13 = v8[250] & 0x7F;
        v14 = 0;
        do
        {
          if ( v14 != v13 && (1 << v14) & *((_DWORD *)v8 + 44) )
            *v9 = (*(_WORD *)v12)++;
          v12 += 2;
          ++v14;
          ++v9;
        }
        while ( (int)v12 < (int)&byte_5D4594[1565588] );
      }
    }
    *((_DWORD *)v8 + 103) = 0;
    *((_DWORD *)v8 + 102) = *(_DWORD *)&byte_5D4594[1565512];
    if ( *(_DWORD *)&byte_5D4594[1565512] )
    {
      *(_DWORD *)(*(_DWORD *)&byte_5D4594[1565512] + 412) = v8;
      *(_DWORD *)&byte_5D4594[1565512] = v8;
      return 1;
    }
    *(_DWORD *)&byte_5D4594[1565516] = v8;
    *(_DWORD *)&byte_5D4594[1565512] = v8;
  }
  return 1;
}

//----- (004E52B0) --------------------------------------------------------
int sub_4E52B0()
{
  int v0; // ebp
  int v1; // edx
  int v2; // ebx
  unsigned __int16 v3; // si
  unsigned int v4; // edi
  char v5; // al
  int v6; // eax
  __int16 v8[32]; // [esp+10h] [ebp-40h]

  v0 = 0;
  v1 = *(_DWORD *)&byte_5D4594[1565512];
  v8[0] = 0;
  memset(&v8[1], 0, 0x3Cu);
  v2 = -1;
  v3 = 0;
  v8[31] = 0;
  v4 = 999999999;
  if ( !*(_DWORD *)&byte_5D4594[1565512] )
    return 0;
  do
  {
    v5 = *(_BYTE *)(v1 + 250);
    if ( v5 != -1 && v5 >= 0 && v5 != 31 )
    {
      v6 = *(unsigned __int8 *)(v1 + 250);
      if ( (unsigned __int16)++v8[v6] > v3 )
      {
        v2 = v6;
        v3 = v8[v6];
      }
    }
    if ( *(_DWORD *)v1 < v4 )
    {
      v4 = *(_DWORD *)v1;
      v0 = v1;
    }
    v1 = *(_DWORD *)(v1 + 408);
  }
  while ( v1 );
  if ( v2 != -1 )
  {
    nullsub_24(&byte_587000[202360]);
    sub_4E5360(v2);
  }
  if ( !v0 )
    return 0;
  sub_4E4FC0(v0);
  return 1;
}
// 4E5AB0: using guessed type void __cdecl nullsub_24(_DWORD);

//----- (004E5360) --------------------------------------------------------
char *__cdecl sub_4E5360(int a1)
{
  char *result; // eax
  char *v2; // esi

  result = sub_417090(a1);
  v2 = result;
  if ( result )
  {
    sub_4E55F0(a1);
    result = (char *)sub_4174F0((int)v2, 128);
  }
  return result;
}

//----- (004E5390) --------------------------------------------------------
int __cdecl sub_4E5390(int a1, int a2, int a3, int a4, int a5)
{
  return sub_4E5030(a1, (const void *)a2, a3, a4, a5, 1);
}

//----- (004E53C0) --------------------------------------------------------
int __cdecl sub_4E53C0(int a1, const void *a2, int a3, int a4, int a5)
{
  int result; // eax

  if ( sub_40A5C0(1) )
  {
    sub_40EBC0(a1, 0, a2, a3);
    result = 1;
  }
  else if ( a1 == 255 || (a1 & 0x80u) != 0 )
  {
    result = 0;
  }
  else
  {
    result = sub_4E5420(a1, a2, a3, a4, a5);
  }
  return result;
}

//----- (004E5420) --------------------------------------------------------
int __cdecl sub_4E5420(int a1, const void *a2, signed int a3, int a4, int a5)
{
  return sub_4E5030(a1, a2, a3, a4, a5, 0);
}

//----- (004E5450) --------------------------------------------------------
int __cdecl sub_4E5450(int a1, char *a2, signed int a3, int a4, int a5)
{
  char *v5; // edi
  int v6; // eax
  int v7; // esi
  char v9; // [esp+10h] [ebp+8h]

  v5 = a2;
  v9 = *a2;
  v6 = *(_DWORD *)&byte_5D4594[1565512];
  if ( *(_DWORD *)&byte_5D4594[1565512] )
  {
    do
    {
      v7 = *(_DWORD *)(v6 + 408);
      if ( v9 == *(_BYTE *)(v6 + 251) )
      {
        if ( a1 == 255 || (a1 & 0x80u) != 0 )
          sub_4E4FC0(v6);
        else
          sub_4E54D0(1 << a1, v6, a1);
      }
      v6 = v7;
    }
    while ( v7 );
  }
  return sub_4E5420(a1, v5, a3, a4, a5);
}

//----- (004E54D0) --------------------------------------------------------
void __cdecl sub_4E54D0(int a1, int a2, int a3)
{
  int v3; // ecx
  char v4; // dl
  int v5; // esi
  char v6; // cl
  int v7; // ecx
  int v8; // edx
  int v9; // ecx

  v3 = *(_DWORD *)(a2 + 404);
  if ( v3 )
  {
    v4 = *(_BYTE *)(a2 + 251);
    if ( v4 == 49 || v4 == 50 || v4 == 51 )
      *(_DWORD *)(v3 + 148) &= ~a1;
  }
  v5 = *(_DWORD *)&byte_5D4594[2649712] & *(_DWORD *)(a2 + 176);
  v6 = *(_BYTE *)(a2 + 250);
  if ( v6 == -1 )
  {
    v7 = a1 | *(_DWORD *)(a2 + 168);
    *(_DWORD *)(a2 + 168) = v7;
    if ( (v5 & v7) == v5 )
      sub_4E4FC0(a2);
  }
  else if ( v6 >= 0 )
  {
    if ( *(unsigned __int8 *)(a2 + 250) == a3 )
      sub_4E4FC0(a2);
  }
  else
  {
    v8 = 1 << (v6 & 0x7F);
    v9 = a1 | *(_DWORD *)(a2 + 168);
    *(_DWORD *)(a2 + 168) = v9;
    if ( (v5 & ~v8 & v9) == (v5 & ~v8) )
      sub_4E4FC0(a2);
  }
}

//----- (004E55A0) --------------------------------------------------------
int __cdecl sub_4E55A0(unsigned __int8 a1, int a2)
{
  int result; // eax
  int v3; // edi

  result = *(_DWORD *)&byte_5D4594[1565512];
  if ( *(_DWORD *)&byte_5D4594[1565512] )
  {
    do
    {
      v3 = *(_DWORD *)(result + 408);
      if ( *(_DWORD *)(result + 4 * a1 + 4) == a2 )
        sub_4E54D0(1 << a1, result, a1);
      result = v3;
    }
    while ( v3 );
  }
  return result;
}

//----- (004E55F0) --------------------------------------------------------
int __cdecl sub_4E55F0(unsigned __int8 a1)
{
  int result; // eax
  int v2; // esi

  result = *(_DWORD *)&byte_5D4594[1565512];
  if ( *(_DWORD *)&byte_5D4594[1565512] )
  {
    do
    {
      v2 = *(_DWORD *)(result + 408);
      sub_4E54D0(1 << a1, result, a1);
      result = v2;
    }
    while ( v2 );
  }
  return result;
}

//----- (004E5630) --------------------------------------------------------
int __cdecl sub_4E5630(unsigned __int8 a1, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  int result; // eax

  result = 12 * a1;
  *a2 = *(_DWORD *)&byte_5D4594[result + 1565128];
  *a3 = byte_5D4594[result + 1565125];
  *a4 = byte_5D4594[result + 1565124];
  return result;
}

//----- (004E5670) --------------------------------------------------------
unsigned int __cdecl sub_4E5670(unsigned __int8 a1)
{
  int v1; // ebp
  int v2; // eax
  int v3; // ecx
  char v4; // al
  unsigned __int8 *v5; // esi
  unsigned __int8 v6; // al
  unsigned int result; // eax
  int v8; // eax
  unsigned __int8 v9; // al

  v1 = 0;
  sub_417090(a1);
  v2 = *(_DWORD *)&byte_5D4594[1565516];
  if ( *(_DWORD *)&byte_5D4594[1565516] )
  {
    do
    {
      v3 = *(_DWORD *)(v2 + 412);
      if ( !(*(_DWORD *)(v2 + 168) & (1 << a1)) )
      {
        v4 = *(_BYTE *)(v2 + 250);
        if ( v4 == -1 )
          goto LABEL_8;
        if ( v4 >= 0 )
        {
          if ( v4 == a1 )
          {
LABEL_8:
            ++v1;
            goto LABEL_9;
          }
        }
        else if ( a1 != (v4 & 0x7F) )
        {
          goto LABEL_8;
        }
      }
LABEL_9:
      v2 = v3;
    }
    while ( v3 );
  }
  v5 = &byte_5D4594[12 * a1 + 1565124];
  if ( sub_40A6C0() != v5[2] )
    v5[2] = sub_40A6C0();
  if ( v1 <= *((_DWORD *)v5 + 1) )
  {
    v8 = *((_DWORD *)v5 + 2);
    if ( v8 > 0 && v1 < v8 )
    {
      if ( *v5 == 2 )
      {
        *v5 = 1;
        return sub_4E4E50(a1);
      }
      v9 = v5[1] - 1;
      v5[1] = v9;
      if ( v9 < 2u )
        v5[1] = 2;
    }
    result = sub_4E4E50(a1);
  }
  else
  {
    v6 = v5[1] + 1;
    v5[1] = v6;
    if ( v6 > 5u )
    {
      if ( *v5 == 2 )
        sub_4E5360(a1);
      v5[1] = 5;
      *v5 = 2;
    }
    v5[2] = sub_40A6C0();
    result = sub_4E4E50(a1);
  }
  return result;
}

//----- (004E5770) --------------------------------------------------------
void __cdecl sub_4E5770(unsigned __int8 a1, int a2)
{
  int v2; // edi
  char *v3; // esi
  int v4; // ebp
  int v5; // eax
  char v6; // al
  int v7; // eax
  char v8; // al
  char v9; // cl
  int v10; // eax
  int v11; // eax
  char v12[1]; // [esp+13h] [ebp-1Dh]
  int (__cdecl *v13)(int, int, const void *, int); // [esp+14h] [ebp-1Ch]
  int v14; // [esp+18h] [ebp-18h]
  int v15; // [esp+1Ch] [ebp-14h]
  int v16; // [esp+20h] [ebp-10h]
  int v17; // [esp+24h] [ebp-Ch]
  char v18[5]; // [esp+28h] [ebp-8h]

  v2 = 1 << a1;
  v15 = 1;
  v14 = 0;
  v16 = 1 << a1;
  v3 = sub_417090(a1);
  v13 = sub_40EBC0;
  if ( a1 != 31 )
    v13 = sub_40ECA0;
  if ( !v3 || !sub_40A5C0(1) || v3[3680] & 0x10 )
  {
    v4 = *(_DWORD *)&byte_5D4594[1565516];
    if ( *(_DWORD *)&byte_5D4594[1565516] )
    {
      while ( 1 )
      {
        v17 = *(_DWORD *)(v4 + 412);
        v5 = *(_DWORD *)(v4 + 404);
        if ( v5 && *(_BYTE *)(v5 + 16) & 0x20 )
          *(_DWORD *)(v4 + 404) = 0;
        if ( v2 & *(_DWORD *)(v4 + 168) )
          goto LABEL_39;
        v6 = *(_BYTE *)(v4 + 250);
        if ( v6 != -1 )
        {
          if ( v6 >= 0 )
          {
            if ( v6 != a1 )
              goto LABEL_39;
          }
          else if ( a1 == (v6 & 0x7F) )
          {
            goto LABEL_39;
          }
        }
        v7 = *(_DWORD *)(v4 + 404);
        if ( v7 && !(v2 & *(_DWORD *)(v7 + 148)) || *(_DWORD *)(v4 + 180) && !(v2 & *(_DWORD *)&byte_5D4594[2649712]) )
        {
          sub_4E54D0(v2, v4, a1);
          return;
        }
        if ( !(v2 & *(_DWORD *)(v4 + 172)) )
          goto LABEL_24;
        v8 = *(_BYTE *)(a1 + v4 + 132);
        if ( v8 )
        {
          *(_BYTE *)(a1 + v4 + 132) = v8 - 1;
          goto LABEL_39;
        }
        if ( v14 < byte_5D4594[12 * a1 + 1565124] )
          break;
LABEL_39:
        v4 = v17;
        if ( !v17 )
          goto LABEL_40;
      }
      v9 = *(_BYTE *)(v4 + 164) + 1;
      v10 = v14 + 1;
      *(_DWORD *)(v4 + 172) &= ~v2;
      *(_BYTE *)(v4 + 164) = v9;
      v14 = v10;
LABEL_24:
      if ( v15 )
      {
        if ( a2 && a1 != 31 )
        {
          v12[0] = -86;
          if ( !v13(a1, a2, v12, 1) )
            return;
        }
        else
        {
          v18[0] = -86;
          *(_DWORD *)&v18[1] = *(_DWORD *)&byte_5D4594[2598000];
          if ( !v13(a1, a2, v18, 5) )
            return;
        }
        v15 = 0;
      }
      if ( !*(_BYTE *)(v4 + 184) )
      {
        v11 = v13(a1, a2, (const void *)(v4 + 251), *(unsigned __int8 *)(v4 + 401));
        goto LABEL_36;
      }
      if ( byte_5D4594 != (unsigned __int8 *)-1564964 )
      {
        byte_5D4594[1564964] = -52;
        *(_WORD *)&byte_5D4594[1564965] = *(_WORD *)(v4 + 2 * a1 + 186);
        byte_5D4594[1564967] = *(_BYTE *)(v4 + 401);
        qmemcpy(&byte_5D4594[1564968], (const void *)(v4 + 251), *(unsigned __int8 *)(v4 + 401));
        v11 = v13(a1, a2, &byte_5D4594[1564964], *(unsigned __int8 *)(v4 + 401) + 4);
        v2 = v16;
LABEL_36:
        if ( v11 )
        {
          *(_DWORD *)(v4 + 172) |= v2;
          *(_BYTE *)(a1 + v4 + 132) = *(_DWORD *)&byte_5D4594[2649704]
                                    * (unsigned int)byte_5D4594[12 * a1 + 1565125]
                                    / sub_40A6C0();
          *(_DWORD *)(v4 + 4 * a1 + 4) = *(_DWORD *)&byte_5D4594[2598000];
          if ( *(_DWORD *)&byte_5D4594[2650636] & 0x400000 )
            sub_4E54D0(v2, v4, a1);
        }
        goto LABEL_39;
      }
      goto LABEL_39;
    }
LABEL_40:
    if ( sub_40A5C0(1)
      && !(*(_DWORD *)&byte_5D4594[2598000]
         % (*(_DWORD *)&byte_5D4594[2649704] * (unsigned int)byte_5D4594[12 * a1 + 1565125])) )
    {
      sub_4E5670(a1);
    }
  }
}

//----- (004E5A90) --------------------------------------------------------
int sub_4E5A90()
{
  int v0; // eax
  int i; // ecx

  v0 = *(_DWORD *)&byte_5D4594[1565512];
  for ( i = 0; v0; ++i )
    v0 = *(_DWORD *)(v0 + 408);
  return *(_DWORD *)&byte_5D4594[1565520] - i;
}

//----- (004E5AC0) --------------------------------------------------------
void sub_4E5AC0()
{
  srand(0x13D11u);
}

//----- (004E5AD0) --------------------------------------------------------
void __cdecl sub_4E5AD0(int a1)
{
  char v1; // al
  int v2; // esi
  int v3; // edi

  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    v1 = *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 2251);
    if ( v1 == 1 )
    {
      sub_4E5F40(a1);
    }
    else if ( v1 == 2 )
    {
      sub_4E5FC0(a1);
    }
  }
  v2 = *(_DWORD *)(a1 + 516);
  if ( v2 )
  {
    do
    {
      v3 = *(_DWORD *)(v2 + 512);
      if ( *(_BYTE *)(v2 + 8) & 1 || !sub_4E3B80(*(unsigned __int16 *)(v2 + 4)) )
        sub_4E5CC0(v2);
      v2 = v3;
    }
    while ( v3 );
  }
}

//----- (004E5B50) --------------------------------------------------------
BOOL __cdecl sub_4E5B50(int a1)
{
  int v1; // ecx
  BOOL result; // eax

  result = 0;
  if ( !sub_40A5C0(0x2000) )
  {
    if ( *(_BYTE *)(a1 + 8) & 2 )
    {
      v1 = *(_DWORD *)(a1 + 12);
      if ( v1 & 0x100 )
        result = 1;
    }
  }
  return result;
}

//----- (004E5B80) --------------------------------------------------------
BOOL __cdecl sub_4E5B80(int a1)
{
  int v1; // eax
  BOOL result; // eax

  if ( !*(_DWORD *)&byte_5D4594[1565592] )
    *(_DWORD *)&byte_5D4594[1565592] = sub_4E3AA0((CHAR *)&byte_587000[202376]);
  result = 0;
  if ( a1 )
  {
    if ( *(_BYTE *)(a1 + 8) & 1 )
    {
      if ( sub_40A5C0(2048) )
      {
        if ( *(unsigned __int16 *)(a1 + 4) == *(_DWORD *)&byte_5D4594[1565592] )
        {
          v1 = sub_4EC580(a1);
          if ( v1 )
          {
            if ( *(_BYTE *)(v1 + 8) & 4 )
              result = 1;
          }
        }
      }
    }
  }
  return result;
}

//----- (004E5BF0) --------------------------------------------------------
void __cdecl sub_4E5BF0(int a1)
{
  int v1; // esi
  int v2; // edi
  int v3; // eax
  int v4; // eax
  int v5; // esi
  int v6; // edi

  if ( !*(_DWORD *)&byte_5D4594[1565596] )
    *(_DWORD *)&byte_5D4594[1565596] = sub_4E3AA0((CHAR *)&byte_587000[202384]);
  v1 = sub_4DA790();
  if ( v1 )
  {
    do
    {
      v2 = sub_4DA7A0(v1);
      if ( !a1
        || !(*(_BYTE *)(v1 + 8) & 4)
        && ((v3 = *(_DWORD *)(v1 + 492)) == 0 || !(*(_BYTE *)(v3 + 8) & 4))
        && (*(unsigned __int16 *)(v1 + 4) != *(_DWORD *)&byte_5D4594[1565596]
         || (v4 = *(_DWORD *)(v1 + 508)) == 0
         || !(*(_BYTE *)(v4 + 8) & 4))
        && !sub_4E5B50(v1) )
      {
        sub_4E5CC0(v1);
      }
      v1 = v2;
    }
    while ( v2 );
  }
  v5 = sub_4DA840();
  if ( v5 )
  {
    do
    {
      v6 = sub_4DA850(v5);
      if ( a1 != 1 || !sub_4E5B80(v5) )
        sub_4E5CC0(v5);
      v5 = v6;
    }
    while ( v6 );
  }
}

//----- (004E5CC0) --------------------------------------------------------
void __cdecl sub_4E5CC0(int a1)
{
  int v1; // eax
  int v2; // eax

  if ( a1 && !(*(_BYTE *)(a1 + 16) & 0x20) )
  {
    v1 = *(_DWORD *)(a1 + 508);
    if ( v1 && *(_BYTE *)(v1 + 8) & 4 && *(_BYTE *)(a1 + 8) & 2 && !sub_500CC0(v1, a1) && (*(_BYTE *)(a1 + 12) & 0x80) )
      sub_4E7B60(*(_DWORD *)(a1 + 508), (_DWORD *)a1);
    v2 = *(_DWORD *)(a1 + 492);
    if ( v2 )
      sub_4ED0C0(v2, (int *)a1);
    sub_4FEAE0(a1);
    if ( sub_40A5C0(4096) && *(_BYTE *)(a1 + 8) & 2 )
      sub_50E210(a1);
    if ( *(_BYTE *)(a1 + 8) & 4 )
      sub_506740(a1);
    *(_DWORD *)(a1 + 16) |= 0x20u;
    *(_DWORD *)(a1 + 452) = *(_DWORD *)&byte_5D4594[1565588];
    *(_DWORD *)&byte_5D4594[1565588] = a1;
    *(_DWORD *)(a1 + 456) = *(_DWORD *)&byte_5D4594[2598000];
    if ( sub_419130(a1 + 48) )
      sub_419570(a1 + 48, *(_DWORD *)(a1 + 36));
  }
}

//----- (004E5DB0) --------------------------------------------------------
void __cdecl sub_4E5DB0(int a1)
{
  int v1; // edi
  int v2; // ebx
  int v3; // eax
  int v4; // esi

  v1 = sub_4DA790();
  if ( v1 )
  {
    do
    {
      v2 = sub_4DA7A0(v1);
      v3 = *(_DWORD *)(v1 + 504);
      if ( v3 )
      {
        do
        {
          v4 = *(_DWORD *)(v3 + 496);
          if ( *(unsigned __int16 *)(v3 + 4) == a1 )
            sub_4E5CC0(v3);
          v3 = v4;
        }
        while ( v4 );
      }
      if ( *(unsigned __int16 *)(v1 + 4) == a1 )
        sub_4E5CC0(v1);
      v1 = v2;
    }
    while ( v2 );
  }
}

//----- (004E5E20) --------------------------------------------------------
_DWORD *sub_4E5E20()
{
  _DWORD *result; // eax
  _DWORD *v1; // edi
  _DWORD *v2; // esi

  result = *(_DWORD **)&byte_5D4594[1565588];
  v1 = 0;
  if ( *(_DWORD *)&byte_5D4594[1565588] )
  {
    do
    {
      v2 = (_DWORD *)result[113];
      if ( result[114] == *(_DWORD *)&byte_5D4594[2598000] )
      {
        result[113] = v1;
        v1 = result;
        sub_4DA920(result);
      }
      else
      {
        sub_4E5E80(result);
      }
      result = v2;
    }
    while ( v2 );
    *(_DWORD *)&byte_5D4594[1565588] = v1;
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1565588] = 0;
  }
  return result;
}

//----- (004E5E80) --------------------------------------------------------
int __cdecl sub_4E5E80(_DWORD *a1)
{
  sub_4EC4B0((int)a1);
  sub_4EC300((int)a1);
  sub_51AE60((int)a1);
  sub_5116F0((int)a1);
  sub_4EDA40(a1);
  sub_4DADE0((int)a1);
  return sub_4E38A0((int)a1);
}

//----- (004E5EC0) --------------------------------------------------------
_DWORD *sub_4E5EC0()
{
  _DWORD *result; // eax
  _DWORD *v1; // esi

  result = *(_DWORD **)&byte_5D4594[1565588];
  if ( *(_DWORD *)&byte_5D4594[1565588] )
  {
    do
    {
      v1 = (_DWORD *)result[113];
      sub_4E5E80(result);
      result = v1;
    }
    while ( v1 );
    *(_DWORD *)&byte_5D4594[1565588] = 0;
  }
  else
  {
    *(_DWORD *)&byte_5D4594[1565588] = 0;
  }
  return result;
}

//----- (004E5F00) --------------------------------------------------------
void __cdecl sub_4E5F00(int (__cdecl *a1)(int, int), int a2)
{
  int i; // esi

  for ( i = *(_DWORD *)&byte_5D4594[1565588]; i; i = *(_DWORD *)(i + 452) )
  {
    if ( *(_DWORD *)(i + 456) != *(_DWORD *)&byte_5D4594[2598000] )
      a1(i, a2);
  }
}

//----- (004E5F40) --------------------------------------------------------
int __cdecl sub_4E5F40(int a1)
{
  int result; // eax
  int i; // esi

  if ( !*(_DWORD *)&byte_5D4594[1565600] )
    *(_DWORD *)&byte_5D4594[1565600] = sub_4E3AA0((CHAR *)&byte_587000[202396]);
  result = sub_4DA790();
  for ( i = result; result; i = result )
  {
    if ( sub_4EC4F0(i, a1)
      && *(unsigned __int16 *)(i + 4) == *(_DWORD *)&byte_5D4594[1565600]
      && !(*(_BYTE *)(i + 16) & 0x20) )
    {
      sub_522FF0(129, (float2 *)(i + 56));
      sub_4E5CC0(i);
    }
    result = sub_4DA7A0(i);
  }
  return result;
}

//----- (004E5FC0) --------------------------------------------------------
void __cdecl sub_4E5FC0(int a1)
{
  int v1; // ebx
  int v2; // ebp
  int v3; // esi
  int v4; // edi

  v1 = *(_DWORD *)(a1 + 516);
  if ( v1 )
  {
    do
    {
      v2 = *(_DWORD *)(v1 + 512);
      if ( sub_500CC0(a1, v1) )
      {
        v3 = sub_4E7980(v1);
        if ( v3 )
        {
          do
          {
            v4 = sub_4E7990(v3);
            sub_4E5CC0(v3);
            v3 = v4;
          }
          while ( v4 );
        }
        sub_522FF0(129, (float2 *)(v1 + 56));
        sub_4E5CC0(v1);
      }
      v1 = v2;
    }
    while ( v2 );
  }
}

//----- (004E6040) --------------------------------------------------------
int __cdecl sub_4E6040(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 3628) = 0;
  return result;
}

//----- (004E6060) --------------------------------------------------------
int __cdecl sub_4E6060(int a1, int a2)
{
  int result; // eax

  result = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 276);
  if ( *(_DWORD *)(result + 3628) == a2 )
    return sub_4E6040(a1);
  *(_DWORD *)(result + 3628) = a2;
  return result;
}

//----- (004E60A0) --------------------------------------------------------
char *__cdecl sub_4E60A0(int a1)
{
  char *result; // eax
  int i; // esi

  result = sub_416EA0();
  for ( i = (int)result; result; i = (int)result )
  {
    if ( *(_DWORD *)(i + 3628) == a1 )
      sub_4E60E0(i);
    result = sub_416EE0(i);
  }
  return result;
}

//----- (004E60E0) --------------------------------------------------------
int __cdecl sub_4E60E0(int a1)
{
  int result; // eax
  int v2; // edi

  result = *(_DWORD *)(a1 + 2056);
  if ( result )
  {
    if ( sub_4DDF30(*(_DWORD *)(a1 + 2056)) )
    {
      v2 = sub_4E6280(a1);
      if ( !v2 )
        return sub_4DDEF0(*(_DWORD *)(a1 + 2056));
    }
    else
    {
      v2 = sub_4E6150(a1);
    }
    sub_4E6040(*(_DWORD *)(a1 + 2056));
    result = sub_4E6060(*(_DWORD *)(a1 + 2056), v2);
  }
  return result;
}

//----- (004E6150) --------------------------------------------------------
int __cdecl sub_4E6150(int a1)
{
  int v1; // eax
  int v2; // eax
  int i; // esi
  char *v4; // eax
  int result; // eax
  char *v6; // eax

  if ( !*(_DWORD *)&byte_5D4594[1565616] )
    *(_DWORD *)&byte_5D4594[1565616] = sub_4E3AA0((CHAR *)&byte_587000[202408]);
  v1 = *(_DWORD *)(a1 + 3628);
  if ( v1 )
  {
    if ( *(_BYTE *)(v1 + 8) & 4 )
    {
      v2 = sub_4DA7F0(*(_DWORD *)(a1 + 3628));
      goto LABEL_7;
    }
  }
  else if ( sub_40A5C0(64) )
  {
    v2 = sub_4E6230();
    if ( v2 )
      goto LABEL_7;
  }
  v2 = sub_4DA7C0();
LABEL_7:
  i = v2;
  if ( !v2 )
    goto LABEL_16;
  if ( *(_BYTE *)(v2 + 8) & 4 )
  {
    while ( 1 )
    {
      v4 = sub_417040(*(_DWORD *)(i + 36));
      if ( !(*(_BYTE *)(i + 16) & 0x20) && !(v4[3680] & 1) )
        break;
      i = sub_4DA7F0(i);
      if ( !i )
        goto LABEL_16;
    }
  }
  if ( !i )
  {
LABEL_16:
    result = sub_4E6230();
    if ( result )
      return result;
    for ( i = sub_4DA7C0(); i; i = sub_4DA7F0(i) )
    {
      v6 = sub_417040(*(_DWORD *)(i + 36));
      if ( !(*(_BYTE *)(i + 16) & 0x20) && !(v6[3680] & 1) )
        break;
    }
  }
  return i;
}

//----- (004E6230) --------------------------------------------------------
int sub_4E6230()
{
  int result; // eax

  if ( !*(_DWORD *)&byte_5D4594[1565616] )
    *(_DWORD *)&byte_5D4594[1565616] = sub_4E3AA0((CHAR *)&byte_587000[202420]);
  result = sub_4DA790();
  if ( !result )
    return 0;
  while ( *(unsigned __int16 *)(result + 4) != *(_DWORD *)&byte_5D4594[1565616] )
  {
    result = sub_4DA7A0(result);
    if ( !result )
      return 0;
  }
  return result;
}

//----- (004E6280) --------------------------------------------------------
int __cdecl sub_4E6280(int a1)
{
  int result; // eax

  if ( *(_DWORD *)(a1 + 3628) )
    result = sub_4EC420(*(_DWORD *)(a1 + 3628));
  else
    result = sub_4EC3E0(*(_DWORD *)(a1 + 2056));
  if ( result )
  {
    while ( *(_DWORD *)(result + 16) & 0x8020 )
    {
      result = sub_4EC420(result);
      if ( !result )
        goto LABEL_9;
    }
  }
  else
  {
LABEL_9:
    for ( result = sub_4EC3E0(*(_DWORD *)(a1 + 2056)); result; result = sub_4EC420(result) )
    {
      if ( !(*(_DWORD *)(result + 16) & 0x8020) )
        break;
    }
  }
  return result;
}

//----- (004E62F0) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4E62F0(int a1)
{
  int v1; // edi
  int v2; // edx
  _DWORD *v3; // eax
  int v4; // esi
  int v5; // eax
  int v6; // eax
  int v7; // eax
  unsigned __int8 *result; // eax
  int v9; // ebx
  double v10; // st7
  bool v11; // zf
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  double v16; // st7
  double v17; // st7
  _DWORD *v18; // [esp+10h] [ebp-28h]
  float v19; // [esp+14h] [ebp-24h]
  float v20; // [esp+18h] [ebp-20h]
  float v21; // [esp+1Ch] [ebp-1Ch]
  float2 v22; // [esp+20h] [ebp-18h]
  float4 a1a; // [esp+28h] [ebp-10h]

  v1 = a1;
  v2 = 4;
  v3 = *(_DWORD **)(a1 + 748);
  v18 = v3;
  v4 = v3[69];
  v5 = (int)(v3 + 29);
  do
  {
    if ( *(_DWORD *)v5 && *(_BYTE *)(*(_DWORD *)v5 + 16) & 0x20 )
      *(_DWORD *)v5 = 0;
    v5 += 4;
    --v2;
  }
  while ( v2 );
  sub_4E44F0(a1);
  if ( *(_DWORD *)&byte_5D4594[2650636] & 0x400000 )
  {
    v6 = *(_DWORD *)(v4 + 3628);
    if ( v6 )
    {
      *(_DWORD *)(v4 + 3632) = *(_DWORD *)(v6 + 56);
      *(_DWORD *)(v4 + 3636) = *(_DWORD *)(v6 + 60);
    }
  }
  v7 = *(_DWORD *)(v4 + 3628);
  if ( v7 )
  {
    *(_DWORD *)(v4 + 3632) = *(_DWORD *)(v7 + 56);
    *(_DWORD *)(v4 + 3636) = *(_DWORD *)(v7 + 60);
  }
  result = sub_51AB50(*(unsigned __int8 *)(v4 + 2064));
  if ( result )
  {
    *(_DWORD *)(v4 + 3688) = 0;
    result = sub_51AB50(*(unsigned __int8 *)(v4 + 2064));
    v9 = (int)result;
    if ( result )
    {
      while ( 1 )
      {
        if ( *(_DWORD *)(v9 + 8) == 2 )
        {
          v14 = *(_DWORD *)(v4 + 3672);
          if ( v14 )
          {
            if ( v14 == 1 )
            {
              v16 = *(float *)(v4 + 3632) - (double)*(int *)(v4 + 2284);
              v19 = *(float *)(v4 + 3636) - (double)*(int *)(v4 + 2288);
              if ( v16 <= *(float *)&byte_587000[202404] )
              {
                if ( v16 >= -*(float *)&byte_587000[202404] )
                  v20 = *(float *)(v4 + 3632);
                else
                  v20 = *(float *)(v4 + 3632) - (*(float *)&byte_587000[202404] + v16) * 0.1;
              }
              else
              {
                v20 = *(float *)(v4 + 3632) - (v16 - *(float *)&byte_587000[202404]) * 0.1;
              }
              if ( v19 > (double)*(float *)&byte_587000[202404] )
              {
                v17 = v19 - *(float *)&byte_587000[202404];
                goto LABEL_65;
              }
              if ( -*(float *)&byte_587000[202404] <= v19 )
              {
                v21 = *(float *)(v4 + 3636);
              }
              else
              {
                v17 = *(float *)&byte_587000[202404] + v19;
LABEL_65:
                v21 = *(float *)(v4 + 3636) - v17 * 0.1;
              }
              if ( sub_517590(v20, v21) )
              {
                *(float *)(v4 + 3632) = v20;
                *(float *)(v4 + 3636) = v21;
              }
              v1 = a1;
              goto LABEL_72;
            }
          }
          else
          {
            v15 = *(_DWORD *)(v4 + 3692);
            *(_DWORD *)(v4 + 3688) = 1;
            if ( !v15 )
              sub_4E60E0(v4);
            *(_DWORD *)(v9 + 16) = 0;
          }
          goto LABEL_72;
        }
        if ( *(_DWORD *)(v9 + 8) != 6 )
        {
          if ( *(_DWORD *)(v9 + 8) != 7 )
            goto LABEL_72;
          if ( !sub_4DDF30(v1) && !sub_40A5C0(4096) )
          {
            a1a.field_0 = *(float *)(v4 + 3632) - 100.0;
            a1a.field_4 = *(float *)(v4 + 3636) - 100.0;
            a1a.field_8 = *(float *)(v4 + 3632) + 100.0;
            v10 = *(float *)(v4 + 3636) + 100.0;
            *(_DWORD *)&byte_5D4594[1565612] = 0;
            *(_DWORD *)&byte_5D4594[1565608] = 1287568416;
            *(_DWORD *)&byte_5D4594[1565604] = v1;
            a1a.field_C = v10;
            sub_517C10(&a1a, sub_4E6800, v4 + 3632);
            if ( *(_DWORD *)&byte_5D4594[1565612] && *(_DWORD *)&byte_5D4594[1565612] != *(_DWORD *)(v4 + 3628) )
            {
              sub_4E6060(*(_DWORD *)(v4 + 2056), *(int *)&byte_5D4594[1565612]);
              *(_DWORD *)(v4 + 3672) = 0;
            }
            else
            {
              sub_4E6040(*(_DWORD *)(v4 + 2056));
              *(_DWORD *)(v4 + 3672) = 1;
            }
            goto LABEL_72;
          }
        }
        if ( *(_DWORD *)&byte_5D4594[2650652]
          && sub_40A5C0(49152)
          && !sub_509CF0((const char *)(v4 + 2096), *(_BYTE *)(v4 + 2251), *(_DWORD *)(v4 + 2068)) )
        {
          sub_4DA0F0(*(unsigned __int8 *)(v4 + 2064), 17, 0);
          *(_DWORD *)(v9 + 16) = 0;
          goto LABEL_72;
        }
        if ( *(_BYTE *)(v4 + 3680) & 0x20 )
          goto LABEL_45;
        if ( sub_40A5C0(4096) )
          break;
        if ( sub_40A740()
          || sub_40A5C0(0x8000)
          || (v12 = *(_DWORD *)(v4 + 3680), BYTE1(v12) & 1) && (v13 = sub_40A8A0(), v13) )
        {
          v11 = sub_40AA70(v4) == 0;
LABEL_44:
          if ( v11 )
          {
LABEL_45:
            sub_4E60E0(v4);
            *(_DWORD *)(v9 + 16) = 0;
            goto LABEL_72;
          }
        }
        if ( *(_DWORD *)&byte_5D4594[2650636] & 0x40000 && v1 == *(_DWORD *)&byte_5D4594[3843628] )
          goto LABEL_52;
        if ( !sub_4DDF30(v1) )
        {
          sub_4DF3C0(v4);
          sub_4E6AA0(v4);
          sub_4E6040(v1);
          if ( !sub_40A5C0(4096) )
          {
            sub_4F7AB0(&v22, *(_DWORD *)(v4 + 2056));
            sub_4E7010(*(_DWORD *)(v4 + 2056), &v22);
          }
LABEL_52:
          *(_DWORD *)(v9 + 16) = 0;
          goto LABEL_72;
        }
        sub_4DDEF0(v1);
        *(_DWORD *)(v9 + 16) = 0;
LABEL_72:
        result = sub_51ABC0(*(unsigned __int8 *)(v4 + 2064));
        v9 = (int)result;
        if ( !result )
          goto LABEL_73;
      }
      if ( !*(_DWORD *)(v18[69] + 4792) )
      {
        if ( v18[138] == 1 )
        {
          sub_4DA2C0(a1, (const char *)&byte_587000[202432], 0);
        }
        else
        {
          *(_DWORD *)(v18[69] + 4792) = sub_4E4100();
          if ( *(_DWORD *)(v18[69] + 4792) == 1 )
            sub_4D79C0(a1);
          else
            sub_4DA2C0(a1, (const char *)&byte_587000[202452], 0);
        }
        v1 = a1;
      }
      if ( v18[79] )
      {
        sub_4D7480(v1);
        goto LABEL_72;
      }
      if ( v18[78] )
        goto LABEL_45;
      v11 = *(_DWORD *)(v18[69] + 4792) == 0;
      goto LABEL_44;
    }
LABEL_73:
    *(_DWORD *)(v4 + 3692) = *(_DWORD *)(v4 + 3688);
  }
  return result;
}
// 4E65F4: variable 'v13' is possibly undefined

//----- (004E6800) --------------------------------------------------------
void __cdecl sub_4E6800(float *a1, int a2)
{
  int v2; // eax
  double v3; // st7
  double v4; // st6
  double v5; // st5

  if ( (_BYTE)a1[2] & 2 )
  {
    v2 = *((_DWORD *)a1 + 127);
    if ( v2 )
    {
      if ( v2 == *(_DWORD *)&byte_5D4594[1565604] )
      {
        v3 = a1[14] - *(float *)a2;
        v4 = a1[15] - *(float *)(a2 + 4);
        v5 = v4 * v4 + v3 * v3;
        if ( v5 < *(float *)&byte_5D4594[1565608] )
        {
          *(_DWORD *)&byte_5D4594[1565612] = a1;
          *(float *)&byte_5D4594[1565608] = v5;
        }
      }
    }
  }
}

//----- (004E6860) --------------------------------------------------------
int __cdecl sub_4E6860(int a1, int a2, int a3)
{
  int v3; // edi
  int v4; // eax
  int v5; // ebp
  int i; // esi
  int v8; // eax
  unsigned int v9; // edx
  int v10; // eax
  int v11; // ecx
  int v12; // ecx
  int v13; // [esp+Ch] [ebp+4h]

  v3 = a1;
  if ( a1 )
  {
    v4 = *(_DWORD *)(a1 + 2056);
    if ( v4 )
    {
      v5 = *(_DWORD *)(a1 + 2056);
      v13 = *(_DWORD *)(v4 + 748);
      if ( !a3 && sub_4FC2B0(v5) == 1 )
        return 0;
      if ( *(int (__cdecl **)(_DWORD *))(v5 + 744) == sub_4FAB20 )
        return 0;
      if ( sub_40A5C0(112) )
      {
        if ( !*(_DWORD *)&byte_5D4594[1565620] )
          *(_DWORD *)&byte_5D4594[1565620] = sub_4E3AA0((CHAR *)&byte_587000[202480]);
        if ( !*(_DWORD *)&byte_5D4594[1565616] )
          *(_DWORD *)&byte_5D4594[1565616] = sub_4E3AA0((CHAR *)&byte_587000[202488]);
        for ( i = *(_DWORD *)(*(_DWORD *)(v3 + 2056) + 516); i; i = *(_DWORD *)(i + 512) )
        {
          v8 = *(unsigned __int16 *)(i + 4);
          if ( (unsigned __int16)v8 == *(_DWORD *)&byte_5D4594[1565620] )
          {
            sub_4ED5E0(*(_DWORD *)(v3 + 2056), i, (int *)(*(_DWORD *)(v3 + 2056) + 56));
          }
          else if ( v8 == *(_DWORD *)&byte_5D4594[1565616] )
          {
            v9 = *(_DWORD *)(i + 16) & 0xFFFFFFBF;
            *(_DWORD *)(i + 520) = 0;
            *(_DWORD *)(i + 16) = v9;
            sub_4EC300(i);
            sub_4E8290(1, 0);
          }
          else if ( *(_DWORD *)(i + 8) & 0x10000000 )
          {
            sub_4ED790(*(_DWORD *)(v3 + 2056), (_DWORD *)i, (float2 *)(*(_DWORD *)(v3 + 2056) + 56));
          }
        }
      }
      if ( sub_4DDF30(*(_DWORD *)(v3 + 2056)) )
        sub_4DDEF0(*(_DWORD *)(v3 + 2056));
      sub_4174F0(v3, 1);
      v10 = sub_40A8A0();
      if ( !v10 && !sub_40A5C0(4096) )
      {
        sub_40A1F0(0);
        sub_416E50(1);
        sub_417D00();
        sub_40A970();
      }
      sub_4DA0F0(*(unsigned __int8 *)(v3 + 2064), 12, (int *)&a2);
      sub_4FF380(v5, 0, 0, 5);
      v12 = *(_DWORD *)(v5 + 56);
      *(_DWORD *)(v5 + 16) |= 0x40u;
      *(_DWORD *)(v3 + 3632) = v12;
      *(_DWORD *)(v3 + 3636) = *(_DWORD *)(v5 + 60);
      sub_4E6040(v5);
      if ( sub_40A5C0(2048) )
      {
        *(_DWORD *)(v3 + 3672) = 1;
        *(_DWORD *)(v3 + 3628) = 0;
      }
      else if ( sub_40A5C0(64) )
      {
        if ( !a3 )
          sub_4E60E0(v3);
      }
      sub_4E5AD0(v5);
      *(_BYTE *)(v13 + 244) = 0;
      *(_DWORD *)(v5 + 744) = sub_4E62F0;
      sub_4D7E50(v5);
    }
  }
  return 1;
}
// 4E69B8: variable 'v10' is possibly undefined
// 4E69DB: variable 'v11' is possibly undefined

//----- (004E6AA0) --------------------------------------------------------
void __cdecl sub_4E6AA0(int a1)
{
  int v1; // esi
  int v2; // edx
  int v3; // eax
  _DWORD *i; // esi

  if ( a1 )
  {
    v1 = *(_DWORD *)(a1 + 2056);
    if ( v1 )
    {
      if ( *(int (__cdecl **)(_DWORD *))(v1 + 744) != sub_4FAB20 )
      {
        sub_417530(a1, 289);
        sub_4FF5B0(v1, 0);
        v2 = *(_DWORD *)(v1 + 16);
        *(_DWORD *)(v1 + 744) = sub_4F8100;
        *(_DWORD *)(v1 + 16) = v2 & 0xFFFFFFBF;
        sub_4E8020(*(_DWORD *)(a1 + 2056));
        if ( sub_40A5C0(16) )
        {
          if ( sub_417DA0(4) )
          {
            v3 = *((_DWORD *)sub_418AB0(*(unsigned __int8 *)(*(_DWORD *)(a1 + 2056) + 52)) + 19);
            if ( v3 )
            {
              if ( !*(_DWORD *)(v3 + 492) )
                sub_4F3400(*(_DWORD *)(a1 + 2056), v3, 1);
            }
          }
        }
        if ( sub_40A5C0(49152) && !sub_509D80(a1) )
          sub_509C30(a1);
        if ( sub_40A5C0(4096) )
        {
          for ( i = (_DWORD *)sub_4DA7C0(); i; i = (_DWORD *)sub_4DA7F0((int)i) )
          {
            if ( *(_DWORD *)(*(_DWORD *)(i[187] + 276) + 4792) == 1 )
              sub_4D8F90(*(unsigned __int8 *)(a1 + 2064), i);
          }
        }
      }
    }
  }
}

//----- (004E6BD0) --------------------------------------------------------
BOOL __cdecl sub_4E6BD0(int a1)
{
  return *(_DWORD *)(a1 + 556) && (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(a1 + 536)) <= 1;
}

//----- (004E6C00) --------------------------------------------------------
long double __cdecl sub_4E6C00(int a1, int a2)
{
  double v2; // st7
  double v3; // st6
  int v4; // edx
  long double v5; // st5
  long double result; // st7
  double v7; // st6
  int v8; // eax
  double v9; // st6
  float v10; // [esp+4h] [ebp+4h]
  float v11; // [esp+4h] [ebp+4h]

  v2 = *(float *)(a1 + 56) - *(float *)(a2 + 56);
  v3 = *(float *)(a1 + 60) - *(float *)(a2 + 60);
  v4 = *(_DWORD *)(a1 + 172);
  v5 = sqrt(v3 * v3 + v2 * v2);
  result = v5;
  if ( v4 == 2 )
  {
    result = v5 - *(float *)(a1 + 176);
  }
  else if ( v4 == 3 )
  {
    v7 = *(float *)(a1 + 184) * 0.5;
    v10 = *(float *)(a1 + 188) * 0.5;
    if ( v7 <= v10 )
      v7 = v10;
    result = v5 - v7;
  }
  v8 = *(_DWORD *)(a2 + 172);
  if ( v8 == 2 )
  {
    result = result - *(float *)(a2 + 176);
  }
  else if ( v8 == 3 )
  {
    v9 = *(float *)(a2 + 184) * 0.5;
    v11 = *(float *)(a2 + 188) * 0.5;
    if ( v9 <= v11 )
      v9 = v11;
    result = result - v9;
  }
  if ( result < 0.0099999998 )
    result = 0.0099999998;
  return result;
}

//----- (004E6CE0) --------------------------------------------------------
int __cdecl sub_4E6CE0(float2 *a1, float2 *a2)
{
  double v2; // st7
  int v3; // ecx
  int v4; // eax
  int v5; // ecx
  int v6; // eax
  int result; // eax

  *(float *)&byte_5D4594[1565628] = a2->field_0 - a1->field_0;
  *(float *)&byte_5D4594[1565632] = a2->field_4 - a1->field_4;
  *(float *)&byte_5D4594[1565652] = *(float *)&byte_5D4594[1565628] * 0.41304299 - *(float *)&byte_5D4594[1565632];
  v2 = *(float *)&byte_5D4594[1565628] * 2.4210529 - *(float *)&byte_5D4594[1565632];
  *(float *)&byte_5D4594[1565656] = v2;
  *(float *)&byte_5D4594[1565636] = *(float *)&byte_5D4594[1565628] * -2.4210529 - *(float *)&byte_5D4594[1565632];
  *(float *)&byte_5D4594[1567708] = *(float *)&byte_5D4594[1565628] * -0.41304299 - *(float *)&byte_5D4594[1565632];
  if ( *(float *)&byte_5D4594[1565652] < 0.0 )
    v3 = 0;
  else
    v3 = 8;
  if ( v2 < 0.0 )
    v4 = 0;
  else
    v4 = 4;
  v5 = v4 | v3;
  if ( *(float *)&byte_5D4594[1565636] < 0.0 )
    v6 = 0;
  else
    v6 = 2;
  *(_DWORD *)&byte_5D4594[1565640] = (*(float *)&byte_5D4594[1567708] >= 0.0) | v6 | v5;
  switch ( *(_DWORD *)&byte_5D4594[1565640] )
  {
    case 0:
      result = 2;
      break;
    case 2:
      result = 6;
      break;
    case 3:
      result = 4;
      break;
    case 4:
      result = 10;
      break;
    case 0xB:
      result = 5;
      break;
    case 0xC:
      result = 8;
      break;
    case 0xD:
      result = 9;
      break;
    case 0xF:
      result = 1;
      break;
    default:
      result = 0;
      break;
  }
  return result;
}

//----- (004E6E50) --------------------------------------------------------
int __cdecl sub_4E6E50(float2 *a1, int a2, float2 *a3)
{
  int v3; // esi
  int v5[2]; // [esp+4h] [ebp-8h]

  sub_509E20(a2, (int2 *)v5);
  v3 = v5[1] + v5[0] + 2 * v5[1] + 4;
  return *(_DWORD *)&byte_587000[4 * (sub_4E6CE0(a1, a3) + 16 * v3) + 202504];
}

//----- (004E6EA0) --------------------------------------------------------
int __cdecl sub_4E6EA0(int a1, float a2, int a3)
{
  int result; // eax

  result = a3;
  if ( a3 )
  {
    *(_DWORD *)&byte_5D4594[1565648] = 0;
    *(float *)&byte_5D4594[1565644] = a2 * a2;
    *(_DWORD *)(a3 + 36) = a1;
    sub_517F90((float2 *)(a1 + 56), a2, sub_4E6EF0, a3);
    result = *(_DWORD *)&byte_5D4594[1565648];
  }
  return result;
}

//----- (004E6EF0) --------------------------------------------------------
void __cdecl sub_4E6EF0(int a1, _DWORD *a2)
{
  int v2; // eax
  int v3; // ecx
  int v4; // eax
  int v5; // eax
  int v6; // esi
  double v7; // st7
  double v8; // st6
  double v9; // st5

  if ( !(*(_BYTE *)(a1 + 16) & 0x20)
    && !sub_4EC520(a1, a2[9])
    && (!(*(_BYTE *)(a1 + 8) & 4) || !(*(_BYTE *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 3680) & 1))
    && (!a2[2] || sub_5330C0(a2[9], a1)) )
  {
    if ( sub_4E6E50((float2 *)(a2[9] + 56), *(__int16 *)(a2[9] + 124), (float2 *)(a1 + 56)) & *a2 )
    {
      v2 = a2[9];
      if ( a1 != v2 && (!a2[1] || sub_5370E0(v2, a1, 0)) )
      {
        v3 = *(_DWORD *)(a1 + 8);
        if ( a2[3] & v3 )
        {
          v4 = *(_DWORD *)(a1 + 16);
          if ( a2[7] & v4 )
          {
            if ( !(v3 & a2[4]) && !(v4 & a2[8]) )
            {
              v5 = *(_DWORD *)(a1 + 12);
              if ( !v5 || v5 & a2[5] && !(v5 & a2[6]) )
              {
                v6 = a2[9];
                v7 = *(float *)(a1 + 56) - *(float *)(v6 + 56);
                v8 = *(float *)(a1 + 60) - *(float *)(v6 + 60);
                v9 = v8 * v8 + v7 * v7;
                if ( v9 < *(float *)&byte_5D4594[1565644] )
                {
                  *(float *)&byte_5D4594[1565644] = v9;
                  *(_DWORD *)&byte_5D4594[1565648] = a1;
                }
              }
            }
          }
        }
      }
    }
  }
}

//----- (004E7010) --------------------------------------------------------
void __cdecl sub_4E7010(int a1, float2 *a2)
{
  int v2; // edi
  int v3; // ecx
  int v4; // eax
  char v5[5]; // [esp+4h] [ebp-8h]

  if ( a1 && !(*(_DWORD *)(a1 + 8) & 0x400000) )
  {
    if ( (__int64)*(float *)(a1 + 56) != (__int64)a2->field_0 || (__int64)*(float *)(a1 + 60) != (__int64)a2->field_4 )
      sub_4E44F0(a1);
    *(float2 *)(a1 + 64) = *a2;
    *(float2 *)(a1 + 56) = *a2;
    *(float2 *)(a1 + 72) = *a2;
    sub_517970(a1);
    if ( *(_DWORD *)(a1 + 696) )
      sub_537610(a1);
    if ( *(_BYTE *)(a1 + 8) & 6 )
      sub_537540(a1);
    if ( *(_BYTE *)(a1 + 8) & 2 )
      sub_5346D0(a1);
    sub_4FD090(a1);
    if ( *(_BYTE *)(a1 + 8) & 6 )
      sub_5281D0();
    if ( *(_BYTE *)(a1 + 8) & 4 && sub_40A5C0(0x2000) )
    {
      v2 = *(_DWORD *)(a1 + 748);
      v3 = *(_DWORD *)(v2 + 276);
      *(_DWORD *)(v2 + 272) = *(_DWORD *)&byte_5D4594[2598000];
      sub_4DE4D0(*(_BYTE *)(v3 + 2064));
      v5[0] = -22;
      *(_DWORD *)&v5[1] = *(_DWORD *)&byte_5D4594[2598000];
      sub_4E5390(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), (int)v5, 5, 0, 0);
    }
    if ( *(_BYTE *)(a1 + 8) & 4 )
    {
      v4 = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 276);
      if ( !*(_DWORD *)(v4 + 3628) && !(*(_BYTE *)(v4 + 3680) & 3) )
      {
        *(_DWORD *)(v4 + 3632) = *(_DWORD *)(a1 + 56);
        *(_DWORD *)(v4 + 3636) = *(_DWORD *)(a1 + 60);
      }
    }
  }
}

//----- (004E7190) --------------------------------------------------------
void __cdecl sub_4E7190(_BYTE *a1, float *a2)
{
  if ( !sub_4FF350((int)a1, 14)
    && !(a1[16] & 2)
    && (!sub_40A5C0(4096) || !(a1[8] & 2) || !(a1[12] & 8))
    && (sub_40A5C0(2048) || a1[8] & 6) )
  {
    sub_4E7010((int)a1, (float2 *)a2);
  }
}

//----- (004E71F0) --------------------------------------------------------
void __cdecl sub_4E71F0(int a1)
{
  int *v1; // esi
  int v2; // eax
  int v3; // ecx
  int v4[3]; // [esp+8h] [ebp-34h]
  int v5[10]; // [esp+14h] [ebp-28h]

  v5[5] = -1;
  v5[7] = -1;
  v1 = *(int **)(a1 + 748);
  v5[0] = 15;
  v5[1] = 1;
  v5[2] = 0;
  v5[3] = 6;
  v5[4] = 0;
  v5[6] = 0;
  v5[8] = 32800;
  v2 = sub_4E6EA0(a1, 50.0, (int)v5);
  if ( v2 )
  {
    v3 = v1[4];
    v4[0] = v2;
    sub_4FD400(v1[3], v1[2], (_DWORD *)*v1, *v1, v4, v3);
  }
  sub_4E5CC0(a1);
}

//----- (004E7290) --------------------------------------------------------
int __cdecl sub_4E7290(int a1)
{
  int result; // eax
  int v2; // ecx
  int v3; // edx
  int v4; // ecx

  result = a1;
  switch ( *(_DWORD *)(a1 + 172) )
  {
    case 1:
      v2 = *(_DWORD *)(a1 + 56);
      *(_DWORD *)(a1 + 232) = v2;
      v3 = v2;
      v4 = *(_DWORD *)(a1 + 60);
      *(_DWORD *)(a1 + 240) = v3;
      *(_DWORD *)(a1 + 236) = v4;
      *(_DWORD *)(a1 + 244) = v4;
      break;
    case 2:
      *(float *)(a1 + 232) = *(float *)(a1 + 56) - *(float *)(a1 + 176);
      *(float *)(a1 + 236) = *(float *)(a1 + 60) - *(float *)(a1 + 176);
      *(float *)(a1 + 240) = *(float *)(a1 + 176) + *(float *)(a1 + 56);
      *(float *)(a1 + 244) = *(float *)(a1 + 176) + *(float *)(a1 + 60);
      break;
    case 3:
      *(float *)(a1 + 232) = *(float *)(a1 + 200) + *(float *)(a1 + 56);
      *(float *)(a1 + 236) = *(float *)(a1 + 196) + *(float *)(a1 + 60);
      *(float *)(a1 + 240) = *(float *)(a1 + 208) + *(float *)(a1 + 56);
      *(float *)(a1 + 244) = *(float *)(a1 + 220) + *(float *)(a1 + 60);
      break;
  }
  return result;
}

//----- (004E7350) --------------------------------------------------------
int __cdecl sub_4E7350(int a1)
{
  int result; // eax
  int v2; // ecx
  int v3; // edx
  int v4; // ecx

  result = a1;
  switch ( *(_DWORD *)(a1 + 172) )
  {
    case 1:
      v2 = *(_DWORD *)(a1 + 64);
      *(_DWORD *)(a1 + 232) = v2;
      v3 = v2;
      v4 = *(_DWORD *)(a1 + 68);
      *(_DWORD *)(a1 + 240) = v3;
      *(_DWORD *)(a1 + 236) = v4;
      *(_DWORD *)(a1 + 244) = v4;
      break;
    case 2:
      *(float *)(a1 + 232) = *(float *)(a1 + 64) - *(float *)(a1 + 176);
      *(float *)(a1 + 236) = *(float *)(a1 + 68) - *(float *)(a1 + 176);
      *(float *)(a1 + 240) = *(float *)(a1 + 176) + *(float *)(a1 + 64);
      *(float *)(a1 + 244) = *(float *)(a1 + 176) + *(float *)(a1 + 68);
      break;
    case 3:
      *(float *)(a1 + 232) = *(float *)(a1 + 200) + *(float *)(a1 + 64);
      *(float *)(a1 + 236) = *(float *)(a1 + 196) + *(float *)(a1 + 68);
      *(float *)(a1 + 240) = *(float *)(a1 + 208) + *(float *)(a1 + 64);
      *(float *)(a1 + 244) = *(float *)(a1 + 220) + *(float *)(a1 + 68);
      break;
  }
  return result;
}

//----- (004E7410) --------------------------------------------------------
BOOL __cdecl sub_4E7410(int a1)
{
  if ( *(_BYTE *)(a1 + 16) & 0x40 )
    return 1;
  sub_4E7290(a1);
  return *(float *)(a1 + 240) - *(float *)(a1 + 232) < 85.0 && *(float *)(a1 + 244) - *(float *)(a1 + 236) < 85.0;
}

//----- (004E7470) --------------------------------------------------------
char *__cdecl sub_4E7470(int a1, int a2)
{
  const char *v2; // eax
  unsigned __int8 *v3; // edi
  int v4; // eax
  int v5; // edx
  unsigned __int8 *v6; // esi
  unsigned __int8 *v7; // ecx
  int v8; // ebx
  char *result; // eax
  int v10; // edi
  int i; // ebx
  _DWORD *v12; // esi
  float2 a3; // [esp+Ch] [ebp-8h]

  v2 = (const char *)sub_4E39D0(a1);
  v3 = &byte_587000[203080];
  if ( strncmp(v2, (const char *)&byte_587000[203724], 6u) )
    v3 = &byte_587000[203240];
  v4 = sub_415FA0(0, 99);
  v5 = 0;
  if ( *(_DWORD *)v3 )
  {
    v6 = v3;
    v7 = v3;
    do
    {
      if ( *((_DWORD *)v6 + 2) > v4 )
        break;
      v8 = *((_DWORD *)v7 + 3);
      v7 += 12;
      ++v5;
      v6 = v7;
    }
    while ( v8 );
  }
  result = *(char **)&v3[12 * v5];
  v10 = (int)&v3[12 * v5];
  if ( result )
  {
    result = *(char **)(v10 + 4);
    for ( i = 0; i < (int)result; ++i )
    {
      v12 = sub_4E3810(*(CHAR **)v10);
      if ( v12 )
      {
        sub_4ED970(35.0, (float2 *)a2, &a3);
        sub_4DAA50((int)v12, 0, a3.field_0, a3.field_4);
      }
      result = *(char **)(v10 + 4);
    }
  }
  return result;
}

//----- (004E7540) --------------------------------------------------------
void __cdecl sub_4E7540(int a1, int a2)
{
  int v3; // eax

  if ( a1 )
  {
    if ( a2 )
    {
      if ( *(_BYTE *)(a1 + 8) & 4 && *(_BYTE *)(a2 + 8) & 4 && a1 != a2 )
      {
        v3 = *(_DWORD *)(a2 + 748);
        *(_DWORD *)(*(_DWORD *)(v3 + 276) + 3604) = *(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 2064);
        *(_DWORD *)(*(_DWORD *)(v3 + 276) + 3608) = *(_DWORD *)&byte_5D4594[2598000];
        *(_DWORD *)(*(_DWORD *)(v3 + 276) + 3600) = 1;
      }
    }
  }
}

//----- (004E75B0) --------------------------------------------------------
char __cdecl sub_4E75B0(int a1)
{
  int v1; // eax
  int v2; // eax

  if ( !(*(_DWORD *)(a1 + 16) & 0x1000000) )
  {
    v1 = *(_DWORD *)(a1 + 8);
    if ( v1 & 0x4000 )
      sub_501960(235, a1, 0, 0);
  }
  sub_4E4670(a1, 1);
  v2 = *(_DWORD *)(a1 + 8);
  if ( v2 & 0x10042000 )
    *(_DWORD *)(a1 + 16) &= 0xFFFFFFBF;
  if ( !(v2 & 1) )
    LOBYTE(v2) = sub_537610(a1);
  return v2;
}

//----- (004E7600) --------------------------------------------------------
int __cdecl sub_4E7600(int a1)
{
  int v1; // eax
  int result; // eax

  if ( *(_DWORD *)(a1 + 16) & 0x1000000 )
  {
    v1 = *(_DWORD *)(a1 + 8);
    if ( v1 & 0x4000 )
      sub_501960(236, a1, 0, 0);
  }
  sub_4E4670(a1, 0);
  result = *(_DWORD *)(a1 + 8);
  if ( result & 0x10042000 )
  {
    result = *(_DWORD *)(a1 + 16);
    LOBYTE(result) = result | 0x40;
    *(_DWORD *)(a1 + 16) = result;
  }
  return result;
}

//----- (004E7650) --------------------------------------------------------
char __cdecl sub_4E7650(int a1)
{
  char result; // al

  if ( (*(_DWORD *)(a1 + 16) & 0x1000000) == 0x1000000 )
    result = sub_4E7600(a1);
  else
    result = sub_4E75B0(a1);
  return result;
}

//----- (004E7680) --------------------------------------------------------
int __cdecl sub_4E7680(int a1)
{
  int result; // eax

  for ( result = a1; *(_WORD *)(a1 + 124) < 0; *(_WORD *)(a1 + 124) += 256 )
    ;
  for ( ; *(_WORD *)(a1 + 124) >= 256; *(_WORD *)(a1 + 124) -= 256 )
    ;
  return result;
}

//----- (004E76C0) --------------------------------------------------------
int sub_4E76C0()
{
  int v0; // edi
  int result; // eax
  int i; // esi

  v0 = 0;
  result = sub_4DA790();
  for ( i = result; result; i = result )
  {
    nullsub_25(i);
    v0 ^= sub_4E7700(i);
    result = sub_4DA7A0(i);
  }
  return result;
}
// 4E76F0: using guessed type void __cdecl nullsub_25(_DWORD);

//----- (004E7700) --------------------------------------------------------
int __cdecl sub_4E7700(int a1)
{
  unsigned __int16 *v1; // ecx
  int result; // eax

  v1 = *(unsigned __int16 **)(a1 + 556);
  result = *(_DWORD *)(a1 + 340) ^ *(_DWORD *)(a1 + 248) ^ *(_DWORD *)(a1 + 120) ^ *(_DWORD *)(a1 + 128) ^ *(_DWORD *)(a1 + 132) ^ *(_DWORD *)(a1 + 136) ^ *(_DWORD *)(a1 + 148) ^ *(_DWORD *)(a1 + 152) ^ *(__int16 *)(a1 + 124) ^ *(__int16 *)(a1 + 126) ^ *(_DWORD *)(a1 + 108) ^ *(_DWORD *)(a1 + 104) ^ *(_DWORD *)(a1 + 100) ^ *(_DWORD *)(a1 + 96) ^ *(_DWORD *)(a1 + 92) ^ *(_DWORD *)(a1 + 88) ^ *(_DWORD *)(a1 + 84) ^ *(_DWORD *)(a1 + 80) ^ *(_DWORD *)(a1 + 76) ^ *(_DWORD *)(a1 + 72) ^ *(_DWORD *)(a1 + 68) ^ *(_DWORD *)(a1 + 64) ^ *(_DWORD *)(a1 + 60) ^ *(_DWORD *)(a1 + 16) ^ *(_DWORD *)(a1 + 20) ^ *(_DWORD *)(a1 + 36) ^ *(_DWORD *)(a1 + 40) ^ *(_DWORD *)(a1 + 44) ^ *(_DWORD *)(a1 + 56) ^ *(unsigned __int16 *)(a1 + 4) ^ *(unsigned __int8 *)(a1 + 52);
  if ( v1 )
    result ^= *v1 ^ v1[1] ^ v1[2];
  return result;
}

//----- (004E77E0) --------------------------------------------------------
wchar_t *__cdecl sub_4E77E0(int a1)
{
  int v1; // eax
  _DWORD *v2; // edi
  _DWORD *v3; // eax
  _DWORD *v4; // ebx
  wchar_t *v5; // eax
  int v7; // eax
  const wchar_t *v8; // eax
  int v9; // eax
  int v10; // eax
  wchar_t *v11; // eax
  int v12; // [esp-4h] [ebp-10h]

  v1 = *(_DWORD *)(a1 + 8);
  if ( v1 & 0x13001000 )
  {
    v2 = *(_DWORD **)(a1 + 692);
    if ( v1 & 0x11001000 )
      v3 = sub_413250(*(unsigned __int16 *)(a1 + 4));
    else
      v3 = sub_413270(*(unsigned __int16 *)(a1 + 4));
    v4 = v3;
    if ( !v3 )
    {
      v12 = sub_4E39D0(a1);
      v5 = sub_40F1D0((char *)&byte_587000[203812], 0, (const char *)&byte_587000[203772], 983);
      nox_swprintf((wchar_t *)&byte_5D4594[1565660], v5, v12);
      return (wchar_t *)&byte_5D4594[1565660];
    }
    nox_wcscpy((wchar_t *)&byte_5D4594[1565660], (const wchar_t *)&byte_5D4594[1567732]);
    if ( *v2 && *(_DWORD *)(*v2 + 8) )
    {
      nox_wcscat((wchar_t *)&byte_5D4594[1565660], *(const wchar_t **)(*v2 + 8));
      nox_wcscat((wchar_t *)&byte_5D4594[1565660], (const wchar_t *)&byte_587000[203820]);
    }
    v7 = v2[1];
    if ( v7 )
    {
      v8 = *(const wchar_t **)(v7 + 8);
      if ( v8 )
      {
        nox_wcscat((wchar_t *)&byte_5D4594[1565660], v8);
        nox_wcscat((wchar_t *)&byte_5D4594[1565660], (const wchar_t *)&byte_587000[203824]);
      }
    }
    if ( v4[2] )
      nox_wcscat((wchar_t *)&byte_5D4594[1565660], (const wchar_t *)v4[2]);
    v9 = v2[2];
    if ( v9 && *(_DWORD *)(v9 + 8) )
    {
      nox_wcscat((wchar_t *)&byte_5D4594[1565660], (const wchar_t *)&byte_587000[203828]);
      nox_wcscat((wchar_t *)&byte_5D4594[1565660], *(const wchar_t **)(v2[2] + 8));
    }
    v10 = v2[3];
    if ( v10 && *(_DWORD *)(v10 + 12) )
    {
      nox_wcscat((wchar_t *)&byte_5D4594[1565660], (const wchar_t *)&byte_587000[203832]);
      nox_wcscat((wchar_t *)&byte_5D4594[1565660], *(const wchar_t **)(v2[3] + 12));
      return (wchar_t *)&byte_5D4594[1565660];
    }
  }
  else
  {
    v11 = sub_40F1D0((char *)&byte_587000[203876], 0, (const char *)&byte_587000[203836], 1032);
    nox_wcscpy((wchar_t *)&byte_5D4594[1565660], v11);
  }
  return (wchar_t *)&byte_5D4594[1565660];
}

//----- (004E7980) --------------------------------------------------------
int __cdecl sub_4E7980(int a1)
{
  return *(_DWORD *)(a1 + 504);
}

//----- (004E7990) --------------------------------------------------------
int __cdecl sub_4E7990(int a1)
{
  int result; // eax

  if ( a1 )
    result = *(_DWORD *)(a1 + 496);
  else
    result = 0;
  return result;
}

//----- (004E79B0) --------------------------------------------------------
int __cdecl sub_4E79B0(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)&byte_5D4594[1567712] = a1;
  return result;
}

//----- (004E79C0) --------------------------------------------------------
char __cdecl sub_4E79C0(int a1, int a2)
{
  int v2; // eax
  int i; // esi

  v2 = *(_DWORD *)(a1 + 16);
  if ( !(v2 & 2) )
  {
    LOBYTE(v2) = v2 | 2;
    *(_DWORD *)(a1 + 16) = v2;
    if ( *(_BYTE *)(a1 + 8) & 4 )
    {
      if ( !*(_DWORD *)&byte_5D4594[1567712] )
        *(_DWORD *)&byte_5D4594[1567712] = a2;
      sub_4D8270(a1);
      sub_4FA020((_DWORD *)a1, 13);
      sub_4E46F0(a1, 0.0);
      sub_50B510();
      for ( i = *(_DWORD *)(a1 + 516); i; i = *(_DWORD *)(i + 512) )
      {
        if ( *(_BYTE *)(i + 8) & 2 && (*(_BYTE *)(*(_DWORD *)(i + 748) + 1440) & 0x80) )
          sub_4E79C0(i, a2);
      }
    }
    LOBYTE(v2) = *(_BYTE *)(a1 + 8);
    if ( v2 & 2 )
    {
      v2 = *(_DWORD *)(a1 + 16);
      if ( (v2 & 0x8000) == 0 )
        LOBYTE(v2) = (unsigned int)sub_50A260(a1, 0);
    }
  }
  return v2;
}

//----- (004E7A60) --------------------------------------------------------
char __cdecl sub_4E7A60(int a1, int a2)
{
  int v2; // eax
  int i; // esi

  v2 = *(_DWORD *)(a1 + 16);
  if ( v2 & 2 )
  {
    if ( *(_BYTE *)(a1 + 8) & 4 )
    {
      LOBYTE(v2) = byte_5D4594[1567712];
      if ( *(_DWORD *)&byte_5D4594[1567712] && !a2 )
        return v2;
      *(_DWORD *)&byte_5D4594[1567712] = 0;
      *(_DWORD *)(a1 + 16) &= 0xFFFFFFFD;
      LOBYTE(v2) = sub_4D8270(a1);
      for ( i = *(_DWORD *)(a1 + 516); i; i = *(_DWORD *)(i + 512) )
      {
        if ( *(_BYTE *)(i + 8) & 2 )
        {
          v2 = *(_DWORD *)(i + 748);
          if ( *(_BYTE *)(v2 + 1440) & 0x80 )
            LOBYTE(v2) = sub_4E7A60(i, a2);
        }
      }
    }
    else
    {
      LOBYTE(v2) = v2 & 0xFD;
      *(_DWORD *)(a1 + 16) = v2;
    }
    if ( *(_BYTE *)(a1 + 8) & 2 )
    {
      v2 = *(_DWORD *)(a1 + 16);
      if ( (v2 & 0x8000) == 0 )
        LOBYTE(v2) = sub_50A160(a1);
    }
  }
  return v2;
}

//----- (004E7B00) --------------------------------------------------------
void __cdecl sub_4E7B00(int a1, int a2)
{
  int v2; // ecx
  int v3; // edi

  if ( a1 )
  {
    if ( a2 )
    {
      v2 = *(_DWORD *)(a2 + 12);
      v3 = *(_DWORD *)(a1 + 748);
      LOBYTE(v2) = v2 | 0x80;
      *(_DWORD *)(a2 + 12) = v2;
      sub_4D9250(*(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064), a2);
      sub_417190(*(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064), a2, 1);
      sub_4EC290(a1, a2);
    }
  }
}

//----- (004E7B60) --------------------------------------------------------
void __cdecl sub_4E7B60(int a1, _DWORD *a2)
{
  int v2; // edi
  int v3; // edx

  v2 = *(_DWORD *)(a1 + 748);
  if ( a1 )
  {
    if ( a2 )
    {
      v3 = a2[3];
      LOBYTE(v3) = v3 & 0x7F;
      a2[3] = v3;
      sub_4D92A0(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), a2);
      sub_417300(*(unsigned __int8 *)(*(_DWORD *)(v2 + 276) + 2064), (int)a2, 1);
      sub_4EC300((int)a2);
    }
  }
}

//----- (004E7BC0) --------------------------------------------------------
int __cdecl sub_4E7BC0(int a1)
{
  int result; // eax

  result = a1;
  if ( a1 )
    result = (*(_DWORD *)(a1 + 8) >> 2) & 1;
  return result;
}

//----- (004E7BE0) --------------------------------------------------------
int __cdecl sub_4E7BE0(int a1)
{
  int v1; // eax
  int v2; // ecx

  v1 = *(_DWORD *)&byte_5D4594[1567716];
  if ( !*(_DWORD *)&byte_5D4594[1567716] )
  {
    v1 = sub_4E3AA0((CHAR *)&byte_587000[203892]);
    *(_DWORD *)&byte_5D4594[1567716] = v1;
  }
  v2 = *(_DWORD *)(a1 + 516);
  if ( !v2 )
    return 0;
  while ( *(unsigned __int16 *)(v2 + 4) != v1 )
  {
    v2 = *(_DWORD *)(v2 + 512);
    if ( !v2 )
      return 0;
  }
  return 1;
}

//----- (004E7C30) --------------------------------------------------------
int __cdecl sub_4E7C30(int a1)
{
  int v1; // eax
  int v2; // ecx

  v1 = *(_DWORD *)&byte_5D4594[1567720];
  if ( !*(_DWORD *)&byte_5D4594[1567720] )
  {
    v1 = sub_4E3AA0((CHAR *)&byte_587000[203900]);
    *(_DWORD *)&byte_5D4594[1567720] = v1;
  }
  v2 = *(_DWORD *)(a1 + 516);
  if ( !v2 )
    return 0;
  while ( *(unsigned __int16 *)(v2 + 4) != v1 )
  {
    v2 = *(_DWORD *)(v2 + 512);
    if ( !v2 )
      return 0;
  }
  return 1;
}

//----- (004E7C80) --------------------------------------------------------
int __cdecl sub_4E7C80(int a1, int a2)
{
  int result; // eax
  int i; // ecx

  result = 0;
  if ( a1 )
  {
    for ( i = *(_DWORD *)(a1 + 516); i; i = *(_DWORD *)(i + 512) )
    {
      if ( *(unsigned __int16 *)(i + 4) == a2 && !(*(_BYTE *)(i + 16) & 0x20) )
        ++result;
    }
  }
  return result;
}

//----- (004E7CC0) --------------------------------------------------------
int __cdecl sub_4E7CC0(int a1, int a2)
{
  int result; // eax
  int i; // ecx

  result = 0;
  if ( !a1 || !a2 )
    return 0;
  for ( i = *(_DWORD *)(a1 + 516); i; i = *(_DWORD *)(i + 512) )
  {
    if ( a2 & *(_DWORD *)(i + 8) )
      ++result;
  }
  return result;
}

//----- (004E7CF0) --------------------------------------------------------
int __cdecl sub_4E7CF0(int a1, int a2, int a3)
{
  int result; // eax
  _DWORD *i; // ecx

  result = 0;
  if ( !a1 || !a2 || !a3 )
    return 0;
  for ( i = *(_DWORD **)(a1 + 516); i; i = (_DWORD *)i[128] )
  {
    if ( a2 & i[2] )
    {
      if ( a3 & i[3] )
        ++result;
    }
  }
  return result;
}

//----- (004E7D30) --------------------------------------------------------
int __cdecl sub_4E7D30(int a1, int a2)
{
  int result; // eax
  int i; // ecx

  result = 0;
  if ( a1 )
  {
    for ( i = *(_DWORD *)(a1 + 504); i; i = *(_DWORD *)(i + 496) )
    {
      if ( !a2 || *(unsigned __int16 *)(i + 4) == a2 && !(*(_BYTE *)(i + 16) & 0x20) )
        ++result;
    }
  }
  return result;
}

//----- (004E7D70) --------------------------------------------------------
int __cdecl sub_4E7D70(int a1, int a2)
{
  int result; // eax
  int i; // ecx

  result = 0;
  if ( !a1 || !a2 )
    return 0;
  for ( i = *(_DWORD *)(a1 + 504); i; i = *(_DWORD *)(i + 496) )
  {
    if ( a2 & *(_DWORD *)(i + 8) )
      ++result;
  }
  return result;
}

//----- (004E7DA0) --------------------------------------------------------
int __cdecl sub_4E7DA0(int a1, int a2, int a3)
{
  int result; // eax
  _DWORD *i; // ecx

  result = 0;
  if ( !a1 || !a2 || !a3 )
    return 0;
  for ( i = *(_DWORD **)(a1 + 504); i; i = (_DWORD *)i[124] )
  {
    if ( a2 & i[2] )
    {
      if ( a3 & i[3] )
        ++result;
    }
  }
  return result;
}

//----- (004E7DE0) --------------------------------------------------------
int __cdecl sub_4E7DE0(int a1, int a2)
{
  int v2; // ebx
  _DWORD *v3; // eax
  int v4; // ecx
  int v5; // edx
  int v6; // eax
  bool v7; // zf

  if ( !a1 || !a2 || *(_WORD *)(a1 + 4) != *(_WORD *)(a2 + 4) )
    return 0;
  v2 = *(_DWORD *)(a1 + 8);
  if ( v2 & 0x13001000 )
  {
    v3 = *(_DWORD **)(a1 + 692);
    v4 = 0;
    v5 = *(_DWORD *)(a2 + 692) - (_DWORD)v3;
    while ( *v3 == *(_DWORD *)((char *)v3 + v5) )
    {
      ++v4;
      ++v3;
      if ( v4 >= 4 )
        goto LABEL_8;
    }
    return 0;
  }
LABEL_8:
  if ( !(v2 & 0x100) )
    return 1;
  v6 = *(_DWORD *)(a1 + 12);
  if ( v6 & 1 )
  {
    v7 = **(_BYTE **)(a1 + 736) == **(_BYTE **)(a2 + 736);
  }
  else
  {
    if ( !(v6 & 2) )
    {
      if ( **(_BYTE **)(a1 + 736) != **(_BYTE **)(a2 + 736) )
        return 0;
      return 1;
    }
    v7 = strcmp(*(const char **)(a1 + 736), *(const char **)(a2 + 736)) == 0;
  }
  if ( !v7 )
    return 0;
  return 1;
}

//----- (004E7EC0) --------------------------------------------------------
int __cdecl sub_4E7EC0(int a1, int a2)
{
  int v2; // esi

  if ( !a1 )
    return 0;
  if ( !a2 )
    return 0;
  v2 = *(_DWORD *)(a1 + 504);
  if ( !v2 )
    return 0;
  while ( !sub_4E7DE0(v2, a2) )
  {
    v2 = *(_DWORD *)(v2 + 496);
    if ( !v2 )
      return 0;
  }
  return 1;
}

//----- (004E7F10) --------------------------------------------------------
char *__cdecl sub_4E7F10(int a1)
{
  char *result; // eax
  int i; // edi
  int v3; // eax
  int v4; // esi
  int v5; // eax

  *(_DWORD *)(a1 + 140) = 0;
  *(_DWORD *)(a1 + 144) = 0;
  result = sub_416EA0();
  for ( i = (int)result; result; i = (int)result )
  {
    v3 = *(_DWORD *)(i + 2056);
    v4 = 1 << *(_BYTE *)(i + 2064);
    if ( v3 )
    {
      if ( sub_4E7F90(v3, a1) == 1 )
      {
        v5 = v4 | *(_DWORD *)(a1 + 144);
        *(_DWORD *)(a1 + 140) |= v4;
        *(_DWORD *)(a1 + 144) = v5;
      }
    }
    result = sub_416EE0(i);
  }
  return result;
}

//----- (004E7F90) --------------------------------------------------------
int __cdecl sub_4E7F90(int a1, int a2)
{
  int v2; // ebx

  v2 = 0;
  if ( !*(_DWORD *)&byte_5D4594[1567724] )
    *(_DWORD *)&byte_5D4594[1567724] = sub_4E3AA0((CHAR *)&byte_587000[203912]);
  if ( !a1 || !a2 )
    return 0;
  if ( !sub_5330C0(a1, a2) )
    v2 = 1;
  if ( sub_40A5C0(4096)
    && *(unsigned __int16 *)(a2 + 4) == *(_DWORD *)&byte_5D4594[1567724]
    && *(_BYTE *)(a1 + 8) & 4
    && !*(_DWORD *)(a2 + 508) )
  {
    v2 = 0;
  }
  return v2;
}

//----- (004E8020) --------------------------------------------------------
char *__cdecl sub_4E8020(int a1)
{
  char *result; // eax
  int v2; // ebx
  int v3; // eax
  int v4; // edi
  int v5; // edi
  int v6; // eax
  bool v7; // zf
  int v8; // eax

  result = sub_416EA0();
  v2 = (int)result;
  if ( result )
  {
    while ( 1 )
    {
      v3 = *(_DWORD *)(v2 + 2056);
      v4 = 1 << *(_BYTE *)(v2 + 2064);
      if ( !v3 )
        break;
      v7 = sub_4E7F90(v3, a1) == 1;
      v8 = *(_DWORD *)(a1 + 144);
      if ( v7 )
      {
        if ( !(v8 & v4) )
        {
          *(_DWORD *)(a1 + 144) = v4 | v8;
          goto LABEL_9;
        }
      }
      else if ( v8 & v4 )
      {
        *(_DWORD *)(a1 + 144) = v8 & ~v4;
LABEL_9:
        v6 = v4 | *(_DWORD *)(a1 + 140);
LABEL_10:
        *(_DWORD *)(a1 + 140) = v6;
        goto LABEL_11;
      }
LABEL_11:
      result = sub_416EE0(v2);
      v2 = (int)result;
      if ( !result )
        return result;
    }
    v5 = ~v4;
    v6 = v5 & *(_DWORD *)(a1 + 140);
    *(_DWORD *)(a1 + 144) &= v5;
    goto LABEL_10;
  }
  return result;
}

//----- (004E80C0) --------------------------------------------------------
int __cdecl sub_4E80C0(char a1)
{
  int result; // eax
  int v2; // esi
  int v3; // edx

  result = sub_4DA790();
  if ( result )
  {
    v2 = ~(1 << a1);
    do
    {
      v3 = v2 & *(_DWORD *)(result + 140);
      *(_DWORD *)(result + 144) &= v2;
      *(_DWORD *)(result + 140) = v3;
      result = sub_4DA7A0(result);
    }
    while ( result );
  }
  return result;
}

//----- (004E8110) --------------------------------------------------------
char *__cdecl sub_4E8110(int a1)
{
  int v1; // edi
  char *result; // eax
  char *v3; // ebx
  char *v4; // esi
  int v5; // ebp
  char v6; // al
  int v7; // ecx
  int v8; // eax
  bool v9; // zf
  int v10; // eax
  int v11; // ecx

  v1 = 1 << a1;
  result = sub_417090(a1);
  v3 = result;
  if ( result )
  {
    result = (char *)sub_4DA790();
    v4 = result;
    if ( result )
    {
      v5 = ~v1;
      do
      {
        v6 = v4[8];
        v7 = v5 & *((_DWORD *)v4 + 35);
        *((_DWORD *)v4 + 36) &= v5;
        *((_DWORD *)v4 + 35) = v7;
        if ( !(v6 & 6) )
          goto LABEL_12;
        v8 = *((_DWORD *)v3 + 514);
        if ( !v8 )
          goto LABEL_12;
        v9 = sub_4E7F90(v8, (int)v4) == 1;
        v10 = *((_DWORD *)v4 + 36);
        if ( v9 )
        {
          if ( !(v10 & v1) )
          {
            v11 = v1 | v10;
LABEL_11:
            *((_DWORD *)v4 + 36) = v11;
            *((_DWORD *)v4 + 35) |= v1;
            goto LABEL_12;
          }
        }
        else if ( v10 & v1 )
        {
          v11 = v5 & *((_DWORD *)v4 + 36);
          goto LABEL_11;
        }
LABEL_12:
        result = (char *)sub_4DA7A0((int)v4);
        v4 = result;
      }
      while ( result );
    }
  }
  return result;
}

//----- (004E81D0) --------------------------------------------------------
int __cdecl sub_4E81D0(int a1)
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1567728];
  if ( !*(_DWORD *)&byte_5D4594[1567728] )
  {
    result = sub_4E3AA0((CHAR *)&byte_587000[203920]);
    *(_DWORD *)&byte_5D4594[1567728] = result;
  }
  if ( a1 )
  {
    if ( *(unsigned __int16 *)(a1 + 4) == result )
    {
      result = *(_DWORD *)(a1 + 748);
      *(_DWORD *)(result + 4) = 0;
    }
  }
  return result;
}

//----- (004E8210) --------------------------------------------------------
int __cdecl sub_4E8210(int a1, int a2)
{
  float2 *v2; // edi
  unsigned int v3; // esi
  int v4; // eax
  int v5; // ecx

  v2 = 0;
  v3 = 0;
  v4 = sub_4DA7C0();
  if ( !v4 )
    return 0;
  do
  {
    v5 = *(_DWORD *)(*(_DWORD *)(v4 + 748) + 308);
    if ( v5 )
    {
      if ( **(_DWORD **)(v5 + 700) > v3 )
      {
        v3 = **(_DWORD **)(v5 + 700);
        v2 = *(float2 **)(*(_DWORD *)(v4 + 748) + 308);
      }
    }
    v4 = sub_4DA7F0(v4);
  }
  while ( v4 );
  if ( !v2 )
    return 0;
  *(_DWORD *)(*(_DWORD *)(a1 + 748) + 308) = v2;
  sub_4ED970(60.0, v2 + 7, (float2 *)a2);
  return 1;
}

//----- (004E8290) --------------------------------------------------------
int __cdecl sub_4E8290(char a1, __int16 a2)
{
  byte_5D4594[1567736] = a1;
  *(_WORD *)&byte_5D4594[1567738] = a2;
  return sub_4D95F0(255, a1, a2);
}

//----- (004E82C0) --------------------------------------------------------
int __cdecl sub_4E82C0(unsigned __int8 a1, char a2, char a3, __int16 a4)
{
  int v4; // eax

  v4 = 6 * a1;
  byte_5D4594[v4 + 1567740] = a1;
  byte_5D4594[v4 + 1567741] = a3;
  byte_5D4594[v4 + 1567742] = a2;
  *(_WORD *)&byte_5D4594[v4 + 1567744] = a4;
  return sub_4D95A0(255, a1, a2, a3, a4);
}

//----- (004E8310) --------------------------------------------------------
char *sub_4E8310()
{
  return (char *)&byte_5D4594[1567736];
}

//----- (004E8320) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4E8320(unsigned __int8 a1)
{
  return &byte_5D4594[6 * a1 + 1567740];
}

//----- (004E8340) --------------------------------------------------------
void __cdecl sub_4E8340(float *a1, int a2)
{
  int v2; // eax

  if ( *((_BYTE *)a1 + 8) & 0x80 )
  {
    v2 = *((_DWORD *)a1 + 187);
    if ( *(_DWORD *)(v2 + 16) == *(_DWORD *)a2 && *(_DWORD *)(v2 + 20) == *(_DWORD *)(a2 + 4) )
    {
      *(_BYTE *)(v2 + 1) = 0;
      if ( sub_40A5C0(4096) )
        sub_4E8390((int)a1);
    }
  }
}

//----- (004E8390) --------------------------------------------------------
int __cdecl sub_4E8390(int a1)
{
  *(_BYTE *)(*(_DWORD *)(a1 + 748) + 48) = 1;
  return sub_4D6A20(255, a1);
}

//----- (004E83B0) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4E83B0(int a1, int a2)
{
  return sub_502490((int *)(*(_DWORD *)(a1 + 748) + 1272), a2, a1);
}

//----- (004E83D0) --------------------------------------------------------
unsigned __int8 *__cdecl sub_4E83D0(int a1, int a2)
{
  int v2; // eax
  int *v3; // eax
  int *v4; // eax

  if ( a2 )
  {
    v2 = *(_DWORD *)(a2 + 16);
    if ( (v2 & 0x8000) == 0 && *(_BYTE *)(a2 + 8) & 6 && sub_5330C0(a1, a2) && !sub_50A090(a1, 15) )
    {
      v3 = sub_50A260(a1, 43);
      if ( v3 )
        v3[1] = *(_DWORD *)&byte_5D4594[2598000];
      v4 = sub_50A260(a1, 15);
      if ( v4 )
      {
        v4[1] = *(_DWORD *)(a2 + 56);
        v4[2] = *(_DWORD *)(a2 + 60);
        v4[3] = *(_DWORD *)&byte_5D4594[2598000];
      }
    }
  }
  return sub_4E83B0(a1, a2);
}

//----- (004E8460) --------------------------------------------------------
void __cdecl sub_4E8460(int a1, int a2)
{
  int v2; // ecx
  _WORD *v3; // eax
  int v4; // ebx
  int v5; // eax
  __int16 v6; // ax
  int v7; // eax
  __int16 v8; // ax
  int v9; // eax
  int v10; // eax
  int v11; // eax
  char v12; // al
  float v13; // [esp+0h] [ebp-1Ch]
  float v14; // [esp+4h] [ebp-18h]
  int v15; // [esp+4h] [ebp-18h]
  float v16; // [esp+Ch] [ebp-10h]
  float v17; // [esp+Ch] [ebp-10h]
  float v18; // [esp+Ch] [ebp-10h]
  float v19; // [esp+10h] [ebp-Ch]

  if ( sub_4FC250(a1, 1) )
  {
    if ( !a2 )
      goto LABEL_14;
    v2 = *(_DWORD *)(a2 + 8);
    if ( !(v2 & 6) || (v3 = *(_WORD **)(a2 + 556), !*v3) && v3[2] )
    {
      if ( !(v2 & 0x400000) && (signed char)*(_BYTE *)(a2 + 16) >= 0 && *(float *)(a2 + 120) <= (double)*(float *)(a1 + 120) )
        goto LABEL_26;
    }
    if ( (v2 & 0x80u) == 0 )
    {
      if ( !(*(_BYTE *)(a2 + 16) & 9) && !(v2 & 1) )
      {
LABEL_14:
        sub_4FA020((_DWORD *)a1, 13);
        sub_4D9110((float *)(a1 + 56), 10);
        sub_4FC300((_DWORD *)a1, 1);
        if ( a2 )
        {
          v16 = sub_419D40(&byte_587000[203928]);
          v4 = sub_419A70(v16);
          if ( !(*(_DWORD *)(a2 + 8) & 0x400000) )
            sub_4E86E0(a1, (float *)a2);
          v5 = sub_4EC580(a1);
          (*(void (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v5, a1, v4, 2);
          if ( *(_DWORD *)(a2 + 8) & 0x20006 )
            goto LABEL_25;
          v17 = sub_419D40(&byte_587000[203944]);
          v6 = sub_419A70(v17);
          sub_4FF380(a1, 5, v6, 5);
        }
        else
        {
          v7 = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 296);
          if ( v7 && !(byte_5D4594[12332 * *(unsigned __int8 *)(v7 + 1) + 2692780] & 5) )
          {
LABEL_25:
            sub_4E7010(a1, (float2 *)(a1 + 72));
            goto LABEL_26;
          }
          sub_501960(171, a1, 0, 0);
          v18 = sub_419D40(&byte_587000[203968]);
          v8 = sub_419A70(v18);
          sub_4FF380(a1, 5, v8, 5);
          v14 = *(float *)(a1 + 68) * 0.043478262;
          v15 = sub_419A70(v14);
          v13 = *(float *)(a1 + 64) * 0.043478262;
          v9 = sub_419A70(v13);
          sub_534BC0(v9, v15, 100, 2, a1);
        }
        v19 = sub_419D40(&byte_587000[203992]) * (double)**(unsigned __int16 **)(a1 + 556);
        v10 = sub_419A70(v19);
        if ( v10 < 1 )
          v10 = 1;
        sub_4EE5E0(a1, v10);
        goto LABEL_25;
      }
    }
    else if ( *(_BYTE *)(*(_DWORD *)(a2 + 748) + 1) )
    {
      goto LABEL_14;
    }
  }
LABEL_26:
  if ( a2 )
  {
    if ( *(_BYTE *)(a2 + 8) & 4 )
    {
      v11 = *(_DWORD *)(a2 + 16);
      if ( (v11 & 0x8000) == 0 )
      {
        if ( sub_4FF350(a1, 16) )
        {
          if ( sub_4FF550(a1, 16) < (unsigned int)(14 * *(_DWORD *)&byte_5D4594[2649704]) )
          {
            v12 = sub_4FF570(a1, 16);
            sub_4FF380(a2, 16, 15 * *(_WORD *)&byte_5D4594[2649704], v12);
            sub_4FF5B0(a1, 16);
          }
        }
      }
    }
  }
}

//----- (004E86E0) --------------------------------------------------------
void __cdecl sub_4E86E0(int a1, float *a2)
{
  int v2; // ecx
  float *v3; // eax
  double v4; // st7
  double v5; // st6
  double v6; // st5
  double v7; // st4
  float v8; // [esp+0h] [ebp-8h]
  float v9; // [esp+4h] [ebp-4h]
  float v10; // [esp+Ch] [ebp+4h]
  float v11; // [esp+Ch] [ebp+4h]
  float v12; // [esp+10h] [ebp+8h]
  float v13; // [esp+10h] [ebp+8h]

  v2 = a1;
  if ( a1 )
  {
    v3 = a2;
    if ( a2 )
    {
      v12 = *(float *)(a1 + 120);
      v10 = v3[30];
      v8 = v10 + v12;
      v4 = (v12 - v10) / v8;
      v9 = (v10 + v10) / v8;
      v5 = *(float *)(v2 + 84) * v4 + v9 * v3[21];
      v6 = (v10 - v12) / v8;
      v7 = (v12 + v12) / v8;
      v11 = v6 * v3[20] + v7 * *(float *)(v2 + 80);
      v13 = v6 * v3[21] + v7 * *(float *)(v2 + 84);
      *(float *)(v2 + 80) = *(float *)(v2 + 80) * v4 + v9 * v3[20];
      *(float *)(v2 + 84) = v5;
      v3[21] = v13;
      v3[20] = v11;
    }
  }
}

//----- (004E87B0) --------------------------------------------------------
void __cdecl sub_4E87B0(int a1, int a2)
{
  int *v2; // edi
  int v3; // eax
  double v4; // st7
  int v5; // ebx
  int v6; // eax
  int *v7; // eax
  float v8; // [esp+0h] [ebp-10h]

  v2 = *(int **)(a1 + 700);
  if ( !*(_DWORD *)&byte_5D4594[1567948] )
  {
    *(_DWORD *)&byte_5D4594[1567948] = sub_4E3AA0((CHAR *)&byte_587000[204012]);
    *(_DWORD *)&byte_5D4594[1567952] = sub_4E3AA0((CHAR *)&byte_587000[204028]);
  }
  v3 = *(unsigned __int16 *)(a1 + 4);
  if ( (unsigned __int16)v3 == *(_DWORD *)&byte_5D4594[1567948] )
  {
    v4 = sub_419D40(&byte_587000[204036]);
LABEL_5:
    v8 = v4;
    v5 = sub_419A70(v8);
    goto LABEL_9;
  }
  if ( v3 == *(_DWORD *)&byte_5D4594[1567952] )
  {
    v4 = sub_419D40(&byte_587000[204056]);
    goto LABEL_5;
  }
  v5 = *v2;
LABEL_9:
  if ( a2 )
  {
    v6 = sub_4EC580(a1);
    if ( !(*(unsigned __int8 (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v6, a1, v5, 11) )
      return;
  }
  else
  {
    v7 = (int *)sub_537760();
    if ( v7 )
    {
      sub_534BC0(*v7, v7[1], v5, 11, a1);
      sub_4E5CC0(a1);
      return;
    }
  }
  sub_4E5CC0(a1);
}

//----- (004E8880) --------------------------------------------------------
void __cdecl sub_4E8880(int a1, int a2)
{
  int *v2; // eax
  int v3; // eax
  int v4; // eax
  float v5; // [esp+0h] [ebp-1Ch]
  float v6; // [esp+4h] [ebp-18h]
  int v7; // [esp+4h] [ebp-18h]
  int v8; // [esp+8h] [ebp-14h]
  int v9; // [esp+Ch] [ebp-10h]

  v2 = *(int **)(a1 + 700);
  if ( a2 )
  {
    v9 = *v2;
    v3 = sub_4EC580(a1);
    if ( (*(unsigned __int8 (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v3, a1, v9, 11) )
      sub_4E5CC0(a1);
  }
  else
  {
    v8 = *v2;
    v6 = *(float *)(a1 + 68) * 0.043478262;
    v7 = sub_419A70(v6);
    v5 = *(float *)(a1 + 64) * 0.043478262;
    v4 = sub_419A70(v5);
    sub_534BC0(v4, v7, v8, 11, a1);
    sub_4E5CC0(a1);
  }
}

//----- (004E8910) --------------------------------------------------------
int __cdecl sub_4E8910(int a1, int a2)
{
  int v2; // ebx
  int v4; // ebp
  const char *v5; // esi

  v2 = *(_DWORD *)(a2 + 748);
  if ( *(_BYTE *)(v2 + 1) == 5 )
    return 0;
  if ( *(_DWORD *)(a2 + 508) )
    return 0;
  v4 = *(_DWORD *)(a1 + 504);
  if ( v4 )
  {
    while ( !(*(_BYTE *)(v4 + 8) & 0x40) )
    {
LABEL_15:
      v4 = *(_DWORD *)(v4 + 496);
      if ( !v4 )
        goto LABEL_16;
    }
    v5 = (const char *)sub_4E39D0(v4);
    switch ( *(unsigned __int8 *)(v2 + 1) )
    {
      case 1u:
        if ( strcmp(v5, (const char *)&byte_587000[204072]) )
          goto LABEL_15;
        break;
      case 2u:
        if ( strcmp(v5, (const char *)&byte_587000[204084]) )
          goto LABEL_15;
        break;
      case 3u:
        if ( strcmp(v5, (const char *)&byte_587000[204092]) )
          goto LABEL_15;
        break;
      case 4u:
        if ( strcmp(v5, (const char *)&byte_587000[204100]) )
          goto LABEL_15;
        break;
      default:
        goto LABEL_15;
    }
  }
LABEL_16:
  if ( *(_BYTE *)(a1 + 8) & 4 && !v4 && sub_40A5C0(4096) && sub_4D72C0() == 1 && *(_BYTE *)(v2 + 1) == 1 )
    v4 = sub_4E8A10();
  return v4;
}

//----- (004E8A10) --------------------------------------------------------
int sub_4E8A10()
{
  int v0; // ebx
  int i; // esi
  int v2; // edi
  int v3; // eax
  int result; // eax

  v0 = 0;
  if ( !*(_DWORD *)&byte_5D4594[1567956] )
    *(_DWORD *)&byte_5D4594[1567956] = sub_4E3AA0((CHAR *)&byte_587000[204112]);
  for ( i = sub_4DA7C0(); i; i = sub_4DA7F0(i) )
  {
    v2 = 0;
    v3 = sub_4E7980(i);
    if ( v3 )
    {
      do
      {
        if ( *(unsigned __int16 *)(v3 + 4) == *(_DWORD *)&byte_5D4594[1567956] )
          ++v2;
        v3 = sub_4E7990(v3);
      }
      while ( v3 );
      if ( v2 > 0 )
        v0 = i;
    }
  }
  result = 0;
  if ( v0 )
  {
    for ( result = sub_4E7980(v0); result; result = sub_4E7990(result) )
    {
      if ( *(unsigned __int16 *)(result + 4) == *(_DWORD *)&byte_5D4594[1567956] )
        break;
    }
  }
  return result;
}

//----- (004E8AC0) --------------------------------------------------------
void __cdecl sub_4E8AC0(int a2, int a3)
{
  int v2; // edi
  int v3; // esi
  int v4; // eax
  unsigned __int64 v5; // rax
  char v6; // al
  unsigned __int64 v7; // rax
  int v8; // ebx
  int v9; // eax
  int v10; // ecx
  int v11; // esi
  double v12; // st7
  double v13; // st6
  int v14; // ecx
  int v15; // eax
  int v16; // eax
  unsigned __int64 v17; // rax
  int a3a[2]; // [esp+10h] [ebp-18h]
  float4 a1; // [esp+18h] [ebp-10h]
  float v20; // [esp+2Ch] [ebp+4h]

  v2 = a2;
  v3 = *(_DWORD *)(a2 + 748);
  if ( a3 && *(_DWORD *)(v3 + 12) == *(_DWORD *)(v3 + 4) )
  {
    v4 = *(_DWORD *)(a2 + 508);
    if ( v4 )
    {
      if ( *(_DWORD *)(a2 + 136) <= *(int *)&byte_5D4594[2598000] )
      {
        *(_DWORD *)(a2 + 508) = 0;
      }
      else if ( v4 != a3 )
      {
        v5 = sub_416BB0() - *(_QWORD *)&byte_5D4594[1567940];
        a3a[1] = HIDWORD(v5);
        if ( v5 <= 0x5DC )
          return;
        if ( *(_BYTE *)(a2 + 12) & 4 )
        {
          sub_501960(244, a2, 0, 0);
          sub_4DA2C0(a3, (const char *)&byte_587000[204124], 0);
        }
        else
        {
          sub_501960(240, a2, 0, 0);
          sub_4DA2C0(a3, (const char *)&byte_587000[204152], 0);
        }
LABEL_38:
        *(_QWORD *)&byte_5D4594[1567940] = sub_416BB0();
        return;
      }
    }
    v6 = *(_BYTE *)(v3 + 1);
    if ( !v6 )
      return;
    if ( v6 == 5 )
    {
      v7 = sub_416BB0() - *(_QWORD *)&byte_5D4594[1567940];
      a3a[1] = HIDWORD(v7);
      if ( v7 <= 0x5DC )
        return;
      if ( *(_BYTE *)(a2 + 12) & 4 )
      {
        sub_501960(244, a2, 0, 0);
        sub_4DA2C0(a3, (const char *)&byte_587000[204180], 0);
      }
      else
      {
        sub_501960(240, a2, 0, 0);
        sub_4DA2C0(a3, (const char *)&byte_587000[204212], 0);
      }
      goto LABEL_38;
    }
    v8 = sub_4E8910(a3, a2);
    if ( !v8 )
    {
      v17 = sub_416BB0() - *(_QWORD *)&byte_5D4594[1567940];
      a3a[1] = HIDWORD(v17);
      if ( v17 <= 0x5DC )
        return;
      if ( *(_BYTE *)(a2 + 12) & 4 )
      {
        sub_501960(244, a2, 0, 0);
        sub_4FADD0(a3, (const char *)&byte_587000[204268], *(_BYTE *)(v3 + 1));
      }
      else
      {
        sub_501960(240, a2, 0, 0);
        sub_4FADD0(a3, (const char *)&byte_587000[204292], *(_BYTE *)(v3 + 1));
      }
      goto LABEL_38;
    }
    v9 = *(_DWORD *)(v3 + 16);
    v10 = *(_DWORD *)(v3 + 20);
    *(_BYTE *)(v3 + 1) = 0;
    v11 = *(_DWORD *)(v3 + 4);
    v12 = (double)(23 * v9);
    a1.field_0 = v12 - 34.0;
    v13 = (double)(23 * v10);
    v20 = v13;
    a1.field_4 = v13 - 34.0;
    a1.field_8 = v12 + 34.0;
    a1.field_C = v20 + 34.0;
    switch ( v11 )
    {
      case 0:
        v14 = v10 - 1;
        a3a[0] = v9 - 1;
        goto LABEL_24;
      case 8:
        v14 = v10 - 1;
        a3a[0] = v9 + 1;
        goto LABEL_24;
      case 16:
        v15 = v9 + 1;
        goto LABEL_23;
      case 24:
        v15 = v9 - 1;
LABEL_23:
        a3a[0] = v15;
        v14 = v10 + 1;
LABEL_24:
        a3a[1] = v14;
        break;
      default:
        break;
    }
    if ( sub_40A5C0(4096) )
    {
      sub_4E8390(v2);
      sub_4D71E0(*(int *)&byte_5D4594[2598000]);
    }
    sub_517C10(&a1, sub_4E8340, (int)a3a);
    sub_501960(234, v2, 0, 0);
    v16 = *(_DWORD *)(v8 + 492);
    if ( v16 && a3 != v16 && *(_BYTE *)(v16 + 8) & 4 && sub_40A5C0(4096) && sub_4D72C0() == 1 )
      sub_4DA2C0(*(_DWORD *)(v8 + 492), (const char *)&byte_587000[204244], 0);
    sub_4E5CC0(v8);
  }
}

//----- (004E8DF0) --------------------------------------------------------
int __cdecl sub_4E8DF0(int a1, int a2)
{
  int result; // eax
  int v3; // ecx

  result = a2;
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( !(v3 & 2)
      && (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(a1 + 128)) >= *(int *)&byte_5D4594[2649704] >> 1
      && (!(v3 & 4) || *(_BYTE *)(*(_DWORD *)(a2 + 748) + 240) & 1) )
    {
      result = sub_4F36F0(a2, a1, 1, 1);
    }
  }
  return result;
}

//----- (004E8E50) --------------------------------------------------------
unsigned __int8 *sub_4E8E50()
{
  return &byte_5D4594[1567844];
}

//----- (004E8E60) --------------------------------------------------------
int sub_4E8E60()
{
  int v0; // esi
  int v1; // edi
  int v2; // ebx
  int v3; // eax
  int v4; // edx
  unsigned int v5; // eax
  int v6; // eax
  int v7; // ecx
  int result; // eax
  int v9; // eax
  int v10; // ecx
  float v11; // [esp+0h] [ebp-1Ch]
  float v12; // [esp+0h] [ebp-1Ch]
  int v13; // [esp+10h] [ebp-Ch]
  int v14; // [esp+18h] [ebp-4h]

  v11 = sub_419D40(&byte_587000[204316]);
  v0 = sub_419A70(v11);
  v1 = 0;
  v14 = v0;
  v2 = v0;
  v13 = 0;
  if ( sub_40A220() )
  {
    v3 = sub_40A230();
    v4 = (int)v3 / 1000;
    v5 = 0;
    v0 = v5 + v4;
    v14 = v5 + v4;
    v2 = v5 + v4;
  }
  v6 = sub_4DA7C0();
  if ( !v6 )
    return sub_40A1F0(0);
  do
  {
    v7 = *(_DWORD *)(v6 + 748);
    if ( *(_DWORD *)(*(_DWORD *)(v7 + 276) + 4792) == 1 )
    {
      ++v1;
      if ( *(_DWORD *)(v7 + 312) )
        ++v13;
    }
    v6 = sub_4DA7F0(v6);
  }
  while ( v6 );
  if ( !v1 )
    return sub_40A1F0(0);
  v12 = (double)v13 / (double)v1 * (double)v14;
  v9 = sub_419A70(v12);
  v10 = v0 - v9;
  if ( v0 - v9 < v0 && (v0 -= v9, v2 != v10) || (result = sub_40A300()) == 0 )
  {
    sub_40A2A0(v0, (const char *)&byte_587000[204336]);
    result = sub_4D9E70(255);
  }
  return result;
}

//----- (004E8F60) --------------------------------------------------------
BOOL sub_4E8F60()
{
  int v0; // ebp
  int v1; // eax
  int v2; // ebx
  int v3; // edi
  int v4; // esi
  int v5; // eax
  BOOL result; // eax
  unsigned int v7; // [esp+10h] [ebp-4h]

  v0 = 0;
  v1 = sub_4E3CC0();
  v7 = sub_4D74F0(v1);
  v2 = 1;
  v3 = sub_4DA7C0();
  if ( !v3 )
    goto LABEL_11;
  do
  {
    v4 = *(_DWORD *)(v3 + 748);
    if ( !sub_40A5C0(1)
      || !(*(_DWORD *)&byte_5D4594[2650636] & 0x40000)
      || *(_BYTE *)(*(_DWORD *)(v4 + 276) + 2064) != 31 )
    {
      v5 = *(_DWORD *)(v4 + 276);
      if ( *(_DWORD *)(v5 + 4792) )
      {
        ++v0;
        if ( !*(_DWORD *)(v4 + 316) )
          goto LABEL_11;
        if ( *(_DWORD *)(v5 + 4696) >= v7 )
          v2 = 0;
      }
    }
    v3 = sub_4DA7F0(v3);
  }
  while ( v3 );
  if ( v0 )
    result = v2 != 1;
  else
LABEL_11:
    result = 0;
  return result;
}

//----- (004E9010) --------------------------------------------------------
int sub_4E9010()
{
  int v0; // ebp
  int v1; // edi
  int v2; // esi

  v0 = 0;
  v1 = sub_4DA7C0();
  if ( v1 )
  {
    while ( 1 )
    {
      v2 = *(_DWORD *)(v1 + 748);
      if ( !sub_40A5C0(1)
        || !(*(_DWORD *)&byte_5D4594[2650636] & 0x40000)
        || *(_BYTE *)(*(_DWORD *)(v2 + 276) + 2064) != 31 )
      {
        if ( *(_DWORD *)(*(_DWORD *)(v2 + 276) + 4792) )
        {
          ++v0;
          if ( !*(_DWORD *)(v2 + 312) )
            break;
        }
      }
      v1 = sub_4DA7F0(v1);
      if ( !v1 )
      {
        if ( !v0 )
          return 0;
        return 1;
      }
    }
  }
  return 0;
}

//----- (004E9090) --------------------------------------------------------
char *__cdecl sub_4E9090(int a1, int a2, int a3)
{
  char *result; // eax
  int v4; // ebp
  int v5; // esi
  _BYTE *v6; // edi
  int i; // edi
  char v8; // al
  int v9; // ebx
  char *v10; // edi
  int v11; // edi
  int v12; // edi
  int v13; // eax
  unsigned int v14; // edi
  int v15; // eax
  int j; // esi
  int v17; // eax
  int v18; // eax
  const char *v19; // [esp+8h] [ebp+8h]

  result = *(char **)&byte_5D4594[1567960];
  if ( !*(_DWORD *)&byte_5D4594[1567960] )
  {
    result = (char *)sub_4E3AA0((CHAR *)&byte_587000[204360]);
    *(_DWORD *)&byte_5D4594[1567960] = result;
  }
  v4 = a2;
  if ( a2 )
  {
    if ( !(*(_BYTE *)(a2 + 8) & 4) )
    {
		nullsub_34(a1, a2, a3);
		return result;
	}
    v5 = *(_DWORD *)(a2 + 748);
    v6 = *(_BYTE **)(a1 + 700);
    v19 = *(const char **)(a1 + 700);
    if ( !sub_40A5C0(4096) || (result = *(char **)(v5 + 312)) == 0 && (result = *(char **)(v5 + 316)) == 0 )
    {
      if ( !(*(_BYTE *)(a1 + 12) & 2) || (result = (char *)sub_4D75E0()) != 0 )
      {
        result = (char *)sub_4DCC90();
        if ( result != (char *)1 )
        {
          result = (char *)sub_4DCC10(v4);
          if ( result )
          {
            result = (char *)sub_413A50();
            if ( result != (char *)1 )
            {
              if ( *v6 || (result = (char *)sub_40A5C0(4096)) != 0 )
              {
                if ( *(_BYTE *)(*(_DWORD *)(v5 + 276) + 2251) == 1 )
                {
                  for ( i = *(_DWORD *)(v4 + 516); i; i = *(_DWORD *)(i + 512) )
                  {
                    if ( *(unsigned __int16 *)(i + 4) == *(_DWORD *)&byte_5D4594[1567960] && !*(_DWORD *)(i + 492) )
                    {
                      sub_4E5CC0(i);
                      v8 = *(_BYTE *)(v5 + 244);
                      if ( v8 )
                        *(_BYTE *)(v5 + 244) = v8 - 1;
                    }
                  }
                }
                sub_4DCBF0(1);
                if ( sub_40A5C0(2048) )
                {
                  sub_4DB130((const char *)&byte_587000[204368]);
                  return (char *)sub_4DB170(1, a1, 0);
                }
                v9 = 1;
                if ( sub_40A5C0(4096) )
                {
                  v10 = sub_4D0F60();
                  v19 = v10;
                }
                else
                {
                  v10 = (char *)v19;
                }
                result = (char *)sub_40A5C0(4096);
                if ( !result )
                  goto LABEL_47;
                v11 = 1;
                do
                {
                  if ( sub_4FC250(v4, v11) )
                    sub_4FC300((_DWORD *)v4, v11);
                  ++v11;
                }
                while ( v11 < 6 );
                v12 = a1;
                v13 = *(_DWORD *)(a1 + 12);
                if ( v13 & 1 )
                {
                  v14 = sub_4E3CC0() + 1;
                  sub_4D60E0(v4);
                  v15 = *(_DWORD *)(v5 + 276);
                  if ( *(_DWORD *)(v15 + 4696) < v14 )
                  {
                    *(_DWORD *)(v15 + 4696) = v14;
                    sub_4D7450(
                      *(unsigned __int8 *)(*(_DWORD *)(v5 + 276) + 2064),
                      *(_DWORD *)(*(_DWORD *)(v5 + 276) + 4696));
                  }
                  *(_DWORD *)(v5 + 312) = a1;
                  *(_DWORD *)(v5 + 316) = 0;
                  sub_4FA020((_DWORD *)v4, 13);
                  sub_4E6860(*(_DWORD *)(v5 + 276), 0, 0);
                  sub_4DA180(18, (_BYTE *)(v4 + 36));
                  v12 = a1;
                  v9 = sub_4E9010();
                }
                else if ( v13 & 2 )
                {
                  *(_DWORD *)(v5 + 312) = 0;
                  *(_DWORD *)(v5 + 316) = a1;
                  sub_4D75F0(*(int *)&byte_5D4594[2598000]);
                  sub_4FA020((_DWORD *)v4, 13);
                  sub_4E6860(*(_DWORD *)(v5 + 276), 0, 0);
                  for ( j = sub_4DA7C0(); j; j = sub_4DA7F0(j) )
                  {
                    if ( j != v4 )
                      sub_4DA0F0(
                        *(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(j + 748) + 276) + 2064),
                        19,
                        (int *)(v4 + 36));
                  }
                  sub_4DA2C0(v4, (const char *)&byte_587000[204376], 0);
                  v9 = sub_4E8F60();
                }
                sub_501960(1003, v12, 0, 0);
                if ( !(*(_BYTE *)(v12 + 12) & 2) && !v9 )
                  sub_4E8E60();
                result = 0;
                strcpy((char *)&byte_5D4594[1567844], v19);
                if ( v9 == 1 )
                {
                  v10 = (char *)v19;
LABEL_47:
                  if ( v10 && *v10 )
                  {
                    if ( *(_BYTE *)(a1 + 12) & 2 )
                    {
                      v17 = sub_4E3CC0();
                      v18 = sub_4D74F0(v17);
                      sub_4E3CD0(v18 - 1);
                      sub_4D76E0(1);
                      sub_4D60B0();
                    }
                    result = sub_4D2450(v10);
                  }
                  return result;
                }
              }
            }
          }
        }
      }
    }
  }
  return result;
}
// 4E87A0: using guessed type void __cdecl nullsub_34(_DWORD, _DWORD, _DWORD);

//----- (004E9430) --------------------------------------------------------
void __cdecl sub_4E9430(int a1, int a2)
{
  unsigned __int8 *v2; // ecx
  int v3; // eax
  int v4; // eax
  int v5; // [esp-8h] [ebp-Ch]
  int v6; // [esp-4h] [ebp-8h]

  v2 = *(unsigned __int8 **)(a1 + 700);
  if ( a2 && *(_DWORD *)(a2 + 556) )
  {
    if ( *v2 == 1 && byte_5D4594[2598000] & 1 )
      v3 = 1;
    else
      v3 = *v2 >> 1;
    v6 = *((_DWORD *)v2 + 1);
    v5 = v3;
    v4 = sub_4EC580(a1);
    (*(void (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v4, a1, v5, v6);
  }
}

//----- (004E9490) --------------------------------------------------------
_DWORD *__cdecl sub_4E9490(int a1, int a2)
{
  _DWORD *result; // eax

  result = (_DWORD *)a2;
  if ( a2 && *(_BYTE *)(a2 + 8) & 4 && *(_WORD *)(*(_DWORD *)(a2 + 748) + 4) )
  {
    sub_4EEBF0(a2, **(unsigned __int8 **)(a1 + 700));
    result = (_DWORD *)(*(_DWORD *)&byte_5D4594[2598000] - *(__int16 *)(a1 + 542));
    if ( (unsigned int)result > *(int *)&byte_5D4594[2649704] >> 1 )
    {
      result = sub_501960(228, a1, 0, 0);
      *(_WORD *)(a1 + 542) = *(_WORD *)&byte_5D4594[2598000];
    }
  }
  return result;
}

//----- (004E9500) --------------------------------------------------------
void __cdecl sub_4E9500(int a1, int a2, float *a3)
{
  int v3; // esi
  float2 *v4; // edi
  int v5; // ebx
  int v6; // ebp
  int v7; // ecx
  int v8; // ebx
  int v9; // eax
  int v10; // [esp+10h] [ebp-10h]
  int v11[3]; // [esp+14h] [ebp-Ch]

  v3 = a2;
  v4 = (float2 *)a1;
  v5 = *(_DWORD *)(a1 + 748);
  v10 = *(_DWORD *)(a1 + 748);
  if ( a2 )
  {
    if ( *(_DWORD *)(a2 + 16) & 0x8020 )
      return;
    if ( !(*(_BYTE *)(a2 + 8) & 4) )
      goto LABEL_23;
    v6 = *(_DWORD *)(a2 + 748);
    if ( *(_BYTE *)(v6 + 88) == 16 && sub_4E6E50((float2 *)(a2 + 56), *(__int16 *)(a2 + 124), (float2 *)(a1 + 72)) & 1 )
    {
      sub_501960(878, v3, 0, 0);
      sub_4E0A70((int)v4, v3);
      sub_52BE40((int)v4, v3);
      return;
    }
    if ( *(_BYTE *)(v6 + 88) == 13 )
    {
      v7 = *(_DWORD *)(*(_DWORD *)(v6 + 276) + 4);
      if ( v7 & 0x400 )
      {
        if ( sub_4E6E50((float2 *)(v3 + 56), *(__int16 *)(v3 + 124), v4 + 9) & 1 )
        {
          v8 = sub_415FA0(18, 20);
          sub_501960(890, v3, 0, 0);
          sub_4E0A70((int)v4, v3);
          sub_52BE40((int)v4, v3);
          sub_4FA020((_DWORD *)v3, v8);
          v9 = sub_4FA2B0(v3);
          sub_4F9F90(v9, &a1, &a2);
          v5 = v10;
          *(_BYTE *)(v6 + 236) = a1 - 1;
        }
      }
    }
    if ( sub_4FA4F0(v3, (int)v4) )
    {
      sub_52BE40((int)v4, v3);
      return;
    }
    if ( sub_4FF350(v3, 27) && sub_4E6E50((float2 *)(v3 + 56), *(__int16 *)(v3 + 124), v4 + 7) & 1 )
    {
      sub_52BE40((int)v4, v3);
      sub_501960(122, v3, 0, 0);
    }
    else
    {
LABEL_23:
      if ( *(_DWORD *)(v5 + 4) == v3 )
      {
        v11[0] = v3;
        sub_4FD400(*(_DWORD *)(v5 + 12), *(_DWORD *)(v5 + 8), *(_DWORD **)v5, (int)v4, v11, *(_DWORD *)(v5 + 16));
        sub_4E5CC0((int)v4);
      }
      else
      {
        sub_4E0A70((int)v4, v3);
      }
    }
  }
  else if ( a3 )
  {
    sub_57B810(a3, a1 + 80);
  }
}

//----- (004E96F0) --------------------------------------------------------
void __cdecl sub_4E96F0(int a1, int a2)
{
  int v2; // ebx
  int v3; // eax

  v2 = *(_DWORD *)(a1 + 748);
  if ( !sub_40A5C0(2048) || (*(_BYTE *)(sub_4DA7C0() + 16) & 2) != 2 )
  {
    sub_502490((int *)(v2 + 1272), a2, a1);
    if ( a2 && *(_BYTE *)(a2 + 8) & 6 && !sub_4EC520(a1, a2) )
    {
      v3 = *(_DWORD *)(a2 + 16);
      if ( (v3 & 0x8000) == 0 )
      {
        *(_DWORD *)(v2 + 2176) = a2;
        sub_4EE5E0(a1, 999);
      }
    }
  }
}

//----- (004E9770) --------------------------------------------------------
void __cdecl sub_4E9770(int a1, int a2, float *a3)
{
  int v3; // eax
  float v4; // edx
  __int16 v5; // ax
  double v6; // st7
  int *v7; // eax
  int v8; // eax
  int v9; // [esp-Ch] [ebp-18h]
  float v10; // [esp+0h] [ebp-Ch]
  float v11; // [esp+0h] [ebp-Ch]
  float2 v12; // [esp+4h] [ebp-8h]

  if ( !*(_DWORD *)&byte_5D4594[1567964] )
  {
    v10 = sub_419D40(&byte_587000[204452]);
    *(_DWORD *)&byte_5D4594[1567968] = sub_419A70(v10);
    v11 = sub_419D40(&byte_587000[204472]);
    *(_DWORD *)&byte_5D4594[1567972] = sub_419A70(v11);
    *(float *)&byte_5D4594[1567976] = sub_419D40(&byte_587000[204500]);
    *(float *)&byte_5D4594[1567980] = sub_419D40(&byte_587000[204520]);
    *(float *)&byte_5D4594[1567984] = sub_419D40(&byte_587000[204544]);
    *(_DWORD *)&byte_5D4594[1567964] = 1;
  }
  if ( !sub_40A5C0(4096)
    || (v3 = sub_4EC580(a1)) == 0
    || !a2
    || !(*(_BYTE *)(v3 + 8) & 4)
    || !(*(_BYTE *)(a2 + 8) & 4)
    || sub_5330C0(v3, a2) )
  {
    if ( a1 )
      sub_522FF0(134, (float2 *)(a1 + 56));
    if ( a2 )
    {
      if ( *(_BYTE *)(a2 + 8) & 4 )
      {
        if ( sub_4FA4F0(a2, a1) )
        {
          sub_52BE40(a1, a2);
          return;
        }
        if ( sub_4FF350(a2, 27) && sub_4E6E50((float2 *)(a2 + 56), *(__int16 *)(a2 + 124), (float2 *)(a1 + 56)) & 1 )
        {
          sub_52BE40(a1, a2);
          sub_501960(122, a2, 0, 0);
          return;
        }
      }
      v9 = *(_DWORD *)&byte_5D4594[1567968];
      v8 = sub_4EC580(a1);
      (*(void (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v8, a1, v9, 7);
      sub_537AF0((int *)(a2 + 56), 0);
    }
    else if ( a3 )
    {
      sub_57B810(a3, a1 + 80);
      v4 = *(float *)(a1 + 84);
      v12.field_0 = *(float *)(a1 + 80);
      v12.field_4 = v4;
      v5 = sub_509ED0(&v12);
      v6 = *(float *)(a1 + 80) * 0.5;
      *(_WORD *)(a1 + 126) = v5;
      *(float *)(a1 + 80) = v6;
      *(float *)(a1 + 84) = *(float *)(a1 + 84) * 0.5;
      v7 = (int *)sub_537760();
      if ( v7 )
        sub_534BC0(*v7, v7[1], *(int *)&byte_5D4594[1567968], 7, a1);
      return;
    }
    sub_4E25B0(a1 + 56, *(float *)&byte_5D4594[1567976], 5.0, *(int *)&byte_5D4594[1567972], 7, a1, 0);
    sub_52E040(
      a1 + 56,
      *(float *)&byte_5D4594[1567980],
      *(int *)&byte_5D4594[1567980],
      *(float *)&byte_5D4594[1567984],
      a1,
      0,
      0);
    sub_501960(84, a1, 0, 0);
    sub_4E5CC0(a1);
  }
}

//----- (004E99B0) --------------------------------------------------------
void __cdecl sub_4E99B0(int a1, int a2)
{
  int v2; // edx
  void (__cdecl *v3)(int); // eax

  if ( a2 && !sub_4EC520(a1, a2) && *(_BYTE *)(a2 + 8) & 6 )
  {
    v2 = *(_DWORD *)(a1 + 16);
    v3 = *(void (__cdecl **)(int))(a1 + 724);
    BYTE1(v2) |= 0x80u;
    *(_DWORD *)(a1 + 16) = v2;
    if ( v3 )
      v3(a1);
    else
      sub_4E5CC0(a1);
  }
}

//----- (004E9A00) --------------------------------------------------------
char __cdecl sub_4E9A00(int a1, int a2)
{
  int v2; // eax

  v2 = sub_4E9A30(a1, a2);
  if ( v2 )
    LOBYTE(v2) = sub_537C10(a1, a2);
  return v2;
}

//----- (004E9A30) --------------------------------------------------------
BOOL __cdecl sub_4E9A30(int a1, int a2)
{
  int v3; // esi
  int v4; // eax
  BOOL v5; // esi

  if ( sub_40A5C0(2048) && (*(_BYTE *)(sub_4DA7C0() + 16) & 2) == 2 )
    return 0;
  v5 = 1;
  if ( a2 )
  {
    if ( sub_4EC520(a1, a2)
      || sub_40A5C0(512) && (v3 = sub_4EC580(a1), v4 = sub_4EC580(a2), *(_BYTE *)(v3 + 8) & 4) && *(_BYTE *)(v4 + 8) & 4 )
    {
      v5 = 0;
    }
  }
  if ( sub_4FC250(a2, 4) )
    v5 = 0;
  return v5;
}

//----- (004E9AC0) --------------------------------------------------------
void __cdecl sub_4E9AC0(int a1, int a2)
{
  int v2; // esi
  char *v3; // ebp
  int v4; // ebx
  int v5; // eax
  int v6; // eax
  float v7; // [esp+0h] [ebp-28h]
  float v8; // [esp+0h] [ebp-28h]
  int v9; // [esp+4h] [ebp-24h]
  int v10; // [esp+8h] [ebp-20h]
  int v11; // [esp+10h] [ebp-18h]
  int v12; // [esp+10h] [ebp-18h]
  int v13; // [esp+14h] [ebp-14h]
  unsigned int v14; // [esp+2Ch] [ebp+4h]

  v2 = a1;
  v3 = *(char **)(a1 + 700);
  v4 = 1;
  if ( a2 && sub_4FF350(a2, 27) && sub_4E6E50((float2 *)(a2 + 56), *(__int16 *)(a2 + 124), (float2 *)(a1 + 56)) & 1 )
  {
    sub_4E0A70(a1, a2);
    sub_4EC300(a1);
    sub_4EC290(a2, a1);
    v4 = 0;
    sub_501960(122, a2, 0, 0);
  }
  if ( !sub_40A5C0(4096)
    || (v5 = sub_4EC580(a1)) == 0
    || !a2
    || !(*(_BYTE *)(v5 + 8) & 4)
    || !(*(_BYTE *)(a2 + 8) & 4)
    || sub_5330C0(v5, a2) )
  {
    if ( v4 )
    {
      v7 = (double)(unsigned __int8)*v3 * 0.66666669;
      sub_52E040(a1 + 56, v7, 0, 50.0, a1, 0, 0);
      if ( a2 )
      {
        v11 = (unsigned __int8)*v3 >> 1;
        v6 = sub_4EC580(a1);
        (*(void (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v6, a1, v11, 1);
      }
      if ( sub_40A5C0(2048) )
      {
        v13 = a2;
        v12 = a1;
        v14 = (unsigned __int8)*v3;
        v10 = v14 >> 1;
        v9 = 0;
      }
      else
      {
        v13 = a2;
        v12 = a1;
        v14 = (unsigned __int8)*v3;
        v10 = v14 >> 1;
        v9 = 1097859072;
      }
      v8 = (double)(int)v14 * 0.33333334;
      sub_4E25B0(v2 + 56, v8, *(float *)&v9, v10, 1, v12, v13);
      sub_5231B0((float *)(v2 + 56), *v3);
      sub_501960(42, v2, 0, 0);
      sub_537AF0((int *)(v2 + 56), 2);
      sub_4E5CC0(v2);
    }
  }
}

//----- (004E9C40) --------------------------------------------------------
void __cdecl sub_4E9C40(_DWORD *a1, int a2)
{
  int v2; // esi
  int v3; // eax
  int v4; // eax
  int i; // ebp
  void (__cdecl *v6)(_DWORD *); // eax

  v2 = a2;
  if ( a2 )
  {
    if ( *(_BYTE *)(a2 + 8) & 4 )
    {
      v3 = a1[4];
      if ( (v3 & 0x8000) == 0 )
      {
        if ( sub_40A5C0(4096) && (v4 = a1[3], BYTE1(v4) & 0xF) )
        {
          for ( i = sub_4E7980(a2); i; i = sub_4E7990(i) )
          {
            if ( *(_BYTE *)(i + 8) & 0x40 )
            {
              if ( !strcmp((const char *)sub_4E39D0(i), (const char *)&byte_587000[204564]) )
              {
                sub_4E5CC0(i);
                sub_501960(234, (int)a1, 0, 0);
                v2 = a2;
                goto LABEL_14;
              }
              v2 = a2;
            }
          }
          if ( (unsigned __int64)(sub_416BB0() - *(_QWORD *)&byte_5D4594[1567940]) > 0x5DC )
          {
            sub_501960(1012, (int)a1, 0, 0);
            sub_4DA2C0(v2, (const char *)&byte_587000[204576], 0);
            *(_QWORD *)&byte_5D4594[1567940] = sub_416BB0();
          }
        }
        else
        {
LABEL_14:
          v6 = (void (__cdecl *)(_DWORD *))a1[181];
          if ( v6 )
            v6(a1);
          sub_4EDF00((int)a1, v2);
          sub_4EDA40(a1);
        }
      }
    }
  }
}

//----- (004E9D80) --------------------------------------------------------
void __cdecl sub_4E9D80(int a1, int a2, float *a3)
{
  int *v3; // edi
  int v4; // eax
  int v5; // edi
  int v6; // eax
  float v7; // [esp+0h] [ebp-20h]
  float v8; // [esp+4h] [ebp-1Ch]
  int v9; // [esp+4h] [ebp-1Ch]
  int v10; // [esp+8h] [ebp-18h]

  v3 = *(int **)(a1 + 700);
  if ( a2 )
  {
    if ( !sub_4EC520(a1, a2) )
    {
      if ( sub_40A5C0(4096) && *(void (__cdecl **)(int, int, int))(a1 + 696) == sub_4E9E50 )
        v5 = 3 * *v3;
      else
        v5 = *v3;
      v6 = sub_4EC580(a1);
      if ( (*(int (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v6, a1, v5, 11) )
        sub_4E5CC0(a1);
    }
  }
  else if ( a3 )
  {
    sub_57B810(a3, a1 + 80);
    v10 = *v3;
    v8 = *(float *)(a1 + 68) * 0.043478262;
    v9 = sub_419A70(v8);
    v7 = *(float *)(a1 + 64) * 0.043478262;
    v4 = sub_419A70(v7);
    sub_534BC0(v4, v9, v10, 11, a1);
  }
}

//----- (004E9E50) --------------------------------------------------------
void __cdecl sub_4E9E50(int a1, int a2, int a3)
{
  if ( a1 && !sub_40A5C0(4) )
    sub_522FF0(136, (float2 *)(a1 + 56));
  sub_4E9D80(a1, a2, (float *)a3);
}

//----- (004E9E90) --------------------------------------------------------
int *__cdecl sub_4E9E90(int a1, int a2, float *a3)
{
  int *result; // eax
  int *v4; // esi
  int v5; // eax
  int v6; // eax
  int v7; // edx
  double v8; // st7
  double v9; // st6
  double v10; // st5
  int v11; // eax
  float v12; // [esp+0h] [ebp-1Ch]
  float v13; // [esp+4h] [ebp-18h]
  int v14; // [esp+4h] [ebp-18h]
  float2 a2a; // [esp+14h] [ebp-8h]

  if ( a2 )
  {
    if ( (signed char)*(_BYTE *)(a2 + 8) >= 0 )
    {
      v13 = sub_419D40(&byte_587000[204628]);
      v14 = sub_419A70(v13);
      v11 = sub_4EC580(a1);
      result = (int *)(*(int (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v11, a1, v14, 2);
    }
    else
    {
      v6 = *(_DWORD *)(a2 + 748);
      v7 = *(_DWORD *)(a1 + 76);
      *(_DWORD *)(a1 + 64) = *(_DWORD *)(a1 + 72);
      *(_DWORD *)(a1 + 68) = v7;
      v8 = *(float *)(a2 + 56) - *(float *)(a1 + 72);
      v9 = *(float *)(a2 + 60) - *(float *)(a1 + 76);
      a2a.field_0 = -(double)*(int *)&byte_587000[8 * *(_DWORD *)(v6 + 12) + 196188];
      v10 = (double)*(int *)&byte_587000[8 * *(_DWORD *)(v6 + 12) + 196184];
      a2a.field_4 = v10;
      if ( v10 * v9 + a2a.field_0 * v8 > 0.0 )
      {
        a2a.field_0 = -a2a.field_0;
        a2a.field_4 = -a2a.field_4;
      }
      sub_57B770((float2 *)(a1 + 80), &a2a);
      result = sub_501960(283, a1, 0, 0);
    }
  }
  else
  {
    result = (int *)a3;
    if ( a3 )
    {
      sub_57B810(a3, a1 + 80);
      sub_501960(37, a1, 0, 0);
      result = (int *)sub_537760();
      v4 = result;
      if ( result )
      {
        v12 = sub_419D40(&byte_587000[204604]);
        v5 = sub_419A70(v12);
        result = (int *)sub_534BC0(*v4, v4[1], v5, 2, a1);
      }
    }
  }
  return result;
}

//----- (004E9FE0) --------------------------------------------------------
void __cdecl sub_4E9FE0(int a1, int a2, float *a3)
{
  int v3; // eax
  int v4; // eax
  float v5; // [esp+0h] [ebp-1Ch]
  float v6; // [esp+4h] [ebp-18h]
  int v7; // [esp+4h] [ebp-18h]

  if ( a2 )
  {
    v4 = sub_4EC580(a1);
    (*(void (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v4, a1, 20, 2);
  }
  else if ( a3 )
  {
    sub_57B810(a3, a1 + 80);
    sub_501960(37, a1, 0, 0);
    v6 = *(float *)(a1 + 68) * 0.043478262;
    v7 = sub_419A70(v6);
    v5 = *(float *)(a1 + 64) * 0.043478262;
    v3 = sub_419A70(v5);
    sub_534BC0(v3, v7, 20, 2, a1);
    return;
  }
  sub_4E5CC0(a1);
}

//----- (004EA080) --------------------------------------------------------
void __cdecl sub_4EA080(int a1, int a2, float *a3)
{
  int *v3; // ebp
  __int16 v4; // ax
  double v5; // st7
  double v6; // st7
  int v7; // eax
  int v8; // ecx
  int v9; // eax
  int v10; // eax
  float v11; // [esp+0h] [ebp-20h]
  float v12; // [esp+4h] [ebp-1Ch]
  int v13; // [esp+4h] [ebp-1Ch]
  int v14; // [esp+8h] [ebp-18h]
  int v15; // [esp+Ch] [ebp-14h]

  v3 = *(int **)(a1 + 700);
  if ( a2 )
  {
    if ( sub_5330C0(a1, a2) )
    {
      v8 = *(_DWORD *)(a2 + 8);
      if ( v8 & 0x20006 )
      {
        if ( !(*(_DWORD *)(a2 + 16) & 0x8020) )
        {
          v9 = *(_DWORD *)(a1 + 508);
          if ( !v9 || (*(_BYTE *)(v9 + 8) & 4) != 4 || (*(_BYTE *)(v9 + 16) & 2) != 2 )
          {
            if ( !(v8 & 4) )
              goto LABEL_20;
            if ( sub_4FA4F0(a2, a1) )
            {
              sub_52BE40(a1, a2);
              return;
            }
            if ( sub_4FF350(a2, 27) && sub_4E6E50((float2 *)(a2 + 56), *(__int16 *)(a2 + 124), (float2 *)(a1 + 56)) & 1 )
            {
              sub_52BE40(a1, a2);
              sub_501960(122, a2, 0, 0);
            }
            else
            {
LABEL_20:
              v15 = *v3;
              v10 = sub_4EC580(a1);
              (*(void (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v10, a1, v15, 11);
              sub_501960(96, a1, 0, 0);
              sub_4E5CC0(a1);
            }
          }
        }
      }
    }
  }
  else if ( a3 )
  {
    sub_57B810(a3, a1 + 80);
    v4 = sub_509ED0((float2 *)(a1 + 80));
    v5 = *(float *)(a1 + 80) + *(float *)(a1 + 64);
    *(_WORD *)(a1 + 126) = v4;
    *(float *)(a1 + 64) = v5;
    v6 = *(float *)(a1 + 84) + *(float *)(a1 + 68);
    *(float *)(a1 + 68) = v6;
    v14 = *v3;
    v12 = v6 * 0.043478262;
    v13 = sub_419A70(v12);
    v11 = *(float *)(a1 + 64) * 0.043478262;
    v7 = sub_419A70(v11);
    sub_534BC0(v7, v13, v14, 11, a1);
  }
  else
  {
    sub_4E5CC0(a1);
  }
}

//----- (004EA200) --------------------------------------------------------
void __cdecl sub_4EA200(int a1, int a2, float2* a3)
{
  int *v3; // ecx
  double v5; // st7
  int v8; // eax
  int v9; // eax
  float v10; // [esp+0h] [ebp-1Ch]
  float v11; // [esp+4h] [ebp-18h]
  int v12; // [esp+4h] [ebp-18h]
  int v13; // [esp+8h] [ebp-14h]
  int v14; // [esp+Ch] [ebp-10h]

  v3 = *(int **)(a1 + 700);
  if ( a2 )
  {
    v14 = *v3;
    v9 = sub_4EC580(a1);
    if ( (*(int (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v9, a1, v14, 11) )
      sub_4E5CC0(a1);
  }
  else if ( a3 )
  {
    v5 = *(float *)(a1 + 80);
    if ( a3->field_0 * a3->field_4 <= 0.0 )
    {
      *(float *)(a1 + 80) = *(float *)(a1 + 84);
    }
    else
    {
      *(float *)(a1 + 80) = -*(float *)(a1 + 84);
      v5 = -v5;
    }
    *(float *)(a1 + 84) = v5;
    v13 = *v3;
    v11 = *(float *)(a1 + 68) * 0.043478262;
    v12 = sub_419A70(v11);
    v10 = *(float *)(a1 + 64) * 0.043478262;
    v8 = sub_419A70(v10);
    sub_534BC0(v8, v12, v13, 11, a1);
  }
}

//----- (004EA2C0) --------------------------------------------------------
void __cdecl sub_4EA2C0(int a1, int a2)
{
  int v2; // eax

  if ( a2 )
  {
    if ( *(_BYTE *)(a2 + 8) & 4 )
    {
      v2 = *(_DWORD *)(a1 + 508);
      if ( v2 != a2 && !v2 )
      {
        *(_DWORD *)(a1 + 136) = *(_DWORD *)&byte_5D4594[2598000];
        sub_4EC290(a2, a1);
      }
    }
  }
}

//----- (004EA300) --------------------------------------------------------
void __cdecl sub_4EA300(int a1, int a2, float *a3)
{
  char v3; // al

  if ( *(_DWORD *)(*(_DWORD *)(a1 + 748) + 12) != 4 )
  {
    if ( *(_DWORD *)(*(_DWORD *)(a1 + 748) + 12) == 5 )
    {
      if ( a2 )
      {
        sub_501960(351, a1, 0, 0);
        sub_4E5CC0(a1);
        v3 = *(_BYTE *)(a2 + 8);
        ++*(_BYTE *)(a2 + 541);
        *(_WORD *)(a2 + 542) = 1000;
        if ( v3 & 4 )
          sub_4DA2C0(a2, (const char *)&byte_587000[204652], 0);
      }
    }
    else
    {
      sub_4E9D80(a1, a2, a3);
    }
  }
}

//----- (004EA380) --------------------------------------------------------
void __cdecl sub_4EA380(int a1, int a2)
{
  int v2; // eax

  if ( a2 )
  {
    sub_501960(351, a1, 0, 0);
    sub_4E5CC0(a1);
    v2 = sub_4EC580(a1);
    if ( (*(int (__cdecl **)(int, int, int, _DWORD, int))(a2 + 716))(a2, v2, a1, 0, 2) )
    {
      if ( *(_BYTE *)(a2 + 8) & 6 )
        sub_4FF380(a2, 4, 4 * *(_WORD *)&byte_5D4594[2649704], 3);
      if ( *(_BYTE *)(a2 + 8) & 4 )
        sub_4DA2C0(a2, (const char *)&byte_587000[204676], 0);
    }
  }
}

//----- (004EA400) --------------------------------------------------------
void __cdecl sub_4EA400(int a1, int a2)
{
  int v2; // eax
  int v3; // eax

  if ( a2 )
  {
    v2 = *(_DWORD *)(a2 + 16);
    if ( (v2 & 0x8000) == 0 )
    {
      if ( sub_40A5C0(32) )
      {
        if ( *(_BYTE *)(a2 + 8) & 4 )
          sub_4EA490(a1, a2);
      }
      else if ( sub_40A5C0(64) )
      {
        v3 = *(_DWORD *)&byte_5D4594[1567996];
        if ( !*(_DWORD *)&byte_5D4594[1567996] )
        {
          v3 = sub_4E3AA0((CHAR *)&byte_587000[204700]);
          *(_DWORD *)&byte_5D4594[1567996] = v3;
        }
        if ( *(unsigned __int16 *)(a2 + 4) == v3 || *(_BYTE *)(a2 + 8) & 4 )
          sub_4EA800(a1, a2);
      }
    }
  }
}

//----- (004EA490) --------------------------------------------------------
void __cdecl sub_4EA490(int a1, int a2)
{
  int v2; // esi
  int v3; // edi
  char v4; // bp
  int v5; // ebx
  int v6; // esi
  unsigned __int16 v7; // ax
  int v8; // ebp
  int v9; // ebx
  char *v10; // eax
  char *v11; // esi
  char *v12; // eax
  _DWORD *v13; // eax
  int v14; // ebx
  float2 *v15; // [esp-4h] [ebp-24h]
  unsigned __int8 v16; // [esp+10h] [ebp-10h]
  unsigned __int8 v17; // [esp+10h] [ebp-10h]
  char v18[10]; // [esp+14h] [ebp-Ch]
  int v19; // [esp+24h] [ebp+4h]
  int v20; // [esp+24h] [ebp+4h]

  v2 = a1;
  v3 = a2;
  a2 = *(_DWORD *)(a2 + 748);
  v4 = sub_4ECBD0(a1);
  v16 = *(_BYTE *)(a1 + 52);
  if ( sub_419150(v3 + 48, a1 + 48) )
  {
    v5 = *(_DWORD *)(a1 + 748);
    if ( fabs(*(float *)(a1 + 56) - *(float *)v5) > *(double *)&byte_581450[10160]
      || fabs(*(float *)(a1 + 60) - *(float *)(v5 + 4)) > *(double *)&byte_581450[10160] )
    {
      v15 = *(float2 **)(a1 + 748);
      a2 = *(_DWORD *)(v3 + 36);
      sub_4E7010(a1, v15);
      sub_4DA180(4, &a2);
      *(_DWORD *)(v5 + 8) = 0;
      sub_4E82C0(*(_BYTE *)(v3 + 52), 0, v4, 0);
    }
    else
    {
      v6 = *(_DWORD *)(v3 + 504);
      if ( v6 )
      {
        while ( 1 )
        {
          if ( *(_DWORD *)(v6 + 8) & 0x10000000 )
          {
            v7 = sub_40A020(32);
            v8 = *(_DWORD *)(v6 + 748);
            v9 = v7;
            v19 = sub_4ECBD0(v6);
            v17 = *(_BYTE *)(v6 + 52);
            sub_4D8E90(v3, 1);
            sub_4D8EF0(v3);
            if ( sub_419130(v3 + 48) )
            {
              v10 = sub_418AB0(*(unsigned __int8 *)(v3 + 52));
              sub_419090((int)v10, *((_DWORD *)v10 + 13) + 1);
              if ( *(_DWORD *)&byte_5D4594[2650652] )
              {
                if ( a2 )
                  sub_425CA0(*(_DWORD *)(a2 + 276), 0);
              }
            }
            sub_4ED0C0(v3, (int *)v6);
            sub_4DAA50(v6, 0, *(float *)v8, *(float *)(v8 + 4));
            sub_4E46F0(v6, 0.0);
            sub_4174B0(v6, 1);
            *(_DWORD *)(v8 + 8) = 0;
            sub_4E82C0(v17, 0, v19, 0);
            *(_DWORD *)&v18[2] = *(_DWORD *)(v3 + 36);
            *(_DWORD *)&v18[6] = v19;
            sub_4DA180(5, v18);
            if ( v9 > 0 )
              break;
          }
          v6 = *(_DWORD *)(v6 + 496);
          if ( !v6 )
            return;
        }
        v11 = sub_418B10();
        if ( v11 )
        {
          while ( *((_DWORD *)v11 + 13) < v9 )
          {
            v11 = sub_418B60((int)v11);
            if ( !v11 )
              return;
          }
          sub_40A4D0(8);
          sub_4D8C80((int)v11, 0);
        }
      }
    }
  }
  else
  {
    v20 = *(_DWORD *)(a1 + 748);
    if ( !*(_DWORD *)(v2 + 492) )
    {
      v12 = sub_418AB0(*(unsigned __int8 *)(v2 + 52));
      if ( v12 && sub_418BC0((int)v12) )
      {
        v13 = *(_DWORD **)(v3 + 504);
        if ( v13 )
        {
          while ( !(v13[2] & 0x10000000) )
          {
            v13 = (_DWORD *)v13[124];
            if ( !v13 )
              goto LABEL_27;
          }
          sub_4ED930(v3, v13);
        }
LABEL_27:
        sub_4DADE0(v2);
        v14 = sub_4ECBD0(v2);
        sub_4F3070(v3, v2, 1);
        *(_DWORD *)(*(_DWORD *)(a2 + 276) + 4) |= 1u;
        sub_4D82F0(255, (_DWORD *)v2);
        *(_DWORD *)&v18[2] = *(_DWORD *)(v3 + 36);
        *(_DWORD *)&v18[6] = v14;
        sub_4DA180(6, v18);
        sub_417470(v2, 1);
        *(_DWORD *)(v20 + 8) = 0;
        sub_4E82C0(v16, 1, v4, *(_WORD *)(v3 + 36));
        sub_4EA7A0(v3);
      }
      else
      {
        sub_4DA2C0(v3, (const char *)&byte_587000[204712], 0);
      }
    }
  }
}

//----- (004EA7A0) --------------------------------------------------------
int __cdecl sub_4EA7A0(int a1)
{
  int i; // esi
  int result; // eax
  int v3; // eax

  for ( i = 0; i < 32; ++i )
  {
    result = sub_4FF350(a1, i);
    if ( result )
    {
      result = sub_424920(i);
      if ( result )
      {
        v3 = sub_424920(i);
        result = sub_424A50(v3, 0x80000);
        if ( result )
          result = sub_4FF5B0(a1, i);
      }
    }
  }
  return result;
}

//----- (004EA800) --------------------------------------------------------
__int16 __cdecl sub_4EA800(int a1, int a2)
{
  char *v2; // eax
  int v3; // esi
  int *v4; // edi
  char *v5; // eax
  int v6; // ebx
  int v7; // edi
  int v8; // ebp
  int v9; // eax
  char *v10; // edi
  int v11; // edi
  int i; // eax
  int v13; // ebp
  int j; // edi
  int v15; // ebp
  char v17[10]; // [esp+0h] [ebp-Ch]

  LOWORD(v2) = *(_WORD *)&byte_5D4594[1567992];
  if ( !*(_DWORD *)&byte_5D4594[1567992] )
  {
    v2 = (char *)sub_4E3AA0((CHAR *)&byte_587000[204736]);
    *(_DWORD *)&byte_5D4594[1567992] = v2;
  }
  v3 = a2;
  if ( *(_BYTE *)(a2 + 8) & 4 )
  {
    v2 = (char *)sub_4E7C30(a2);
    if ( !v2 )
      return (__int16)v2;
    v3 = *(_DWORD *)(a2 + 516);
    if ( !v3 )
      return (__int16)v2;
    LOWORD(v2) = *(_WORD *)&byte_5D4594[1567992];
    while ( *(unsigned __int16 *)(v3 + 4) != *(_DWORD *)&byte_5D4594[1567992] )
    {
      v3 = *(_DWORD *)(v3 + 512);
      if ( !v3 )
        return (__int16)v2;
    }
  }
  if ( v3 )
  {
    v4 = *(int **)(v3 + 748);
    if ( *v4 && *(_BYTE *)(*v4 + 16) & 0x20 )
      *v4 = 0;
    v5 = sub_418AB0(*(unsigned __int8 *)(a1 + 52));
    v2 = sub_418B60((int)v5);
    v6 = (int)v2;
    if ( !v2 )
    {
      v2 = sub_418B10();
      v6 = (int)v2;
    }
    v7 = *v4;
    if ( v7 )
    {
      v2 = (char *)*(unsigned __int8 *)(v7 + 52);
      if ( v2 == (char *)*(unsigned __int8 *)(v6 + 57) )
      {
        v8 = (unsigned __int16)sub_40A020(64);
        sub_4D8E90(v7, 1);
        sub_4D8EF0(v7);
        sub_419090(v6, *(_DWORD *)(v6 + 52) + 1);
        if ( *(_DWORD *)&byte_5D4594[2650652] )
        {
          v9 = *(_DWORD *)(v7 + 748);
          if ( v9 )
            sub_425CA0(*(_DWORD *)(v9 + 276), 0);
        }
        sub_501960(929, a1, 0, 0);
        *(_DWORD *)&v17[2] = *(_DWORD *)(v7 + 36);
        *(_DWORD *)&v17[6] = *(unsigned __int8 *)(v6 + 57);
        sub_4DA180(9, v17);
        sub_522FF0(154, (float2 *)(v3 + 56));
        if ( v8 > 0 )
        {
          v10 = sub_418B10();
          if ( v10 )
          {
            while ( *((_DWORD *)v10 + 13) < v8 )
            {
              v10 = sub_418B60((int)v10);
              if ( !v10 )
                goto LABEL_27;
            }
            sub_40A4D0(8);
            sub_4D8C40((int)v10);
          }
        }
LABEL_27:
        if ( !*(_DWORD *)&byte_5D4594[1567988] )
          *(_DWORD *)&byte_5D4594[1567988] = sub_4E3AA0((CHAR *)&byte_587000[204748]);
        v11 = 0;
        for ( i = sub_4DA790(); i; i = sub_4DA7A0(i) )
        {
          if ( *(unsigned __int16 *)(i + 4) == *(_DWORD *)&byte_5D4594[1567988] )
            ++v11;
        }
        v13 = sub_415FA0(0, v11 - 1);
        v2 = (char *)sub_4DA790();
        for ( j = (int)v2; v2; j = (int)v2 )
        {
          LOWORD(v2) = *(_WORD *)(j + 4);
          if ( (unsigned __int16)v2 == *(_DWORD *)&byte_5D4594[1567988] )
          {
            if ( !v13 )
            {
              if ( j )
              {
                v15 = *(_DWORD *)(v3 + 748);
                sub_4EC300(v3);
                sub_4EB9B0(v3, 0);
                sub_419570(v3 + 48, *(_DWORD *)(v3 + 36));
                sub_4EE6F0(v3);
                *(_QWORD *)(v15 + 8) = sub_416BB0();
                sub_4E7010(v3, (float2 *)(j + 56));
                sub_4E8290(0, 0);
                LOWORD(v2) = sub_522FF0(129, (float2 *)(v3 + 56));
                *(_DWORD *)(v3 + 80) = 0;
                *(_DWORD *)(v3 + 84) = 0;
                *(_DWORD *)(v3 + 88) = 0;
                *(_DWORD *)(v3 + 100) = 0;
              }
              return (__int16)v2;
            }
            --v13;
          }
          v2 = (char *)sub_4DA7A0(j);
        }
      }
    }
  }
  return (__int16)v2;
}

//----- (004EAAA0) --------------------------------------------------------
_DWORD *__cdecl sub_4EAAA0(int a1)
{
  _DWORD *result; // eax

  result = (_DWORD *)a1;
  if ( *(_DWORD *)&byte_5D4594[2598000] > (unsigned int)(*(_DWORD *)(a1 + 136) + 3) )
  {
    *(_DWORD *)(a1 + 136) = *(_DWORD *)&byte_5D4594[2598000];
    result = sub_501960(281, a1, 0, 0);
  }
  return result;
}

//----- (004EAAD0) --------------------------------------------------------
_DWORD *__cdecl sub_4EAAD0(int a1, int a2)
{
  _DWORD *result; // eax

  result = (_DWORD *)a2;
  if ( a2 && *(_BYTE *)(a2 + 8) & 4 )
  {
    result = (_DWORD *)a1;
    if ( *(_DWORD *)&byte_5D4594[2598000] > (unsigned int)(*(_DWORD *)(a1 + 136) + 30) )
    {
      *(_DWORD *)(a1 + 136) = *(_DWORD *)&byte_5D4594[2598000];
      result = sub_501960(**(_DWORD **)(a1 + 700), a1, 0, 0);
    }
  }
  return result;
}

//----- (004EAB20) --------------------------------------------------------
int __cdecl sub_4EAB20(int a1)
{
  int result; // eax

  result = a1;
  *(_DWORD *)(*(_DWORD *)(a1 + 748) + 4) = 1;
  return result;
}

//----- (004EAB40) --------------------------------------------------------
void __cdecl sub_4EAB40(int a1, int a2)
{

  if ( a2 )
  {
    if ( *(_BYTE *)(a2 + 8) & 4 )
      (*(int (__cdecl **)(int, int))(a1 + 732))(a2, a1);
  }
}

//----- (004EAB60) --------------------------------------------------------
void __cdecl sub_4EAB60(int a1, int a2)
{
  int v2; // ebx
  int v3; // eax
  int v4; // eax
  double v5; // st7

  v2 = *(_DWORD *)(a1 + 700);
  if ( a2 )
  {
    v3 = *(_DWORD *)(a2 + 8);
    if ( (v3 & 0x80u) == 0 )
    {
      if ( *(_DWORD *)(a1 + 16) & 0x1000000 )
      {
        v4 = *(_DWORD *)(a2 + 172);
        if ( v4 == 3 )
        {
          if ( *(float *)(a1 + 184) < (double)*(float *)(a2 + 184)
            || *(float *)(a1 + 188) < (double)*(float *)(a2 + 188) )
          {
            return;
          }
LABEL_11:
          if ( sub_57B850((float2 *)(a1 + 56), (float *)(a1 + 172), (float2 *)(a2 + 56)) )
          {
            *(_DWORD *)(a2 + 16) |= 0x60000u;
            *(float *)(a2 + 164) = (double)*(int *)(v2 + 8);
            *(float *)(a2 + 168) = (double)*(int *)(v2 + 12);
            *(_DWORD *)(a2 + 156) = *(_DWORD *)(a1 + 56);
            *(_DWORD *)(a2 + 160) = *(_DWORD *)(a1 + 60);
          }
          return;
        }
        if ( v4 != 2 )
          goto LABEL_11;
        v5 = *(float *)(a2 + 176) + *(float *)(a2 + 176);
        if ( v5 <= *(float *)(a1 + 184) && v5 <= *(float *)(a1 + 188) )
          goto LABEL_11;
      }
      else if ( !*(_DWORD *)(v2 + 24) && (!(v3 & 4) || !sub_4FC250(a2, 4)) )
      {
        if ( *(_WORD *)(v2 + 20) )
          *(_DWORD *)(v2 + 16) = *(_DWORD *)&byte_5D4594[2598000] + *(unsigned __int16 *)(v2 + 20);
        sub_502490((int *)v2, a2, a1);
        *(_DWORD *)(v2 + 24) = 1;
      }
    }
  }
}

//----- (004EACA0) --------------------------------------------------------
_DWORD *__cdecl sub_4EACA0(int a1, int a2)
{
  _DWORD *result; // eax
  int *v3; // ebx

  result = (_DWORD *)a1;
  v3 = *(int **)(a1 + 700);
  if ( a2 )
  {
    if ( (signed char)*(_BYTE *)(a2 + 8) >= 0 )
    {
      sub_522FF0(138, (float2 *)(a2 + 56));
      sub_501960(147, a2, 0, 0);
      *(float *)(a2 + 164) = (double)*v3;
      *(float *)(a2 + 168) = (double)v3[1];
      sub_4E7190((_BYTE *)a2, (float *)(a2 + 164));
      sub_522FF0(137, (float2 *)(a2 + 56));
      result = sub_501960(147, a2, 0, 0);
    }
  }
  return result;
}

//----- (004EAD20) --------------------------------------------------------
int __cdecl sub_4EAD20(int a1, int a2)
{
  int result; // eax

  result = a2;
  if ( a2 )
    result = sub_4FB550(a2, **(_DWORD **)(a1 + 700), 1, 0, 0);
  return result;
}

//----- (004EAD50) --------------------------------------------------------
void __cdecl sub_4EAD50(int a1, int a2)
{
  _DWORD *v2; // edi
  char *v3; // eax

  if ( a2 )
  {
    if ( *(_BYTE *)(a2 + 8) & 4 )
    {
      v2 = *(_DWORD **)(a1 + 748);
      if ( *(_WORD *)(*(_DWORD *)(a2 + 748) + 4) < *(_WORD *)(*(_DWORD *)(a2 + 748) + 8) && *v2 > 0 )
      {
        if ( !sub_419130(a1 + 48)
          || sub_419130(a2 + 48) && (v3 = sub_418AB0(*(unsigned __int8 *)(a2 + 52))) != 0 && sub_419180(a1 + 48, v3[57]) )
        {
          sub_4EEB80(a2, 1);
          --*v2;
        }
      }
    }
  }
}

//----- (004EADF0) --------------------------------------------------------
void __cdecl sub_4EADF0(int a1, int a2)
{
  int v2; // eax
  int v3; // [esp-8h] [ebp-Ch]

  if ( *(float *)(a1 + 104) <= 0.0 )
  {
    if ( a2 )
    {
      v3 = **(_DWORD **)(a1 + 748);
      v2 = sub_4EC580(a1);
      (*(void (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v2, a1, v3, 2);
    }
  }
}

//----- (004EAE30) --------------------------------------------------------
void __cdecl sub_4EAE30(int a1, int a2)
{
  float *v2; // ebx
  int v3; // eax

  v2 = *(float **)(a1 + 700);
  if ( a2 )
  {
    if ( !sub_4FF350(a2, 14) )
    {
      if ( !sub_40A5C0(4096) || (v3 = *(_DWORD *)(a1 + 508)) == 0 || *(_BYTE *)(v3 + 8) & 4 )
      {
        if ( *(_DWORD *)(a2 + 8) & 0x3001016 )
        {
          if ( !sub_4FF350(a2, 0) )
            sub_522FF0(138, (float2 *)(a2 + 56));
          sub_501960(147, a2, 0, 0);
          sub_4E7190((_BYTE *)a2, v2);
          if ( !sub_4FF350(a2, 0) )
            sub_522FF0(137, (float2 *)(a2 + 56));
          sub_501960(147, a2, 0, 0);
        }
      }
    }
  }
}

//----- (004EAF00) --------------------------------------------------------
void __cdecl sub_4EAF00(int a1, int a2, float *a3)
{
  int v3; // esi
  int v4; // ebx
  int v5; // eax
  int *v6; // ebp
  int v7; // edi
  char v8; // al
  int *v9; // eax
  int v10; // eax
  int v11; // ebp
  _DWORD *v12; // eax
  int v13; // ecx
  int v14; // eax
  int v15; // edx
  double v16; // st7
  char v17; // al
  int v18; // ecx
  int *v19; // edi
  int v20; // [esp-4h] [ebp-3Ch]
  _DWORD *v21; // [esp+10h] [ebp-28h]
  int v22[9]; // [esp+14h] [ebp-24h]
  int v23; // [esp+3Ch] [ebp+4h]
  int v24; // [esp+40h] [ebp+8h]

  v3 = a1;
  v20 = a1;
  v4 = *(_DWORD *)(a1 + 748);
  v23 = 1;
  v5 = sub_4E7980(v20);
  v6 = (int *)v5;
  v21 = (_DWORD *)v5;
  if ( !v5 || *(_BYTE *)(v5 + 16) & 0x20 )
  {
    sub_4E5CC0(v3);
  }
  else
  {
    v7 = a2;
    if ( !a2 || *(_BYTE *)(a2 + 24) & 0x30 )
      sub_522FF0(150, (float2 *)(v3 + 56));
    if ( !a2 )
    {
      if ( !a3 )
        return;
      if ( *(_BYTE *)(v4 + 4) )
        sub_57B810(a3, v3 + 80);
      else
        sub_4EB3E0(v3);
      v8 = *(_BYTE *)(v4 + 4);
      if ( v8 )
      {
        *(_BYTE *)(v4 + 4) = v8 - 1;
      }
      else if ( !*(_BYTE *)(v4 + 24) )
      {
        *(_BYTE *)(v4 + 24) = 2;
        v23 = 0;
      }
      v9 = (int *)sub_537760();
      if ( v9 )
        sub_534BC0(*v9, v9[1], 1, 0, v3);
      if ( *(_BYTE *)(v4 + 24) == 1 )
      {
        sub_4ED790(v3, v6, (float2 *)(v3 + 56));
        sub_4E5CC0(v3);
        return;
      }
      if ( !*(_BYTE *)(v4 + 4) && v23 )
      {
        *(_BYTE *)(v4 + 24) = 0;
        *(_DWORD *)(v4 + 8) = *(_DWORD *)(v3 + 508);
        return;
      }
LABEL_50:
      sub_4EB250(v3);
      return;
    }
    if ( a2 == *(_DWORD *)(v3 + 508) )
    {
      sub_4ED0C0(v3, v6);
      sub_4F3070(*(_DWORD *)(v3 + 508), (int)v6, 1);
      v10 = *(_DWORD *)(v3 + 508);
      if ( v10 && *(_BYTE *)(v10 + 8) & 4 && !*(_DWORD *)(*(_DWORD *)(v10 + 748) + 104) )
        sub_53A420((_DWORD *)v10, (int)v6, 1, 1);
      sub_501960(892, v3, 0, 0);
      sub_4E5CC0(v3);
    }
    else
    {
      if ( sub_4EC520(v3, a2) )
        return;
      v11 = *(_DWORD *)(v3 + 508);
      v12 = sub_413250(*(unsigned __int16 *)(v3 + 4));
      v24 = (int)v12;
      if ( !v11 || *(_DWORD *)(v11 + 16) & 0x8020 )
      {
        sub_4ED790(v3, v21, (float2 *)(v3 + 56));
        sub_4E5CC0(v3);
      }
      else
      {
        v13 = *(_DWORD *)(v7 + 16);
        if ( (v13 & 0x8000) == 0 && v12 )
        {
          v14 = sub_4F9FD0(v11);
          v15 = *(_DWORD *)(v3 + 60);
          v22[4] = *(_DWORD *)(v3 + 56);
          v22[7] = v3;
          v22[5] = v15;
          *(float *)v22 = sub_4EF1E0(v14, v24);
          v16 = *(float *)(v3 + 176) + 30.0;
          LOBYTE(v22[1]) = 0;
          v22[3] = v11;
          *(float *)&v22[2] = v16;
          v22[6] = 0;
          sub_538840(v3, v11, (int)v22);
          sub_538290(v7, v11, v3, (int)v22);
          (*(void (__cdecl **)(int, int, int, _DWORD, _DWORD))(v7 + 716))(
            v7,
            v11,
            v3,
            (__int64)(*(float *)v22 + *(double *)&byte_581450[9544]),
            0);
          if ( !(*(_DWORD *)(v7 + 16) & 0x8020) )
            *(_DWORD *)(v4 + 12) = v7;
          if ( *(_BYTE *)(v4 + 4) )
            sub_4E0A70(v3, v7);
          else
            sub_4EB3E0(v3);
          v17 = *(_BYTE *)(v4 + 4);
          if ( v17 || *(_BYTE *)(v4 + 24) )
          {
            v18 = 1;
          }
          else
          {
            *(_BYTE *)(v4 + 24) = 2;
            v18 = 0;
          }
          if ( v17 )
            *(_BYTE *)(v4 + 4) = v17 - 1;
          if ( *(_BYTE *)(v4 + 24) == 1 )
          {
            v19 = (int *)sub_4E7980(v3);
            sub_501960(893, v3, 0, 0);
            sub_4ED0C0(v3, v19);
            sub_4DAA50((int)v19, 0, *(float *)(v3 + 56), *(float *)(v3 + 60));
            sub_4E5CC0(v3);
            return;
          }
          if ( !*(_BYTE *)(v4 + 4) && v18 )
          {
            *(_DWORD *)(v4 + 8) = v11;
            *(_BYTE *)(v4 + 24) = 0;
            return;
          }
          goto LABEL_50;
        }
      }
    }
  }
}

//----- (004EB250) --------------------------------------------------------
int __cdecl sub_4EB250(int a1)
{
  float *v1; // esi
  int v2; // ebx
  int result; // eax
  double v4; // st7
  double v5; // st6
  float v6; // [esp+Ch] [ebp-14h]
  float4 a1a; // [esp+10h] [ebp-10h]
  float v8; // [esp+24h] [ebp+4h]

  v1 = (float *)a1;
  v2 = *(_DWORD *)(a1 + 748);
  *(_DWORD *)&byte_5D4594[1567928] = 0;
  *(_DWORD *)&byte_5D4594[1567932] = *(_DWORD *)(v2 + 12);
  *(_DWORD *)&byte_5D4594[1567840] = *(_DWORD *)(a1 + 508);
  *(_DWORD *)&byte_5D4594[1567924] = a1;
  *(_DWORD *)&byte_5D4594[1567836] = 1259902592;
  a1a.field_0 = *(float *)(a1 + 56) - 400.0;
  a1a.field_4 = *(float *)(a1 + 60) - 400.0;
  a1a.field_8 = *(float *)(a1 + 56) + 400.0;
  a1a.field_C = *(float *)(a1 + 60) + 400.0;
  sub_517C10(&a1a, sub_4EB340, a1 + 56);
  result = *(_DWORD *)&byte_5D4594[1567928];
  if ( *(_DWORD *)&byte_5D4594[1567928] )
  {
    *(_BYTE *)(v2 + 24) = 2;
    result = *(_DWORD *)&byte_5D4594[1567928];
    v4 = *(float *)(*(_DWORD *)&byte_5D4594[1567928] + 56) - *(float *)(a1 + 56);
    v5 = *(float *)(*(_DWORD *)&byte_5D4594[1567928] + 60) - *(float *)(a1 + 60);
    v8 = v5;
    v6 = sqrt(v5 * v8 + v4 * v4) + *(double *)&byte_581450[10176];
    v1[20] = v4 * v1[136] / v6;
    v1[21] = v8 * v1[136] / v6;
  }
  return result;
}

//----- (004EB340) --------------------------------------------------------
void __cdecl sub_4EB340(float *a1, int a2)
{
  double v2; // st7
  double v3; // st6
  double v4; // st5

  if ( (_DWORD)a1[2] & 0x20006 )
  {
    if ( !((_DWORD)a1[4] & 0x8020)
      && !sub_4FF350((int)a1, 0)
      && a1 != *(float **)&byte_5D4594[1567840]
      && a1 != *(float **)&byte_5D4594[1567932] )
    {
      if ( sub_537110((int)a1, *(int *)&byte_5D4594[1567924]) )
      {
        v2 = *(float *)a2 - a1[14];
        v3 = *(float *)(a2 + 4) - a1[15];
        v4 = v3 * v3 + v2 * v2;
        if ( v4 <= 160000.0 && v4 < *(float *)&byte_5D4594[1567836] )
        {
          *(float *)&byte_5D4594[1567836] = v4;
          *(_DWORD *)&byte_5D4594[1567928] = a1;
        }
      }
    }
  }
}

//----- (004EB3E0) --------------------------------------------------------
void __cdecl sub_4EB3E0(int a1)
{
  int v1; // esi
  float *v2; // edi
  int v3; // ebx
  int v4; // eax
  int v5; // ecx
  double v6; // st7
  int v7; // eax
  float2 *v8; // [esp-4h] [ebp-10h]
  float v9; // [esp+10h] [ebp+4h]

  v1 = a1;
  v2 = (float *)(a1 + 80);
  v8 = (float2 *)(a1 + 80);
  v9 = sqrt(*(float *)(a1 + 80) * *(float *)(a1 + 80) + *(float *)(a1 + 84) * *(float *)(a1 + 84));
  v3 = sub_509ED0(v8);
  v4 = sub_415FA0(-64, 64) + v3 + 128;
  if ( v4 < 0 )
    v4 += (unsigned int)(255 - v4) >> 8 << 8;
  if ( v4 >= 256 )
    v4 += -256 * ((unsigned int)v4 >> 8);
  v5 = *(_DWORD *)(v1 + 76);
  *v2 = v9 * *(float *)&byte_587000[8 * v4 + 194136];
  v6 = v9 * *(float *)&byte_587000[8 * v4 + 194140];
  v7 = *(_DWORD *)(v1 + 72);
  *(_DWORD *)(v1 + 68) = v5;
  *(_DWORD *)(v1 + 64) = v7;
  *(_DWORD *)(v1 + 56) = v7;
  *(float *)(v1 + 84) = v6;
  *(_DWORD *)(v1 + 60) = v5;
  sub_517970(v1);
}

//----- (004EB490) --------------------------------------------------------
void __cdecl sub_4EB490(int a1, int a2)
{
  int v2; // esi
  _DWORD *v3; // ebp
  int v4; // eax
  int v5; // ebx
  int v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // ecx
  double v10; // st7
  int v11; // edx
  int v12; // eax
  int v13; // eax
  char v14; // al
  _WORD *v15; // edi
  int *v16; // edi
  double v17; // st7
  int v18; // [esp-8h] [ebp-3Ch]
  int v19; // [esp-4h] [ebp-38h]
  int v20; // [esp-4h] [ebp-38h]
  int v21[9]; // [esp+10h] [ebp-24h]
  int v22; // [esp+38h] [ebp+4h]

  v2 = a1;
  v19 = *(unsigned __int16 *)(a1 + 4);
  v22 = *(_DWORD *)(a1 + 700);
  v3 = sub_413250(v19);
  if ( !v3 )
    return;
  v4 = *(_DWORD *)(v2 + 508);
  if ( v4 == a2 )
  {
    if ( a2 )
      return;
  }
  if ( v4 )
    v5 = sub_4F9FD0(*(_DWORD *)(v2 + 508));
  else
    v5 = 30;
  if ( sub_40A5C0(4096) )
  {
    v6 = sub_4EC580(v2);
    if ( v6 )
    {
      if ( !a2 )
        goto LABEL_24;
      if ( *(_BYTE *)(v6 + 8) & 4 && *(_BYTE *)(a2 + 8) & 4 && !sub_5330C0(v6, a2) )
        return;
    }
  }
  if ( !a2 )
  {
LABEL_24:
    v16 = (int *)sub_537760();
    if ( v16 )
    {
      v17 = sub_4EF1E0(v5, (int)v3);
      sub_534BC0(*v16, v16[1], (__int64)v17, 11, v2);
      sub_4E5CC0(v2);
      return;
    }
    goto LABEL_27;
  }
  sub_4F9FD0(*(_DWORD *)(v2 + 508));
  if ( !*(_DWORD *)&byte_5D4594[1568000] )
    *(_DWORD *)&byte_5D4594[1568000] = sub_4E3AA0((CHAR *)&byte_587000[204860]);
  v7 = *(_DWORD *)(a2 + 16);
  if ( (v7 & 0x8000) == 0 )
  {
    v8 = *(_DWORD *)(v2 + 56);
    v9 = *(_DWORD *)(v2 + 60);
    v21[7] = v2;
    v21[4] = v8;
    v21[5] = v9;
    v10 = sub_4EF1E0(v5, (int)v3);
    v11 = *(_DWORD *)(v2 + 176);
    *(float *)v21 = v10;
    v12 = *(_DWORD *)(v22 + 4);
    LOBYTE(v21[1]) = 11;
    v21[3] = v12;
    v21[2] = v11;
    v21[6] = 0;
    sub_538840(v2, v12, (int)v21);
    if ( *(_DWORD *)(v2 + 508) != a2 )
      sub_538290(a2, *(_DWORD *)(v22 + 4), v2, (int)v21);
    v20 = LOBYTE(v21[1]);
    v18 = (__int64)(*(float *)v21 + *(double *)&byte_581450[9544]);
    v13 = sub_4EC580(v2);
    v14 = (*(int (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v13, v2, v18, v20);
    if ( *(unsigned __int16 *)(v2 + 4) == *(_DWORD *)&byte_5D4594[1568000] )
    {
      v15 = *(_WORD **)(a2 + 556);
      if ( v15 && !*v15 )
      {
        if ( !v15[2] )
          sub_4E5CC0(v2);
        return;
      }
    }
    else if ( !v14 )
    {
      return;
    }
LABEL_27:
    sub_4E5CC0(v2);
  }
}

//----- (004EB6A0) --------------------------------------------------------
void __cdecl sub_4EB6A0(int a1, int a2)
{
  int v2; // eax
  _DWORD *v3; // ebp
  _DWORD *v4; // ebx
  int v5; // eax
  int v6; // eax
  float v7; // [esp+0h] [ebp-24h]
  float v8; // [esp+4h] [ebp-20h]
  int v9; // [esp+4h] [ebp-20h]
  int v10; // [esp+8h] [ebp-1Ch]
  int v11; // [esp+Ch] [ebp-18h]
  int v12; // [esp+Ch] [ebp-18h]
  float v13; // [esp+10h] [ebp-14h]

  v2 = *(_DWORD *)&byte_5D4594[1568004];
  v3 = *(_DWORD **)(a1 + 508);
  v4 = (_DWORD *)v3[187];
  if ( !*(_DWORD *)&byte_5D4594[1568004] )
  {
    v13 = sub_419D40(&byte_587000[204872]);
    v2 = sub_419A70(v13);
    *(_DWORD *)&byte_5D4594[1568004] = v2;
  }
  if ( !a2 )
  {
    v10 = v2;
    v8 = *(float *)(a1 + 68) * 0.043478262;
    v9 = sub_419A70(v8);
    v7 = *(float *)(a1 + 64) * 0.043478262;
    v6 = sub_419A70(v7);
    sub_534BC0(v6, v9, v10, 11, a1);
LABEL_13:
    v4[33] = 0;
    sub_4FC300(v3, 3);
    sub_4E5CC0(a1);
    v4[34] = 0;
    return;
  }
  if ( !(*(_DWORD *)(a2 + 16) & 0x8020) && (_DWORD *)a2 != v3 )
  {
    v11 = v2;
    v5 = sub_4EC580(a1);
    if ( (*(int (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v5, a1, v11, 11)
      && (sub_5330C0((int)v3, a2) || sub_417DA0(1) && *(_BYTE *)(a2 + 8) & 6) )
    {
      v4[33] = a2;
      v4[36] = *(_DWORD *)(a2 + 56);
      v4[37] = *(_DWORD *)(a2 + 60);
      v4[38] = *(_DWORD *)&byte_5D4594[2598000];
      v12 = *(_DWORD *)(a1 + 508);
      *(_DWORD *)(a1 + 16) |= 0x40u;
      sub_4E7540(v12, a2);
      sub_501960(999, (int)v3, 0, 0);
      return;
    }
    sub_532E20(a2, a1);
    goto LABEL_13;
  }
}

//----- (004EB800) --------------------------------------------------------
void __cdecl sub_4EB800(int a1, int a2)
{
  int *v2; // esi
  int v3; // edi
  int v4; // eax
  int v5; // eax
  int *v6; // eax

  v2 = *(int **)(a1 + 700);
  if ( sub_40A5C0(2048) )
    v3 = *v2;
  else
    v3 = v2[1];
  if ( a2 )
  {
    v4 = *(_DWORD *)(a2 + 16);
    if ( (v4 & 0x8000) == 0 )
    {
      v5 = sub_4EC580(a1);
      (*(void (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v5, a1, v3, 3);
      sub_4E5CC0(a1);
    }
  }
  else
  {
    v6 = (int *)sub_537760();
    if ( v6 )
      sub_534BC0(*v6, v6[1], v3, 11, a1);
    sub_4E5CC0(a1);
  }
}

//----- (004EB890) --------------------------------------------------------
void __cdecl sub_4EB890(int *a1, int a2)
{
  _DWORD *v2; // eax

  if ( a2 && sub_4E9A30((int)a1, a2) )
  {
    v2 = sub_4E3810((CHAR *)&byte_587000[204888]);
    if ( v2 )
    {
      sub_4DAA50((int)v2, a1[127], *((float *)a1 + 14), *((float *)a1 + 15));
      sub_4E5CC0((int)a1);
      sub_4FF380(a2, 5, 90, 5);
      sub_4FF380(a2, 14, 90, 5);
      sub_501960(846, (int)a1, 0, 0);
    }
  }
}

//----- (004EB910) --------------------------------------------------------
void __cdecl sub_4EB910(int *a1, int a2)
{
  _DWORD *v2; // edi
  _DWORD *v3; // edi
  float v4; // [esp+0h] [ebp-14h]

  if ( a2 && sub_4E9A30((int)a1, a2) )
  {
    v2 = sub_4E3810((CHAR *)&byte_587000[204904]);
    if ( v2 )
    {
      sub_4DAA50((int)v2, a1[127], *((float *)a1 + 14), *((float *)a1 + 15));
      v3 = (_DWORD *)v2[187];
      v4 = sub_419D40(&byte_587000[204916]) * (double)*(int *)&byte_5D4594[2649704];
      *v3 = sub_419A70(v4);
      sub_501960(847, (int)a1, 0, 0);
      sub_4E5CC0((int)a1);
    }
  }
}

//----- (004EB9B0) --------------------------------------------------------
int __cdecl sub_4EB9B0(int a1, int a2)
{
  _DWORD *v2; // esi
  int result; // eax

  v2 = *(_DWORD **)(a1 + 748);
  result = a2;
  if ( a2 && (result = sub_4EC580(a2)) != 0 && *(_BYTE *)(result + 8) & 4 )
  {
    *v2 = result;
    v2[1] = *(unsigned __int8 *)(result + 52);
    v2[4] = *(_DWORD *)&byte_5D4594[2598000];
  }
  else
  {
    *v2 = 0;
    v2[1] = 0;
  }
  return result;
}

//----- (004EBA00) --------------------------------------------------------
_DWORD *__cdecl sub_4EBA00(int a1, int a2)
{
  char *v2; // ebp
  _DWORD *v3; // ebx
  _DWORD *result; // eax

  v2 = 0;
  v3 = *(_DWORD **)(a1 + 748);
  if ( a2 )
  {
    v2 = sub_418AB0(*(unsigned __int8 *)(a2 + 52));
    if ( *v3 == a2 && v2 && sub_418BC0((int)v2) > 1 )
    {
      if ( (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)&byte_5D4594[1568008]) > 0x2D )
      {
        sub_4DA2C0(a2, (const char *)&byte_587000[204936], 0);
        *(_DWORD *)&byte_5D4594[1568008] = *(_DWORD *)&byte_5D4594[2598000];
      }
      return sub_501960(928, a1, 0, 0);
    }
  }
  if ( *(_DWORD *)(a1 + 508) || !a2 || !(*(_BYTE *)(a2 + 8) & 4) )
    return sub_501960(928, a1, 0, 0);
  result = *(_DWORD **)(a2 + 516);
  if ( !result )
  {
LABEL_17:
    sub_4EC290(a2, a1);
    if ( sub_419130(a1 + 48) )
    {
      if ( !v2 )
      {
LABEL_25:
        sub_4EB9B0(a1, a2);
        sub_501960(927, a1, 0, 0);
        *(_DWORD *)(a1 + 16) |= 0x40u;
        return (_DWORD *)sub_4EA7A0(a2);
      }
      sub_4196D0(a1 + 48, (int)v2, *(_DWORD *)(a1 + 36), 0);
    }
    else
    {
      sub_4191D0(*(_BYTE *)(a2 + 52), a1 + 48, 1, *(_DWORD *)(a1 + 36), 0);
    }
    if ( v2 )
    {
      if ( v2[56] == 2 )
        sub_4E8290(4, *(_WORD *)(a2 + 36));
      else
        sub_4E8290(2, *(_WORD *)(a2 + 36));
    }
    goto LABEL_25;
  }
  while ( *((_WORD *)result + 2) != *(_WORD *)(a1 + 4) )
  {
    result = (_DWORD *)result[128];
    if ( !result )
      goto LABEL_17;
  }
  return result;
}

//----- (004EBB50) --------------------------------------------------------
int __cdecl sub_4EBB50(int a1, int a2)
{
  int result; // eax

  result = a2;
  if ( a2 && !(*(_DWORD *)(a2 + 16) & 0x8020) )
  {
    if ( *(_BYTE *)(a2 + 8) & 4 )
      result = sub_4F3400(a2, a1, 1);
  }
  return result;
}

//----- (004EBB80) --------------------------------------------------------
__int16 __cdecl sub_4EBB80(int a1, int a2)
{
  int v2; // esi
  int v3; // eax
  int *v4; // edi
  char *v5; // esi
  char *v6; // ebp
  int v7; // edi
  int v8; // edi
  int v9; // esi
  int i; // eax
  int v11; // edi
  int j; // esi
  int v14; // [esp+10h] [ebp-4h]

  v2 = sub_4E3AA0((CHAR *)&byte_587000[204964]);
  v3 = sub_4E3AA0((CHAR *)&byte_587000[204976]);
  v14 = v3;
  if ( a2 )
  {
    LOWORD(v3) = *(_WORD *)(a2 + 4);
    if ( (unsigned __int16)v3 == v2 )
    {
      v4 = *(int **)(a2 + 748);
      v5 = 0;
      v6 = 0;
      if ( sub_419130(a1 + 48) )
        v5 = sub_418AB0(*(unsigned __int8 *)(a1 + 52));
      if ( *v4 && sub_419130(*v4 + 48) )
        v6 = sub_418AB0(*(unsigned __int8 *)(*v4 + 52));
      if ( v5 == v6 )
      {
        sub_4D8E90(*v4, 1);
        sub_4D8EF0(*v4);
      }
      if ( v5 )
      {
        sub_419090((int)v5, *((_DWORD *)v5 + 13) + 1);
        if ( *(_DWORD *)&byte_5D4594[2650652] )
        {
          v7 = *v4;
          if ( v7 )
          {
            v8 = *(_DWORD *)(v7 + 748);
            if ( v8 )
              sub_425CA0(*(_DWORD *)(v8 + 276), 0);
          }
        }
        sub_501960(929, a1, 0, 0);
        sub_522FF0(154, (float2 *)(a2 + 56));
      }
      v9 = 0;
      for ( i = sub_4DA790(); i; i = sub_4DA7A0(i) )
      {
        if ( *(unsigned __int16 *)(i + 4) == v14 )
          ++v9;
      }
      v11 = sub_415FA0(0, v9 - 1);
      v3 = sub_4DA790();
      for ( j = v3; v3; j = v3 )
      {
        LOWORD(v3) = v14;
        if ( *(unsigned __int16 *)(j + 4) == v14 )
        {
          if ( !v11 )
          {
            if ( j )
            {
              sub_4EC300(a2);
              sub_4E7010(a2, (float2 *)(j + 56));
              LOWORD(v3) = sub_522FF0(129, (float2 *)(a2 + 56));
              *(_DWORD *)(a2 + 80) = 0;
              *(_DWORD *)(a2 + 84) = 0;
              *(_DWORD *)(a2 + 88) = 0;
              *(_DWORD *)(a2 + 100) = 0;
            }
            return v3;
          }
          --v11;
        }
        v3 = sub_4DA7A0(j);
      }
    }
  }
  return v3;
}

//----- (004EBD40) --------------------------------------------------------
void __cdecl sub_4EBD40(int a1, int a2, int a3)
{
  int v3; // ebx
  int *v4; // esi
  unsigned __int16 v5; // ax
  int v6; // esi
  int v7; // edi
  int v8; // esi
  int v9; // eax
  int v10; // eax
  int v11; // [esp+14h] [ebp+4h]

  if ( a2 )
  {
    if ( *(_BYTE *)(a2 + 8) & 2 && *(_BYTE *)(a2 + 12) & 0x40 )
    {
      v3 = a1;
      v4 = *(int **)(a1 + 700);
      v5 = sub_4EE780(a2);
      v6 = *v4;
      v11 = v6;
      v7 = v5;
      v8 = *(_DWORD *)(v6 + 72);
      if ( v8 <= v5 )
      {
        if ( v8 )
        {
          v10 = sub_4EC580(v3);
          (*(void (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v10, v3, v8, 6);
          sub_4E5CC0(v3);
          *(_DWORD *)(v11 + 72) -= v8;
        }
        else
        {
          sub_4E5CC0(v3);
        }
      }
      else
      {
        v9 = sub_4EC580(v3);
        (*(void (__cdecl **)(int, int, int, int, int))(a2 + 716))(a2, v9, v3, v7, 6);
        *(_DWORD *)(v11 + 72) = v8 - v7;
      }
    }
  }
  else if ( !a3 )
  {
    sub_4E5CC0(a1);
  }
}

//----- (004EBE10) --------------------------------------------------------
void __cdecl sub_4EBE10(int a1, int a2)
{
  if ( a2 )
  {
    if ( *(_BYTE *)(a2 + 8) & 4 )
      sub_502490((int *)(*(_DWORD *)(a1 + 748) + 72), a2, a1);
  }
}

//----- (004EBE40) --------------------------------------------------------
void __cdecl sub_4EBE40(int a1, int a2)
{
  float2 *v2; // edi
  int v3; // esi
  int v4; // eax
  int v5; // ecx
  int v6; // esi
  _DWORD *v7; // [esp+Ch] [ebp+4h]

  v2 = (float2 *)a1;
  v7 = *(_DWORD **)(a1 + 700);
  if ( sub_40A5C0(4096) && a2 && *(_BYTE *)(a2 + 8) & 4 )
  {
    sub_4D7520(0);
    v3 = 1;
    v4 = sub_4DA7C0();
    if ( !v4 )
      goto LABEL_17;
    do
    {
      v5 = *(_DWORD *)(v4 + 748);
      if ( *(_DWORD *)(*(_DWORD *)(v5 + 276) + 4792) == 1 && *(_DWORD *)(v5 + 308) )
        v3 = 0;
      v4 = sub_4DA7F0(v4);
    }
    while ( v4 );
    if ( v3 == 1 )
LABEL_17:
      sub_4D71E0(*(int *)&byte_5D4594[2598000]);
    v6 = *(_DWORD *)(a2 + 748);
    if ( *(float2 **)(v6 + 308) != v2
      || (unsigned int)(*(_DWORD *)&byte_5D4594[2598000] - *v7) > *(int *)&byte_5D4594[2649704] )
    {
      sub_501960(1005, (int)v2, 0, 0);
      sub_522FF0(130, v2 + 7);
      sub_4DA2C0(a2, (const char *)&byte_587000[205040], 0);
    }
    *(_DWORD *)(v6 + 308) = v2;
    *v7 = *(_DWORD *)&byte_5D4594[2598000];
  }
}

//----- (004EBF40) --------------------------------------------------------
void __cdecl sub_4EBF40(int a1, int a2)
{
  int v2; // esi
  int v3; // ebp
  int v4; // ebx
  int v5; // ecx
  _DWORD *v6; // eax
  int v7; // edi
  int v8; // eax
  int v9; // edx
  int v10; // eax
  _DWORD *v11; // ecx
  _DWORD *v12; // eax
  int v13; // edx
  int v14; // eax
  _DWORD *v15; // ecx
  unsigned __int8 v16; // al
  float v17; // [esp+0h] [ebp-20h]
  int v18; // [esp+14h] [ebp-Ch]
  int v19; // [esp+18h] [ebp-8h]

  v2 = a2;
  v3 = *(_DWORD *)(a1 + 692);
  v19 = 0;
  if ( a2 && *(_BYTE *)(a2 + 8) & 4 )
  {
    v4 = *(_DWORD *)(a2 + 748);
    v5 = 0;
    v6 = (_DWORD *)(*(_DWORD *)(v4 + 276) + 4796);
    while ( *v6 != a1 )
    {
      ++v5;
      ++v6;
      if ( v5 >= 5 )
        goto LABEL_8;
    }
    v19 = 1;
LABEL_8:
    v18 = 0;
    v7 = v3 + 50;
    do
    {
      if ( *(_DWORD *)&byte_5D4594[2598000] - *(_DWORD *)(v7 + 26) > (unsigned int)(240
                                                                                  * *(_DWORD *)&byte_5D4594[2649704]) )
      {
        nox_wcscpy((wchar_t *)(v7 - 50), (const wchar_t *)&byte_5D4594[1568012]);
        *(_BYTE *)(v7 + 1) = byte_5D4594[1568016];
        *(_BYTE *)v7 = 0;
        *(_DWORD *)(v7 + 26) = 0;
      }
      v8 = *(_DWORD *)(v4 + 276);
      if ( *(_BYTE *)v7 == *(_BYTE *)(v8 + 2251) && !nox_wcscmp((const wchar_t *)(v7 - 50), (const wchar_t *)(v8 + 2185)) )
      {
        if ( !strcmp((const char *)(v7 + 1), (const char *)(*(_DWORD *)(v4 + 276) + 2112)) )
        {
          v9 = *(_DWORD *)(v4 + 276);
          v10 = 0;
          v11 = (_DWORD *)(v9 + 4796);
          while ( *v11 )
          {
            ++v10;
            ++v11;
            if ( v10 >= 5 )
            {
              v2 = a2;
              goto LABEL_17;
            }
          }
          v2 = a2;
          *(_DWORD *)(v9 + 4 * v10 + 4796) = a1;
LABEL_17:
          if ( (unsigned __int64)(sub_416BB0() - *(_QWORD *)&byte_5D4594[1567940]) <= 0x5DC )
            return;
          sub_4DA2C0(v2, (const char *)&byte_587000[205068], 0);
LABEL_19:
          sub_501960(925, v2, 0, 0);
          *(_QWORD *)&byte_5D4594[1567940] = sub_416BB0();
          return;
        }
        v2 = a2;
      }
      v7 += 80;
      ++v18;
    }
    while ( v18 < 64 );
    if ( v19 == 1 )
      goto LABEL_17;
    v17 = sub_419D40(&byte_587000[205104]);
    if ( *(_DWORD *)(v4 + 320) < sub_419A70(v17) )
    {
      v12 = sub_4E3810((CHAR *)&byte_587000[205156]);
      if ( v12 )
        ((void (__cdecl *)(int, _DWORD *, int, _DWORD))v12[177])(v2, v12, 1, 0);
      *(_DWORD *)(a1 + 136) = *(_DWORD *)&byte_5D4594[2598000];
      sub_501960(1004, a1, 0, 0);
      sub_522FF0(130, (float2 *)(a1 + 56));
      sub_4DA2C0(v2, (const char *)&byte_587000[205172], 0);
      v13 = *(_DWORD *)(v4 + 276);
      v14 = 0;
      v15 = (_DWORD *)(v13 + 4796);
      while ( *v15 )
      {
        ++v14;
        ++v15;
        if ( v14 >= 5 )
          goto LABEL_35;
      }
      *(_DWORD *)(v13 + 4 * v14 + 4796) = a1;
LABEL_35:
      nox_wcscpy((wchar_t *)(v3 + 80 * *(unsigned __int8 *)(v3 + 5120)), (const wchar_t *)(*(_DWORD *)(v4 + 276) + 2185));
      *(_BYTE *)(80 * *(unsigned __int8 *)(v3 + 5120) + v3 + 50) = *(_BYTE *)(*(_DWORD *)(v4 + 276) + 2251);
      strcpy((char *)(80 * *(unsigned __int8 *)(v3 + 5120) + v3 + 51), (const char *)(*(_DWORD *)(v4 + 276) + 2112));
      *(_DWORD *)(80 * *(unsigned __int8 *)(v3 + 5120) + v3 + 76) = *(_DWORD *)&byte_5D4594[2598000];
      v16 = *(_BYTE *)(v3 + 5120) + 1;
      *(_BYTE *)(v3 + 5120) = v16;
      if ( v16 >= 0x40u )
        *(_BYTE *)(v3 + 5120) = 0;
    }
    else if ( (unsigned __int64)(sub_416BB0() - *(_QWORD *)&byte_5D4594[1567940]) > 0x5DC )
    {
      sub_4DA2C0(v2, (const char *)&byte_587000[205120], 0);
      goto LABEL_19;
    }
  }
}

//----- (004EC290) --------------------------------------------------------
void __cdecl sub_4EC290(int a1, int a2)
{
  int v2; // eax

  if ( a2 )
  {
    sub_4EC300(a2);
    v2 = a1;
    if ( a1 )
    {
      while ( *(_BYTE *)(v2 + 16) & 0x20 )
      {
        v2 = *(_DWORD *)(v2 + 508);
        if ( !v2 )
          goto LABEL_8;
      }
      if ( v2 )
      {
        *(_DWORD *)(a2 + 512) = *(_DWORD *)(v2 + 516);
        *(_DWORD *)(v2 + 516) = a2;
      }
    }
LABEL_8:
    *(_DWORD *)(a2 + 508) = v2;
    if ( *(_BYTE *)(a2 + 8) & 2 )
      sub_5346F0(a2);
    if ( *(_BYTE *)(a2 + 8) & 6 )
      sub_4E8020(a2);
  }
}

//----- (004EC300) --------------------------------------------------------
void __cdecl sub_4EC300(int a1)
{
  int v1; // eax
  int v2; // edx
  int v3; // edi
  int v4; // edx
  int v5; // ecx
  int v6; // eax
  char v7; // al

  if ( a1 )
  {
    v1 = *(_DWORD *)(a1 + 508);
    if ( v1 )
    {
      if ( *(_BYTE *)(v1 + 8) & 4 && sub_500CC0(v1, a1) )
      {
        v2 = *(_DWORD *)(a1 + 12);
        LOBYTE(v2) = v2 & 0x7F;
        v3 = *(_DWORD *)(*(_DWORD *)(a1 + 508) + 748);
        *(_DWORD *)(a1 + 12) = v2;
        sub_4D9200(*(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064), a1);
        sub_417300(*(unsigned __int8 *)(*(_DWORD *)(v3 + 276) + 2064), a1, 1);
      }
      v4 = *(_DWORD *)(a1 + 508);
      v5 = 0;
      v6 = *(_DWORD *)(v4 + 516);
      if ( !v6 )
        goto LABEL_18;
      do
      {
        if ( v6 == a1 )
          break;
        v5 = v6;
        v6 = *(_DWORD *)(v6 + 512);
      }
      while ( v6 );
      if ( v5 )
        *(_DWORD *)(v5 + 512) = *(_DWORD *)(a1 + 512);
      else
LABEL_18:
        *(_DWORD *)(v4 + 516) = *(_DWORD *)(a1 + 512);
      v7 = *(_BYTE *)(a1 + 8);
      *(_DWORD *)(a1 + 508) = 0;
      if ( v7 & 2 )
        sub_5346F0(a1);
      if ( *(_BYTE *)(a1 + 8) & 6 )
        sub_4E8020(a1);
    }
  }
}

//----- (004EC3E0) --------------------------------------------------------
int __cdecl sub_4EC3E0(int a1)
{
  int result; // eax

  if ( !a1 )
    return 0;
  result = *(_DWORD *)(a1 + 516);
  if ( !result )
    return 0;
  while ( !(*(_BYTE *)(result + 8) & 2) || !(*(_BYTE *)(*(_DWORD *)(result + 748) + 1440) & 0x80) )
  {
    result = *(_DWORD *)(result + 512);
    if ( !result )
      return 0;
  }
  return result;
}

//----- (004EC420) --------------------------------------------------------
int __cdecl sub_4EC420(int a1)
{
  int result; // eax

  if ( !a1 )
    return 0;
  if ( !*(_DWORD *)(a1 + 508) )
    return 0;
  result = *(_DWORD *)(a1 + 512);
  if ( !result )
    return 0;
  while ( !(*(_BYTE *)(result + 8) & 2) || !(*(_BYTE *)(*(_DWORD *)(result + 748) + 1440) & 0x80) )
  {
    result = *(_DWORD *)(result + 512);
    if ( !result )
      return 0;
  }
  return result;
}

//----- (004EC470) --------------------------------------------------------
void __cdecl sub_4EC470(int a1)
{
  int v1; // eax
  int v2; // ecx

  if ( a1 )
  {
    v1 = *(_DWORD *)(a1 + 516);
    if ( v1 )
    {
      do
      {
        v2 = *(_DWORD *)(v1 + 512);
        *(_DWORD *)(v1 + 508) = 0;
        *(_DWORD *)(v1 + 512) = 0;
        v1 = v2;
      }
      while ( v2 );
    }
    *(_DWORD *)(a1 + 516) = 0;
  }
}

//----- (004EC4B0) --------------------------------------------------------
void __cdecl sub_4EC4B0(int a1)
{
  int v1; // eax
  int v2; // esi

  if ( a1 )
  {
    v1 = *(_DWORD *)(a1 + 516);
    if ( v1 )
    {
      do
      {
        v2 = *(_DWORD *)(v1 + 512);
        sub_4EC290(*(_DWORD *)(a1 + 508), v1);
        v1 = v2;
      }
      while ( v2 );
    }
  }
}

//----- (004EC4F0) --------------------------------------------------------
int __cdecl sub_4EC4F0(int a1, int a2)
{
  int v2; // eax

  v2 = a1;
  if ( !a1 || !a2 )
    return 0;
  while ( v2 != a2 )
  {
    v2 = *(_DWORD *)(v2 + 508);
    if ( !v2 )
      return 0;
  }
  return 1;
}

//----- (004EC520) --------------------------------------------------------
int __cdecl sub_4EC520(int a1, int a2)
{
  int v2; // edi
  int v3; // esi

  v2 = a1;
  if ( a1 && a2 )
  {
    while ( 2 )
    {
      v3 = a2;
      do
      {
        if ( sub_419150(v2 + 48, v3 + 48) || v2 == v3 )
          return 1;
        v3 = *(_DWORD *)(v3 + 508);
      }
      while ( v3 );
      v2 = *(_DWORD *)(v2 + 508);
      if ( v2 )
        continue;
      break;
    }
  }
  return 0;
}

//----- (004EC580) --------------------------------------------------------
int __cdecl sub_4EC580(int a1)
{
  int result; // eax
  int i; // ecx

  result = a1;
  if ( a1 )
  {
    for ( i = *(_DWORD *)(a1 + 508); i; i = *(_DWORD *)(i + 508) )
    {
      if ( *(_BYTE *)(result + 8) & 4 )
        break;
      result = i;
    }
  }
  return result;
}

//----- (004EC5B0) --------------------------------------------------------
void sub_4EC5B0()
{
  *(_DWORD *)&byte_5D4594[1568024] = 0;
  sub_4144D0(*(_DWORD **)&byte_5D4594[1568020]);
  *(_DWORD *)&byte_587000[205200] = 1;
}

//----- (004EC5E0) --------------------------------------------------------
_DWORD *__cdecl sub_4EC5E0(int a1)
{
  _DWORD *result; // eax
  _DWORD *v2; // ebx
  unsigned __int16 v3; // cx
  _BYTE *v4; // ebp

  result = *(_DWORD **)&byte_587000[205200];
  if ( *(_DWORD *)&byte_587000[205200] )
  {
    result = sub_4142F0(*(_DWORD **)&byte_5D4594[1568020]);
    v2 = result;
    if ( result )
    {
      v3 = *(_WORD *)(a1 + 4);
      result[1] = a1;
      *result = v3;
      result[2] = *(_DWORD *)(a1 + 56);
      result[3] = *(_DWORD *)(a1 + 60);
      *((_WORD *)result + 8) = *(_WORD *)(a1 + 124);
      if ( *(_DWORD *)(a1 + 8) & 0x13001000 )
        qmemcpy(result + 7, *(const void **)(a1 + 692), 0x14u);
      if ( *(_DWORD *)(a1 + 8) & 0x1000000 && sub_415820(a1) & 0x82 )
      {
        v4 = *(_BYTE **)(a1 + 736);
        *((_BYTE *)v2 + 48) = v4[1];
        *((_BYTE *)v2 + 49) = *v4;
      }
      v2[14] = 0;
      v2[13] = *(_DWORD *)&byte_5D4594[1568024];
      result = *(_DWORD **)&byte_5D4594[1568024];
      if ( *(_DWORD *)&byte_5D4594[1568024] )
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1568024] + 56) = v2;
      *(_DWORD *)&byte_5D4594[1568024] = v2;
    }
  }
  return result;
}

//----- (004EC6A0) --------------------------------------------------------
void __cdecl sub_4EC6A0(int a1)
{
  int v1; // eax
  _QWORD *v2; // ecx
  int v3; // eax
  int v4; // ecx
  int v5; // ecx

  v1 = *(_DWORD *)&byte_5D4594[1568024];
  if ( *(_DWORD *)(*(_DWORD *)&byte_5D4594[1568024] + 4) == a1 )
  {
    v2 = *(_QWORD **)&byte_5D4594[1568024];
    *(_DWORD *)&byte_5D4594[1568024] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1568024] + 52);
    v3 = *(_DWORD *)(v1 + 52);
    if ( v3 )
      *(_DWORD *)(v3 + 56) = 0;
    sub_414330(*(unsigned int **)&byte_5D4594[1568020], v2);
  }
  else if ( *(_DWORD *)&byte_5D4594[1568024] )
  {
    while ( *(_DWORD *)(v1 + 4) != a1 )
    {
      v1 = *(_DWORD *)(v1 + 52);
      if ( !v1 )
        return;
    }
    v4 = *(_DWORD *)(v1 + 56);
    if ( v4 )
      *(_DWORD *)(v4 + 52) = *(_DWORD *)(v1 + 52);
    v5 = *(_DWORD *)(v1 + 52);
    if ( v5 )
      *(_DWORD *)(v5 + 56) = *(_DWORD *)(v1 + 56);
    sub_414330(*(unsigned int **)&byte_5D4594[1568020], (_QWORD *)v1);
  }
}

//----- (004EC720) --------------------------------------------------------
void sub_4EC720()
{
  int v0; // esi
  int v1; // eax
  int v2; // edi
  int v3; // ecx
  int v4; // eax
  _DWORD *v5; // eax
  int v6; // edi
  __int16 v7; // ax
  _BYTE *v8; // eax
  int v9; // eax
  int v10; // eax
  double v11; // st7
  double v12; // st6
  int v13; // eax
  int v14; // ecx
  _BYTE *v15; // eax
  int v16; // eax
  int v17; // ecx
  int v18; // eax

  if ( !*(_DWORD *)&byte_5D4594[1568028] )
    *(_DWORD *)&byte_5D4594[1568028] = sub_4E3AA0((CHAR *)&byte_587000[205204]);
  if ( !sub_40A5C0(4608) )
  {
    v0 = *(_DWORD *)&byte_5D4594[1568024];
    *(_DWORD *)&byte_587000[205200] = 0;
    if ( *(_DWORD *)&byte_5D4594[1568024] )
    {
      while ( 1 )
      {
        if ( *(_DWORD *)(v0 + 24) )
        {
LABEL_18:
          if ( *(_DWORD *)&byte_5D4594[2598000] >= *(int *)(v0 + 20) && sub_4E3BA0(*(_DWORD *)v0) )
          {
            v5 = sub_4E3450(*(_DWORD *)v0);
            v6 = (int)v5;
            if ( v5 )
            {
              sub_4DAA50((int)v5, 0, *(float *)(v0 + 8), *(float *)(v0 + 12));
              sub_522FF0(129, (float2 *)(v0 + 8));
              v7 = *(_WORD *)(v0 + 16);
              *(_WORD *)(v6 + 124) = v7;
              *(_WORD *)(v6 + 126) = v7;
              if ( *(_DWORD *)(v6 + 8) & 0x13001000 )
                sub_4E4990(v6, (int *)(v0 + 28));
              if ( *(_DWORD *)(v6 + 8) & 0x1000000 && sub_415820(v6) & 0x82 )
              {
                v8 = *(_BYTE **)(v6 + 736);
                v8[1] = *(_BYTE *)(v0 + 48);
                *v8 = *(_BYTE *)(v0 + 49);
              }
              sub_501960(283, v6, 0, 0);
            }
            v9 = *(_DWORD *)(v0 + 4);
            if ( v9 )
            {
              if ( *(_BYTE *)(v9 + 8) & 2 )
                sub_4E5CC0(*(_DWORD *)(v0 + 4));
            }
            *(_DWORD *)(v0 + 24) = 0;
            *(_DWORD *)(v0 + 4) = v6;
          }
          goto LABEL_31;
        }
        v1 = *(_DWORD *)(v0 + 4);
        v2 = 0;
        if ( !v1 )
          goto LABEL_16;
        v3 = *(_DWORD *)(v1 + 8);
        if ( v3 & 2 )
          break;
        if ( *(_BYTE *)(v1 + 16) & 0x20 )
        {
          if ( sub_4E3BA0(*(unsigned __int16 *)(v1 + 4)) )
            v2 = 1;
          *(_DWORD *)(v0 + 4) = 0;
          if ( v2 )
            goto LABEL_16;
        }
        else if ( v3 & 0x3001000 || *(unsigned __int16 *)(v1 + 4) == *(_DWORD *)&byte_5D4594[1568028] )
        {
          if ( *(_DWORD *)(v1 + 492) || !sub_4E3BA0(*(unsigned __int16 *)(v1 + 4)) )
          {
            v18 = *(_DWORD *)(v0 + 4);
            if ( *(_DWORD *)(v18 + 492)
              && sub_4E3BA0(*(unsigned __int16 *)(v18 + 4))
              && *(unsigned __int16 *)(*(_DWORD *)(v0 + 4) + 4) != *(_DWORD *)&byte_5D4594[1568028]
              && sub_409F40(2) )
            {
              goto LABEL_16;
            }
          }
          else
          {
            v10 = *(_DWORD *)(v0 + 4);
            if ( *(_DWORD *)&byte_5D4594[2598000] > (unsigned int)(5 * *(_DWORD *)&byte_5D4594[2649704]
                                                                 + *(_DWORD *)(v10 + 128)) )
            {
              v11 = *(float *)(v0 + 8) - *(float *)(v10 + 56);
              v12 = *(float *)(v0 + 12) - *(float *)(v10 + 60);
              if ( v12 * v12 + v11 * v11 > 2500.0 )
              {
                sub_522FF0(129, (float2 *)(v10 + 56));
                sub_501A30(283, (float2 *)(*(_DWORD *)(v0 + 4) + 56), 0, 0);
                sub_4E7010(*(_DWORD *)(v0 + 4), (float2 *)(v0 + 8));
                v13 = *(_DWORD *)(v0 + 4);
                v14 = *(_DWORD *)(v13 + 8);
                if ( v14 & 0x1000 )
                {
                  sub_53C520(v13, 100);
                }
                else if ( v14 & 0x1000000 && sub_415820(*(_DWORD *)(v0 + 4)) & 0x82 )
                {
                  v15 = *(_BYTE **)(*(_DWORD *)(v0 + 4) + 736);
                  v15[1] = *(_BYTE *)(v0 + 48);
                  *v15 = *(_BYTE *)(v0 + 49);
                }
                v16 = *(_DWORD *)(v0 + 4);
                v17 = *(_DWORD *)(v16 + 556);
                if ( v17 )
                  sub_4E4560(v16, *(_WORD *)(v17 + 4));
                sub_522FF0(129, (float2 *)(v0 + 8));
                sub_501A30(283, (float2 *)(v0 + 8), 0, 0);
              }
            }
          }
        }
        else if ( *(_DWORD *)(v1 + 492) )
        {
          goto LABEL_16;
        }
LABEL_17:
        if ( *(_DWORD *)(v0 + 24) )
          goto LABEL_18;
LABEL_31:
        v0 = *(_DWORD *)(v0 + 52);
        if ( !v0 )
          return;
      }
      v4 = *(_DWORD *)(v1 + 16);
      if ( v4 & 0x20 )
      {
        *(_DWORD *)(v0 + 4) = 0;
      }
      else if ( (v4 & 0x8000) == 0 )
      {
        goto LABEL_17;
      }
LABEL_16:
      *(_DWORD *)(v0 + 24) = 1;
      *(_DWORD *)(v0 + 20) = *(_DWORD *)&byte_5D4594[2598000] + 30 * *(_DWORD *)&byte_5D4594[2649704];
      goto LABEL_17;
    }
  }
}

//----- (004ECA60) --------------------------------------------------------
BOOL sub_4ECA60()
{
  *(_DWORD *)&byte_5D4594[1568020] = sub_413FE0((const char *)&byte_587000[205212], 60, 384);
  return *(_DWORD *)&byte_5D4594[1568020] != 0;
}

//----- (004ECA90) --------------------------------------------------------
void sub_4ECA90()
{
  sub_414100(*(LPVOID *)&byte_5D4594[1568020]);
}

//----- (004ECAA0) --------------------------------------------------------
char *__cdecl sub_4ECAA0(char a1)
{
  char *result; // eax

  if ( a1 <= 16 )
    result = *(char **)&byte_587000[4 * a1 + 205304];
  else
    result = *(char **)&byte_587000[205304];
  return result;
}

//----- (004ECAC0) --------------------------------------------------------
unsigned __int8 __cdecl sub_4ECAC0(const char *a1)
{
  unsigned __int8 result; // al
  unsigned __int8 v2; // [esp+Ch] [ebp-4h]

  result = 0;
  v2 = 0;
  while ( strcmp(a1, *(const char **)&byte_587000[4 * v2 + 205304]) )
  {
    v2 = ++result;
    if ( result > 0x10u )
      return 0;
  }
  return result;
}

//----- (004ECB20) --------------------------------------------------------
char *__cdecl sub_4ECB20(char *a1)
{
  int v2; // ecx
  unsigned __int8 *i; // eax
  int v4; // esi

  if ( !a1 )
    return (char *)&byte_587000[205676];
  v2 = 0;
  if ( !*(_DWORD *)&byte_587000[205224] )
    return 0;
  for ( i = &byte_587000[205224]; *((char **)i + 1) != a1; i += 8 )
  {
    v4 = *((_DWORD *)i + 2);
    ++v2;
    if ( !v4 )
      return 0;
  }
  return *(char **)&byte_587000[8 * v2 + 205224];
}

//----- (004ECB60) --------------------------------------------------------
int __cdecl sub_4ECB60(const char *a1)
{
  const char *v1; // eax
  int v2; // ebp
  unsigned __int8 *v3; // edi

  v1 = *(const char **)&byte_587000[205224];
  v2 = 0;
  if ( !*(_DWORD *)&byte_587000[205224] )
    return 0;
  v3 = &byte_587000[205224];
  while ( strcmp(v1, a1) )
  {
    v1 = (const char *)*((_DWORD *)v3 + 2);
    v3 += 8;
    ++v2;
    if ( !v1 )
      return 0;
  }
  return *(_DWORD *)&byte_587000[8 * v2 + 205228];
}

//----- (004ECBD0) --------------------------------------------------------
int __cdecl sub_4ECBD0(int a1)
{
  int result; // eax

  if ( *(_DWORD *)(a1 + 8) & 0x10000000 )
    result = sub_4ECC00(*(const char ***)(*(_DWORD *)(a1 + 692) + 4));
  else
    result = 0;
  return result;
}

//----- (004ECC00) --------------------------------------------------------
int __cdecl sub_4ECC00(const char **a1)
{
  const char *v1; // esi
  int v2; // edx
  unsigned __int8 *v3; // edi

  if ( !a1 )
    return 0;
  v1 = *(const char **)&byte_587000[205224];
  v2 = 0;
  if ( !*(_DWORD *)&byte_587000[205224] )
    return 0;
  v3 = &byte_587000[205224];
  while ( strcmp(*a1, v1) )
  {
    v1 = (const char *)*((_DWORD *)v3 + 2);
    v3 += 8;
    ++v2;
    if ( !v1 )
      return 0;
  }
  return *(_DWORD *)&byte_587000[8 * v2 + 205228];
}

//----- (004ECC70) --------------------------------------------------------
int __cdecl sub_4ECC70(int a1)
{
  int v1; // eax
  int result; // eax

  v1 = *(_DWORD *)&byte_5D4594[1568032];
  if ( !*(_DWORD *)&byte_5D4594[1568032] )
  {
    v1 = sub_4E3AA0((CHAR *)&byte_587000[205684]);
    *(_DWORD *)&byte_5D4594[1568032] = v1;
  }
  if ( *(unsigned __int16 *)(a1 + 4) == v1 )
    result = sub_4ECC00(*(const char ***)(*(_DWORD *)(a1 + 692) + 4));
  else
    result = 0;
  return result;
}

//----- (004ECCB0) --------------------------------------------------------
int __cdecl sub_4ECCB0(int a1)
{
  int result; // eax
  int v2; // edi
  int v3; // esi
  char *v4; // eax
  int v5; // ecx

  result = sub_4ECD90(a1);
  if ( !result )
  {
    v2 = sub_4DA790();
    if ( v2 )
    {
      while ( 1 )
      {
        if ( !(*(_BYTE *)(v2 + 16) & 0x20) && *(_DWORD *)(v2 + 36) == a1 )
        {
          sub_4ECEA0(v2);
          return v2;
        }
        v3 = *(_DWORD *)(v2 + 504);
        if ( v3 )
          break;
LABEL_9:
        v2 = sub_4DA7A0(v2);
        if ( !v2 )
          goto LABEL_10;
      }
      while ( *(_BYTE *)(v3 + 16) & 0x20 || *(_DWORD *)(v3 + 36) != a1 )
      {
        v3 = *(_DWORD *)(v3 + 496);
        if ( !v3 )
          goto LABEL_9;
      }
      goto LABEL_16;
    }
LABEL_10:
    v3 = sub_4DA870();
    if ( v3 )
    {
      while ( *(_BYTE *)(v3 + 16) & 0x20 || *(_DWORD *)(v3 + 36) != a1 )
      {
        v3 = sub_4DA880(v3);
        if ( !v3 )
          goto LABEL_17;
      }
LABEL_16:
      sub_4ECEA0(v3);
      return v3;
    }
LABEL_17:
    v4 = sub_416EA0();
    if ( v4 )
    {
      while ( 1 )
      {
        v5 = *((_DWORD *)v4 + 514);
        if ( v5 )
        {
          if ( !(*(_BYTE *)(v5 + 16) & 0x20) && *(_DWORD *)(v5 + 36) == a1 )
            break;
        }
        v4 = sub_416EE0((int)v4);
        if ( !v4 )
          goto LABEL_22;
      }
      result = *((_DWORD *)v4 + 514);
    }
    else
    {
LABEL_22:
      result = 0;
    }
  }
  return result;
}

//----- (004ECD90) --------------------------------------------------------
int __cdecl sub_4ECD90(int a1)
{
  _DWORD *v1; // esi

  if ( *(_DWORD *)&byte_587000[205696] )
    sub_4ECE50();
  v1 = *(_DWORD **)&byte_5D4594[1568236];
  if ( !*(_DWORD *)&byte_5D4594[1568236] )
    return 0;
  while ( *(_DWORD *)(*v1 + 36) != a1 )
  {
    v1 = (_DWORD *)v1[2];
    if ( !v1 )
      return 0;
  }
  sub_4ECE10(&byte_5D4594[1568236], (int)v1);
  sub_4ECDE0(&byte_5D4594[1568236], (int)v1);
  return *v1;
}

//----- (004ECDE0) --------------------------------------------------------
int __cdecl sub_4ECDE0(_DWORD *a1, int a2)
{
  int result; // eax

  result = a2;
  *(_DWORD *)(a2 + 4) = 0;
  *(_DWORD *)(a2 + 8) = *a1;
  if ( *a1 )
    *(_DWORD *)(*a1 + 4) = a2;
  else
    a1[1] = a2;
  *a1 = a2;
  return result;
}

//----- (004ECE10) --------------------------------------------------------
int __cdecl sub_4ECE10(_DWORD *a1, int a2)
{
  int result; // eax
  int v3; // ecx
  int v4; // ecx

  result = a2;
  v3 = *(_DWORD *)(a2 + 8);
  if ( v3 )
    *(_DWORD *)(v3 + 4) = *(_DWORD *)(a2 + 4);
  else
    a1[1] = *(_DWORD *)(a2 + 4);
  v4 = *(_DWORD *)(a2 + 4);
  if ( v4 )
  {
    *(_DWORD *)(v4 + 8) = *(_DWORD *)(a2 + 8);
  }
  else
  {
    result = *(_DWORD *)(a2 + 8);
    *a1 = result;
  }
  return result;
}

//----- (004ECE50) --------------------------------------------------------
int sub_4ECE50()
{
  unsigned __int8 *v0; // esi
  int result; // eax

  v0 = &byte_5D4594[1568044];
  *(_DWORD *)&byte_5D4594[1568236] = 0;
  *(_DWORD *)&byte_5D4594[1568240] = 0;
  *(_DWORD *)&byte_5D4594[1568036] = 0;
  *(_DWORD *)&byte_5D4594[1568040] = 0;
  do
  {
    result = sub_4ECDE0(&byte_5D4594[1568036], (int)v0);
    v0 += 12;
  }
  while ( (int)v0 < (int)&byte_5D4594[1568236] );
  *(_DWORD *)&byte_587000[205696] = 0;
  return result;
}

//----- (004ECEA0) --------------------------------------------------------
int __cdecl sub_4ECEA0(int a1)
{
  int *v1; // eax
  int v2; // esi
  int result; // eax
  int v4; // [esp-8h] [ebp-8h]

  v1 = (int *)sub_4ECEF0();
  if ( v1 )
  {
    *v1 = a1;
    result = sub_4ECDE0(&byte_5D4594[1568236], (int)v1);
  }
  else
  {
    v2 = *(_DWORD *)&byte_5D4594[1568240];
    v4 = *(_DWORD *)&byte_5D4594[1568240];
    **(_DWORD **)&byte_5D4594[1568240] = a1;
    sub_4ECE10(&byte_5D4594[1568236], v4);
    result = sub_4ECDE0(&byte_5D4594[1568236], v2);
  }
  return result;
}

//----- (004ECEF0) --------------------------------------------------------
int sub_4ECEF0()
{
  int result; // eax

  result = *(_DWORD *)&byte_5D4594[1568036];
  if ( !*(_DWORD *)&byte_5D4594[1568036] )
    return 0;
  *(_DWORD *)&byte_5D4594[1568036] = *(_DWORD *)(*(_DWORD *)&byte_5D4594[1568036] + 8);
  return result;
}

//----- (004ECF10) --------------------------------------------------------
int __cdecl sub_4ECF10(int a1)
{
  int result; // eax
  int v2; // ecx

  result = sub_4DA790();
  if ( result )
  {
    while ( *(_BYTE *)(result + 16) & 0x20 || *(_DWORD *)(result + 44) != a1 )
    {
      v2 = *(_DWORD *)(result + 504);
      if ( v2 )
      {
        while ( *(_BYTE *)(v2 + 16) & 0x20 || *(_DWORD *)(v2 + 44) != a1 )
        {
          v2 = *(_DWORD *)(v2 + 496);
          if ( !v2 )
            goto LABEL_8;
        }
        return v2;
      }
LABEL_8:
      result = sub_4DA7A0(result);
      if ( !result )
        goto LABEL_9;
    }
  }
  else
  {
LABEL_9:
    result = sub_4DA870();
    if ( result )
    {
      while ( *(_BYTE *)(result + 16) & 0x20 || *(_DWORD *)(result + 44) != a1 )
      {
        result = sub_4DA880(result);
        if ( !result )
          goto LABEL_13;
      }
    }
    else
    {
LABEL_13:
      result = sub_4DA840();
      if ( result )
      {
        while ( *(_BYTE *)(result + 16) & 0x20 || *(_DWORD *)(result + 44) != a1 )
        {
          result = sub_4DA850(result);
          if ( !result )
            goto LABEL_17;
        }
      }
      else
      {
LABEL_17:
        result = 0;
      }
    }
  }
  return result;
}

//----- (004ECFA0) --------------------------------------------------------
int __cdecl sub_4ECFA0(int a1)
{
  int result; // eax
  _DWORD *v2; // esi

  result = *(_DWORD *)&byte_587000[205696];
  if ( !*(_DWORD *)&byte_587000[205696] )
  {
    v2 = *(_DWORD **)&byte_5D4594[1568236];
    if ( *(_DWORD *)&byte_5D4594[1568236] )
    {
      result = a1;
      while ( *v2 != a1 )
      {
        v2 = (_DWORD *)v2[2];
        if ( !v2 )
          return result;
      }
      sub_4ECE10(&byte_5D4594[1568236], (int)v2);
      result = sub_4ECDE0(&byte_5D4594[1568036], (int)v2);
    }
  }
  return result;
}

//----- (004ECFE0) --------------------------------------------------------
int sub_4ECFE0()
{
  int result; // eax
  int v1; // esi
  int v2; // edi

  result = *(_DWORD *)&byte_587000[205696];
  if ( !*(_DWORD *)&byte_587000[205696] )
  {
    v1 = *(_DWORD *)&byte_5D4594[1568236];
    if ( *(_DWORD *)&byte_5D4594[1568236] )
    {
      do
      {
        v2 = *(_DWORD *)(v1 + 8);
        sub_4ECE10(&byte_5D4594[1568236], v1);
        result = sub_4ECDE0(&byte_5D4594[1568036], v1);
        v1 = v2;
      }
      while ( v2 );
    }
  }
  return result;
}

//----- (004ED020) --------------------------------------------------------
int __cdecl sub_4ED020(int a1)
{
  int result; // eax

  result = sub_4DA790();
  if ( !result )
    return 0;
  while ( *(_BYTE *)(result + 16) & 0x20 || *(_DWORD *)(result + 40) != a1 )
  {
    result = sub_4DA7A0(result);
    if ( !result )
      return 0;
  }
  return result;
}

//----- (004ED050) --------------------------------------------------------
__int16 __cdecl sub_4ED050(int a1, int a2)
{
  int v2; // eax
  int i; // esi
  int v4; // edi

  LOWORD(v2) = *(_WORD *)&byte_5D4594[1568248];
  if ( !*(_DWORD *)&byte_5D4594[1568248] )
  {
    v2 = sub_4E3AA0((CHAR *)&byte_587000[205744]);
    *(_DWORD *)&byte_5D4594[1568248] = v2;
  }
  for ( i = *(_DWORD *)(a1 + 516); i; i = *(_DWORD *)(i + 512) )
  {
    LOWORD(v2) = *(_WORD *)(i + 4);
    if ( (unsigned __int16)v2 == *(_DWORD *)&byte_5D4594[1568248] )
    {
      v4 = *(_DWORD *)(i + 748);
      LOWORD(v2) = sub_4ED5E0(a1, i, (int *)(a1 + 56));
      *(_DWORD *)(v4 + 4) = a2;
    }
  }
  return v2;
}

//----- (004ED0C0) --------------------------------------------------------
void __cdecl sub_4ED0C0(int a1, int *a2)
{
  int v2; // ebx
  int v3; // eax
  int v4; // ebp
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // esi
  int i; // ecx
  int v10; // edx

  v2 = 1;
  if ( a1 && a2 )
  {
    v3 = *(_DWORD *)(a1 + 8);
    if ( v3 & 4 )
    {
      v4 = *(_DWORD *)(a1 + 748);
      if ( !sub_40A5C0(4096) && (*(_DWORD *)(a1 + 16) & 0x8000) == 0x8000 && a2[2] & 0x13001000 )
        v2 = 0;
      if ( a2[2] & 0x10000000 )
      {
        if ( sub_40A5C0(32) )
        {
          *(_DWORD *)(*(_DWORD *)(v4 + 276) + 4) &= 0xFFFFFFFE;
          if ( v2 == 1 )
            sub_4D84C0(255, (int)a2);
        }
      }
      sub_53E430((_DWORD *)a1, (int)a2, 0, v2);
      sub_53A140((_DWORD *)a1, (int)a2, 0, v2);
      sub_4D8B50(*(unsigned __int8 *)(*(_DWORD *)(v4 + 276) + 2064), (int)a2);
      sub_56FC50(*(_DWORD *)(*(_DWORD *)(v4 + 276) + 4632), a2);
    }
    else if ( v3 & 2 )
    {
      if ( *(_BYTE *)(a1 + 12) & 0x10 && a2[2] & 0x10000000 && sub_40A5C0(32) )
        sub_4E4B20(a1, (int)a2, 0);
      sub_53E430((_DWORD *)a1, (int)a2, 1, 1);
      sub_53A140((_DWORD *)a1, (int)a2, 1, 1);
    }
    v5 = a2[125];
    if ( v5 )
      *(_DWORD *)(v5 + 496) = a2[124];
    else
      *(_DWORD *)(a1 + 504) = a2[124];
    v6 = a2[124];
    if ( v6 )
      *(_DWORD *)(v6 + 500) = a2[125];
    a2[123] = 0;
    sub_4EC300((int)a2);
    if ( *(_BYTE *)(a1 + 8) & 4 )
    {
      v7 = *(_DWORD *)(a1 + 504);
      v8 = *(_DWORD *)(a1 + 748);
      for ( i = 0; v7; i += v10 )
      {
        v10 = *(unsigned __int8 *)(v7 + 488);
        v7 = *(_DWORD *)(v7 + 496);
      }
      *(_DWORD *)(*(_DWORD *)(v8 + 276) + 3656) = i > *(unsigned __int16 *)(a1 + 490);
    }
  }
}

//----- (004ED290) --------------------------------------------------------
int __cdecl sub_4ED290(int a1, int a2, float2 *a3)
{
  int v3; // ebp
  int result; // eax
  int *v5; // edi
  int v6; // eax
  int v7; // ebx
  int v8; // eax
  char v9; // di
  int v10; // eax
  int v11; // ecx
  int v12; // eax
  char v13[10]; // [esp+8h] [ebp-Ch]
  unsigned __int8 v14; // [esp+18h] [ebp+4h]

  v3 = a1;
  if ( *(_DWORD *)(a2 + 492) != a1 )
    return 0;
  if ( *(_BYTE *)(a1 + 8) & 4 && sub_53EBF0(a2) && sub_53EC80(a2, 1) )
  {
    if ( !(*(_DWORD *)(a1 + 16) & 0x8020) )
    {
      sub_4DA2C0(a1, (const char *)&byte_587000[205752], 0);
      sub_501960(925, a1, 2, *(_DWORD *)(a1 + 36));
    }
    result = 0;
  }
  else
  {
    sub_4ED0C0(a1, (int *)a2);
    sub_4DAA50(a2, 0, a3->field_0, a3->field_4);
    if ( *(_DWORD *)(a2 + 8) & 0x1000000 )
    {
      if ( sub_415820(a2) == 4 )
      {
        v5 = *(int **)(a1 + 504);
        if ( v5 )
        {
          while ( 1 )
          {
            if ( v5[2] & 0x1000000 )
            {
              if ( sub_415820((int)v5) == 2 )
              {
                v6 = v5[4];
                if ( !(v6 & 0x100) )
                {
                  if ( *(_BYTE *)(v5[184] + 2) )
                    break;
                }
              }
            }
            v5 = (int *)v5[124];
            if ( !v5 )
              goto LABEL_19;
          }
          sub_4ED0C0(a1, v5);
          sub_4E5CC0((int)v5);
        }
      }
    }
LABEL_19:
    if ( *(_DWORD *)(a2 + 8) & 0x10000000 )
    {
      v7 = *(_DWORD *)(a2 + 748);
      v8 = sub_4ECBD0(a2);
      v9 = v8;
      v14 = *(_BYTE *)(a2 + 52);
      *(_DWORD *)&v13[2] = *(_DWORD *)(v3 + 36);
      *(_DWORD *)&v13[6] = v8;
      sub_4DA180(7, v13);
      sub_4174B0(a2, 1);
      *(_DWORD *)(v7 + 8) = *(_DWORD *)&byte_5D4594[2598000];
      sub_4E82C0(v14, 2, v9, 0);
    }
    if ( !*(_DWORD *)&byte_5D4594[1568252] )
      *(_DWORD *)&byte_5D4594[1568252] = sub_4E3AA0((CHAR *)&byte_587000[205772]);
    if ( !sub_40A5C0(2048)
      && !sub_40A5C0(4096)
      && !(*(_DWORD *)(a2 + 16) & 0x80000)
      && !(*(_DWORD *)(a2 + 8) & 0x10000000)
      && *(unsigned __int16 *)(a2 + 4) != *(_DWORD *)&byte_5D4594[1568252] )
    {
      sub_511660((_DWORD *)a2, 10 * *(_DWORD *)&byte_5D4594[2649704]);
    }
    sub_4E46F0(a2, 0.0);
    if ( *(_BYTE *)(a2 + 8) & 0x40 )
      sub_501960(821, a2, 0, 0);
    if ( *(_BYTE *)(a2 + 8) & 2 )
    {
      v10 = *(_DWORD *)(a2 + 748);
      v11 = *(_DWORD *)(v10 + 1440);
      *(_DWORD *)(v10 + 1360) = 15;
      BYTE1(v11) |= 1u;
      *(_DWORD *)(v10 + 1440) = v11;
    }
    if ( !*(_DWORD *)&byte_5D4594[1568256] )
    {
      *(_DWORD *)&byte_5D4594[1568256] = sub_4E3AA0((CHAR *)&byte_587000[205780]);
      *(_DWORD *)&byte_5D4594[1568244] = sub_4E3AA0((CHAR *)&byte_587000[205788]);
    }
    v12 = *(unsigned __int16 *)(a2 + 4);
    if ( (unsigned __int16)v12 == *(_DWORD *)&byte_5D4594[1568256] || v12 == *(_DWORD *)&byte_5D4594[1568244] )
      sub_4FF5B0(v3, 15);
    result = 1;
  }
  return result;
}

//----- (004ED500) --------------------------------------------------------
int __cdecl sub_4ED500(int a1, int a2, float2 *a3)
{
  __int16 v3; // ax
  float2 v5; // [esp+Ch] [ebp-8h]

  if ( !sub_4ED580(a1, a2, a3) )
    return 0;
  *(float2 *)(*(_DWORD *)(a2 + 692) + 28) = *a3;
  v5.field_0 = *(float *)(a1 + 56) - a3->field_0;
  v5.field_4 = *(float *)(a1 + 60) - a3->field_4;
  v3 = sub_509ED0(&v5);
  *(_WORD *)(a2 + 126) = v3;
  *(_WORD *)(a2 + 124) = v3;
  sub_501960(825, a2, 0, 0);
  return 1;
}

//----- (004ED580) --------------------------------------------------------
int __cdecl sub_4ED580(int a1, int a2, float2 *a3)
{
  if ( sub_411A90(a3) )
  {
    sub_501960(925, a1, 2, *(_DWORD *)(a1 + 36));
    return 0;
  }
  if ( !sub_4ED290(a1, a2, a3) )
    return 0;
  sub_4EC290(a1, a2);
  return 1;
}

//----- (004ED5E0) --------------------------------------------------------
int __cdecl sub_4ED5E0(int a1, int a2, int *a3)
{
  int v3; // edi
  int v4; // ebx
  int v5; // ebp
  int v6; // esi
  int v7; // edi
  int v8; // esi
  int v10; // [esp+10h] [ebp-10h]
  char v11[10]; // [esp+14h] [ebp-Ch]

  if ( !sub_40A5C0(16) || !sub_417DA0(4) )
  {
    v3 = a2;
    goto LABEL_14;
  }
  v3 = a2;
  v4 = *(_DWORD *)&byte_5D4594[2598000];
  if ( !*(_BYTE *)(a2 + 52) )
  {
LABEL_14:
    v8 = a1;
    goto LABEL_15;
  }
  v10 = *(_DWORD *)(a2 + 748);
  v5 = a2;
  v6 = sub_4DA7C0();
  if ( v6 )
  {
    do
    {
      v7 = *(_DWORD *)(v6 + 748);
      if ( sub_419180(v6 + 48, *(_BYTE *)(a2 + 52)) && *(_DWORD *)(v7 + 264) < v4 )
      {
        v4 = *(_DWORD *)(v7 + 264);
        v5 = v6;
      }
      v6 = sub_4DA7F0(v6);
    }
    while ( v6 );
    v3 = a2;
  }
  v8 = a1;
  if ( v5 && a1 != v5 )
    *(_DWORD *)(v10 + 4) = v5;
LABEL_15:
  if ( !sub_4ED290(v8, v3, (float2 *)a3) )
    return 0;
  sub_4EC300(v3);
  sub_4FF5B0(v8, 30);
  *(_DWORD *)&v11[2] = *(_DWORD *)(v8 + 36);
  if ( sub_419130(v8 + 48) )
    *(_DWORD *)&v11[6] = *(unsigned __int8 *)(v8 + 52);
  else
    *(_DWORD *)&v11[6] = 0;
  sub_4DA180(11, v11);
  sub_4174B0(v3, 1);
  return 1;
}

//----- (004ED710) --------------------------------------------------------
int __cdecl sub_4ED710(int a1, int a2, int *a3)
{
  int v3; // edi

  if ( !sub_4ED290(a1, a2, (float2 *)a3) )
    return 0;
  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    if ( sub_40A5C0(64) )
    {
      v3 = *(_DWORD *)(a1 + 748);
      --*(_DWORD *)(*(_DWORD *)(v3 + 276) + 2152);
      *(_DWORD *)(*(_DWORD *)(v3 + 276) + 2156) = sub_4D1600();
      sub_4D8CD0(a1);
      sub_501960(308, a1, 0, 0);
    }
  }
  return 1;
}

//----- (004ED790) --------------------------------------------------------
int __cdecl sub_4ED790(int a1, _DWORD *a2, float2 *a3)
{
  int result; // eax
  int (__cdecl *v4)(int, _DWORD *, float2 *); // eax

  if ( !a2 )
    return 0;
  if ( sub_40A5C0(0x2000) && !sub_40A5C0(4096) && a2[2] & 0x3001010 )
  {
    a2[4] |= 0x40u;
    sub_511810((int)a2);
  }
  v4 = (int (__cdecl *)(int, _DWORD *, float2 *))a2[178];
  if ( v4 )
    result = v4(a1, a2, a3);
  else
    result = sub_4ED290(a1, (int)a2, a3);
  return result;
}

//----- (004ED810) --------------------------------------------------------
int __cdecl sub_4ED810(int a1, int a2, float *a3)
{
  int v3; // esi
  float v4; // ecx
  float v5; // eax
  double v6; // st7
  double v7; // st6
  long double v8; // st6
  int result; // eax
  int v10; // eax
  float4 v11; // [esp+8h] [ebp-10h]
  float v12; // [esp+1Ch] [ebp+4h]
  float v13; // [esp+24h] [ebp+Ch]

  v3 = a1;
  v4 = *(float *)(a1 + 60);
  v11.field_0 = *(float *)(a1 + 56);
  v11.field_4 = v4;
  v5 = a3[1];
  v11.field_8 = *a3;
  v11.field_C = v5;
  v6 = v11.field_8 - v11.field_0;
  v7 = v5 - v4;
  v12 = v7;
  v8 = sqrt(v7 * v12 + v6 * v6);
  v13 = v8;
  if ( v8 > 75.0 )
  {
    v11.field_8 = v6 * 75.0 / v13 + v11.field_0;
    v11.field_C = v12 * 75.0 / v13 + v11.field_4;
  }
  if ( sub_535250(&v11, 0, 0, 0) )
  {
    if ( !sub_40A5C0(16) )
      goto LABEL_13;
    v10 = *(_DWORD *)&byte_5D4594[1568248];
    if ( !*(_DWORD *)&byte_5D4594[1568248] )
    {
      v10 = sub_4E3AA0((CHAR *)&byte_587000[205820]);
      *(_DWORD *)&byte_5D4594[1568248] = v10;
    }
    if ( *(unsigned __int16 *)(a2 + 4) == v10 )
      result = 0;
    else
LABEL_13:
      result = sub_4ED790(v3, (_DWORD *)a2, (float2 *)&v11.field_8);
  }
  else
  {
    sub_4DA2C0(v3, (const char *)&byte_587000[205796], 0);
    sub_501960(925, v3, 2, *(_DWORD *)(v3 + 36));
    result = 0;
  }
  return result;
}

//----- (004ED930) --------------------------------------------------------
int __cdecl sub_4ED930(int a1, _DWORD *a2)
{
  float2 v3; // [esp+4h] [ebp-8h]

  sub_4ED970(50.0, (float2 *)(a1 + 56), &v3);
  return sub_4ED790(a1, a2, &v3);
}

//----- (004ED970) --------------------------------------------------------
float2 *__cdecl sub_4ED970(float a1, float2 *a2, float2 *a3)
{
  float2 *v3; // esi
  float v4; // ecx
  int v5; // edi
  double v6; // st7
  float2 *result; // eax
  float v8; // edx
  float v9; // [esp+0h] [ebp-14h]
  float4 v10; // [esp+4h] [ebp-10h]
  float v11; // [esp+1Ch] [ebp+8h]

  v3 = a2;
  v4 = a2->field_4;
  v9 = a1 * 0.015625;
  v10.field_0 = a2->field_0;
  v10.field_4 = v4;
  v11 = sub_416030(-3.1415927, 3.1415927);
  v5 = 0;
  while ( 1 )
  {
    v6 = v11 + 1.8849558;
    v11 = v6;
    v10.field_8 = cos(v6) * a1 + v3->field_0;
    v10.field_C = sin(v11) * a1 + v3->field_4;
    if ( sub_535250(&v10, 0, 0, 1) )
      break;
    ++v5;
    a1 = a1 - v9;
    if ( v5 >= 64 )
    {
      result = a3;
      *a3 = *v3;
      return result;
    }
  }
  result = a3;
  v8 = v10.field_C;
  a3->field_0 = v10.field_8;
  a3->field_4 = v8;
  return result;
}

//----- (004EDA40) --------------------------------------------------------
_DWORD *__cdecl sub_4EDA40(_DWORD *a1)
{
  float2 *v1; // ebp
  int v2; // edi
  int v3; // esi
  _DWORD *result; // eax
  float v5; // edx
  int v6; // esi
  int v7; // ebx
  int v8; // ecx
  int v9; // edx
  _DWORD *v10; // esi
  _DWORD *v11; // edi
  float v12; // [esp+10h] [ebp-34h]
  float v13; // [esp+10h] [ebp-34h]
  int v14; // [esp+14h] [ebp-30h]
  int v15; // [esp+18h] [ebp-2Ch]
  int v16; // [esp+1Ch] [ebp-28h]
  int v17; // [esp+20h] [ebp-24h]
  _DWORD *v18; // [esp+24h] [ebp-20h]
  _DWORD *v19; // [esp+28h] [ebp-1Ch]
  int v20; // [esp+2Ch] [ebp-18h]
  int v21; // [esp+30h] [ebp-14h]
  float4 v22; // [esp+34h] [ebp-10h]
  _DWORD *v23; // [esp+48h] [ebp+4h]

  v1 = (float2 *)a1;
  v2 = 0;
  v3 = a1[126];
  v12 = 0.0;
  if ( v3 )
  {
    do
    {
      if ( sub_4EDCD0((int)a1, v3) && *(float *)(v3 + 176) > (double)v12 )
        v12 = *(float *)(v3 + 176);
      v3 = *(_DWORD *)(v3 + 496);
    }
    while ( v3 );
    v2 = 0;
  }
  result = (_DWORD *)a1[126];
  v5 = *((float *)a1 + 15);
  v6 = -1;
  v15 = 0;
  v7 = 3;
  v20 = 0;
  v21 = -1;
  v14 = 0;
  v16 = 0;
  v22.field_0 = *((float *)a1 + 14);
  v22.field_4 = v5;
  v23 = result;
  v13 = v12 + v12 + 6.0;
  if ( !result )
    return result;
  while ( 2 )
  {
    v19 = (_DWORD *)result[124];
    if ( !sub_4EDCD0((int)v1, (int)result) )
      goto LABEL_31;
    v17 = 0;
    v18 = (_DWORD *)(v7 - 1);
    while ( 1 )
    {
      v22.field_8 = (double)v20 * v13 + v1[7].field_0;
      v22.field_C = v1[7].field_4 - (double)v21 * v13;
      v22.field_8 = sub_416030(-3.0, 3.0) + v22.field_8;
      v22.field_C = sub_416030(-3.0, 3.0) + v22.field_C;
      if ( sub_535250(&v22, 0, 0, 1) )
      {
        sub_4ED790((int)v1, v23, (float2 *)&v22.field_8);
        v8 = 1;
        v16 = 1;
        v17 = 1;
      }
      else
      {
        v8 = v17;
      }
      result = v18;
      if ( (_DWORD *)v14 != v18 )
      {
        v9 = v15;
        ++v14;
LABEL_22:
        switch ( v9 )
        {
          case 0:
            v20 = ++v2;
            break;
          case 1:
            ++v6;
            goto LABEL_27;
          case 2:
            v20 = --v2;
            break;
          case 3:
            --v6;
LABEL_27:
            v21 = v6;
            break;
          default:
            goto LABEL_28;
        }
        goto LABEL_28;
      }
      if ( v15 != 3 && v18 )
      {
        v9 = v15 + 1;
        v14 = 1;
        ++v15;
        goto LABEL_22;
      }
      if ( !v16 )
        break;
      v7 += 2;
      v18 = (_DWORD *)((char *)v18 + 2);
      v2 = 1 - v7 / 2;
      v20 = 1 - v7 / 2;
      v14 = 1;
      v6 = v7 / -2;
      v21 = v7 / -2;
      v15 = 0;
      v16 = 0;
LABEL_28:
      if ( v8 )
        goto LABEL_31;
    }
    if ( v8 )
    {
LABEL_31:
      result = v19;
      v23 = v19;
      if ( v19 )
      {
        result = v19;
        continue;
      }
    }
    else
    {
      v10 = v23;
      if ( v23 )
      {
        while ( 1 )
        {
          v11 = (_DWORD *)v10[124];
          result = (_DWORD *)sub_4EDCD0((int)v1, (int)v10);
          if ( result )
            result = (_DWORD *)sub_4ED790((int)v1, v10, v1 + 7);
          if ( !v11 )
            break;
          v10 = v11;
        }
      }
    }
    return result;
  }
}

//----- (004EDCD0) --------------------------------------------------------
BOOL __cdecl sub_4EDCD0(int a1, int a2)
{
  int v2; // eax

  v2 = *(_DWORD *)(a2 + 16);
  return v2 & 0x20 || !(*(_BYTE *)(a1 + 8) & 6) || !(v2 & 0x10000000);
}

//----- (004EDD00) --------------------------------------------------------
char __cdecl sub_4EDD00(int a1, int a2)
{
  int v2; // eax
  int *v3; // esi
  int v4; // edi
  float2 a3; // [esp+8h] [ebp-8h]

  v2 = sub_4E7980(a1);
  v3 = (int *)v2;
  if ( v2 )
  {
    do
    {
      v4 = sub_4E7990((int)v3);
      v2 = v3[2];
      if ( v2 & a2 )
      {
        sub_4ED0C0(a1, v3);
        sub_4ED970(60.0, (float2 *)(a1 + 56), &a3);
        LOBYTE(v2) = sub_4DAA50((int)v3, 0, a3.field_0, a3.field_4);
      }
      v3 = (int *)v4;
    }
    while ( v4 );
  }
  return v2;
}

//----- (004EDD70) --------------------------------------------------------
int sub_4EDD70()
{
  int result; // eax
  int i; // edi
  _DWORD *v2; // esi
  _DWORD *v3; // ebx
  float2 a3; // [esp+4h] [ebp-8h]

  result = sub_4DA7C0();
  for ( i = result; result; i = result )
  {
    v2 = *(_DWORD **)(i + 504);
    if ( v2 )
    {
      do
      {
        v3 = (_DWORD *)v2[124];
        if ( v2[2] & 0x10000000 )
        {
          sub_4ED970(50.0, (float2 *)(i + 56), &a3);
          sub_4ED790(i, v2, &a3);
        }
        v2 = v3;
      }
      while ( v3 );
    }
    result = sub_4DA7F0(i);
  }
  return result;
}

//----- (004EDDE0) --------------------------------------------------------
int __cdecl sub_4EDDE0(int a1, _DWORD *a2, int *a3)
{
  if ( !sub_4ED290(a1, (int)a2, (float2 *)a3) )
    return 0;
  sub_501960(833, (int)a2, 0, 0);
  if ( !sub_40A5C0(2048) && !sub_40A5C0(4096) )
    sub_511660(a2, 25 * *(_DWORD *)&byte_5D4594[2649704]);
  return 1;
}

//----- (004EDE50) --------------------------------------------------------
int __cdecl sub_4EDE50(int a1, int a2, int *a3)
{
  int v3; // edi
  unsigned __int8 *v4; // eax

  if ( !a1 || !a2 || !a3 )
    return 0;
  v3 = sub_4ED290(a1, a2, (float2 *)a3);
  if ( v3 )
  {
    if ( !sub_40A5C0(2048) )
      sub_511660((_DWORD *)a2, 25 * *(_DWORD *)&byte_5D4594[2649704]);
    v4 = &byte_587000[205704];
    if ( *(_WORD *)&byte_587000[205710] )
    {
      while ( !(*(_DWORD *)(a2 + 12) & *(_DWORD *)v4) && !(*((_WORD *)v4 + 2) & *(_WORD *)(a2 + 24)) )
      {
        v4 += 8;
        if ( !*((_WORD *)v4 + 3) )
          return v3;
      }
      sub_501960(*((unsigned __int16 *)v4 + 3), a1, 0, 0);
    }
  }
  return v3;
}

//----- (004EDF00) --------------------------------------------------------
void __cdecl sub_4EDF00(int a1, int a2)
{
  int v2; // eax
  double v3; // st7
  double v4; // st7
  double v5; // st7
  double v6; // st6
  double v7; // st7
  double v8; // st6
  double v9; // st7
  double v10; // st6
  double v11; // st5
  float v12; // ecx
  float v13; // edx
  float v14; // eax
  float v15; // eax
  float v16; // esi
  float v17; // eax
  float v18; // esi
  float v19; // ecx
  float v20; // ecx
  float v21; // eax
  float v22; // edx
  int v23; // eax
  _DWORD *v24; // esi
  int v25; // esi
  int v26; // edi
  float v27; // [esp+Ch] [ebp-44h]
  float v28; // [esp+10h] [ebp-40h]
  float v29; // [esp+14h] [ebp-3Ch]
  float v30; // [esp+18h] [ebp-38h]
  int v31; // [esp+1Ch] [ebp-34h]
  int v32; // [esp+1Ch] [ebp-34h]
  float2 a1a; // [esp+20h] [ebp-30h]
  float4 v34; // [esp+28h] [ebp-28h]
  float2 a3[3]; // [esp+38h] [ebp-18h]

  if ( a1 )
  {
    if ( a2 )
    {
      v31 = sub_4E7D30(a1, 0);
      if ( v31 )
      {
        v2 = *(_DWORD *)(a1 + 12);
        if ( v2 & 0x100 )
        {
          a1a.field_0 = -1.0;
          a1a.field_4 = -1.0;
        }
        else if ( v2 & 0x200 )
        {
          a1a.field_0 = 1.0;
          a1a.field_4 = -1.0;
        }
        else if ( v2 & 0x400 )
        {
          a1a.field_0 = 1.0;
          a1a.field_4 = 1.0;
        }
        else if ( v2 & 0x800 )
        {
          a1a.field_0 = -1.0;
          a1a.field_4 = 1.0;
        }
        else
        {
          a1a.field_0 = *(float *)(a2 + 56) - *(float *)(a1 + 56);
          a1a.field_4 = *(float *)(a2 + 60) - *(float *)(a1 + 60);
        }
        sub_509F20(&a1a);
        v3 = sub_4EE2A0(a1) + 4.0 + 15.0;
        a3[0].field_0 = v3 * a1a.field_0 + *(float *)(a1 + 56);
        a3[0].field_4 = v3 * a1a.field_4 + *(float *)(a1 + 60);
        v4 = -a1a.field_4;
        v29 = -v4;
        v30 = -a1a.field_0;
        a3[1].field_0 = v4 * 30.0 + a3[0].field_0;
        a3[1].field_4 = a1a.field_0 * 30.0 + a3[0].field_4;
        a3[2].field_0 = v29 * 30.0 + a3[0].field_0;
        a3[2].field_4 = v30 * 30.0 + a3[0].field_4;
        v5 = a3[0].field_0 - *(float *)(a2 + 56);
        v6 = a3[0].field_4 - *(float *)(a2 + 60);
        v27 = v6 * v6 + v5 * v5;
        v7 = a3[1].field_0 - *(float *)(a2 + 56);
        v8 = a3[1].field_4 - *(float *)(a2 + 60);
        v9 = v8 * v8 + v7 * v7;
        v10 = a3[2].field_0 - *(float *)(a2 + 56);
        v11 = a3[2].field_4 - *(float *)(a2 + 60);
        v28 = v11 * v11 + v10 * v10;
        if ( v27 >= v9 )
        {
          v13 = a3[1].field_4;
          v12 = a3[1].field_0;
        }
        else
        {
          v12 = a3[0].field_0;
          v13 = a3[0].field_4;
          a3[0].field_0 = a3[1].field_0;
          a3[1].field_0 = v12;
          a3[0].field_4 = a3[1].field_4;
          v14 = v27;
          v27 = v9;
          a3[1].field_4 = v13;
          v9 = v14;
        }
        if ( v9 < v28 )
        {
          v15 = v12;
          v12 = a3[2].field_0;
          v16 = v13;
          v13 = a3[2].field_4;
          v9 = v28;
          a3[1].field_0 = a3[2].field_0;
          a3[1].field_4 = a3[2].field_4;
          a3[2].field_0 = v15;
          a3[2].field_4 = v16;
        }
        if ( v27 < v9 )
        {
          v17 = a3[0].field_0;
          v18 = a3[0].field_4;
          a3[0].field_0 = v12;
          a3[0].field_4 = v13;
          a3[1].field_0 = v17;
          a3[1].field_4 = v18;
        }
        v19 = *(float *)(a1 + 56);
        v34.field_4 = *(float *)(a1 + 60);
        v34.field_0 = v19;
        v34.field_8 = a3[2].field_0;
        v34.field_C = a3[2].field_4;
        if ( !sub_535250(&v34, 0, 0, 1) )
        {
          v20 = *(float *)(a2 + 60);
          a3[2].field_0 = *(float *)(a2 + 56);
          a3[2].field_4 = v20;
        }
        v34.field_8 = a3[1].field_0;
        v34.field_C = a3[1].field_4;
        if ( !sub_535250(&v34, 0, 0, 1) )
        {
          v21 = *(float *)(a2 + 60);
          a3[1].field_0 = *(float *)(a2 + 56);
          a3[1].field_4 = v21;
        }
        v34.field_8 = a3[0].field_0;
        v34.field_C = a3[0].field_4;
        if ( !sub_535250(&v34, 0, 0, 1) )
        {
          v22 = *(float *)(a2 + 60);
          a3[0].field_0 = *(float *)(a2 + 56);
          a3[0].field_4 = v22;
        }
        if ( v31 == 1 )
        {
          v23 = sub_4E7980(a1);
          v24 = (_DWORD *)v23;
          if ( *(char *)(v23 + 488) != -1 && !(*(_BYTE *)(v23 + 8) & 2) )
          {
            *(_DWORD *)(v23 + 16) |= 0x40u;
            sub_511810(v23);
            sub_4ED790(a1, v24, a3);
          }
        }
        else
        {
          v25 = sub_4E7980(a1);
          v26 = 0;
          if ( v25 )
          {
            do
            {
              v32 = sub_4E7990(v25);
              if ( *(char *)(v25 + 488) != -1 && !(*(_BYTE *)(v25 + 8) & 2) )
              {
                *(_DWORD *)(v25 + 16) |= 0x40u;
                sub_511810(v25);
                sub_4ED790(a1, (_DWORD *)v25, &a3[v26++]);
                if ( v26 >= 3 )
                  v26 = 0;
              }
              v25 = v32;
            }
            while ( v32 );
          }
        }
      }
    }
  }
}

//----- (004EE2A0) --------------------------------------------------------
double __cdecl sub_4EE2A0(int a1)
{
  int v1; // eax

  v1 = *(_DWORD *)(a1 + 172);
  if ( v1 == 2 )
    return *(float *)(a1 + 176);
  if ( v1 != 3 )
    return 0.0;
  if ( *(float *)(a1 + 184) <= (double)*(float *)(a1 + 188) )
    return *(float *)(a1 + 188) * 0.5;
  return *(float *)(a1 + 184) * 0.5;
}

//----- (004EE2F0) --------------------------------------------------------
int __cdecl sub_4EE2F0(int a1, int a2, int *a3)
{
  int v3; // edi
  __int16 v4; // ax
  unsigned __int8 *v5; // ecx

  if ( !a1 || !a2 || !a3 )
    return 0;
  v3 = sub_4ED290(a1, a2, (float2 *)a3);
  if ( v3 )
  {
    v4 = *(_WORD *)&byte_5D4594[3815180];
    v5 = &byte_5D4594[3815180];
    if ( *(short *)&byte_5D4594[3815180] != -1 )
    {
      while ( v4 != *(_WORD *)(a2 + 4) )
      {
        v4 = *((_WORD *)v5 + 2);
        v5 += 4;
        if ( v4 == -1 )
          return v3;
      }
      sub_501960(*((unsigned __int16 *)v5 + 1), a1, 0, 0);
    }
  }
  return v3;
}

//----- (004EE370) --------------------------------------------------------
int __cdecl sub_4EE370(int a1, int a2, int *a3)
{
  return sub_4ED290(a1, a2, (float2 *)a3);
}

//----- (004EE390) --------------------------------------------------------
int __cdecl sub_4EE390(int a1)
{
  int result; // eax
  int v2; // ecx

  result = a1;
  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 556);
    if ( v2 )
    {
      *(_DWORD *)(v2 + 12) = 0;
      result = *(_DWORD *)(a1 + 556);
      *(_DWORD *)(result + 8) = 0;
    }
    else
    {
      *(_DWORD*)0xC = 0;
      *(_DWORD *)(*(_DWORD *)(a1 + 556) + 8) = *(_DWORD *)&byte_5D4594[1568260];
      if ( *(_DWORD *)&byte_5D4594[1568260] )
        *(_DWORD *)(*(_DWORD *)&byte_5D4594[1568260] + 448) = a1;
      *(_DWORD *)&byte_5D4594[1568260] = a1;
    }
  }
  return result;
}

//----- (004EE3E0) --------------------------------------------------------
void __cdecl sub_4EE3E0(int a1)
{
  int v1; // eax
  int v2; // ecx
  int v3; // eax
  int v4; // ecx

  if ( a1 )
  {
    v1 = *(_DWORD *)(a1 + 556);
    if ( v1 )
    {
      v2 = *(_DWORD *)(v1 + 8);
      if ( v2 )
        *(_DWORD *)(*(_DWORD *)(v2 + 556) + 12) = *(_DWORD *)(v1 + 12);
      v3 = *(_DWORD *)(a1 + 556);
      v4 = *(_DWORD *)(v3 + 12);
      if ( v4 )
        *(_DWORD *)(*(_DWORD *)(v4 + 556) + 8) = *(_DWORD *)(v3 + 8);
      else
        *(_DWORD *)&byte_5D4594[1568260] = *(_DWORD *)(v3 + 8);
    }
  }
}

//----- (004EE430) --------------------------------------------------------
int sub_4EE430()
{
  return *(_DWORD *)&byte_5D4594[1568260];
}

//----- (004EE440) --------------------------------------------------------
int __cdecl sub_4EE440(int a1)
{
  int result; // eax

  if ( a1 )
    result = *(_DWORD *)(*(_DWORD *)(a1 + 556) + 8);
  else
    result = 0;
  return result;
}

//----- (004EE460) --------------------------------------------------------
void __cdecl sub_4EE460(int a1, int a2)
{
  unsigned __int16 *v2; // ecx
  unsigned __int16 v3; // dx
  int v4; // ecx
  unsigned __int16 v5; // ax

  if ( !sub_40A5C0(0x4000000) )
  {
    v2 = *(unsigned __int16 **)(a1 + 556);
    if ( v2 )
    {
      v3 = v2[2];
      if ( *v2 < v3 )
      {
        v4 = *v2 + a2;
        v5 = v3;
        if ( v4 < v3 )
          v5 = v4;
        sub_4E4560(a1, v5);
        if ( *(_BYTE *)(a1 + 8) & 2 )
          sub_4EE4C0((_DWORD *)a1);
      }
    }
  }
}

//----- (004EE4C0) --------------------------------------------------------
void __cdecl sub_4EE4C0(_DWORD *a1)
{
  int v1; // eax

  if ( a1 )
  {
    v1 = a1[127];
    if ( v1 )
    {
      if ( *(_BYTE *)(v1 + 8) & 4 )
        sub_4D8620(*(unsigned __int8 *)(*(_DWORD *)(*(_DWORD *)(v1 + 748) + 276) + 2064), a1);
    }
  }
}

//----- (004EE500) --------------------------------------------------------
void __cdecl sub_4EE500(int a1)
{
  int v1; // ebx
  int v2; // esi
  int v3; // ebp
  int v4; // edi
  int v5; // eax
  double v6; // st7
  wchar_t *v7; // eax

  v1 = a1;
  if ( a1 )
  {
    if ( sub_40A5C0(2048) )
    {
      v2 = *(_DWORD *)(a1 + 520);
      if ( v2 )
      {
        v3 = 1;
        v4 = sub_4EC580(*(_DWORD *)(a1 + 520));
        if ( *(_BYTE *)(v4 + 8) & 4 )
        {
          v5 = 0;
          if ( v2 == v4 )
            goto LABEL_12;
          do
          {
            if ( v5 )
              break;
            if ( *(_BYTE *)(v2 + 8) & 2 )
            {
              v3 = sub_500CC0(v4, v2);
              v5 = 1;
            }
            v2 = *(_DWORD *)(v2 + 508);
          }
          while ( v2 != v4 );
          if ( v3 )
          {
            v1 = a1;
LABEL_12:
            v6 = sub_4EF270(v4, *(float *)(v1 + 28));
            if ( v6 > 0.0 )
            {
              v7 = sub_40F1D0((char *)&byte_587000[206012], 0, (const char *)&byte_587000[205972], 172);
              sub_4D9EB0(v4, v7, (unsigned int)(__int64)v6);
            }
            return;
          }
        }
      }
    }
  }
}

//----- (004EE5E0) --------------------------------------------------------
void __cdecl sub_4EE5E0(int a1, int a2)
{
  int v2; // eax
  int v3; // eax
  int v4; // eax
  void (__cdecl *v5)(int); // eax

  if ( a1 )
  {
    v2 = *(_DWORD *)(a1 + 556);
    if ( v2 )
    {
      if ( *(_WORD *)(v2 + 4) && (!(byte_5D4594[2650636] & 0x20) || !(*(_BYTE *)(a1 + 8) & 4)) )
      {
        if ( *(_BYTE *)(a1 + 8) & 4 )
        {
          v3 = *(_DWORD *)(a1 + 748);
          if ( v3 )
          {
            if ( !*(_BYTE *)(*(_DWORD *)(v3 + 276) + 2251) && *(_DWORD *)(v3 + 132) )
              sub_537520((_DWORD *)a1);
          }
        }
        if ( **(unsigned __int16 **)(a1 + 556) > a2 )
        {
          sub_4E4560(a1, **(_WORD **)(a1 + 556) - a2);
        }
        else
        {
          sub_4E4560(a1, 0);
          v4 = *(_DWORD *)(a1 + 16);
          if ( (v4 & 0x8000) == 0 )
          {
            BYTE1(v4) |= 0x80u;
            *(_DWORD *)(a1 + 16) = v4;
            sub_4FF5B0(a1, 16);
            if ( !sub_534A40(a1) )
              sub_4EE500(a1);
            if ( *(_BYTE *)(a1 + 8) & 2 )
            {
              sub_50A3D0((_DWORD *)a1);
            }
            else
            {
              v5 = *(void (__cdecl **)(int))(a1 + 724);
              if ( v5 )
                v5(a1);
              else
                sub_4E5CC0(a1);
            }
          }
        }
        if ( *(_BYTE *)(a1 + 8) & 2 )
          sub_4EE4C0((_DWORD *)a1);
      }
    }
  }
}

//----- (004EE6F0) --------------------------------------------------------
void __cdecl sub_4EE6F0(int a1)
{
  int v1; // eax

  if ( a1 )
  {
    v1 = *(_DWORD *)(a1 + 556);
    if ( v1 )
    {
      sub_4E4560(a1, *(_WORD *)(v1 + 4));
      *(_WORD *)(*(_DWORD *)(a1 + 556) + 2) = **(_WORD **)(a1 + 556);
      if ( *(_BYTE *)(a1 + 8) & 2 )
        sub_4EE4C0((_DWORD *)a1);
    }
  }
}

//----- (004EE730) --------------------------------------------------------
void __cdecl sub_4EE730(int a1)
{
  int v1; // esi
  int v2; // eax
  int v3; // edx

  if ( a1 )
  {
    if ( *(_BYTE *)(a1 + 8) & 4 )
    {
      v1 = *(_DWORD *)(a1 + 748);
      if ( *(_DWORD *)(a1 + 556) )
      {
        v2 = v1 + 12;
        v3 = 32;
        do
        {
          v2 += 2;
          --v3;
          *(_WORD *)(v2 - 2) = **(_WORD **)(a1 + 556);
        }
        while ( v3 );
        *(_WORD *)(v1 + 76) = **(_WORD **)(a1 + 556);
      }
    }
  }
}

//----- (004EE780) --------------------------------------------------------
__int16 __cdecl sub_4EE780(int a1)
{
  __int16 *v1; // eax
  __int16 result; // ax

  if ( a1 && (v1 = *(__int16 **)(a1 + 556)) != 0 )
    result = *v1;
  else
    result = 0;
  return result;
}

//----- (004EE7A0) --------------------------------------------------------
__int16 __cdecl sub_4EE7A0(int a1)
{
  int v1; // eax
  __int16 result; // ax

  if ( a1 && (v1 = *(_DWORD *)(a1 + 556)) != 0 )
    result = *(_WORD *)(v1 + 4);
  else
    result = 0;
  return result;
}

//----- (004EE7C0) --------------------------------------------------------
int __cdecl sub_4EE7C0(int a1, __int16 a2)
{
  int result; // eax

  result = a1;
  if ( a1 )
  {
    result = *(_DWORD *)(a1 + 556);
    if ( result )
      *(_WORD *)(result + 4) = a2;
  }
  return result;
}

//----- (004EE7E0) --------------------------------------------------------
int __cdecl sub_4EE7E0(int a1, int a2, int a3)
{
  int v3; // ebx
  int v5; // eax
  int v6; // eax
  int v7; // edi
  int v8; // edi
  int v9; // esi
  float v10; // [esp+0h] [ebp-10h]

  v3 = *(unsigned __int8 *)(a1 + 540);
  if ( !a1 )
    return 0;
  if ( *(_BYTE *)(a1 + 16) & 2 )
    return 0;
  if ( sub_4FF350(a1, 23) )
    return 0;
  v5 = *(_DWORD *)(a1 + 8);
  if ( v5 & 4 && (*(_BYTE *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 3680) & 1) == 1 )
    return 0;
  if ( v5 & 2 )
  {
    v6 = *(_DWORD *)(a1 + 12);
    if ( v6 & 0x200 )
      return 0;
  }
  v10 = sub_4E0040((_DWORD *)a1) * 100.0;
  v7 = sub_419A70(v10);
  if ( sub_415FA0(0, 100) < v7 )
  {
    sub_4DA2C0(a1, (const char *)&byte_587000[206064], 0);
    return 0;
  }
  v8 = v3 + a2;
  if ( v3 + a2 <= a3 )
    goto LABEL_19;
  if ( v3 <= a3 )
  {
    v8 = a3;
LABEL_19:
    if ( v8 != v3 )
    {
      sub_4EEA90(a1, v8);
      sub_501960(100, a1, 0, 0);
    }
    goto LABEL_21;
  }
  v8 = v3;
LABEL_21:
  if ( !v3 && v8 > 0 )
  {
    v9 = *(_DWORD *)(a1 + 556);
    if ( v9 )
      *(_DWORD *)(v9 + 16) = *(_DWORD *)&byte_5D4594[2598000];
  }
  return 1;
}

//----- (004EE8F0) --------------------------------------------------------
void __cdecl sub_4EE8F0(int a1, int a2)
{
  int v2; // eax
  int v3; // eax
  char *v4; // eax
  int v5; // eax
  int v6; // eax

  if ( a1 )
  {
    if ( *(unsigned __int8 *)(a1 + 540) > a2 )
    {
      *(_BYTE *)(a1 + 540) -= a2;
    }
    else
    {
      v2 = *(_DWORD *)(a1 + 556);
      *(_BYTE *)(a1 + 540) = 0;
      if ( v2 )
        *(_DWORD *)(v2 + 16) = 0;
      v3 = *(_DWORD *)(a1 + 8);
      if ( v3 & 4 )
      {
        sub_417530(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276), 1024);
        sub_4DA2C0(a1, (const char *)&byte_587000[206088], 0);
      }
      else if ( v3 & 2 )
      {
        if ( sub_40A5C0(2048) && *(_BYTE *)(a1 + 12) & 0x10 )
        {
          v4 = sub_417090(31);
          if ( v4 )
          {
            v5 = *((_DWORD *)v4 + 514);
            if ( v5 )
              sub_4D7F40(v5, (_DWORD *)a1, 0);
          }
        }
        else if ( *(_BYTE *)(a1 + 12) & 0x80 )
        {
          v6 = *(_DWORD *)(a1 + 508);
          if ( v6 )
            sub_4D7F40(v6, (_DWORD *)a1, 0);
        }
      }
    }
  }
}

//----- (004EE9D0) --------------------------------------------------------
void __cdecl sub_4EE9D0(int a1)
{
  int v1; // eax
  int v2; // eax
  char *v3; // eax
  int v4; // eax
  int v5; // eax

  if ( a1 && *(_BYTE *)(a1 + 540) )
  {
    v1 = *(_DWORD *)(a1 + 556);
    *(_BYTE *)(a1 + 540) = 0;
    if ( v1 )
      *(_DWORD *)(v1 + 16) = 0;
    v2 = *(_DWORD *)(a1 + 8);
    if ( v2 & 4 )
    {
      sub_417530(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276), 1024);
    }
    else if ( v2 & 2 )
    {
      if ( sub_40A5C0(2048) && *(_BYTE *)(a1 + 12) & 0x10 )
      {
        v3 = sub_417090(31);
        if ( v3 )
        {
          v4 = *((_DWORD *)v3 + 514);
          if ( v4 )
            sub_4D7F40(v4, (_DWORD *)a1, 0);
        }
      }
      else if ( *(_BYTE *)(a1 + 12) & 0x80 )
      {
        v5 = *(_DWORD *)(a1 + 508);
        if ( v5 )
          sub_4D7F40(v5, (_DWORD *)a1, 0);
      }
    }
  }
}

//----- (004EEA90) --------------------------------------------------------
void __cdecl sub_4EEA90(int a1, int a2)
{
  int v2; // eax
  int v3; // eax
  int v4; // eax
  char *v5; // eax
  int v6; // eax

  if ( a1 )
  {
    if ( !*(_BYTE *)(a1 + 540) && a2 > 0 )
    {
      v2 = *(_DWORD *)(a1 + 556);
      if ( v2 )
        *(_DWORD *)(v2 + 16) = *(_DWORD *)&byte_5D4594[2598000];
    }
    v3 = *(_DWORD *)(a1 + 8);
    *(_BYTE *)(a1 + 540) = a2;
    if ( v3 & 4 )
    {
      v4 = *(_DWORD *)(a1 + 748);
      if ( a2 != 0 )
        sub_4174F0(*(_DWORD *)(v4 + 276), 1024);
      else
        sub_417530(*(_DWORD *)(v4 + 276), 1024);
    }
    else if ( v3 & 2 )
    {
      if ( sub_40A5C0(2048) && *(_BYTE *)(a1 + 12) & 0x10 )
      {
        v5 = sub_417090(31);
        if ( !v5 )
          goto LABEL_19;
        v6 = *((_DWORD *)v5 + 514);
        if ( !v6 )
          goto LABEL_19;
      }
      else
      {
        if ( (signed char)*(_BYTE *)(a1 + 12) >= 0 )
          goto LABEL_19;
        v6 = *(_DWORD *)(a1 + 508);
        if ( !v6 )
          goto LABEL_19;
      }
      sub_4D7F40(v6, (_DWORD *)a1, a2 != 0);
    }
LABEL_19:
    if ( a2 )
      *(_WORD *)(a1 + 542) = 1000;
    else
      *(_WORD *)(a1 + 542) = 0;
  }
}

//----- (004EEB80) --------------------------------------------------------
unsigned __int16 __cdecl sub_4EEB80(int a1, __int16 a2)
{
  unsigned __int16 result; // ax
  int v3; // esi
  __int16 v4; // ax
  unsigned __int16 v5; // cx
  unsigned __int16 v6; // ax

  result = a1;
  if ( a1 && *(_BYTE *)(a1 + 8) & 4 )
  {
    v3 = *(_DWORD *)(a1 + 748);
    v4 = *(_WORD *)(v3 + 4);
    v5 = *(_WORD *)(v3 + 8);
    *(_WORD *)(v3 + 6) = v4;
    v6 = a2 + v4;
    *(_WORD *)(v3 + 4) = v6;
    if ( v6 > v5 )
      *(_WORD *)(v3 + 4) = v5;
    sub_56F9E0(*(_DWORD *)(*(_DWORD *)(v3 + 276) + 4596), a2);
    result = *(_WORD *)(v3 + 8);
    if ( *(_WORD *)(v3 + 4) > result )
      result = (unsigned int)sub_56F870(*(_DWORD *)(*(_DWORD *)(v3 + 276) + 4596), result);
  }
  return result;
}

//----- (004EEBF0) --------------------------------------------------------
_DWORD *__cdecl sub_4EEBF0(int a1, int a2)
{
  _DWORD *result; // eax
  unsigned __int16 v3; // cx

  result = (_DWORD *)a1;
  if ( a1 )
  {
    if ( *(_BYTE *)(a1 + 8) & 4 )
    {
      result = *(_DWORD **)(a1 + 748);
      if ( !(byte_5D4594[2650636] & 0x20) )
      {
        v3 = *((_WORD *)result + 2);
        *((_WORD *)result + 3) = v3;
        if ( v3 > a2 )
          *((_WORD *)result + 2) = v3 - a2;
        else
          *((_WORD *)result + 2) = 0;
        if ( *((unsigned __int16 *)result + 2) > a2 )
          result = sub_56F9E0(*(_DWORD *)(result[69] + 4596), -(__int16)a2);
        else
          result = sub_56F9E0(*(_DWORD *)(result[69] + 4596), -*((_WORD *)result + 2));
      }
    }
  }
  return result;
}

//----- (004EEC80) --------------------------------------------------------
__int16 __cdecl sub_4EEC80(int a1)
{
  int v1; // eax
  __int16 result; // ax

  if ( !a1 )
    goto LABEL_9;
  v1 = *(_DWORD *)(a1 + 8);
  if ( v1 & 4 )
    return *(_WORD *)(*(_DWORD *)(a1 + 748) + 4);
  if ( v1 & 2 )
    result = 1000;
  else
LABEL_9:
    result = 0;
  return result;
}

//----- (004EECB0) --------------------------------------------------------
__int16 __cdecl sub_4EECB0(int a1)
{
  __int16 result; // ax

  if ( a1 && *(_BYTE *)(a1 + 8) & 4 )
    result = *(_WORD *)(*(_DWORD *)(a1 + 748) + 8);
  else
    result = 0;
  return result;
}

//----- (004EECD0) --------------------------------------------------------
int __cdecl sub_4EECD0(int a1, __int16 a2)
{
  int result; // eax

  result = a1;
  if ( a1 )
  {
    if ( *(_BYTE *)(a1 + 8) & 4 )
    {
      result = *(_DWORD *)(a1 + 748);
      *(_WORD *)(result + 8) = a2;
    }
  }
  return result;
}

//----- (004EECF0) --------------------------------------------------------
_DWORD *__cdecl sub_4EECF0(int a1)
{
  _DWORD *result; // eax
  int v2; // eax
  int v3; // edx
  __int16 v4; // cx

  result = (_DWORD *)a1;
  if ( a1 )
  {
    if ( *(_BYTE *)(a1 + 8) & 4 )
    {
      v2 = *(_DWORD *)(a1 + 748);
      v3 = *(_DWORD *)(v2 + 276);
      *(_WORD *)(v2 + 6) = *(_WORD *)(v2 + 4);
      v4 = *(_WORD *)(v2 + 8);
      *(_WORD *)(v2 + 4) = v4;
      result = sub_56F9E0(*(_DWORD *)(v3 + 4596), v4);
    }
  }
  return result;
}

//----- (004EED30) --------------------------------------------------------
void sub_4EED30()
{
  srand(0x22D6u);
}

//----- (004EED40) --------------------------------------------------------
void __cdecl sub_4EED40(int a1, char a2, int a3)
{
  int *v3; // esi
  _DWORD *v4; // edi
  int v5; // ebx

  if ( a1 && a2 > 0 )
  {
    v3 = (int *)&byte_587000[206108];
    v4 = (_DWORD *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 3696);
    v5 = a2;
    do
    {
      if ( *v3 )
      {
        if ( sub_40A5C0(4096) || sub_4D6F50() || sub_4D6F70() )
          *v4 = 0;
        else
          sub_4FB9C0(a1, *v3, a3);
      }
      ++v3;
      ++v4;
      --v5;
    }
    while ( v5 );
  }
}

//----- (004EEDC0) --------------------------------------------------------
int __cdecl sub_4EEDC0(int a1, int a2)
{
  int v2; // ebx
  int v3; // edi
  int v4; // esi
  float *v5; // ebp
  __int16 v6; // ax
  char v7; // al
  double v8; // st7
  __int16 v9; // ax
  double v10; // st7
  int i; // eax
  int v12; // edx
  int v13; // eax
  size_t v14; // eax
  int result; // eax
  float v16; // [esp-1Ch] [ebp-40h]
  float v17; // [esp+0h] [ebp-24h]
  float v18; // [esp+0h] [ebp-24h]
  float v19; // [esp+0h] [ebp-24h]
  float v20; // [esp+0h] [ebp-24h]
  int v21; // [esp+0h] [ebp-24h]
  float v22; // [esp+14h] [ebp-10h]
  int v23; // [esp+18h] [ebp-Ch]
  char v24; // [esp+1Ch] [ebp-8h]
  float *v25; // [esp+20h] [ebp-4h]
  float *v26; // [esp+28h] [ebp+4h]

  v2 = a1;
  v3 = *(_DWORD *)(a1 + 748);
  v23 = 0;
  v4 = *(_DWORD *)(v3 + 276);
  v26 = sub_57B350();
  v5 = sub_57B360(*(unsigned __int8 *)(v4 + 2251));
  v25 = sub_57B360(0);
  if ( sub_40A5C0(0x2000) )
  {
    *(_WORD *)(*(_DWORD *)(v2 + 556) + 4) = sub_419A70(*v5);
    v6 = sub_419AB0(*v5);
    sub_4E4560(v2, v6);
    *(_WORD *)(v3 + 8) = sub_419A70(v5[1]);
    *(_WORD *)(v3 + 4) = sub_419A70(v5[1]);
    *(_DWORD *)(v4 + 2239) = sub_419A70(v5[3]);
    v16 = v5[2];
    *(float *)(v2 + 548) = v5[2] * 0.000099999997;
    *(_DWORD *)(v4 + 2235) = sub_419A70(v16);
    if ( !*(_BYTE *)(v4 + 2251) && !sub_40A5C0(4096) && !sub_4D6F30() )
      sub_4EED40(v2, 10, 0);
  }
  else
  {
    v7 = *(_BYTE *)(v4 + 3684);
    if ( v7 > 10 )
      v7 = 10;
    v24 = v7;
    v22 = (double)(v7 - 1);
    v17 = (*v5 - *v26) * 0.11111111 * v22 + *v26 + 0.5;
    *(_WORD *)(*(_DWORD *)(v2 + 556) + 4) = sub_419A70(v17);
    sub_4E4560(v2, *(_WORD *)(*(_DWORD *)(v2 + 556) + 4));
    v8 = (v5[1] - v26[1]) * 0.11111111 * v22 + v26[1];
    if ( v8 > v5[1] )
      v8 = v5[1];
    v18 = v8 + 0.5;
    v9 = sub_419A70(v18);
    *(_WORD *)(v3 + 8) = v9;
    *(_WORD *)(v3 + 4) = v9;
    v19 = (v5[3] - v26[3]) * 0.11111111 * v22 + v26[3] + 0.5;
    *(_DWORD *)(v4 + 2239) = sub_419A70(v19);
    v10 = (v5[2] - v26[2]) * 0.11111111 * v22 + v26[2];
    *(float *)(v2 + 548) = v10 * 0.000099999997;
    v20 = v10 + 0.5;
    *(_DWORD *)(v4 + 2235) = sub_419A70(v20);
    if ( !*(_BYTE *)(v4 + 2251) )
      sub_4EED40(v2, v24, a2);
  }
  *(float *)(v2 + 120) = (double)*(int *)(v4 + 2239) / v25[3] * 20.0 + 10.0;
  *(_WORD *)(*(_DWORD *)(v3 + 276) + 3652) = (__int64)(((double)*(int *)(v4 + 2239) / v25[3] * 1250.0 + 750.0)
                                                     * *(double *)&byte_581450[10216]);
  *(_WORD *)(v2 + 490) = *(_WORD *)(*(_DWORD *)(v3 + 276) + 3652);
  sub_56F780(*(_DWORD *)(*(_DWORD *)(v3 + 276) + 4624), *(_DWORD *)(v4 + 2239));
  sub_56F780(*(_DWORD *)(*(_DWORD *)(v3 + 276) + 4620), *(_DWORD *)(v4 + 2235));
  sub_56F870(*(_DWORD *)(*(_DWORD *)(v3 + 276) + 4600), *(_WORD *)(v3 + 8));
  sub_56F870(*(_DWORD *)(*(_DWORD *)(v3 + 276) + 4592), *(_WORD *)(*(_DWORD *)(v2 + 556) + 4));
  for ( i = *(_DWORD *)(v2 + 504); i; v23 += v12 )
  {
    v12 = *(unsigned __int8 *)(i + 488);
    i = *(_DWORD *)(i + 496);
  }
  *(_DWORD *)(v4 + 3656) = v23 > *(unsigned __int16 *)(v2 + 490);
  v13 = *(_DWORD *)(v3 + 276);
  v21 = *(_DWORD *)(v13 + 4628);
  v14 = nox_wcslen((const wchar_t *)(v13 + 2185));
  result = sub_56FB00((int *)(*(_DWORD *)(v3 + 276) + 2185), 2 * v14, v21);
  *(_BYTE *)(v4 + 2184) = 1;
  return result;
}

//----- (004EF140) --------------------------------------------------------
int __cdecl sub_4EF140(int a1)
{
  int v1; // edi
  int v2; // ecx
  int result; // eax
  int i; // ebx
  int v5; // [esp-Ch] [ebp-14h]

  v1 = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 276);
  if ( sub_40A5C0(0x2000) )
  {
    v2 = *(_DWORD *)(v1 + 4644);
    *(_BYTE *)(v1 + 3684) = 10;
    sub_56F820(v2, 0xAu);
    result = sub_4EEDC0(a1, 0);
  }
  else
  {
    for ( i = 0; i <= 10; ++i )
    {
      if ( sub_419D70(&byte_587000[206152], i) > *(float *)(a1 + 28) )
        break;
    }
    v5 = *(_DWORD *)(v1 + 4644);
    *(_BYTE *)(v1 + 3684) = i - 1;
    sub_56F820(v5, i - 1);
    result = sub_4EEDC0(a1, 0);
  }
  return result;
}

//----- (004EF1E0) --------------------------------------------------------
double __cdecl sub_4EF1E0(int a1, int a2)
{
  double result; // st7

  if ( !*(_DWORD *)&byte_5D4594[1568264] )
    *(_DWORD *)&byte_5D4594[1568264] = sub_4E3AA0((CHAR *)&byte_587000[206160]);
  if ( !sub_40A5C0(2048) || *(_DWORD *)(a2 + 4) != *(_DWORD *)&byte_5D4594[1568264] )
    result = (double)(a1 - *(unsigned __int16 *)(a2 + 60)) * *(float *)(a2 + 64)
           + (double)*(unsigned __int16 *)(a2 + 72);
  else
    result = sub_419D40(&byte_587000[206172]) + (double)(a1 - *(unsigned __int16 *)(a2 + 60)) * *(float *)(a2 + 64);
  return result;
}

//----- (004EF270) --------------------------------------------------------
double __cdecl sub_4EF270(int a1, float a2)
{
  int v3; // ecx
  double v4; // st7
  float v5; // [esp+Ch] [ebp+8h]

  if ( *(float *)(a1 + 28) >= (double)a2 )
    return 0.0;
  v3 = *(_DWORD *)(a1 + 748);
  v4 = (a2 - *(float *)(a1 + 28)) * *(float *)&byte_587000[206148] + 1.0;
  v5 = v4;
  *(float *)(a1 + 28) = v4 + *(float *)(a1 + 28);
  sub_56FA40(*(_DWORD *)(*(_DWORD *)(v3 + 276) + 4604), v5);
  sub_4D81A0(a1);
  sub_4EF2E0(a1);
  return v5;
}

//----- (004EF2E0) --------------------------------------------------------
void __cdecl sub_4EF2E0(int a1)
{
  int v1; // esi
  wchar_t *v2; // eax

  v1 = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 276);
  if ( (sub_4DB1B0() != 1 || !sub_4DB1C0())
    && sub_419D70(&byte_587000[206192], *(char *)(v1 + 3684) + 1) <= *(float *)(a1 + 28) )
  {
    ++*(_BYTE *)(v1 + 3684);
    sub_56F980(*(_DWORD *)(v1 + 4644), 1u);
    sub_4EEDC0(a1, 1);
    if ( sub_40A5C0(2048) )
    {
      sub_57AF30(a1, 0);
    }
    else
    {
      sub_501960(902, a1, 2, *(_DWORD *)(a1 + 36));
      v2 = sub_40F1D0((char *)&byte_587000[206244], 0, (const char *)&byte_587000[206200], 253);
      sub_4D9EB0(a1, v2);
    }
  }
}

//----- (004EF3A0) --------------------------------------------------------
void __cdecl sub_4EF3A0(int a1, float a2)
{
  int v2; // ecx
  wchar_t *v3; // eax

  v2 = *(_DWORD *)(a1 + 748);
  *(float *)(a1 + 28) = a2 + *(float *)(a1 + 28);
  sub_56FA40(*(_DWORD *)(*(_DWORD *)(v2 + 276) + 4604), a2);
  sub_4D81A0(a1);
  v3 = sub_40F1D0((char *)&byte_587000[206296], 0, (const char *)&byte_587000[206252], 381);
  sub_4D9EB0(a1, v3, (unsigned int)(__int64)a2);
  sub_4EF2E0(a1);
}

//----- (004EF410) --------------------------------------------------------
void __cdecl sub_4EF410(int a1, unsigned __int8 a2)
{
  signed __int8 v2; // bl
  int v3; // esi
  int v4; // edi
  _DWORD *v5; // esi
  int v6; // [esp-10h] [ebp-24h]
  float v7; // [esp+0h] [ebp-14h]

  v2 = a2;
  v3 = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 276);
  if ( (char)a2 > 10 )
  {
    v2 = 10;
    a2 = 10;
  }
  *(float *)(a1 + 28) = sub_419D70(&byte_587000[206316], v2);
  v7 = sub_419D70(&byte_587000[206324], v2);
  sub_56F8C0(*(_DWORD *)(v3 + 4604), v7);
  sub_4D81A0(a1);
  v6 = *(_DWORD *)(v3 + 4644);
  *(_BYTE *)(v3 + 3684) = v2;
  sub_56F820(v6, a2);
  sub_4EEDC0(a1, 0);
  if ( sub_40A5C0(2048) && !*(_BYTE *)(v3 + 2251) )
  {
    v4 = 1;
    v5 = (_DWORD *)(v3 + 3700);
    do
    {
      if ( *v5 )
        sub_45DBE0((void *)3, v4, v4 - 1);
      ++v4;
      ++v5;
    }
    while ( v4 < 6 );
  }
  if ( sub_40A5C0(2048) )
    sub_57AF30(a1, 0);
}

//----- (004EF500) --------------------------------------------------------
char *__cdecl sub_4EF500(int a1)
{
  char *result; // eax
  int v2; // eax
  int i; // esi

  result = (char *)sub_40A5C0(2048);
  if ( result )
  {
    v2 = *(_DWORD *)&byte_5D4594[2650636];
    if ( a1 == 1 )
      LOBYTE(v2) = byte_5D4594[2650636] | 0x30;
    else
      LOBYTE(v2) = byte_5D4594[2650636] & 0xCF;
    *(_DWORD *)&byte_5D4594[2650636] = v2;
    result = sub_416EA0();
    for ( i = (int)result; result; i = (int)result )
    {
      sub_4EFD80(i);
      sub_4EFC80(i);
      sub_4EFE10(i);
      result = sub_416EE0(i);
    }
  }
  return result;
}

//----- (004EF560) --------------------------------------------------------
void sub_4EF560()
{
  srand(0x22D7u);
}

//----- (004EF570) --------------------------------------------------------
void sub_4EF570()
{
  srand(0x7DAu);
}

//----- (004EF580) --------------------------------------------------------
char sub_4EF580()
{
  char v0; // bl
  int v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  int v8; // eax

  v0 = 0;
  v1 = sub_415CD0((char *)0x400);
  if ( sub_4E3BA0(v1) )
    v0 = 1;
  v2 = sub_415CD0((char *)4);
  if ( sub_4E3BA0(v2) )
    v0 |= 2u;
  v3 = sub_415CD0((char *)1);
  if ( sub_4E3BA0(v3) )
    v0 |= 4u;
  v4 = sub_415840((char *)0x8000);
  if ( sub_4E3BA0(v4) )
    v0 |= 8u;
  v5 = sub_415CD0((char *)0x4000);
  if ( sub_4E3BA0(v5) )
    v0 |= 0x10u;
  v6 = sub_415840((char *)0x100);
  if ( sub_4E3BA0(v6) )
    v0 |= 0x20u;
  v7 = sub_415840((char *)0x200);
  if ( sub_4E3BA0(v7) )
    v0 |= 0x40u;
  v8 = sub_415CD0((char *)0x1000000);
  if ( sub_4E3BA0(v8) )
    v0 |= 0x80u;
  return v0;
}

//----- (004EF660) --------------------------------------------------------
int __cdecl sub_4EF660(int a1)
{
  int v1; // esi
  int i; // eax

  v1 = *(_DWORD *)(a1 + 748);
  *(_DWORD *)(v1 + 116) = 0;
  *(_DWORD *)(v1 + 120) = 0;
  *(_DWORD *)(v1 + 124) = 0;
  *(_DWORD *)(v1 + 128) = 0;
  *(_DWORD *)(v1 + 308) = 0;
  for ( i = 4796; i < 4816; *(_DWORD *)(*(_DWORD *)(v1 + 276) + i - 4) = 0 )
    i += 4;
  if ( !sub_40A5C0(2048) )
    *(_BYTE *)(v1 + 244) = sub_4EF6F0(a1);
  *(_DWORD *)(v1 + 264) = 0;
  *(_DWORD *)(a1 + 520) = 0;
  return sub_422140(*(_DWORD *)(v1 + 276));
}

//----- (004EF6F0) --------------------------------------------------------
int __cdecl sub_4EF6F0(int a1)
{
  int v1; // esi
  int i; // eax

  if ( !*(_DWORD *)&byte_5D4594[1568268] )
    *(_DWORD *)&byte_5D4594[1568268] = sub_4E3AA0((CHAR *)&byte_587000[206368]);
  v1 = 0;
  for ( i = sub_4E7980(a1); i; i = sub_4E7990(i) )
  {
    if ( *(unsigned __int16 *)(i + 4) == *(_DWORD *)&byte_5D4594[1568268] )
      ++v1;
  }
  return v1;
}

//----- (004EF750) --------------------------------------------------------
_DWORD *__cdecl sub_4EF750(int a1, CHAR *a2, int *a3, int a4, int a5)
{
  _DWORD *v5; // eax
  _DWORD *v6; // esi
  void (__cdecl *v7)(_DWORD *, _DWORD); // eax
  int v8; // eax

  v5 = sub_4E3810(a2);
  v6 = v5;
  if ( v5 )
  {
    v7 = (void (__cdecl *)(_DWORD *, _DWORD))v5[172];
    if ( v7 )
      v7(v6, 0);
    if ( a3 )
      sub_4E4990((int)v6, a3);
    sub_4F36F0(a1, (int)v6, a4, a5);
    v8 = v6[2];
    v6[4] &= 0xFFF7FFFF;
    if ( v8 & 0x3001000 )
      *(_DWORD *)(v6[187] + 4) |= 1u;
  }
  return v6;
}

//----- (004EF7D0) --------------------------------------------------------
char __cdecl sub_4EF7D0(int a1, int a2, int a3)
{
  int v3; // esi
  int v4; // edi
  int v5; // eax
  int v6; // ecx
  int v7; // eax
  _DWORD *v8; // ebp
  int v9; // eax
  int v10; // eax
  int v11; // ebp
  int v12; // ecx
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // edi
  unsigned __int8 v18[20]; // [esp+10h] [ebp-14h]
  unsigned __int8 *v19; // [esp+28h] [ebp+4h]
  _DWORD *v20; // [esp+2Ch] [ebp+8h]

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 748);
  v19 = (unsigned __int8 *)(*(_DWORD *)(v4 + 276) + 2185);
  if ( a2 )
  {
    sub_4EE9D0(v3);
    sub_4EE6F0(v3);
    sub_4EECF0(v3);
  }
  sub_4FC180(v3);
  sub_4D7E50(v3);
  *(_DWORD *)(v4 + 312) = 0;
  *(_DWORD *)(v4 + 316) = 0;
  *(_BYTE *)(v3 + 541) = 0;
  *(_DWORD *)(v4 + 84) = 0;
  *(_WORD *)(v4 + 78) = 0;
  *(_WORD *)(v4 + 76) = 0;
  v5 = v4 + 12;
  v6 = 32;
  do
  {
    v5 += 2;
    --v6;
    *(_WORD *)(v5 - 2) = **(_WORD **)(v3 + 556);
  }
  while ( v6 );
  *(_DWORD *)(v3 + 16) &= 0xFFEB3FE7;
  sub_4FA020((_DWORD *)v3, 13);
  sub_4FF580(v3);
  *(_BYTE *)(v4 + 188) = 0;
  *(_DWORD *)(v4 + 216) = 0;
  *(_DWORD *)(v4 + 192) = 0;
  *(_DWORD *)(v4 + 196) = 0;
  *(_DWORD *)(v4 + 200) = 0;
  *(_DWORD *)(v4 + 204) = 0;
  *(_DWORD *)(v4 + 208) = 0;
  *(_BYTE *)(v4 + 212) = 0;
  *(_DWORD *)(v4 + 136) = 0;
  *(_DWORD *)(v4 + 132) = 0;
  *(_DWORD *)(v4 + 268) = 0;
  sub_4F7950(v3);
  *(_DWORD *)(v3 + 520) = 0;
  if ( sub_40A5C0(0x2000) )
    sub_4DE4D0(*(_BYTE *)(*(_DWORD *)(v4 + 276) + 2064));
  v7 = *(_DWORD *)(v4 + 276);
  if ( v7 && !*(_DWORD *)(v7 + 4700) )
  {
    sub_4D85C0(*(unsigned __int8 *)(v7 + 2064), (_DWORD *)v3);
    sub_4D88C0(*(unsigned __int8 *)(*(_DWORD *)(v4 + 276) + 2064), v3);
    if ( a3 )
    {
      LOBYTE(v7) = sub_4EFC30(v3, 0);
    }
    else
    {
      v8 = *(_DWORD **)(v3 + 504);
      if ( v8 )
      {
        do
        {
          v20 = (_DWORD *)v8[124];
          if ( sub_53E2D0((int)v8) || (v9 = v8[4], !(v9 & 0x100)) || v8[2] & 0x2000000 && sub_415C70((int)v8) & 0x808 )
            sub_4E5CC0((int)v8);
          v8 = v20;
        }
        while ( v20 );
      }
      sub_4EFC30(v3, 1);
      v10 = sub_413290((const char *)&byte_587000[206400]);
      v11 = sub_413330(v10);
      if ( sub_40A5C0(2560) || *(_BYTE *)(*(_DWORD *)(v4 + 276) + 2251) )
      {
        v12 = **(_DWORD **)(v4 + 276);
        if ( !(v12 & 0x400) )
        {
          *(_DWORD *)v18 = 0;
          *(_DWORD *)&v18[4] = sub_413330(*(_DWORD *)(v11 + 4) + v19[84]);
          *(_DWORD *)&v18[8] = sub_413330(*(_DWORD *)(v11 + 4) + v19[85]);
          *(_DWORD *)&v18[12] = 0;
          sub_4EF750(v3, (CHAR *)&byte_587000[206412], (int *)v18, 1, 0);
        }
      }
      if ( !(**(_BYTE **)(v4 + 276) & 4) )
      {
        *(_DWORD *)v18 = 0;
        *(_DWORD *)&v18[4] = sub_413330(*(_DWORD *)(v11 + 4) + v19[83]);
        *(_DWORD *)&v18[8] = 0;
        *(_DWORD *)&v18[12] = 0;
        sub_4EF750(v3, (CHAR *)&byte_587000[206424], (int *)v18, 1, 0);
      }
      if ( !(**(_BYTE **)(v4 + 276) & 1) )
      {
        *(_DWORD *)v18 = sub_413330(*(_DWORD *)(v11 + 4) + v19[87]);
        *(_DWORD *)&v18[4] = sub_413330(*(_DWORD *)(v11 + 4) + v19[86]);
        *(_DWORD *)&v18[8] = 0;
        *(_DWORD *)&v18[12] = 0;
        sub_4EF750(v3, (CHAR *)&byte_587000[206436], (int *)v18, 1, 0);
      }
      if ( sub_40A5C0(2048) )
      {
        v13 = sub_413290((const char *)&byte_587000[206484]);
        *(_DWORD *)v18 = sub_413330(v13);
        *(_DWORD *)&v18[8] = 0;
        *(_DWORD *)&v18[12] = 0;
        if ( *(_BYTE *)(*(_DWORD *)(v4 + 276) + 2251) )
        {
          *(_DWORD *)&v18[4] = 0;
        }
        else
        {
          v14 = sub_413290((const char *)&byte_587000[206500]);
          *(_DWORD *)&v18[4] = sub_413330(v14);
        }
        LOBYTE(v7) = (unsigned int)sub_4EF750(
                                     v3,
                                     *(CHAR **)&byte_587000[4 * *(unsigned __int8 *)(*(_DWORD *)(v4 + 276) + 2251)
                                                          + 206376],
                                     (int *)v18,
                                     1,
                                     0);
      }
      else if ( sub_40A5C0(4096) && sub_4CFE00() >= 0 )
      {
        *(_DWORD *)v18 = 0;
        *(_DWORD *)&v18[4] = 0;
        *(_DWORD *)&v18[8] = 0;
        *(_DWORD *)&v18[12] = 0;
        if ( *(_BYTE *)(*(_DWORD *)(v4 + 276) + 2251) == 1 )
        {
          v15 = sub_413290((const char *)&byte_587000[206544]);
          *(_DWORD *)&v18[8] = sub_413330(v15);
        }
        LOBYTE(v7) = (unsigned int)sub_4EF750(
                                     v3,
                                     *(CHAR **)&byte_587000[4 * *(unsigned __int8 *)(*(_DWORD *)(v4 + 276) + 2251)
                                                          + 206388],
                                     (int *)v18,
                                     1,
                                     0);
      }
      else
      {
        LOBYTE(v7) = *(_BYTE *)(*(_DWORD *)(v4 + 276) + 2251);
        if ( (_BYTE)v7 )
        {
          if ( (_BYTE)v7 == 1 )
            LOBYTE(v7) = (unsigned int)sub_4EF750(v3, (CHAR *)&byte_587000[206588], 0, 1, 0);
        }
        else
        {
          sub_4EF750(v3, (CHAR *)&byte_587000[206560], 0, 1, 0);
          LOBYTE(v7) = (unsigned int)sub_4EF750(v3, (CHAR *)&byte_587000[206572], 0, 1, 0);
        }
      }
    }
    v16 = *(_DWORD *)(v4 + 276);
    if ( v16 )
      *(_DWORD *)(v16 + 4700) = 1;
  }
  return v7;
}

//----- (004EFC30) --------------------------------------------------------
int __cdecl sub_4EFC30(int a1, char a2)
{
  char v3[9]; // [esp+0h] [ebp-Ch]

  v3[0] = -23;
  *(_DWORD *)&v3[3] = *(_DWORD *)&byte_5D4594[2598000];
  *(_WORD *)&v3[1] = *(_WORD *)(a1 + 36);
  v3[7] = sub_4EF580();
  v3[8] = a2;
  return sub_4E5390(255, (int)v3, 9, 0, 0);
}

//----- (004EFC80) --------------------------------------------------------
int __cdecl sub_4EFC80(int a1)
{
  int v1; // edi
  _DWORD *v2; // ebx
  char v3; // al

  sub_56F7D0(*(_DWORD *)(a1 + 4636), 0);
  v1 = 1;
  v2 = (_DWORD *)(a1 + 3700);
  if ( byte_5D4594[2650636] & 0x10 )
  {
    do
    {
      *v2 = 3;
      sub_56FCE0(*(_DWORD *)(a1 + 4636), v1++, 3);
      ++v2;
    }
    while ( v1 < 137 );
  }
  else
  {
    do
    {
      *v2 = 0;
      sub_56FCE0(*(_DWORD *)(a1 + 4636), v1++, 0);
      ++v2;
    }
    while ( v1 < 137 );
    if ( sub_40A5C0(4096) )
    {
      v3 = *(_BYTE *)(a1 + 2251);
      if ( v3 == 1 )
      {
        sub_4FB550(*(_DWORD *)(a1 + 2056), 27, 1, 1, 1);
      }
      else if ( v3 == 2 )
      {
        sub_4FB550(*(_DWORD *)(a1 + 2056), 9, 1, 1, 1);
        sub_4FB550(*(_DWORD *)(a1 + 2056), 41, 1, 1, 1);
      }
    }
  }
  return sub_56FD50(*(_DWORD *)(a1 + 4636), a1 + 3696, 137);
}

//----- (004EFD80) --------------------------------------------------------
int __cdecl sub_4EFD80(int a1)
{
  int v1; // esi
  _DWORD *v2; // ebx

  sub_56F7D0(*(_DWORD *)(a1 + 4640), 0);
  v1 = 1;
  v2 = (_DWORD *)(a1 + 4248);
  if ( byte_5D4594[2650636] & 0x10 )
  {
    do
    {
      *v2 = 1;
      sub_56FCE0(*(_DWORD *)(a1 + 4640), v1++, 1);
      ++v2;
    }
    while ( v1 < 41 );
  }
  else
  {
    do
    {
      *v2 = 0;
      sub_56FCE0(*(_DWORD *)(a1 + 4640), v1++, 0);
      ++v2;
    }
    while ( v1 < 41 );
  }
  return sub_56FD50(*(_DWORD *)(a1 + 4640), a1 + 4244, 41);
}

//----- (004EFE10) --------------------------------------------------------
char __cdecl sub_4EFE10(int a1)
{
  char result; // al
  int v2; // esi
  _DWORD *v3; // ebx

  result = *(_BYTE *)(a1 + 2251);
  if ( !result )
  {
    v2 = 1;
    v3 = (_DWORD *)(a1 + 3700);
    if ( byte_5D4594[2650636] & 0x10 )
    {
      do
      {
        *v3 = 5;
        result = sub_56FCE0(*(_DWORD *)(a1 + 4636), v2++, 5);
        ++v3;
      }
      while ( v2 < 6 );
    }
    else
    {
      do
      {
        *v3 = 0;
        result = sub_56FCE0(*(_DWORD *)(a1 + 4636), v2++, 0);
        ++v3;
      }
      while ( v2 < 6 );
    }
  }
  return result;
}

//----- (004EFE80) --------------------------------------------------------
char __cdecl sub_4EFE80(int a1)
{
  int v1; // edi
  int v2; // eax
  float v4; // [esp+0h] [ebp-Ch]

  v1 = *(_DWORD *)(a1 + 748);
  v2 = sub_4FA6D0(a1);
  sub_4FA5D0(a1, v2);
  sub_4EF140(a1);
  sub_4EFD80(*(_DWORD *)(v1 + 276));
  sub_4EFC80(*(_DWORD *)(v1 + 276));
  sub_4EEDC0(a1, 0);
  sub_4EFE10(*(_DWORD *)(v1 + 276));
  if ( sub_40A5C0(4096) )
  {
    v4 = sub_419D40(&byte_587000[206600]);
    *(_DWORD *)(v1 + 320) = sub_419A70(v4);
  }
  return sub_4EF7D0(a1, 1, 0);
}

//----- (004EFF10) --------------------------------------------------------
int __cdecl sub_4EFF10(int a1)
{
  int v1; // edi
  unsigned __int16 v2; // ax
  int v3; // ecx
  unsigned int v4; // ecx
  int result; // eax

  v1 = *(_DWORD *)(a1 + 748);
  sub_4EFD80(*(_DWORD *)(v1 + 276));
  sub_4EFC80(*(_DWORD *)(v1 + 276));
  *(_BYTE *)(*(_DWORD *)(v1 + 276) + 3684) = 1;
  sub_4FC180(a1);
  sub_4EEDC0(a1, 0);
  sub_4EFE10(*(_DWORD *)(v1 + 276));
  v2 = *(_WORD *)(v1 + 8);
  v3 = *(_DWORD *)(v1 + 276);
  *(_WORD *)(v1 + 4) = v2;
  *(_WORD *)(v1 + 6) = v2;
  sub_56F870(*(_DWORD *)(v3 + 4596), v2);
  *(_DWORD *)(v1 + 192) = 0;
  *(_DWORD *)(v1 + 196) = 0;
  *(_DWORD *)(v1 + 200) = 0;
  *(_DWORD *)(v1 + 204) = 0;
  *(_DWORD *)(v1 + 208) = 0;
  *(_BYTE *)(v1 + 212) = 0;
  sub_4EE6F0(a1);
  v4 = *(_DWORD *)(a1 + 16) & 0xFFEB3FE7;
  *(_BYTE *)(a1 + 541) = 0;
  *(_DWORD *)(a1 + 16) = v4;
  sub_4FA020((_DWORD *)a1, 13);
  sub_4FF580(a1);
  sub_4FEAE0(a1);
  sub_4EE9D0(a1);
  sub_4F7950(a1);
  sub_4D85C0(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064), (_DWORD *)a1);
  sub_4D88C0(*(unsigned __int8 *)(*(_DWORD *)(v1 + 276) + 2064), a1);
  *(_DWORD *)(a1 + 520) = 0;
  result = -559023410;
  *(_DWORD *)(*(_DWORD *)(v1 + 276) + 3664) = -559023410;
  *(_DWORD *)(*(_DWORD *)(v1 + 276) + 3660) = -559023410;
  return result;
}

//----- (004F0040) --------------------------------------------------------
int __cdecl sub_4F0040(int a1)
{
  int v1; // eax
  int v2; // edi
  int v3; // edx
  int *v4; // eax
  int v5; // eax
  int *v6; // eax
  int *v7; // eax
  int *v8; // eax
  int *v9; // eax
  _WORD *v10; // ecx
  int v11; // eax
  int v12; // ecx
  double v13; // st7
  int result; // eax

  v1 = *(_DWORD *)&byte_5D4594[1568272];
  v2 = *(_DWORD *)(a1 + 748);
  if ( !*(_DWORD *)&byte_5D4594[1568272] )
  {
    v1 = sub_4E3AA0((CHAR *)&byte_587000[206628]);
    *(_DWORD *)&byte_5D4594[1568272] = v1;
  }
  if ( !(*(_DWORD *)(a1 + 16) & 0x8020) )
  {
    if ( *(unsigned __int16 *)(a1 + 4) == v1 )
    {
      sub_50A3A0(a1);
      v3 = *(_DWORD *)(v2 + 484);
      *(_DWORD *)(v2 + 1360) = 4;
      *(float *)(v2 + 1312) = *(float *)(v3 + 112) + *(float *)(a1 + 176) + 10.0;
      goto LABEL_15;
    }
    if ( sub_534B60(a1) )
    {
      sub_50A3A0(a1);
      sub_50A260(a1, 29);
      *(_DWORD *)(v2 + 1304) = 1042536202;
    }
    else if ( sub_534B10(a1) )
    {
      sub_50A3A0(a1);
      v4 = sub_50A260(a1, 10);
      if ( v4 )
      {
        v4[1] = 0;
        *((_BYTE *)v4 + 12) = -1;
      }
      *(_DWORD *)(v2 + 1304) = 1042536202;
    }
    else
    {
      if ( !sub_534B90(a1) )
        goto LABEL_15;
      sub_50A3A0(a1);
      sub_50A260(a1, 0);
      v5 = *(_DWORD *)(v2 + 1440);
      BYTE1(v5) |= 1u;
      *(_DWORD *)(v2 + 1304) = 1042536202;
      *(_DWORD *)(v2 + 1440) = v5;
    }
    *(_DWORD *)(v2 + 1360) = 38;
  }
LABEL_15:
  switch ( *(_DWORD *)(v2 + 1360) )
  {
    case 3:
      v7 = sub_50A260(a1, 3);
      if ( v7 )
      {
        v7[1] = *(_DWORD *)(a1 + 56);
        v7[2] = *(_DWORD *)(a1 + 60);
        v7[3] = 0;
      }
      break;
    case 4:
      v9 = sub_50A260(a1, 4);
      if ( v9 )
      {
        v9[1] = *(_DWORD *)(a1 + 56);
        v9[2] = *(_DWORD *)(a1 + 60);
        v9[3] = *(__int16 *)(a1 + 124);
      }
      break;
    case 0xA:
      if ( sub_534390(a1) )
      {
        sub_50A260(a1, 5);
      }
      else
      {
        v8 = sub_50A260(a1, 10);
        if ( v8 )
        {
          v8[1] = 0;
          *((_BYTE *)v8 + 12) = *(_BYTE *)(v2 + 1332);
        }
      }
      break;
    case 0xF:
      v6 = sub_50A260(a1, 15);
      if ( v6 )
      {
        v6[1] = *(_DWORD *)(a1 + 56);
        v6[2] = *(_DWORD *)(a1 + 60);
        v6[3] = *(_DWORD *)&byte_5D4594[2598000];
      }
      break;
    case 0x26:
      break;
    default:
      sub_50A260(a1, 0);
      break;
  }
  *(_DWORD *)(v2 + 1360) = 38;
  *(_DWORD *)(v2 + 376) = *(__int16 *)(a1 + 124);
  *(_DWORD *)(v2 + 380) = *(_DWORD *)(a1 + 56);
  *(_DWORD *)(v2 + 384) = *(_DWORD *)(a1 + 60);
  v10 = *(_WORD **)(a1 + 556);
  if ( *v10 == v10[2] )
    sub_4E4560(a1, (__int64)((double)(unsigned __int16)v10[2] * *(float *)(v2 + 1352)));
  *(_WORD *)(*(_DWORD *)(a1 + 556) + 2) = **(_WORD **)(a1 + 556);
  v11 = v2 + 412;
  v12 = 32;
  do
  {
    v11 += 2;
    --v12;
    *(_WORD *)(v11 - 2) = **(_WORD **)(a1 + 556);
  }
  while ( v12 );
  if ( *(_BYTE *)(a1 + 12) & 0x30 )
    v13 = *(float *)(v2 + 1328) * 0.5 + 1.7;
  else
    v13 = sub_416030(0.94999999, 1.05) * *(float *)(a1 + 548);
  *(float *)(a1 + 548) = v13;
  if ( sub_534300(a1) )
    *(_DWORD *)(v2 + 1356) = 1120403456;
  result = *(_DWORD *)(v2 + 1440);
  if ( result & 0x40 )
    *(_DWORD *)(v2 + 1356) = 0;
  if ( (result & 0x8000) != 0 )
  {
    BYTE1(result) |= 0x40u;
    *(_DWORD *)(v2 + 1440) = result;
  }
  return result;
}

//----- (004F0390) --------------------------------------------------------
_DWORD *__cdecl sub_4F0390(int a1)
{
  _DWORD *result; // eax

  result = *(_DWORD **)(a1 + 748);
  result[1] = 32;
  *result = 32;
  return result;
}

//----- (004F03B0) --------------------------------------------------------
int __cdecl sub_4F03B0(int a1)
{
  _BYTE *v1; // esi
  int result; // eax

  v1 = *(_BYTE **)(a1 + 748);
  *v1 = sub_415FA0(55, 60);
  v1[1] = 1;
  v1[2] = 0;
  result = sub_415FA0(0, 255);
  *(_WORD *)(a1 + 126) = result;
  return result;
}

//----- (004F0400) --------------------------------------------------------
int *__cdecl sub_4F0400(int a1)
{
  int *result; // eax

  result = (int *)a1;
  if ( !(*(_BYTE *)(a1 + 20) & 0xE) )
    result = sub_4E4800(a1, (int *)2);
  return result;
}

//----- (004F0420) --------------------------------------------------------
_DWORD *__cdecl sub_4F0420(_DWORD *a1)
{
  _DWORD *result; // eax
  int v2; // edx

  result = a1;
  v2 = a1[15];
  a1[39] = a1[14];
  a1[40] = v2;
  return result;
}

//----- (004F0450) --------------------------------------------------------
int __cdecl sub_4F0450(int a1)
{
  int v1; // edi
  __int16 v2; // ax
  int result; // eax

  v1 = *(_DWORD *)(a1 + 748);
  v2 = sub_509E00(*(_DWORD **)(a1 + 692));
  *(_WORD *)(a1 + 126) = v2;
  *(_WORD *)(a1 + 124) = v2;
  result = sub_4E3AA0((CHAR *)(v1 + 16));
  *(_DWORD *)(v1 + 12) = result;
  return result;
}

//----- (004F0490) --------------------------------------------------------
int __cdecl sub_4F0490(int a1)
{
  int result; // eax

  result = sub_509E00(*(_DWORD **)(a1 + 692));
  *(_WORD *)(a1 + 126) = result;
  *(_WORD *)(a1 + 124) = result;
  return result;
}

//----- (004F04B0) --------------------------------------------------------
int __cdecl sub_4F04B0(int a1)
{
  int result; // eax
  _DWORD *v2; // edi
  char *v3; // eax
  int v4; // esi
  int v5; // ecx
  int v6; // esi
  int v7; // [esp+4h] [ebp-4h]
  float v8; // [esp+Ch] [ebp+4h]
  float v9; // [esp+Ch] [ebp+4h]

  result = a1;
  v2 = *(_DWORD **)(a1 + 692);
  if ( !*v2 )
  {
    v3 = sub_416EA0();
    v4 = 0;
    v7 = 0;
    v8 = 0.0;
    if ( v3 )
    {
      do
      {
        v5 = *((_DWORD *)v3 + 514);
        if ( v5 )
          v8 = v8 + *(float *)(v5 + 28);
        v3 = sub_416EE0((int)v3);
        ++v4;
      }
      while ( v3 );
      v7 = v4;
    }
    v9 = v8 / (double)v7;
    v6 = sub_415FA0((__int64)(v9 * *(double *)&byte_581450[10256]), (__int64)(v9 * *(double *)&byte_581450[10264]))
       - (unsigned __int64)(__int64)(v9 * *(double *)&byte_581450[10248]);
    result = sub_415FA0(15, 30);
    *v2 = result + v6;
  }
  return result;
}

//----- (004F0570) --------------------------------------------------------
int *__cdecl sub_4F0570(int a1)
{
  int *result; // eax

  result = (int *)a1;
  if ( !(*(_BYTE *)(a1 + 20) & 0xE) )
    result = sub_4E4800(a1, (int *)2);
  return result;
}

//----- (004F0590) --------------------------------------------------------
int __cdecl sub_4F0590(int a1)
{
  int v1; // esi
  double v2; // st7
  int result; // eax

  v1 = *(_DWORD *)(a1 + 748);
  switch ( *(unsigned __int8 *)(sub_51A930() + v1 + 83) )
  {
    case 0u:
      v2 = sub_419D40(&byte_587000[206868]);
      goto LABEL_6;
    case 1u:
      v2 = sub_419D40(&byte_587000[206900]);
      goto LABEL_6;
    case 2u:
      v2 = sub_419D40(&byte_587000[206936]);
      goto LABEL_6;
    case 3u:
      v2 = sub_419D40(&byte_587000[206968]);
LABEL_6:
      *(_BYTE *)(v1 + 87) = (__int64)v2;
      break;
    default:
      break;
  }
  result = *(_DWORD *)(a1 + 12);
  if ( result & 1 )
  {
    result = sub_509E90(0);
LABEL_15:
    *(_WORD *)(a1 + 124) = result;
    goto LABEL_16;
  }
  if ( result & 2 )
  {
    result = sub_509E90(2);
    goto LABEL_15;
  }
  if ( result & 4 )
  {
    result = sub_509E90(8);
    goto LABEL_15;
  }
  if ( result & 8 )
  {
    result = sub_509E90(6);
    goto LABEL_15;
  }
LABEL_16:
  *(_WORD *)(a1 + 126) = *(_WORD *)(a1 + 124);
  return result;
}

//----- (004F0630) --------------------------------------------------------
void sub_4F0630()
{
  srand(0x7DBu);
}

//----- (004F0640) --------------------------------------------------------
const char *sub_4F0640()
{
  char *v0; // eax
  unsigned __int8 *v1; // esi
  char v2; // cl
  CHAR *v3; // eax
  const char *v4; // eax
  unsigned __int8 *v5; // esi
  int v6; // eax
  const char *v7; // eax
  unsigned __int8 *v8; // esi
  int v9; // eax
  const char *v10; // eax
  unsigned __int8 *v11; // esi
  int v12; // eax
  const char *result; // eax
  unsigned __int8 *v14; // esi
  int v15; // eax

  v0 = *(char **)&byte_587000[208180];
  if ( *(_DWORD *)&byte_587000[208180] )
  {
    v1 = &byte_587000[208180];
    do
    {
      v2 = *v0;
      v3 = *(CHAR **)v1;
      if ( v2 == 35 )
        ++v3;
      *((_DWORD *)v1 + 1) = sub_4E3AA0(v3);
      v0 = (char *)*((_DWORD *)v1 + 5);
      v1 += 20;
    }
    while ( v0 );
  }
  v4 = *(const char **)&byte_587000[210712];
  if ( *(_DWORD *)&byte_587000[210712] )
  {
    v5 = &byte_587000[210712];
    do
    {
      v6 = sub_413290(v4);
      *((_DWORD *)v5 - 1) = sub_413330(v6);
      v4 = (const char *)*((_DWORD *)v5 + 6);
      v5 += 24;
    }
    while ( v4 );
  }
  v7 = *(const char **)&byte_587000[210856];
  if ( *(_DWORD *)&byte_587000[210856] )
  {
    v8 = &byte_587000[210856];
    do
    {
      v9 = sub_413290(v7);
      *((_DWORD *)v8 - 1) = sub_413330(v9);
      v7 = (const char *)*((_DWORD *)v8 + 6);
      v8 += 24;
    }
    while ( v7 );
  }
  v10 = *(const char **)&byte_587000[211000];
  if ( *(_DWORD *)&byte_587000[211000] )
  {
    v11 = &byte_587000[211000];
    do
    {
      v12 = sub_413290(v10);
      *((_DWORD *)v11 - 1) = sub_413330(v12);
      v10 = (const char *)*((_DWORD *)v11 + 6);
      v11 += 24;
    }
    while ( v10 );
  }
  result = *(const char **)&byte_587000[209344];
  if ( *(_DWORD *)&byte_587000[209344] )
  {
    v14 = &byte_587000[209344];
    do
    {
      v15 = sub_413290(result);
      *((_DWORD *)v14 - 1) = sub_413330(v15);
      result = (const char *)*((_DWORD *)v14 + 6);
      v14 += 24;
    }
    while ( result );
  }
  return result;
}

//----- (004F0720) --------------------------------------------------------
_DWORD *__cdecl sub_4F0720(int a1, unsigned int a2)
{
  int v2; // eax
  int v3; // ebx
  int *v4; // ebp
  _DWORD *result; // eax
  int v6; // esi
  char v7; // cl
  unsigned __int8 *v8; // eax
  unsigned int v9; // eax
  int v10; // ebp
  unsigned int v11; // edi
  char v12; // cl
  unsigned __int8 *v13; // esi
  unsigned int v14; // edx

  v2 = *(_DWORD *)&byte_5D4594[1568276];
  v3 = a1;
  v4 = *(int **)(a1 + 692);
  if ( !*(_DWORD *)&byte_5D4594[1568276] )
  {
    v2 = sub_4E3AA0((CHAR *)&byte_587000[212928]);
    *(_DWORD *)&byte_5D4594[1568276] = v2;
  }
  if ( *(unsigned __int16 *)(a1 + 4) == v2 )
    a2 += 2;
  switch ( v4[53] )
  {
    case 1:
      if ( sub_415FA0(0, 100) <= 75 )
        goto LABEL_14;
      result = 0;
      break;
    case 2:
      if ( sub_415FA0(0, 100) <= 50 )
        goto LABEL_14;
      result = 0;
      break;
    case 3:
      if ( sub_415FA0(0, 100) <= 25 )
        goto LABEL_14;
      result = 0;
      break;
    case 4:
      if ( sub_415FA0(0, 100) <= 5 )
        goto LABEL_14;
      result = 0;
      break;
    default:
LABEL_14:
      v6 = 0;
      v7 = 0;
      v8 = &byte_587000[207044];
      do
      {
        if ( (1 << v7) & *v4 )
          v6 += *v8;
        v8 += 8;
        ++v7;
      }
      while ( (int)v8 < (int)&byte_587000[207108] );
      if ( v6 )
      {
        v9 = sub_415FA0(1, v6);
        v10 = *v4;
        v11 = 0;
        v12 = 0;
        v13 = &byte_587000[207044];
        while ( 1 )
        {
          v14 = 1 << v12;
          if ( v10 & (1 << v12) )
          {
            v11 += *v13;
            v3 = a1;
            if ( v11 >= v9 )
              break;
          }
          v13 += 8;
          ++v12;
          if ( (int)v13 >= (int)&byte_587000[207108] )
          {
            v14 = a2;
            break;
          }
        }
        switch ( v14 )
        {
          case 1u:
            result = sub_4F09F0(v3, a2);
            break;
          case 2u:
            result = sub_4F0C70(v3);
            break;
          case 4u:
            result = sub_4F0D20(v3, a2);
            break;
          case 8u:
            result = (_DWORD *)sub_4F14E0(v3, a2);
            break;
          case 0x10u:
            result = sub_4F0E80(v3, a2);
            break;
          case 0x20u:
            result = sub_4F1D30(v3, a2);
            break;
          case 0x40u:
            result = sub_4F1C40(v3, a2);
            break;
          case 0x80u:
            result = sub_4F1F00(v3, a2);
            break;
          default:
            result = sub_4F1D30(v3, a2);
            break;
        }
      }
      else
      {
        result = 0;
      }
      break;
  }
  return result;
}

//----- (004F09F0) --------------------------------------------------------
_DWORD *__cdecl sub_4F09F0(int a1, unsigned int a2)
{
  int v2; // esi
  int v3; // ecx
  int i; // eax
  int v5; // eax
  int v6; // edx
  int v7; // ecx
  _DWORD *result; // eax
  int v9; // ebx
  int v10; // ebp
  int v11; // ecx
  unsigned __int8 *v12; // eax
  int v13; // edx
  int v14; // edi
  int v15; // esi
  int v16; // edx
  unsigned __int8 *j; // ecx
  int v18; // eax

  v2 = *(_DWORD *)(a1 + 692);
  if ( *(_BYTE *)(v2 + 4) & 1 )
  {
    v3 = 0;
    for ( i = 0; i < 137; ++i )
    {
      if ( *(_BYTE *)(v2 + i + 8) == 1 )
        ++v3;
    }
    if ( v3 )
    {
      v5 = sub_415FA0(0, v3 - 1);
      v6 = 0;
      v7 = 0;
      while ( 1 )
      {
        if ( *(_BYTE *)(v2 + v7 + 8) == 1 )
        {
          if ( v6 == v5 )
          {
            v9 = v7;
            goto LABEL_27;
          }
          ++v6;
        }
        if ( ++v7 >= 137 )
          return 0;
      }
    }
    return 0;
  }
  v10 = sub_4F0B60(a2);
  v11 = 0;
  if ( !*(_DWORD *)&byte_587000[207108] )
    return 0;
  v12 = &byte_587000[207104];
  do
  {
    if ( v10 & *((_DWORD *)v12 + 2) )
      v11 += *v12;
    v13 = *((_DWORD *)v12 + 4);
    v12 += 12;
  }
  while ( v13 );
  if ( !v11 )
    return 0;
  v14 = sub_415FA0(0, v11 - 1);
  v15 = 0;
  v16 = 0;
  if ( !*(_DWORD *)&byte_587000[207108] )
    return 0;
  for ( j = &byte_587000[207104]; ; j += 12 )
  {
    if ( v10 & *((_DWORD *)j + 2) )
    {
      v15 += *j;
      if ( v14 < v15 )
        break;
    }
    v18 = *((_DWORD *)j + 4);
    ++v16;
    if ( !v18 )
      return 0;
  }
  v9 = *(_DWORD *)&byte_587000[12 * v16 + 207108];
LABEL_27:
  if ( !v9 )
    return 0;
  if ( sub_57AEA0(1, v9) || sub_57AEA0(2, v9) )
  {
    if ( sub_57AEA0(1, v9) )
    {
      if ( sub_57AEA0(2, v9) )
        return 0;
      result = sub_4E3810((CHAR *)&byte_587000[213260]);
    }
    else
    {
      result = sub_4E3810((CHAR *)&byte_587000[213244]);
    }
  }
  else
  {
    result = sub_4E3810((CHAR *)&byte_587000[213228]);
  }
  if ( !result )
    return 0;
  *(_BYTE *)result[184] = v9;
  return result;
}

//----- (004F0B60) --------------------------------------------------------
int __cdecl sub_4F0B60(unsigned int a1)
{
  unsigned int v2; // eax
  float *v3; // eax
  int v4; // eax
  int v5; // ecx
  float *v6; // edx
  double v7; // st7
  int v8; // [esp+0h] [ebp-18h]
  float v9[5]; // [esp+4h] [ebp-14h]
  float v10; // [esp+1Ch] [ebp+4h]

  v9[0] = 0.0;
  v9[1] = 0.0;
  v9[2] = 0.0;
  v9[3] = 0.0;
  v9[4] = 0.0;
  if ( a1 > 0xA )
    return 16;
  switch ( a1 )
  {
    case 0u:
      return 1;
    case 1u:
      v9[0] = 87.5;
      v9[1] = 12.5;
      goto LABEL_12;
    case 9u:
      v9[3] = 12.5;
      v9[4] = 87.5;
      goto LABEL_12;
    case 0xAu:
      return 16;
  }
  if ( a1 & 1 )
  {
    v2 = a1 >> 1;
    v9[v2] = 75.0;
    *(int *)((char *)&v8 + v2 * 4) = 1095237632;
    v9[v2 + 1] = 12.5;
  }
  else
  {
    v3 = &v9[a1 >> 1];
    *(v3 - 1) = 50.0;
    *v3 = 50.0;
  }
LABEL_12:
  v8 = 545;
  v4 = sub_415FA0(0, 200);
  v5 = 0;
  v6 = v9;
  v7 = 0.0;
  while ( 1 )
  {
    v7 = v7 + *v6;
    v10 = (double)v4 * 0.5;
    if ( v10 <= v7 )
      break;
    ++v5;
    ++v6;
    if ( v5 >= 5 )
      return 1;
  }
  return 1 << v5;
}

//----- (004F0C70) --------------------------------------------------------
_DWORD *__cdecl sub_4F0C70(int a1)
{
  int v1; // esi
  int v2; // ecx
  int i; // eax
  _DWORD *result; // eax
  int v5; // eax
  int v6; // edx
  int v7; // ecx
  int v8; // ebx

  v1 = *(_DWORD *)(a1 + 692);
  if ( !(*(_BYTE *)(v1 + 4) & 2) )
  {
    v8 = sub_415FA0(1, 5);
    goto LABEL_16;
  }
  v2 = 0;
  for ( i = 0; i < 6; ++i )
  {
    if ( *(_BYTE *)(v1 + i + 145) == 1 )
      ++v2;
  }
  if ( !v2 )
    return 0;
  v5 = sub_415FA0(0, v2 - 1);
  v6 = 0;
  v7 = 0;
  while ( *(_BYTE *)(v1 + v7 + 145) != 1 )
  {
LABEL_12:
    if ( ++v7 >= 6 )
      return 0;
  }
  if ( v6 != v5 )
  {
    ++v6;
    goto LABEL_12;
  }
  v8 = v7;
LABEL_16:
  if ( !v8 )
    return 0;
  result = sub_4E3810((CHAR *)&byte_587000[213400]);
  if ( result )
    *(_BYTE *)result[184] = v8;
  return result;
}

//----- (004F0D20) --------------------------------------------------------
_DWORD *__cdecl sub_4F0D20(int a1, unsigned int a2)
{
  int v2; // esi
  int v3; // ecx
  int i; // eax
  _DWORD *result; // eax
  int v6; // eax
  int v7; // edx
  int v8; // ecx
  int v9; // esi
  int v10; // ebp
  int v11; // ecx
  unsigned __int8 *v12; // eax
  int v13; // edx
  int v14; // edi
  int v15; // esi
  int v16; // edx
  unsigned __int8 *j; // ecx
  int v18; // eax
  _DWORD *v19; // ebx
  char *v20; // ebp
  char *v21; // edi

  v2 = *(_DWORD *)(a1 + 692);
  if ( *(_BYTE *)(v2 + 4) & 4 )
  {
    v3 = 0;
    for ( i = 0; i < 41; ++i )
    {
      if ( *(_BYTE *)(v2 + i + 151) == 1 )
        ++v3;
    }
    if ( v3 )
    {
      v6 = sub_415FA0(0, v3 - 1);
      v7 = 0;
      v8 = 0;
      while ( 1 )
      {
        if ( *(_BYTE *)(v2 + v8 + 151) == 1 )
        {
          if ( v7 == v6 )
          {
            v9 = v8;
            goto LABEL_29;
          }
          ++v7;
        }
        if ( ++v8 >= 41 )
          return 0;
      }
    }
    result = 0;
  }
  else
  {
    v10 = sub_4F0B60(a2);
    v11 = 0;
    if ( !*(_DWORD *)&byte_587000[207796] )
      goto LABEL_35;
    v12 = &byte_587000[207792];
    do
    {
      if ( v10 & *((_DWORD *)v12 + 2) )
        v11 += *v12;
      v13 = *((_DWORD *)v12 + 4);
      v12 += 12;
    }
    while ( v13 );
    if ( v11 )
    {
      v14 = sub_415FA0(0, v11 - 1);
      v15 = 0;
      v16 = 0;
      if ( !*(_DWORD *)&byte_587000[207796] )
        goto LABEL_36;
      for ( j = &byte_587000[207792]; ; j += 12 )
      {
        if ( v10 & *((_DWORD *)j + 2) )
        {
          v15 += *j;
          if ( v14 < v15 )
            break;
        }
        v18 = *((_DWORD *)j + 4);
        ++v16;
        if ( !v18 )
          return 0;
      }
      v9 = *(_DWORD *)&byte_587000[12 * v16 + 207796];
LABEL_29:
      if ( v9 )
      {
        result = sub_4E3810((CHAR *)&byte_587000[213492]);
        v19 = result;
        if ( result )
        {
          v20 = (char *)result[184];
          v21 = sub_427230(v9);
          result = v19;
          strcpy(v20, v21);
        }
      }
      else
      {
LABEL_36:
        result = 0;
      }
    }
    else
    {
LABEL_35:
      result = 0;
    }
  }
  return result;
}

//----- (004F0E80) --------------------------------------------------------
_DWORD *__cdecl sub_4F0E80(int a1, unsigned int a2)
{
  int v2; // ebx
  int v3; // edi
  unsigned __int8 *v4; // esi
  int v5; // eax
  int v7; // ebx
  int v8; // ebp
  int v9; // edi
  unsigned __int8 *i; // esi
  int v11; // eax
  int v12; // esi
  int v13; // ebp
  _DWORD *v14; // edi
  int v15; // eax
  int v16; // eax
  __int16 v17; // bx
  int v18; // eax
  int v19; // ecx
  unsigned __int8 *v20; // eax
  int v21; // edx
  int v22; // ecx
  unsigned __int8 *v23; // eax
  int v24; // edx
  int v25; // edx
  unsigned __int8 *v26; // eax
  int v27; // ecx
  int v28; // ecx
  unsigned __int8 *v29; // eax
  int v30; // edx
  int v31; // eax
  int v32; // esi
  int v33; // edx
  unsigned __int8 *v34; // ecx
  int v35; // edi
  int v36; // ecx
  unsigned __int8 *v37; // eax
  int v38; // esi
  int v39; // eax
  int v40; // esi
  int v41; // edx
  unsigned __int8 *v42; // ecx
  int v43; // edi
  int v44; // edx
  unsigned __int8 *v45; // eax
  int v46; // ecx
  int v47; // eax
  int v48; // edi
  int v49; // esi
  unsigned __int8 *v50; // ecx
  int v51; // edx
  signed int v52; // eax
  int v53; // ecx
  int v54; // eax
  int v55; // ebx
  int v56; // edx
  unsigned __int8 *v57; // eax
  int v58; // ecx
  int v59; // eax
  int v60; // edi
  int v61; // esi
  unsigned __int8 *v62; // ecx
  int v63; // edx
  int v64; // [esp+10h] [ebp-20h]
  int v65; // [esp+14h] [ebp-1Ch]
  int v66; // [esp+18h] [ebp-18h]
  unsigned __int8 v67[20]; // [esp+1Ch] [ebp-14h]

  v65 = 0;
  v2 = sub_4F0B60(a2);
  v3 = 0;
  v64 = v2;
  if ( !*(_DWORD *)&byte_587000[208180] )
    return 0;
  v4 = &byte_587000[208192];
  do
  {
    if ( *(v4 - 4) & 2 && v2 & *(_DWORD *)v4 && sub_4E3BA0(*((_DWORD *)v4 - 2)) )
      v3 += *(v4 - 16);
    v5 = *((_DWORD *)v4 + 2);
    v4 += 20;
  }
  while ( v5 );
  if ( !v3 )
    return 0;
  v7 = sub_415FA0(0, v3 - 1);
  v8 = 0;
  v9 = 0;
  if ( !*(_DWORD *)&byte_587000[208180] )
    return 0;
  for ( i = &byte_587000[208192]; ; i += 20 )
  {
    if ( *(i - 4) & 2 )
    {
      if ( v64 & *(_DWORD *)i )
      {
        if ( sub_4E3BA0(*((_DWORD *)i - 2)) )
        {
          v8 += *(i - 16);
          if ( v7 < v8 )
            break;
        }
      }
    }
    v11 = *((_DWORD *)i + 2);
    ++v9;
    if ( !v11 )
      return 0;
  }
  v12 = *(_DWORD *)&byte_587000[20 * v9 + 208184];
  if ( !v12 )
    return 0;
  v13 = sub_415D10(*(char **)&byte_587000[20 * v9 + 208184]);
  v14 = sub_4E3450(v12);
  v66 = (int)v14;
  if ( !v14 )
    return 0;
  switch ( v64 )
  {
    case 2:
      v15 = sub_415FA0(0, 1);
      goto LABEL_27;
    case 4:
      v15 = sub_415FA0(0, 2);
      goto LABEL_27;
    case 8:
      v15 = sub_415FA0(1, 3);
      goto LABEL_27;
    case 16:
      v15 = sub_415FA0(2, 4);
LABEL_27:
      if ( !v15 )
        return v14;
      *(_DWORD *)v67 = 0;
      *(_DWORD *)&v67[4] = 0;
      *(_DWORD *)&v67[8] = 0;
      *(_DWORD *)&v67[12] = 0;
      *(_WORD *)&v67[16] = 0;
      *(_WORD *)&v67[18] = 0;
      switch ( v15 )
      {
        case 1:
          v16 = sub_415FA0(1, 100);
          if ( v16 > 20 )
            v17 = (v16 > 50) + 1;
          else
            v17 = 4;
          break;
        case 2:
          v18 = sub_415FA0(1, 100);
          if ( v18 > 12 )
            v17 = v18 > 25 ? 3 : 6;
          else
            v17 = 5;
          break;
        case 3:
          v17 = 7;
          break;
        default:
          v17 = 15;
          if ( v15 != 4 )
            v17 = a2;
          break;
      }
      if ( v17 & 1 )
      {
        v19 = 0;
        if ( !*(_DWORD *)&byte_587000[210856] )
          goto LABEL_178;
        v20 = &byte_587000[210852];
        do
        {
          if ( v64 & *((_DWORD *)v20 + 2) && v13 & *(_DWORD *)(*(_DWORD *)v20 + 32) && !(v13 & *((_DWORD *)v20 + 3)) )
            ++v19;
          v21 = *((_DWORD *)v20 + 7);
          v20 += 24;
        }
        while ( v21 );
        if ( !v19 )
        {
LABEL_178:
          if ( v17 & 2 )
          {
            if ( v17 & 4 )
            {
              if ( !(v17 & 8) )
                v17 |= 8u;
            }
            else
            {
              v17 |= 4u;
            }
          }
          else
          {
            v17 |= 2u;
          }
          v17 &= 0xFFFEu;
        }
      }
      if ( v17 & 2 )
      {
        v22 = 0;
        if ( !*(_DWORD *)&byte_587000[211000] )
          goto LABEL_179;
        v23 = &byte_587000[210996];
        do
        {
          if ( v64 & *((_DWORD *)v23 + 2) && v13 & *(_DWORD *)(*(_DWORD *)v23 + 32) && !(v13 & *((_DWORD *)v23 + 3)) )
            ++v22;
          v24 = *((_DWORD *)v23 + 7);
          v23 += 24;
        }
        while ( v24 );
        if ( !v22 )
        {
LABEL_179:
          if ( v17 & 4 )
          {
            if ( !(v17 & 8) )
              v17 |= 8u;
          }
          else
          {
            v17 |= 4u;
          }
          v17 &= 0xFFFDu;
        }
      }
      if ( v17 & 4 )
      {
        v25 = 0;
        if ( !*(_DWORD *)&byte_587000[209344] )
          goto LABEL_180;
        v26 = &byte_587000[209340];
        do
        {
          if ( v64 & *((_DWORD *)v26 + 2)
            && v13 & *(_DWORD *)(*(_DWORD *)v26 + 32)
            && !(v13 & *((_DWORD *)v26 + 3))
            && *(_BYTE *)(*(_DWORD *)v26 + 36) & 1 )
          {
            ++v25;
          }
          v27 = *((_DWORD *)v26 + 7);
          v26 += 24;
        }
        while ( v27 );
        if ( !v25 )
LABEL_180:
          v17 &= 0xFFF3u;
      }
      if ( !v17 )
        return v14;
      if ( !(v17 & 1) )
        goto LABEL_103;
      v28 = 0;
      if ( !*(_DWORD *)&byte_587000[210856] )
        goto LABEL_103;
      v29 = &byte_587000[210852];
      do
      {
        if ( *((_DWORD *)v29 + 2) & v64 && v13 & *(_DWORD *)(*(_DWORD *)v29 + 32) && !(v13 & *((_DWORD *)v29 + 3)) )
          ++v28;
        v30 = *((_DWORD *)v29 + 7);
        v29 += 24;
      }
      while ( v30 );
      if ( !v28 )
        goto LABEL_103;
      v31 = sub_415FA0(0, v28 - 1);
      v32 = 0;
      v33 = 0;
      if ( !*(_DWORD *)&byte_587000[210856] )
        goto LABEL_103;
      v34 = &byte_587000[210852];
      break;
    default:
      return v14;
  }
  while ( 1 )
  {
    if ( !(v64 & *((_DWORD *)v34 + 2)) || !(v13 & *(_DWORD *)(*(_DWORD *)v34 + 32)) || v13 & *((_DWORD *)v34 + 3) )
      goto LABEL_100;
    if ( v32 == v31 )
      break;
    ++v32;
LABEL_100:
    v35 = *((_DWORD *)v34 + 7);
    v34 += 24;
    ++v33;
    if ( !v35 )
      goto LABEL_103;
  }
  *(_DWORD *)v67 = *(_DWORD *)&byte_587000[24 * v33 + 210852];
LABEL_103:
  if ( v17 & 2 )
  {
    v36 = 0;
    if ( *(_DWORD *)&byte_587000[211000] )
    {
      v37 = &byte_587000[210996];
      do
      {
        if ( v64 & *((_DWORD *)v37 + 2) && v13 & *(_DWORD *)(*(_DWORD *)v37 + 32) && !(v13 & *((_DWORD *)v37 + 3)) )
          ++v36;
        v38 = *((_DWORD *)v37 + 7);
        v37 += 24;
      }
      while ( v38 );
      if ( v36 )
      {
        v39 = sub_415FA0(0, v36 - 1);
        v40 = 0;
        v41 = 0;
        if ( *(_DWORD *)&byte_587000[211000] )
        {
          v42 = &byte_587000[210996];
          do
          {
            if ( v64 & *((_DWORD *)v42 + 2) && v13 & *(_DWORD *)(*(_DWORD *)v42 + 32) && !(v13 & *((_DWORD *)v42 + 3)) )
            {
              if ( v40 == v39 )
              {
                *(_DWORD *)&v67[4] = *(_DWORD *)&byte_587000[24 * v41 + 210996];
                break;
              }
              ++v40;
            }
            v43 = *((_DWORD *)v42 + 7);
            v42 += 24;
            ++v41;
          }
          while ( v43 );
        }
      }
    }
  }
  if ( v17 & 4 )
  {
    v44 = 0;
    if ( *(_DWORD *)&byte_587000[209344] )
    {
      v45 = &byte_587000[209340];
      do
      {
        if ( v64 & *((_DWORD *)v45 + 2)
          && v13 & *(_DWORD *)(*(_DWORD *)v45 + 32)
          && !(v13 & *((_DWORD *)v45 + 3))
          && *(_BYTE *)(*(_DWORD *)v45 + 36) & 1 )
        {
          ++v44;
        }
        v46 = *((_DWORD *)v45 + 7);
        v45 += 24;
      }
      while ( v46 );
      if ( v44 )
      {
        v47 = sub_415FA0(0, v44 - 1);
        v48 = 0;
        v49 = 0;
        if ( *(_DWORD *)&byte_587000[209344] )
        {
          v50 = &byte_587000[209340];
          do
          {
            if ( v64 & *((_DWORD *)v50 + 2)
              && v13 & *(_DWORD *)(*(_DWORD *)v50 + 32)
              && !(v13 & *((_DWORD *)v50 + 3))
              && *(_BYTE *)(*(_DWORD *)v50 + 36) & 1 )
            {
              if ( v48 == v47 )
              {
                v65 = v49;
                *(_DWORD *)&v67[8] = *(_DWORD *)&byte_587000[24 * v49 + 209340];
                break;
              }
              ++v48;
            }
            v51 = *((_DWORD *)v50 + 7);
            v50 += 24;
            ++v49;
          }
          while ( v51 );
        }
      }
    }
  }
  if ( v17 & 8 )
  {
    v52 = a2 >> 1;
    if ( (int)(a2 >> 1) >= 1 )
    {
      if ( v52 >= 5 )
        v52 = 4;
    }
    else
    {
      v52 = 1;
    }
    v53 = v52 - 1;
    v54 = v52 + 1;
    if ( v53 < 1 )
      v53 = 1;
    if ( v54 >= 5 )
      v54 = 4;
    v55 = sub_415FA0(v53, v54);
    v56 = 0;
    if ( *(_DWORD *)&byte_587000[209344] )
    {
      v57 = &byte_587000[209340];
      do
      {
        if ( v55 & *((_DWORD *)v57 + 2)
          && v13 & *(_DWORD *)(*(_DWORD *)v57 + 32)
          && !(v13 & *((_DWORD *)v57 + 3))
          && *(_BYTE *)(*(_DWORD *)v57 + 36) & 2 )
        {
          ++v56;
        }
        v58 = *((_DWORD *)v57 + 7);
        v57 += 24;
      }
      while ( v58 );
      if ( v56 )
      {
        v59 = sub_415FA0(0, v56 - 1);
        v60 = 0;
        v61 = 0;
        if ( *(_DWORD *)&byte_587000[209344] )
        {
          v62 = &byte_587000[209340];
          do
          {
            if ( v55 & *((_DWORD *)v62 + 2)
              && v13 & *(_DWORD *)(*(_DWORD *)v62 + 32)
              && !(v13 & *((_DWORD *)v62 + 3))
              && *(_BYTE *)(*(_DWORD *)v62 + 36) & 2 )
            {
              if ( v60 == v59 )
              {
                if ( byte_587000[24 * v65 + 209336] != byte_587000[24 * v61 + 209336] )
                  *(_DWORD *)&v67[12] = *(_DWORD *)&byte_587000[24 * v61 + 209340];
                break;
              }
              ++v60;
            }
            v63 = *((_DWORD *)v62 + 7);
            v62 += 24;
            ++v61;
          }
          while ( v63 );
        }
      }
    }
  }
  sub_4E4990(v66, (int *)v67);
  return (_DWORD *)v66;
}

//----- (004F14E0) --------------------------------------------------------
int __cdecl sub_4F14E0(int a1, unsigned int a2)
{
  int v2; // ebx
  int v3; // edi
  unsigned __int8 *v4; // esi
  int v5; // eax
  int v7; // ebx
  int v8; // edi
  int v9; // ebp
  unsigned __int8 *v10; // esi
  int v11; // eax
  char *v12; // esi
  _DWORD *v13; // eax
  int v14; // edi
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  __int16 v19; // bx
  int v20; // eax
  int v21; // ecx
  int v22; // ebp
  unsigned __int8 *v23; // eax
  int v24; // edx
  int v25; // ecx
  unsigned __int8 *v26; // eax
  int v27; // edx
  int v28; // edx
  unsigned __int8 *v29; // eax
  int v30; // ecx
  int v31; // ecx
  unsigned __int8 *v32; // eax
  int v33; // edx
  int v34; // eax
  int v35; // esi
  int v36; // edx
  unsigned __int8 *v37; // ecx
  int v38; // edi
  int v39; // ecx
  unsigned __int8 *v40; // eax
  int v41; // esi
  int v42; // eax
  int v43; // esi
  int v44; // edx
  unsigned __int8 *v45; // ecx
  int v46; // edi
  signed int v47; // eax
  int v48; // ecx
  int v49; // eax
  int v50; // ebp
  int v51; // edx
  unsigned __int8 *v52; // eax
  int v53; // ecx
  int v54; // eax
  int v55; // edi
  int v56; // esi
  unsigned __int8 *v57; // ecx
  int v58; // edx
  signed int v59; // eax
  int v60; // ecx
  int v61; // eax
  int v62; // ebp
  int v63; // edx
  unsigned __int8 *v64; // eax
  int v65; // ecx
  int v66; // eax
  int v67; // edi
  int v68; // esi
  unsigned __int8 *v69; // ecx
  int v70; // edx
  __int16 v71; // [esp+10h] [ebp-28h]
  int v72; // [esp+14h] [ebp-24h]
  int v73; // [esp+18h] [ebp-20h]
  int v74; // [esp+1Ch] [ebp-1Ch]
  int v75; // [esp+20h] [ebp-18h]
  unsigned __int8 v76[20]; // [esp+24h] [ebp-14h]

  v74 = 0;
  v2 = sub_4F0B60(a2);
  v3 = 0;
  v72 = v2;
  if ( !*(_DWORD *)&byte_587000[208180] )
    return 0;
  v4 = &byte_587000[208192];
  do
  {
    if ( *(v4 - 4) & 1 && v2 & *(_DWORD *)v4 && sub_4E3BA0(*((_DWORD *)v4 - 2)) )
      v3 += *(v4 - 16);
    v5 = *((_DWORD *)v4 + 2);
    v4 += 20;
  }
  while ( v5 );
  if ( !v3 )
    return 0;
  v7 = sub_415FA0(0, v3 - 1);
  v8 = 0;
  v9 = 0;
  if ( *(_DWORD *)&byte_587000[208180] )
  {
    v10 = &byte_587000[208192];
    while ( 1 )
    {
      if ( *(v10 - 4) & 1 )
      {
        if ( v72 & *(_DWORD *)v10 )
        {
          if ( sub_4E3BA0(*((_DWORD *)v10 - 2)) )
          {
            v8 += *(v10 - 16);
            if ( v7 < v8 )
              break;
          }
        }
      }
      v11 = *((_DWORD *)v10 + 2);
      v10 += 20;
      ++v9;
      if ( !v11 )
        goto LABEL_17;
    }
    v12 = *(char **)&byte_587000[20 * v9 + 208184];
  }
  else
  {
LABEL_17:
    v12 = (char *)a2;
  }
  if ( !v12 )
    return 0;
  v73 = sub_415880(v12);
  v13 = sub_4E3450((int)v12);
  v14 = (int)v13;
  v75 = (int)v13;
  if ( !v13 )
    return 0;
  v15 = v13[2];
  if ( v15 & 0x1000 && *(_DWORD *)(v14 + 12) & 0x47F0000 )
  {
    if ( **(_BYTE **)&byte_587000[20 * v9 + 208180] == 35 )
    {
      *(_DWORD *)v76 = 0;
      *(_DWORD *)&v76[4] = 0;
      v16 = sub_413290((const char *)&byte_587000[214024]);
      *(_DWORD *)&v76[8] = sub_413330(v16);
      *(_DWORD *)&v76[12] = 0;
      *(_WORD *)&v76[16] = 0;
      *(_WORD *)&v76[18] = 0;
      sub_4E4990(v14, (int *)v76);
    }
    return v14;
  }
  switch ( v72 )
  {
    case 2:
      v17 = sub_415FA0(0, 1);
      goto LABEL_33;
    case 4:
      v17 = sub_415FA0(0, 2);
      goto LABEL_33;
    case 8:
      v17 = sub_415FA0(1, 3);
      goto LABEL_33;
    case 16:
      v17 = sub_415FA0(2, 4);
LABEL_33:
      if ( !v17 )
        return v14;
      *(_DWORD *)v76 = 0;
      *(_DWORD *)&v76[4] = 0;
      *(_DWORD *)&v76[8] = 0;
      *(_DWORD *)&v76[12] = 0;
      *(_WORD *)&v76[16] = 0;
      *(_WORD *)&v76[18] = 0;
      switch ( v17 )
      {
        case 1:
          v18 = sub_415FA0(1, 100);
          if ( v18 > 20 )
          {
            v19 = (v18 > 50) + 1;
            LOBYTE(v71) = (v18 > 50) + 1;
          }
          else
          {
            v19 = 4;
            LOBYTE(v71) = 4;
          }
          break;
        case 2:
          v20 = sub_415FA0(1, 100);
          if ( v20 > 12 )
          {
            v19 = v20 > 25 ? 3 : 6;
            LOBYTE(v71) = v20 > 25 ? 3 : 6;
          }
          else
          {
            v19 = 5;
            LOBYTE(v71) = 5;
          }
          break;
        case 3:
          v19 = 7;
          LOBYTE(v71) = 7;
          break;
        case 4:
          v19 = 15;
          LOBYTE(v71) = 15;
          break;
        default:
          v19 = v71;
          break;
      }
      if ( !(v19 & 1) )
      {
        v22 = v73;
        goto LABEL_67;
      }
      v21 = 0;
      if ( !*(_DWORD *)&byte_587000[210712] )
      {
        v22 = v73;
LABEL_59:
        if ( v19 & 2 )
        {
          if ( v19 & 4 )
          {
            if ( !(v19 & 8) )
              v19 |= 8u;
            v19 &= 0xFFFEu;
            LOBYTE(v71) = v19;
          }
          else
          {
            v19 = (v19 | 4) & 0xFFFE;
            LOBYTE(v71) = v19;
          }
        }
        else
        {
          v19 = (v19 | 2) & 0xFFFE;
          LOBYTE(v71) = v19;
        }
        goto LABEL_67;
      }
      v22 = v73;
      v23 = &byte_587000[210708];
      do
      {
        if ( v72 & *((_DWORD *)v23 + 2) && v73 & *(_DWORD *)(*(_DWORD *)v23 + 28) && !(v73 & *((_DWORD *)v23 + 4)) )
          ++v21;
        v24 = *((_DWORD *)v23 + 7);
        v23 += 24;
      }
      while ( v24 );
      if ( !v21 )
        goto LABEL_59;
LABEL_67:
      if ( v19 & 2 )
      {
        v25 = 0;
        if ( !*(_DWORD *)&byte_587000[211000] )
          goto LABEL_196;
        v26 = &byte_587000[210996];
        do
        {
          if ( v72 & *((_DWORD *)v26 + 2) && v22 & *(_DWORD *)(*(_DWORD *)v26 + 28) && !(v22 & *((_DWORD *)v26 + 4)) )
            ++v25;
          v27 = *((_DWORD *)v26 + 7);
          v26 += 24;
        }
        while ( v27 );
        if ( !v25 )
        {
LABEL_196:
          if ( v19 & 4 )
          {
            if ( !(v19 & 8) )
              v19 |= 8u;
          }
          else
          {
            v19 |= 4u;
          }
          v19 &= 0xFFFDu;
          LOBYTE(v71) = v19;
        }
      }
      if ( v19 & 4 )
      {
        v28 = 0;
        if ( !*(_DWORD *)&byte_587000[209344] )
          goto LABEL_197;
        v29 = &byte_587000[209340];
        do
        {
          if ( v72 & *((_DWORD *)v29 + 2)
            && v22 & *(_DWORD *)(*(_DWORD *)v29 + 28)
            && !(v22 & *((_DWORD *)v29 + 4))
            && *(_BYTE *)(*(_DWORD *)v29 + 36) & 1 )
          {
            ++v28;
          }
          v30 = *((_DWORD *)v29 + 7);
          v29 += 24;
        }
        while ( v30 );
        if ( !v28 )
        {
LABEL_197:
          v19 &= 0xFFF3u;
          LOBYTE(v71) = v19;
        }
      }
      if ( !v19 )
        return v14;
      if ( v19 & 1 )
      {
        v31 = 0;
        if ( *(_DWORD *)&byte_587000[210712] )
        {
          v32 = &byte_587000[210708];
          do
          {
            if ( *((_DWORD *)v32 + 2) & v72 && v22 & *(_DWORD *)(*(_DWORD *)v32 + 28) && !(v22 & *((_DWORD *)v32 + 4)) )
              ++v31;
            v33 = *((_DWORD *)v32 + 7);
            v32 += 24;
          }
          while ( v33 );
          if ( v31 )
          {
            v34 = sub_415FA0(0, v31 - 1);
            v35 = 0;
            v36 = 0;
            if ( *(_DWORD *)&byte_587000[210712] )
            {
              v37 = &byte_587000[210708];
              do
              {
                if ( v72 & *((_DWORD *)v37 + 2)
                  && v22 & *(_DWORD *)(*(_DWORD *)v37 + 28)
                  && !(v22 & *((_DWORD *)v37 + 4)) )
                {
                  if ( v35 == v34 )
                  {
                    *(_DWORD *)v76 = *(_DWORD *)&byte_587000[24 * v36 + 210708];
                    break;
                  }
                  ++v35;
                }
                v38 = *((_DWORD *)v37 + 7);
                v37 += 24;
                ++v36;
              }
              while ( v38 );
            }
          }
        }
      }
      if ( v19 & 2 )
      {
        v39 = 0;
        if ( *(_DWORD *)&byte_587000[211000] )
        {
          v40 = &byte_587000[210996];
          do
          {
            if ( v72 & *((_DWORD *)v40 + 2) && v22 & *(_DWORD *)(*(_DWORD *)v40 + 28) && !(v22 & *((_DWORD *)v40 + 4)) )
              ++v39;
            v41 = *((_DWORD *)v40 + 7);
            v40 += 24;
          }
          while ( v41 );
          if ( v39 )
          {
            v42 = sub_415FA0(0, v39 - 1);
            v43 = 0;
            v44 = 0;
            if ( *(_DWORD *)&byte_587000[211000] )
            {
              v45 = &byte_587000[210996];
              do
              {
                if ( v72 & *((_DWORD *)v45 + 2)
                  && v22 & *(_DWORD *)(*(_DWORD *)v45 + 28)
                  && !(v22 & *((_DWORD *)v45 + 4)) )
                {
                  if ( v43 == v42 )
                  {
                    *(_DWORD *)&v76[4] = *(_DWORD *)&byte_587000[24 * v44 + 210996];
                    break;
                  }
                  ++v43;
                }
                v46 = *((_DWORD *)v45 + 7);
                v45 += 24;
                ++v44;
              }
              while ( v46 );
            }
          }
        }
      }
      if ( v19 & 4 )
      {
        v47 = a2 >> 1;
        if ( (int)(a2 >> 1) >= 1 )
        {
          if ( v47 >= 5 )
            v47 = 4;
        }
        else
        {
          v47 = 1;
        }
        v48 = v47 - 1;
        v49 = v47 + 1;
        if ( v48 < 1 )
          v48 = 1;
        if ( v49 >= 5 )
          v49 = 4;
        v50 = sub_415FA0(v48, v49);
        v51 = 0;
        if ( *(_DWORD *)&byte_587000[209344] )
        {
          v52 = &byte_587000[209340];
          do
          {
            if ( v50 & *((_DWORD *)v52 + 2)
              && v73 & *(_DWORD *)(*(_DWORD *)v52 + 28)
              && !(v73 & *((_DWORD *)v52 + 4))
              && *(_BYTE *)(*(_DWORD *)v52 + 36) & 1 )
            {
              ++v51;
            }
            v53 = *((_DWORD *)v52 + 7);
            v52 += 24;
          }
          while ( v53 );
          if ( v51 )
          {
            v54 = sub_415FA0(0, v51 - 1);
            v55 = 0;
            v56 = 0;
            if ( *(_DWORD *)&byte_587000[209344] )
            {
              v57 = &byte_587000[209340];
              do
              {
                if ( v50 & *((_DWORD *)v57 + 2) )
                {
                  if ( v73 & *(_DWORD *)(*(_DWORD *)v57 + 28)
                    && !(v73 & *((_DWORD *)v57 + 4))
                    && *(_BYTE *)(*(_DWORD *)v57 + 36) & 1 )
                  {
                    if ( v55 == v54 )
                    {
                      LOBYTE(v19) = v71;
                      v74 = v56;
                      *(_DWORD *)&v76[8] = *(_DWORD *)&byte_587000[24 * v56 + 209340];
                      break;
                    }
                    ++v55;
                  }
                  LOBYTE(v19) = v71;
                }
                v58 = *((_DWORD *)v57 + 7);
                v57 += 24;
                ++v56;
              }
              while ( v58 );
            }
          }
        }
      }
      if ( v19 & 8 )
      {
        v59 = a2 >> 1;
        if ( (int)(a2 >> 1) >= 1 )
        {
          if ( v59 >= 5 )
            v59 = 4;
        }
        else
        {
          v59 = 1;
        }
        v60 = v59 - 1;
        v61 = v59 + 1;
        if ( v60 < 1 )
          v60 = 1;
        if ( v61 >= 5 )
          v61 = 4;
        v62 = sub_415FA0(v60, v61);
        v63 = 0;
        if ( *(_DWORD *)&byte_587000[209344] )
        {
          v64 = &byte_587000[209340];
          do
          {
            if ( v62 & *((_DWORD *)v64 + 2)
              && v73 & *(_DWORD *)(*(_DWORD *)v64 + 28)
              && !(v73 & *((_DWORD *)v64 + 4))
              && *(_BYTE *)(*(_DWORD *)v64 + 36) & 2 )
            {
              ++v63;
            }
            v65 = *((_DWORD *)v64 + 7);
            v64 += 24;
          }
          while ( v65 );
          if ( v63 )
          {
            v66 = sub_415FA0(0, v63 - 1);
            v67 = 0;
            v68 = 0;
            if ( *(_DWORD *)&byte_587000[209344] )
            {
              v69 = &byte_587000[209340];
              do
              {
                if ( v62 & *((_DWORD *)v69 + 2)
                  && v73 & *(_DWORD *)(*(_DWORD *)v69 + 28)
                  && !(v73 & *((_DWORD *)v69 + 4))
                  && *(_BYTE *)(*(_DWORD *)v69 + 36) & 2 )
                {
                  if ( v67 == v66 )
                  {
                    if ( byte_587000[24 * v74 + 209336] != byte_587000[24 * v68 + 209336] )
                      *(_DWORD *)&v76[12] = *(_DWORD *)&byte_587000[24 * v68 + 209340];
                    break;
                  }
                  ++v67;
                }
                v70 = *((_DWORD *)v69 + 7);
                v69 += 24;
                ++v68;
              }
              while ( v70 );
            }
          }
        }
      }
      sub_4E4990(v75, (int *)v76);
      return v75;
    default:
      return v14;
  }
}
// 4F1776: variable 'v71' is possibly undefined

//----- (004F1C40) --------------------------------------------------------
_DWORD *__cdecl sub_4F1C40(int a1, unsigned int a2)
{
  int v2; // ebx
  int v3; // edi
  unsigned __int8 *v4; // esi
  int v5; // eax
  _DWORD *result; // eax
  int v7; // ebx
  int v8; // ebp
  int v9; // edi
  unsigned __int8 *i; // esi
  int v11; // eax
  int v12; // [esp+18h] [ebp+8h]

  v2 = sub_4F0B60(a2);
  v3 = 0;
  v12 = v2;
  if ( !*(_DWORD *)&byte_587000[208180] )
    return 0;
  v4 = &byte_587000[208192];
  do
  {
    if ( *(v4 - 4) & 4 && v2 & *(_DWORD *)v4 && sub_4E3BA0(*((_DWORD *)v4 - 2)) )
      v3 += *(v4 - 16);
    v5 = *((_DWORD *)v4 + 2);
    v4 += 20;
  }
  while ( v5 );
  if ( !v3 )
    return 0;
  v7 = sub_415FA0(0, v3 - 1);
  v8 = 0;
  v9 = 0;
  if ( !*(_DWORD *)&byte_587000[208180] )
    goto LABEL_24;
  for ( i = &byte_587000[208192]; ; i += 20 )
  {
    if ( *(i - 4) & 4 )
    {
      if ( *(_DWORD *)i & v12 )
      {
        if ( sub_4E3BA0(*((_DWORD *)i - 2)) )
        {
          v8 += *(i - 16);
          if ( v7 < v8 )
            break;
        }
      }
    }
    v11 = *((_DWORD *)i + 2);
    ++v9;
    if ( !v11 )
      return 0;
  }
  if ( *(_DWORD *)&byte_587000[20 * v9 + 208184] )
    result = sub_4E3450(*(_DWORD *)&byte_587000[20 * v9 + 208184]);
  else
LABEL_24:
    result = 0;
  return result;
}

//----- (004F1D30) --------------------------------------------------------
_DWORD *__cdecl sub_4F1D30(int a1, unsigned int a2)
{
  unsigned int v2; // ebx
  int v3; // eax
  _DWORD *result; // eax
  _DWORD *v5; // edi
  int *v6; // esi

  v2 = sub_4F0B60(a2);
  if ( v2 < 4 || sub_415FA0(1, 100) <= 90 )
  {
    if ( sub_415FA0(1, 2) == 1 )
      result = sub_4E3810((CHAR *)&byte_587000[214712]);
    else
      result = sub_4E3810((CHAR *)&byte_587000[214728]);
    v5 = result;
    if ( result )
    {
      v6 = (int *)result[173];
      switch ( v2 )
      {
        case 2u:
          *v6 = sub_415FA0(*(int *)&byte_587000[211144], *(int *)&byte_587000[211148]);
          result = v5;
          break;
        case 4u:
          *v6 = sub_415FA0(*(int *)&byte_587000[211152], *(int *)&byte_587000[211156]);
          result = v5;
          break;
        case 8u:
          *v6 = sub_415FA0(*(int *)&byte_587000[211160], *(int *)&byte_587000[211164]);
          result = v5;
          break;
        case 0x10u:
          *v6 = sub_415FA0(*(int *)&byte_587000[211168], *(int *)&byte_587000[211172]);
          result = v5;
          break;
        default:
          *v6 = sub_415FA0(*(int *)&byte_587000[211136], *(int *)&byte_587000[211140]);
          result = v5;
          break;
      }
    }
  }
  else
  {
    v3 = sub_415FA0(1, 100);
    if ( v3 >= 50 )
    {
      if ( v3 >= 90 )
        result = sub_4E3810((CHAR *)&byte_587000[214660]);
      else
        result = sub_4E3810((CHAR *)&byte_587000[214648]);
    }
    else
    {
      result = sub_4E3810((CHAR *)&byte_587000[214640]);
    }
  }
  return result;
}

//----- (004F1F00) --------------------------------------------------------
_DWORD *__cdecl sub_4F1F00(int a1, unsigned int a2)
{
  return sub_4F1D30(a1, a2);
}

//----- (004F1F20) --------------------------------------------------------
void sub_4F1F20()
{
  int v0; // ebp
  int v1; // eax
  int v2; // esi
  int v3; // ebx
  int v4; // eax
  _DWORD *v5; // edi
  _DWORD *v6; // eax
  _DWORD *v7; // esi
  _DWORD *v8; // edi
  int v9; // [esp+0h] [ebp-10h]
  int v10; // [esp+4h] [ebp-Ch]
  float2 a3; // [esp+8h] [ebp-8h]

  v9 = sub_4E3CC0();
  if ( !*(_DWORD *)&byte_5D4594[1568300] )
  {
    *(_DWORD *)&byte_5D4594[1568300] = sub_4E3AA0((CHAR *)&byte_587000[214944]);
    *(_DWORD *)&byte_5D4594[1568304] = sub_4E3AA0((CHAR *)&byte_587000[214960]);
  }
  sub_4F2110();
  sub_4F2210();
  v0 = sub_4DA790();
  if ( v0 )
  {
    do
    {
      v10 = sub_4DA7A0(v0);
      v1 = *(unsigned __int16 *)(v0 + 4);
      if ( (unsigned __int16)v1 == *(_DWORD *)&byte_5D4594[1568300] || v1 == *(_DWORD *)&byte_5D4594[1568304] )
      {
        if ( *(_BYTE *)(*(_DWORD *)(v0 + 692) + 216) & 0x80 )
        {
          v7 = sub_4F0720(v0, v9);
          if ( v7 )
          {
            sub_4DAA50((int)v7, 0, *(float *)(v0 + 56), *(float *)(v0 + 60));
            if ( v7[2] & 0x1000000 )
            {
              if ( v7[3] & 0xC )
              {
                v8 = sub_4E3810((CHAR *)&byte_587000[214980]);
                if ( v8 )
                {
                  a3 = *((float2 *)v7 + 7);
                  sub_4ED970(30.0, (float2 *)v7 + 7, &a3);
                  sub_4DAA50((int)v8, 0, a3.field_0, a3.field_4);
                }
              }
            }
          }
        }
        sub_4E5CC0(v0);
      }
      else if ( *(int *(__cdecl **)(int))(v0 + 688) == sub_4F0400 )
      {
        v2 = sub_4E7980(v0);
        if ( v2 )
        {
          do
          {
            v3 = sub_4E7990(v2);
            v4 = *(unsigned __int16 *)(v2 + 4);
            if ( (unsigned __int16)v4 == *(_DWORD *)&byte_5D4594[1568300] || v4 == *(_DWORD *)&byte_5D4594[1568304] )
            {
              v5 = sub_4F0720(v2, v9 + 1);
              sub_4ED0C0(v0, (int *)v2);
              sub_4E5CC0(v2);
              if ( v5 )
              {
                sub_4F3070(v0, (int)v5, 0);
                if ( v5[2] & 0x1000000 )
                {
                  if ( v5[3] & 0xC )
                  {
                    v6 = sub_4E3810((CHAR *)&byte_587000[214988]);
                    if ( v6 )
                      sub_4F3070(v0, (int)v6, 0);
                  }
                }
              }
            }
            v2 = v3;
          }
          while ( v3 );
        }
      }
      v0 = v10;
    }
    while ( v10 );
  }
}

//----- (004F2110) --------------------------------------------------------
void sub_4F2110()
{
  int v0; // esi
  int i; // eax
  int v2; // ecx
  int v3; // ebx
  int v4; // edi
  int j; // esi
  int v6; // eax
  _DWORD *v7; // eax

  v0 = 0;
  if ( !*(_DWORD *)&byte_5D4594[1568280] )
  {
    *(_DWORD *)&byte_5D4594[1568280] = sub_4E3AA0((CHAR *)&byte_587000[214996]);
    *(_DWORD *)&byte_5D4594[1568284] = sub_4E3AA0((CHAR *)&byte_587000[215012]);
  }
  for ( i = sub_4DA790(); i; i = sub_4DA7A0(i) )
  {
    v2 = *(unsigned __int16 *)(i + 4);
    if ( ((unsigned __int16)v2 == *(_DWORD *)&byte_5D4594[1568280] || v2 == *(_DWORD *)&byte_5D4594[1568284])
      && (**(_BYTE **)(i + 692) & 0x80) )
    {
      ++v0;
    }
  }
  v3 = sub_415FA0(0, v0 - 1);
  v4 = 0;
  for ( j = sub_4DA790(); j; j = sub_4DA7A0(j) )
  {
    v6 = *(unsigned __int16 *)(j + 4);
    if ( ((unsigned __int16)v6 == *(_DWORD *)&byte_5D4594[1568280] || v6 == *(_DWORD *)&byte_5D4594[1568284])
      && (**(_BYTE **)(j + 692) & 0x80) )
    {
      if ( v4 == v3 )
      {
        v7 = sub_4E3810((CHAR *)&byte_587000[215072]);
        if ( v7 )
        {
          sub_4DAA50((int)v7, 0, *(float *)(j + 56), *(float *)(j + 60));
          sub_4E5CC0(j);
          return;
        }
      }
      else
      {
        ++v4;
      }
    }
  }
}

//----- (004F2210) --------------------------------------------------------
int sub_4F2210()
{
  _DWORD *v0; // ebp
  int v1; // esi
  int v2; // edi
  int v3; // edi
  int v4; // esi
  int result; // eax
  int v6; // ecx
  unsigned int v7; // edi
  _DWORD *v8; // esi
  _DWORD *v9; // ebx
  int v10; // ecx
  int v11; // edx
  char v12; // cl
  int v13; // esi
  int v14; // ebx
  _DWORD *v15; // edi
  int v16; // eax
  int v17; // ecx
  int *v18; // ecx
  int v19; // edx
  int v20; // eax
  unsigned int v21; // ebx
  int v22; // esi
  _DWORD *v23; // edi
  int v24; // eax
  int v25; // ecx
  unsigned int v26; // esi
  int *v27; // edi
  float v28; // [esp+10h] [ebp-14h]
  _DWORD *lpMem; // [esp+14h] [ebp-10h]
  unsigned int v30; // [esp+18h] [ebp-Ch]
  unsigned int v31; // [esp+18h] [ebp-Ch]

  v0 = 0;
  lpMem = 0;
  v1 = sub_4E3CC0();
  v2 = sub_4E3CE0();
  if ( !*(_DWORD *)&byte_5D4594[1568288] )
  {
    *(_DWORD *)&byte_5D4594[1568288] = sub_4E3AA0((CHAR *)&byte_587000[215080]);
    *(_DWORD *)&byte_5D4594[1568292] = sub_4E3AA0((CHAR *)&byte_587000[215096]);
    *(_DWORD *)&byte_5D4594[1568296] = sub_4E3AA0((CHAR *)&byte_587000[215116]);
  }
  if ( v1 == 1 )
  {
    v28 = 0.5;
  }
  else
  {
    switch ( v2 )
    {
      case 1:
      case 2:
        v28 = 0.40000001;
        break;
      case 3:
      case 4:
        v28 = 0.69999999;
        break;
      case 5:
      case 6:
        v28 = 1.0;
        break;
      default:
        break;
    }
  }
  v3 = 0;
  v4 = 0;
  result = sub_4DA790();
  if ( result )
  {
    do
    {
      v6 = *(unsigned __int16 *)(result + 4);
      if ( (unsigned __int16)v6 == *(_DWORD *)&byte_5D4594[1568288] )
      {
        if ( !(*(_BYTE *)(*(_DWORD *)(result + 692) + 216) & 1) )
          ++v3;
      }
      else if ( v6 == *(_DWORD *)&byte_5D4594[1568296] )
      {
        ++v4;
      }
      result = sub_4DA7A0(result);
    }
    while ( result );
    if ( v3 )
    {
      v0 = malloc(4 * v3);
      if ( !v4 )
        goto LABEL_21;
    }
    else if ( !v4 )
    {
      return result;
    }
    lpMem = malloc(4 * v4);
LABEL_21:
    v7 = 0;
    v30 = 0;
    result = sub_4DA790();
    if ( result )
    {
      v8 = lpMem;
      v9 = v0;
      do
      {
        v10 = *(unsigned __int16 *)(result + 4);
        if ( (unsigned __int16)v10 == *(_DWORD *)&byte_5D4594[1568288] )
        {
          v11 = *(_DWORD *)(result + 692);
          v12 = *(_BYTE *)(v11 + 216);
          if ( v12 & 1 )
          {
            *(_BYTE *)(v11 + 216) = v12 | 0x80;
          }
          else
          {
            *v9 = result;
            ++v7;
            ++v9;
          }
        }
        else if ( v10 == *(_DWORD *)&byte_5D4594[1568292] )
        {
          *(_BYTE *)(*(_DWORD *)(result + 692) + 216) |= 0x80u;
        }
        else if ( v10 == *(_DWORD *)&byte_5D4594[1568296] )
        {
          *v8 = result;
          ++v8;
          ++v30;
        }
        result = sub_4DA7A0(result);
      }
      while ( result );
      if ( v7 )
      {
        v13 = v7 - 1;
        v14 = (__int64)((double)v7 * v28 + 0.5);
        if ( v7 != 1 )
        {
          v15 = &v0[v13];
          do
          {
            v16 = sub_415FA0(0, v13);
            v17 = v0[v16];
            v0[v16] = *v15;
            *v15 = v17;
            --v13;
            --v15;
          }
          while ( v13 );
        }
        if ( v14 )
        {
          v18 = v0;
          v19 = v14;
          do
          {
            v20 = *v18;
            ++v18;
            --v19;
            *(_BYTE *)(*(_DWORD *)(v20 + 692) + 216) |= 0x80u;
          }
          while ( v19 );
        }
        free(v0);
      }
      v21 = v30;
      if ( v30 )
      {
        v22 = v30 - 1;
        v31 = (__int64)((double)v30 * v28 + 0.5);
        if ( v21 != 1 )
        {
          v23 = &lpMem[v22];
          do
          {
            v24 = sub_415FA0(0, v22);
            v25 = lpMem[v24];
            lpMem[v24] = *v23;
            *v23 = v25;
            --v22;
            --v23;
          }
          while ( v22 );
        }
        v26 = 0;
        if ( v21 )
        {
          v27 = lpMem;
          do
          {
            if ( v26 >= v31 )
              sub_4E5CC0(*v27);
            ++v26;
            ++v27;
          }
          while ( v26 < v21 );
        }
        free(lpMem);
      }
    }
  }
  return result;
}
// 4F23B8: variable 'v28' is possibly undefined

//----- (004F24E0) --------------------------------------------------------
int __cdecl sub_4F24E0(int a1)
{
  int v1; // eax
  unsigned __int8 *v2; // ecx
  int result; // eax

  v1 = *(_DWORD *)&byte_587000[207108];
  if ( !*(_DWORD *)&byte_587000[207108] )
    goto LABEL_6;
  v2 = &byte_587000[207108];
  while ( v1 != a1 || !*((_DWORD *)v2 + 1) )
  {
    v1 = *((_DWORD *)v2 + 3);
    v2 += 12;
    if ( !v1 )
      goto LABEL_6;
  }
  if ( a1 && a1 != 34 && a1 != 27 && a1 != 9 && a1 != 41 )
    result = 1;
  else
LABEL_6:
    result = 0;
  return result;
}

//----- (004F2530) --------------------------------------------------------
BOOL __cdecl sub_4F2530(int a1)
{
  int v1; // eax
  unsigned __int8 *i; // ecx

  v1 = *(_DWORD *)&byte_587000[207796];
  if ( !*(_DWORD *)&byte_587000[207796] )
    return 0;
  for ( i = &byte_587000[207796]; v1 != a1 || !*((_DWORD *)i + 1); i += 12 )
  {
    v1 = *((_DWORD *)i + 3);
    if ( !v1 )
      return 0;
  }
  return a1 != 0;
}

//----- (004F2570) --------------------------------------------------------
BOOL __cdecl sub_4F2570(int a1)
{
  return a1 > 0 && a1 < 6;
}

//----- (004F2590) --------------------------------------------------------
int __cdecl sub_4F2590(int a1)
{
  int v1; // ebx
  int v3; // ecx
  int v4; // edx
  unsigned __int8 *v5; // eax
  int v6; // edi

  if ( !*(_DWORD *)&byte_5D4594[1568328] )
  {
    *(_DWORD *)&byte_5D4594[1568328] = sub_4E3AA0((CHAR *)&byte_587000[215208]);
    *(_DWORD *)&byte_5D4594[1568332] = sub_4E3AA0((CHAR *)&byte_587000[215216]);
    *(_DWORD *)&byte_5D4594[1568336] = sub_4E3AA0((CHAR *)&byte_587000[215224]);
    *(_DWORD *)&byte_5D4594[1568340] = sub_4E3AA0((CHAR *)&byte_587000[215232]);
    *(_DWORD *)&byte_5D4594[1568344] = sub_4E3AA0((CHAR *)&byte_587000[215252]);
    *(_DWORD *)&byte_5D4594[1568352] = sub_4E3AA0((CHAR *)&byte_587000[215268]);
    *(_DWORD *)&byte_5D4594[1568348] = sub_4E3AA0((CHAR *)&byte_587000[215280]);
  }
  v1 = *(_DWORD *)(a1 + 8);
  if ( v1 & 0x40 )
    return 0;
  if ( v1 & 0x10 )
    return (*(_DWORD *)(a1 + 12) & 0x1FF78) != 0;
  if ( v1 & 0x100 )
    return sub_4F2700(a1);
  v3 = *(unsigned __int16 *)(a1 + 4);
  if ( (unsigned __int16)v3 != *(_DWORD *)&byte_5D4594[1568328]
    && v3 != *(_DWORD *)&byte_5D4594[1568332]
    && v3 != *(_DWORD *)&byte_5D4594[1568336] )
  {
    v4 = 0;
    if ( *(_DWORD *)&byte_587000[208180] )
    {
      v5 = &byte_587000[208180];
      while ( *((_DWORD *)v5 + 1) != v3 )
      {
        v6 = *((_DWORD *)v5 + 5);
        v5 += 20;
        if ( !v6 )
          goto LABEL_18;
      }
      v4 = 1;
    }
LABEL_18:
    if ( v3 == *(_DWORD *)&byte_5D4594[1568340]
      || v3 == *(_DWORD *)&byte_5D4594[1568344]
      || v3 == *(_DWORD *)&byte_5D4594[1568352]
      || v3 == *(_DWORD *)&byte_5D4594[1568348] )
    {
      return sub_4F2B60(a1);
    }
    if ( v4 != 1 )
      return 0;
    if ( v1 & 0x1000000 )
      return sub_4F27A0(a1);
    if ( v1 & 0x2000000 )
      return sub_4F2B20(a1);
  }
  return 1;
}

//----- (004F2700) --------------------------------------------------------
int __cdecl sub_4F2700(int a1)
{
  int v1; // ecx
  int v2; // eax
  unsigned __int8 *i; // ecx
  int v5; // eax
  int v6; // ecx
  unsigned __int8 *j; // edx
  unsigned __int8 v8; // al

  v1 = *(_DWORD *)(a1 + 12);
  if ( v1 & 1 )
  {
    if ( *(_DWORD *)&byte_587000[207108] )
    {
      v2 = *(_DWORD *)&byte_587000[207108];
      for ( i = &byte_587000[207108]; v2 != **(unsigned __int8 **)(a1 + 736) || !*((_DWORD *)i + 1); i += 12 )
      {
        v2 = *((_DWORD *)i + 3);
        if ( !v2 )
          return 0;
      }
      return 1;
    }
    return 0;
  }
  if ( v1 & 2 )
  {
    v5 = sub_427010(*(const char **)(a1 + 736));
    v6 = *(_DWORD *)&byte_587000[207796];
    if ( *(_DWORD *)&byte_587000[207796] )
    {
      for ( j = &byte_587000[207796]; v6 != v5 || !*((_DWORD *)j + 1); j += 12 )
      {
        v6 = *((_DWORD *)j + 3);
        if ( !v6 )
          return 0;
      }
      return 1;
    }
    return 0;
  }
  if ( !(v1 & 4) )
    return 0;
  v8 = **(_BYTE **)(a1 + 736);
  if ( !v8 || v8 >= 6u )
    return 0;
  return 1;
}

//----- (004F27A0) --------------------------------------------------------
int __cdecl sub_4F27A0(int a1)
{
  int result; // eax

  result = sub_4F27E0(a1);
  if ( result )
  {
    result = sub_4F28C0(a1);
    if ( result )
      result = sub_4F2960(a1) != 0;
  }
  return result;
}

//----- (004F27E0) --------------------------------------------------------
int __cdecl sub_4F27E0(int a1)
{
  int v1; // edi
  int v2; // eax
  int v3; // esi
  int v4; // edx
  unsigned __int8 *i; // ecx
  int v6; // ebx
  unsigned __int8 *v8; // ecx
  int v9; // edx
  unsigned __int8 *j; // ecx
  int v11; // ebx

  v1 = **(_DWORD **)(a1 + 692);
  if ( !v1 )
    return 1;
  if ( *(_DWORD *)(a1 + 8) & 0x1000000 )
    v2 = sub_415820(a1);
  else
    v2 = sub_415C70(a1);
  v3 = *(_DWORD *)(a1 + 8) & 0x1000000;
  if ( v3 )
  {
    v4 = 0;
    if ( *(_DWORD *)&byte_587000[210712] )
    {
      for ( i = &byte_587000[210712]; *((_DWORD *)i - 1) != v1; i += 24 )
      {
        v6 = *((_DWORD *)i + 6);
        ++v4;
        if ( !v6 )
          return 0;
      }
      v8 = &byte_587000[24 * v4 + 210704];
      goto LABEL_18;
    }
    return 0;
  }
  v9 = 0;
  if ( !*(_DWORD *)&byte_587000[210856] )
    return 0;
  for ( j = &byte_587000[210856]; *((_DWORD *)j - 1) != v1; j += 24 )
  {
    v11 = *((_DWORD *)j + 6);
    ++v9;
    if ( !v11 )
      return 0;
  }
  v8 = &byte_587000[24 * v9 + 210848];
LABEL_18:
  if ( !v8 )
    return 0;
  if ( v3 )
  {
    if ( !(v2 & *(_DWORD *)(v1 + 28)) || v2 & *((_DWORD *)v8 + 5) )
      return 0;
  }
  else if ( !(v2 & *(_DWORD *)(v1 + 32)) || v2 & *((_DWORD *)v8 + 4) )
  {
    return 0;
  }
  return 1;
}

//----- (004F28C0) --------------------------------------------------------
int __cdecl sub_4F28C0(int a1)
{
  int v1; // esi
  int v2; // eax
  int v3; // edx
  unsigned __int8 *i; // ecx
  int v5; // ebp
  unsigned __int8 *v7; // ecx

  v1 = *(_DWORD *)(*(_DWORD *)(a1 + 692) + 4);
  if ( v1 )
  {
    if ( *(_DWORD *)(a1 + 8) & 0x1000000 )
      v2 = sub_415820(a1);
    else
      v2 = sub_415C70(a1);
    v3 = 0;
    if ( !*(_DWORD *)&byte_587000[211000] )
      return 0;
    for ( i = &byte_587000[211000]; *((_DWORD *)i - 1) != v1; i += 24 )
    {
      v5 = *((_DWORD *)i + 6);
      ++v3;
      if ( !v5 )
        return 0;
    }
    v7 = &byte_587000[24 * v3 + 210992];
    if ( !v7 )
      return 0;
    if ( *(_DWORD *)(a1 + 8) & 0x1000000 )
    {
      if ( !(v2 & *(_DWORD *)(v1 + 28)) || v2 & *((_DWORD *)v7 + 5) )
        return 0;
    }
    else if ( !(v2 & *(_DWORD *)(v1 + 32)) || v2 & *((_DWORD *)v7 + 4) )
    {
      return 0;
    }
  }
  return 1;
}

//----- (004F2960) --------------------------------------------------------
int __cdecl sub_4F2960(int a1)
{
  int v1; // eax
  int v2; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax
  int v6; // ebx
  int v7; // ecx
  char v8; // dl
  unsigned __int8 *v9; // edi
  int v10; // esi
  unsigned __int8 *v11; // edx
  int v12; // esi
  _BYTE *v13; // ecx
  unsigned __int8 *v14; // edx
  int v16; // [esp+10h] [ebp-4h]

  v16 = *(_DWORD *)(a1 + 692);
  if ( !*(_DWORD *)&byte_5D4594[1568308] )
  {
    v1 = sub_413290((const char *)&byte_587000[215292]);
    *(_DWORD *)&byte_5D4594[1568308] = sub_413330(v1);
    v2 = sub_413290((const char *)&byte_587000[215308]);
    *(_DWORD *)&byte_5D4594[1568312] = sub_413330(v2);
    v3 = sub_413290((const char *)&byte_587000[215324]);
    *(_DWORD *)&byte_5D4594[1568316] = sub_413330(v3);
    v4 = sub_413290((const char *)&byte_587000[215340]);
    *(_DWORD *)&byte_5D4594[1568320] = sub_413330(v4);
  }
  if ( *(_DWORD *)(a1 + 8) & 0x1000000 )
    v5 = sub_415820(a1);
  else
    v5 = sub_415C70(a1);
  v6 = 2;
  while ( 1 )
  {
    v7 = *(_DWORD *)(v16 + 4 * v6);
    if ( !v7 )
      goto LABEL_40;
    v8 = *(_BYTE *)(v7 + 36);
    v9 = 0;
    if ( v6 == 2 )
    {
      if ( !(v8 & 1) )
        return 0;
    }
    else if ( !(v8 & 2) )
    {
      return 0;
    }
    v10 = 0;
    if ( !*(_DWORD *)&byte_587000[209344] )
      goto LABEL_18;
    v11 = &byte_587000[209344];
    while ( *((_DWORD *)v11 - 1) != v7 )
    {
      v11 += 24;
      ++v10;
      if ( !*(_DWORD *)v11 )
        goto LABEL_18;
    }
    v9 = &byte_587000[24 * v10 + 209336];
    if ( !v9 )
    {
LABEL_18:
      if ( v7 == *(_DWORD *)&byte_5D4594[1568308] )
        break;
      if ( v7 != *(_DWORD *)&byte_5D4594[1568312]
        && v7 != *(_DWORD *)&byte_5D4594[1568316]
        && v7 != *(_DWORD *)&byte_5D4594[1568320] )
      {
        return 0;
      }
    }
    if ( v7 == *(_DWORD *)&byte_5D4594[1568308]
      || v7 == *(_DWORD *)&byte_5D4594[1568312]
      || v7 == *(_DWORD *)&byte_5D4594[1568316]
      || v7 == *(_DWORD *)&byte_5D4594[1568320] )
    {
      break;
    }
    if ( *(_DWORD *)(a1 + 8) & 0x1000000 )
    {
      if ( !(v5 & *(_DWORD *)(v7 + 28)) || v5 & *((_DWORD *)v9 + 5) )
        return 0;
    }
    else if ( !(v5 & *(_DWORD *)(v7 + 32)) || v5 & *((_DWORD *)v9 + 4) )
    {
      return 0;
    }
LABEL_40:
    if ( ++v6 >= 4 )
      return 1;
  }
  v12 = 0;
  if ( *(_DWORD *)&byte_587000[208180] )
  {
    v13 = *(_BYTE **)&byte_587000[208180];
    v14 = &byte_587000[208180];
    do
    {
      if ( *v13 == 35 && *((_DWORD *)v14 + 1) == *(unsigned __int16 *)(a1 + 4) )
        v12 = 1;
      v13 = (_BYTE *)*((_DWORD *)v14 + 5);
      v14 += 20;
    }
    while ( v13 );
    if ( v12 )
      goto LABEL_40;
  }
  return 0;
}

//----- (004F2B20) --------------------------------------------------------
int __cdecl sub_4F2B20(int a1)
{
  int result; // eax

  result = sub_4F27E0(a1);
  if ( result )
  {
    result = sub_4F28C0(a1);
    if ( result )
      result = sub_4F2960(a1) != 0;
  }
  return result;
}

//----- (004F2B60) --------------------------------------------------------
int __cdecl sub_4F2B60(int a1)
{
  int v1; // eax
  _DWORD *v2; // eax
  __int16 v4; // ax
  const char ***v5; // esi
  int v6; // edi

  if ( !*(_DWORD *)&byte_5D4594[1568324] )
  {
    v1 = sub_413290((const char *)&byte_587000[215356]);
    *(_DWORD *)&byte_5D4594[1568324] = sub_413330(v1);
  }
  if ( *(_DWORD *)(a1 + 8) & 0x1000000 && sub_415820(a1) & 0x10000 )
  {
    v2 = *(_DWORD **)(a1 + 692);
    if ( *v2 )
      return 0;
    if ( v2[1] )
      return 0;
    if ( v2[2] != *(_DWORD *)&byte_5D4594[1568324] )
      return 0;
    if ( v2[3] )
      return 0;
  }
  if ( *(_DWORD *)(a1 + 8) & 0x2000000 )
  {
    v4 = sub_415C70(a1);
    v5 = *(const char ****)(a1 + 692);
    if ( v4 & 0x405 )
    {
      v6 = 0;
      while ( !*v5 || !_strnicmp(**v5, (const char *)&byte_587000[215372], 8u) )
      {
        ++v6;
        ++v5;
        if ( v6 >= 4 )
          return 1;
      }
      return 0;
    }
  }
  return 1;
}

//----- (004F2C30) --------------------------------------------------------
BOOL __cdecl sub_4F2C30(int a1)
{
  int v1; // edi
  float v3; // [esp+0h] [ebp-Ch]

  if ( !*(_DWORD *)&byte_5D4594[1568356] )
  {
    *(_DWORD *)&byte_5D4594[1568356] = sub_4E3AA0((CHAR *)&byte_587000[215384]);
    *(_DWORD *)&byte_5D4594[1568360] = sub_4E3AA0((CHAR *)&byte_587000[215396]);
    *(_DWORD *)&byte_5D4594[1568364] = sub_4E3AA0((CHAR *)&byte_587000[215408]);
    *(_DWORD *)&byte_5D4594[1568368] = sub_4E3AA0((CHAR *)&byte_587000[215428]);
    *(_DWORD *)&byte_5D4594[1568372] = sub_4E3AA0((CHAR *)&byte_587000[215440]);
    *(_DWORD *)&byte_5D4594[1568376] = sub_4E3AA0((CHAR *)&byte_587000[215460]);
    *(_DWORD *)&byte_5D4594[1568380] = sub_4E3AA0((CHAR *)&byte_587000[215476]);
    *(_DWORD *)&byte_5D4594[1568384] = sub_4E3AA0((CHAR *)&byte_587000[215492]);
    *(_DWORD *)&byte_5D4594[1568388] = sub_4E3AA0((CHAR *)&byte_587000[215512]);
    *(_DWORD *)&byte_5D4594[1568392] = sub_4E3AA0((CHAR *)&byte_587000[215532]);
    *(_DWORD *)&byte_5D4594[1568396] = sub_4E3AA0((CHAR *)&byte_587000[215552]);
    *(_DWORD *)&byte_5D4594[1568400] = sub_4E3AA0((CHAR *)&byte_587000[215576]);
    *(_DWORD *)&byte_5D4594[1568404] = sub_4E3AA0((CHAR *)&byte_587000[215596]);
  }
  if ( !a1 || !(*(_BYTE *)(a1 + 8) & 4) )
    return 1;
  if ( sub_4E7D30(a1, *(int *)&byte_5D4594[1568356]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568360]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568364]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568368]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568372]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568376]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568380]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568384]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568388]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568392]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568396]) > 9
    || sub_4E7D30(a1, *(int *)&byte_5D4594[1568400]) > 9 )
  {
    return 0;
  }
  v3 = sub_419D40(&byte_587000[215616]);
  v1 = sub_419A70(v3);
  return sub_4E7D30(a1, *(int *)&byte_5D4594[1568404]) <= v1;
}

//----- (004F2E70) --------------------------------------------------------
BOOL __cdecl sub_4F2E70(int a1)
{
  int v1; // eax
  int v2; // esi
  unsigned __int8 *v3; // ecx

  v1 = *(_DWORD *)&byte_587000[207108];
  v2 = 0;
  if ( *(_DWORD *)&byte_587000[207108] )
  {
    v3 = &byte_587000[207108];
    while ( v1 != a1 || !*((_DWORD *)v3 + 1) )
    {
      v1 = *((_DWORD *)v3 + 3);
      v3 += 12;
      if ( !v1 )
        goto LABEL_8;
    }
    v2 = 1;
  }
LABEL_8:
  if ( a1 == 46 || a1 == 47 || a1 == 48 || a1 == 49 || a1 == 122 || a1 == 123 || a1 == 124 || a1 == 125 )
    v2 = 1;
  return a1 >= 75 && a1 <= 114 || v2;
}

//----- (004F2EF0) --------------------------------------------------------
BOOL __cdecl sub_4F2EF0(int a1)
{
  int v1; // eax
  int v2; // edi
  unsigned __int8 *v3; // ecx
  int *v4; // eax
  unsigned __int8 *v5; // edx
  int v6; // ecx
  int *v7; // eax
  int v8; // ecx

  v1 = *(_DWORD *)&byte_587000[207796];
  v2 = 0;
  if ( *(_DWORD *)&byte_587000[207796] )
  {
    v3 = &byte_587000[207796];
    while ( v1 != a1 || !*((_DWORD *)v3 + 1) )
    {
      v1 = *((_DWORD *)v3 + 3);
      v3 += 12;
      if ( !v1 )
        goto LABEL_8;
    }
    v2 = 1;
  }
LABEL_8:
  v4 = *(int **)&byte_587000[207032];
  v5 = &byte_587000[207032];
  if ( *(_DWORD *)&byte_587000[207032] )
  {
    do
    {
      v6 = *v4;
      v7 = v4 + 1;
      if ( v6 )
      {
        while ( 1 )
        {
          v8 = *v7;
          if ( *v7 == a1 )
            break;
          ++v7;
          if ( !v8 )
            goto LABEL_14;
        }
        v2 = 1;
      }
LABEL_14:
      v4 = (int *)*((_DWORD *)v5 + 1);
      v5 += 4;
    }
    while ( v4 );
  }
  return v2 != 0;
}

//----- (004F2F70) --------------------------------------------------------
int __cdecl sub_4F2F70(_DWORD *a1, int a2)
{
  int result; // eax

  if ( sub_53A420(a1, a2, 1, 1) || (result = sub_53E650(a1, a2, 1, 1)) != 0 )
    result = 1;
  return result;
}

//----- (004F2FB0) --------------------------------------------------------
int __cdecl sub_4F2FB0(_DWORD *a1, int a2)
{
  int result; // eax

  if ( sub_53A140(a1, a2, 1, 1) || (result = sub_53E430(a1, a2, 1, 1)) != 0 )
    result = 1;
  return result;
}

//----- (004F2FF0) --------------------------------------------------------
int __cdecl sub_4F2FF0(int a1, int a2)
{
  int v2; // ebp
  int *v3; // esi
  int result; // eax
  int (__cdecl *v5)(int, int, int); // ecx

  v2 = 2;
  v3 = (int *)(*(_DWORD *)(a1 + 692) + 8);
  do
  {
    result = *v3;
    if ( *v3 )
    {
      v5 = *(int (__cdecl **)(int, int, int))(result + 112);
      if ( v5 )
        result = v5(result, a2, a1);
    }
    ++v3;
    --v2;
  }
  while ( v2 );
  return result;
}

//----- (004F3030) --------------------------------------------------------
int __cdecl sub_4F3030(int a1, int a2)
{
  int v2; // ebp
  int *v3; // esi
  int result; // eax
  int (__cdecl *v5)(int, int, int); // ecx

  v2 = 2;
  v3 = (int *)(*(_DWORD *)(a1 + 692) + 8);
  do
  {
    result = *v3;
    if ( *v3 )
    {
      v5 = *(int (__cdecl **)(int, int, int))(result + 116);
      if ( v5 )
        result = v5(result, a2, a1);
    }
    ++v3;
    --v2;
  }
  while ( v2 );
  return result;
}

//----- (004F3070) --------------------------------------------------------
void __cdecl sub_4F3070(int a1, int a2, int a3)
{
  int v3; // ebp
  int v4; // eax
  int v5; // ebx
  int i; // eax
  int v7; // ecx

  v3 = 0;
  if ( a1 && a2 && !(*(_BYTE *)(a1 + 16) & 0x20) && !(*(_BYTE *)(a2 + 16) & 0x20) )
  {
    *(_DWORD *)(a2 + 500) = 0;
    *(_DWORD *)(a2 + 496) = *(_DWORD *)(a1 + 504);
    v4 = *(_DWORD *)(a1 + 504);
    if ( v4 )
      *(_DWORD *)(v4 + 500) = a2;
    *(_DWORD *)(a1 + 504) = a2;
    *(_DWORD *)(a2 + 492) = a1;
    sub_4EC290(a1, a2);
    if ( *(_BYTE *)(a1 + 8) & 4 )
    {
      v5 = *(_DWORD *)(*(_DWORD *)(a1 + 748) + 276);
      if ( a3 )
        sub_4D8A60(*(unsigned __int8 *)(v5 + 2064), a2);
      sub_56FBF0(*(_DWORD *)(v5 + 4632), (int *)a2);
      for ( i = *(_DWORD *)(a1 + 504); i; v3 += v7 )
      {
        v7 = *(unsigned __int8 *)(i + 488);
        i = *(_DWORD *)(i + 496);
      }
      *(_DWORD *)(v5 + 3656) = v3 > *(unsigned __int16 *)(a1 + 490);
    }
    if ( *(_BYTE *)(a2 + 8) & 0x40 )
      sub_501960(820, a1, 0, 0);
  }
}

//----- (004F3180) --------------------------------------------------------
bool __cdecl sub_4F3180(int a1, int a2)
{
  int v2; // esi
  _DWORD *v3; // eax
  bool result; // al

  if ( *(_BYTE *)(a1 + 8) & 4
    && ((v2 = sub_4F9FD0(a1), !(*(_DWORD *)(a2 + 8) & 0x2000000)) ? (v3 = sub_413250(*(unsigned __int16 *)(a2 + 4))) : (v3 = sub_413270(*(unsigned __int16 *)(a2 + 4))),
        v3) )
  {
    result = v2 >= *((unsigned __int16 *)v3 + 30);
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (004F31E0) --------------------------------------------------------
int __cdecl sub_4F31E0(int a1, int a2, int a3)
{
  BOOL v3; // eax
  int v4; // edi
  int v5; // ebp
  char *v6; // eax
  int v7; // ecx
  int result; // eax
  int v9; // eax
  int i; // ecx
  int v11; // edx
  int v12; // esi
  int v13; // esi

  v3 = sub_40A5C0(4096);
  v4 = a1;
  v5 = a2;
  if ( v3
    || !sub_419130(a2 + 48)
    || sub_419150(v4 + 48, v5 + 48)
    || (v6 = sub_418AB0(*(unsigned __int8 *)(v5 + 52))) == 0 )
  {
    if ( *(_DWORD *)(v5 + 492) )
    {
      result = 0;
    }
    else if ( *(_WORD *)(v4 + 490) )
    {
      v9 = *(_DWORD *)(v4 + 504);
      for ( i = 0; v9; i += v11 )
      {
        v11 = *(unsigned __int8 *)(v9 + 488);
        v9 = *(_DWORD *)(v9 + 496);
      }
      if ( 2 * *(unsigned __int16 *)(v4 + 490) - i >= *(unsigned __int8 *)(v5 + 488) )
      {
        if ( (*(_BYTE *)(v5 + 8) & 0x10) != 16
          || ((v12 = sub_4E7D30(v4, *(unsigned __int16 *)(v5 + 4)), !sub_40A5C0(6144)) ? (v13 = v12 - 3) : (v13 = v12 - 9),
              v13 < 0) )
        {
          sub_4DADE0(v5);
          sub_4F3070(v4, v5, a3);
          result = 1;
        }
        else
        {
          sub_4DA2C0(v4, (const char *)&byte_587000[215708], 0);
          result = 0;
        }
      }
      else
      {
        sub_4DA2C0(v4, (const char *)&byte_587000[215680], 0);
        result = 0;
      }
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    if ( *(_BYTE *)(v4 + 8) & 4 )
    {
      v7 = *(_DWORD *)(v4 + 748);
      a1 = (unsigned __int8)v6[56];
      sub_4DA0F0(*(unsigned __int8 *)(*(_DWORD *)(v7 + 276) + 2064), 16, &a1);
    }
    result = 0;
  }
  return result;
}

//----- (004F3350) --------------------------------------------------------
int __cdecl sub_4F3350(int a1, int a2, int a3)
{
  int v4; // ebx
  unsigned __int8 *v5; // eax

  if ( !a1 || !a2 )
    return 0;
  if ( !sub_419E60(a1) && !(*(_BYTE *)(a2 + 12) & 0x84) )
    (*(void (__cdecl **)(int, int))(a2 + 732))(a1, a2);
  if ( *(_BYTE *)(a2 + 16) & 0x20 )
    return 1;
  v4 = sub_4F31E0(a1, a2, a3);
  if ( v4 )
  {
    v5 = &byte_587000[215640];
    if ( *(_WORD *)&byte_587000[215646] )
    {
      while ( !(*(_DWORD *)(a2 + 12) & *(_DWORD *)v5) && !(*((_WORD *)v5 + 2) & *(_WORD *)(a2 + 24)) )
      {
        v5 += 8;
        if ( !*((_WORD *)v5 + 3) )
          return v4;
      }
      sub_501960(*((unsigned __int16 *)v5 + 3), a1, 0, 0);
    }
  }
  return v4;
}

//----- (004F3400) --------------------------------------------------------
int __cdecl sub_4F3400(int a1, int a2, int a3)
{
  int v3; // ebp
  int result; // eax
  int v5; // ebx
  char v6[10]; // [esp+Ch] [ebp-Ch]

  v3 = *(_DWORD *)(a2 + 748);
  if ( !(*(_BYTE *)(a1 + 8) & 4) )
    return 0;
  v5 = sub_4F31E0(a1, a2, a3);
  if ( v5 )
  {
    *(_DWORD *)(*(_DWORD *)(a1 + 748) + 264) = *(_DWORD *)&byte_5D4594[2598000];
    sub_4EC290(a1, a2);
    sub_4FF380(a1, 30, 0, 5);
    sub_501960(313, a1, 0, 0);
    *(_DWORD *)&v6[2] = *(_DWORD *)(a1 + 36);
    if ( sub_419130(a1 + 48) )
      *(_DWORD *)&v6[6] = *(unsigned __int8 *)(a1 + 52);
    else
      *(_DWORD *)&v6[6] = 0;
    sub_4DA180(10, v6);
    sub_417470(a2, 1);
  }
  result = v5;
  *(_DWORD *)(v3 + 4) = 0;
  return result;
}

//----- (004F34D0) --------------------------------------------------------
int __cdecl sub_4F34D0(int a1, int a2, int a3)
{
  int result; // eax

  sub_53F8E0(a1, a2);
  if ( *(_BYTE *)(a2 + 16) & 0x20 )
    result = 1;
  else
    result = sub_4F31E0(a1, a2, a3);
  return result;
}

//----- (004F3510) --------------------------------------------------------
int __cdecl sub_4F3510(int a1, int a2, int a3)
{
  int v3; // edi
  int result; // eax

  if ( sub_4EC4F0(a2, a1) )
  {
    v3 = sub_4F31E0(a1, a2, a3);
    if ( v3 )
      sub_501960(824, a1, 0, 0);
    result = v3;
  }
  else
  {
    if ( *(_BYTE *)(a1 + 8) & 4 )
      sub_501960(925, a1, 2, *(_DWORD *)(a1 + 36));
    result = 0;
  }
  return result;
}

//----- (004F3580) --------------------------------------------------------
int __cdecl sub_4F3580(int a1, int a2, int a3)
{
  int v3; // edi
  int v4; // edi
  char *v5; // ebx
  int j; // esi
  int i; // edi

  if ( !sub_4F31E0(a1, a2, a3) )
    return 0;
  if ( !(*(_BYTE *)(a1 + 8) & 4) )
    return 1;
  v3 = *(_DWORD *)(a1 + 748);
  if ( !sub_40A5C0(64) )
    return 1;
  sub_501960(307, a1, 0, 0);
  ++*(_DWORD *)(*(_DWORD *)(v3 + 276) + 2152);
  *(_DWORD *)(*(_DWORD *)(v3 + 276) + 2156) = sub_4D1600();
  sub_4D8CD0(a1);
  if ( !sub_419130(a1 + 48) )
  {
    if ( *(_DWORD *)(*(_DWORD *)(v3 + 276) + 2152) == sub_4D1600() )
    {
      sub_40A4D0(8);
      sub_4D8E90(a1, 1);
      sub_4D8EF0(a1);
      for ( i = sub_4DA7C0(); i; i = sub_4DA7F0(i) )
      {
        if ( i != a1 )
        {
          sub_4D8D40(i);
          sub_4D8EF0(i);
        }
      }
    }
    return 1;
  }
  v4 = 0;
  v5 = sub_418AB0(*(unsigned __int8 *)(a1 + 52));
  if ( v5 )
  {
    for ( j = sub_4DA7C0(); j; j = sub_4DA7F0(j) )
    {
      if ( sub_419180(j + 48, v5[57]) )
        v4 += *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(j + 748) + 276) + 2152);
    }
    if ( v4 == sub_4D1600() )
      sub_40A4D0(8);
  }
  return 1;
}

//----- (004F36F0) --------------------------------------------------------
int __cdecl sub_4F36F0(int a1, int a2, int a3, int a4)
{
  int v4; // eax
  int (__cdecl *v5)(int, int, int, int); // eax
  int v6; // eax
  int v7; // ebx
  int v8; // eax

  if ( !a1 )
    return 0;
  if ( !a2 )
    return 0;
  if ( !*(_WORD *)(a1 + 490) )
    return 0;
  if ( *(_BYTE *)(a2 + 16) & 0x20 )
    return 0;
  v4 = *(_DWORD *)(a1 + 16);
  if ( (v4 & 0x8000) != 0 || !sub_4E3BA0(*(unsigned __int16 *)(a2 + 4)) || !(*(_BYTE *)(a1 + 8) & 6) )
    return 0;
  v5 = *(int (__cdecl **)(int, int, int, int))(a2 + 708);
  if ( v5 )
    v6 = v5(a1, a2, a3, a4);
  else
    v6 = sub_4F31E0(a1, a2, a3);
  v7 = v6;
  if ( v6 )
  {
    v8 = *(_DWORD *)(a2 + 16);
    if ( v8 & 0x40 )
    {
      LOBYTE(v8) = v8 & 0xBF;
      *(_DWORD *)(a2 + 16) = v8;
      if ( *(_DWORD *)(a2 + 696) )
        sub_5117F0(a2);
    }
    if ( *(int *)(a2 + 768) != -1 )
    {
      sub_502490((int *)(a2 + 764), a1, a2);
      *(_DWORD *)(a2 + 768) = -1;
    }
  }
  return v7;
}

//----- (004F37D0) --------------------------------------------------------
int __cdecl sub_4F37D0(int a1, int a2, int a3)
{
  int v3; // ebx
  int *v4; // eax
  int v5; // edi
  char v7; // al
  double v8; // st7
  int v9; // ebp
  char v10; // al
  double v11; // st7
  int v12; // eax
  int v13; // edi
  float v14; // [esp+0h] [ebp-18h]
  float v15; // [esp+4h] [ebp-14h]
  int v16; // [esp+14h] [ebp-4h]
  int v17; // [esp+20h] [ebp+8h]

  v3 = a2;
  v4 = *(int **)(a2 + 736);
  v16 = 0;
  v5 = *v4;
  v17 = *v4;
  if ( sub_40A5C0(0x2000)
    && !sub_40A5C0(4096)
    && *(_BYTE *)(a1 + 8) & 4
    && !sub_57B3D0(v3, *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 2251)) )
  {
    sub_4DA2C0(a1, (const char *)&byte_587000[215732], 0);
    sub_501960(925, a1, 2, *(_DWORD *)(a1 + 36));
    return 0;
  }
  if ( sub_419E60(a1) )
    goto LABEL_36;
  if ( *(_BYTE *)(v3 + 12) & 0x10 && *(_DWORD *)(a1 + 556) )
  {
    if ( !(*(_BYTE *)(a1 + 8) & 4) )
      goto LABEL_17;
    v7 = *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(a1 + 748) + 276) + 2251);
    if ( v7 )
    {
      if ( v7 == 1 )
      {
        v8 = (double)v17 * *(float *)&byte_587000[312816];
      }
      else
      {
        if ( v7 != 2 )
          goto LABEL_17;
        v8 = (double)v17 * *(float *)&byte_587000[312800];
      }
    }
    else
    {
      v8 = (double)v17 * *(float *)&byte_587000[312784];
    }
    v15 = v8;
    v5 = sub_419A70(v15);
    v17 = v5;
LABEL_17:
    if ( v5 + **(unsigned __int16 **)(a1 + 556) < *(unsigned __int16 *)(*(_DWORD *)(a1 + 556) + 4) )
    {
      sub_4EE460(a1, v5);
      sub_501960(754, a1, 0, 0);
      v16 = 1;
    }
  }
  if ( !(*(_BYTE *)(v3 + 12) & 0x20) || !(*(_BYTE *)(a1 + 8) & 4) )
    goto LABEL_30;
  v9 = *(_DWORD *)(a1 + 748);
  v10 = *(_BYTE *)(*(_DWORD *)(v9 + 276) + 2251);
  if ( v10 )
  {
    if ( v10 == 1 )
    {
      v11 = (double)v17 * *(float *)&byte_587000[312820];
    }
    else
    {
      if ( v10 != 2 )
        goto LABEL_28;
      v11 = (double)v17 * *(float *)&byte_587000[312804];
    }
  }
  else
  {
    v11 = (double)v17 * *(float *)&byte_587000[312788];
  }
  v14 = v11;
  v5 = sub_419A70(v14);
LABEL_28:
  if ( v5 + *(unsigned __int16 *)(v9 + 4) < *(unsigned __int16 *)(v9 + 8) )
  {
    sub_4EEB80(a1, v5);
    sub_501960(755, a1, 0, 0);
    v16 = 1;
  }
LABEL_30:
  if ( *(_BYTE *)(v3 + 12) & 0x40 && *(_BYTE *)(a1 + 8) & 4 && *(_BYTE *)(a1 + 540) )
  {
    sub_4EE9D0(a1);
    v12 = sub_424800(14, 1);
    sub_501960(v12, a1, 0, 0);
    sub_4E5CC0(v3);
    return 1;
  }
  if ( v16 )
  {
    sub_4E5CC0(v3);
    return 1;
  }
LABEL_36:
  sub_5116F0(v3);
  v13 = sub_4F31E0(a1, v3, a3);
  if ( v13 == 1 )
    sub_501960(832, a1, 0, 0);
  return v13;
}

//----- (004F3A60) --------------------------------------------------------
int __cdecl sub_4F3A60(int a1, int a2, int a3)
{
  int *v3; // edi
  wchar_t *v4; // eax
  int result; // eax
  int v6; // edi
  int v7; // [esp-8h] [ebp-10h]

  if ( *(_BYTE *)(a1 + 8) & 4 )
  {
    v3 = *(int **)(a2 + 692);
    sub_4FA590(a1, *v3);
    sub_4E5CC0(a2);
    v7 = *v3;
    v4 = sub_40F1D0((char *)&byte_587000[215812], 0, (const char *)&byte_587000[215764], 709);
    sub_4D9EB0(a1, v4, v7);
    sub_501960(307, a1, 0, 0);
    result = 1;
  }
  else
  {
    v6 = sub_4F31E0(a1, a2, a3);
    if ( v6 )
      sub_501960(307, a1, 0, 0);
    result = v6;
  }
  return result;
}

//----- (004F3B00) --------------------------------------------------------
int __cdecl sub_4F3B00(int a1, int a2, int a3, int a4)
{
  int v4; // ebp
  int v5; // eax
  int v6; // ebx
  int v7; // esi
  _DWORD *v8; // edi
  char *v9; // eax
  _DWORD *v10; // ecx
  int v11; // edx
  int v12; // ebp
  int v13; // edi
  char v15; // bl
  char v16; // dl
  char v17; // dl
  int v18; // [esp+10h] [ebp-10h]
  unsigned __int8 *v19; // [esp+14h] [ebp-Ch]
  _DWORD *v20; // [esp+18h] [ebp-8h]
  int v21; // [esp+1Ch] [ebp-4h]

  v4 = a2;
  v5 = sub_415820(a2);
  v6 = a1;
  v18 = v5;
  if ( !(*(_BYTE *)(a1 + 8) & 4) )
    return sub_53A720(v6, v4, a3, a4);
  v21 = *(_DWORD *)(a1 + 748);
  if ( !(v5 & 0x82) )
    return sub_53A720(v6, v4, a3, a4);
  v7 = *(_DWORD *)(a1 + 504);
  v8 = *(_DWORD **)(a2 + 692);
  v20 = *(_DWORD **)(a2 + 692);
  v19 = *(unsigned __int8 **)(a2 + 736);
  if ( !v7 )
    return sub_53A720(v6, v4, a3, a4);
  while ( 1 )
  {
    if ( *(_WORD *)(v7 + 4) != *(_WORD *)(v4 + 4) || !(*(_DWORD *)(v7 + 8) & 0x1000000) || !(sub_415820(v7) & v18) )
      goto LABEL_15;
    v9 = *(char **)(v7 + 736);
    v10 = v8;
    v11 = *(_DWORD *)(v7 + 692) - (_DWORD)v8;
    v12 = 1;
    v13 = 4;
    do
    {
      if ( *(_DWORD *)((char *)v10 + v11) != *v10 )
        v12 = 0;
      ++v10;
      --v13;
    }
    while ( v13 );
    if ( v12 == 1 && !v9[2] && *v19 + (unsigned __int8)*v9 <= 250 )
      break;
    v6 = a1;
    v4 = a2;
    v8 = v20;
LABEL_15:
    v7 = *(_DWORD *)(v7 + 496);
    if ( !v7 )
      return sub_53A720(v6, v4, a3, a4);
  }
  v15 = v19[1] + v9[1];
  v16 = *v9;
  v9[1] = v15;
  v17 = *v19 + v16;
  *v9 = v17;
  sub_4D82B0(*(unsigned __int8 *)(*(_DWORD *)(v21 + 276) + 2064), (_DWORD *)v7, v15, v17);
  sub_4E5CC0(a2);
  sub_53A6C0(a1, a2);
  return 1;
}

//----- (004F3C60) --------------------------------------------------------
int __cdecl sub_4F3C60(int a1, int a2, int a3)
{
  int v4; // ebx

  if ( sub_40A5C0(6144) )
    sub_53F8E0(a1, a2);
  if ( *(_BYTE *)(a2 + 16) & 0x20 )
    return 1;
  v4 = sub_4F31E0(a1, a2, a3);
  if ( v4 )
  {
    if ( *(_BYTE *)(a2 + 12) & 1 )
    {
      sub_501960(826, a1, 0, 0);
      return v4;
    }
    sub_501960(828, a1, 0, 0);
  }
  return v4;
}

//----- (004F3CE0) --------------------------------------------------------
int __cdecl sub_4F3CE0(int a1, int a2, int a3)
{
  int v4; // esi

  if ( sub_40A5C0(6144) )
    sub_53F8E0(a1, a2);
  if ( *(_BYTE *)(a2 + 16) & 0x20 )
    return 1;
  v4 = sub_4F31E0(a1, a2, a3);
  if ( v4 )
    sub_501960(826, a1, 0, 0);
  return v4;
}

//----- (004F3D50) --------------------------------------------------------
int __cdecl sub_4F3D50(int a1, int a2, int a3)
{
  int v3; // ebx
  __int16 v4; // ax
  unsigned __int8 *v5; // ecx

  if ( !a1 || !a2 )
    return 0;
  v3 = sub_4F31E0(a1, a2, a3);
  if ( v3 )
  {
    v4 = *(_WORD *)&byte_5D4594[3815404];
    v5 = &byte_5D4594[3815404];
    if ( *(short *)&byte_5D4594[3815404] != -1 )
    {
      while ( v4 != *(_WORD *)(a2 + 4) )
      {
        v4 = *((_WORD *)v5 + 2);
        v5 += 4;
        if ( v4 == -1 )
          return v3;
      }
      sub_501960(*((unsigned __int16 *)v5 + 1), a1, 0, 0);
    }
  }
  return v3;
}

//----- (004F3DD0) --------------------------------------------------------
int __cdecl sub_4F3DD0(int a1, int a2)
{
  if ( !(*(_BYTE *)(a1 + 8) & 4) )
    return 0;
  ++*(_DWORD *)(*(_DWORD *)(a1 + 748) + 320);
  sub_4E5CC0(a2);
  sub_501960(1004, a1, 0, 0);
  return 1;
}

//----- (004F3E20) --------------------------------------------------------
void sub_4F3E20()
{
  srand(0x4E2Au);
}

//----- (004F3E30) --------------------------------------------------------
int __cdecl sub_4F3E30(unsigned __int16 a1, int a2, int a3)
{
  int v3; // ebp
  unsigned __int16 v4; // si
  _DWORD *v5; // eax
  _DWORD *v6; // esi
  int v7; // edx
  int v8; // eax
  int v10; // [esp+10h] [ebp-10Ch]
  int v11; // [esp+14h] [ebp-108h]
  int v12; // [esp+18h] [ebp-104h]
  char v13[256]; // [esp+1Ch] [ebp-100h]

  v3 = 0;
  if ( a3 <= 0 )
    return 1;
  while ( 1 )
  {
    if ( a1 < 0x3Cu )
    {
      sub_426AC0(&v10, 1u);
      sub_426AC0(v13, (unsigned __int8)v10);
      v13[(unsigned __int8)v10] = 0;
      v4 = sub_4E3AA0(v13);
      if ( !v4 )
        return 0;
    }
    else
    {
      sub_426AC0(&v11, 2u);
      v4 = sub_42C2B0(v11);
      if ( !v4 )
        return 0;
    }
    sub_426C20(&v12, 4u);
    v5 = sub_4E3450(v4);
    v6 = v5;
    if ( !v5 || !((int (__cdecl *)(_DWORD *, _DWORD))v5[176])(v5, 0) )
      break;
    v7 = *(_DWORD *)(a2 + 504);
    v6[125] = 0;
    v6[124] = v7;
    v8 = *(_DWORD *)(a2 + 504);
    if ( v8 )
      *(_DWORD *)(v8 + 500) = v6;
    ++v3;
    *(_DWORD *)(a2 + 504) = v6;
    v6[123] = a2;
    if ( v3 >= a3 )
      return 1;
  }
  return 0;
}
// 4F3E30: using guessed type char var_100[256];

//----- (004F3F50) --------------------------------------------------------
int __cdecl sub_4F3F50(int a1, int a2, int *a3)
{
  int v3; // eax
  int v4; // edi
  int result; // eax
  char *v6; // eax
  int v7; // eax
  int v8; // edi

  if ( sub_40A5C0(0x400000) || sub_4E3BA0(*(unsigned __int16 *)(a1 + 4)) )
  {
    if ( a3 )
    {
      v6 = sub_426A70();
      *(float *)(a1 + 56) = *(float *)(a1 + 56) - (double)(int)(23 * *(_DWORD *)v6) + (double)*a3 - 11.0;
      *(float *)(a1 + 60) = *(float *)(a1 + 60) - (double)(int)(23 * *((_DWORD *)v6 + 1)) + (double)a3[1] - 11.0;
    }
    if ( sub_40A5C0(0x400000) )
    {
      sub_5048A0(a1);
      result = 1;
    }
    else if ( sub_40A5C0(0x200000) || sub_4E3AD0(*(unsigned __int16 *)(a1 + 4)) )
    {
      sub_4DAA50(a1, a2, *(float *)(a1 + 56), *(float *)(a1 + 60));
      result = 1;
    }
    else
    {
      v7 = *(_DWORD *)(a1 + 504);
      if ( v7 )
      {
        do
        {
          v8 = *(_DWORD *)(v7 + 496);
          sub_4E38A0(v7);
          v7 = v8;
        }
        while ( v8 );
      }
      *(_DWORD *)(a1 + 504) = 0;
      sub_4E38A0(a1);
      result = 0;
    }
  }
  else
  {
    v3 = *(_DWORD *)(a1 + 504);
    if ( v3 )
    {
      do
      {
        v4 = *(_DWORD *)(v3 + 496);
        sub_4E38A0(v3);
        v3 = v4;
      }
      while ( v4 );
    }
    sub_4E38A0(a1);
    result = 0;
  }
  return result;
}

//----- (004F40A0) --------------------------------------------------------
char __cdecl sub_4F40A0(int a1)
{
  int v2; // eax
  const char *v3; // esi

  if ( a1 )
  {
    if ( *(_DWORD *)a1 )
      return -1;
    if ( *(_DWORD *)(a1 + 504) )
      return -1;
    if ( *(_DWORD *)(a1 + 516) )
      return -1;
    if ( *(_BYTE *)(a1 + 52) )
      return -1;
    v2 = sub_4E3B70(*(unsigned __int16 *)(a1 + 4));
    if ( (*(_DWORD *)(a1 + 16) ^ *(_DWORD *)(v2 + 32)) & 0x11408162 )
      return -1;
    if ( (*(_BYTE *)(a1 + 20) ^ *(_BYTE *)(v2 + 36)) & 0x5E )
      return -1;
    if ( sub_40A5C0(6291456) )
    {
      v3 = *(const char **)(a1 + 756);
      if ( v3 && strlen(v3) )
        return -1;
    }
    else if ( sub_40A5C0(1) && *(int *)(a1 + 768) != -1 )
    {
      return -1;
    }
  }
  return 0;
}

//----- (004F4170) --------------------------------------------------------
int __cdecl sub_4F4170(int a1, int a2, int a3)
{
  _BYTE **v3; // esi
  _BYTE *v4; // ebx
  unsigned int v5; // edx
  _BYTE *v6; // eax
  int v7; // eax
  int v8; // ebx
  int v9; // ebp
  _DWORD *v10; // edi
  _BYTE *v11; // edx
  int result; // eax
  _BYTE *v13; // eax
  int *v14; // ebx
  _BYTE *v15; // edi
  unsigned __int16 v16; // ax
  _BYTE *j; // edi
  unsigned int i; // edi
  int v19; // [esp+10h] [ebp-18h]
  int v20; // [esp+14h] [ebp-14h]
  int v21; // [esp+18h] [ebp-10h]
  int v22; // [esp+1Ch] [ebp-Ch]
  int v23[2]; // [esp+20h] [ebp-8h]

  v3 = (_BYTE **)a1;
  LOBYTE(v20) = 0;
  if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
    *(_DWORD *)(a1 + 136) = 0;
  sub_426AC0((_BYTE *)v3 + 40, 4u);
  v4 = v3[4];
  v21 = (unsigned int)v3[4] & 0x11408162;
  sub_426AC0(&v21, 4u);
  v5 = (unsigned int)v3[4] & 0xEEBF7E9D;
  v3[4] = (_BYTE *)v5;
  v6 = (_BYTE *)v5;
  if ( (unsigned __int8)v4 & 0x40 )
  {
    LOBYTE(v6) = v5 | 0x40;
    v3[4] = v6;
  }
  v7 = v21;
  v3[4] = (_BYTE *)(v21 | (unsigned int)v3[4]);
  if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
  {
    if ( v7 & 0x1000000 )
      sub_4E75B0((int)v3);
    else
      sub_4E7600((int)v3);
  }
  v8 = a3;
  v9 = a2;
  if ( *(_DWORD *)&byte_5D4594[3803300] )
  {
    if ( a3 < 40 || a2 < 4 )
    {
      sub_426AC0(v23, 8u);
      v10 = v3 + 14;
      *((float *)v3 + 14) = (double)v23[0];
      *((float *)v3 + 15) = (double)v23[1];
    }
    else
    {
      v10 = v3 + 14;
      sub_426AC0((_BYTE *)v3 + 56, 4u);
      sub_426AC0((_BYTE *)v3 + 60, 4u);
    }
    v11 = (_BYTE *)v10[1];
    v3[16] = (_BYTE *)*v10;
    v3[17] = v11;
  }
  else
  {
    sub_426AC0((_BYTE *)v3 + 56, 4u);
    sub_426AC0((_BYTE *)v3 + 60, 4u);
  }
  if ( v8 >= 10 )
  {
    if ( *v3 )
      LOBYTE(v19) = strlen(*v3);
    else
      LOBYTE(v19) = 0;
    sub_426AC0(&v19, 1u);
    if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
    {
      if ( (_BYTE)v19 )
      {
        result = (int)malloc((unsigned __int8)v19 + 1);
        *v3 = (_BYTE *)result;
        if ( !result )
          return result;
      }
    }
    sub_426AC0(*v3, (unsigned __int8)v19);
    if ( *v3 )
      (*v3)[(unsigned __int8)v19] = 0;
  }
  if ( v8 >= 20 )
    sub_426AC0((_BYTE *)v3 + 52, 1u);
  if ( v8 >= 30 )
  {
    v13 = v3[126];
    for ( LOBYTE(v20) = 0; v13; LOBYTE(v20) = v20 + 1 )
      v13 = (_BYTE *)*((_DWORD *)v13 + 124);
    sub_426AC0(&v20, 1u);
    if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
      v3[34] = (_BYTE *)(unsigned __int8)v20;
  }
  if ( v8 >= 40 )
  {
    v14 = (int *)(v3 + 11);
    sub_426AC0((_BYTE *)v3 + 44, 4u);
    if ( !v3[11] && *(_DWORD *)&byte_5D4594[3803300] == 1 && !sub_40A5C0(0x200000) && !sub_40A5C0(0x400000) )
      *v14 = (*(_DWORD *)&byte_587000[201376])++;
    if ( v9 >= 2 )
    {
      v15 = v3[129];
      v16 = 0;
      a1 = 0;
      if ( v15 )
      {
        do
        {
          if ( !(v15[16] & 0x20) && sub_4E3B80(*((unsigned __int16 *)v15 + 2)) )
            ++a1;
          v15 = (_BYTE *)*((_DWORD *)v15 + 128);
        }
        while ( v15 );
        v16 = a1;
      }
      if ( v9 < 5 )
      {
        v22 = v16;
        sub_426AC0(&v22, 4u);
        a1 = v22;
      }
      else
      {
        sub_426AC0(&a1, 2u);
      }
      if ( *(_DWORD *)&byte_5D4594[3803300] )
      {
        for ( i = 0; i < (unsigned __int16)a1; ++i )
        {
          sub_426AC0(&a3, 4u);
          if ( !sub_40A5C0(0x200000) && !sub_40A5C0(0x400000) )
            sub_516F90(*v14, a3);
        }
      }
      else
      {
        for ( j = v3[129]; j; j = (_BYTE *)*((_DWORD *)j + 128) )
        {
          if ( !(j[16] & 0x20) && sub_4E3B80(*((unsigned __int16 *)j + 2)) )
            sub_426AC0(j + 44, 4u);
        }
      }
    }
    if ( v9 >= 3 )
    {
      v21 = (unsigned int)v3[5] & 0x5E;
      sub_426AC0(&v21, 4u);
      sub_4E4780((int)v3, 94);
      sub_4E4800((int)v3, (int *)v21);
    }
  }
  return 1;
}

//----- (004F4530) --------------------------------------------------------
int __cdecl sub_4F4530(int *a1, int a2)
{
  int *v2; // esi
  int v3; // edi
  int v4; // ecx
  __int16 v5; // ax
  int result; // eax
  int *v7; // ebp
  int *v8; // edi
  int v9; // ecx
  int v10; // ebx
  unsigned int v11; // edx
  unsigned int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // edi
  int k; // edi
  unsigned int j; // edi
  int v18; // [esp+10h] [ebp-1Ch]
  int v19; // [esp+14h] [ebp-18h]
  int i; // [esp+18h] [ebp-14h]
  int v21; // [esp+1Ch] [ebp-10h]
  int v22[2]; // [esp+20h] [ebp-Ch]
  int v23; // [esp+28h] [ebp-4h]

  v2 = a1;
  v3 = a2;
  v4 = a1[34];
  v5 = 0;
  LOBYTE(v19) = 0;
  v18 = 0;
  v23 = v4;
  if ( a2 >= 40 || !*(_DWORD *)&byte_5D4594[3803300] )
  {
    v18 = 64;
    sub_426AC0(&v18, 2u);
    v5 = v18;
    if ( (__int16)v18 > 64 )
      return 0;
  }
  if ( v3 < 40 || v5 < 61 )
    return sub_4F4170((int)v2, v5, v3);
  if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
    v2[34] = 0;
  sub_426AC0((_BYTE *)v2 + 40, 4u);
  v7 = v2 + 11;
  sub_426AC0((_BYTE *)v2 + 44, 4u);
  if ( !v2[11] && *(_DWORD *)&byte_5D4594[3803300] == 1 && !sub_40A5C0(0x200000) && !sub_40A5C0(0x400000) )
    *v7 = (*(_DWORD *)&byte_587000[201376])++;
  if ( *(_DWORD *)&byte_5D4594[3803300] )
  {
    if ( (__int16)v18 < 4 )
    {
      sub_426AC0(v22, 8u);
      v8 = v2 + 14;
      *((float *)v2 + 14) = (double)v22[0];
      *((float *)v2 + 15) = (double)v22[1];
    }
    else
    {
      v8 = v2 + 14;
      sub_426AC0((_BYTE *)v2 + 56, 4u);
      sub_426AC0((_BYTE *)v2 + 60, 4u);
    }
    v9 = v8[1];
    v2[16] = *v8;
    v2[17] = v9;
  }
  else
  {
    sub_426AC0((_BYTE *)v2 + 56, 4u);
    sub_426AC0((_BYTE *)v2 + 60, 4u);
  }
  LOBYTE(a1) = sub_4F40A0((int)v2);
  sub_426AC0(&a1, 1u);
  if ( !(_BYTE)a1 )
    return 1;
  v10 = v2[4];
  v21 = v2[4] & 0x11408162;
  sub_426AC0(&v21, 4u);
  v11 = v2[4] & 0xEEBF7E9D;
  v2[4] = v11;
  v12 = v11;
  if ( v10 & 0x40 )
  {
    LOBYTE(v12) = v11 | 0x40;
    v2[4] = v12;
  }
  v13 = v21;
  v2[4] |= v21;
  if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
  {
    if ( v13 & 0x1000000 )
      sub_4E75B0((int)v2);
    else
      sub_4E7600((int)v2);
  }
  if ( *v2 )
    LOBYTE(a2) = strlen((const char *)*v2);
  else
    LOBYTE(a2) = 0;
  sub_426AC0(&a2, 1u);
  if ( *(_DWORD *)&byte_5D4594[3803300] != 1
    || !(_BYTE)a2
    || (result = (int)malloc((unsigned __int8)a2 + 1), (*v2 = result) != 0) )
  {
    sub_426AC0((_BYTE *)*v2, (unsigned __int8)a2);
    if ( *v2 )
      *(_BYTE *)((unsigned __int8)a2 + *v2) = 0;
    sub_426AC0((_BYTE *)v2 + 52, 1u);
    v14 = v2[126];
    for ( LOBYTE(v19) = 0; v14; LOBYTE(v19) = v19 + 1 )
      v14 = *(_DWORD *)(v14 + 496);
    sub_426AC0(&v19, 1u);
    if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
      v2[34] = (unsigned __int8)v19;
    v15 = v2[129];
    for ( i = 0; v15; v15 = *(_DWORD *)(v15 + 512) )
    {
      if ( !(*(_BYTE *)(v15 + 16) & 0x20) && sub_4E3B80(*(unsigned __int16 *)(v15 + 4)) )
        ++i;
    }
    sub_426AC0(&i, 2u);
    if ( *(_DWORD *)&byte_5D4594[3803300] )
    {
      for ( j = 0; j < (unsigned __int16)i; ++j )
      {
        sub_426AC0(v22, 4u);
        if ( !sub_40A5C0(0x200000) && !sub_40A5C0(0x400000) )
          sub_516F90(*v7, v22[0]);
      }
    }
    else
    {
      for ( k = v2[129]; k; k = *(_DWORD *)(k + 512) )
      {
        if ( !(*(_BYTE *)(k + 16) & 0x20) && sub_4E3B80(*(unsigned __int16 *)(k + 4)) )
          sub_426AC0((_BYTE *)(k + 44), 4u);
      }
    }
    v21 = v2[5] & 0x5E;
    sub_426AC0(&v21, 4u);
    sub_4E4780((int)v2, 94);
    sub_4E4800((int)v2, (int *)v21);
    if ( (__int16)v18 < 63 || (result = sub_4F5580((int)(v2 + 191), (char *)v2[189])) != 0 )
    {
      if ( (__int16)v18 >= 64 )
      {
        v22[0] = v23 - *(_DWORD *)&byte_5D4594[2598000];
        sub_426AC0(v22, 4u);
        if ( v22[0] > 0 && *(_DWORD *)&byte_5D4594[3803300] == 1 )
        {
          if ( v2[4] & 0x400000 )
            v2[32] = v22[0];
        }
      }
      return 1;
    }
  }
  return result;
}

//----- (004F49A0) --------------------------------------------------------
int __cdecl sub_4F49A0(int a1)
{
  int *v1; // esi
  int v2; // edi
  int result; // eax

  v1 = (int *)a1;
  v2 = *(_DWORD *)(a1 + 136);
  a1 = 60;
  sub_426AC0(&a1, 2u);
  if ( (__int16)a1 > 60 )
    return 0;
  result = sub_4F4530(v1, (__int16)a1);
  if ( result )
  {
    if ( !v1[34] || *(_DWORD *)&byte_5D4594[3803300] != 1 || (result = sub_4F3E30(a1, (int)v1, v1[34])) != 0 )
    {
      v1[34] = v2;
      result = 1;
    }
  }
  return result;
}

//----- (004F4A20) --------------------------------------------------------
int __cdecl sub_4F4A20(int a1)
{
  int v1; // esi
  int v2; // edi
  int result; // eax

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 136);
  a1 = 60;
  sub_426AC0(&a1, 2u);
  if ( (__int16)a1 > 60 )
    return 0;
  result = sub_4F4530((int *)v1, (__int16)a1);
  if ( result )
  {
    sub_426AC0(*(_BYTE **)(v1 + 700), 4u);
    if ( !*(_DWORD *)(v1 + 136)
      || *(_DWORD *)&byte_5D4594[3803300] != 1
      || (result = sub_4F3E30(a1, v1, *(_DWORD *)(v1 + 136))) != 0 )
    {
      *(_DWORD *)(v1 + 136) = v2;
      result = 1;
    }
  }
  return result;
}

//----- (004F4AB0) --------------------------------------------------------
int __cdecl sub_4F4AB0(int a1)
{
  int *v1; // esi
  int v2; // ebx
  int v3; // edi
  int result; // eax
  size_t v5; // [esp+Ch] [ebp-4h]

  v1 = (int *)a1;
  v2 = *(_DWORD *)(a1 + 736);
  v3 = *(_DWORD *)(a1 + 136);
  v5 = strlen(*(const char **)(a1 + 736)) + 1;
  a1 = 60;
  sub_426AC0(&a1, 2u);
  if ( (__int16)a1 > 60 )
    return 0;
  result = sub_4F4530(v1, (__int16)a1);
  if ( result )
  {
    if ( (__int16)a1 >= 2 )
    {
      sub_426AC0(&v5, 4u);
      sub_426AC0((_BYTE *)v2, v5);
    }
    else
    {
      sub_426AC0((_BYTE *)v2, v5);
    }
    if ( *(_DWORD *)&byte_5D4594[3803300] != 1
      || (*(_DWORD *)(v2 + 256) = 0, !v1[34])
      || (result = sub_4F3E30(a1, (int)v1, v1[34])) != 0 )
    {
      v1[34] = v3;
      result = 1;
    }
  }
  return result;
}

//----- (004F4B90) --------------------------------------------------------
int __cdecl sub_4F4B90(int a1)
{
  int *v1; // ebp
  _BYTE *v2; // ebx
  int v3; // edi
  int result; // eax
  _BYTE *i; // esi
  size_t v6; // [esp+Ch] [ebp-4h]

  v1 = (int *)a1;
  v2 = *(_BYTE **)(a1 + 700);
  v3 = *(_DWORD *)(a1 + 136);
  v6 = strlen(*(const char **)(a1 + 700)) + 1;
  a1 = 60;
  sub_426AC0(&a1, 2u);
  if ( (__int16)a1 > 60 )
    return 0;
  result = sub_4F4530(v1, (__int16)a1);
  if ( result )
  {
    if ( (__int16)a1 >= 2 )
    {
      sub_426AC0(&v6, 4u);
      sub_426AC0(v2, v6);
    }
    else if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
    {
      for ( i = v2; ; ++i )
      {
        sub_426AC0(i, 1u);
        if ( !*i )
          break;
      }
    }
    else
    {
      sub_426AC0(v2, v6);
    }
    if ( (__int16)a1 >= 31 )
    {
      sub_426AC0(v2 + 80, 4u);
      sub_426AC0(v2 + 84, 4u);
    }
    if ( !v1[34] || *(_DWORD *)&byte_5D4594[3803300] != 1 || (result = sub_4F3E30(a1, (int)v1, v1[34])) != 0 )
    {
      v1[34] = v3;
      result = 1;
    }
  }
  return result;
}

//----- (004F4CB0) --------------------------------------------------------
int __cdecl sub_4F4CB0(int a1)
{
  int v1; // edi
  int v2; // esi
  int result; // eax
  int v4; // ebx
  int v5; // ebp
  int v6; // [esp+8h] [ebp-14h]
  int v7; // [esp+Ch] [ebp-10h]
  int v8; // [esp+10h] [ebp-Ch]
  int v9; // [esp+14h] [ebp-8h]
  int v10; // [esp+18h] [ebp-4h]

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 748);
  v10 = *(_DWORD *)(a1 + 136);
  v7 = 60;
  sub_426AC0(&v7, 2u);
  if ( (__int16)v7 > 60 )
    return 0;
  result = sub_4F4530((int *)v1, (__int16)v7);
  if ( result )
  {
    if ( !*(_DWORD *)&byte_5D4594[3803300] )
    {
      a1 = *(_DWORD *)(v2 + 12);
      v8 = *(unsigned __int8 *)(v2 + 1);
      v6 = *(_DWORD *)(v2 + 4);
    }
    sub_426AC0(&a1, 4u);
    sub_426AC0(&v8, 4u);
    if ( (__int16)v7 < 41 )
      v6 = a1;
    else
      sub_426AC0(&v6, 4u);
    if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
    {
      *(_DWORD *)(v2 + 12) = a1;
      *(_WORD *)(v2 + 40) = (a1 << 8) / 32;
      *(_DWORD *)(v2 + 4) = v6;
      *(_DWORD *)(v2 + 8) = a1;
      v9 = *(int *)&byte_587000[8 * v6 + 196184] / 2;
      v4 = (__int64)(((double)v9 + *(float *)(v1 + 56)) * 0.043478262);
      v9 = *(int *)&byte_587000[8 * v6 + 196188] / 2;
      v5 = (__int64)(((double)v9 + *(float *)(v1 + 60)) * 0.043478262);
      sub_410360(v1, v4, v5);
      *(_DWORD *)(v2 + 16) = v4;
      *(_DWORD *)(v2 + 20) = v5;
      *(_BYTE *)(v2 + 1) = v8;
    }
    if ( !*(_DWORD *)(v1 + 136)
      || *(_DWORD *)&byte_5D4594[3803300] != 1
      || (result = sub_4F3E30(v7, v1, *(_DWORD *)(v1 + 136))) != 0 )
    {
      *(_DWORD *)(v1 + 136) = v10;
      result = 1;
    }
  }
  return result;
}

//----- (004F4E50) --------------------------------------------------------
int __cdecl sub_4F4E50(float a1)
{
  int v1; // edi
  _BYTE *v2; // esi
  int result; // eax
  double v4; // st7
  double v5; // st7
  double v6; // st7
  char *v7; // ebp
  char *v8; // eax
  char *v9; // eax
  char *v10; // eax
  int v11; // [esp+Ch] [ebp-Ch]
  int v12; // [esp+10h] [ebp-8h]
  int v13; // [esp+14h] [ebp-4h]

  v1 = LODWORD(a1);
  v2 = *(_BYTE **)(LODWORD(a1) + 748);
  v13 = *(_DWORD *)(LODWORD(a1) + 136);
  v11 = 61;
  sub_426AC0(&v11, 2u);
  if ( (__int16)v11 > 61 )
    return 0;
  result = sub_4F4530((int *)v1, (__int16)v11);
  if ( result )
  {
    if ( *(_DWORD *)&byte_5D4594[3803300] )
    {
      sub_426AC0(&a1, 4u);
      sub_426AC0(&v12, 4u);
      v5 = (double)SLODWORD(a1);
      a1 = v5;
      *(float *)(v1 + 184) = v5;
      v6 = (double)v12;
      *(float *)(v1 + 188) = v6;
      if ( a1 > 60.0 )
        *(_DWORD *)(v1 + 184) = 1114636288;
      if ( v6 > 60.0 )
        *(_DWORD *)(v1 + 188) = 1114636288;
    }
    else
    {
      v4 = *(float *)(v1 + 188);
      LODWORD(a1) = (__int64)*(float *)(v1 + 184);
      v12 = (__int64)v4;
      sub_426AC0(&a1, 4u);
      sub_426AC0(&v12, 4u);
    }
    sub_428270((shape *)(v1 + 172));
    if ( (__int16)v11 < 41 )
    {
      sub_426AC0(&a1, 3u);
      sub_426AC0(&a1, 3u);
      sub_426AC0(&a1, 3u);
    }
    else
    {
      sub_426AC0(v2 + 54, 1u);
      sub_426AC0(v2 + 55, 1u);
      sub_426AC0(v2 + 56, 1u);
      sub_426AC0(v2 + 57, 1u);
      sub_426AC0(v2 + 58, 1u);
      sub_426AC0(v2 + 59, 1u);
    }
    sub_426AC0(v2, 4u);
    if ( (__int16)v11 >= 3 )
    {
      v7 = *(char **)(v1 + 756);
      if ( v7 )
        v8 = v7 + 256;
      else
        v8 = 0;
      sub_4F5580((int)(v2 + 20), v8);
      if ( v7 )
        v9 = v7 + 384;
      else
        v9 = 0;
      sub_4F5580((int)(v2 + 28), v9);
      if ( (__int16)v11 >= 31 )
      {
        if ( v7 )
          v10 = v7 + 512;
        else
          v10 = 0;
        sub_4F5580((int)(v2 + 12), v10);
      }
    }
    else
    {
      sub_4F5540((int)(v2 + 20));
      sub_4F5540((int)(v2 + 28));
    }
    if ( *(_DWORD *)&byte_5D4594[3803300] == 1 && (__int16)v11 < 31 )
    {
      sub_426AC0(&a1, 1u);
      sub_426AA0(4 * LOBYTE(a1));
      sub_426AC0(&a1, 1u);
      sub_426AA0(4 * LOBYTE(a1));
      sub_426AC0(&a1, 1u);
      sub_426AA0(4 * LOBYTE(a1));
      sub_426AC0(&a1, 1u);
      sub_426AA0(4 * LOBYTE(a1));
    }
    sub_426AC0(v2 + 44, 4u);
    sub_426AC0(v2 + 48, 4u);
    if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
    {
      v2[52] = 0;
      v2[53] = 0;
    }
    if ( !*(_DWORD *)&byte_5D4594[3803300] || (__int16)v11 >= 21 )
    {
      sub_426AC0(v2 + 52, 1u);
      sub_426AC0(v2 + 53, 1u);
    }
    if ( (__int16)v11 >= 61 )
    {
      sub_426AC0(v2 + 8, 1u);
      sub_426AC0(v2 + 9, 1u);
      sub_426AC0((_BYTE *)(v1 + 132), 4u);
      if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
        sub_4E4880(v1, *(_DWORD *)(v1 + 132));
    }
    if ( !*(_DWORD *)(v1 + 136)
      || *(_DWORD *)&byte_5D4594[3803300] != 1
      || (result = sub_4F3E30(v11, v1, *(_DWORD *)(v1 + 136))) != 0 )
    {
      result = 1;
      *(_DWORD *)(v1 + 136) = v13;
    }
  }
  return result;
}

//----- (004F51D0) --------------------------------------------------------
int __cdecl sub_4F51D0(int a1)
{
  int *v1; // edi
  int v2; // ebx
  int v3; // esi
  int result; // eax
  char *v5; // eax
  int v6; // [esp+Ch] [ebp-4h]

  v1 = (int *)a1;
  v2 = *(_DWORD *)(a1 + 756);
  v3 = *(_DWORD *)(a1 + 700);
  v6 = *(_DWORD *)(a1 + 136);
  a1 = 60;
  sub_426AC0(&a1, 2u);
  if ( (__int16)a1 > 60 )
    return 0;
  result = sub_4F4530(v1, (__int16)a1);
  if ( result )
  {
    if ( (__int16)a1 < 42 )
      *(_DWORD *)(v3 + 24) = 0;
    else
      sub_426AC0((_BYTE *)(v3 + 24), 4u);
    if ( (__int16)a1 < 41 )
    {
      sub_426AC0((_BYTE *)(v3 + 8), 8u);
      *(_DWORD *)(v3 + 4) = -1;
      *(_DWORD *)v3 = 0;
      *(_DWORD *)(v3 + 16) = 0;
      *(_WORD *)(v3 + 20) = 0;
    }
    else
    {
      if ( v2 )
        v5 = (char *)(v2 + 128);
      else
        v5 = 0;
      sub_4F5580(v3, v5);
      sub_426AC0((_BYTE *)(v3 + 8), 8u);
      sub_426AC0((_BYTE *)(v3 + 16), 4u);
      sub_426AC0((_BYTE *)(v3 + 20), 2u);
    }
    if ( !v1[34] || *(_DWORD *)&byte_5D4594[3803300] != 1 || (result = sub_4F3E30(a1, (int)v1, v1[34])) != 0 )
    {
      result = 1;
      v1[34] = v6;
    }
  }
  return result;
}

//----- (004F5300) --------------------------------------------------------
int __cdecl sub_4F5300(int a1)
{
  int *v1; // esi
  int v2; // edi
  int v3; // ebx
  int result; // eax
  int v5; // [esp+Ch] [ebp-4h]

  v1 = (int *)a1;
  v2 = *(_DWORD *)(a1 + 748);
  v3 = *(_DWORD *)(a1 + 136);
  a1 = 60;
  sub_426AC0(&a1, 2u);
  if ( (__int16)a1 > 60 )
    return 0;
  result = sub_4F4530(v1, (__int16)a1);
  if ( result )
  {
    if ( *(_DWORD *)&byte_5D4594[3803300] )
    {
      sub_426AC0((_BYTE *)(v2 + 16), 4u);
    }
    else
    {
      if ( *(_DWORD *)(v2 + 12) )
        v5 = *(_DWORD *)(v2 + 16);
      else
        v5 = 0;
      sub_426AC0(&v5, 4u);
    }
    if ( !v1[34] || *(_DWORD *)&byte_5D4594[3803300] != 1 || (result = sub_4F3E30(a1, (int)v1, v1[34])) != 0 )
    {
      v1[34] = v3;
      result = 1;
    }
  }
  return result;
}

//----- (004F53D0) --------------------------------------------------------
int __cdecl sub_4F53D0(int a1)
{
  int *v1; // esi
  _BYTE *v2; // edi
  int v3; // ebx
  int result; // eax

  v1 = (int *)a1;
  v2 = *(_BYTE **)(a1 + 748);
  v3 = *(_DWORD *)(a1 + 136);
  a1 = 61;
  sub_426AC0(&a1, 2u);
  if ( (__int16)a1 > 61 )
    return 0;
  result = sub_4F4530(v1, (__int16)a1);
  if ( result )
  {
    sub_426AC0(v2 + 8, 4u);
    if ( (__int16)a1 >= 41 )
      sub_426AC0(v2 + 16, 4u);
    if ( (__int16)a1 >= 61 )
      sub_426AC0(v2 + 12, 1u);
    if ( !v1[34] || *(_DWORD *)&byte_5D4594[3803300] != 1 || (result = sub_4F3E30(a1, (int)v1, v1[34])) != 0 )
    {
      v1[34] = v3;
      result = 1;
    }
  }
  return result;
}

//----- (004F54A0) --------------------------------------------------------
int __cdecl sub_4F54A0(int a1)
{
  int *v1; // esi
  int v2; // edi
  int v3; // ebx
  int result; // eax

  v1 = (int *)a1;
  v2 = *(_DWORD *)(a1 + 748);
  v3 = *(_DWORD *)(a1 + 136);
  a1 = 60;
  sub_426AC0(&a1, 2u);
  if ( (__int16)a1 > 60 )
    return 0;
  result = sub_4F4530(v1, (__int16)a1);
  if ( result )
  {
    sub_426AC0((_BYTE *)(v2 + 8), 4u);
    if ( !v1[34] || *(_DWORD *)&byte_5D4594[3803300] != 1 || (result = sub_4F3E30(a1, (int)v1, v1[34])) != 0 )
    {
      v1[34] = v3;
      result = 1;
    }
  }
  return result;
}

//----- (004F5540) --------------------------------------------------------
int __cdecl sub_4F5540(int a1)
{
  int result; // eax
  FILE *v2; // eax

  result = *(_DWORD *)&byte_5D4594[3803300];
  if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
  {
    v2 = sub_426A60();
    sub_502790(v2, (char *)a1);
    result = sub_40A5C0(0x400000);
    if ( !result )
      *(_DWORD *)(a1 + 4) = -1;
  }
  return result;
}

//----- (004F5580) --------------------------------------------------------
int __cdecl sub_4F5580(int a1, char *a2)
{
  bool v3; // zf
  int v4; // eax
  size_t v5; // [esp+Ch] [ebp-408h]
  int v6; // [esp+10h] [ebp-404h]
  char v7[1024]; // [esp+14h] [ebp-400h]

  v6 = 1;
  sub_426AC0(&v6, 2u);
  if ( (__int16)v6 > 1 )
    return 0;
  if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
  {
    sub_426AC0(&v5, 4u);
    if ( v5 >= 0x400 )
      return 0;
    sub_426AC0(v7, v5);
    v3 = v5 == 0;
    v7[v5] = 0;
    if ( !v3 )
    {
      if ( sub_40A5C0(6291456) )
        strcpy(a2, v7);
      else
        *(_DWORD *)(a1 + 4) = sub_5071D0(v7);
    }
  }
  else
  {
    if ( sub_40A5C0(6291456) )
    {
      if ( a2 )
      {
        v5 = strlen(a2);
        sub_426AC0(&v5, 4u);
        sub_426AC0(a2, v5);
        goto LABEL_16;
      }
    }
    else
    {
      v4 = *(_DWORD *)(a1 + 4);
      if ( v4 != -1 )
      {
        v5 = strlen(*(const char **)(48 * v4 + *(_DWORD *)&byte_5D4594[1599636]));
        sub_426AC0(&v5, 4u);
        sub_426AC0(*(_BYTE **)(48 * *(_DWORD *)(a1 + 4) + *(_DWORD *)&byte_5D4594[1599636]), v5);
        goto LABEL_16;
      }
    }
    v5 = 0;
    sub_426AC0(&v5, 4u);
  }
LABEL_16:
  sub_426AC0((_BYTE *)a1, 4u);
  return 1;
}
// 4F5580: using guessed type char var_400[1024];

//----- (004F5730) --------------------------------------------------------
int __cdecl sub_4F5730(int a1)
{
  int v1; // edi
  int v2; // esi
  int v3; // ebp
  int result; // eax
  int *v5; // eax
  int *v6; // esi
  int v7; // [esp+Ch] [ebp-4h]

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 748);
  v3 = *(_DWORD *)(a1 + 136);
  v7 = 60;
  sub_426AC0(&v7, 2u);
  if ( (__int16)v7 > 60 )
    return 0;
  result = sub_4F4530((int *)v1, (__int16)v7);
  if ( result )
  {
    sub_426AC0((_BYTE *)(v2 + 4), 4u);
    sub_426AC0((_BYTE *)(v2 + 8), 4u);
    sub_426AC0((_BYTE *)(v2 + 32), 4u);
    if ( (__int16)v7 >= 41 )
    {
      sub_426AC0((_BYTE *)v2, 1u);
      if ( *(_DWORD *)&byte_5D4594[3803300] )
      {
        sub_426AC0((_BYTE *)(v2 + 16), 4u);
        sub_426AC0((_BYTE *)(v2 + 24), 4u);
      }
      else
      {
        v5 = *(int **)(v2 + 12);
        a1 = 0;
        if ( v5 )
          a1 = *v5;
        sub_426AC0(&a1, 4u);
        v6 = *(int **)(v2 + 20);
        a1 = 0;
        if ( v6 )
          a1 = *v6;
        sub_426AC0(&a1, 4u);
      }
    }
    if ( (__int16)v7 >= 42 )
    {
      sub_426AC0((_BYTE *)(v1 + 548), 4u);
      sub_426AC0((_BYTE *)(v1 + 544), 4u);
    }
    if ( !*(_DWORD *)(v1 + 136)
      || *(_DWORD *)&byte_5D4594[3803300] != 1
      || (result = sub_4F3E30(v7, v1, *(_DWORD *)(v1 + 136))) != 0 )
    {
      *(_DWORD *)(v1 + 136) = v3;
      result = 1;
    }
  }
  return result;
}

//----- (004F5890) --------------------------------------------------------
int __cdecl sub_4F5890(int a1)
{
  int v1; // edi
  int v2; // ebp
  int v3; // eax
  int result; // eax
  _BYTE *v5; // esi
  int v6; // edi
  int *v7; // ebp
  int v8; // ebx
  char *v9; // eax
  size_t v10; // [esp-Ch] [ebp-128h]
  int v11; // [esp+8h] [ebp-114h]
  int v12; // [esp+Ch] [ebp-110h]
  int *v13; // [esp+10h] [ebp-10Ch]
  int v14; // [esp+14h] [ebp-108h]
  int v15; // [esp+18h] [ebp-104h]
  char v16[256]; // [esp+1Ch] [ebp-100h]

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 692);
  v3 = *(_DWORD *)(a1 + 136);
  v13 = *(int **)(a1 + 692);
  v14 = v3;
  v12 = 60;
  sub_426AC0(&v12, 2u);
  if ( (__int16)v12 > 60 )
    return 0;
  result = sub_4F4530((int *)a1, (__int16)v12);
  if ( result )
  {
    if ( (__int16)v12 < 41 )
      sub_426AC0(&v15, 4u);
    sub_426AC0((_BYTE *)(a1 + 124), 1u);
    sub_426AC0((_BYTE *)(v2 + 28), 4u);
    sub_426AC0((_BYTE *)(v2 + 32), 4u);
    v5 = (_BYTE *)(v2 + 20);
    sub_426AC0((_BYTE *)(v2 + 20), 1u);
    if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
    {
      if ( (__int16)v12 < 31 )
      {
        sub_426AC0((_BYTE *)v2, 0x14u);
        goto LABEL_16;
      }
      v6 = 0;
      if ( !*v5 )
      {
        v1 = a1;
        v2 = (int)v13;
        goto LABEL_19;
      }
      v7 = v13;
      do
      {
        sub_426AC0(&v11, 1u);
        sub_426AC0(v16, (unsigned __int8)v11);
        v16[(unsigned __int8)v11] = 0;
        *v7 = sub_4243F0(v16);
        ++v6;
        ++v7;
      }
      while ( v6 < (unsigned __int8)*v5 );
    }
    else
    {
      v8 = 0;
      if ( !*v5 )
        goto LABEL_16;
      do
      {
        LOBYTE(v11) = strlen(sub_424870(*(_DWORD *)v2));
        sub_426AC0(&v11, 1u);
        v10 = (unsigned __int8)v11;
        v9 = sub_424870(*(_DWORD *)v2);
        sub_426AC0(v9, v10);
        ++v8;
        v2 += 4;
      }
      while ( v8 < (unsigned __int8)*v5 );
    }
    v1 = a1;
    v2 = (int)v13;
LABEL_16:
    if ( *(_DWORD *)&byte_5D4594[3803300] != 1 )
    {
LABEL_20:
      if ( !*(_DWORD *)(v1 + 136)
        || *(_DWORD *)&byte_5D4594[3803300] != 1
        || (result = sub_4F3E30(v12, v1, *(_DWORD *)(v1 + 136))) != 0 )
      {
        result = 1;
        *(_DWORD *)(v1 + 136) = v14;
      }
      return result;
    }
LABEL_19:
    *(_WORD *)(v1 + 126) = *(_WORD *)(v1 + 124);
    *(_DWORD *)(v2 + 24) = 0;
    goto LABEL_20;
  }
  return result;
}
// 4F5890: using guessed type char var_100[256];

//----- (004F5AA0) --------------------------------------------------------
int __cdecl sub_4F5AA0(int *a1)
{
  int result; // eax
  _DWORD *v2; // eax
  int v3; // [esp+8h] [ebp-98h]
  int v4; // [esp+Ch] [ebp-94h]
  int v5; // [esp+10h] [ebp-90h]
  char v6[140]; // [esp+14h] [ebp-8Ch]

  v5 = a1[34];
  memset(v6, 0, sizeof(v6));
  v3 = 60;
  sub_426AC0(&v3, 2u);
  if ( (__int16)v3 > 60 )
    return 0;
  result = sub_4F4530(a1, (__int16)v3);
  if ( result )
  {
    if ( *(_DWORD *)&byte_5D4594[3803300] )
      goto LABEL_14;
    if ( sub_40A5C0(6291456) )
    {
      v2 = (_DWORD *)sub_45A060();
      if ( !v2 )
        goto LABEL_14;
      while ( v2[32] != a1[10] )
      {
        v2 = (_DWORD *)sub_45A070((int)v2);
        if ( !v2 )
          goto LABEL_14;
      }
    }
    else if ( a1[2] & 0x20400000 )
    {
      v2 = sub_45A720(a1[10]);
    }
    else
    {
      v2 = sub_45A6F0(a1[9]);
    }
    qmemcpy(v6, v2 + 34, sizeof(v6));
LABEL_14:
    if ( (__int16)v3 >= 2 )
    {
      sub_426AC0(v6, 4u);
      sub_426AC0(&v6[4], 4u);
      sub_426AC0(&v6[8], 4u);
      sub_426AC0(&v6[12], 4u);
      sub_426AC0(&v6[16], 0xCu);
      sub_426AC0(&v6[28], 2u);
      sub_426AC0(&v6[30], 2u);
      sub_426AC0(&v6[32], 4u);
      sub_426AC0(&v6[40], 2u);
      sub_426AC0(&v6[42], 0x30u);
      sub_426AC0(&v6[90], 0x10u);
      sub_426AC0(&v6[106], 0x10u);
      sub_426AC0(&v6[122], 2u);
      sub_426AC0(&v6[124], 2u);
      sub_426AC0(&v6[126], 2u);
      sub_426AC0(&v6[128], 4u);
      sub_426AC0(&v6[134], 2u);
      sub_426AC0(&v6[136], 2u);
      sub_426AC0(&v6[138], 1u);
      if ( (__int16)v3 > 40 )
      {
        if ( (__int16)v3 >= 42 )
        {
          sub_426AC0(&v6[36], 4u);
        }
        else
        {
          sub_426AC0(&v4, 1u);
          *(_DWORD *)&v6[36] = (unsigned __int8)v4;
        }
LABEL_19:
        if ( *(_DWORD *)&byte_5D4594[3803300] == 1 )
          goto LABEL_20;
LABEL_22:
        if ( !a1[34] || *(_DWORD *)&byte_5D4594[3803300] != 1 || (result = sub_4F3E30(v3, (int)a1, a1[34])) != 0 )
        {
          a1[34] = v5;
          result = 1;
        }
        return result;
      }
      if ( *(_DWORD *)&byte_5D4594[3803300] != 1 )
        goto LABEL_22;
      *(_DWORD *)&v6[36] = 0;
    }
    else
    {
      sub_426AC0(v6, 4u);
      sub_426AC0(&v6[4], 4u);
      sub_426AC0(&v6[8], 4u);
      sub_426AC0(&v6[12], 4u);
      sub_426AC0(&v6[16], 0xCu);
      sub_426AC0(&v6[28], 2u);
      sub_426AC0(&v6[30], 2u);
      sub_426AC0(&v6[32], 4u);
      *(_WORD *)&v6[40] = 0;
      *(_WORD *)&v6[122] = 0;
      *(_WORD *)&v6[124] = 0;
      *(_WORD *)&v6[126] = 0;
      *(_DWORD *)&v6[128] = 0;
      *(_WORD *)&v6[134] = 0;
      v6[138] = -128;
      if ( *(_DWORD *)&byte_5D4594[3803300] != 1 )
        goto LABEL_22;
      if ( *(float *)&v6[4] > 63.0
        || (double)*(int *)&v6[12] * *(double *)&byte_581450[9752] > *(double *)&byte_581450[9744] )
      {
        sub_484CE0((int)v6, 63.0);
        goto LABEL_19;
      }
    }
LABEL_20:
    if ( sub_40A5C0(6291456) )
      qmemcpy((void *)(a1[189] + 2432), v6, 0x8Cu);
    goto LABEL_22;
  }
  return result;
}

//----- (004F5E50) --------------------------------------------------------
int __cdecl sub_4F5E50(int a1)
{
  int *v1; // edi
  _BYTE *v2; // esi
  int v3; // ebp
  int result; // eax

  v1 = (int *)a1;
  v2 = *(_BYTE **)(a1 + 748);
  v3 = *(_DWORD *)(a1 + 136);
  a1 = 61;
  sub_426AC0(&a1, 2u);
  if ( (__int16)a1 > 61 )
    return 0;
  result = sub_4F4530(v1, (__int16)a1);
  if ( result )
  {
    sub_426AC0(v2 + 4, 4u);
    sub_426AC0(v2 + 8, 4u);
    if ( *(_DWORD *)&byte_5D4594[3803300] == 1 || sub_40A5C0(0x200000) )
      *(_DWORD *)v2 = *((_DWORD *)v2 + 1);
    if ( (__int16)a1 >= 61 )
      sub_426AC0(v2, 4u);
    if ( !v1[34] || *(_DWORD *)&byte_5D4594[3803300] != 1 || (result = sub_4F3E30(a1, (int)v1, v1[34])) != 0 )
    {
      v1[34] = v3;
      result = 1;
    }
  }
  return result;
}
